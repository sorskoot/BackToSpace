"use strict";
(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __export = (target, all) => {
    for (var name in all)
      __defProp(target, name, { get: all[name], enumerable: true });
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));
  var __decorateClass = (decorators, target, key, kind) => {
    var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;
    for (var i = decorators.length - 1, decorator; i >= 0; i--)
      if (decorator = decorators[i])
        result = (kind ? decorator(target, key, result) : decorator(result)) || result;
    if (kind && result)
      __defProp(target, key, result);
    return result;
  };
  var __publicField = (obj, key, value) => {
    __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
    return value;
  };
  var __accessCheck = (obj, member, msg) => {
    if (!member.has(obj))
      throw TypeError("Cannot " + msg);
  };
  var __privateGet = (obj, member, getter) => {
    __accessCheck(obj, member, "read from private field");
    return getter ? getter.call(obj) : member.get(obj);
  };
  var __privateAdd = (obj, member, value) => {
    if (member.has(obj))
      throw TypeError("Cannot add the same private member more than once");
    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
  };
  var __privateSet = (obj, member, value, setter) => {
    __accessCheck(obj, member, "write to private field");
    setter ? setter.call(obj, value) : member.set(obj, value);
    return value;
  };
  var __privateMethod = (obj, member, method) => {
    __accessCheck(obj, member, "access private method");
    return method;
  };

  // node_modules/howler/dist/howler.js
  var require_howler = __commonJS({
    "node_modules/howler/dist/howler.js"(exports) {
      (function() {
        "use strict";
        var HowlerGlobal2 = function() {
          this.init();
        };
        HowlerGlobal2.prototype = {
          /**
           * Initialize the global Howler object.
           * @return {Howler}
           */
          init: function() {
            var self2 = this || Howler2;
            self2._counter = 1e3;
            self2._html5AudioPool = [];
            self2.html5PoolSize = 10;
            self2._codecs = {};
            self2._howls = [];
            self2._muted = false;
            self2._volume = 1;
            self2._canPlayEvent = "canplaythrough";
            self2._navigator = typeof window !== "undefined" && window.navigator ? window.navigator : null;
            self2.masterGain = null;
            self2.noAudio = false;
            self2.usingWebAudio = true;
            self2.autoSuspend = true;
            self2.ctx = null;
            self2.autoUnlock = true;
            self2._setup();
            return self2;
          },
          /**
           * Get/set the global volume for all sounds.
           * @param  {Float} vol Volume from 0.0 to 1.0.
           * @return {Howler/Float}     Returns self or current volume.
           */
          volume: function(vol) {
            var self2 = this || Howler2;
            vol = parseFloat(vol);
            if (!self2.ctx) {
              setupAudioContext();
            }
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              self2._volume = vol;
              if (self2._muted) {
                return self2;
              }
              if (self2.usingWebAudio) {
                self2.masterGain.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node) {
                      sound._node.volume = sound._volume * vol;
                    }
                  }
                }
              }
              return self2;
            }
            return self2._volume;
          },
          /**
           * Handle muting and unmuting globally.
           * @param  {Boolean} muted Is muted or not.
           */
          mute: function(muted) {
            var self2 = this || Howler2;
            if (!self2.ctx) {
              setupAudioContext();
            }
            self2._muted = muted;
            if (self2.usingWebAudio) {
              self2.masterGain.gain.setValueAtTime(muted ? 0 : self2._volume, Howler2.ctx.currentTime);
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (!self2._howls[i]._webAudio) {
                var ids = self2._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self2._howls[i]._soundById(ids[j]);
                  if (sound && sound._node) {
                    sound._node.muted = muted ? true : sound._muted;
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Handle stopping all sounds globally.
           */
          stop: function() {
            var self2 = this || Howler2;
            for (var i = 0; i < self2._howls.length; i++) {
              self2._howls[i].stop();
            }
            return self2;
          },
          /**
           * Unload and destroy all currently loaded Howl objects.
           * @return {Howler}
           */
          unload: function() {
            var self2 = this || Howler2;
            for (var i = self2._howls.length - 1; i >= 0; i--) {
              self2._howls[i].unload();
            }
            if (self2.usingWebAudio && self2.ctx && typeof self2.ctx.close !== "undefined") {
              self2.ctx.close();
              self2.ctx = null;
              setupAudioContext();
            }
            return self2;
          },
          /**
           * Check for codec support of specific extension.
           * @param  {String} ext Audio file extention.
           * @return {Boolean}
           */
          codecs: function(ext) {
            return (this || Howler2)._codecs[ext.replace(/^x-/, "")];
          },
          /**
           * Setup various state values for global tracking.
           * @return {Howler}
           */
          _setup: function() {
            var self2 = this || Howler2;
            self2.state = self2.ctx ? self2.ctx.state || "suspended" : "suspended";
            self2._autoSuspend();
            if (!self2.usingWebAudio) {
              if (typeof Audio !== "undefined") {
                try {
                  var test = new Audio();
                  if (typeof test.oncanplaythrough === "undefined") {
                    self2._canPlayEvent = "canplay";
                  }
                } catch (e) {
                  self2.noAudio = true;
                }
              } else {
                self2.noAudio = true;
              }
            }
            try {
              var test = new Audio();
              if (test.muted) {
                self2.noAudio = true;
              }
            } catch (e) {
            }
            if (!self2.noAudio) {
              self2._setupCodecs();
            }
            return self2;
          },
          /**
           * Check for browser support for various codecs and cache the results.
           * @return {Howler}
           */
          _setupCodecs: function() {
            var self2 = this || Howler2;
            var audioTest = null;
            try {
              audioTest = typeof Audio !== "undefined" ? new Audio() : null;
            } catch (err) {
              return self2;
            }
            if (!audioTest || typeof audioTest.canPlayType !== "function") {
              return self2;
            }
            var mpegTest = audioTest.canPlayType("audio/mpeg;").replace(/^no$/, "");
            var ua = self2._navigator ? self2._navigator.userAgent : "";
            var checkOpera = ua.match(/OPR\/(\d+)/g);
            var isOldOpera = checkOpera && parseInt(checkOpera[0].split("/")[1], 10) < 33;
            var checkSafari = ua.indexOf("Safari") !== -1 && ua.indexOf("Chrome") === -1;
            var safariVersion = ua.match(/Version\/(.*?) /);
            var isOldSafari = checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15;
            self2._codecs = {
              mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType("audio/mp3;").replace(/^no$/, ""))),
              mpeg: !!mpegTest,
              opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
              ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              oga: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              wav: !!(audioTest.canPlayType('audio/wav; codecs="1"') || audioTest.canPlayType("audio/wav")).replace(/^no$/, ""),
              aac: !!audioTest.canPlayType("audio/aac;").replace(/^no$/, ""),
              caf: !!audioTest.canPlayType("audio/x-caf;").replace(/^no$/, ""),
              m4a: !!(audioTest.canPlayType("audio/x-m4a;") || audioTest.canPlayType("audio/m4a;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              m4b: !!(audioTest.canPlayType("audio/x-m4b;") || audioTest.canPlayType("audio/m4b;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              mp4: !!(audioTest.canPlayType("audio/x-mp4;") || audioTest.canPlayType("audio/mp4;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              dolby: !!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
              flac: !!(audioTest.canPlayType("audio/x-flac;") || audioTest.canPlayType("audio/flac;")).replace(/^no$/, "")
            };
            return self2;
          },
          /**
           * Some browsers/devices will only allow audio to be played after a user interaction.
           * Attempt to automatically unlock audio on the first user interaction.
           * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
           * @return {Howler}
           */
          _unlockAudio: function() {
            var self2 = this || Howler2;
            if (self2._audioUnlocked || !self2.ctx) {
              return;
            }
            self2._audioUnlocked = false;
            self2.autoUnlock = false;
            if (!self2._mobileUnloaded && self2.ctx.sampleRate !== 44100) {
              self2._mobileUnloaded = true;
              self2.unload();
            }
            self2._scratchBuffer = self2.ctx.createBuffer(1, 1, 22050);
            var unlock = function(e) {
              while (self2._html5AudioPool.length < self2.html5PoolSize) {
                try {
                  var audioNode = new Audio();
                  audioNode._unlocked = true;
                  self2._releaseHtml5Audio(audioNode);
                } catch (e2) {
                  self2.noAudio = true;
                  break;
                }
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node && !sound._node._unlocked) {
                      sound._node._unlocked = true;
                      sound._node.load();
                    }
                  }
                }
              }
              self2._autoResume();
              var source = self2.ctx.createBufferSource();
              source.buffer = self2._scratchBuffer;
              source.connect(self2.ctx.destination);
              if (typeof source.start === "undefined") {
                source.noteOn(0);
              } else {
                source.start(0);
              }
              if (typeof self2.ctx.resume === "function") {
                self2.ctx.resume();
              }
              source.onended = function() {
                source.disconnect(0);
                self2._audioUnlocked = true;
                document.removeEventListener("touchstart", unlock, true);
                document.removeEventListener("touchend", unlock, true);
                document.removeEventListener("click", unlock, true);
                document.removeEventListener("keydown", unlock, true);
                for (var i2 = 0; i2 < self2._howls.length; i2++) {
                  self2._howls[i2]._emit("unlock");
                }
              };
            };
            document.addEventListener("touchstart", unlock, true);
            document.addEventListener("touchend", unlock, true);
            document.addEventListener("click", unlock, true);
            document.addEventListener("keydown", unlock, true);
            return self2;
          },
          /**
           * Get an unlocked HTML5 Audio object from the pool. If none are left,
           * return a new Audio object and throw a warning.
           * @return {Audio} HTML5 Audio object.
           */
          _obtainHtml5Audio: function() {
            var self2 = this || Howler2;
            if (self2._html5AudioPool.length) {
              return self2._html5AudioPool.pop();
            }
            var testPlay = new Audio().play();
            if (testPlay && typeof Promise !== "undefined" && (testPlay instanceof Promise || typeof testPlay.then === "function")) {
              testPlay.catch(function() {
                console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
              });
            }
            return new Audio();
          },
          /**
           * Return an activated HTML5 Audio object to the pool.
           * @return {Howler}
           */
          _releaseHtml5Audio: function(audio) {
            var self2 = this || Howler2;
            if (audio._unlocked) {
              self2._html5AudioPool.push(audio);
            }
            return self2;
          },
          /**
           * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.
           * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.
           * @return {Howler}
           */
          _autoSuspend: function() {
            var self2 = this;
            if (!self2.autoSuspend || !self2.ctx || typeof self2.ctx.suspend === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (self2._howls[i]._webAudio) {
                for (var j = 0; j < self2._howls[i]._sounds.length; j++) {
                  if (!self2._howls[i]._sounds[j]._paused) {
                    return self2;
                  }
                }
              }
            }
            if (self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
            }
            self2._suspendTimer = setTimeout(function() {
              if (!self2.autoSuspend) {
                return;
              }
              self2._suspendTimer = null;
              self2.state = "suspending";
              var handleSuspension = function() {
                self2.state = "suspended";
                if (self2._resumeAfterSuspend) {
                  delete self2._resumeAfterSuspend;
                  self2._autoResume();
                }
              };
              self2.ctx.suspend().then(handleSuspension, handleSuspension);
            }, 3e4);
            return self2;
          },
          /**
           * Automatically resume the Web Audio AudioContext when a new sound is played.
           * @return {Howler}
           */
          _autoResume: function() {
            var self2 = this;
            if (!self2.ctx || typeof self2.ctx.resume === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            if (self2.state === "running" && self2.ctx.state !== "interrupted" && self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
              self2._suspendTimer = null;
            } else if (self2.state === "suspended" || self2.state === "running" && self2.ctx.state === "interrupted") {
              self2.ctx.resume().then(function() {
                self2.state = "running";
                for (var i = 0; i < self2._howls.length; i++) {
                  self2._howls[i]._emit("resume");
                }
              });
              if (self2._suspendTimer) {
                clearTimeout(self2._suspendTimer);
                self2._suspendTimer = null;
              }
            } else if (self2.state === "suspending") {
              self2._resumeAfterSuspend = true;
            }
            return self2;
          }
        };
        var Howler2 = new HowlerGlobal2();
        var Howl2 = function(o) {
          var self2 = this;
          if (!o.src || o.src.length === 0) {
            console.error("An array of source files must be passed with any new Howl.");
            return;
          }
          self2.init(o);
        };
        Howl2.prototype = {
          /**
           * Initialize a new Howl group object.
           * @param  {Object} o Passed in properties for this group.
           * @return {Howl}
           */
          init: function(o) {
            var self2 = this;
            if (!Howler2.ctx) {
              setupAudioContext();
            }
            self2._autoplay = o.autoplay || false;
            self2._format = typeof o.format !== "string" ? o.format : [o.format];
            self2._html5 = o.html5 || false;
            self2._muted = o.mute || false;
            self2._loop = o.loop || false;
            self2._pool = o.pool || 5;
            self2._preload = typeof o.preload === "boolean" || o.preload === "metadata" ? o.preload : true;
            self2._rate = o.rate || 1;
            self2._sprite = o.sprite || {};
            self2._src = typeof o.src !== "string" ? o.src : [o.src];
            self2._volume = o.volume !== void 0 ? o.volume : 1;
            self2._xhr = {
              method: o.xhr && o.xhr.method ? o.xhr.method : "GET",
              headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,
              withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false
            };
            self2._duration = 0;
            self2._state = "unloaded";
            self2._sounds = [];
            self2._endTimers = {};
            self2._queue = [];
            self2._playLock = false;
            self2._onend = o.onend ? [{ fn: o.onend }] : [];
            self2._onfade = o.onfade ? [{ fn: o.onfade }] : [];
            self2._onload = o.onload ? [{ fn: o.onload }] : [];
            self2._onloaderror = o.onloaderror ? [{ fn: o.onloaderror }] : [];
            self2._onplayerror = o.onplayerror ? [{ fn: o.onplayerror }] : [];
            self2._onpause = o.onpause ? [{ fn: o.onpause }] : [];
            self2._onplay = o.onplay ? [{ fn: o.onplay }] : [];
            self2._onstop = o.onstop ? [{ fn: o.onstop }] : [];
            self2._onmute = o.onmute ? [{ fn: o.onmute }] : [];
            self2._onvolume = o.onvolume ? [{ fn: o.onvolume }] : [];
            self2._onrate = o.onrate ? [{ fn: o.onrate }] : [];
            self2._onseek = o.onseek ? [{ fn: o.onseek }] : [];
            self2._onunlock = o.onunlock ? [{ fn: o.onunlock }] : [];
            self2._onresume = [];
            self2._webAudio = Howler2.usingWebAudio && !self2._html5;
            if (typeof Howler2.ctx !== "undefined" && Howler2.ctx && Howler2.autoUnlock) {
              Howler2._unlockAudio();
            }
            Howler2._howls.push(self2);
            if (self2._autoplay) {
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play();
                }
              });
            }
            if (self2._preload && self2._preload !== "none") {
              self2.load();
            }
            return self2;
          },
          /**
           * Load the audio file.
           * @return {Howler}
           */
          load: function() {
            var self2 = this;
            var url = null;
            if (Howler2.noAudio) {
              self2._emit("loaderror", null, "No audio support.");
              return;
            }
            if (typeof self2._src === "string") {
              self2._src = [self2._src];
            }
            for (var i = 0; i < self2._src.length; i++) {
              var ext, str5;
              if (self2._format && self2._format[i]) {
                ext = self2._format[i];
              } else {
                str5 = self2._src[i];
                if (typeof str5 !== "string") {
                  self2._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                  continue;
                }
                ext = /^data:audio\/([^;,]+);/i.exec(str5);
                if (!ext) {
                  ext = /\.([^.]+)$/.exec(str5.split("?", 1)[0]);
                }
                if (ext) {
                  ext = ext[1].toLowerCase();
                }
              }
              if (!ext) {
                console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
              }
              if (ext && Howler2.codecs(ext)) {
                url = self2._src[i];
                break;
              }
            }
            if (!url) {
              self2._emit("loaderror", null, "No codec support for selected audio sources.");
              return;
            }
            self2._src = url;
            self2._state = "loading";
            if (window.location.protocol === "https:" && url.slice(0, 5) === "http:") {
              self2._html5 = true;
              self2._webAudio = false;
            }
            new Sound2(self2);
            if (self2._webAudio) {
              loadBuffer(self2);
            }
            return self2;
          },
          /**
           * Play a sound or resume previous playback.
           * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Number}          Sound ID.
           */
          play: function(sprite, internal) {
            var self2 = this;
            var id = null;
            if (typeof sprite === "number") {
              id = sprite;
              sprite = null;
            } else if (typeof sprite === "string" && self2._state === "loaded" && !self2._sprite[sprite]) {
              return null;
            } else if (typeof sprite === "undefined") {
              sprite = "__default";
              if (!self2._playLock) {
                var num = 0;
                for (var i = 0; i < self2._sounds.length; i++) {
                  if (self2._sounds[i]._paused && !self2._sounds[i]._ended) {
                    num++;
                    id = self2._sounds[i]._id;
                  }
                }
                if (num === 1) {
                  sprite = null;
                } else {
                  id = null;
                }
              }
            }
            var sound = id ? self2._soundById(id) : self2._inactiveSound();
            if (!sound) {
              return null;
            }
            if (id && !sprite) {
              sprite = sound._sprite || "__default";
            }
            if (self2._state !== "loaded") {
              sound._sprite = sprite;
              sound._ended = false;
              var soundId = sound._id;
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play(soundId);
                }
              });
              return soundId;
            }
            if (id && !sound._paused) {
              if (!internal) {
                self2._loadQueue("play");
              }
              return sound._id;
            }
            if (self2._webAudio) {
              Howler2._autoResume();
            }
            var seek = Math.max(0, sound._seek > 0 ? sound._seek : self2._sprite[sprite][0] / 1e3);
            var duration = Math.max(0, (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3 - seek);
            var timeout2 = duration * 1e3 / Math.abs(sound._rate);
            var start = self2._sprite[sprite][0] / 1e3;
            var stop = (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3;
            sound._sprite = sprite;
            sound._ended = false;
            var setParams = function() {
              sound._paused = false;
              sound._seek = seek;
              sound._start = start;
              sound._stop = stop;
              sound._loop = !!(sound._loop || self2._sprite[sprite][2]);
            };
            if (seek >= stop) {
              self2._ended(sound);
              return;
            }
            var node = sound._node;
            if (self2._webAudio) {
              var playWebAudio = function() {
                self2._playLock = false;
                setParams();
                self2._refreshBuffer(sound);
                var vol = sound._muted || self2._muted ? 0 : sound._volume;
                node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                sound._playStart = Howler2.ctx.currentTime;
                if (typeof node.bufferSource.start === "undefined") {
                  sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);
                } else {
                  sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);
                }
                if (timeout2 !== Infinity) {
                  self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout2);
                }
                if (!internal) {
                  setTimeout(function() {
                    self2._emit("play", sound._id);
                    self2._loadQueue();
                  }, 0);
                }
              };
              if (Howler2.state === "running" && Howler2.ctx.state !== "interrupted") {
                playWebAudio();
              } else {
                self2._playLock = true;
                self2.once("resume", playWebAudio);
                self2._clearTimer(sound._id);
              }
            } else {
              var playHtml5 = function() {
                node.currentTime = seek;
                node.muted = sound._muted || self2._muted || Howler2._muted || node.muted;
                node.volume = sound._volume * Howler2.volume();
                node.playbackRate = sound._rate;
                try {
                  var play = node.play();
                  if (play && typeof Promise !== "undefined" && (play instanceof Promise || typeof play.then === "function")) {
                    self2._playLock = true;
                    setParams();
                    play.then(function() {
                      self2._playLock = false;
                      node._unlocked = true;
                      if (!internal) {
                        self2._emit("play", sound._id);
                      } else {
                        self2._loadQueue();
                      }
                    }).catch(function() {
                      self2._playLock = false;
                      self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                      sound._ended = true;
                      sound._paused = true;
                    });
                  } else if (!internal) {
                    self2._playLock = false;
                    setParams();
                    self2._emit("play", sound._id);
                  }
                  node.playbackRate = sound._rate;
                  if (node.paused) {
                    self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                    return;
                  }
                  if (sprite !== "__default" || sound._loop) {
                    self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout2);
                  } else {
                    self2._endTimers[sound._id] = function() {
                      self2._ended(sound);
                      node.removeEventListener("ended", self2._endTimers[sound._id], false);
                    };
                    node.addEventListener("ended", self2._endTimers[sound._id], false);
                  }
                } catch (err) {
                  self2._emit("playerror", sound._id, err);
                }
              };
              if (node.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
                node.src = self2._src;
                node.load();
              }
              var loadedNoReadyState = window && window.ejecta || !node.readyState && Howler2._navigator.isCocoonJS;
              if (node.readyState >= 3 || loadedNoReadyState) {
                playHtml5();
              } else {
                self2._playLock = true;
                self2._state = "loading";
                var listener = function() {
                  self2._state = "loaded";
                  playHtml5();
                  node.removeEventListener(Howler2._canPlayEvent, listener, false);
                };
                node.addEventListener(Howler2._canPlayEvent, listener, false);
                self2._clearTimer(sound._id);
              }
            }
            return sound._id;
          },
          /**
           * Pause playback and save current position.
           * @param  {Number} id The sound ID (empty to pause all in group).
           * @return {Howl}
           */
          pause: function(id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "pause",
                action: function() {
                  self2.pause(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound && !sound._paused) {
                sound._seek = self2.seek(ids[i]);
                sound._rateSeek = 0;
                sound._paused = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (!sound._node.bufferSource) {
                      continue;
                    }
                    if (typeof sound._node.bufferSource.stop === "undefined") {
                      sound._node.bufferSource.noteOff(0);
                    } else {
                      sound._node.bufferSource.stop(0);
                    }
                    self2._cleanBuffer(sound._node);
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.pause();
                  }
                }
              }
              if (!arguments[1]) {
                self2._emit("pause", sound ? sound._id : null);
              }
            }
            return self2;
          },
          /**
           * Stop playback and reset to start.
           * @param  {Number} id The sound ID (empty to stop all in group).
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Howl}
           */
          stop: function(id, internal) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "stop",
                action: function() {
                  self2.stop(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._seek = sound._start || 0;
                sound._rateSeek = 0;
                sound._paused = true;
                sound._ended = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (sound._node.bufferSource) {
                      if (typeof sound._node.bufferSource.stop === "undefined") {
                        sound._node.bufferSource.noteOff(0);
                      } else {
                        sound._node.bufferSource.stop(0);
                      }
                      self2._cleanBuffer(sound._node);
                    }
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.currentTime = sound._start || 0;
                    sound._node.pause();
                    if (sound._node.duration === Infinity) {
                      self2._clearSound(sound._node);
                    }
                  }
                }
                if (!internal) {
                  self2._emit("stop", sound._id);
                }
              }
            }
            return self2;
          },
          /**
           * Mute/unmute a single sound or all sounds in this Howl group.
           * @param  {Boolean} muted Set to true to mute and false to unmute.
           * @param  {Number} id    The sound ID to update (omit to mute/unmute all).
           * @return {Howl}
           */
          mute: function(muted, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "mute",
                action: function() {
                  self2.mute(muted, id);
                }
              });
              return self2;
            }
            if (typeof id === "undefined") {
              if (typeof muted === "boolean") {
                self2._muted = muted;
              } else {
                return self2._muted;
              }
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._muted = muted;
                if (sound._interval) {
                  self2._stopFade(sound._id);
                }
                if (self2._webAudio && sound._node) {
                  sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler2.ctx.currentTime);
                } else if (sound._node) {
                  sound._node.muted = Howler2._muted ? true : muted;
                }
                self2._emit("mute", sound._id);
              }
            }
            return self2;
          },
          /**
           * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.
           *   volume() -> Returns the group's volume value.
           *   volume(id) -> Returns the sound id's current volume.
           *   volume(vol) -> Sets the volume of all sounds in this Howl group.
           *   volume(vol, id) -> Sets the volume of passed sound id.
           * @return {Howl/Number} Returns self or current volume.
           */
          volume: function() {
            var self2 = this;
            var args = arguments;
            var vol, id;
            if (args.length === 0) {
              return self2._volume;
            } else if (args.length === 1 || args.length === 2 && typeof args[1] === "undefined") {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                vol = parseFloat(args[0]);
              }
            } else if (args.length >= 2) {
              vol = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "volume",
                  action: function() {
                    self2.volume.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._volume = vol;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  sound._volume = vol;
                  if (!args[2]) {
                    self2._stopFade(id[i]);
                  }
                  if (self2._webAudio && sound._node && !sound._muted) {
                    sound._node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                  } else if (sound._node && !sound._muted) {
                    sound._node.volume = vol * Howler2.volume();
                  }
                  self2._emit("volume", sound._id);
                }
              }
            } else {
              sound = id ? self2._soundById(id) : self2._sounds[0];
              return sound ? sound._volume : 0;
            }
            return self2;
          },
          /**
           * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id (omit to fade all sounds).
           * @return {Howl}
           */
          fade: function(from, to, len4, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "fade",
                action: function() {
                  self2.fade(from, to, len4, id);
                }
              });
              return self2;
            }
            from = Math.min(Math.max(0, parseFloat(from)), 1);
            to = Math.min(Math.max(0, parseFloat(to)), 1);
            len4 = parseFloat(len4);
            self2.volume(from, id);
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                if (!id) {
                  self2._stopFade(ids[i]);
                }
                if (self2._webAudio && !sound._muted) {
                  var currentTime = Howler2.ctx.currentTime;
                  var end = currentTime + len4 / 1e3;
                  sound._volume = from;
                  sound._node.gain.setValueAtTime(from, currentTime);
                  sound._node.gain.linearRampToValueAtTime(to, end);
                }
                self2._startFadeInterval(sound, from, to, len4, ids[i], typeof id === "undefined");
              }
            }
            return self2;
          },
          /**
           * Starts the internal interval to fade a sound.
           * @param  {Object} sound Reference to sound to fade.
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id to fade.
           * @param  {Boolean} isGroup   If true, set the volume on the group.
           */
          _startFadeInterval: function(sound, from, to, len4, id, isGroup) {
            var self2 = this;
            var vol = from;
            var diff = to - from;
            var steps = Math.abs(diff / 0.01);
            var stepLen = Math.max(4, steps > 0 ? len4 / steps : len4);
            var lastTick = Date.now();
            sound._fadeTo = to;
            sound._interval = setInterval(function() {
              var tick = (Date.now() - lastTick) / len4;
              lastTick = Date.now();
              vol += diff * tick;
              vol = Math.round(vol * 100) / 100;
              if (diff < 0) {
                vol = Math.max(to, vol);
              } else {
                vol = Math.min(to, vol);
              }
              if (self2._webAudio) {
                sound._volume = vol;
              } else {
                self2.volume(vol, sound._id, true);
              }
              if (isGroup) {
                self2._volume = vol;
              }
              if (to < from && vol <= to || to > from && vol >= to) {
                clearInterval(sound._interval);
                sound._interval = null;
                sound._fadeTo = null;
                self2.volume(to, sound._id);
                self2._emit("fade", sound._id);
              }
            }, stepLen);
          },
          /**
           * Internal method that stops the currently playing fade when
           * a new fade starts, volume is changed or the sound is stopped.
           * @param  {Number} id The sound id.
           * @return {Howl}
           */
          _stopFade: function(id) {
            var self2 = this;
            var sound = self2._soundById(id);
            if (sound && sound._interval) {
              if (self2._webAudio) {
                sound._node.gain.cancelScheduledValues(Howler2.ctx.currentTime);
              }
              clearInterval(sound._interval);
              sound._interval = null;
              self2.volume(sound._fadeTo, id);
              sound._fadeTo = null;
              self2._emit("fade", id);
            }
            return self2;
          },
          /**
           * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.
           *   loop() -> Returns the group's loop value.
           *   loop(id) -> Returns the sound id's loop value.
           *   loop(loop) -> Sets the loop value for all sounds in this Howl group.
           *   loop(loop, id) -> Sets the loop value of passed sound id.
           * @return {Howl/Boolean} Returns self or current loop value.
           */
          loop: function() {
            var self2 = this;
            var args = arguments;
            var loop, id, sound;
            if (args.length === 0) {
              return self2._loop;
            } else if (args.length === 1) {
              if (typeof args[0] === "boolean") {
                loop = args[0];
                self2._loop = loop;
              } else {
                sound = self2._soundById(parseInt(args[0], 10));
                return sound ? sound._loop : false;
              }
            } else if (args.length === 2) {
              loop = args[0];
              id = parseInt(args[1], 10);
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              sound = self2._soundById(ids[i]);
              if (sound) {
                sound._loop = loop;
                if (self2._webAudio && sound._node && sound._node.bufferSource) {
                  sound._node.bufferSource.loop = loop;
                  if (loop) {
                    sound._node.bufferSource.loopStart = sound._start || 0;
                    sound._node.bufferSource.loopEnd = sound._stop;
                    if (self2.playing(ids[i])) {
                      self2.pause(ids[i], true);
                      self2.play(ids[i], true);
                    }
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   rate() -> Returns the first sound node's current playback rate.
           *   rate(id) -> Returns the sound id's current playback rate.
           *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.
           *   rate(rate, id) -> Sets the playback rate of passed sound id.
           * @return {Howl/Number} Returns self or the current playback rate.
           */
          rate: function() {
            var self2 = this;
            var args = arguments;
            var rate, id;
            if (args.length === 0) {
              id = self2._sounds[0]._id;
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                rate = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              rate = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof rate === "number") {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "rate",
                  action: function() {
                    self2.rate.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._rate = rate;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  if (self2.playing(id[i])) {
                    sound._rateSeek = self2.seek(id[i]);
                    sound._playStart = self2._webAudio ? Howler2.ctx.currentTime : sound._playStart;
                  }
                  sound._rate = rate;
                  if (self2._webAudio && sound._node && sound._node.bufferSource) {
                    sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler2.ctx.currentTime);
                  } else if (sound._node) {
                    sound._node.playbackRate = rate;
                  }
                  var seek = self2.seek(id[i]);
                  var duration = (self2._sprite[sound._sprite][0] + self2._sprite[sound._sprite][1]) / 1e3 - seek;
                  var timeout2 = duration * 1e3 / Math.abs(sound._rate);
                  if (self2._endTimers[id[i]] || !sound._paused) {
                    self2._clearTimer(id[i]);
                    self2._endTimers[id[i]] = setTimeout(self2._ended.bind(self2, sound), timeout2);
                  }
                  self2._emit("rate", sound._id);
                }
              }
            } else {
              sound = self2._soundById(id);
              return sound ? sound._rate : self2._rate;
            }
            return self2;
          },
          /**
           * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   seek() -> Returns the first sound node's current seek position.
           *   seek(id) -> Returns the sound id's current seek position.
           *   seek(seek) -> Sets the seek position of the first sound node.
           *   seek(seek, id) -> Sets the seek position of passed sound id.
           * @return {Howl/Number} Returns self or the current seek position.
           */
          seek: function() {
            var self2 = this;
            var args = arguments;
            var seek, id;
            if (args.length === 0) {
              if (self2._sounds.length) {
                id = self2._sounds[0]._id;
              }
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else if (self2._sounds.length) {
                id = self2._sounds[0]._id;
                seek = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              seek = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            if (typeof id === "undefined") {
              return 0;
            }
            if (typeof seek === "number" && (self2._state !== "loaded" || self2._playLock)) {
              self2._queue.push({
                event: "seek",
                action: function() {
                  self2.seek.apply(self2, args);
                }
              });
              return self2;
            }
            var sound = self2._soundById(id);
            if (sound) {
              if (typeof seek === "number" && seek >= 0) {
                var playing = self2.playing(id);
                if (playing) {
                  self2.pause(id, true);
                }
                sound._seek = seek;
                sound._ended = false;
                self2._clearTimer(id);
                if (!self2._webAudio && sound._node && !isNaN(sound._node.duration)) {
                  sound._node.currentTime = seek;
                }
                var seekAndEmit = function() {
                  if (playing) {
                    self2.play(id, true);
                  }
                  self2._emit("seek", id);
                };
                if (playing && !self2._webAudio) {
                  var emitSeek = function() {
                    if (!self2._playLock) {
                      seekAndEmit();
                    } else {
                      setTimeout(emitSeek, 0);
                    }
                  };
                  setTimeout(emitSeek, 0);
                } else {
                  seekAndEmit();
                }
              } else {
                if (self2._webAudio) {
                  var realTime = self2.playing(id) ? Howler2.ctx.currentTime - sound._playStart : 0;
                  var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;
                  return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));
                } else {
                  return sound._node.currentTime;
                }
              }
            }
            return self2;
          },
          /**
           * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.
           * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.
           * @return {Boolean} True if playing and false if not.
           */
          playing: function(id) {
            var self2 = this;
            if (typeof id === "number") {
              var sound = self2._soundById(id);
              return sound ? !sound._paused : false;
            }
            for (var i = 0; i < self2._sounds.length; i++) {
              if (!self2._sounds[i]._paused) {
                return true;
              }
            }
            return false;
          },
          /**
           * Get the duration of this sound. Passing a sound id will return the sprite duration.
           * @param  {Number} id The sound id to check. If none is passed, return full source duration.
           * @return {Number} Audio duration in seconds.
           */
          duration: function(id) {
            var self2 = this;
            var duration = self2._duration;
            var sound = self2._soundById(id);
            if (sound) {
              duration = self2._sprite[sound._sprite][1] / 1e3;
            }
            return duration;
          },
          /**
           * Returns the current loaded state of this Howl.
           * @return {String} 'unloaded', 'loading', 'loaded'
           */
          state: function() {
            return this._state;
          },
          /**
           * Unload and destroy the current Howl object.
           * This will immediately stop all sound instances attached to this group.
           */
          unload: function() {
            var self2 = this;
            var sounds = self2._sounds;
            for (var i = 0; i < sounds.length; i++) {
              if (!sounds[i]._paused) {
                self2.stop(sounds[i]._id);
              }
              if (!self2._webAudio) {
                self2._clearSound(sounds[i]._node);
                sounds[i]._node.removeEventListener("error", sounds[i]._errorFn, false);
                sounds[i]._node.removeEventListener(Howler2._canPlayEvent, sounds[i]._loadFn, false);
                sounds[i]._node.removeEventListener("ended", sounds[i]._endFn, false);
                Howler2._releaseHtml5Audio(sounds[i]._node);
              }
              delete sounds[i]._node;
              self2._clearTimer(sounds[i]._id);
            }
            var index = Howler2._howls.indexOf(self2);
            if (index >= 0) {
              Howler2._howls.splice(index, 1);
            }
            var remCache = true;
            for (i = 0; i < Howler2._howls.length; i++) {
              if (Howler2._howls[i]._src === self2._src || self2._src.indexOf(Howler2._howls[i]._src) >= 0) {
                remCache = false;
                break;
              }
            }
            if (cache && remCache) {
              delete cache[self2._src];
            }
            Howler2.noAudio = false;
            self2._state = "unloaded";
            self2._sounds = [];
            self2 = null;
            return null;
          },
          /**
           * Listen to a custom event.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @param  {Number}   once  (INTERNAL) Marks event to fire only once.
           * @return {Howl}
           */
          on: function(event, fn, id, once) {
            var self2 = this;
            var events = self2["_on" + event];
            if (typeof fn === "function") {
              events.push(once ? { id, fn, once } : { id, fn });
            }
            return self2;
          },
          /**
           * Remove a custom event. Call without parameters to remove all events.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to remove. Leave empty to remove all.
           * @param  {Number}   id    (optional) Only remove events for this sound.
           * @return {Howl}
           */
          off: function(event, fn, id) {
            var self2 = this;
            var events = self2["_on" + event];
            var i = 0;
            if (typeof fn === "number") {
              id = fn;
              fn = null;
            }
            if (fn || id) {
              for (i = 0; i < events.length; i++) {
                var isId = id === events[i].id;
                if (fn === events[i].fn && isId || !fn && isId) {
                  events.splice(i, 1);
                  break;
                }
              }
            } else if (event) {
              self2["_on" + event] = [];
            } else {
              var keys = Object.keys(self2);
              for (i = 0; i < keys.length; i++) {
                if (keys[i].indexOf("_on") === 0 && Array.isArray(self2[keys[i]])) {
                  self2[keys[i]] = [];
                }
              }
            }
            return self2;
          },
          /**
           * Listen to a custom event and remove it once fired.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @return {Howl}
           */
          once: function(event, fn, id) {
            var self2 = this;
            self2.on(event, fn, id, 1);
            return self2;
          },
          /**
           * Emit all events of a specific type and pass the sound id.
           * @param  {String} event Event name.
           * @param  {Number} id    Sound ID.
           * @param  {Number} msg   Message to go with event.
           * @return {Howl}
           */
          _emit: function(event, id, msg) {
            var self2 = this;
            var events = self2["_on" + event];
            for (var i = events.length - 1; i >= 0; i--) {
              if (!events[i].id || events[i].id === id || event === "load") {
                setTimeout(function(fn) {
                  fn.call(this, id, msg);
                }.bind(self2, events[i].fn), 0);
                if (events[i].once) {
                  self2.off(event, events[i].fn, events[i].id);
                }
              }
            }
            self2._loadQueue(event);
            return self2;
          },
          /**
           * Queue of actions initiated before the sound has loaded.
           * These will be called in sequence, with the next only firing
           * after the previous has finished executing (even if async like play).
           * @return {Howl}
           */
          _loadQueue: function(event) {
            var self2 = this;
            if (self2._queue.length > 0) {
              var task = self2._queue[0];
              if (task.event === event) {
                self2._queue.shift();
                self2._loadQueue();
              }
              if (!event) {
                task.action();
              }
            }
            return self2;
          },
          /**
           * Fired when playback ends at the end of the duration.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _ended: function(sound) {
            var self2 = this;
            var sprite = sound._sprite;
            if (!self2._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {
              setTimeout(self2._ended.bind(self2, sound), 100);
              return self2;
            }
            var loop = !!(sound._loop || self2._sprite[sprite][2]);
            self2._emit("end", sound._id);
            if (!self2._webAudio && loop) {
              self2.stop(sound._id, true).play(sound._id);
            }
            if (self2._webAudio && loop) {
              self2._emit("play", sound._id);
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              sound._playStart = Howler2.ctx.currentTime;
              var timeout2 = (sound._stop - sound._start) * 1e3 / Math.abs(sound._rate);
              self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout2);
            }
            if (self2._webAudio && !loop) {
              sound._paused = true;
              sound._ended = true;
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              self2._clearTimer(sound._id);
              self2._cleanBuffer(sound._node);
              Howler2._autoSuspend();
            }
            if (!self2._webAudio && !loop) {
              self2.stop(sound._id, true);
            }
            return self2;
          },
          /**
           * Clear the end timer for a sound playback.
           * @param  {Number} id The sound ID.
           * @return {Howl}
           */
          _clearTimer: function(id) {
            var self2 = this;
            if (self2._endTimers[id]) {
              if (typeof self2._endTimers[id] !== "function") {
                clearTimeout(self2._endTimers[id]);
              } else {
                var sound = self2._soundById(id);
                if (sound && sound._node) {
                  sound._node.removeEventListener("ended", self2._endTimers[id], false);
                }
              }
              delete self2._endTimers[id];
            }
            return self2;
          },
          /**
           * Return the sound identified by this ID, or return null.
           * @param  {Number} id Sound ID
           * @return {Object}    Sound object or null.
           */
          _soundById: function(id) {
            var self2 = this;
            for (var i = 0; i < self2._sounds.length; i++) {
              if (id === self2._sounds[i]._id) {
                return self2._sounds[i];
              }
            }
            return null;
          },
          /**
           * Return an inactive sound from the pool or create a new one.
           * @return {Sound} Sound playback object.
           */
          _inactiveSound: function() {
            var self2 = this;
            self2._drain();
            for (var i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                return self2._sounds[i].reset();
              }
            }
            return new Sound2(self2);
          },
          /**
           * Drain excess inactive sounds from the pool.
           */
          _drain: function() {
            var self2 = this;
            var limit = self2._pool;
            var cnt = 0;
            var i = 0;
            if (self2._sounds.length < limit) {
              return;
            }
            for (i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                cnt++;
              }
            }
            for (i = self2._sounds.length - 1; i >= 0; i--) {
              if (cnt <= limit) {
                return;
              }
              if (self2._sounds[i]._ended) {
                if (self2._webAudio && self2._sounds[i]._node) {
                  self2._sounds[i]._node.disconnect(0);
                }
                self2._sounds.splice(i, 1);
                cnt--;
              }
            }
          },
          /**
           * Get all ID's from the sounds pool.
           * @param  {Number} id Only return one ID if one is passed.
           * @return {Array}    Array of IDs.
           */
          _getSoundIds: function(id) {
            var self2 = this;
            if (typeof id === "undefined") {
              var ids = [];
              for (var i = 0; i < self2._sounds.length; i++) {
                ids.push(self2._sounds[i]._id);
              }
              return ids;
            } else {
              return [id];
            }
          },
          /**
           * Load the sound back into the buffer source.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _refreshBuffer: function(sound) {
            var self2 = this;
            sound._node.bufferSource = Howler2.ctx.createBufferSource();
            sound._node.bufferSource.buffer = cache[self2._src];
            if (sound._panner) {
              sound._node.bufferSource.connect(sound._panner);
            } else {
              sound._node.bufferSource.connect(sound._node);
            }
            sound._node.bufferSource.loop = sound._loop;
            if (sound._loop) {
              sound._node.bufferSource.loopStart = sound._start || 0;
              sound._node.bufferSource.loopEnd = sound._stop || 0;
            }
            sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler2.ctx.currentTime);
            return self2;
          },
          /**
           * Prevent memory leaks by cleaning up the buffer source after playback.
           * @param  {Object} node Sound's audio node containing the buffer source.
           * @return {Howl}
           */
          _cleanBuffer: function(node) {
            var self2 = this;
            var isIOS = Howler2._navigator && Howler2._navigator.vendor.indexOf("Apple") >= 0;
            if (!node.bufferSource) {
              return self2;
            }
            if (Howler2._scratchBuffer && node.bufferSource) {
              node.bufferSource.onended = null;
              node.bufferSource.disconnect(0);
              if (isIOS) {
                try {
                  node.bufferSource.buffer = Howler2._scratchBuffer;
                } catch (e) {
                }
              }
            }
            node.bufferSource = null;
            return self2;
          },
          /**
           * Set the source to a 0-second silence to stop any downloading (except in IE).
           * @param  {Object} node Audio node to clear.
           */
          _clearSound: function(node) {
            var checkIE = /MSIE |Trident\//.test(Howler2._navigator && Howler2._navigator.userAgent);
            if (!checkIE) {
              node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
            }
          }
        };
        var Sound2 = function(howl) {
          this._parent = howl;
          this.init();
        };
        Sound2.prototype = {
          /**
           * Initialize a new Sound object.
           * @return {Sound}
           */
          init: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            parent._sounds.push(self2);
            self2.create();
            return self2;
          },
          /**
           * Create and setup a new sound object, whether HTML5 Audio or Web Audio.
           * @return {Sound}
           */
          create: function() {
            var self2 = this;
            var parent = self2._parent;
            var volume = Howler2._muted || self2._muted || self2._parent._muted ? 0 : self2._volume;
            if (parent._webAudio) {
              self2._node = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
              self2._node.gain.setValueAtTime(volume, Howler2.ctx.currentTime);
              self2._node.paused = true;
              self2._node.connect(Howler2.masterGain);
            } else if (!Howler2.noAudio) {
              self2._node = Howler2._obtainHtml5Audio();
              self2._errorFn = self2._errorListener.bind(self2);
              self2._node.addEventListener("error", self2._errorFn, false);
              self2._loadFn = self2._loadListener.bind(self2);
              self2._node.addEventListener(Howler2._canPlayEvent, self2._loadFn, false);
              self2._endFn = self2._endListener.bind(self2);
              self2._node.addEventListener("ended", self2._endFn, false);
              self2._node.src = parent._src;
              self2._node.preload = parent._preload === true ? "auto" : parent._preload;
              self2._node.volume = volume * Howler2.volume();
              self2._node.load();
            }
            return self2;
          },
          /**
           * Reset the parameters of this sound to the original state (for recycle).
           * @return {Sound}
           */
          reset: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._rateSeek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            return self2;
          },
          /**
           * HTML5 Audio error listener callback.
           */
          _errorListener: function() {
            var self2 = this;
            self2._parent._emit("loaderror", self2._id, self2._node.error ? self2._node.error.code : 0);
            self2._node.removeEventListener("error", self2._errorFn, false);
          },
          /**
           * HTML5 Audio canplaythrough listener callback.
           */
          _loadListener: function() {
            var self2 = this;
            var parent = self2._parent;
            parent._duration = Math.ceil(self2._node.duration * 10) / 10;
            if (Object.keys(parent._sprite).length === 0) {
              parent._sprite = { __default: [0, parent._duration * 1e3] };
            }
            if (parent._state !== "loaded") {
              parent._state = "loaded";
              parent._emit("load");
              parent._loadQueue();
            }
            self2._node.removeEventListener(Howler2._canPlayEvent, self2._loadFn, false);
          },
          /**
           * HTML5 Audio ended listener callback.
           */
          _endListener: function() {
            var self2 = this;
            var parent = self2._parent;
            if (parent._duration === Infinity) {
              parent._duration = Math.ceil(self2._node.duration * 10) / 10;
              if (parent._sprite.__default[1] === Infinity) {
                parent._sprite.__default[1] = parent._duration * 1e3;
              }
              parent._ended(self2);
            }
            self2._node.removeEventListener("ended", self2._endFn, false);
          }
        };
        var cache = {};
        var loadBuffer = function(self2) {
          var url = self2._src;
          if (cache[url]) {
            self2._duration = cache[url].duration;
            loadSound(self2);
            return;
          }
          if (/^data:[^;]+;base64,/.test(url)) {
            var data = atob(url.split(",")[1]);
            var dataView = new Uint8Array(data.length);
            for (var i = 0; i < data.length; ++i) {
              dataView[i] = data.charCodeAt(i);
            }
            decodeAudioData(dataView.buffer, self2);
          } else {
            var xhr = new XMLHttpRequest();
            xhr.open(self2._xhr.method, url, true);
            xhr.withCredentials = self2._xhr.withCredentials;
            xhr.responseType = "arraybuffer";
            if (self2._xhr.headers) {
              Object.keys(self2._xhr.headers).forEach(function(key) {
                xhr.setRequestHeader(key, self2._xhr.headers[key]);
              });
            }
            xhr.onload = function() {
              var code = (xhr.status + "")[0];
              if (code !== "0" && code !== "2" && code !== "3") {
                self2._emit("loaderror", null, "Failed loading audio file with status: " + xhr.status + ".");
                return;
              }
              decodeAudioData(xhr.response, self2);
            };
            xhr.onerror = function() {
              if (self2._webAudio) {
                self2._html5 = true;
                self2._webAudio = false;
                self2._sounds = [];
                delete cache[url];
                self2.load();
              }
            };
            safeXhrSend(xhr);
          }
        };
        var safeXhrSend = function(xhr) {
          try {
            xhr.send();
          } catch (e) {
            xhr.onerror();
          }
        };
        var decodeAudioData = function(arraybuffer, self2) {
          var error = function() {
            self2._emit("loaderror", null, "Decoding audio data failed.");
          };
          var success = function(buffer) {
            if (buffer && self2._sounds.length > 0) {
              cache[self2._src] = buffer;
              loadSound(self2, buffer);
            } else {
              error();
            }
          };
          if (typeof Promise !== "undefined" && Howler2.ctx.decodeAudioData.length === 1) {
            Howler2.ctx.decodeAudioData(arraybuffer).then(success).catch(error);
          } else {
            Howler2.ctx.decodeAudioData(arraybuffer, success, error);
          }
        };
        var loadSound = function(self2, buffer) {
          if (buffer && !self2._duration) {
            self2._duration = buffer.duration;
          }
          if (Object.keys(self2._sprite).length === 0) {
            self2._sprite = { __default: [0, self2._duration * 1e3] };
          }
          if (self2._state !== "loaded") {
            self2._state = "loaded";
            self2._emit("load");
            self2._loadQueue();
          }
        };
        var setupAudioContext = function() {
          if (!Howler2.usingWebAudio) {
            return;
          }
          try {
            if (typeof AudioContext !== "undefined") {
              Howler2.ctx = new AudioContext();
            } else if (typeof webkitAudioContext !== "undefined") {
              Howler2.ctx = new webkitAudioContext();
            } else {
              Howler2.usingWebAudio = false;
            }
          } catch (e) {
            Howler2.usingWebAudio = false;
          }
          if (!Howler2.ctx) {
            Howler2.usingWebAudio = false;
          }
          var iOS = /iP(hone|od|ad)/.test(Howler2._navigator && Howler2._navigator.platform);
          var appVersion = Howler2._navigator && Howler2._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
          var version = appVersion ? parseInt(appVersion[1], 10) : null;
          if (iOS && version && version < 9) {
            var safari = /safari/.test(Howler2._navigator && Howler2._navigator.userAgent.toLowerCase());
            if (Howler2._navigator && !safari) {
              Howler2.usingWebAudio = false;
            }
          }
          if (Howler2.usingWebAudio) {
            Howler2.masterGain = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
            Howler2.masterGain.gain.setValueAtTime(Howler2._muted ? 0 : Howler2._volume, Howler2.ctx.currentTime);
            Howler2.masterGain.connect(Howler2.ctx.destination);
          }
          Howler2._setup();
        };
        if (typeof define === "function" && define.amd) {
          define([], function() {
            return {
              Howler: Howler2,
              Howl: Howl2
            };
          });
        }
        if (typeof exports !== "undefined") {
          exports.Howler = Howler2;
          exports.Howl = Howl2;
        }
        if (typeof global !== "undefined") {
          global.HowlerGlobal = HowlerGlobal2;
          global.Howler = Howler2;
          global.Howl = Howl2;
          global.Sound = Sound2;
        } else if (typeof window !== "undefined") {
          window.HowlerGlobal = HowlerGlobal2;
          window.Howler = Howler2;
          window.Howl = Howl2;
          window.Sound = Sound2;
        }
      })();
      (function() {
        "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0];
        HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
        HowlerGlobal.prototype.stereo = function(pan) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          for (var i = self2._howls.length - 1; i >= 0; i--) {
            self2._howls[i].stereo(pan);
          }
          return self2;
        };
        HowlerGlobal.prototype.pos = function(x, y, z) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          y = typeof y !== "number" ? self2._pos[1] : y;
          z = typeof z !== "number" ? self2._pos[2] : z;
          if (typeof x === "number") {
            self2._pos = [x, y, z];
            if (typeof self2.ctx.listener.positionX !== "undefined") {
              self2.ctx.listener.positionX.setTargetAtTime(self2._pos[0], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionY.setTargetAtTime(self2._pos[1], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionZ.setTargetAtTime(self2._pos[2], Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setPosition(self2._pos[0], self2._pos[1], self2._pos[2]);
            }
          } else {
            return self2._pos;
          }
          return self2;
        };
        HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          var or = self2._orientation;
          y = typeof y !== "number" ? or[1] : y;
          z = typeof z !== "number" ? or[2] : z;
          xUp = typeof xUp !== "number" ? or[3] : xUp;
          yUp = typeof yUp !== "number" ? or[4] : yUp;
          zUp = typeof zUp !== "number" ? or[5] : zUp;
          if (typeof x === "number") {
            self2._orientation = [x, y, z, xUp, yUp, zUp];
            if (typeof self2.ctx.listener.forwardX !== "undefined") {
              self2.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);
            }
          } else {
            return or;
          }
          return self2;
        };
        Howl.prototype.init = function(_super) {
          return function(o) {
            var self2 = this;
            self2._orientation = o.orientation || [1, 0, 0];
            self2._stereo = o.stereo || null;
            self2._pos = o.pos || null;
            self2._pannerAttr = {
              coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : 360,
              coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : 360,
              coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : 0,
              distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : "inverse",
              maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : 1e4,
              panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : "HRTF",
              refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : 1,
              rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : 1
            };
            self2._onstereo = o.onstereo ? [{ fn: o.onstereo }] : [];
            self2._onpos = o.onpos ? [{ fn: o.onpos }] : [];
            self2._onorientation = o.onorientation ? [{ fn: o.onorientation }] : [];
            return _super.call(this, o);
          };
        }(Howl.prototype.init);
        Howl.prototype.stereo = function(pan, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "stereo",
              action: function() {
                self2.stereo(pan, id);
              }
            });
            return self2;
          }
          var pannerType = typeof Howler.ctx.createStereoPanner === "undefined" ? "spatial" : "stereo";
          if (typeof id === "undefined") {
            if (typeof pan === "number") {
              self2._stereo = pan;
              self2._pos = [pan, 0, 0];
            } else {
              return self2._stereo;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof pan === "number") {
                sound._stereo = pan;
                sound._pos = [pan, 0, 0];
                if (sound._node) {
                  sound._pannerAttr.panningModel = "equalpower";
                  if (!sound._panner || !sound._panner.pan) {
                    setupPanner(sound, pannerType);
                  }
                  if (pannerType === "spatial") {
                    if (typeof sound._panner.positionX !== "undefined") {
                      sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);
                      sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
                      sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
                    } else {
                      sound._panner.setPosition(pan, 0, 0);
                    }
                  } else {
                    sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);
                  }
                }
                self2._emit("stereo", sound._id);
              } else {
                return sound._stereo;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pos = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "pos",
              action: function() {
                self2.pos(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? 0 : y;
          z = typeof z !== "number" ? -0.5 : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._pos = [x, y, z];
            } else {
              return self2._pos;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._pos = [x, y, z];
                if (sound._node) {
                  if (!sound._panner || sound._panner.pan) {
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.positionX !== "undefined") {
                    sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setPosition(x, y, z);
                  }
                }
                self2._emit("pos", sound._id);
              } else {
                return sound._pos;
              }
            }
          }
          return self2;
        };
        Howl.prototype.orientation = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "orientation",
              action: function() {
                self2.orientation(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? self2._orientation[1] : y;
          z = typeof z !== "number" ? self2._orientation[2] : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._orientation = [x, y, z];
            } else {
              return self2._orientation;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._orientation = [x, y, z];
                if (sound._node) {
                  if (!sound._panner) {
                    if (!sound._pos) {
                      sound._pos = self2._pos || [0, 0, -0.5];
                    }
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.orientationX !== "undefined") {
                    sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setOrientation(x, y, z);
                  }
                }
                self2._emit("orientation", sound._id);
              } else {
                return sound._orientation;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pannerAttr = function() {
          var self2 = this;
          var args = arguments;
          var o, id, sound;
          if (!self2._webAudio) {
            return self2;
          }
          if (args.length === 0) {
            return self2._pannerAttr;
          } else if (args.length === 1) {
            if (typeof args[0] === "object") {
              o = args[0];
              if (typeof id === "undefined") {
                if (!o.pannerAttr) {
                  o.pannerAttr = {
                    coneInnerAngle: o.coneInnerAngle,
                    coneOuterAngle: o.coneOuterAngle,
                    coneOuterGain: o.coneOuterGain,
                    distanceModel: o.distanceModel,
                    maxDistance: o.maxDistance,
                    refDistance: o.refDistance,
                    rolloffFactor: o.rolloffFactor,
                    panningModel: o.panningModel
                  };
                }
                self2._pannerAttr = {
                  coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== "undefined" ? o.pannerAttr.coneInnerAngle : self2._coneInnerAngle,
                  coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== "undefined" ? o.pannerAttr.coneOuterAngle : self2._coneOuterAngle,
                  coneOuterGain: typeof o.pannerAttr.coneOuterGain !== "undefined" ? o.pannerAttr.coneOuterGain : self2._coneOuterGain,
                  distanceModel: typeof o.pannerAttr.distanceModel !== "undefined" ? o.pannerAttr.distanceModel : self2._distanceModel,
                  maxDistance: typeof o.pannerAttr.maxDistance !== "undefined" ? o.pannerAttr.maxDistance : self2._maxDistance,
                  refDistance: typeof o.pannerAttr.refDistance !== "undefined" ? o.pannerAttr.refDistance : self2._refDistance,
                  rolloffFactor: typeof o.pannerAttr.rolloffFactor !== "undefined" ? o.pannerAttr.rolloffFactor : self2._rolloffFactor,
                  panningModel: typeof o.pannerAttr.panningModel !== "undefined" ? o.pannerAttr.panningModel : self2._panningModel
                };
              }
            } else {
              sound = self2._soundById(parseInt(args[0], 10));
              return sound ? sound._pannerAttr : self2._pannerAttr;
            }
          } else if (args.length === 2) {
            o = args[0];
            id = parseInt(args[1], 10);
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            sound = self2._soundById(ids[i]);
            if (sound) {
              var pa = sound._pannerAttr;
              pa = {
                coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : pa.coneInnerAngle,
                coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : pa.coneOuterAngle,
                coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : pa.coneOuterGain,
                distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : pa.distanceModel,
                maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : pa.maxDistance,
                refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : pa.refDistance,
                rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : pa.rolloffFactor,
                panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : pa.panningModel
              };
              var panner = sound._panner;
              if (!panner) {
                if (!sound._pos) {
                  sound._pos = self2._pos || [0, 0, -0.5];
                }
                setupPanner(sound, "spatial");
                panner = sound._panner;
              }
              panner.coneInnerAngle = pa.coneInnerAngle;
              panner.coneOuterAngle = pa.coneOuterAngle;
              panner.coneOuterGain = pa.coneOuterGain;
              panner.distanceModel = pa.distanceModel;
              panner.maxDistance = pa.maxDistance;
              panner.refDistance = pa.refDistance;
              panner.rolloffFactor = pa.rolloffFactor;
              panner.panningModel = pa.panningModel;
            }
          }
          return self2;
        };
        Sound.prototype.init = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            _super.call(this);
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            }
          };
        }(Sound.prototype.init);
        Sound.prototype.reset = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            } else if (self2._panner) {
              self2._panner.disconnect(0);
              self2._panner = void 0;
              parent._refreshBuffer(self2);
            }
            return _super.call(this);
          };
        }(Sound.prototype.reset);
        var setupPanner = function(sound, type) {
          type = type || "spatial";
          if (type === "spatial") {
            sound._panner = Howler.ctx.createPanner();
            sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;
            sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;
            sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;
            sound._panner.distanceModel = sound._pannerAttr.distanceModel;
            sound._panner.maxDistance = sound._pannerAttr.maxDistance;
            sound._panner.refDistance = sound._pannerAttr.refDistance;
            sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;
            sound._panner.panningModel = sound._pannerAttr.panningModel;
            if (typeof sound._panner.positionX !== "undefined") {
              sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);
              sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);
              sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);
            }
            if (typeof sound._panner.orientationX !== "undefined") {
              sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);
              sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);
              sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);
            }
          } else {
            sound._panner = Howler.ctx.createStereoPanner();
            sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);
          }
          sound._panner.connect(sound._node);
          if (!sound._paused) {
            sound._parent.pause(sound._id, true).play(sound._id, true);
          }
        };
      })();
    }
  });

  // node_modules/earcut/src/earcut.js
  var require_earcut = __commonJS({
    "node_modules/earcut/src/earcut.js"(exports, module) {
      "use strict";
      module.exports = earcut2;
      module.exports.default = earcut2;
      function earcut2(data, holeIndices, dim) {
        dim = dim || 2;
        var hasHoles = holeIndices && holeIndices.length, outerLen = hasHoles ? holeIndices[0] * dim : data.length, outerNode = linkedList(data, 0, outerLen, dim, true), triangles = [];
        if (!outerNode || outerNode.next === outerNode.prev)
          return triangles;
        var minX, minY, maxX, maxY, x, y, invSize;
        if (hasHoles)
          outerNode = eliminateHoles(data, holeIndices, outerNode, dim);
        if (data.length > 80 * dim) {
          minX = maxX = data[0];
          minY = maxY = data[1];
          for (var i = dim; i < outerLen; i += dim) {
            x = data[i];
            y = data[i + 1];
            if (x < minX)
              minX = x;
            if (y < minY)
              minY = y;
            if (x > maxX)
              maxX = x;
            if (y > maxY)
              maxY = y;
          }
          invSize = Math.max(maxX - minX, maxY - minY);
          invSize = invSize !== 0 ? 32767 / invSize : 0;
        }
        earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);
        return triangles;
      }
      function linkedList(data, start, end, dim, clockwise) {
        var i, last;
        if (clockwise === signedArea(data, start, end, dim) > 0) {
          for (i = start; i < end; i += dim)
            last = insertNode(i, data[i], data[i + 1], last);
        } else {
          for (i = end - dim; i >= start; i -= dim)
            last = insertNode(i, data[i], data[i + 1], last);
        }
        if (last && equals6(last, last.next)) {
          removeNode(last);
          last = last.next;
        }
        return last;
      }
      function filterPoints(start, end) {
        if (!start)
          return start;
        if (!end)
          end = start;
        var p = start, again;
        do {
          again = false;
          if (!p.steiner && (equals6(p, p.next) || area(p.prev, p, p.next) === 0)) {
            removeNode(p);
            p = end = p.prev;
            if (p === p.next)
              break;
            again = true;
          } else {
            p = p.next;
          }
        } while (again || p !== end);
        return end;
      }
      function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
        if (!ear)
          return;
        if (!pass && invSize)
          indexCurve(ear, minX, minY, invSize);
        var stop = ear, prev, next;
        while (ear.prev !== ear.next) {
          prev = ear.prev;
          next = ear.next;
          if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
            triangles.push(prev.i / dim | 0);
            triangles.push(ear.i / dim | 0);
            triangles.push(next.i / dim | 0);
            removeNode(ear);
            ear = next.next;
            stop = next.next;
            continue;
          }
          ear = next;
          if (ear === stop) {
            if (!pass) {
              earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);
            } else if (pass === 1) {
              ear = cureLocalIntersections(filterPoints(ear), triangles, dim);
              earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);
            } else if (pass === 2) {
              splitEarcut(ear, triangles, dim, minX, minY, invSize);
            }
            break;
          }
        }
      }
      function isEar(ear) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var p = c.next;
        while (p !== a) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.next;
        }
        return true;
      }
      function isEarHashed(ear, minX, minY, invSize) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var minZ = zOrder(x0, y0, minX, minY, invSize), maxZ = zOrder(x1, y1, minX, minY, invSize);
        var p = ear.prevZ, n = ear.nextZ;
        while (p && p.z >= minZ && n && n.z <= maxZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        while (p && p.z >= minZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
        }
        while (n && n.z <= maxZ) {
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        return true;
      }
      function cureLocalIntersections(start, triangles, dim) {
        var p = start;
        do {
          var a = p.prev, b = p.next.next;
          if (!equals6(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {
            triangles.push(a.i / dim | 0);
            triangles.push(p.i / dim | 0);
            triangles.push(b.i / dim | 0);
            removeNode(p);
            removeNode(p.next);
            p = start = b;
          }
          p = p.next;
        } while (p !== start);
        return filterPoints(p);
      }
      function splitEarcut(start, triangles, dim, minX, minY, invSize) {
        var a = start;
        do {
          var b = a.next.next;
          while (b !== a.prev) {
            if (a.i !== b.i && isValidDiagonal(a, b)) {
              var c = splitPolygon(a, b);
              a = filterPoints(a, a.next);
              c = filterPoints(c, c.next);
              earcutLinked(a, triangles, dim, minX, minY, invSize, 0);
              earcutLinked(c, triangles, dim, minX, minY, invSize, 0);
              return;
            }
            b = b.next;
          }
          a = a.next;
        } while (a !== start);
      }
      function eliminateHoles(data, holeIndices, outerNode, dim) {
        var queue = [], i, len4, start, end, list;
        for (i = 0, len4 = holeIndices.length; i < len4; i++) {
          start = holeIndices[i] * dim;
          end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
          list = linkedList(data, start, end, dim, false);
          if (list === list.next)
            list.steiner = true;
          queue.push(getLeftmost(list));
        }
        queue.sort(compareX);
        for (i = 0; i < queue.length; i++) {
          outerNode = eliminateHole(queue[i], outerNode);
        }
        return outerNode;
      }
      function compareX(a, b) {
        return a.x - b.x;
      }
      function eliminateHole(hole, outerNode) {
        var bridge = findHoleBridge(hole, outerNode);
        if (!bridge) {
          return outerNode;
        }
        var bridgeReverse = splitPolygon(bridge, hole);
        filterPoints(bridgeReverse, bridgeReverse.next);
        return filterPoints(bridge, bridge.next);
      }
      function findHoleBridge(hole, outerNode) {
        var p = outerNode, hx = hole.x, hy = hole.y, qx = -Infinity, m;
        do {
          if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
            if (x <= hx && x > qx) {
              qx = x;
              m = p.x < p.next.x ? p : p.next;
              if (x === hx)
                return m;
            }
          }
          p = p.next;
        } while (p !== outerNode);
        if (!m)
          return null;
        var stop = m, mx = m.x, my = m.y, tanMin = Infinity, tan;
        p = m;
        do {
          if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {
            tan = Math.abs(hy - p.y) / (hx - p.x);
            if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {
              m = p;
              tanMin = tan;
            }
          }
          p = p.next;
        } while (p !== stop);
        return m;
      }
      function sectorContainsSector(m, p) {
        return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;
      }
      function indexCurve(start, minX, minY, invSize) {
        var p = start;
        do {
          if (p.z === 0)
            p.z = zOrder(p.x, p.y, minX, minY, invSize);
          p.prevZ = p.prev;
          p.nextZ = p.next;
          p = p.next;
        } while (p !== start);
        p.prevZ.nextZ = null;
        p.prevZ = null;
        sortLinked(p);
      }
      function sortLinked(list) {
        var i, p, q2, e, tail, numMerges, pSize, qSize, inSize = 1;
        do {
          p = list;
          list = null;
          tail = null;
          numMerges = 0;
          while (p) {
            numMerges++;
            q2 = p;
            pSize = 0;
            for (i = 0; i < inSize; i++) {
              pSize++;
              q2 = q2.nextZ;
              if (!q2)
                break;
            }
            qSize = inSize;
            while (pSize > 0 || qSize > 0 && q2) {
              if (pSize !== 0 && (qSize === 0 || !q2 || p.z <= q2.z)) {
                e = p;
                p = p.nextZ;
                pSize--;
              } else {
                e = q2;
                q2 = q2.nextZ;
                qSize--;
              }
              if (tail)
                tail.nextZ = e;
              else
                list = e;
              e.prevZ = tail;
              tail = e;
            }
            p = q2;
          }
          tail.nextZ = null;
          inSize *= 2;
        } while (numMerges > 1);
        return list;
      }
      function zOrder(x, y, minX, minY, invSize) {
        x = (x - minX) * invSize | 0;
        y = (y - minY) * invSize | 0;
        x = (x | x << 8) & 16711935;
        x = (x | x << 4) & 252645135;
        x = (x | x << 2) & 858993459;
        x = (x | x << 1) & 1431655765;
        y = (y | y << 8) & 16711935;
        y = (y | y << 4) & 252645135;
        y = (y | y << 2) & 858993459;
        y = (y | y << 1) & 1431655765;
        return x | y << 1;
      }
      function getLeftmost(start) {
        var p = start, leftmost = start;
        do {
          if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y)
            leftmost = p;
          p = p.next;
        } while (p !== start);
        return leftmost;
      }
      function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
        return (cx - px) * (ay - py) >= (ax - px) * (cy - py) && (ax - px) * (by - py) >= (bx - px) * (ay - py) && (bx - px) * (cy - py) >= (cx - px) * (by - py);
      }
      function isValidDiagonal(a, b) {
        return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges
        (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible
        (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors
        equals6(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0);
      }
      function area(p, q2, r) {
        return (q2.y - p.y) * (r.x - q2.x) - (q2.x - p.x) * (r.y - q2.y);
      }
      function equals6(p1, p2) {
        return p1.x === p2.x && p1.y === p2.y;
      }
      function intersects(p1, q1, p2, q2) {
        var o1 = sign(area(p1, q1, p2));
        var o2 = sign(area(p1, q1, q2));
        var o3 = sign(area(p2, q2, p1));
        var o4 = sign(area(p2, q2, q1));
        if (o1 !== o2 && o3 !== o4)
          return true;
        if (o1 === 0 && onSegment(p1, p2, q1))
          return true;
        if (o2 === 0 && onSegment(p1, q2, q1))
          return true;
        if (o3 === 0 && onSegment(p2, p1, q2))
          return true;
        if (o4 === 0 && onSegment(p2, q1, q2))
          return true;
        return false;
      }
      function onSegment(p, q2, r) {
        return q2.x <= Math.max(p.x, r.x) && q2.x >= Math.min(p.x, r.x) && q2.y <= Math.max(p.y, r.y) && q2.y >= Math.min(p.y, r.y);
      }
      function sign(num) {
        return num > 0 ? 1 : num < 0 ? -1 : 0;
      }
      function intersectsPolygon(a, b) {
        var p = a;
        do {
          if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b))
            return true;
          p = p.next;
        } while (p !== a);
        return false;
      }
      function locallyInside(a, b) {
        return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
      }
      function middleInside(a, b) {
        var p = a, inside = false, px = (a.x + b.x) / 2, py = (a.y + b.y) / 2;
        do {
          if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x)
            inside = !inside;
          p = p.next;
        } while (p !== a);
        return inside;
      }
      function splitPolygon(a, b) {
        var a2 = new Node(a.i, a.x, a.y), b2 = new Node(b.i, b.x, b.y), an = a.next, bp = b.prev;
        a.next = b;
        b.prev = a;
        a2.next = an;
        an.prev = a2;
        b2.next = a2;
        a2.prev = b2;
        bp.next = b2;
        b2.prev = bp;
        return b2;
      }
      function insertNode(i, x, y, last) {
        var p = new Node(i, x, y);
        if (!last) {
          p.prev = p;
          p.next = p;
        } else {
          p.next = last.next;
          p.prev = last;
          last.next.prev = p;
          last.next = p;
        }
        return p;
      }
      function removeNode(p) {
        p.next.prev = p.prev;
        p.prev.next = p.next;
        if (p.prevZ)
          p.prevZ.nextZ = p.nextZ;
        if (p.nextZ)
          p.nextZ.prevZ = p.prevZ;
      }
      function Node(i, x, y) {
        this.i = i;
        this.x = x;
        this.y = y;
        this.prev = null;
        this.next = null;
        this.z = 0;
        this.prevZ = null;
        this.nextZ = null;
        this.steiner = false;
      }
      earcut2.deviation = function(data, holeIndices, dim, triangles) {
        var hasHoles = holeIndices && holeIndices.length;
        var outerLen = hasHoles ? holeIndices[0] * dim : data.length;
        var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
        if (hasHoles) {
          for (var i = 0, len4 = holeIndices.length; i < len4; i++) {
            var start = holeIndices[i] * dim;
            var end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
            polygonArea -= Math.abs(signedArea(data, start, end, dim));
          }
        }
        var trianglesArea = 0;
        for (i = 0; i < triangles.length; i += 3) {
          var a = triangles[i] * dim;
          var b = triangles[i + 1] * dim;
          var c = triangles[i + 2] * dim;
          trianglesArea += Math.abs(
            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1])
          );
        }
        return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);
      };
      function signedArea(data, start, end, dim) {
        var sum = 0;
        for (var i = start, j = end - dim; i < end; i += dim) {
          sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
          j = i;
        }
        return sum;
      }
      earcut2.flatten = function(data) {
        var dim = data[0][0].length, result = { vertices: [], holes: [], dimensions: dim }, holeIndex = 0;
        for (var i = 0; i < data.length; i++) {
          for (var j = 0; j < data[i].length; j++) {
            for (var d = 0; d < dim; d++)
              result.vertices.push(data[i][j][d]);
          }
          if (i > 0) {
            holeIndex += data[i - 1].length;
            result.holes.push(holeIndex);
          }
        }
        return result;
      };
    }
  });

  // node_modules/@sorskoot/wonderland-components/dist/index.js
  var dist_exports = {};
  __export(dist_exports, {
    Easing: () => Easing,
    Flipbook: () => Flipbook,
    ObjectCache: () => ObjectCache,
    Prefab: () => Prefab,
    PrefabStorage: () => PrefabStorage,
    Queue: () => Queue,
    RNG: () => RNG,
    ShootBase: () => ShootBase,
    SnapRotate: () => SnapRotate,
    SnowParticles: () => SnowParticles,
    Tags: () => Tags,
    clamp: () => clamp2,
    cloneObject: () => cloneObject,
    lerp: () => lerp5,
    rng: () => rng,
    rngWithWeight: () => rngWithWeight,
    shuffleArray: () => shuffleArray,
    wlUtils: () => wlUtils
  });

  // node_modules/@wonderlandengine/api/dist/property.js
  var Type;
  (function(Type3) {
    Type3[Type3["Native"] = 0] = "Native";
    Type3[Type3["Bool"] = 1] = "Bool";
    Type3[Type3["Int"] = 2] = "Int";
    Type3[Type3["Float"] = 3] = "Float";
    Type3[Type3["String"] = 4] = "String";
    Type3[Type3["Enum"] = 5] = "Enum";
    Type3[Type3["Object"] = 6] = "Object";
    Type3[Type3["Mesh"] = 7] = "Mesh";
    Type3[Type3["Texture"] = 8] = "Texture";
    Type3[Type3["Material"] = 9] = "Material";
    Type3[Type3["Animation"] = 10] = "Animation";
    Type3[Type3["Skin"] = 11] = "Skin";
    Type3[Type3["Color"] = 12] = "Color";
  })(Type || (Type = {}));
  var Property = {
    /**
     * Create an boolean property.
     *
     * @param defaultValue The default value. If not provided, defaults to `false`.
     */
    bool(defaultValue = false) {
      return { type: Type.Bool, default: defaultValue };
    },
    /**
     * Create an integer property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0`.
     */
    int(defaultValue = 0) {
      return { type: Type.Int, default: defaultValue };
    },
    /**
     * Create an float property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0.0`.
     */
    float(defaultValue = 0) {
      return { type: Type.Float, default: defaultValue };
    },
    /**
     * Create an string property.
     *
     * @param defaultValue The default value. If not provided, defaults to `''`.
     */
    string(defaultValue = "") {
      return { type: Type.String, default: defaultValue };
    },
    /**
     * Create an enumeration property.
     *
     * @param values The list of values.
     * @param defaultValue The default value. Can be a string or an index into
     *     `values`. If not provided, defaults to the first element.
     */
    enum(values, defaultValue) {
      return { type: Type.Enum, values, default: defaultValue };
    },
    /** Create an {@link Object3D} reference property. */
    object(opts) {
      return { type: Type.Object, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Mesh} reference property. */
    mesh(opts) {
      return { type: Type.Mesh, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Texture} reference property. */
    texture(opts) {
      return { type: Type.Texture, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Material} reference property. */
    material(opts) {
      return { type: Type.Material, default: null, required: opts?.required ?? false };
    },
    /** Create an {@link Animation} reference property. */
    animation(opts) {
      return { type: Type.Animation, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Skin} reference property. */
    skin(opts) {
      return { type: Type.Skin, default: null, required: opts?.required ?? false };
    },
    /**
     * Create a color property.
     *
     * @param r The red component, in the range [0; 1].
     * @param g The green component, in the range [0; 1].
     * @param b The blue component, in the range [0; 1].
     * @param a The alpha component, in the range [0; 1].
     */
    color(r = 0, g = 0, b = 0, a = 1) {
      return { type: Type.Color, default: [r, g, b, a] };
    }
  };

  // node_modules/@wonderlandengine/api/dist/decorators.js
  function propertyDecorator(data) {
    return function(target, propertyKey) {
      const ctor = target.constructor;
      ctor.Properties = ctor.hasOwnProperty("Properties") ? ctor.Properties : {};
      ctor.Properties[propertyKey] = data;
    };
  }
  function enumerable() {
    return function(_, __, descriptor) {
      descriptor.enumerable = true;
    };
  }
  function nativeProperty() {
    return function(target, propertyKey, descriptor) {
      enumerable()(target, propertyKey, descriptor);
      propertyDecorator({ type: Type.Native })(target, propertyKey);
    };
  }
  var property = {};
  for (const name in Property) {
    property[name] = (...args) => {
      const functor = Property[name];
      return propertyDecorator(functor(...args));
    };
  }

  // node_modules/@wonderlandengine/api/dist/utils/object.js
  function isString(value) {
    if (value === "")
      return true;
    return value && (typeof value === "string" || value.constructor === String);
  }
  function isNumber(value) {
    if (value === null || value === void 0)
      return false;
    return typeof value === "number" || value.constructor === Number;
  }
  function isImageLike(value) {
    return value instanceof HTMLImageElement || value instanceof HTMLVideoElement || value instanceof HTMLCanvasElement;
  }

  // node_modules/@wonderlandengine/api/dist/utils/event.js
  var TransactionType;
  (function(TransactionType2) {
    TransactionType2[TransactionType2["Addition"] = 1] = "Addition";
    TransactionType2[TransactionType2["Removal"] = 2] = "Removal";
  })(TransactionType || (TransactionType = {}));
  var Emitter = class {
    /**
     * List of listeners to trigger when `notify` is called.
     *
     * @hidden
     */
    _listeners = [];
    /**
     * `true` if the emitter is currently notifying listeners. This
     * is used to defer addition and removal.
     *
     * @hidden
     */
    _notifying = false;
    /**
     * Pending additions / removals, performed during a notification.
     *
     * @hidden
     */
    _transactions = [];
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Basic usage:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * });
     * ```
     *
     * Automatically remove the listener when an event is received:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * }, {once: true});
     * ```
     *
     * @param listener The callback to register.
     * @param opts The listener options. For more information, please have a look
     *     at the {@link ListenerOptions} interface.
     *
     * @returns Reference to self (for method chaining)
     */
    add(listener, opts = {}) {
      const { once = false, id = void 0 } = opts;
      const data = { id, once, callback: listener };
      if (this._notifying) {
        this._transactions.push({ type: TransactionType.Addition, data });
        return this;
      }
      this._listeners.push(data);
      return this;
    }
    /**
     * Equivalent to {@link Emitter.add}.
     *
     * @param listeners The callback(s) to register.
     * @returns Reference to self (for method chaining).
     *
     * @deprecated Please use {@link Emitter.add} instead.
     */
    push(...listeners) {
      for (const cb of listeners)
        this.add(cb);
      return this;
    }
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Once notified, the listener will be automatically removed.
     *
     * The method is equivalent to calling {@link Emitter.add} with:
     *
     * ```js
     * emitter.add(listener, {once: true});
     * ```
     *
     * @param listener The callback to register.
     *
     * @returns Reference to self (for method chaining).
     */
    once(listener) {
      return this.add(listener, { once: true });
    }
    /**
     * Remove a registered listener.
     *
     * Usage with a callback:
     *
     * ```js
     * const listener = (data) => console.log(data);
     * emitter.add(listener);
     *
     * // Remove using the callback reference:
     * emitter.remove(listener);
     * ```
     *
     * Usage with an id:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'my-callback'});
     *
     * // Remove using the id:
     * emitter.remove('my-callback');
     * ```
     *
     * Using identifiers, you will need to ensure your value is unique to avoid
     * removing listeners from other libraries, e.g.,:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'non-unique'});
     * // This second listener could be added by a third-party library.
     * emitter.add((data) => console.log('Hello From Library!'), {id: 'non-unique'});
     *
     * // Ho Snap! This also removed the library listener!
     * emitter.remove('non-unique');
     * ```
     *
     * The identifier can be any type. However, remember that the comparison will be
     * by-value for primitive types (string, number), but by reference for objects.
     *
     * Example:
     *
     * ```js
     * emitter.add(() => console.log('Hello'), {id: {value: 42}});
     * emitter.add(() => console.log('World!'), {id: {value: 42}});
     * emitter.remove({value: 42}); // None of the above listeners match!
     * emitter.notify(); // Prints 'Hello' and 'World!'.
     * ```
     *
     * Here, both emitters have id `{value: 42}`, but the comparison is made by reference. Thus,
     * the `remove()` call has no effect. We can make it work by doing:
     *
     * ```js
     * const id = {value: 42};
     * emitter.add(() => console.log('Hello'), {id});
     * emitter.add(() => console.log('World!'), {id});
     * emitter.remove(id); // Same reference, it works!
     * emitter.notify(); // Doesn't print.
     * ```
     *
     * @param listener The registered callback or a value representing the `id`.
     *
     * @returns Reference to self (for method chaining)
     */
    remove(listener) {
      if (this._notifying) {
        this._transactions.push({ type: TransactionType.Removal, data: listener });
        return this;
      }
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener) {
          listeners.splice(i--, 1);
        }
      }
      return this;
    }
    /**
     * Check whether the listener is registered.
     *
     * @note This method performs a linear search.
     *
     * * @note Doesn't account for pending listeners, i.e.,
     * listeners added / removed during a notification.
     *
     * @param listener The registered callback or a value representing the `id`.
     * @returns `true` if the handle is found, `false` otherwise.
     */
    has(listener) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener)
          return true;
      }
      return false;
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note This method ensures all listeners are called even if
     * an exception is thrown. For (possibly) faster notification,
     * please use {@link Emitter.notifyUnsafe}.
     *
     * @param data The data to pass to listener when invoked.
     */
    notify(...data) {
      const listeners = this._listeners;
      this._notifying = true;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        try {
          listener.callback(...data);
        } catch (e) {
          console.error(e);
        }
      }
      this._notifying = false;
      this._flushTransactions();
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note Because this method doesn't catch exceptions, some listeners
     * will be skipped on a throw. Please use {@link Emitter.notify} for safe
     * notification.
     *
     * @param data The data to pass to listener when invoked.
     */
    notifyUnsafe(...data) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        listener.callback(...data);
      }
      this._flushTransactions();
    }
    /**
     * Return a promise that will resolve on the next event.
     *
     * @note The promise might never resolve if no event is sent.
     *
     * @returns A promise that resolves with the data passed to
     *     {@link Emitter.notify}.
     */
    promise() {
      return new Promise((res, _) => {
        this.once((...args) => {
          if (args.length > 1) {
            res(args);
          } else {
            res(args[0]);
          }
        });
      });
    }
    /**
     * Number of listeners.
     *
     * @note Doesn't account for pending listeners, i.e.,
     * listeners added / removed during a notification.
     */
    get listenerCount() {
      return this._listeners.length;
    }
    /** `true` if it has no listeners, `false` otherwise. */
    get isEmpty() {
      return this.listenerCount === 0;
    }
    /**
     * Flush all pending transactions.
     *
     * @hidden
     */
    _flushTransactions() {
      const listeners = this._listeners;
      for (const transaction of this._transactions) {
        if (transaction.type === TransactionType.Addition) {
          listeners.push(transaction.data);
        } else {
          this.remove(transaction.data);
        }
      }
      this._transactions.length = 0;
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/misc.js
  function clamp(val, min2, max2) {
    return Math.max(Math.min(max2, val), min2);
  }
  function capitalizeFirstUTF8(str5) {
    return `${str5[0].toUpperCase()}${str5.substring(1)}`;
  }
  function createDestroyedProxy(type) {
    return new Proxy({}, {
      get(_, param) {
        if (param === "isDestroyed")
          return true;
        throw new Error(`Cannot read '${param}' of destroyed ${type}`);
      },
      set(_, param) {
        throw new Error(`Cannot write '${param}' of destroyed ${type}`);
      }
    });
  }

  // node_modules/@wonderlandengine/api/dist/resources/resource.js
  function createDestroyedProxy2(host, type) {
    return new Proxy({}, {
      get(_, param) {
        if (param === "isDestroyed")
          return true;
        throw new Error(`Cannot read '${param}' of destroyed '${type.name}' resource from ${host}`);
      },
      set(_, param) {
        throw new Error(`Cannot write '${param}' of destroyed '${type.name}' resource from ${host}`);
      }
    });
  }
  var SceneResource = class {
    static _pack(scene, index) {
      return scene << 22 | index;
    }
    /** Relative index in the host. @hidden */
    _index = -1;
    /** Packed id containing root and index. @hidden */
    _id = -1;
    /** @hidden */
    _host;
    constructor(host, index) {
      this._host = host;
      this._index = index;
      this._id = SceneResource._pack(host._index, index);
    }
    /**
     * Checks equality by comparing ids and **not** the JavaScript reference.
     *
     * @deprecated Use JavaScript reference comparison instead:
     *
     * ```js
     * const meshA = sceneGroup.meshes.create({vertexCount: 1});
     * const meshB = sceneGroup.meshes.create({vertexCount: 1});
     * const meshC = meshB;
     * console.log(meshA === meshB); // false
     * console.log(meshA === meshA); // true
     * console.log(meshB === meshC); // true
     * ```
     */
    equals(other) {
      if (!other)
        return false;
      return this._host._index === this._host._index && this._id === other._id;
    }
    /** Hosting instance. */
    get scene() {
      return this._host;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._host.engine;
    }
    /** Index of this texture in the {@link SceneGroup}'s manager. */
    get index() {
      return this._index;
    }
    /**
     * `true` if the object is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a class attribute / method will throw.
     */
    get isDestroyed() {
      return this._id < 0;
    }
  };
  var ResourceManager = class {
    /** @hidden */
    _host;
    /** Cache. @hidden */
    _cache = [];
    /** Resource class. @hidden */
    _template;
    /** Destructor proxy, used if {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`. @hidden */
    _destructor = null;
    /**
     * Create a new manager
     *
     * @param Class The class to instantiate when wrapping an index.
     * @param root The root containing the managed resources.
     *
     * @hidden
     */
    constructor(host, Class) {
      this._host = host;
      this._template = Class;
    }
    /**
     * Wrap the index into a resource instance.
     *
     * @note The index is relative to the root, i.e., doesn't pack the root.
     *
     * @param index The resource index.
     * @returns
     */
    wrap(index) {
      if (index <= 0)
        return null;
      const texture = this._cache[index] ?? (this._cache[index] = new this._template(this._host, index));
      return texture;
    }
    /**
     * Retrieve the resource at the given index.
     *
     * @note The index is relative to the root, i.e., doesn't pack the root.
     */
    get(index) {
      return this._cache[index] ?? null;
    }
    /** Number of textures allocated in the manager. */
    get allocatedCount() {
      return this._cache.length;
    }
    /**
     * Number of textures in the manager.
     *
     * @note For performance reasons, avoid calling this method when possible.
     */
    get count() {
      let count = 0;
      for (const res of this._cache) {
        if (res && res.index >= 0)
          ++count;
      }
      return count;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._host.engine;
    }
    /**
     * Destroy the instance.
     *
     * @note This method takes care of the prototype destruction.
     *
     * @hidden
     */
    _destroy(instance) {
      const index = instance.index;
      instance._index = -1;
      instance._id = -1;
      this._cache[index] = null;
      if (!this.engine.erasePrototypeOnDestroy)
        return;
      if (!this._destructor)
        this._destructor = createDestroyedProxy2(this._host, this._template);
      Object.setPrototypeOf(instance, this._destructor);
    }
    /**
     * Pack a relative index into root + relative index number.
     * @param index
     */
    _pack(index) {
      return SceneResource._pack(this._host._index, index);
    }
  };

  // node_modules/@wonderlandengine/api/dist/resources/material-manager.js
  var MaterialParamType;
  (function(MaterialParamType3) {
    MaterialParamType3[MaterialParamType3["UnsignedInt"] = 0] = "UnsignedInt";
    MaterialParamType3[MaterialParamType3["Int"] = 1] = "Int";
    MaterialParamType3[MaterialParamType3["HalfFloat"] = 2] = "HalfFloat";
    MaterialParamType3[MaterialParamType3["Float"] = 3] = "Float";
    MaterialParamType3[MaterialParamType3["Sampler"] = 4] = "Sampler";
    MaterialParamType3[MaterialParamType3["Font"] = 5] = "Font";
  })(MaterialParamType || (MaterialParamType = {}));
  var Material = class extends SceneResource {
    /**
     * @deprecated Use {@link MaterialManager#getTemplate} via {@link SceneGroup#materials}
     * to create a new material with a given pipeline:
     *
     * ```js
     * const PhongMaterial = sceneGroup.materials.getTemplate('Phong Opaque');
     * const material = new PhongMaterial();
     * material.setDiffuseColor([1, 0, 0]);
     * ```
     */
    constructor(host, params) {
      const group = host instanceof SceneGroup ? host : host.scene.group;
      if (typeof params !== "number") {
        if (!params?.pipeline)
          throw new Error("Missing parameter 'pipeline'");
        const template = group.materials.getTemplate(params.pipeline);
        const material = new template();
        super(group, material._index);
        return material;
      }
      super(group, params);
    }
    /**
     * Check whether a parameter exists on this material.
     *
     * @param name The name to check.
     * @returns `true` if the parameter with name `name` exists on this material,
     *     `false` otherwise.
     */
    hasParameter(name) {
      const parameters = this.constructor.Parameters;
      return parameters && parameters.has(name);
    }
    /** @deprecated Use {@link #pipeline} instead. */
    get shader() {
      return this.pipeline;
    }
    /** Name of the pipeline used by this material. */
    get pipeline() {
      const wasm = this.engine.wasm;
      return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._id));
    }
    /**
     * Create a copy of the underlying native material.
     *
     * @returns Material clone.
     */
    clone() {
      const index = this.engine.wasm._wl_material_clone(this._id);
      return this._host.materials.wrap(index);
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Material(destroyed)";
      }
      return `Material('${this.pipeline}', ${this._index})`;
    }
    /**
     * Wrap a native material index.
     *
     * @param engine Engine instance.
     * @param index The index.
     * @returns Material instance or `null` if index <= 0.
     *
     * @deprecated Use the {@link SceneGroup#materials} instead.
     */
    static wrap(engine, index) {
      const root = engine.scene.group;
      return root.materials.wrap(index);
    }
  };
  /** Proxy used to override prototypes of destroyed materials. */
  __publicField(Material, "_destroyedPrototype", createDestroyedProxy("material"));
  var MaterialManager = class extends ResourceManager {
    /** Material classes. @hidden. */
    _materialTemplates = [];
    /** @hidden */
    constructor(root) {
      super(root, Material);
      this._cacheDefinitions();
    }
    /** @override */
    wrap(index) {
      if (index <= 0)
        return null;
      const cached = this._cache[index];
      if (cached)
        return cached;
      const wasm = this._host.engine.wasm;
      const packed = this._pack(index);
      const definition = wasm._wl_material_get_definition(packed);
      const Template = this._materialTemplates[definition];
      const material = new Template(index);
      return this._wrapInstance(material);
    }
    /**
     * Get the material class with the given pipeline name.
     *
     * #### Usage
     *
     * ```js
     * const PhongMaterial = sceneGroup.materials.getTemplate('Phong Opaque');
     * const material = new PhongMaterial();
     * material.setDiffuseColor([1.0, 0.0, 0.0, 1.0]);
     * ```
     *
     * @param pipeline The pipeline name to search for.
     * @returns The material class.
     *
     * @throws `Error` if the material class doesn't exist.
     */
    getTemplate(pipeline) {
      const wasm = this._host.engine.wasm;
      const index = wasm._wl_sceneRoot_get_material_definition_index(this._host._index, wasm.tempUTF8(pipeline));
      if (!index) {
        throw new Error(`Pipeline '${pipeline}' doesn't exist in the scene`);
      }
      return this._materialTemplates[index];
    }
    /**
     * Wrap a material instance.
     *
     * @todo: Remove at 2.0.0.
     *
     * @note Wrapping should only be called once per instance.
     *
     * @param instance The material instance.
     * @returns The new material, wrapped in a proxy.
     */
    _wrapInstance(instance) {
      this._cache[instance.index] = instance;
      if (!this.engine.legacyMaterialSupport)
        return instance;
      const proxy = new Proxy(instance, {
        get(target, prop) {
          if (!target.hasParameter(prop)) {
            return target[prop];
          }
          const name = `get${capitalizeFirstUTF8(prop)}`;
          return target[name]();
        },
        set(target, prop, value) {
          if (!target.hasParameter(prop)) {
            target[prop] = value;
            return true;
          }
          const name = `set${capitalizeFirstUTF8(prop)}`;
          target[name](value);
          return true;
        }
      });
      this._cache[instance.index] = proxy;
      return proxy;
    }
    /**
     * Cache all pipeline definitions.
     *
     * @hidden
     */
    _cacheDefinitions() {
      const wasm = this._host.engine.wasm;
      const count = wasm._wl_sceneRoot_get_material_definition_count(this._host._index);
      for (let i = 0; i < count; ++i) {
        const definitionIndex = this._pack(i);
        this._materialTemplates[i] = this._createMaterialTemplate(definitionIndex);
      }
    }
    /**
     * Create a material class from a definition index.
     *
     * @param wasm The WASM instance.
     * @param definitionId The definition index to wrap.
     * @returns The material class.
     */
    _createMaterialTemplate(definitionId) {
      const group = this._host;
      const template = class CustomMaterial extends Material {
        static Parameters = /* @__PURE__ */ new Set();
        constructor(index) {
          const engine = group.engine;
          index = index ?? engine.wasm._wl_material_create(group._index, definitionId);
          super(group, index);
          return group.materials._wrapInstance(this);
        }
      };
      const wasm = this.engine.wasm;
      const nbParams = wasm._wl_material_definition_get_param_count(definitionId);
      for (let index = 0; index < nbParams; ++index) {
        const name = wasm.UTF8ToString(wasm._wl_material_definition_get_param_name(definitionId, index));
        template.Parameters.add(name);
        const t = wasm._wl_material_definition_get_param_type(definitionId, index);
        const type = t & 255;
        const componentCount = t >> 8 & 255;
        const capitalized = capitalizeFirstUTF8(name);
        const getterId = `get${capitalized}`;
        const setterId = `set${capitalized}`;
        const templateProto = template.prototype;
        switch (type) {
          case MaterialParamType.UnsignedInt:
            templateProto[getterId] = uint32Getter(index, componentCount);
            templateProto[setterId] = uint32Setter(index);
            break;
          case MaterialParamType.Int:
            templateProto[getterId] = int32Getter(index, componentCount);
            templateProto[setterId] = uint32Setter(index);
            break;
          case MaterialParamType.HalfFloat:
          case MaterialParamType.Float:
            templateProto[getterId] = float32Getter(index, componentCount);
            templateProto[setterId] = float32Setter(index);
            break;
          case MaterialParamType.Sampler:
            templateProto[getterId] = samplerGetter(index);
            templateProto[setterId] = samplerSetter(index);
            break;
        }
      }
      return template;
    }
  };
  function uint32Getter(index, count) {
    if (count === 1) {
      return function() {
        const wasm = this.engine.wasm;
        wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
        return wasm._tempMemUint32[0];
      };
    }
    return function(out = new Uint32Array(count)) {
      const wasm = this.engine.wasm;
      wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
      for (let i = 0; i < out.length; ++i) {
        out[i] = wasm._tempMemUint32[i];
      }
      return out;
    };
  }
  function uint32Setter(index) {
    return function(value) {
      const wasm = this.engine.wasm;
      wasm._wl_material_set_param_value_uint(this._id, index, value);
    };
  }
  function int32Getter(index, count) {
    if (count === 1) {
      return function() {
        const wasm = this.engine.wasm;
        wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
        return wasm._tempMemInt[0];
      };
    }
    return function(out = new Int32Array(count)) {
      const wasm = this.engine.wasm;
      wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
      for (let i = 0; i < out.length; ++i) {
        out[i] = wasm._tempMemInt[i];
      }
      return out;
    };
  }
  function float32Getter(index, count) {
    if (count === 1) {
      return function() {
        const wasm = this.engine.wasm;
        wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
        return wasm._tempMemFloat[0];
      };
    }
    return function(out = new Float32Array(count)) {
      const wasm = this.engine.wasm;
      wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
      for (let i = 0; i < out.length; ++i) {
        out[i] = wasm._tempMemFloat[i];
      }
      return out;
    };
  }
  function float32Setter(index) {
    return function(value) {
      const wasm = this.engine.wasm;
      let count = 1;
      if (typeof value === "number") {
        wasm._tempMemFloat[0] = value;
      } else {
        count = value.length;
        for (let i = 0; i < count; ++i)
          wasm._tempMemFloat[i] = value[i];
      }
      wasm._wl_material_set_param_value_float(this._id, index, wasm._tempMem, count);
    };
  }
  function samplerGetter(index) {
    return function() {
      const wasm = this.engine.wasm;
      wasm._wl_material_get_param_value(this._id, index, wasm._tempMem);
      return this.engine.textures.wrap(wasm._tempMemInt[0]);
    };
  }
  function samplerSetter(index) {
    return function(value) {
      this.scene.assertOrigin(value);
      const wasm = this.engine.wasm;
      wasm._wl_material_set_param_value_uint(this._id, index, value._id);
    };
  }

  // node_modules/@wonderlandengine/api/dist/resources/mesh-manager.js
  var MeshManager = class extends ResourceManager {
    constructor(group) {
      super(group, Mesh);
    }
    /**
     * Create a new mesh.
     *
     * @param params Vertex and index data. For more information, have a look
     *     at the {@link MeshParameters} object.
     */
    create(params) {
      if (!params.vertexCount)
        throw new Error("Missing parameter 'vertexCount'");
      const wasm = this._host.engine.wasm;
      let indexData = 0;
      let indexType = 0;
      let indexDataSize = 0;
      if (params.indexData) {
        indexType = params.indexType || MeshIndexType.UnsignedShort;
        indexDataSize = params.indexData.length * indexType;
        indexData = wasm._malloc(indexDataSize);
        switch (indexType) {
          case MeshIndexType.UnsignedByte:
            wasm.HEAPU8.set(params.indexData, indexData);
            break;
          case MeshIndexType.UnsignedShort:
            wasm.HEAPU16.set(params.indexData, indexData >> 1);
            break;
          case MeshIndexType.UnsignedInt:
            wasm.HEAPU32.set(params.indexData, indexData >> 2);
            break;
        }
      }
      const { skinningType = MeshSkinningType.None } = params;
      const index = wasm._wl_mesh_create(this._host._index, indexData, indexDataSize, indexType, params.vertexCount, skinningType);
      const instance = new Mesh(this._host, index);
      this._cache[instance.index] = instance;
      return instance;
    }
  };

  // node_modules/@wonderlandengine/api/dist/resources/texture-manager.js
  var TextureManager = class extends ResourceManager {
    constructor(root) {
      super(root, Texture);
    }
    /**
     * Create a new texture from an image or video.
     *
     * @note The media must already be loaded. To automatically
     * load the media and create a texture, use {@link TextureManager.load} instead.
     *
     * @param image Media element to create the texture from.
     * @ret\urns The new texture with the media content.
     */
    create(image) {
      const wasm = this.engine.wasm;
      const jsImageIndex = wasm._images.length;
      wasm._images.push(image);
      if (image instanceof HTMLImageElement && !image.complete) {
        throw new Error("image must be ready to create a texture");
      }
      const width = image.videoWidth ?? image.width;
      const height = image.videoHeight ?? image.height;
      const host = this._host._index;
      const imageIndex = wasm._wl_image_create(host, jsImageIndex, width, height);
      const imageId = SceneResource._pack(host, imageIndex);
      const index = wasm._wl_texture_create(host, imageId);
      const instance = new Texture(this._host, index);
      this._cache[instance.index] = instance;
      return instance;
    }
    /**
     * Load an image from URL as {@link Texture}.
     *
     * @param filename URL to load from.
     * @param crossOrigin Cross origin flag for the image object.
     * @returns Loaded texture.
     */
    load(filename, crossOrigin) {
      let image = new Image();
      image.crossOrigin = crossOrigin ?? image.crossOrigin;
      image.src = filename;
      return new Promise((resolve, reject) => {
        image.onload = () => {
          resolve(this.create(image));
        };
        image.onerror = function() {
          reject("Failed to load image. Not found or no read access");
        };
      });
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/fetch.js
  function fetchWithProgress(path, onProgress) {
    return new Promise((resolve, reject) => {
      const xhr = new XMLHttpRequest();
      xhr.open("GET", path);
      xhr.responseType = "arraybuffer";
      xhr.onprogress = (progress) => {
        if (progress.lengthComputable) {
          onProgress?.(progress.loaded, progress.total);
        }
      };
      xhr.onload = () => {
        if (xhr.status >= 200 && xhr.status < 300) {
          const buffer = xhr.response;
          onProgress?.(buffer.byteLength, buffer.byteLength);
          resolve(buffer);
        } else {
          reject(xhr.statusText);
        }
      };
      xhr.onerror = () => reject(xhr.statusText);
      xhr.send();
    });
  }
  function getBaseUrl(url) {
    return url.substring(0, url.lastIndexOf("/"));
  }
  function getFilename(url) {
    if (url.endsWith("/")) {
      url = url.substring(0, url.lastIndexOf("/"));
    }
    const lastSlash = url.lastIndexOf("/");
    if (lastSlash < 0)
      return url;
    return url.substring(lastSlash + 1);
  }
  function onImageReady(image) {
    return new Promise((res, rej) => {
      if (image instanceof HTMLCanvasElement) {
        res(image);
      } else if (image instanceof HTMLVideoElement) {
        if (image.readyState >= 2) {
          res(image);
          return;
        }
        image.addEventListener("loadeddata", () => {
          if (image.readyState >= 2)
            res(image);
        }, { once: true });
        return;
      } else if (image.complete) {
        res(image);
        return;
      }
      image.addEventListener("load", () => res(image), { once: true });
      image.addEventListener("error", rej, { once: true });
    });
  }

  // node_modules/@wonderlandengine/api/dist/component.js
  var ComponentManagers = class {
    /** Animation manager index. */
    animation = -1;
    /** Collision manager index. */
    collision = -1;
    /** JavaScript manager index. */
    js = -1;
    /** Physx manager index. */
    physx = -1;
    /** View manager index. */
    view = -1;
    /**
     * Component class instances per type to avoid GC.
     *
     * @note Maps the manager index to the list of components.
     *
     * @todo: Refactor ResourceManager and re-use for components.
     */
    _cache = [];
    /** Manager index to component class. */
    _constructors;
    /* Manager name to the manager index. */
    _nativeManagers = /* @__PURE__ */ new Map();
    /** Host instance. */
    _scene;
    constructor(scene) {
      this._scene = scene;
      const wasm = this._scene.engine.wasm;
      const native = [
        AnimationComponent,
        CollisionComponent,
        InputComponent,
        LightComponent,
        MeshComponent,
        PhysXComponent,
        TextComponent,
        ViewComponent
      ];
      this._cache = new Array(native.length);
      this._constructors = new Array(native.length);
      for (const Class of native) {
        const ptr2 = wasm.tempUTF8(Class.TypeName);
        const manager = wasm._wl_scene_get_component_manager_index(scene._index, ptr2);
        this._constructors;
        this._constructors[manager] = Class;
        this._cache[manager] = [];
        this._nativeManagers.set(Class.TypeName, manager);
      }
      this.animation = this._nativeManagers.get(AnimationComponent.TypeName);
      this.collision = this._nativeManagers.get(CollisionComponent.TypeName);
      this.physx = this._nativeManagers.get(PhysXComponent.TypeName);
      this.view = this._nativeManagers.get(ViewComponent.TypeName);
      const ptr = wasm.tempUTF8("js");
      this.js = wasm._wl_scene_get_component_manager_index(scene._index, ptr);
      this._cache[this.js] = [];
    }
    createJs(index, id, type, object) {
      const wasm = this._scene.engine.wasm;
      const ctor = wasm._componentTypes[type];
      if (!ctor) {
        throw new Error(`Type index ${type} isn't registered`);
      }
      const log = this._scene.engine.log;
      let component = null;
      try {
        component = new ctor(this._scene, this.js, id);
      } catch (e) {
        log.error(LogTag.Component, `Exception during instantiation of component ${ctor.TypeName}`);
        log.error(LogTag.Component, e);
        component = new BrokenComponent(this._scene);
      }
      component._object = this._scene.wrap(object);
      try {
        component.resetProperties();
      } catch (e) {
        log.error(LogTag.Component, `Exception during ${component.type} resetProperties() on object ${component.object.name}`);
        log.error(LogTag.Component, e);
      }
      this._scene._jsComponents[index] = component;
      this._cache[this.js][id] = component;
      return component;
    }
    /**
     * Retrieve a cached component.
     *
     * @param manager The manager index.
     * @param id The component id.
     * @returns The component if cached, `null` otherwise.
     */
    get(manager, id) {
      return this._cache[manager][id] ?? null;
    }
    /**
     * Wrap the animation.
     *
     * @param id Id to wrap.
     * @returns The previous instance if it was cached, or a new one.
     */
    wrapAnimation(id) {
      return this.wrapNative(this.animation, id);
    }
    /**
     * Wrap the collision.
     *
     * @param id Id to wrap.
     * @returns The previous instance if it was cached, or a new one.
     */
    wrapCollision(id) {
      return this.wrapNative(this.collision, id);
    }
    /**
     * Wrap the view.
     *
     * @param id Id to wrap.
     * @returns The previous instance if it was cached, or a new one.
     */
    wrapView(id) {
      return this.wrapNative(this.view, id);
    }
    /**
     * Wrap the physx.
     *
     * @param id Id to wrap.
     * @returns The previous instance if it was cached, or a new one.
     */
    wrapPhysx(id) {
      return this.wrapNative(this.physx, id);
    }
    /**
     * Retrieves a component instance if it exists, or create and cache
     * a new one.
     *
     * @note This api is meant to be used internally. Please have a look at
     * {@link Object3D.addComponent} instead.
     *
     * @param componentType Component manager index
     * @param componentId Component id in the manager
     *
     * @returns JavaScript instance wrapping the native component
     */
    wrapNative(manager, id) {
      if (id < 0)
        return null;
      const cache = this._cache[manager];
      if (cache[id])
        return cache[id];
      const scene = this._scene;
      const Class = this._constructors[manager];
      const component = new Class(scene, manager, id);
      cache[id] = component;
      return component;
    }
    /**
     * Wrap a native or js component.
     *
     * @throws For JavaScript components that weren't previously cached,
     * since that would be a bug in the runtime / api.
     *
     * @param manager The manager index.
     * @param id The id to wrap.
     * @returns The previous instance if it was cached, or a new one.
     */
    wrapAny(manager, id) {
      if (id < 0)
        return null;
      if (manager === this.js) {
        const found = this._cache[this.js][id];
        if (!found) {
          throw new Error("JS components must always be cached");
        }
        return found.constructor !== BrokenComponent ? found : null;
      }
      return this.wrapNative(manager, id);
    }
    getNativeManager(name) {
      const manager = this._nativeManagers.get(name);
      return manager !== void 0 ? manager : null;
    }
    /**
     * Perform cleanup upon component destruction.
     *
     * @param instance The instance to destroy.
     *
     * @hidden
     */
    destroy(instance) {
      const localId = instance._localId;
      const manager = instance._manager;
      instance._id = -1;
      instance._localId = -1;
      instance._manager = -1;
      const erasePrototypeOnDestroy = this._scene.engine.erasePrototypeOnDestroy;
      if (erasePrototypeOnDestroy && instance) {
        Object.setPrototypeOf(instance, DestroyedComponentInstance);
      }
      this._cache[manager][localId] = null;
    }
    /** Number of managers, including the JavaScript manager. */
    get managersCount() {
      return this._nativeManagers.size + 1;
    }
  };

  // node_modules/@wonderlandengine/api/dist/scene.js
  var MAGIC_BIN = "WLEV";
  var SceneLike = class {
    /** Index in the scene manager. @hidden */
    _index;
    /** @hidden */
    _root;
    /**
     * Component manager caching to avoid GC.
     *
     * @hidden
     */
    _components;
    /**
     * JavaScript components for this scene.
     *
     * This array is moved into the WASM instance upon activation.
     *
     * @hidden
     */
    _jsComponents = [];
    /**
     * @deprecated Use {@link SceneLike#engine} instead.
     *
     * @todo(2.0.0): Remove.
     */
    _engine;
    /** @hidden */
    _animations;
    /** @hidden */
    _skins;
    /**
     * Object class instances to avoid GC.
     *
     * @hidden
     */
    _objectCache = [];
    /**
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    constructor(group, index) {
      this._root = group;
      this._index = index;
      this._engine = group.engine;
      this._components = new ComponentManagers(this);
      this._animations = new ResourceManager(this, Animation);
      this._skins = new ResourceManager(this, Skin);
    }
    /**
     * Add an object to the scene.
     *
     * @param parent Parent object or `null`.
     * @returns A newly created object.
     */
    addObject(parent = null) {
      this.assertOrigin(parent);
      const parentId = parent ? parent._id : 0;
      const objectId = this.engine.wasm._wl_scene_add_object(this._index, parentId);
      return this.wrap(objectId);
    }
    /**
     * Batch-add objects to the scene.
     *
     * Will provide better performance for adding multiple objects (e.g. > 16)
     * than calling {@link Scene#addObject} repeatedly in a loop.
     *
     * By providing upfront information of how many objects will be required,
     * the engine is able to batch-allocate the required memory rather than
     * convervatively grow the memory in small steps.
     *
     * @experimental This API might change in upcoming versions.
     *
     * @param count Number of objects to add.
     * @param parent Parent object or `null`, default `null`.
     * @param componentCountHint Hint for how many components in total will
     *      be added to the created objects afterwards, default `0`.
     * @returns Newly created objects
     */
    addObjects(count, parent = null, componentCountHint = 0) {
      const parentId = parent ? parent._id : 0;
      this.engine.wasm.requireTempMem(count * 2);
      const actualCount = this.engine.wasm._wl_scene_add_objects(this._index, parentId, count, componentCountHint || 0, this.engine.wasm._tempMem, this.engine.wasm._tempMemSize >> 1);
      const ids = this.engine.wasm._tempMemUint16.subarray(0, actualCount);
      const wrapper = this.wrap.bind(this);
      const objects = Array.from(ids, wrapper);
      return objects;
    }
    /**
     * Pre-allocate memory for a given amount of objects and components.
     *
     * Will provide better performance for adding objects later with {@link Scene#addObject}
     * and {@link Scene#addObjects}.
     *
     * By providing upfront information of how many objects will be required,
     * the engine is able to batch-allocate the required memory rather than
     * conservatively grow the memory in small steps.
     *
     * **Experimental:** This API might change in upcoming versions.
     *
     * @param objectCount Number of objects to add.
     * @param componentCountPerType Amount of components to
     *      allocate for {@link Object3D.addComponent}, e.g. `{mesh: 100, collision: 200, "my-comp": 100}`.
     * @since 0.8.10
     */
    reserveObjects(objectCount, componentCountPerType) {
      const wasm = this.engine.wasm;
      componentCountPerType = componentCountPerType || {};
      const names = Object.keys(componentCountPerType);
      const countsPerTypeIndex = wasm._tempMemInt;
      for (let i = 0; i < this._components.managersCount; ++i) {
        countsPerTypeIndex[i] = 0;
      }
      for (const name of names) {
        const count = componentCountPerType[name];
        const nativeIndex = this._components.getNativeManager(name);
        countsPerTypeIndex[nativeIndex !== null ? nativeIndex : this._components.js] += count;
      }
      wasm._wl_scene_reserve_objects(this._index, objectCount, wasm._tempMem);
    }
    /**
     * Root object's children.
     *
     * See {@link Object3D.getChildren} for more information.
     *
     * @param out Destination array, expected to have at least `this.childrenCount` elements.
     * @returns The `out` parameter.
     */
    getChildren(out = new Array(this.childrenCount)) {
      const root = this.wrap(0);
      return root.getChildren(out);
    }
    /**
     * Top-level objects of this scene.
     *
     * See {@link Object3D.children} for more information.
     *
     * @since 1.2.0
     */
    get children() {
      const root = this.wrap(0);
      return root.children;
    }
    /** The number of children of the root object. */
    get childrenCount() {
      return this.engine.wasm._wl_object_get_children_count(0);
    }
    /**
     * Search for objects matching the name.
     *
     * See {@link Object3D.findByName} for more information.
     *
     * @param name The name to search for.
     * @param recursive If `true`, the method will look at all the objects of
     *     this scene. If `false`, this method will only perform the search in
     *     root objects.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.2.0
     */
    findByName(name, recursive = false) {
      const root = this.wrap(0);
      return root.findByName(name, recursive);
    }
    /**
     * Search for all **top-level** objects matching the name.
     *
     * See {@link Object3D.findByNameDirect} for more information.
     *
     * @param name The name to search for.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.2.0
     */
    findByNameDirect(name) {
      const root = this.wrap(0);
      return root.findByNameDirect(name);
    }
    /**
     * Search for **all objects** matching the name.
     *
     * See {@link Object3D.findByNameRecursive} for more information.
     *
     * @param name The name to search for.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.2.0
     */
    findByNameRecursive(name) {
      const root = this.wrap(0);
      return root.findByNameRecursive(name);
    }
    /**
     * Wrap an object ID using {@link Object}.
     *
     * @note This method performs caching and will return the same
     * instance on subsequent calls.
     *
     * @param objectId ID of the object to create.
     *
     * @returns The object
     */
    wrap(objectId) {
      const cache = this._objectCache;
      const o = cache[objectId] || (cache[objectId] = new Object3D(this, objectId));
      return o;
    }
    /**
     * Destroy the scene.
     *
     * Destroying a scene **does not** destroy its resources.
     * Resources are cleared when destroying the root to which this scene belongs.
     */
    destroy() {
      const index = this._root.getSceneIndex(this);
      this.group._destroySceneAtIndex(index);
    }
    /* Public Getters & Setters */
    /**
     * Whether this scene can be activated.
     *
     * For more information about activatability, have a look at {@link Scene#activate}.
     *
     * Streamable scenes can be used as prefab, but can't be activated and
     * run directly.
     *
     * glTF scenes are considered streamable and can only be instantiated.
     *
     * @returns `true` is the scene can be activated, `false` otherwise.
     */
    get activatable() {
      const wasm = this.engine.wasm;
      return !!wasm._wl_scene_activatable(this._index);
    }
    /**
     * Relative directory of the scene that was loaded.
     *
     * This is used for loading any files relative to the scene.
     */
    get baseURL() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_scene_get_baseURL(this._index);
      if (!ptr)
        return "";
      return wasm.UTF8ToString(ptr);
    }
    /**
     * Filename used when loading the file.
     *
     * If the scenes was loaded from memory and no filename was provided,
     * this accessor will return an empty string.
     */
    get filename() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_scene_get_filename(this._index);
      if (!ptr)
        return "";
      return wasm.UTF8ToString(ptr);
    }
    /** Animation resources */
    get animations() {
      return this._animations;
    }
    /** Skin resources */
    get skins() {
      return this._skins;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._root.engine;
    }
    /** Hosting scene root instance. */
    get group() {
      return this._root;
    }
    /**
     * `true` if the object is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a class attribute / method will throw.
     */
    get isDestroyed() {
      return this._index < 0;
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Scene(destroyed)";
      }
      return `Scene('${this.filename}', ${this._index})`;
    }
    /**
     * Checks that the input's scene is the same as this instance.
     *
     * It is forbidden to mix objects and components from different scenes, e.g.,
     *
     * ```js
     * const objA = sceneA.addObject();
     * const objB = sceneA.addObject();
     * objA.parent = objB; // Throws
     * ```
     *
     * @param other Object / component to check.
     *
     * @throws If other's scene isn't the same reference as this.
     */
    assertOrigin(other) {
      if (other && other.scene !== this) {
        throw new Error(`Attempt to use ${other} from ${other.scene} in ${this}`);
      }
    }
    /**
     * Perform cleanup upon object destruction.
     *
     * @param instance The instance to destroy.
     *
     * @hidden
     */
    _destroyObject(instance) {
      const localId = instance._localId;
      instance._id = -1;
      instance._localId = -1;
      if (this.engine.erasePrototypeOnDestroy && instance) {
        Object.setPrototypeOf(instance, DestroyedObjectInstance);
      }
      this._objectCache[localId] = null;
    }
  };
  var Scene = class extends SceneLike {
    /** Called before rendering the scene */
    onPreRender = new Emitter();
    /** Called after the scene has been rendered */
    onPostRender = new Emitter();
    /** Ray hit pointer in WASM heap. @hidden */
    _rayHit;
    /** Ray hit. @hidden */
    _hit;
    constructor(group, index) {
      super(group, index);
      this._rayHit = this.engine?.wasm._malloc(4 * (3 * 4 + 3 * 4 + 4 + 2) + 4);
      this._hit = new RayHit(this, this._rayHit);
    }
    instantiate(chunk) {
      if (chunk.group !== this.group) {
        throw new Error(`Can not instantiate ${chunk} from ${chunk.group} into ${this} from ${this.group}, scenes must live in the same root`);
      }
      const wasm = this.engine.wasm;
      const id = wasm._wl_scene_instantiate(chunk._index, this._index);
      const result = { root: this.wrap(id) };
      if (chunk instanceof SceneGLTF) {
        const obj = this.wrap(id);
        chunk._processInstantiaton(this, obj, result);
      }
      return result;
    }
    /** @todo: Add `instantiateBatch` to instantiate multiple chunks in a row. */
    /**
     * Make this scene active.
     *
     * Once active, the scene will be updated and rendered on the canvas.
     *
     * @note This method will throw if the scene isn't activatable.
     *
     * #### Component Lifecycle
     *
     * Marking a scene as active will:
     * * Call {@link Component#onDeactivate} for all active components of the previous scene
     * * Call {@link Component#onActivate} for all active components of the new scene
     *
     * #### Usage
     *
     * ```js
     * const scene = await sceneGroup.loadScene('Scene.bin');
     * scene.activate();
     * ```
     *
     * @returns A promise that resolves once the scene is ready.
     */
    async activate(opts = { dispatchReadyEvent: false }) {
      if (!this.activatable) {
        throw new Error(`${this} is not activatable. Is it packaged for streaming?`);
      }
      const wasm = this.engine.wasm;
      wasm._wl_deactivate_activeScene();
      const engine = this.engine;
      const previous = this.engine.scene;
      this.engine.scene = this;
      wasm._wl_scene_activate(this._index);
      if (!engine.onLoadingScreenEnd.isDataRetained) {
        engine.onLoadingScreenEnd.notify();
      }
      if (previous.group._legacyLoaded) {
        previous.group.destroy();
      }
      this._downloadDependencies();
      if (engine.physics)
        engine.physics._hit._scene = this;
      await engine.i18n.setLanguage(engine.i18n.languageCode(0));
      if (this.group._legacyLoaded)
        engine.onSceneLoaded.notify();
      engine.onSceneActivated.notify(previous, this);
      if (opts.dispatchReadyEvent)
        this.dispatchReadyEvent();
    }
    /**
     * @todo Provide an API to delete all resources linked to a scene.
     *
     * Example:
     *
     * ```ts
     * const scene = await group.loadScene('Scene.bin');
     * ...
     * scene.destroy({removeResources: true});
     * ```
     */
    /**
     * Destroy this scene and remove it from the group it belongs to.
     *
     * @note Destroying a scene **doesn't** remove the materials, meshes,
     * and textures it references in the group. Those should be cleaned up either by destroying
     * the group, or manually using {@link Mesh.destroy}.
     *
     * @throws If the scene is currently active.
     * */
    destroy() {
      if (this.isActive) {
        throw new Error(`Attempt to destroy ${this}, but destroying the active scene is not supported`);
      }
      const wasm = this.engine.wasm;
      wasm._free(this._rayHit);
      super.destroy();
    }
    /**
     * Currently active view components.
     */
    get activeViews() {
      const wasm = this.engine.wasm;
      const count = wasm._wl_scene_get_active_views(this._index, wasm._tempMem, 16);
      const views = [];
      for (let i = 0; i < count; ++i) {
        const id = wasm._tempMemInt[i];
        views.push(this._components.wrapView(id));
      }
      return views;
    }
    /**
     * Cast a ray through the scene and find intersecting collision components.
     *
     * The resulting ray hit will contain **up to 4** closest ray hits,
     * sorted by increasing distance.
     *
     * Example:
     *
     * ```js
     * const hit = engine.scene.rayCast(
     *     [0, 0, 0],
     *     [0, 0, 1],
     *     1 << 0 | 1 << 4, // Only check against components in groups 0 and 4
     *     25
     * );
     * if (hit.hitCount > 0) {
     *     const locations = hit.getLocations();
     *     console.log(`Object hit at: ${locations[0][0]}, ${locations[0][1]}, ${locations[0][2]}`);
     * }
     * ```
     *
     * @param o Ray origin.
     * @param d Ray direction.
     * @param groupMask Bitmask of collision groups to filter by: only objects
     *        that are part of given groups are considered for the raycast.
     * @param maxDistance Maximum **inclusive** hit distance. Defaults to `100`.
     *
     * @returns The {@link RayHit} instance, cached by this class.
     *
     * @note The returned {@link RayHit} object is owned by the {@link Scene}
     *       instance and will be reused with the next {@link Scene#rayCast} call.
     */
    rayCast(o, d, groupMask, maxDistance = 100) {
      this.engine.wasm._wl_scene_ray_cast(this._index, o[0], o[1], o[2], d[0], d[1], d[2], groupMask, this._rayHit, maxDistance);
      return this._hit;
    }
    /**
     * Set the background clear color.
     *
     * @param color new clear color (RGBA).
     * @since 0.8.5
     */
    set clearColor(color) {
      this.engine.wasm._wl_scene_set_clearColor(color[0], color[1], color[2], color[3]);
    }
    /**
     * Set whether to clear the color framebuffer before drawing.
     *
     * This function is useful if an external framework (e.g. an AR tracking
     * framework) is responsible for drawing a camera frame before Wonderland
     * Engine draws the scene on top of it.
     *
     * @param b Whether to enable color clear.
     * @since 0.9.4
     */
    set colorClearEnabled(b) {
      this.engine.wasm._wl_scene_enableColorClear(b);
    }
    /** `true` if the scene is active, `false` otherwise. */
    get isActive() {
      return this.engine.scene === this;
    }
    /**
     * Load a scene file (.bin).
     *
     * Will replace the currently active scene with the one loaded
     * from given file. It is assumed that JavaScript components required by
     * the new scene were registered in advance.
     *
     * Once the scene is loaded successfully and initialized,
     * {@link WonderlandEngine.onSceneLoaded} is notified.
     *
     * #### ArrayBuffer
     *
     * The `load()` method accepts an in-memory buffer:
     *
     * ```js
     * scene.load({
     *     buffer: new ArrayBuffer(...),
     *     baseURL: 'https://my-website/assets'
     * })
     * ```
     *
     * @note The `baseURL` is mandatory. It's used to fetch images and languages.
     *
     * Use {@link Scene.setLoadingProgress} to update the loading progress bar
     * when using an ArrayBuffer.
     *
     * @deprecated Use the new {@link SceneGroup} and {@link Scene} API.
     *
     * @param options Path to the file to load, or an option object.
     *     For more information about the options, see the {@link SceneLoadOptions} documentation.
     * @returns Promise that resolves when the scene was loaded.
     */
    async load(options) {
      let dispatchReadyEvent = false;
      let sceneGroup;
      let opts;
      if (isString(options)) {
        opts = await SceneGroup.loadBuffer(options, (bytes, size) => {
          this.engine.log.info(LogTag.Scene, `Scene downloading: ${bytes} / ${size}`);
          this.setLoadingProgress(bytes / size);
        });
      } else {
        opts = options;
        dispatchReadyEvent = options.dispatchReadyEvent ?? false;
      }
      sceneGroup = await this.engine.loadSceneGroupFromMemory(opts, true);
      const scene = sceneGroup.getScene(0);
      return scene.activate({ dispatchReadyEvent });
    }
    /**
     * Append a scene file.
     *
     * Loads and parses the file and its images and appends the result
     * to the currently active scene.
     *
     * Supported formats are streamable Wonderland scene files (.bin) and glTF
     * 3D scenes (.gltf, .glb).
     *
     * ```js
     * WL.scene.append(filename).then(root => {
     *     // root contains the loaded scene
     * });
     * ```
     *
     * In case the `loadGltfExtensions` option is set to true, the response
     * will be an object containing both the root of the loaded scene and
     * any glTF extensions found on nodes, meshes and the root of the file.
     *
     * ```js
     * WL.scene.append(filename, { loadGltfExtensions: true }).then(({root, extensions}) => {
     *     // root contains the loaded scene
     *     // extensions.root contains any extensions at the root of glTF document
     *     const rootExtensions = extensions.root;
     *     // extensions.mesh and extensions.node contain extensions indexed by Object id
     *     const childObject = root.children[0];
     *     const meshExtensions = root.meshExtensions[childObject.objectId];
     *     const nodeExtensions = root.nodeExtensions[childObject.objectId];
     *     // extensions.idMapping contains a mapping from glTF node index to Object id
     * });
     * ```
     *
     * If the file to be loaded is located in a subfolder, it might be useful
     * to define the `baseURL` option. This will ensure any bin files
     * referenced by the loaded bin file are loaded at the correct path.
     *
     * ```js
     * WL.scene.append(filename, { baseURL: 'scenes' }).then(({root, extensions}) => {
     *     // do stuff
     * });
     * ```
     *
     * @deprecated Use the new {@link SceneGroup} and {@link Scene} API.
     *
     * @param file The .bin, .gltf or .glb file to append. Should be a URL or
     *   an `ArrayBuffer` with the file content.
     * @param options Additional options for loading.
     * @returns Promise that resolves when the scene was appended.
     */
    async append(file, options = {}) {
      const { baseURL = isString(file) ? getBaseUrl(file) : this.baseURL } = options;
      const wasm = this.engine.wasm;
      const buffer = isString(file) ? await fetchWithProgress(file) : file;
      const size = buffer.byteLength;
      const ptr = wasm._malloc(size);
      const data = new Uint8Array(wasm.HEAPU8.buffer, ptr, size);
      data.set(new Uint8Array(buffer));
      const isBinFile = data.byteLength > MAGIC_BIN.length && data.subarray(0, MAGIC_BIN.length).every((value, i) => value === MAGIC_BIN.charCodeAt(i));
      const root = this.group;
      let scene;
      try {
        scene = isBinFile ? root.loadSceneFromMemory({ buffer, baseURL }) : root.loadGLTFFromMemory({
          buffer,
          baseURL,
          extensions: options.loadGltfExtensions
        });
      } finally {
        wasm._free(ptr);
      }
      const result = this.instantiate(scene);
      if (scene instanceof SceneGLTF) {
        if (!scene.extensions)
          return result.root;
        return {
          root: result.root,
          extensions: {
            ...result.extensions,
            root: scene.extensions.root
          }
        };
      }
      return result.root;
    }
    /**
     * Update the loading screen progress bar.
     *
     * @param value Current loading percentage, in the range [0; 1].
     */
    setLoadingProgress(percentage) {
      const wasm = this.engine.wasm;
      wasm._wl_set_loading_screen_progress(clamp(percentage, 0, 1));
    }
    /**
     * Dispatch an event 'wle-scene-ready' in the document.
     *
     * @note This is used for automatic testing.
     */
    dispatchReadyEvent() {
      document.dispatchEvent(new CustomEvent("wle-scene-ready", {
        detail: { filename: this.filename }
      }));
    }
    /**
     * Set the current material to render the sky.
     *
     * @note The sky needs to be enabled in the editor when creating the scene.
     * For more information, please refer to the background [tutorial](https://wonderlandengine.com/tutorials/background-effect/).
     */
    set skyMaterial(material) {
      this.engine.wasm._wl_scene_set_sky_material(this._index, material?._id ?? 0);
    }
    /** Current sky material, or `null` if no sky is set. */
    get skyMaterial() {
      const index = this.engine.wasm._wl_scene_get_sky_material(this._index);
      return this.group.materials.wrap(index);
    }
    /**
     * Reset the scene.
     *
     * This method deletes all used and allocated objects, and components.
     *
     * @deprecated Load a new scene and activate it instead.
     */
    reset() {
    }
    /**
     * Download dependencies and initialize the scene.
     *
     * @hidden
     */
    _initialize() {
      this.engine.wasm._wl_scene_initialize(this._index);
    }
    /**
     * Download and apply queued dependency files (.bin).
     *
     * @hidden
     */
    async _downloadDependency(url) {
      const wasm = this.engine.wasm;
      const buffer = await fetchWithProgress(url);
      const ptr = wasm.copyBufferToHeap(buffer);
      try {
        wasm._wl_scene_load_queued_bin(this._index, ptr, buffer.byteLength);
      } finally {
        wasm._free(ptr);
      }
    }
    /**
     * Download and apply queued dependency files (.bin).
     *
     * @hidden
     */
    async _downloadDependencies() {
      const wasm = this.engine.wasm;
      const count = wasm._wl_scene_queued_bin_count(this._index);
      if (!count)
        return Promise.resolve();
      const urls = new Array(count).fill(0).map((_, i) => {
        const ptr = wasm._wl_scene_queued_bin_path(this._index, i);
        const url = wasm.UTF8ToString(ptr);
        return url;
      });
      wasm._wl_scene_clear_queued_bin_list(this._index);
      return Promise.all(urls.map((url) => this._downloadDependency(url)));
    }
  };

  // node_modules/@wonderlandengine/api/dist/scene-gltf.js
  var GLTFExtensions = class {
    objectCount;
    /** glTF root extensions object. JSON data indexed by extension name. */
    root = {};
    /**
     * Mesh extension objects. Key is the gltf index, value is JSON
     * data indexed by extension name.
     */
    mesh = {};
    /**
     * Node extension objects. Key is a glTF index, value is JSON
     * data indexed by extension name.
     */
    node = {};
    constructor(count) {
      this.objectCount = count;
    }
  };
  var SceneGLTF = class extends SceneLike {
    /**
     * Parsed extensions.
     *
     * @note The glTF must be loaded with `extensions` enabled.
     * For more information, have a look at the {@link GLTFOptions} type.
     */
    extensions = null;
    /**
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    constructor(group, index) {
      super(group, index);
      this.extensions = this._readExtensions();
    }
    /**
     * Instantiate the glTF extensions on an active sub scene graph.
     *
     * @param id The root object id.
     * @param result The instantiation object result.
     *
     * @hidden
     */
    _processInstantiaton(dest, root, result) {
      if (!this.extensions)
        return null;
      const wasm = this.engine.wasm;
      const count = this.extensions.objectCount;
      const idMapping = new Array(count);
      const activeRootIndex = wasm._wl_object_index(root._id);
      for (let i = 0; i < count; ++i) {
        const mappedId = wasm._wl_glTF_scene_extensions_gltfIndex_to_id(this._index, dest._index, activeRootIndex, i);
        idMapping[i] = mappedId;
      }
      const remapped = {
        mesh: {},
        node: {},
        idMapping
      };
      for (const gltfIndex in this.extensions.mesh) {
        const id = idMapping[gltfIndex];
        remapped.mesh[id] = this.extensions.mesh[gltfIndex];
      }
      for (const gltfIndex in this.extensions.node) {
        const id = idMapping[gltfIndex];
        remapped.node[id] = this.extensions.node[gltfIndex];
      }
      result.extensions = remapped;
    }
    /**
     * Unmarshalls gltf extensions.
     *
     * @hidden
     */
    _readExtensions() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_glTF_scene_get_extensions(this._index);
      if (!ptr)
        return null;
      let index = ptr / 4;
      const data = wasm.HEAPU32;
      const readString = () => {
        const strPtr = data[index++];
        const strLen = data[index++];
        return wasm.UTF8ViewToString(strPtr, strPtr + strLen);
      };
      const objectCount = data[index++];
      const extensions = new GLTFExtensions(objectCount);
      const meshExtensionsSize = data[index++];
      for (let i = 0; i < meshExtensionsSize; ++i) {
        const objectId = data[index++];
        extensions.mesh[objectId] = JSON.parse(readString());
      }
      const nodeExtensionsSize = data[index++];
      for (let i = 0; i < nodeExtensionsSize; ++i) {
        const objectId = data[index++];
        extensions.node[objectId] = JSON.parse(readString());
      }
      const rootExtensionsStr = readString();
      if (rootExtensionsStr) {
        extensions.root = JSON.parse(rootExtensionsStr);
      }
      return extensions;
    }
  };

  // node_modules/@wonderlandengine/api/dist/scene-group.js
  var SceneGroup = class {
    /**
     * Load an `ArrayBuffer` using fetch.
     *
     * @param opts The url or options.
     * @param progress Progress callback
     * @returns An {@link InMemoryLoadOptions} object.
     *
     * @hidden
     */
    static async loadBuffer(opts, progress) {
      const url = isString(opts) ? opts : opts.url;
      const buffer = await fetchWithProgress(url, progress);
      const baseURL = getBaseUrl(url);
      const filename = getFilename(url);
      return { buffer, baseURL, filename };
    }
    /**
     * Validate the in memory options.
     *
     * @param options Options to validate.
     * @returns Validated options object.
     *
     * @hidden
     */
    static validateBinOptions(options) {
      const { buffer, baseURL, filename = "scene.bin" } = options;
      if (!buffer) {
        throw new Error("missing 'buffer' in options");
      }
      if (!isString(baseURL)) {
        throw new Error("missing 'baseURL' in options");
      }
      const url = baseURL ? `${baseURL}/${filename}` : filename;
      return { buffer, baseURL, url };
    }
    /** @hidden */
    _index;
    /** `true` if it's been loaded via the legacy path. @hidden */
    _legacyLoaded = false;
    /** @hidden */
    _engine;
    /** @hidden */
    _cache = [];
    /** @hidden */
    _textures;
    /** @hidden */
    _materials;
    /** @hidden */
    _meshes;
    /** @hidden */
    _morphTargets;
    /**
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    constructor(engine, index, scene) {
      this._engine = engine;
      this._index = index;
      this._textures = new TextureManager(this);
      this._materials = new MaterialManager(this);
      this._meshes = new MeshManager(this);
      this._morphTargets = new ResourceManager(this, MorphTargets);
      this._cacheScene(new Scene(this, scene));
    }
    /* Public Methods */
    /**
     * Create a scene from a URL.
     *
     * @note This method can only load Wonderland Engine `.bin` files.
     *
     * @note This method is a wrapper around {@link SceneGroup#loadSceneFromMemory}.
     *
     * @param url The URL pointing to the scene to load.
     * @param progress Optional progress callback.
     * @returns A new loaded {@link Scene}.
     */
    async loadScene(opts, progress = () => {
    }) {
      const options = await SceneGroup.loadBuffer(opts, progress);
      return this.loadSceneFromMemory(options);
    }
    /**
     * Create a glTF scene from a URL.
     *
     * @note This method is a wrapper around {@link SceneGroup#loadGLTFFromMemory}.
     *
     * @param options The URL as a string, or an object of the form {@link GLTFOptions}.
     * @param progress Optional progress callback.
     * @returns A new loaded {@link SceneGLTF}.
     */
    async loadGLTF(opts, progress = () => {
    }) {
      const memOptions = await SceneGroup.loadBuffer(opts, progress);
      const options = isString(opts) ? memOptions : { ...opts, ...memOptions };
      return this.loadGLTFFromMemory(options);
    }
    /**
     * Create a scene from an `ArrayBuffer`.
     *
     * @param options An object containing the buffer and extra metadata.
     * @returns A new loaded {@link Scene}.
     */
    loadSceneFromMemory(options) {
      const { buffer, url } = SceneGroup.validateBinOptions(options);
      const wasm = this._engine.wasm;
      const ptr = wasm.copyBufferToHeap(buffer);
      let index = -1;
      try {
        index = wasm._wl_scene_create(this._index, ptr, buffer.byteLength, wasm.tempUTF8(url));
      } finally {
        wasm._free(ptr);
      }
      const chunk = this._cacheScene(new Scene(this, index));
      chunk._initialize();
      return chunk;
    }
    /**
     * Create a new glTF scene from an `ArrayBuffer`.
     *
     * @param options An object containing the buffer and extra glTF metadata.
     * @returns A new loaded {@link SceneGLTF}.
     */
    loadGLTFFromMemory(options) {
      SceneGroup.validateBinOptions(options);
      const { buffer, extensions = false } = options;
      const wasm = this._engine.wasm;
      const ptr = wasm.copyBufferToHeap(buffer);
      try {
        const index = wasm._wl_glTF_scene_create(this._index, extensions, ptr, buffer.byteLength);
        return this._cacheScene(new SceneGLTF(this, index));
      } finally {
        wasm._free(ptr);
      }
    }
    /**
     * Retrieve the scene at the given index.
     *
     * @param index The index at which the scene is located.
     * @returns The {@link SceneLike} if found, `null` otherwise.
     */
    getScene(index) {
      return this._cache[index] ?? null;
    }
    /**
     * Get the index of the scene.
     *
     * @param scene The scene.
     * @returns The index, or `null` is this scene doesn't belong to the root.
     */
    getSceneIndex(scene) {
      const index = this._cache.indexOf(scene);
      return index >= 0 ? index : null;
    }
    /**
     * Destroys this scene root.
     *
     * The destruction automatically destroys all {@link SceneLike} loaded
     * as well as all the loaded resources.
     */
    destroy() {
      const wasm = this._engine.wasm;
      for (let i = this._cache.length - 1; i >= 0; --i) {
        this._cache[i].destroy();
      }
      wasm._wl_sceneRoot_destroy(this._index);
      this._engine._destroySceneGroup(this);
    }
    /**
     * Checks that the input's scene root is the same as this instance.
     *
     * It is forbidden to mix resources different roots,  as well as using another root
     * resources in a scene, e.g.,
     *
     * ```js
     * const textureA = sceneRootA.textures.create(image);
     * const objB = sceneA.addObject();
     * objA.parent = objB; // Throws
     * ```
     *
     * @param other Object / component to check.
     *
     * @throws If other's scene isn't the same reference as this.
     */
    assertOrigin(other) {
      if (other && other.scene !== this) {
        throw new Error(`Attempt to use ${other} from ${other.scene} in ${this}`);
      }
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "SceneGroup(destroyed)";
      }
      return `SceneGroup(${this._index})`;
    }
    /* Public Getters & Setters */
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /** `true` if a scene of this root is currently active. */
    get isActive() {
      return this === this.engine.scene.group;
    }
    /**
     * `true` if the object is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a class attribute / method will throw.
     */
    get isDestroyed() {
      return this._index < 0;
    }
    /** Get all uncompressed images stored in the scene root. */
    get images() {
      const wasm = this.engine.wasm;
      const max2 = wasm._tempMemSize >> 1;
      const count = wasm._wl_sceneRoot_get_images(this._index, wasm._tempMem, max2);
      const result = new Array(count);
      for (let i = 0; i < count; ++i) {
        const index = wasm._tempMemUint16[i];
        result[i] = wasm._images[index];
      }
      return result;
    }
    /**
     * Promise that resolve once all uncompressed images are loaded.
     *
     * This is equivalent to calling {@link SceneGroup.images}, and wrapping each
     * `load` listener into a promise.
     */
    get imagesPromise() {
      const promises = this.images.map((i) => onImageReady(i));
      return Promise.all(promises);
    }
    /** Texture resources */
    get textures() {
      return this._textures;
    }
    /** Material resources */
    get materials() {
      return this._materials;
    }
    /** Mesh resources */
    get meshes() {
      return this._meshes;
    }
    /** Morph target set resources */
    get morphTargets() {
      return this._morphTargets;
    }
    /* Internal-Only Methods */
    /**
     * Add an empty scene.
     *
     * @returns The newly created scene
     *
     * @hidden
     */
    _createEmpty() {
      const wasm = this.engine.wasm;
      const index = wasm._wl_scene_create_empty(this._index);
      return this._cacheScene(new Scene(this, index));
    }
    /** @hidden */
    _destroySceneAtIndex(cachedIndex) {
      const instance = this._cache[cachedIndex];
      const wasm = this.engine.wasm;
      wasm._wl_scene_destroy(instance._index);
      const index = instance._index;
      instance._index = -1;
      if (this.engine.erasePrototypeOnDestroy) {
        Object.setPrototypeOf(instance, DestroyedSceneInstance);
      }
      this._cache.splice(cachedIndex, 1);
      this.engine._scenes[index] = null;
    }
    /**
     * Add the scene to the WASM and local cache.
     *
     * @param scene Scene to cache.
     *
     * @hidden
     */
    _cacheScene(scene) {
      this._cache.push(scene);
      this.engine._scenes[scene._index] = scene;
      return scene;
    }
  };

  // node_modules/@wonderlandengine/api/dist/wonderland.js
  var __decorate = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var LogTag;
  (function(LogTag2) {
    LogTag2[LogTag2["Engine"] = 0] = "Engine";
    LogTag2[LogTag2["Scene"] = 1] = "Scene";
    LogTag2[LogTag2["Component"] = 2] = "Component";
  })(LogTag || (LogTag = {}));
  var Collider;
  (function(Collider3) {
    Collider3[Collider3["Sphere"] = 0] = "Sphere";
    Collider3[Collider3["AxisAlignedBox"] = 1] = "AxisAlignedBox";
    Collider3[Collider3["Box"] = 2] = "Box";
  })(Collider || (Collider = {}));
  var Alignment;
  (function(Alignment3) {
    Alignment3[Alignment3["Left"] = 0] = "Left";
    Alignment3[Alignment3["Center"] = 1] = "Center";
    Alignment3[Alignment3["Right"] = 2] = "Right";
  })(Alignment || (Alignment = {}));
  var VerticalAlignment;
  (function(VerticalAlignment2) {
    VerticalAlignment2[VerticalAlignment2["Line"] = 0] = "Line";
    VerticalAlignment2[VerticalAlignment2["Middle"] = 1] = "Middle";
    VerticalAlignment2[VerticalAlignment2["Top"] = 2] = "Top";
    VerticalAlignment2[VerticalAlignment2["Bottom"] = 3] = "Bottom";
  })(VerticalAlignment || (VerticalAlignment = {}));
  var TextEffect;
  (function(TextEffect3) {
    TextEffect3[TextEffect3["None"] = 0] = "None";
    TextEffect3[TextEffect3["Outline"] = 1] = "Outline";
  })(TextEffect || (TextEffect = {}));
  var InputType;
  (function(InputType3) {
    InputType3[InputType3["Head"] = 0] = "Head";
    InputType3[InputType3["EyeLeft"] = 1] = "EyeLeft";
    InputType3[InputType3["EyeRight"] = 2] = "EyeRight";
    InputType3[InputType3["ControllerLeft"] = 3] = "ControllerLeft";
    InputType3[InputType3["ControllerRight"] = 4] = "ControllerRight";
    InputType3[InputType3["RayLeft"] = 5] = "RayLeft";
    InputType3[InputType3["RayRight"] = 6] = "RayRight";
  })(InputType || (InputType = {}));
  var LightType;
  (function(LightType3) {
    LightType3[LightType3["Point"] = 0] = "Point";
    LightType3[LightType3["Spot"] = 1] = "Spot";
    LightType3[LightType3["Sun"] = 2] = "Sun";
  })(LightType || (LightType = {}));
  var AnimationState;
  (function(AnimationState3) {
    AnimationState3[AnimationState3["Playing"] = 0] = "Playing";
    AnimationState3[AnimationState3["Paused"] = 1] = "Paused";
    AnimationState3[AnimationState3["Stopped"] = 2] = "Stopped";
  })(AnimationState || (AnimationState = {}));
  var ForceMode;
  (function(ForceMode3) {
    ForceMode3[ForceMode3["Force"] = 0] = "Force";
    ForceMode3[ForceMode3["Impulse"] = 1] = "Impulse";
    ForceMode3[ForceMode3["VelocityChange"] = 2] = "VelocityChange";
    ForceMode3[ForceMode3["Acceleration"] = 3] = "Acceleration";
  })(ForceMode || (ForceMode = {}));
  var CollisionEventType;
  (function(CollisionEventType3) {
    CollisionEventType3[CollisionEventType3["Touch"] = 0] = "Touch";
    CollisionEventType3[CollisionEventType3["TouchLost"] = 1] = "TouchLost";
    CollisionEventType3[CollisionEventType3["TriggerTouch"] = 2] = "TriggerTouch";
    CollisionEventType3[CollisionEventType3["TriggerTouchLost"] = 3] = "TriggerTouchLost";
  })(CollisionEventType || (CollisionEventType = {}));
  var Shape;
  (function(Shape3) {
    Shape3[Shape3["None"] = 0] = "None";
    Shape3[Shape3["Sphere"] = 1] = "Sphere";
    Shape3[Shape3["Capsule"] = 2] = "Capsule";
    Shape3[Shape3["Box"] = 3] = "Box";
    Shape3[Shape3["Plane"] = 4] = "Plane";
    Shape3[Shape3["ConvexMesh"] = 5] = "ConvexMesh";
    Shape3[Shape3["TriangleMesh"] = 6] = "TriangleMesh";
  })(Shape || (Shape = {}));
  var MeshAttribute;
  (function(MeshAttribute3) {
    MeshAttribute3[MeshAttribute3["Position"] = 0] = "Position";
    MeshAttribute3[MeshAttribute3["Tangent"] = 1] = "Tangent";
    MeshAttribute3[MeshAttribute3["Normal"] = 2] = "Normal";
    MeshAttribute3[MeshAttribute3["TextureCoordinate"] = 3] = "TextureCoordinate";
    MeshAttribute3[MeshAttribute3["Color"] = 4] = "Color";
    MeshAttribute3[MeshAttribute3["JointId"] = 5] = "JointId";
    MeshAttribute3[MeshAttribute3["JointWeight"] = 6] = "JointWeight";
  })(MeshAttribute || (MeshAttribute = {}));
  var DestroyedObjectInstance = createDestroyedProxy("object");
  var DestroyedComponentInstance = createDestroyedProxy("component");
  var DestroyedSceneInstance = createDestroyedProxy("scene chunk");
  var DestroyedSceneGroupInstance = createDestroyedProxy("scene group");
  function isMeshShape(shape) {
    return shape === Shape.ConvexMesh || shape === Shape.TriangleMesh;
  }
  function isBaseComponentClass(value) {
    return !!value && value.hasOwnProperty("_isBaseComponent") && value._isBaseComponent;
  }
  var UP_VECTOR = [0, 1, 0];
  var SQRT_3 = Math.sqrt(3);
  var _Component = class {
    /**
     * Pack scene index and component id.
     *
     * @param scene Scene index.
     * @param id Component id.
     * @returns The packed id.
     *
     * @hidden
     */
    static _pack(scene, id) {
      return scene << 22 | id;
    }
    /**
     * Allows to inherit properties directly inside the editor.
     *
     * @note Do not use directly, prefer using {@link inheritProperties}.
     *
     * @hidden
     */
    static _inheritProperties() {
      inheritProperties(this);
    }
    /** Manager index. @hidden */
    _manager;
    /** Packed id, containing the scene and the local id. @hidden */
    _id;
    /** Id relative to the scene component's manager. @hidden */
    _localId;
    /**
     * Object containing this object.
     *
     * **Note**: This is cached for faster retrieval.
     *
     * @hidden
     */
    _object;
    /** Scene instance. @hidden */
    _scene;
    /**
     * Create a new instance
     *
     * @param engine The engine instance.
     * @param manager Index of the manager.
     * @param id WASM component instance index.
     *
     * @hidden
     */
    constructor(scene, manager = -1, id = -1) {
      this._scene = scene;
      this._manager = manager;
      this._localId = id;
      this._id = _Component._pack(scene._index, id);
      this._object = null;
    }
    /** Scene this component is part of. */
    get scene() {
      return this._scene;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._scene.engine;
    }
    /** The name of this component's type */
    get type() {
      const ctor = this.constructor;
      return ctor.TypeName;
    }
    /** The object this component is attached to. */
    get object() {
      if (!this._object) {
        const objectId = this.engine.wasm._wl_component_get_object(this._manager, this._id);
        this._object = this._scene.wrap(objectId);
      }
      return this._object;
    }
    /**
     * Set whether this component is active.
     *
     * Activating/deactivating a component comes at a small cost of reordering
     * components in the respective component manager. This function therefore
     * is not a trivial assignment.
     *
     * Does nothing if the component is already activated/deactivated.
     *
     * @param active New active state.
     */
    set active(active) {
      this.engine.wasm._wl_component_setActive(this._manager, this._id, active);
    }
    /**
     * Whether this component is active
     */
    get active() {
      return this.engine.wasm._wl_component_isActive(this._manager, this._id) != 0;
    }
    /**
     * Copy all the properties from `src` into this instance.
     *
     * @note Only properties are copied. If a component needs to
     * copy extra data, it needs to override this method.
     *
     * #### Example
     *
     * ```js
     * class MyComponent extends Component {
     *     nonPropertyData = 'Hello World';
     *
     *     copy(src) {
     *         super.copy(src);
     *         this.nonPropertyData = src.nonPropertyData;
     *         return this;
     *     }
     * }
     * ```
     *
     * @note This method is called by {@link Object3D.clone}. Do not attempt to:
     *     - Create new component
     *     - Read references to other objects
     *
     * When cloning via {@link Object3D.clone}, this method will be called before
     * {@link Component.start}.
     *
     * @note JavaScript component properties aren't retargeted. Thus, references
     * inside the source object will not be retargeted to the destination object,
     * at the exception of the skin data on {@link MeshComponent} and {@link AnimationComponent}.
     *
     * @param src The source component to copy from.
     *
     * @returns Reference to self (for method chaining).
     */
    copy(src) {
      const ctor = this.constructor;
      for (const name in ctor.Properties) {
        const value = src[name];
        if (value === void 0)
          continue;
        this[name] = value;
      }
      return this;
    }
    /**
     * Remove this component from its objects and destroy it.
     *
     * It is best practice to set the component to `null` after,
     * to ensure it does not get used later.
     *
     * ```js
     *    c.destroy();
     *    c = null;
     * ```
     * @since 0.9.0
     */
    destroy() {
      const manager = this._manager;
      if (manager < 0 || this._id < 0)
        return;
      this.engine.wasm._wl_component_remove(manager, this._id);
    }
    /**
     * Checks equality by comparing ids and **not** the JavaScript reference.
     *
     * @deprecate Use JavaScript reference comparison instead:
     *
     * ```js
     * const componentA = obj.addComponent('mesh');
     * const componentB = obj.addComponent('mesh');
     * const componentC = componentB;
     * console.log(componentA === componentB); // false
     * console.log(componentA === componentA); // true
     * console.log(componentB === componentC); // true
     * ```
     */
    equals(otherComponent) {
      if (!otherComponent)
        return false;
      return this._manager === otherComponent._manager && this._id === otherComponent._id;
    }
    /**
     * Reset the component properties to default.
     *
     * @note This is automatically called during the component instantiation.
     *
     * @returns Reference to self (for method chaining).
     */
    resetProperties() {
      const ctor = this.constructor;
      const properties = ctor.Properties;
      if (!properties)
        return this;
      for (const name in properties) {
        this[name] = properties[name].default;
      }
      return this;
    }
    /** @deprecated Use {@link Component.resetProperties} instead. */
    reset() {
      return this.resetProperties();
    }
    /**
     * Validate the properties on this instance.
     *
     * @throws If any of the required properties isn't initialized
     * on this instance.
     */
    validateProperties() {
      const ctor = this.constructor;
      if (!ctor.Properties)
        return;
      for (const name in ctor.Properties) {
        if (!ctor.Properties[name].required)
          continue;
        if (!this[name]) {
          throw new Error(`Property '${name}' is required but was not initialized`);
        }
      }
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Component(destroyed)";
      }
      return `Component('${this.type}', ${this._localId})`;
    }
    /**
     * `true` if the component is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a custom property will not work:
     *
     * ```js
     * engine.erasePrototypeOnDestroy = true;
     *
     * const comp = obj.addComponent('mesh');
     * comp.customParam = 'Hello World!';
     *
     * console.log(comp.isDestroyed); // Prints `false`
     * comp.destroy();
     * console.log(comp.isDestroyed); // Prints `true`
     * console.log(comp.customParam); // Throws an error
     * ```
     *
     * @since 1.1.1
     */
    get isDestroyed() {
      return this._id < 0;
    }
    _copy(src, offsetsPtr) {
      const wasm = this.engine.wasm;
      const offsets = wasm.HEAPU32;
      const offsetsStart = offsetsPtr >>> 2;
      const destScene = this._scene;
      const ctor = this.constructor;
      for (const name in ctor.Properties) {
        const value = src[name];
        if (value === null) {
          this[name] = null;
          continue;
        }
        const prop = ctor.Properties[name];
        const offset2 = offsets[offsetsStart + prop.type];
        let retargeted = value;
        switch (prop.type) {
          case Type.Object: {
            const index = wasm._wl_object_index(value._id);
            const id = wasm._wl_object_id(destScene._index, index + offset2);
            retargeted = destScene.wrap(id);
            break;
          }
          case Type.Animation:
            retargeted = destScene.animations.wrap(offset2 + value._index);
            break;
          case Type.Skin:
            retargeted = destScene.skins.wrap(offset2 + value._index);
            break;
        }
        this[name] = retargeted;
      }
      return this;
    }
    /**
     * Trigger the component {@link Component.init} method.
     *
     * @note Use this method instead of directly calling {@link Component.init},
     * because this method creates an handler for the {@link Component.start}.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerInit() {
      if (this.init) {
        try {
          this.init();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} init() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
        }
      }
      const oldActivate = this.onActivate;
      this.onActivate = function() {
        this.onActivate = oldActivate;
        let failed = false;
        try {
          this.validateProperties();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} validateProperties() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
          failed = true;
        }
        try {
          this.start?.();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} start() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
          failed = true;
        }
        if (failed) {
          this.active = false;
          return;
        }
        if (!this.onActivate)
          return;
        try {
          this.onActivate();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
        }
      };
    }
    /**
     * Trigger the component {@link Component.update} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerUpdate(dt) {
      if (!this.update)
        return;
      try {
        this.update(dt);
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} update() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
        if (this.engine.wasm._deactivate_component_on_error) {
          this.active = false;
        }
      }
    }
    /**
     * Trigger the component {@link Component.onActivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnActivate() {
      if (!this.onActivate)
        return;
      try {
        this.onActivate();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
    }
    /**
     * Trigger the component {@link Component.onDeactivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDeactivate() {
      if (!this.onDeactivate)
        return;
      try {
        this.onDeactivate();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDeactivate() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
    }
    /**
     * Trigger the component {@link Component.onDestroy} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDestroy() {
      try {
        if (this.onDestroy)
          this.onDestroy();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDestroy() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
      this._scene._components.destroy(this);
    }
  };
  var Component = _Component;
  /**
   * `true` for every class inheriting from this class.
   *
   * @note This is a workaround for `instanceof` to prevent issues
   * that could arise when an application ends up using multiple API versions.
   *
   * @hidden
   */
  __publicField(Component, "_isBaseComponent", true);
  /**
   * Fixed order of attributes in the `Properties` array.
   *
   * @note This is used for parameter deserialization and is filled during
   * component registration.
   *
   * @hidden
   */
  __publicField(Component, "_propertyOrder", []);
  /**
   * Unique identifier for this component class.
   *
   * This is used to register, add, and retrieve components of a given type.
   */
  __publicField(Component, "TypeName");
  /**
   * Properties of this component class.
   *
   * Properties are public attributes that can be configured via the
   * Wonderland Editor.
   *
   * Example:
   *
   * ```js
   * import { Component, Type } from '@wonderlandengine/api';
   * class MyComponent extends Component {
   *     static TypeName = 'my-component';
   *     static Properties = {
   *         myBoolean: { type: Type.Boolean, default: false },
   *         myFloat: { type: Type.Float, default: false },
   *         myTexture: { type: Type.Texture, default: null },
   *     };
   * }
   * ```
   *
   * Properties are automatically added to each component instance, and are
   * accessible like any JS attribute:
   *
   * ```js
   * // Creates a new component and set each properties value:
   * const myComponent = object.addComponent(MyComponent, {
   *     myBoolean: true,
   *     myFloat: 42.0,
   *     myTexture: null
   * });
   *
   * // You can also override the properties on the instance:
   * myComponent.myBoolean = false;
   * myComponent.myFloat = -42.0;
   * ```
   *
   * #### References
   *
   * Reference types (i.e., mesh, object, etc...) can also be listed as **required**:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class MyComponent extends Component {
   *     static Properties = {
   *         myObject: Property.object({required: true}),
   *         myAnimation: Property.animation({required: true}),
   *         myTexture: Property.texture({required: true}),
   *         myMesh: Property.mesh({required: true}),
   *     }
   * }
   * ```
   *
   * Please note that references are validated **once** before the call to {@link Component.start} only,
   * via the {@link Component.validateProperties} method.
   */
  __publicField(Component, "Properties");
  /**
   * When set to `true`, the child class inherits from the parent
   * properties, as shown in the following example:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class Parent extends Component {
   *     static TypeName = 'parent';
   *     static Properties = {parentName: Property.string('parent')}
   * }
   *
   * class Child extends Parent {
   *     static TypeName = 'child';
   *     static Properties = {name: Property.string('child')}
   *     static InheritProperties = true;
   *
   *     start() {
   *         // Works because `InheritProperties` is `true`.
   *         console.log(`${this.name} inherits from ${this.parentName}`);
   *     }
   * }
   * ```
   *
   * @note Properties defined in descendant classes will override properties
   * with the same name defined in ancestor classes.
   *
   * Defaults to `true`.
   */
  __publicField(Component, "InheritProperties");
  /**
   * Called when this component class is registered.
   *
   * @example
   *
   * This callback can be used to register dependencies of a component,
   * e.g., component classes that need to be registered in order to add
   * them at runtime with {@link Object3D.addComponent}, independent of whether
   * they are used in the editor.
   *
   * ```js
   * class Spawner extends Component {
   *     static TypeName = 'spawner';
   *
   *     static onRegister(engine) {
   *         engine.registerComponent(SpawnedComponent);
   *     }
   *
   *     // You can now use addComponent with SpawnedComponent
   * }
   * ```
   *
   * @example
   *
   * This callback can be used to register different implementations of a
   * component depending on client features or API versions.
   *
   * ```js
   * // Properties need to be the same for all implementations!
   * const SharedProperties = {};
   *
   * class Anchor extends Component {
   *     static TypeName = 'spawner';
   *     static Properties = SharedProperties;
   *
   *     static onRegister(engine) {
   *         if(navigator.xr === undefined) {
   *             /* WebXR unsupported, keep this dummy component *\/
   *             return;
   *         }
   *         /* WebXR supported! Override already registered dummy implementation
   *          * with one depending on hit-test API support *\/
   *         engine.registerComponent(window.HitTestSource === undefined ?
   *             AnchorWithoutHitTest : AnchorWithHitTest);
   *     }
   *
   *     // This one implements no functions
   * }
   * ```
   */
  __publicField(Component, "onRegister");
  var BrokenComponent = class extends Component {
  };
  __publicField(BrokenComponent, "TypeName", "__broken-component__");
  function inheritProperties(target) {
    if (!target.TypeName)
      return;
    const chain = [];
    let curr = target;
    while (curr && !isBaseComponentClass(curr)) {
      const comp = curr;
      const needsMerge = comp.hasOwnProperty("InheritProperties") ? comp.InheritProperties : true;
      if (!needsMerge)
        break;
      if (comp.TypeName && comp.hasOwnProperty("Properties")) {
        chain.push(comp);
      }
      curr = Object.getPrototypeOf(curr);
    }
    if (!chain.length || chain.length === 1 && chain[0] === target) {
      return;
    }
    const merged = {};
    for (let i = chain.length - 1; i >= 0; --i) {
      Object.assign(merged, chain[i].Properties);
    }
    target.Properties = merged;
  }
  var CollisionComponent = class extends Component {
    getExtents(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /** Collision component collider */
    get collider() {
      return this.engine.wasm._wl_collision_component_get_collider(this._id);
    }
    /**
     * Set collision component collider.
     *
     * @param collider Collider of the collision component.
     */
    set collider(collider) {
      this.engine.wasm._wl_collision_component_set_collider(this._id, collider);
    }
    /**
     * Equivalent to {@link CollisionComponent.getExtents}.
     *
     * @note Prefer to use {@link CollisionComponent.getExtents} for performance.
     */
    get extents() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
    }
    /**
     * Set collision component extents.
     *
     * If {@link collider} returns {@link Collider.Sphere}, only the first
     * component of the passed vector is used.
     *
     * Example:
     *
     * ```js
     * // Spans 1 unit on the x-axis, 2 on the y-axis, 3 on the z-axis.
     * collision.extent = [1, 2, 3];
     * ```
     *
     * @param extents Extents of the collision component, expects a
     *      3 component array.
     */
    set extents(extents) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      wasm.HEAPF32[ptr] = extents[0];
      wasm.HEAPF32[ptr + 1] = extents[1];
      wasm.HEAPF32[ptr + 2] = extents[2];
    }
    /**
     * Get collision component radius.
     *
     * @note If {@link collider} is not {@link Collider.Sphere}, the returned value
     * corresponds to the radius of a sphere enclosing the shape.
     *
     * Example:
     *
     * ```js
     * sphere.radius = 3.0;
     * console.log(sphere.radius); // 3.0
     *
     * box.extents = [2.0, 2.0, 2.0];
     * console.log(box.radius); // 1.732...
     * ```
     *
     */
    get radius() {
      const wasm = this.engine.wasm;
      if (this.collider === Collider.Sphere)
        return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];
      const extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
      const x2 = extents[0] * extents[0];
      const y2 = extents[1] * extents[1];
      const z2 = extents[2] * extents[2];
      return Math.sqrt(x2 + y2 + z2) / 2;
    }
    /**
     * Set collision component radius.
     *
     * @param radius Radius of the collision component
     *
     * @note If {@link collider} is not {@link Collider.Sphere},
     * the extents are set to form a square that fits a sphere with the provided radius.
     *
     * Example:
     *
     * ```js
     * aabbCollision.radius = 2.0; // AABB fits a sphere of radius 2.0
     * boxCollision.radius = 3.0; // Box now fits a sphere of radius 3.0, keeping orientation
     * ```
     *
     */
    set radius(radius) {
      const length5 = this.collider === Collider.Sphere ? radius : 2 * radius / SQRT_3;
      this.extents.set([length5, length5, length5]);
    }
    /**
     * Collision component group.
     *
     * The groups is a bitmask that is compared to other components in {@link CollisionComponent#queryOverlaps}
     * or the group in {@link Scene#rayCast}.
     *
     * Colliders that have no common groups will not overlap with each other. If a collider
     * has none of the groups set for {@link Scene#rayCast}, the ray will not hit it.
     *
     * Each bit represents belonging to a group, see example.
     *
     * ```js
     *    // c belongs to group 2
     *    c.group = (1 << 2);
     *
     *    // c belongs to group 0
     *    c.group = (1 << 0);
     *
     *    // c belongs to group 0 *and* 2
     *    c.group = (1 << 0) | (1 << 2);
     *
     *    (c.group & (1 << 2)) != 0; // true
     *    (c.group & (1 << 7)) != 0; // false
     * ```
     */
    get group() {
      return this.engine.wasm._wl_collision_component_get_group(this._id);
    }
    /**
     * Set collision component group.
     *
     * @param group Group mask of the collision component.
     */
    set group(group) {
      this.engine.wasm._wl_collision_component_set_group(this._id, group);
    }
    /**
     * Query overlapping objects.
     *
     * Usage:
     *
     * ```js
     * const collision = object.getComponent('collision');
     * const overlaps = collision.queryOverlaps();
     * for(const otherCollision of overlaps) {
     *     const otherObject = otherCollision.object;
     *     console.log(`Collision with object ${otherObject.objectId}`);
     * }
     * ```
     *
     * @returns Collision components overlapping this collider.
     */
    queryOverlaps() {
      const count = this.engine.wasm._wl_collision_component_query_overlaps(this._id, this.engine.wasm._tempMem, this.engine.wasm._tempMemSize >> 1);
      const overlaps = new Array(count);
      for (let i = 0; i < count; ++i) {
        const id = this.engine.wasm._tempMemUint16[i];
        overlaps[i] = this._scene._components.wrapCollision(id);
      }
      return overlaps;
    }
  };
  /** @override */
  __publicField(CollisionComponent, "TypeName", "collision");
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "collider", null);
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "extents", null);
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "group", null);
  var TextComponent = class extends Component {
    /** Text component alignment. */
    get alignment() {
      return this.engine.wasm._wl_text_component_get_horizontal_alignment(this._id);
    }
    /**
     * Set text component alignment.
     *
     * @param alignment Alignment for the text component.
     */
    set alignment(alignment) {
      this.engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);
    }
    /**
     * Text component vertical alignment.
     * @since 1.2.0
     */
    get verticalAlignment() {
      return this.engine.wasm._wl_text_component_get_vertical_alignment(this._id);
    }
    /**
     * Set text component vertical alignment.
     *
     * @param verticalAlignment Vertical for the text component.
     * @since 1.2.0
     */
    set verticalAlignment(verticalAlignment) {
      this.engine.wasm._wl_text_component_set_vertical_alignment(this._id, verticalAlignment);
    }
    /**
     * Text component justification.
     *
     * @deprecated Please use {@link TextComponent.verticalAlignment} instead.
     */
    get justification() {
      return this.verticalAlignment;
    }
    /**
     * Set text component justification.
     *
     * @param justification Justification for the text component.
     *
     * @deprecated Please use {@link TextComponent.verticalAlignment} instead.
     */
    set justification(justification) {
      this.verticalAlignment = justification;
    }
    /** Text component character spacing. */
    get characterSpacing() {
      return this.engine.wasm._wl_text_component_get_character_spacing(this._id);
    }
    /**
     * Set text component character spacing.
     *
     * @param spacing Character spacing for the text component.
     */
    set characterSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);
    }
    /** Text component line spacing. */
    get lineSpacing() {
      return this.engine.wasm._wl_text_component_get_line_spacing(this._id);
    }
    /**
     * Set text component line spacing
     *
     * @param spacing Line spacing for the text component
     */
    set lineSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);
    }
    /** Text component effect. */
    get effect() {
      return this.engine.wasm._wl_text_component_get_effect(this._id);
    }
    /**
     * Set text component effect
     *
     * @param effect Effect for the text component
     */
    set effect(effect) {
      this.engine.wasm._wl_text_component_set_effect(this._id, effect);
    }
    /** Text component text. */
    get text() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_text_component_get_text(this._id);
      return wasm.UTF8ToString(ptr);
    }
    /**
     * Set text component text.
     *
     * @param text Text of the text component.
     */
    set text(text) {
      const wasm = this.engine.wasm;
      wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));
    }
    /**
     * Set material to render the text with.
     *
     * @param material New material.
     */
    set material(material) {
      this.scene.group.assertOrigin(material);
      const matIndex = material ? material._id : 0;
      this.engine.wasm._wl_text_component_set_material(this._id, matIndex);
    }
    /** Material used to render the text. */
    get material() {
      const root = this._scene.group;
      const index = this.engine.wasm._wl_text_component_get_material(this._id);
      return root.materials.wrap(index);
    }
  };
  /** @override */
  __publicField(TextComponent, "TypeName", "text");
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "alignment", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "verticalAlignment", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "justification", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "characterSpacing", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "lineSpacing", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "effect", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "text", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "material", null);
  var ViewComponent = class extends Component {
    getProjectionMatrix(out = new Float32Array(16)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_view_component_get_projection_matrix(this._id) / 4;
      for (let i = 0; i < 16; ++i) {
        out[i] = wasm.HEAPF32[ptr + i];
      }
      return out;
    }
    /**
     * Equivalent to {@link ViewComponent.getProjectionMatrix}.
     *
     * @note Prefer to use {@link ViewComponent.getProjectionMatrix} for performance.
     */
    get projectionMatrix() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);
    }
    /** ViewComponent near clipping plane value. */
    get near() {
      return this.engine.wasm._wl_view_component_get_near(this._id);
    }
    /**
     * Set near clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param near Near depth value.
     */
    set near(near) {
      this.engine.wasm._wl_view_component_set_near(this._id, near);
    }
    /** Far clipping plane value. */
    get far() {
      return this.engine.wasm._wl_view_component_get_far(this._id);
    }
    /**
     * Set far clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param far Near depth value.
     */
    set far(far) {
      this.engine.wasm._wl_view_component_set_far(this._id, far);
    }
    /**
     * Get the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, this returns the field of view reported by
     * the device, regardless of the fov that was set.
     */
    get fov() {
      return this.engine.wasm._wl_view_component_get_fov(this._id);
    }
    /**
     * Set the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, the field of view reported by the device is
     * used and this value is ignored. After the XR session ends, the new value
     * is applied.
     *
     * @param fov Horizontal field of view, **in degrees**.
     */
    set fov(fov) {
      this.engine.wasm._wl_view_component_set_fov(this._id, fov);
    }
  };
  /** @override */
  __publicField(ViewComponent, "TypeName", "view");
  __decorate([
    enumerable()
  ], ViewComponent.prototype, "projectionMatrix", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "near", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "far", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "fov", null);
  var InputComponent = class extends Component {
    /** Input component type */
    get inputType() {
      return this.engine.wasm._wl_input_component_get_type(this._id);
    }
    /**
     * Set input component type.
     *
     * @params New input component type.
     */
    set inputType(type) {
      this.engine.wasm._wl_input_component_set_type(this._id, type);
    }
    /**
     * WebXR Device API input source associated with this input component,
     * if type {@link InputType.ControllerLeft} or {@link InputType.ControllerRight}.
     */
    get xrInputSource() {
      const xr = this.engine.xr;
      if (!xr)
        return null;
      for (let inputSource of xr.session.inputSources) {
        if (inputSource.handedness == this.handedness) {
          return inputSource;
        }
      }
      return null;
    }
    /**
     * 'left', 'right' or `null` depending on the {@link InputComponent#inputType}.
     */
    get handedness() {
      const inputType = this.inputType;
      if (inputType == InputType.ControllerRight || inputType == InputType.RayRight || inputType == InputType.EyeRight)
        return "right";
      if (inputType == InputType.ControllerLeft || inputType == InputType.RayLeft || inputType == InputType.EyeLeft)
        return "left";
      return null;
    }
  };
  /** @override */
  __publicField(InputComponent, "TypeName", "input");
  __decorate([
    nativeProperty()
  ], InputComponent.prototype, "inputType", null);
  __decorate([
    enumerable()
  ], InputComponent.prototype, "xrInputSource", null);
  __decorate([
    enumerable()
  ], InputComponent.prototype, "handedness", null);
  var LightComponent = class extends Component {
    getColor(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /**
     * Set light color.
     *
     * @param c New color array/vector, expected to have at least 3 elements.
     * @since 1.0.0
     */
    setColor(c) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      wasm.HEAPF32[ptr] = c[0];
      wasm.HEAPF32[ptr + 1] = c[1];
      wasm.HEAPF32[ptr + 2] = c[2];
    }
    /**
     * View on the light color.
     *
     * @note Prefer to use {@link getColor} in performance-critical code.
     */
    get color() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);
    }
    /**
     * Set light color.
     *
     * @param c Color of the light component.
     *
     * @note Prefer to use {@link setColor} in performance-critical code.
     */
    set color(c) {
      this.color.set(c);
    }
    /** Light type. */
    get lightType() {
      return this.engine.wasm._wl_light_component_get_type(this._id);
    }
    /**
     * Set light type.
     *
     * @param lightType Type of the light component.
     */
    set lightType(t) {
      this.engine.wasm._wl_light_component_set_type(this._id, t);
    }
    /**
     * Light intensity.
     * @since 1.0.0
     */
    get intensity() {
      return this.engine.wasm._wl_light_component_get_intensity(this._id);
    }
    /**
     * Set light intensity.
     *
     * @param intensity Intensity of the light component.
     * @since 1.0.0
     */
    set intensity(intensity) {
      this.engine.wasm._wl_light_component_set_intensity(this._id, intensity);
    }
    /**
     * Outer angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get outerAngle() {
      return this.engine.wasm._wl_light_component_get_outerAngle(this._id);
    }
    /**
     * Set outer angle for spot lights.
     *
     * @param angle Outer angle, in degrees.
     * @since 1.0.0
     */
    set outerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_outerAngle(this._id, angle2);
    }
    /**
     * Inner angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get innerAngle() {
      return this.engine.wasm._wl_light_component_get_innerAngle(this._id);
    }
    /**
     * Set inner angle for spot lights.
     *
     * @param angle Inner angle, in degrees.
     * @since 1.0.0
     */
    set innerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_innerAngle(this._id, angle2);
    }
    /**
     * Whether the light casts shadows.
     * @since 1.0.0
     */
    get shadows() {
      return !!this.engine.wasm._wl_light_component_get_shadows(this._id);
    }
    /**
     * Set whether the light casts shadows.
     *
     * @param b Whether the light casts shadows.
     * @since 1.0.0
     */
    set shadows(b) {
      this.engine.wasm._wl_light_component_set_shadows(this._id, b);
    }
    /**
     * Range for shadows.
     * @since 1.0.0
     */
    get shadowRange() {
      return this.engine.wasm._wl_light_component_get_shadowRange(this._id);
    }
    /**
     * Set range for shadows.
     *
     * @param range Range for shadows.
     * @since 1.0.0
     */
    set shadowRange(range) {
      this.engine.wasm._wl_light_component_set_shadowRange(this._id, range);
    }
    /**
     * Bias value for shadows.
     * @since 1.0.0
     */
    get shadowBias() {
      return this.engine.wasm._wl_light_component_get_shadowBias(this._id);
    }
    /**
     * Set bias value for shadows.
     *
     * @param bias Bias for shadows.
     * @since 1.0.0
     */
    set shadowBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowBias(this._id, bias);
    }
    /**
     * Normal bias value for shadows.
     * @since 1.0.0
     */
    get shadowNormalBias() {
      return this.engine.wasm._wl_light_component_get_shadowNormalBias(this._id);
    }
    /**
     * Set normal bias value for shadows.
     *
     * @param bias Normal bias for shadows.
     * @since 1.0.0
     */
    set shadowNormalBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);
    }
    /**
     * Texel size for shadows.
     * @since 1.0.0
     */
    get shadowTexelSize() {
      return this.engine.wasm._wl_light_component_get_shadowTexelSize(this._id);
    }
    /**
     * Set texel size for shadows.
     *
     * @param size Texel size for shadows.
     * @since 1.0.0
     */
    set shadowTexelSize(size) {
      this.engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);
    }
    /**
     * Cascade count for {@link LightType.Sun} shadows.
     * @since 1.0.0
     */
    get cascadeCount() {
      return this.engine.wasm._wl_light_component_get_cascadeCount(this._id);
    }
    /**
     * Set cascade count for {@link LightType.Sun} shadows.
     *
     * @param count Cascade count.
     * @since 1.0.0
     */
    set cascadeCount(count) {
      this.engine.wasm._wl_light_component_set_cascadeCount(this._id, count);
    }
  };
  /** @override */
  __publicField(LightComponent, "TypeName", "light");
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "color", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "lightType", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "intensity", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "outerAngle", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "innerAngle", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadows", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowRange", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowBias", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowNormalBias", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowTexelSize", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "cascadeCount", null);
  var AnimationComponent = class extends Component {
    /**
     * Emitter for animation events triggered on this component.
     *
     * The first argument is the name of the event.
     */
    onEvent = new Emitter();
    /**
     * Set animation to play.
     *
     * Make sure to {@link Animation#retarget} the animation to affect the
     * right objects.
     *
     * @param anim Animation to play.
     */
    set animation(anim) {
      this.scene.assertOrigin(anim);
      this.engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._index : 0);
    }
    /** Animation set for this component */
    get animation() {
      const index = this.engine.wasm._wl_animation_component_get_animation(this._id);
      return this._scene.animations.wrap(index);
    }
    /**
     * Set play count. Set to `0` to loop indefinitely.
     *
     * @param playCount Number of times to repeat the animation.
     */
    set playCount(playCount) {
      this.engine.wasm._wl_animation_component_set_playCount(this._id, playCount);
    }
    /** Number of times the animation is played. */
    get playCount() {
      return this.engine.wasm._wl_animation_component_get_playCount(this._id);
    }
    /**
     * Set speed. Set to negative values to run the animation backwards.
     *
     * Setting speed has an immediate effect for the current frame's update
     * and will continue with the speed from the current point in the animation.
     *
     * @param speed New speed at which to play the animation.
     * @since 0.8.10
     */
    set speed(speed) {
      this.engine.wasm._wl_animation_component_set_speed(this._id, speed);
    }
    /**
     * Speed factor at which the animation is played.
     *
     * @since 0.8.10
     */
    get speed() {
      return this.engine.wasm._wl_animation_component_get_speed(this._id);
    }
    /** Current playing state of the animation */
    get state() {
      return this.engine.wasm._wl_animation_component_state(this._id);
    }
    /**
     * Play animation.
     *
     * If the animation is currently paused, resumes from that position. If the
     * animation is already playing, does nothing.
     *
     * To restart the animation, {@link AnimationComponent#stop} it first.
     */
    play() {
      this.engine.wasm._wl_animation_component_play(this._id);
    }
    /** Stop animation. */
    stop() {
      this.engine.wasm._wl_animation_component_stop(this._id);
    }
    /** Pause animation. */
    pause() {
      this.engine.wasm._wl_animation_component_pause(this._id);
    }
    /**
     * Get the value of a float parameter in the attached graph.
     * Throws if the parameter is missing.
     *
     * @param name Name of the parameter.
     * @since 1.2.0
     */
    getFloatParameter(name) {
      const wasm = this.engine.wasm;
      const index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1) {
        throw Error(`Missing parameter '${name}'`);
      }
      wasm._wl_animation_component_getGraphParamValue(this._id, index, wasm._tempMem);
      return wasm._tempMemFloat[0];
    }
    /**
     * Set the value of a float parameter in the attached graph
     * Throws if the parameter is missing.
     *
     * @param name Name of the parameter.
     * @param value Float value to set.
     * @returns 1 if the parameter was successfully set, 0 on fail.
     * @since 1.2.0
     */
    setFloatParameter(name, value) {
      const wasm = this.engine.wasm;
      const index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1) {
        throw Error(`Missing parameter '${name}'`);
      }
      wasm._tempMemFloat[0] = value;
      wasm._wl_animation_component_setGraphParamValue(this._id, index, wasm._tempMem);
    }
  };
  /** @override */
  __publicField(AnimationComponent, "TypeName", "animation");
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "animation", null);
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "playCount", null);
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "speed", null);
  __decorate([
    enumerable()
  ], AnimationComponent.prototype, "state", null);
  var MeshComponent = class extends Component {
    /**
     * Set material to render the mesh with.
     *
     * @param material Material to render the mesh with.
     */
    set material(material) {
      this.scene.group.assertOrigin(material);
      this.engine.wasm._wl_mesh_component_set_material(this._id, material ? material._id : 0);
    }
    /** Material used to render the mesh. */
    get material() {
      const root = this._scene.group;
      const index = this.engine.wasm._wl_mesh_component_get_material(this._id);
      return root.materials.wrap(index);
    }
    /** Mesh rendered by this component. */
    get mesh() {
      const root = this._scene.group;
      const index = this.engine.wasm._wl_mesh_component_get_mesh(this._id);
      return root.meshes.wrap(index);
    }
    /**
     * Set mesh to rendered with this component.
     *
     * @param mesh Mesh rendered by this component.
     */
    set mesh(mesh) {
      this.scene.group.assertOrigin(mesh);
      this.engine.wasm._wl_mesh_component_set_mesh(this._id, mesh?._id ?? 0);
    }
    /** Skin for this mesh component. */
    get skin() {
      const index = this.engine.wasm._wl_mesh_component_get_skin(this._id);
      return this._scene.skins.wrap(index);
    }
    /**
     * Set skin to transform this mesh component.
     *
     * @param skin Skin to use for rendering skinned meshes.
     */
    set skin(skin) {
      this.scene.assertOrigin(skin);
      this.engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._id : 0);
    }
    /**
     * Morph targets for this mesh component.
     *
     * @since 1.2.0
     */
    get morphTargets() {
      const index = this.engine.wasm._wl_mesh_component_get_morph_targets(this._id);
      return this._scene.group.morphTargets.wrap(index);
    }
    /**
     * Set morph targets to transform this mesh component.
     *
     * @param morphTargets Morph targets to use for rendering.
     *
     * @since 1.2.0
     */
    set morphTargets(morphTargets) {
      this.scene.group.assertOrigin(morphTargets);
      this.engine.wasm._wl_mesh_component_set_morph_targets(this._id, morphTargets?._id ?? 0);
    }
    /**
     * Equivalent to {@link getMorphTargetWeights}.
     *
     * @note Prefer to use {@link getMorphTargetWeights} for performance.
     *
     * @since 1.2.0
     */
    get morphTargetWeights() {
      return this.getMorphTargetWeights();
    }
    /**
     * Set the morph target weights to transform this mesh component.
     *
     * @param weights New weights.
     *
     * @since 1.2.0
     */
    set morphTargetWeights(weights) {
      this.setMorphTargetWeights(weights);
    }
    getMorphTargetWeights(out) {
      const wasm = this.engine.wasm;
      const count = wasm._wl_mesh_component_get_morph_target_weights(this._id, wasm._tempMem);
      if (!out) {
        out = new Float32Array(count);
      }
      for (let i = 0; i < count; ++i) {
        out[i] = wasm._tempMemFloat[i];
      }
      return out;
    }
    /**
     * Get the weight of a single morph target.
     *
     * @param target Index of the morph target.
     * @returns The weight.
     *
     * @since 1.2.0
     */
    getMorphTargetWeight(target) {
      const count = this.morphTargets?.count ?? 0;
      if (target >= count) {
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      }
      return this.engine.wasm._wl_mesh_component_get_morph_target_weight(this._id, target);
    }
    /**
     * Set morph target weights for this mesh component.
     *
     * @param weights Array of new weights, expected to have at least as many
     *     elements as {@link MorphTargets.count}.
     *
     * @since 1.2.0
     */
    setMorphTargetWeights(weights) {
      const wasm = this.engine.wasm;
      wasm._tempMemFloat.set(weights);
      wasm._wl_mesh_component_set_morph_target_weights(this._id, wasm._tempMem, weights.length);
    }
    /**
     * Set the weight of a single morph target.
     *
     * @param target Index of the morph target.
     * @param weight The new weight.
     *
     * ## Usage
     *
     * ```js
     * const mesh = object.getComponent('mesh');
     * const mouthTarget = mesh.morphTargets.getTargetIndex('mouth');
     * mesh.setMorphTargetWeight(mouthTarget, 0.5);
     * ```
     *
     * @since 1.2.0
     */
    setMorphTargetWeight(target, weight) {
      const count = this.morphTargets?.count ?? 0;
      if (target >= count) {
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      }
      this.engine.wasm._wl_mesh_component_set_morph_target_weight(this._id, target, weight);
    }
  };
  /** @override */
  __publicField(MeshComponent, "TypeName", "mesh");
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "material", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "mesh", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "skin", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "morphTargets", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "morphTargetWeights", null);
  var LockAxis;
  (function(LockAxis3) {
    LockAxis3[LockAxis3["None"] = 0] = "None";
    LockAxis3[LockAxis3["X"] = 1] = "X";
    LockAxis3[LockAxis3["Y"] = 2] = "Y";
    LockAxis3[LockAxis3["Z"] = 4] = "Z";
  })(LockAxis || (LockAxis = {}));
  var PhysXComponent = class extends Component {
    getTranslationOffset(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    getRotationOffset(out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      return out;
    }
    getExtents(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_extents(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    getLinearVelocity(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const tempMemFloat = wasm._tempMemFloat;
      wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);
      out[0] = tempMemFloat[0];
      out[1] = tempMemFloat[1];
      out[2] = tempMemFloat[2];
      return out;
    }
    getAngularVelocity(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const tempMemFloat = wasm._tempMemFloat;
      wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);
      out[0] = tempMemFloat[0];
      out[1] = tempMemFloat[1];
      out[2] = tempMemFloat[2];
      return out;
    }
    /**
     * Set whether this rigid body is static.
     *
     * Setting this property only takes effect once the component
     * switches from inactive to active.
     *
     * @param b Whether the rigid body should be static.
     */
    set static(b) {
      this.engine.wasm._wl_physx_component_set_static(this._id, b);
    }
    /**
     * Whether this rigid body is static.
     *
     * This property returns whether the rigid body is *effectively*
     * static. If static property was set while the rigid body was
     * active, it will not take effect until the rigid body is set
     * inactive and active again. Until the component is set inactive,
     * this getter will return whether the rigid body is actually
     * static.
     */
    get static() {
      return !!this.engine.wasm._wl_physx_component_get_static(this._id);
    }
    /**
     * Equivalent to {@link PhysXComponent.getTranslationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getTranslationOffset} for performance.
     *
     * @since 1.1.1
     */
    get translationOffset() {
      return this.getTranslationOffset();
    }
    /**
     * Set the offset translation.
     *
     * The array must be a vector of at least **3** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set translationOffset(offset2) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_set_offsetTranslation(this._id, offset2[0], offset2[1], offset2[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getRotationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getRotationOffset} for performance.
     *
     * @since 1.1.1
     */
    get rotationOffset() {
      return this.getRotationOffset();
    }
    /**
     * Set the offset rotation.
     *
     * The array must be a quaternion of at least **4** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set rotationOffset(offset2) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_set_offsetRotation(this._id, offset2[0], offset2[1], offset2[2], offset2[3]);
    }
    /**
     * Set whether this rigid body is kinematic.
     *
     * @param b Whether the rigid body should be kinematic.
     */
    set kinematic(b) {
      this.engine.wasm._wl_physx_component_set_kinematic(this._id, b);
    }
    /**
     * Whether this rigid body is kinematic.
     */
    get kinematic() {
      return !!this.engine.wasm._wl_physx_component_get_kinematic(this._id);
    }
    /**
     * Set whether this rigid body's gravity is enabled.
     *
     * @param b Whether the rigid body's gravity should be enabled.
     */
    set gravity(b) {
      this.engine.wasm._wl_physx_component_set_gravity(this._id, b);
    }
    /**
     * Whether this rigid body's gravity flag is enabled.
     */
    get gravity() {
      return !!this.engine.wasm._wl_physx_component_get_gravity(this._id);
    }
    /**
     * Set whether this rigid body's simulate flag is enabled.
     *
     * @param b Whether the rigid body's simulate flag should be enabled.
     */
    set simulate(b) {
      this.engine.wasm._wl_physx_component_set_simulate(this._id, b);
    }
    /**
     * Whether this rigid body's simulate flag is enabled.
     */
    get simulate() {
      return !!this.engine.wasm._wl_physx_component_get_simulate(this._id);
    }
    /**
     * Set whether to allow simulation of this rigid body.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling {@link allowSimulation} while {@link trigger} is enabled
     * will disable {@link trigger}.
     *
     * @param b Whether to allow simulation of this rigid body.
     */
    set allowSimulation(b) {
      this.engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);
    }
    /**
     * Whether to allow simulation of this rigid body.
     */
    get allowSimulation() {
      return !!this.engine.wasm._wl_physx_component_get_allowSimulation(this._id);
    }
    /**
     * Set whether this rigid body may be queried in ray casts.
     *
     * @param b Whether this rigid body may be queried in ray casts.
     */
    set allowQuery(b) {
      this.engine.wasm._wl_physx_component_set_allowQuery(this._id, b);
    }
    /**
     * Whether this rigid body may be queried in ray casts.
     */
    get allowQuery() {
      return !!this.engine.wasm._wl_physx_component_get_allowQuery(this._id);
    }
    /**
     * Set whether this physics body is a trigger.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling trigger while {@link allowSimulation} is enabled,
     * will disable {@link allowSimulation}.
     *
     * @param b Whether this physics body is a trigger.
     */
    set trigger(b) {
      this.engine.wasm._wl_physx_component_set_trigger(this._id, b);
    }
    /**
     * Whether this physics body is a trigger.
     */
    get trigger() {
      return !!this.engine.wasm._wl_physx_component_get_trigger(this._id);
    }
    /**
     * Set the shape for collision detection.
     *
     * @param s New shape.
     * @since 0.8.5
     */
    set shape(s) {
      this.engine.wasm._wl_physx_component_set_shape(this._id, s);
    }
    /** The shape for collision detection. */
    get shape() {
      return this.engine.wasm._wl_physx_component_get_shape(this._id);
    }
    /**
     * Set additional data for the shape.
     *
     * Retrieved only from {@link PhysXComponent#shapeData}.
     * @since 0.8.10
     */
    set shapeData(d) {
      if (d == null || !isMeshShape(this.shape))
        return;
      this.engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);
    }
    /**
     * Additional data for the shape.
     *
     * `null` for {@link Shape} values: `None`, `Sphere`, `Capsule`, `Box`, `Plane`.
     * `{index: n}` for `TriangleMesh` and `ConvexHull`.
     *
     * This data is currently only for passing onto or creating other {@link PhysXComponent}.
     * @since 0.8.10
     */
    get shapeData() {
      if (!isMeshShape(this.shape))
        return null;
      return {
        index: this.engine.wasm._wl_physx_component_get_shape_data(this._id)
      };
    }
    /**
     * Set the shape extents for collision detection.
     *
     * @param e New extents for the shape.
     * @since 0.8.5
     */
    set extents(e) {
      this.extents.set(e);
    }
    /**
     * Equivalent to {@link PhysXComponent.getExtents}.
     *
     * @note Prefer to use {@link PhysXComponent.getExtents} for performance.
     */
    get extents() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_extents(this._id);
      return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);
    }
    /**
     * Get staticFriction.
     */
    get staticFriction() {
      return this.engine.wasm._wl_physx_component_get_staticFriction(this._id);
    }
    /**
     * Set staticFriction.
     * @param v New staticFriction.
     */
    set staticFriction(v) {
      this.engine.wasm._wl_physx_component_set_staticFriction(this._id, v);
    }
    /**
     * Get dynamicFriction.
     */
    get dynamicFriction() {
      return this.engine.wasm._wl_physx_component_get_dynamicFriction(this._id);
    }
    /**
     * Set dynamicFriction
     * @param v New dynamicDamping.
     */
    set dynamicFriction(v) {
      this.engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);
    }
    /**
     * Get bounciness.
     * @since 0.9.0
     */
    get bounciness() {
      return this.engine.wasm._wl_physx_component_get_bounciness(this._id);
    }
    /**
     * Set bounciness.
     * @param v New bounciness.
     * @since 0.9.0
     */
    set bounciness(v) {
      this.engine.wasm._wl_physx_component_set_bounciness(this._id, v);
    }
    /**
     * Get linearDamping/
     */
    get linearDamping() {
      return this.engine.wasm._wl_physx_component_get_linearDamping(this._id);
    }
    /**
     * Set linearDamping.
     * @param v New linearDamping.
     */
    set linearDamping(v) {
      this.engine.wasm._wl_physx_component_set_linearDamping(this._id, v);
    }
    /** Get angularDamping. */
    get angularDamping() {
      return this.engine.wasm._wl_physx_component_get_angularDamping(this._id);
    }
    /**
     * Set angularDamping.
     * @param v New angularDamping.
     */
    set angularDamping(v) {
      this.engine.wasm._wl_physx_component_set_angularDamping(this._id, v);
    }
    /**
     * Set linear velocity.
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New linear velocity.
     */
    set linearVelocity(v) {
      this.engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getLinearVelocity}.
     *
     * @note Prefer to use {@link PhysXComponent.getLinearVelocity} for performance.
     */
    get linearVelocity() {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set angular velocity
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New angular velocity
     */
    set angularVelocity(v) {
      this.engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getAngularVelocity}.
     *
     * @note Prefer to use {@link PhysXComponent.getAngularVelocity} for performance.
     */
    get angularVelocity() {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set the components groups mask.
     *
     * @param flags New flags that need to be set.
     */
    set groupsMask(flags) {
      this.engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);
    }
    /**
     * Get the components groups mask flags.
     *
     * Each bit represents membership to group, see example.
     *
     * ```js
     * // Assign c to group 2
     * c.groupsMask = (1 << 2);
     *
     * // Assign c to group 0
     * c.groupsMask  = (1 << 0);
     *
     * // Assign c to group 0 and 2
     * c.groupsMask = (1 << 0) | (1 << 2);
     *
     * (c.groupsMask & (1 << 2)) != 0; // true
     * (c.groupsMask & (1 << 7)) != 0; // false
     * ```
     */
    get groupsMask() {
      return this.engine.wasm._wl_physx_component_get_groupsMask(this._id);
    }
    /**
     * Set the components blocks mask.
     *
     * @param flags New flags that need to be set.
     */
    set blocksMask(flags) {
      this.engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);
    }
    /**
     * Get the components blocks mask flags.
     *
     * Each bit represents membership to the block, see example.
     *
     * ```js
     * // Block overlap with any objects in group 2
     * c.blocksMask = (1 << 2);
     *
     * // Block overlap with any objects in group 0
     * c.blocksMask  = (1 << 0)
     *
     * // Block overlap with any objects in group 0 and 2
     * c.blocksMask = (1 << 0) | (1 << 2);
     *
     * (c.blocksMask & (1 << 2)) != 0; // true
     * (c.blocksMask & (1 << 7)) != 0; // false
     * ```
     */
    get blocksMask() {
      return this.engine.wasm._wl_physx_component_get_blocksMask(this._id);
    }
    /**
     * Set axes to lock for linear velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * Combine flags with Bitwise OR:
     *
     * ```js
     * body.linearLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.linearLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set linearLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);
    }
    /**
     * Get the linear lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed.
     *
     * ```js
     * if(body.linearLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for linear movement.
     */
    get linearLockAxis() {
      return this.engine.wasm._wl_physx_component_get_linearLockAxis(this._id);
    }
    /**
     * Set axes to lock for angular velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * ```js
     * body.angularLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.angularLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set angularLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);
    }
    /**
     * Get the angular lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed:
     *
     * ```js
     * if(body.angularLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for angular movement.
     */
    get angularLockAxis() {
      return this.engine.wasm._wl_physx_component_get_angularLockAxis(this._id);
    }
    /**
     * Set mass.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * @param m New mass.
     */
    set mass(m) {
      this.engine.wasm._wl_physx_component_set_mass(this._id, m);
    }
    /** Mass */
    get mass() {
      return this.engine.wasm._wl_physx_component_get_mass(this._id);
    }
    /**
     * Set mass space interia tensor.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New mass space interatia tensor.
     */
    set massSpaceInteriaTensor(v) {
      this.engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);
    }
    /**
     * Set the rigid body to sleep upon activation.
     *
     * When asleep, the rigid body will not be simulated until the next contact.
     *
     * @param flag `true` to sleep upon activation.
     *
     * @since 1.1.5
     */
    set sleepOnActivate(flag) {
      this.engine.wasm._wl_physx_component_set_sleepOnActivate(this._id, flag);
    }
    /**
     * `true` if the rigid body is set to sleep upon activation, `false` otherwise.
     *
     * @since 1.1.5
     */
    get sleepOnActivate() {
      return !!this.engine.wasm._wl_physx_component_get_sleepOnActivate(this._id);
    }
    /**
     * Apply a force.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     * @param localForce Whether the force vector is in local space, default `false`.
     * @param p Position to apply force at, default is center of mass.
     * @param local Whether position is in local space, default `false`.
     */
    addForce(f2, m = ForceMode.Force, localForce = false, p, local = false) {
      const wasm = this.engine.wasm;
      if (!p) {
        wasm._wl_physx_component_addForce(this._id, f2[0], f2[1], f2[2], m, localForce);
        return;
      }
      wasm._wl_physx_component_addForceAt(this._id, f2[0], f2[1], f2[2], m, localForce, p[0], p[1], p[2], local);
    }
    /**
     * Apply torque.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     */
    addTorque(f2, m = ForceMode.Force) {
      this.engine.wasm._wl_physx_component_addTorque(this._id, f2[0], f2[1], f2[2], m);
    }
    /**
     * Add on collision callback.
     *
     * @param callback Function to call when this rigid body (un)collides with any other.
     *
     * ```js
     *  let rigidBody = this.object.getComponent('physx');
     *  rigidBody.onCollision(function(type, other) {
     *      // Ignore uncollides
     *      if(type == CollisionEventType.TouchLost) return;
     *
     *      // Take damage on collision with enemies
     *      if(other.object.name.startsWith("enemy-")) {
     *          this.applyDamage(10);
     *      }
     *  }.bind(this));
     * ```
     *
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollision(callback) {
      return this.onCollisionWith(this, callback);
    }
    /**
     * Add filtered on collision callback.
     *
     * @param otherComp Component for which callbacks will
     *        be triggered. If you pass this component, the method is equivalent to.
     *        {@link PhysXComponent#onCollision}.
     * @param callback Function to call when this rigid body
     *        (un)collides with `otherComp`.
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollisionWith(otherComp, callback) {
      const physics = this.engine.physics;
      physics._callbacks[this._id] = physics._callbacks[this._id] || [];
      physics._callbacks[this._id].push(callback);
      return this.engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id || this._id);
    }
    /**
     * Remove a collision callback added with {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     *
     * @param callbackId Callback id as returned by {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     * @throws When the callback does not belong to the component.
     * @throws When the callback does not exist.
     */
    removeCollisionCallback(callbackId) {
      const physics = this.engine.physics;
      const r = this.engine.wasm._wl_physx_component_removeCallback(this._id, callbackId);
      if (r)
        physics._callbacks[this._id].splice(-r);
    }
  };
  /** @override */
  __publicField(PhysXComponent, "TypeName", "physx");
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "static", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "translationOffset", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "rotationOffset", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "kinematic", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "gravity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "simulate", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "allowSimulation", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "allowQuery", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "trigger", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "shape", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "shapeData", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "extents", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "staticFriction", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "dynamicFriction", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "bounciness", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearDamping", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularDamping", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearVelocity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularVelocity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "groupsMask", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "blocksMask", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearLockAxis", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularLockAxis", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "mass", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "sleepOnActivate", null);
  var MeshIndexType;
  (function(MeshIndexType3) {
    MeshIndexType3[MeshIndexType3["UnsignedByte"] = 1] = "UnsignedByte";
    MeshIndexType3[MeshIndexType3["UnsignedShort"] = 2] = "UnsignedShort";
    MeshIndexType3[MeshIndexType3["UnsignedInt"] = 4] = "UnsignedInt";
  })(MeshIndexType || (MeshIndexType = {}));
  var MeshSkinningType;
  (function(MeshSkinningType3) {
    MeshSkinningType3[MeshSkinningType3["None"] = 0] = "None";
    MeshSkinningType3[MeshSkinningType3["FourJoints"] = 1] = "FourJoints";
    MeshSkinningType3[MeshSkinningType3["EightJoints"] = 2] = "EightJoints";
  })(MeshSkinningType || (MeshSkinningType = {}));
  var Mesh = class extends SceneResource {
    /**
     * @deprecated Use {@link MeshManager.create} instead, accessible via {@link SceneGroup.meshes}:
     *
     * ```js
     * const mesh = sceneGroup.meshes.create({vertexCount: 3, indexData: [0, 1, 2]});
     * ...
     * mesh.update();
     * ```
     */
    constructor(host, params) {
      const group = host instanceof SceneGroup ? host : (host ?? WL).scene.group;
      if (!isNumber(params)) {
        const mesh = group.meshes.create(params);
        super(group, mesh._index);
        return mesh;
      }
      super(group, params);
    }
    /** Number of vertices in this mesh. */
    get vertexCount() {
      return this.engine.wasm._wl_mesh_get_vertexCount(this._id);
    }
    /** Index data (read-only) or `null` if the mesh is not indexed. */
    get indexData() {
      const wasm = this.engine.wasm;
      const tempMem = wasm._tempMem;
      const ptr = wasm._wl_mesh_get_indexData(this._id, tempMem, tempMem + 4);
      if (ptr === null)
        return null;
      const indexCount = wasm.HEAPU32[tempMem / 4];
      const indexSize = wasm.HEAPU32[tempMem / 4 + 1];
      switch (indexSize) {
        case MeshIndexType.UnsignedByte:
          return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);
        case MeshIndexType.UnsignedShort:
          return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);
        case MeshIndexType.UnsignedInt:
          return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);
      }
      return null;
    }
    /**
     * Apply changes to {@link attribute | vertex attributes}.
     *
     * Uploads the updated vertex attributes to the GPU and updates the bounding
     * sphere to match the new vertex positions.
     *
     * Since this is an expensive operation, call it only once you have performed
     * all modifications on a mesh and avoid calling if you did not perform any
     * modifications at all.
     */
    update() {
      this.engine.wasm._wl_mesh_update(this._id);
    }
    getBoundingSphere(out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      this.engine.wasm._wl_mesh_get_boundingSphere(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      return out;
    }
    attribute(attr) {
      if (typeof attr != "number")
        throw new TypeError("Expected number, but got " + typeof attr);
      const wasm = this.engine.wasm;
      const tempMemUint32 = wasm._tempMemUint32;
      wasm._wl_mesh_get_attribute(this._id, attr, wasm._tempMem);
      if (tempMemUint32[0] == 255)
        return null;
      const arraySize = tempMemUint32[5];
      return new MeshAttributeAccessor(this.engine, {
        attribute: tempMemUint32[0],
        offset: tempMemUint32[1],
        stride: tempMemUint32[2],
        formatSize: tempMemUint32[3],
        componentCount: tempMemUint32[4],
        /* The WASM API returns `0` for a scalar value. We clamp it to 1 as we strictly use it as a multiplier for get/set operations */
        arraySize: arraySize ? arraySize : 1,
        length: this.vertexCount,
        bufferType: attr !== MeshAttribute.JointId ? Float32Array : Uint16Array
      });
    }
    /**
     * Destroy and free the meshes memory.
     *
     * It is best practice to set the mesh variable to `null` after calling
     * destroy to prevent accidental use:
     *
     * ```js
     *   mesh.destroy();
     *   mesh = null;
     * ```
     *
     * Accessing the mesh after destruction behaves like accessing an empty
     * mesh.
     *
     * @since 0.9.0
     */
    destroy() {
      this.engine.wasm._wl_mesh_destroy(this._id);
      this._host.meshes._destroy(this);
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Mesh(destroyed)";
      }
      return `Mesh(${this._index})`;
    }
  };
  var MeshAttributeAccessor = class {
    /** Max number of elements. */
    length = 0;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /** Attribute index. @hidden */
    _attribute = -1;
    /** Attribute offset. @hidden */
    _offset = 0;
    /** Attribute stride. @hidden */
    _stride = 0;
    /** Format size native enum. @hidden */
    _formatSize = 0;
    /** Number of components per vertex. @hidden */
    _componentCount = 0;
    /** Number of values per vertex. @hidden */
    _arraySize = 1;
    /**
     * Class to instantiate an ArrayBuffer to get/set values.
     */
    _bufferType;
    /**
     * Function to allocate temporary WASM memory. It is cached in the accessor to avoid
     * conditionals during get/set.
     */
    _tempBufferGetter;
    /**
     * Create a new instance.
     *
     * @note Please use {@link Mesh.attribute} to create a new instance.
     *
     * @param options Contains information about how to read the data.
     * @note Do not use this constructor. Instead, please use the {@link Mesh.attribute} method.
     *
     * @hidden
     */
    constructor(engine, options) {
      this._engine = engine;
      const wasm = this._engine.wasm;
      this._attribute = options.attribute;
      this._offset = options.offset;
      this._stride = options.stride;
      this._formatSize = options.formatSize;
      this._componentCount = options.componentCount;
      this._arraySize = options.arraySize;
      this._bufferType = options.bufferType;
      this.length = options.length;
      this._tempBufferGetter = this._bufferType === Float32Array ? wasm.getTempBufferF32.bind(wasm) : wasm.getTempBufferU16.bind(wasm);
    }
    /**
     * Create a new TypedArray to hold this attribute's values.
     *
     * This method is useful to create a view to hold the data to
     * pass to {@link get} and {@link set}
     *
     * Example:
     *
     * ```js
     * const vertexCount = 4;
     * const positionAttribute = mesh.attribute(MeshAttribute.Position);
     *
     * // A position has 3 floats per vertex. Thus, positions has length 3 * 4.
     * const positions = positionAttribute.createArray(vertexCount);
     * ```
     *
     * @param count The number of **vertices** expected.
     * @returns A TypedArray with the appropriate format to access the data
     */
    createArray(count = 1) {
      count = count > this.length ? this.length : count;
      return new this._bufferType(count * this._componentCount * this._arraySize);
    }
    get(index, out = this.createArray()) {
      if (out.length % this._componentCount !== 0) {
        throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      }
      const dest = this._tempBufferGetter(out.length);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const destSize = elementSize * out.length;
      const srcFormatSize = this._formatSize * this._arraySize;
      const destFormatSize = this._componentCount * elementSize * this._arraySize;
      this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);
      for (let i = 0; i < out.length; ++i)
        out[i] = dest[i];
      return out;
    }
    /**
     * Set attribute element.
     *
     * @param i Index
     * @param v Value to set the element to
     *
     * `v.length` needs to be a multiple of the attributes component count, see
     * {@link MeshAttribute}. If `v.length` is more than one multiple, it will be
     * filled with the next n attribute elements, which can reduce overhead
     * of this call.
     *
     * @returns Reference to self (for method chaining)
     */
    set(i, v) {
      if (v.length % this._componentCount !== 0)
        throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const srcSize = elementSize * v.length;
      const srcFormatSize = this._componentCount * elementSize * this._arraySize;
      const destFormatSize = this._formatSize * this._arraySize;
      const wasm = this._engine.wasm;
      if (v.buffer != wasm.HEAPU8.buffer) {
        const dest = this._tempBufferGetter(v.length);
        dest.set(v);
        v = dest;
      }
      wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride);
      return this;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
  };
  var temp2d = null;
  var Texture = class extends SceneResource {
    /**
     * @deprecated Use {@link TextureManager.create} instead, accessible via {@link SceneGroup.textures}:
     *
     * ```js
     * const image = new Image();
     * image.onload = () => {
     *     const texture = sceneGroup.textures.create(image);
     * };
     * ```
     */
    constructor(host, param) {
      const group = host instanceof SceneGroup ? host : (host ?? WL).scene.group;
      if (isImageLike(param)) {
        const texture = group.textures.create(param);
        super(group, texture._index);
        return texture;
      }
      super(group, param);
    }
    /**
     * Whether this texture is valid
     *
     * @deprecated Use {@link SceneResource#isDestroyed} instead.
     */
    get valid() {
      return !this.isDestroyed;
    }
    /**
     * Index in this manager.
     *
     * @deprecated Use {@link Texture.index} instead.
     */
    get id() {
      return this.index;
    }
    /** Update the texture to match the HTML element (e.g. reflect the current frame of a video). */
    update() {
      const image = this._imageId;
      if (!this.valid || !image)
        return;
      if (!this._host.isActive)
        return;
      this.engine.wasm._wl_renderer_updateImage(this._imageId);
    }
    /** Width of the texture. */
    get width() {
      const element = this.htmlElement;
      if (element)
        return element.width;
      const wasm = this.engine.wasm;
      wasm._wl_image_size(this._imageId, wasm._tempMem);
      return wasm._tempMemUint32[0];
    }
    /** Height of the texture. */
    get height() {
      const element = this.htmlElement;
      if (element)
        return element.height;
      const wasm = this.engine.wasm;
      wasm._wl_image_size(this._imageId, wasm._tempMem);
      return wasm._tempMemUint32[1];
    }
    /**
     * Returns the html element associated to this texture.
     *
     * @note This accessor will return `null` if the image is compressed.
     */
    get htmlElement() {
      const image = this._imageId;
      if (!image)
        return null;
      const wasm = this.engine.wasm;
      const jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      return wasm._images[jsImageIndex];
    }
    /**
     * Update a subrange on the texture to match the HTML element (e.g. reflect the current frame of a video).
     *
     * Usage:
     *
     * ```js
     * // Copies rectangle of pixel starting from (10, 20)
     * texture.updateSubImage(10, 20, 600, 400);
     * ```
     *
     * @param x x offset
     * @param y y offset
     * @param w width
     * @param h height
     */
    updateSubImage(x, y, w, h) {
      if (this.isDestroyed)
        return;
      const image = this._imageId;
      if (!image)
        return;
      const wasm = this.engine.wasm;
      const jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      if (!temp2d) {
        const canvas2 = document.createElement("canvas");
        const ctx = canvas2.getContext("2d");
        if (!ctx) {
          throw new Error("Texture.updateSubImage(): Failed to obtain CanvasRenderingContext2D.");
        }
        temp2d = {
          canvas: canvas2,
          ctx
        };
      }
      const img = wasm._images[jsImageIndex];
      if (!img)
        return;
      temp2d.canvas.width = w;
      temp2d.canvas.height = h;
      temp2d.ctx.drawImage(img, x, y, w, h, 0, 0, w, h);
      const yOffset = (img.videoHeight ?? img.height) - y - h;
      wasm._images[jsImageIndex] = temp2d.canvas;
      wasm._wl_renderer_updateImage(image, x, yOffset);
      wasm._images[jsImageIndex] = img;
    }
    /**
     * Destroy and free the texture's texture altas space and memory.
     *
     * It is best practice to set the texture variable to `null` after calling
     * destroy to prevent accidental use of the invalid texture:
     *
     * ```js
     *   texture.destroy();
     *   texture = null;
     * ```
     *
     * @since 0.9.0
     */
    destroy() {
      const wasm = this.engine.wasm;
      wasm._wl_texture_destroy(this._id);
      this._host.textures._destroy(this);
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Texture(destroyed)";
      }
      return `Texture(${this._index})`;
    }
    /** Image index. @hidden */
    get _imageId() {
      const index = this.engine.wasm._wl_texture_get_image_index(this._id);
      return SceneResource._pack(this._host._index, index);
    }
  };
  var Animation = class extends SceneResource {
    /**
     * @param index Index in the manager
     */
    constructor(host = WL, index) {
      const scene = host instanceof SceneLike ? host : host.scene;
      super(scene, index);
    }
    /** Duration of this animation. */
    get duration() {
      return this.engine.wasm._wl_animation_get_duration(this._id);
    }
    /** Number of tracks in this animation. */
    get trackCount() {
      return this.engine.wasm._wl_animation_get_trackCount(this._id);
    }
    /**
     * Clone this animation retargeted to a new set of objects.
     *
     * The clone shares most of the data with the original and is therefore
     * light-weight.
     *
     * **Experimental:** This API might change in upcoming versions.
     *
     * If retargeting to {@link Skin}, the join names will be used to determine a mapping
     * from the previous skin to the new skin. The source skin will be retrieved from
     * the first track in the animation that targets a joint.
     *
     * @param newTargets New targets per track. Expected to have
     *      {@link Animation#trackCount} elements or to be a {@link Skin}.
     * @returns The retargeted clone of this animation.
     */
    retarget(newTargets) {
      const wasm = this.engine.wasm;
      if (newTargets instanceof Skin) {
        const index2 = wasm._wl_animation_retargetToSkin(this._id, newTargets._id);
        return this._host.animations.wrap(index2);
      }
      if (newTargets.length != this.trackCount) {
        throw Error("Expected " + this.trackCount.toString() + " targets, but got " + newTargets.length.toString());
      }
      const ptr = wasm._malloc(2 * newTargets.length);
      for (let i = 0; i < newTargets.length; ++i) {
        const object3d = newTargets[i];
        this.scene.assertOrigin(object3d);
        wasm.HEAPU16[ptr >> 1 + i] = newTargets[i].objectId;
      }
      const index = wasm._wl_animation_retarget(this._id, ptr);
      wasm._free(ptr);
      return this._host.animations.wrap(index);
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Animation(destroyed)";
      }
      return `Animation(${this._index})`;
    }
    /** Hosting scene instance. */
    get scene() {
      return this._host;
    }
  };
  var Object3D = class {
    /**
     * Packed object id, containing scene index and local id.
     *
     * @hidden
     */
    _id = -1;
    /** Object id, relative to the scene manager. @hidden */
    _localId = -1;
    /** Scene instance. @hidden */
    _scene;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /**
     * @param o Object id to wrap.
     *
     * @deprecated Objects must be obtained via {@link Scene.addObject} or {@link Scene.wrap}:
     *
     * ```js
     * // Create a new object.
     * const obj = scene.addObject();
     *
     * // Wrap an object using its id. The id must be valid.
     * const obj = scene.wrap(0);
     * ```
     *
     * @hidden
     */
    constructor(scene, id) {
      scene = scene.scene ?? scene;
      this._localId = id;
      this._id = scene._index << 22 | id;
      this._scene = scene;
      this._engine = scene.engine;
    }
    /**
     * Name of the object.
     *
     * Useful for identifying objects during debugging.
     */
    get name() {
      const wasm = this._engine.wasm;
      return wasm.UTF8ToString(wasm._wl_object_name(this._id));
    }
    /**
     * Set the object's name.
     *
     * @param newName The new name to set.
     */
    set name(newName) {
      const wasm = this._engine.wasm;
      wasm._wl_object_set_name(this._id, wasm.tempUTF8(newName));
    }
    /**
     * Parent of this object or `null` if parented to root.
     */
    get parent() {
      const p = this._engine.wasm._wl_object_parent(this._id);
      return p === 0 ? null : this._scene.wrap(p);
    }
    /**
     * Equivalent to {@link Object3D.getChildren}.
     *
     * @note Prefer to use {@link Object3D.getChildren} for performance.
     */
    get children() {
      return this.getChildren();
    }
    /** The number of children of this object. */
    get childrenCount() {
      return this._engine.wasm._wl_object_get_children_count(this._id);
    }
    /**
     * Reparent object to given object.
     *
     * @note Reparenting is not trivial and might have a noticeable performance impact.
     *
     * @param newParent New parent or `null` to parent to root
     */
    set parent(newParent) {
      this.scene.assertOrigin(newParent);
      this._engine.wasm._wl_object_set_parent(this._id, newParent == null ? 0 : newParent._id);
    }
    /** Local object id in the scene manager. */
    get objectId() {
      return this._localId;
    }
    /** Scene instance. */
    get scene() {
      return this._scene;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /**
     * Clone this hierarchy into a new one.
     *
     * Cloning copies the hierarchy structure, object names,
     * as well as components.
     *
     * JavaScript components are cloned using {@link Component.copy}. You can
     * override this method in your components.
     *
     * @param parent The parent for the cloned hierarchy or `null` to clone
     *     into the scene root. Defaults to `null`.
     *
     * @returns The clone of this object.
     */
    clone(parent = null) {
      this.scene.assertOrigin(parent);
      const engine = this._engine;
      const id = engine.wasm._wl_object_clone(this._id, parent ? parent._id : 0);
      return this._scene.wrap(id);
    }
    /**
     * Children of this object.
     *
     * @note Child order is **undefined**. No assumptions should be made
     * about the index of a specific object.
     *
     * If you need to access a specific child of this object, you can
     * use {@link Object3D.findByName}.
     *
     * When the object exists in the scene at editor time, prefer passing it as
     * a component property.
     *
     * @note When providing an output array, only `this.childrenCount` elements will be written.
     * The rest of the array will not be modified by this method.
     *
     * @param out Destination array, expected to have at least `this.childrenCount` elements.
     * @returns The `out` parameter.
     */
    getChildren(out = new Array(this.childrenCount)) {
      const childrenCount = this.childrenCount;
      if (childrenCount === 0)
        return out;
      const wasm = this._engine.wasm;
      wasm.requireTempMem(childrenCount * 2);
      this._engine.wasm._wl_object_get_children(this._id, wasm._tempMem, wasm._tempMemSize >> 1);
      for (let i = 0; i < childrenCount; ++i) {
        out[i] = this._scene.wrap(wasm._tempMemUint16[i]);
      }
      return out;
    }
    /**
     * Reset local transformation (translation, rotation and scaling) to identity.
     *
     * @returns Reference to self (for method chaining).
     */
    resetTransform() {
      this._engine.wasm._wl_object_reset_translation_rotation(this._id);
      this._engine.wasm._wl_object_reset_scaling(this._id);
      return this;
    }
    /**
     * Reset local position and rotation to identity.
     *
     * @returns Reference to self (for method chaining).
     */
    resetPositionRotation() {
      this._engine.wasm._wl_object_reset_translation_rotation(this._id);
      return this;
    }
    /** @deprecated Please use {@link Object3D.resetPositionRotation} instead. */
    resetTranslationRotation() {
      return this.resetPositionRotation();
    }
    /**
     * Reset local rotation, keep translation.
     *
     * @note To reset both rotation and translation, prefer
     *       {@link resetTranslationRotation}.
     *
     * @returns Reference to self (for method chaining).
     */
    resetRotation() {
      this._engine.wasm._wl_object_reset_rotation(this._id);
      return this;
    }
    /**
     * Reset local translation, keep rotation.
     *
     * @note To reset both rotation and translation, prefer
     *       {@link resetTranslationRotation}.
     *
     * @returns Reference to self (for method chaining).
     */
    resetPosition() {
      this._engine.wasm._wl_object_reset_translation(this._id);
      return this;
    }
    /** @deprecated Please use {@link Object3D.resetPosition} instead. */
    resetTranslation() {
      return this.resetPosition();
    }
    /**
     * Reset local scaling to identity (``[1.0, 1.0, 1.0]``).
     *
     * @returns Reference to self (for method chaining).
     */
    resetScaling() {
      this._engine.wasm._wl_object_reset_scaling(this._id);
      return this;
    }
    /** @deprecated Please use {@link Object3D.translateLocal} instead. */
    translate(v) {
      return this.translateLocal(v);
    }
    /**
     * Translate object by a vector in the parent's space.
     *
     * @param v Vector to translate by.
     *
     * @returns Reference to self (for method chaining).
     */
    translateLocal(v) {
      this._engine.wasm._wl_object_translate(this._id, v[0], v[1], v[2]);
      return this;
    }
    /**
     * Translate object by a vector in object space.
     *
     * @param v Vector to translate by.
     *
     * @returns Reference to self (for method chaining).
     */
    translateObject(v) {
      this._engine.wasm._wl_object_translate_obj(this._id, v[0], v[1], v[2]);
      return this;
    }
    /**
     * Translate object by a vector in world space.
     *
     * @param v Vector to translate by.
     *
     * @returns Reference to self (for method chaining).
     */
    translateWorld(v) {
      this._engine.wasm._wl_object_translate_world(this._id, v[0], v[1], v[2]);
      return this;
    }
    /** @deprecated Please use {@link Object3D.rotateAxisAngleDegLocal} instead. */
    rotateAxisAngleDeg(a, d) {
      this.rotateAxisAngleDegLocal(a, d);
      return this;
    }
    /**
     * Rotate around given axis by given angle (degrees) in local space.
     *
     * @param a Vector representing the rotation axis.
     * @param d Angle in degrees.
     *
     * @note If the object is translated the rotation will be around
     *     the parent. To rotate around the object origin, use
     *     {@link rotateAxisAngleDegObject}
     *
     * @see {@link rotateAxisAngleRad}
     *
     * @returns Reference to self (for method chaining).
     */
    rotateAxisAngleDegLocal(a, d) {
      this._engine.wasm._wl_object_rotate_axis_angle(this._id, a[0], a[1], a[2], d);
      return this;
    }
    /** @deprecated Please use {@link Object3D.rotateAxisAngleRadLocal} instead. */
    rotateAxisAngleRad(a, d) {
      return this.rotateAxisAngleRadLocal(a, d);
    }
    /**
     * Rotate around given axis by given angle (radians) in local space.
     *
     * @param a Vector representing the rotation axis.
     * @param d Angle in radians.
     *
     * @note If the object is translated the rotation will be around
     *     the parent. To rotate around the object origin, use
     *     {@link rotateAxisAngleDegObject}
     *
     * @see {@link rotateAxisAngleDeg}
     *
     * @returns Reference to self (for method chaining).
     */
    rotateAxisAngleRadLocal(a, d) {
      this._engine.wasm._wl_object_rotate_axis_angle_rad(this._id, a[0], a[1], a[2], d);
      return this;
    }
    /**
     * Rotate around given axis by given angle (degrees) in object space.
     *
     * @param a Vector representing the rotation axis.
     * @param d Angle in degrees.
     *
     * Equivalent to prepending a rotation quaternion to the object's
     * local transformation.
     *
     * @see {@link rotateAxisAngleRadObject}
     *
     * @returns Reference to self (for method chaining).
     */
    rotateAxisAngleDegObject(a, d) {
      this._engine.wasm._wl_object_rotate_axis_angle_obj(this._id, a[0], a[1], a[2], d);
      return this;
    }
    /**
     * Rotate around given axis by given angle (radians) in object space
     * Equivalent to prepending a rotation quaternion to the object's
     * local transformation.
     *
     * @param a Vector representing the rotation axis
     * @param d Angle in degrees
     *
     * @see {@link rotateAxisAngleDegObject}
     *
     * @returns Reference to self (for method chaining).
     */
    rotateAxisAngleRadObject(a, d) {
      this._engine.wasm._wl_object_rotate_axis_angle_rad_obj(this._id, a[0], a[1], a[2], d);
      return this;
    }
    /** @deprecated Please use {@link Object3D.rotateLocal} instead. */
    rotate(q2) {
      this.rotateLocal(q2);
      return this;
    }
    /**
     * Rotate by a quaternion.
     *
     * @param q the Quaternion to rotate by.
     *
     * @returns Reference to self (for method chaining).
     */
    rotateLocal(q2) {
      this._engine.wasm._wl_object_rotate_quat(this._id, q2[0], q2[1], q2[2], q2[3]);
      return this;
    }
    /**
     * Rotate by a quaternion in object space.
     *
     * Equivalent to prepending a rotation quaternion to the object's
     * local transformation.
     *
     * @param q the Quaternion to rotate by.
     *
     * @returns Reference to self (for method chaining).
     */
    rotateObject(q2) {
      this._engine.wasm._wl_object_rotate_quat_obj(this._id, q2[0], q2[1], q2[2], q2[3]);
      return this;
    }
    /** @deprecated Please use {@link Object3D.scaleLocal} instead. */
    scale(v) {
      this.scaleLocal(v);
      return this;
    }
    /**
     * Scale object by a vector in object space.
     *
     * @param v Vector to scale by.
     *
     * @returns Reference to self (for method chaining).
     */
    scaleLocal(v) {
      this._engine.wasm._wl_object_scale(this._id, v[0], v[1], v[2]);
      return this;
    }
    getPositionLocal(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      wasm._wl_object_get_translation_local(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    getTranslationLocal(out = new Float32Array(3)) {
      return this.getPositionLocal(out);
    }
    getPositionWorld(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      wasm._wl_object_get_translation_world(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    getTranslationWorld(out = new Float32Array(3)) {
      return this.getPositionWorld(out);
    }
    /**
     * Set local / object space position.
     *
     * Concatenates a new translation dual quaternion onto the existing rotation.
     *
     * @param v New local position array/vector, expected to have at least 3 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setPositionLocal(v) {
      this._engine.wasm._wl_object_set_translation_local(this._id, v[0], v[1], v[2]);
      return this;
    }
    /** @deprecated Please use {@link Object3D.setPositionLocal} instead. */
    setTranslationLocal(v) {
      return this.setPositionLocal(v);
    }
    /**
     * Set world space position.
     *
     * Applies the inverse parent transform with a new translation dual quaternion
     * which is concatenated onto the existing rotation.
     *
     * @param v New world position array/vector, expected to have at least 3 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setPositionWorld(v) {
      this._engine.wasm._wl_object_set_translation_world(this._id, v[0], v[1], v[2]);
      return this;
    }
    /** @deprecated Please use {@link Object3D.setPositionWorld} instead. */
    setTranslationWorld(v) {
      return this.setPositionWorld(v);
    }
    getScalingLocal(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_scaling_local(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /**
     * Set local / object space scaling.
     *
     * @param v New local scaling array/vector, expected to have at least 3 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setScalingLocal(v) {
      this._engine.wasm._wl_object_set_scaling_local(this._id, v[0], v[1], v[2]);
      return this;
    }
    getScalingWorld(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_scaling_world(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /**
     * Set World space scaling.
     *
     * @param v New world scaling array/vector, expected to have at least 3 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setScalingWorld(v) {
      this._engine.wasm._wl_object_set_scaling_world(this._id, v[0], v[1], v[2]);
      return this;
    }
    getRotationLocal(out = new Float32Array(4)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_local(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      return out;
    }
    /**
     * Set local space rotation.
     *
     * @param v New world rotation array/vector, expected to have at least 4 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setRotationLocal(v) {
      this._engine.wasm._wl_object_set_rotation_local(this._id, v[0], v[1], v[2], v[3]);
      return this;
    }
    getRotationWorld(out = new Float32Array(4)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_world(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      return out;
    }
    /**
     * Set local space rotation.
     *
     * @param v New world rotation array/vector, expected to have at least 4 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setRotationWorld(v) {
      this._engine.wasm._wl_object_set_rotation_world(this._id, v[0], v[1], v[2], v[3]);
      return this;
    }
    getTransformLocal(out = new Float32Array(8)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_local(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      out[4] = wasm.HEAPF32[ptr + 4];
      out[5] = wasm.HEAPF32[ptr + 5];
      out[6] = wasm.HEAPF32[ptr + 6];
      out[7] = wasm.HEAPF32[ptr + 7];
      return out;
    }
    /**
     * Set local space rotation.
     *
     * @param v New local transform array, expected to have at least 8 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setTransformLocal(v) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_local(this._id) / 4;
      wasm.HEAPF32[ptr] = v[0];
      wasm.HEAPF32[ptr + 1] = v[1];
      wasm.HEAPF32[ptr + 2] = v[2];
      wasm.HEAPF32[ptr + 3] = v[3];
      wasm.HEAPF32[ptr + 4] = v[4];
      wasm.HEAPF32[ptr + 5] = v[5];
      wasm.HEAPF32[ptr + 6] = v[6];
      wasm.HEAPF32[ptr + 7] = v[7];
      this.setDirty();
      return this;
    }
    getTransformWorld(out = new Float32Array(8)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_world(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      out[4] = wasm.HEAPF32[ptr + 4];
      out[5] = wasm.HEAPF32[ptr + 5];
      out[6] = wasm.HEAPF32[ptr + 6];
      out[7] = wasm.HEAPF32[ptr + 7];
      return out;
    }
    /**
     * Set world space rotation.
     *
     * @param v New world transform array, expected to have at least 8 elements.
     *
     * @returns Reference to self (for method chaining).
     */
    setTransformWorld(v) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_object_trans_world(this._id) / 4;
      wasm.HEAPF32[ptr] = v[0];
      wasm.HEAPF32[ptr + 1] = v[1];
      wasm.HEAPF32[ptr + 2] = v[2];
      wasm.HEAPF32[ptr + 3] = v[3];
      wasm.HEAPF32[ptr + 4] = v[4];
      wasm.HEAPF32[ptr + 5] = v[5];
      wasm.HEAPF32[ptr + 6] = v[6];
      wasm.HEAPF32[ptr + 7] = v[7];
      this._engine.wasm._wl_object_trans_world_to_local(this._id);
      return this;
    }
    /**
     * Local space transformation.
     *
     * @deprecated Please use {@link Object3D.setTransformLocal} and
     * {@link Object3D.getTransformLocal} instead.
     */
    get transformLocal() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_trans_local(this._id), 8);
    }
    /**
     * Set local transform.
     *
     * @param t Local space transformation.
     *
     * @since 0.8.5
     *
     * @deprecated Please use {@link Object3D.setTransformLocal} and
     * {@link Object3D.getTransformLocal} instead.
     */
    set transformLocal(t) {
      this.transformLocal.set(t);
      this.setDirty();
    }
    /**
     * Global / world space transformation.
     *
     * May recompute transformations of the hierarchy of this object,
     * if they were changed by JavaScript components this frame.
     *
     * @deprecated Please use {@link Object3D.setTransformWorld} and
     * {@link Object3D.getTransformWorld} instead.
     */
    get transformWorld() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_trans_world(this._id), 8);
    }
    /**
     * Set world transform.
     *
     * @param t Global / world space transformation.
     *
     * @since 0.8.5
     *
     * @deprecated Please use {@link Object3D.setTransformWorld} and
     * {@link Object3D.getTransformWorld} instead.
     */
    set transformWorld(t) {
      this.transformWorld.set(t);
      this._engine.wasm._wl_object_trans_world_to_local(this._id);
    }
    /**
     * Local / object space scaling.
     *
     * @deprecated Please use {@link Object3D.setScalingLocal} and
     * {@link Object3D.getScalingLocal} instead.
     */
    get scalingLocal() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_scaling_local(this._id), 3);
    }
    /**
     * Set local space scaling.
     *
     * @param s Local space scaling.
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.setScalingLocal} and
     * {@link Object3D.getScalingLocal} instead.
     */
    set scalingLocal(s) {
      this.scalingLocal.set(s);
      this.setDirty();
    }
    /**
     * Global / world space scaling.
     *
     * May recompute transformations of the hierarchy of this object,
     * if they were changed by JavaScript components this frame.
     *
     * @deprecated Please use {@link Object3D.setScalingWorld} and
     * {@link Object3D.getScalingWorld} instead.
     */
    get scalingWorld() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_object_scaling_world(this._id), 3);
    }
    /**
     * Set world space scaling.
     *
     * @param t World space scaling.
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.setScalingWorld} and
     * {@link Object3D.getScalingWorld} instead.
     */
    set scalingWorld(s) {
      this.scalingWorld.set(s);
      this._engine.wasm._wl_object_scaling_world_to_local(this._id);
    }
    /**
     * Local space rotation.
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.getRotationLocal} and
     * {@link Object3D.setRotationLocal} instead.
     */
    get rotationLocal() {
      return this.transformLocal.subarray(0, 4);
    }
    /**
     * Global / world space rotation
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.getRotationWorld} and
     * {@link Object3D.setRotationWorld} instead.
     */
    get rotationWorld() {
      return this.transformWorld.subarray(0, 4);
    }
    /**
     * Set local space rotation.
     *
     * @param r Local space rotation
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.getRotationLocal} and
     * {@link Object3D.setRotationLocal} instead.
     */
    set rotationLocal(r) {
      this._engine.wasm._wl_object_set_rotation_local(this._id, r[0], r[1], r[2], r[3]);
    }
    /**
     * Set world space rotation.
     *
     * @param r Global / world space rotation.
     *
     * @since 0.8.7
     *
     * @deprecated Please use {@link Object3D.getRotationWorld} and
     * {@link Object3D.setRotationWorld} instead.
     */
    set rotationWorld(r) {
      this._engine.wasm._wl_object_set_rotation_world(this._id, r[0], r[1], r[2], r[3]);
    }
    /** @deprecated Please use {@link Object3D.getForwardWorld} instead. */
    getForward(out) {
      return this.getForwardWorld(out);
    }
    /**
     * Compute the object's forward facing world space vector.
     *
     * The forward vector in object space is along the negative z-axis, i.e.,
     * `[0, 0, -1]`.
     *
     * @param out Destination array/vector, expected to have at least 3 elements.
     * @return The `out` parameter.
     */
    getForwardWorld(out) {
      out[0] = 0;
      out[1] = 0;
      out[2] = -1;
      this.transformVectorWorld(out);
      return out;
    }
    /** @deprecated Please use {@link Object3D.getUpWorld} instead. */
    getUp(out) {
      return this.getUpWorld(out);
    }
    /**
     * Compute the object's up facing world space vector.
     *
     * @param out Destination array/vector, expected to have at least 3 elements.
     * @return The `out` parameter.
     */
    getUpWorld(out) {
      out[0] = 0;
      out[1] = 1;
      out[2] = 0;
      this.transformVectorWorld(out);
      return out;
    }
    /** @deprecated Please use {@link Object3D.getRightWorld} instead. */
    getRight(out) {
      return this.getRightWorld(out);
    }
    /**
     * Compute the object's right facing world space vector.
     *
     * @param out Destination array/vector, expected to have at least 3 elements.
     * @return The `out` parameter.
     */
    getRightWorld(out) {
      out[0] = 1;
      out[1] = 0;
      out[2] = 0;
      this.transformVectorWorld(out);
      return out;
    }
    /**
     * Transform a vector by this object's world transform.
     *
     * @param out Out vector
     * @param v Vector to transform, default `out`
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformVectorWorld(out, v = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = v[0];
      wasm._tempMemFloat[1] = v[1];
      wasm._tempMemFloat[2] = v[2];
      wasm._wl_object_transformVectorWorld(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a vector by this object's local transform.
     *
     * @param out Out vector
     * @param v Vector to transform, default `out`
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformVectorLocal(out, v = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = v[0];
      wasm._tempMemFloat[1] = v[1];
      wasm._tempMemFloat[2] = v[2];
      wasm._wl_object_transformVectorLocal(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a point by this object's world transform.
     *
     * @param out Out point.
     * @param p Point to transform, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformPointWorld(out, p = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = p[0];
      wasm._tempMemFloat[1] = p[1];
      wasm._tempMemFloat[2] = p[2];
      wasm._wl_object_transformPointWorld(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a point by this object's local transform.
     *
     * @param out Out point.
     * @param p Point to transform, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformPointLocal(out, p = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = p[0];
      wasm._tempMemFloat[1] = p[1];
      wasm._tempMemFloat[2] = p[2];
      wasm._wl_object_transformPointLocal(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a vector by this object's inverse world transform.
     *
     * @param out Out vector.
     * @param v Vector to transform, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformVectorInverseWorld(out, v = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = v[0];
      wasm._tempMemFloat[1] = v[1];
      wasm._tempMemFloat[2] = v[2];
      wasm._wl_object_transformVectorInverseWorld(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a vector by this object's inverse local transform.
     *
     * @param out Out vector
     * @param v Vector to transform, default `out`
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformVectorInverseLocal(out, v = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = v[0];
      wasm._tempMemFloat[1] = v[1];
      wasm._tempMemFloat[2] = v[2];
      wasm._wl_object_transformVectorInverseLocal(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a point by this object's inverse world transform.
     *
     * @param out Out point.
     * @param p Point to transform, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformPointInverseWorld(out, p = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat[0] = p[0];
      wasm._tempMemFloat[1] = p[1];
      wasm._tempMemFloat[2] = p[2];
      wasm._wl_object_transformPointInverseWorld(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform a point by this object's inverse local transform.
     *
     * @param out Out point.
     * @param p Point to transform, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    transformPointInverseLocal(out, p = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat.set(p);
      wasm._wl_object_transformPointInverseLocal(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    /**
     * Transform an object space dual quaternion into world space.
     *
     * @param out Out transformation.
     * @param q Local space transformation, default `out`.
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    toWorldSpaceTransform(out, q2 = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat.set(q2);
      wasm._wl_object_toWorldSpaceTransform(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      out[4] = wasm._tempMemFloat[4];
      out[5] = wasm._tempMemFloat[5];
      out[6] = wasm._tempMemFloat[6];
      out[7] = wasm._tempMemFloat[7];
      return out;
    }
    /**
     * Transform a world space dual quaternion into local space.
     *
     * @param out Out transformation
     * @param q World space transformation, default `out`
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    toLocalSpaceTransform(out, q2 = out) {
      const p = this.parent;
      if (p) {
        p.toObjectSpaceTransform(out, q2);
        return out;
      }
      if (out !== q2) {
        out[0] = q2[0];
        out[1] = q2[1];
        out[2] = q2[2];
        out[3] = q2[3];
        out[4] = q2[4];
        out[5] = q2[5];
        out[6] = q2[6];
        out[7] = q2[7];
      }
      return out;
    }
    /**
     * Transform a world space dual quaternion into object space.
     *
     * @param out Out transformation.
     * @param q World space transformation, default `out`
     * @return The `out` parameter.
     *
     * @since 0.8.7
     */
    toObjectSpaceTransform(out, q2 = out) {
      const wasm = this._engine.wasm;
      wasm._tempMemFloat.set(q2);
      wasm._wl_object_toObjectSpaceTransform(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      out[4] = wasm._tempMemFloat[4];
      out[5] = wasm._tempMemFloat[5];
      out[6] = wasm._tempMemFloat[6];
      out[7] = wasm._tempMemFloat[7];
      return out;
    }
    /**
     * Turn towards / look at target.
     *
     * Rotates the object so that its forward vector faces towards the target
     * position. The `up` vector acts as a hint to uniquely orient the object's
     * up direction. When orienting a view component, the projected `up` vector
     * faces upwards on the viewing plane.
     *
     * @param p Target position to turn towards, in world space.
     * @param up Up vector to align object with, in world space. Default is `[0, 1, 0]`.
     *
     * @returns Reference to self (for method chaining).
     */
    lookAt(p, up = UP_VECTOR) {
      this._engine.wasm._wl_object_lookAt(this._id, p[0], p[1], p[2], up[0], up[1], up[2]);
      return this;
    }
    /** Destroy the object with all of its components and remove it from the scene */
    destroy() {
      if (this._id < 0)
        return;
      this.engine.wasm._wl_object_remove(this._id);
      this.scene._destroyObject(this);
    }
    /**
     * Mark transformation dirty.
     *
     * Causes an eventual recalculation of {@link transformWorld}, either
     * on next {@link getTranslationWorld}, {@link transformWorld} or
     * {@link scalingWorld} or the beginning of next frame, whichever
     * happens first.
     */
    setDirty() {
      this._engine.wasm._wl_object_set_dirty(this._id);
    }
    /**
     * Disable/enable all components of this object.
     *
     * @param b New state for the components.
     *
     * @since 0.8.5
     */
    set active(b) {
      const comps = this.getComponents();
      for (let c of comps) {
        c.active = b;
      }
    }
    getComponent(typeOrClass, index = 0) {
      const wasm = this._engine.wasm;
      const type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;
      const scene = this._scene;
      const componentType = wasm._wl_scene_get_component_manager_index(scene._index, wasm.tempUTF8(type));
      if (componentType < 0) {
        const typeIndex = wasm._componentTypeIndices[type];
        if (typeIndex === void 0)
          return null;
        const jsIndex = wasm._wl_get_js_component_index(this._id, typeIndex, index);
        if (jsIndex < 0)
          return null;
        const component = this._scene._jsComponents[jsIndex];
        return component.constructor !== BrokenComponent ? component : null;
      }
      const componentId = wasm._wl_get_component_id(this._id, componentType, index);
      return scene._components.wrapNative(componentType, componentId);
    }
    getComponents(typeOrClass) {
      const wasm = this._engine.wasm;
      const scene = this._scene;
      let manager = null;
      let type = null;
      if (typeOrClass) {
        type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;
        const nativeManager = scene._components.getNativeManager(type);
        manager = nativeManager !== null ? nativeManager : scene._components.js;
      }
      const components = [];
      const maxComps = Math.floor(wasm._tempMemSize / 3 * 2);
      const componentsCount = wasm._wl_object_get_components(this._id, wasm._tempMem, maxComps);
      const offset2 = 2 * componentsCount;
      wasm._wl_object_get_component_types(this._id, wasm._tempMem + offset2, maxComps);
      for (let i = 0; i < componentsCount; ++i) {
        const t = wasm._tempMemUint8[i + offset2];
        const componentId = wasm._tempMemUint16[i];
        if (manager !== null && t !== manager)
          continue;
        const comp = this._scene._components.wrapAny(t, componentId);
        if (comp)
          components.push(comp);
      }
      return components;
    }
    addComponent(typeOrClass, params) {
      const wasm = this._engine.wasm;
      const type = isString(typeOrClass) ? typeOrClass : typeOrClass.TypeName;
      const nativeManager = this._scene._components.getNativeManager(type);
      const isNative = nativeManager !== null;
      const manager = isNative ? nativeManager : this._scene._components.js;
      let componentId = -1;
      if (!isNative) {
        if (!(type in wasm._componentTypeIndices)) {
          throw new TypeError("Unknown component type '" + type + "'");
        }
        componentId = wasm._wl_object_add_js_component(this._id, wasm._componentTypeIndices[type]);
      } else {
        componentId = wasm._wl_object_add_component(this._id, manager);
      }
      const component = this._scene._components.wrapAny(manager, componentId);
      if (params !== void 0)
        component.copy(params);
      if (!isNative) {
        component._triggerInit();
      }
      if (!params || !("active" in params && !params.active)) {
        component.active = true;
      }
      return component;
    }
    /**
     * Search for descendants matching the name.
     *
     * This method is a wrapper around {@link Object3D.findByNameDirect} and
     * {@link Object3D.findByNameRecursive}.
     *
     * @param name The name to search for.
     * @param recursive If `true`, the method will look at all the descendants of this object.
     *     If `false`, this method will only perform the search in direct children.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.1.0
     */
    findByName(name, recursive = false) {
      return recursive ? this.findByNameRecursive(name) : this.findByNameDirect(name);
    }
    /**
     * Search for all **direct** children matching the name.
     *
     * @note Even though this method is heavily optimized, it does perform
     * a linear search to find the objects. Do not use in a hot path.
     *
     * @param name The name to search for.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.1.0
     */
    findByNameDirect(name) {
      const wasm = this._engine.wasm;
      const id = this._id;
      const tempSizeU16 = wasm._tempMemSize >> 2;
      const maxCount = tempSizeU16 - 2;
      const buffer = wasm._tempMemUint16;
      buffer[maxCount] = 0;
      buffer[maxCount + 1] = 0;
      const bufferPtr = wasm._tempMem;
      const indexPtr = bufferPtr + maxCount * 2;
      const childCountPtr = bufferPtr + maxCount * 2 + 2;
      const namePtr = wasm.tempUTF8(name, (maxCount + 2) * 2);
      const result = [];
      let read = 0;
      while (read = wasm._wl_object_findByName(id, namePtr, indexPtr, childCountPtr, bufferPtr, maxCount)) {
        for (let i = 0; i < read; ++i) {
          result.push(this._scene.wrap(buffer[i]));
        }
      }
      return result;
    }
    /**
     * Search for **all descendants** matching the name.
     *
     * @note Even though this method is heavily optimized, it does perform
     * a linear search to find the objects. Do not use in a hot path.
     *
     * @param name The name to search for.
     * @returns An array of {@link Object3D} matching the name.
     *
     * @since 1.1.0
     */
    findByNameRecursive(name) {
      const wasm = this._engine.wasm;
      const id = this._id;
      const tempSizeU16 = wasm._tempMemSize >> 2;
      const maxCount = tempSizeU16 - 1;
      const buffer = wasm._tempMemUint16;
      buffer[maxCount] = 0;
      const bufferPtr = wasm._tempMem;
      const indexPtr = bufferPtr + maxCount * 2;
      const namePtr = wasm.tempUTF8(name, (maxCount + 1) * 2);
      let read = 0;
      const result = [];
      while (read = wasm._wl_object_findByNameRecursive(id, namePtr, indexPtr, bufferPtr, maxCount)) {
        for (let i = 0; i < read; ++i) {
          result.push(this._scene.wrap(buffer[i]));
        }
      }
      return result;
    }
    /**
     * Whether given object's transformation has changed.
     */
    get changed() {
      return !!this._engine.wasm._wl_object_is_changed(this._id);
    }
    /**
     * `true` if the object is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a custom property will not work:
     *
     * ```js
     * engine.erasePrototypeOnDestroy = true;
     *
     * const obj = scene.addObject();
     * obj.customParam = 'Hello World!';
     *
     * console.log(obj.isDestroyed); // Prints `false`
     * obj.destroy();
     * console.log(obj.isDestroyed); // Prints `true`
     * console.log(obj.customParam); // Throws an error
     * ```
     *
     * @since 1.1.1
     */
    get isDestroyed() {
      return this._id < 0;
    }
    /**
     * Checks equality by comparing ids and **not** the JavaScript reference.
     *
     * @deprecate Use JavaScript reference comparison instead:
     *
     * ```js
     * const objectA = scene.addObject();
     * const objectB = scene.addObject();
     * const objectC = objectB;
     * console.log(objectA === objectB); // false
     * console.log(objectA === objectA); // true
     * console.log(objectB === objectC); // true
     * ```
     */
    equals(otherObject) {
      if (!otherObject)
        return false;
      return this._id == otherObject._id;
    }
    /** @overload */
    toString() {
      if (this.isDestroyed) {
        return "Object3D(destroyed)";
      }
      return `Object3D('${this.name}', ${this._localId})`;
    }
  };
  var Skin = class extends SceneResource {
    constructor(host, index) {
      const scene = host instanceof SceneLike ? host : host.scene;
      super(scene, index);
    }
    /** Amount of joints in this skin. */
    get jointCount() {
      return this.engine.wasm._wl_skin_get_joint_count(this._id);
    }
    /** Joints object ids for this skin */
    get jointIds() {
      const wasm = this.engine.wasm;
      return new Uint16Array(wasm.HEAPU16.buffer, wasm._wl_skin_joint_ids(this._id), this.jointCount);
    }
    /**
     * Dual quaternions in a flat array of size 8 times {@link jointCount}.
     *
     * Inverse bind transforms of the skin.
     */
    get inverseBindTransforms() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_transforms(this._id), 8 * this.jointCount);
    }
    /**
     * Vectors in a flat array of size 3 times {@link jointCount}.
     *
     * Inverse bind scalings of the skin.
     */
    get inverseBindScalings() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_scalings(this._id), 3 * this.jointCount);
    }
  };
  var MorphTargets = class extends SceneResource {
    /** Amount of targets in this morph target set. */
    get count() {
      return this.engine.wasm._wl_morph_targets_get_target_count(this._id);
    }
    /** Returns the name of a given target */
    getTargetName(target) {
      if (target >= this.count) {
        throw new Error(`Index ${target} is out of bounds for ${this.count} targets`);
      }
      const wasm = this.engine.wasm;
      return wasm.UTF8ToString(wasm._wl_morph_targets_get_target_name(this._id, target));
    }
    /**
     * Get the index for a given target name.
     *
     * Throws if no target with that name exists.
     *
     * @param name Name of the target.
     */
    getTargetIndex(name) {
      const wasm = this.engine.wasm;
      const index = wasm._wl_morph_targets_get_target_index(this._id, wasm.tempUTF8(name));
      if (index === -1) {
        throw Error(`Missing target '${name}'`);
      }
      return index;
    }
  };
  var RayHit = class {
    /** Scene instance. @hidden */
    _scene;
    /** Pointer to the memory heap. */
    _ptr;
    /**
     * @param ptr Pointer to the ray hits memory.
     */
    constructor(scene, ptr) {
      if ((ptr & 3) !== 0) {
        throw new Error("Misaligned pointer: please report a bug");
      }
      this._scene = scene;
      this._ptr = ptr;
    }
    getLocations(out) {
      out = out ?? Array.from({ length: this.hitCount }, () => new Float32Array(3));
      const wasm = this.engine.wasm;
      const alignedPtr = this._ptr / 4;
      for (let i = 0; i < this.hitCount; ++i) {
        const locationPtr = alignedPtr + 3 * i;
        out[i][0] = wasm.HEAPF32[locationPtr];
        out[i][1] = wasm.HEAPF32[locationPtr + 1];
        out[i][2] = wasm.HEAPF32[locationPtr + 2];
      }
      return out;
    }
    getNormals(out) {
      out = out ?? Array.from({ length: this.hitCount }, () => new Float32Array(3));
      const wasm = this.engine.wasm;
      const alignedPtr = (this._ptr + 48) / 4;
      for (let i = 0; i < this.hitCount; ++i) {
        const normalPtr = alignedPtr + 3 * i;
        out[i][0] = wasm.HEAPF32[normalPtr];
        out[i][1] = wasm.HEAPF32[normalPtr + 1];
        out[i][2] = wasm.HEAPF32[normalPtr + 2];
      }
      return out;
    }
    getDistances(out = new Float32Array(this.hitCount)) {
      const wasm = this.engine.wasm;
      const alignedPtr = (this._ptr + 48 * 2) / 4;
      for (let i = 0; i < this.hitCount; ++i) {
        const distancePtr = alignedPtr + i;
        out[i] = wasm.HEAPF32[distancePtr];
      }
      return out;
    }
    /**
     * Array of hit objects.
     *
     * @param out Destination array/vector, expected to have at least `this.hitCount` elements.
     * @returns The `out` parameter.
     */
    getObjects(out = new Array(this.hitCount)) {
      const HEAPU16 = this.engine.wasm.HEAPU16;
      const alignedPtr = this._ptr + (48 * 2 + 16) >> 1;
      for (let i = 0; i < this.hitCount; ++i) {
        out[i] = this._scene.wrap(HEAPU16[alignedPtr + i]);
      }
      return out;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._scene.engine;
    }
    /**
     * Equivalent to {@link RayHit.getLocations}.
     *
     * @note Prefer to use {@link RayHit.getLocations} for performance.
     */
    get locations() {
      return this.getLocations();
    }
    /**
     * Equivalent to {@link RayHit.getNormals}.
     *
     * @note Prefer to use {@link RayHit.getNormals} for performance.
     */
    get normals() {
      return this.getNormals();
    }
    /**
     * Equivalent to {@link RayHit.getDistances}.
     *
     * @note Prefer to use {@link RayHit.getDistances} for performance.
     */
    get distances() {
      return this.getDistances();
    }
    /**
     * Equivalent to {@link RayHit.getObjects}.
     *
     * @note Prefer to use {@link RayHit.getObjects} for performance.
     */
    get objects() {
      const objects = [null, null, null, null];
      return this.getObjects(objects);
    }
    /** Number of hits (max 4) */
    get hitCount() {
      return Math.min(this.engine.wasm.HEAPU32[this._ptr / 4 + 30], 4);
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/logger.js
  var LogLevel;
  (function(LogLevel2) {
    LogLevel2[LogLevel2["Info"] = 0] = "Info";
    LogLevel2[LogLevel2["Warn"] = 1] = "Warn";
    LogLevel2[LogLevel2["Error"] = 2] = "Error";
  })(LogLevel || (LogLevel = {}));

  // node_modules/@wonderlandengine/api/dist/wasm.js
  var _componentDefaults = /* @__PURE__ */ new Map([
    [Type.Bool, false],
    [Type.Int, 0],
    [Type.Float, 0],
    [Type.String, ""],
    [Type.Enum, void 0],
    [Type.Object, null],
    [Type.Mesh, null],
    [Type.Texture, null],
    [Type.Material, null],
    [Type.Animation, null],
    [Type.Skin, null],
    [Type.Color, [0, 0, 0, 1]]
  ]);

  // node_modules/@sorskoot/wonderland-components/dist/components/flipbook.js
  var __decorate2 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DynamicTextureCache = class {
    textures;
    engine;
    constructor(engine) {
      this.textures = {};
      this.engine = engine;
    }
    loadTextures(url, columns, rows) {
      if (!this.textures.hasOwnProperty(url)) {
        this.textures[url] = new Promise((resolve, reject) => {
          let image = new Image();
          let textures = [];
          image.src = url;
          image.onload = () => {
            let canvas2 = document.createElement("canvas");
            let context2 = canvas2.getContext("2d");
            if (context2 == null)
              reject("Could not get context");
            canvas2.width = image.width;
            canvas2.height = image.height;
            context2.drawImage(image, 0, 0);
            let spriteWidth = image.width / columns;
            let spriteHeight = image.height / rows;
            for (let y = 0; y < rows; y++) {
              for (let x = 0; x < columns; x++) {
                let pc = this.copyPartOfCanvas(canvas2, x * spriteWidth, y * spriteHeight, spriteWidth, spriteHeight);
                let texturePc = new Texture(this.engine, pc);
                textures.push(texturePc);
              }
            }
            resolve(textures);
          };
        });
      }
      return this.textures[url];
    }
    copyPartOfCanvas(canvas2, x, y, width, height) {
      let copy6 = document.createElement("canvas");
      copy6.width = width;
      copy6.height = height;
      let ctx2 = copy6.getContext("2d");
      ctx2.drawImage(canvas2, x, y, width, height, 0, 0, width, height);
      return copy6;
    }
  };
  var textureCache;
  var Flipbook = class extends Component {
    base;
    url = "";
    urlEmissive = "";
    columns = 4;
    rows = 4;
    speed = 8;
    textures = [];
    loaded = false;
    index = 0;
    init() {
      if (!textureCache) {
        textureCache = new DynamicTextureCache(this.engine);
      }
      let texturesPromises = [];
      texturesPromises.push(textureCache.loadTextures(this.url, this.columns, this.rows));
      if (this.urlEmissive) {
        texturesPromises.push(textureCache.loadTextures(this.urlEmissive, this.columns, this.rows));
      }
      Promise.all(texturesPromises).then((tex) => {
        this.textures = [];
        if (this.urlEmissive) {
          for (let i = 0; i < tex[0].length; i++) {
            this.textures.push(this.createMaterial(this.base, tex[0][i], tex[1][i]));
          }
        } else {
          for (let i = 0; i < tex[0].length; i++) {
            this.textures.push(this.createMaterial(this.base, tex[0][i]));
          }
        }
        this.loaded = true;
        this.index = Math.floor(Math.random() * this.textures.length);
      });
    }
    createMaterial(base, texture, emissiveTexture = null) {
      const mat = base.clone();
      if (!mat)
        throw new Error("Could not clone material");
      if (mat.pipeline == "Flat Opaque Textured" || mat.pipeline.startsWith("FlatSorskoot")) {
        const flatMat = mat;
        flatMat.flatTexture = texture;
        if (mat.pipeline == "FlatSorskoot Emissive") {
          flatMat.flatTexture = texture;
          if (emissiveTexture) {
            flatMat.emissiveTexture = emissiveTexture;
          }
        }
      } else {
        console.error(`Pipeline ${mat.pipeline} not supported by flipbook`);
      }
      return mat;
    }
    mat = null;
    t = 0;
    start() {
      this.mat = this.object.getComponent(MeshComponent);
      this.t = Math.random() * this.speed;
    }
    previousIndex = -1;
    update(dt) {
      if (!this.loaded)
        return;
      this.t += dt * this.speed;
      this.index = ~~this.t % this.textures.length;
      if (this.textures && this.textures.length && this.previousIndex != this.index && this.mat) {
        this.previousIndex = this.index;
        this.mat.material = this.textures[this.index];
      }
    }
  };
  __publicField(Flipbook, "TypeName", "flipbook");
  __decorate2([
    property.material()
  ], Flipbook.prototype, "base", void 0);
  __decorate2([
    property.string("")
  ], Flipbook.prototype, "url", void 0);
  __decorate2([
    property.string("")
  ], Flipbook.prototype, "urlEmissive", void 0);
  __decorate2([
    property.int(4)
  ], Flipbook.prototype, "columns", void 0);
  __decorate2([
    property.int(4)
  ], Flipbook.prototype, "rows", void 0);
  __decorate2([
    property.float(8)
  ], Flipbook.prototype, "speed", void 0);

  // node_modules/@sorskoot/wonderland-components/dist/components/prefab.js
  var __decorate3 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var Prefab = class extends Component {
    name;
  };
  __publicField(Prefab, "TypeName", "prefab");
  __decorate3([
    property.string()
  ], Prefab.prototype, "name", void 0);

  // node_modules/@sorskoot/wonderland-components/dist/components/prefab-storage.js
  var PrefabStorage = class extends Component {
    prefabs = {};
    start() {
      let children = this.object.children;
      for (let i = 0; i < children.length; i++) {
        let child = children[i];
        let childPrefab = child.getComponent(Prefab);
        if (childPrefab) {
          this.prefabs[childPrefab.name] = child;
          child.setPositionWorld([-1e3, -1e3, -1e3]);
        }
      }
    }
    /**
     * Instantiate a prefab.
     *
     * @param {string} prefabName Name of the prefab to instantiate.
     * @param {Object3D} parentObject The object to parent the prefab to after instantiation.
     * @returns {Object3D|undefined} The root of the instantiated prefab.
     */
    instantiate(prefabName, parentObject) {
      let prefab = this.prefabs[prefabName];
      if (!prefab) {
        console.error("trying to create " + prefabName + " but that is not a registerd prefab");
        return;
      }
      let obj = this.engine.scene.addObject(parentObject);
      obj.name = prefabName;
      obj.scaleLocal(prefab.getScalingLocal());
      obj.setTransformLocal(prefab.getTransformLocal());
      var prefabMesh = prefab.getComponent(MeshComponent);
      if (prefabMesh) {
        let newMesh = obj.addComponent(MeshComponent);
        if (!newMesh) {
          console.error("mesh component could not be added to object");
          return;
        }
        newMesh.mesh = prefabMesh.mesh;
        newMesh.material = prefabMesh.material;
      }
      var prefabCollision = prefab.getComponent(CollisionComponent);
      if (prefabCollision) {
        let newCollision = obj.addComponent(CollisionComponent);
        if (!newCollision) {
          console.error("collision component could not be added to object");
          return;
        }
        newCollision.collider = prefabCollision.collider;
        newCollision.extents = prefabCollision.extents;
        newCollision.group = prefabCollision.group;
      }
      obj.setDirty();
      return obj;
    }
  };
  __publicField(PrefabStorage, "TypeName", "prefab-storage");

  // node_modules/@sorskoot/wonderland-components/dist/components/shootBase.js
  var __decorate4 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var handedness = ["left", "right"];
  var ShootBase = class extends Component {
    haptics = true;
    handedness = 0;
    initialized = false;
    start() {
      this.initialized = false;
      this.engine.onXRSessionStart.add((session) => {
        if (this.initialized)
          return;
        session.addEventListener("select", (e) => {
          if (!this.active)
            return;
          if (e.inputSource.handedness === handedness[this.handedness]) {
            if (this.haptics) {
              this.pulse(e.inputSource.gamepad);
            }
            this.shoot(this.object.getPositionWorld(), this.object.getRotationWorld());
          }
        });
        this.initialized = true;
      });
    }
    pulse(gamepad) {
      var actuator;
      if (!gamepad || !gamepad.hapticActuators) {
        return;
      }
      actuator = gamepad.hapticActuators[0];
      if (!actuator)
        return;
      actuator.pulse(1, 100);
    }
    shoot(transform, rotation) {
    }
  };
  __publicField(ShootBase, "TypeName", "shoot-base");
  __decorate4([
    property.bool(true)
  ], ShootBase.prototype, "haptics", void 0);
  __decorate4([
    property.enum(["Left", "Right"])
  ], ShootBase.prototype, "handedness", void 0);

  // node_modules/gl-matrix/esm/common.js
  var EPSILON = 1e-6;
  var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
  var RANDOM = Math.random;
  var degree = Math.PI / 180;
  if (!Math.hypot)
    Math.hypot = function() {
      var y = 0, i = arguments.length;
      while (i--) {
        y += arguments[i] * arguments[i];
      }
      return Math.sqrt(y);
    };

  // node_modules/gl-matrix/esm/mat3.js
  function create() {
    var out = new ARRAY_TYPE(9);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[5] = 0;
      out[6] = 0;
      out[7] = 0;
    }
    out[0] = 1;
    out[4] = 1;
    out[8] = 1;
    return out;
  }

  // node_modules/gl-matrix/esm/mat4.js
  var mat4_exports = {};
  __export(mat4_exports, {
    add: () => add,
    adjoint: () => adjoint,
    clone: () => clone,
    copy: () => copy,
    create: () => create2,
    determinant: () => determinant,
    equals: () => equals,
    exactEquals: () => exactEquals,
    frob: () => frob,
    fromQuat: () => fromQuat,
    fromQuat2: () => fromQuat2,
    fromRotation: () => fromRotation,
    fromRotationTranslation: () => fromRotationTranslation,
    fromRotationTranslationScale: () => fromRotationTranslationScale,
    fromRotationTranslationScaleOrigin: () => fromRotationTranslationScaleOrigin,
    fromScaling: () => fromScaling,
    fromTranslation: () => fromTranslation,
    fromValues: () => fromValues,
    fromXRotation: () => fromXRotation,
    fromYRotation: () => fromYRotation,
    fromZRotation: () => fromZRotation,
    frustum: () => frustum,
    getRotation: () => getRotation,
    getScaling: () => getScaling,
    getTranslation: () => getTranslation,
    identity: () => identity,
    invert: () => invert,
    lookAt: () => lookAt,
    mul: () => mul,
    multiply: () => multiply,
    multiplyScalar: () => multiplyScalar,
    multiplyScalarAndAdd: () => multiplyScalarAndAdd,
    ortho: () => ortho,
    orthoNO: () => orthoNO,
    orthoZO: () => orthoZO,
    perspective: () => perspective,
    perspectiveFromFieldOfView: () => perspectiveFromFieldOfView,
    perspectiveNO: () => perspectiveNO,
    perspectiveZO: () => perspectiveZO,
    rotate: () => rotate,
    rotateX: () => rotateX,
    rotateY: () => rotateY,
    rotateZ: () => rotateZ,
    scale: () => scale,
    set: () => set,
    str: () => str,
    sub: () => sub,
    subtract: () => subtract,
    targetTo: () => targetTo,
    translate: () => translate,
    transpose: () => transpose
  });
  function create2() {
    var out = new ARRAY_TYPE(16);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[4] = 0;
      out[6] = 0;
      out[7] = 0;
      out[8] = 0;
      out[9] = 0;
      out[11] = 0;
      out[12] = 0;
      out[13] = 0;
      out[14] = 0;
    }
    out[0] = 1;
    out[5] = 1;
    out[10] = 1;
    out[15] = 1;
    return out;
  }
  function clone(a) {
    var out = new ARRAY_TYPE(16);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function copy(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    var out = new ARRAY_TYPE(16);
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function identity(out) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function transpose(out, a) {
    if (out === a) {
      var a01 = a[1], a02 = a[2], a03 = a[3];
      var a12 = a[6], a13 = a[7];
      var a23 = a[11];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a01;
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a02;
      out[9] = a12;
      out[11] = a[14];
      out[12] = a03;
      out[13] = a13;
      out[14] = a23;
    } else {
      out[0] = a[0];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a[1];
      out[5] = a[5];
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a[2];
      out[9] = a[6];
      out[10] = a[10];
      out[11] = a[14];
      out[12] = a[3];
      out[13] = a[7];
      out[14] = a[11];
      out[15] = a[15];
    }
    return out;
  }
  function invert(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
    if (!det) {
      return null;
    }
    det = 1 / det;
    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
    return out;
  }
  function adjoint(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
    return out;
  }
  function determinant(a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  }
  function multiply(out, a, b) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[4];
    b1 = b[5];
    b2 = b[6];
    b3 = b[7];
    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[8];
    b1 = b[9];
    b2 = b[10];
    b3 = b[11];
    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[12];
    b1 = b[13];
    b2 = b[14];
    b3 = b[15];
    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    return out;
  }
  function translate(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    if (a === out) {
      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
    } else {
      a00 = a[0];
      a01 = a[1];
      a02 = a[2];
      a03 = a[3];
      a10 = a[4];
      a11 = a[5];
      a12 = a[6];
      a13 = a[7];
      a20 = a[8];
      a21 = a[9];
      a22 = a[10];
      a23 = a[11];
      out[0] = a00;
      out[1] = a01;
      out[2] = a02;
      out[3] = a03;
      out[4] = a10;
      out[5] = a11;
      out[6] = a12;
      out[7] = a13;
      out[8] = a20;
      out[9] = a21;
      out[10] = a22;
      out[11] = a23;
      out[12] = a00 * x + a10 * y + a20 * z + a[12];
      out[13] = a01 * x + a11 * y + a21 * z + a[13];
      out[14] = a02 * x + a12 * y + a22 * z + a[14];
      out[15] = a03 * x + a13 * y + a23 * z + a[15];
    }
    return out;
  }
  function scale(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    out[0] = a[0] * x;
    out[1] = a[1] * x;
    out[2] = a[2] * x;
    out[3] = a[3] * x;
    out[4] = a[4] * y;
    out[5] = a[5] * y;
    out[6] = a[6] * y;
    out[7] = a[7] * y;
    out[8] = a[8] * z;
    out[9] = a[9] * z;
    out[10] = a[10] * z;
    out[11] = a[11] * z;
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function rotate(out, a, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    var b00, b01, b02;
    var b10, b11, b12;
    var b20, b21, b22;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    b00 = x * x * t + c;
    b01 = y * x * t + z * s;
    b02 = z * x * t - y * s;
    b10 = x * y * t - z * s;
    b11 = y * y * t + c;
    b12 = z * y * t + x * s;
    b20 = x * z * t + y * s;
    b21 = y * z * t - x * s;
    b22 = z * z * t + c;
    out[0] = a00 * b00 + a10 * b01 + a20 * b02;
    out[1] = a01 * b00 + a11 * b01 + a21 * b02;
    out[2] = a02 * b00 + a12 * b01 + a22 * b02;
    out[3] = a03 * b00 + a13 * b01 + a23 * b02;
    out[4] = a00 * b10 + a10 * b11 + a20 * b12;
    out[5] = a01 * b10 + a11 * b11 + a21 * b12;
    out[6] = a02 * b10 + a12 * b11 + a22 * b12;
    out[7] = a03 * b10 + a13 * b11 + a23 * b12;
    out[8] = a00 * b20 + a10 * b21 + a20 * b22;
    out[9] = a01 * b20 + a11 * b21 + a21 * b22;
    out[10] = a02 * b20 + a12 * b21 + a22 * b22;
    out[11] = a03 * b20 + a13 * b21 + a23 * b22;
    if (a !== out) {
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    return out;
  }
  function rotateX(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[0] = a[0];
      out[1] = a[1];
      out[2] = a[2];
      out[3] = a[3];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[4] = a10 * c + a20 * s;
    out[5] = a11 * c + a21 * s;
    out[6] = a12 * c + a22 * s;
    out[7] = a13 * c + a23 * s;
    out[8] = a20 * c - a10 * s;
    out[9] = a21 * c - a11 * s;
    out[10] = a22 * c - a12 * s;
    out[11] = a23 * c - a13 * s;
    return out;
  }
  function rotateY(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[4] = a[4];
      out[5] = a[5];
      out[6] = a[6];
      out[7] = a[7];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c - a20 * s;
    out[1] = a01 * c - a21 * s;
    out[2] = a02 * c - a22 * s;
    out[3] = a03 * c - a23 * s;
    out[8] = a00 * s + a20 * c;
    out[9] = a01 * s + a21 * c;
    out[10] = a02 * s + a22 * c;
    out[11] = a03 * s + a23 * c;
    return out;
  }
  function rotateZ(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    if (a !== out) {
      out[8] = a[8];
      out[9] = a[9];
      out[10] = a[10];
      out[11] = a[11];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c + a10 * s;
    out[1] = a01 * c + a11 * s;
    out[2] = a02 * c + a12 * s;
    out[3] = a03 * c + a13 * s;
    out[4] = a10 * c - a00 * s;
    out[5] = a11 * c - a01 * s;
    out[6] = a12 * c - a02 * s;
    out[7] = a13 * c - a03 * s;
    return out;
  }
  function fromTranslation(out, v) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromScaling(out, v) {
    out[0] = v[0];
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = v[1];
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = v[2];
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotation(out, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    out[0] = x * x * t + c;
    out[1] = y * x * t + z * s;
    out[2] = z * x * t - y * s;
    out[3] = 0;
    out[4] = x * y * t - z * s;
    out[5] = y * y * t + c;
    out[6] = z * y * t + x * s;
    out[7] = 0;
    out[8] = x * z * t + y * s;
    out[9] = y * z * t - x * s;
    out[10] = z * z * t + c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromXRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = c;
    out[6] = s;
    out[7] = 0;
    out[8] = 0;
    out[9] = -s;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromYRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = 0;
    out[2] = -s;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = s;
    out[9] = 0;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromZRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = s;
    out[2] = 0;
    out[3] = 0;
    out[4] = -s;
    out[5] = c;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotationTranslation(out, q2, v) {
    var x = q2[0], y = q2[1], z = q2[2], w = q2[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - (yy + zz);
    out[1] = xy + wz;
    out[2] = xz - wy;
    out[3] = 0;
    out[4] = xy - wz;
    out[5] = 1 - (xx + zz);
    out[6] = yz + wx;
    out[7] = 0;
    out[8] = xz + wy;
    out[9] = yz - wx;
    out[10] = 1 - (xx + yy);
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromQuat2(out, a) {
    var translation = new ARRAY_TYPE(3);
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
    var magnitude = bx * bx + by * by + bz * bz + bw * bw;
    if (magnitude > 0) {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
    } else {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    }
    fromRotationTranslation(out, a, translation);
    return out;
  }
  function getTranslation(out, mat) {
    out[0] = mat[12];
    out[1] = mat[13];
    out[2] = mat[14];
    return out;
  }
  function getScaling(out, mat) {
    var m11 = mat[0];
    var m12 = mat[1];
    var m13 = mat[2];
    var m21 = mat[4];
    var m22 = mat[5];
    var m23 = mat[6];
    var m31 = mat[8];
    var m32 = mat[9];
    var m33 = mat[10];
    out[0] = Math.hypot(m11, m12, m13);
    out[1] = Math.hypot(m21, m22, m23);
    out[2] = Math.hypot(m31, m32, m33);
    return out;
  }
  function getRotation(out, mat) {
    var scaling = new ARRAY_TYPE(3);
    getScaling(scaling, mat);
    var is1 = 1 / scaling[0];
    var is2 = 1 / scaling[1];
    var is3 = 1 / scaling[2];
    var sm11 = mat[0] * is1;
    var sm12 = mat[1] * is2;
    var sm13 = mat[2] * is3;
    var sm21 = mat[4] * is1;
    var sm22 = mat[5] * is2;
    var sm23 = mat[6] * is3;
    var sm31 = mat[8] * is1;
    var sm32 = mat[9] * is2;
    var sm33 = mat[10] * is3;
    var trace = sm11 + sm22 + sm33;
    var S = 0;
    if (trace > 0) {
      S = Math.sqrt(trace + 1) * 2;
      out[3] = 0.25 * S;
      out[0] = (sm23 - sm32) / S;
      out[1] = (sm31 - sm13) / S;
      out[2] = (sm12 - sm21) / S;
    } else if (sm11 > sm22 && sm11 > sm33) {
      S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
      out[3] = (sm23 - sm32) / S;
      out[0] = 0.25 * S;
      out[1] = (sm12 + sm21) / S;
      out[2] = (sm31 + sm13) / S;
    } else if (sm22 > sm33) {
      S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
      out[3] = (sm31 - sm13) / S;
      out[0] = (sm12 + sm21) / S;
      out[1] = 0.25 * S;
      out[2] = (sm23 + sm32) / S;
    } else {
      S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
      out[3] = (sm12 - sm21) / S;
      out[0] = (sm31 + sm13) / S;
      out[1] = (sm23 + sm32) / S;
      out[2] = 0.25 * S;
    }
    return out;
  }
  function fromRotationTranslationScale(out, q2, v, s) {
    var x = q2[0], y = q2[1], z = q2[2], w = q2[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    out[0] = (1 - (yy + zz)) * sx;
    out[1] = (xy + wz) * sx;
    out[2] = (xz - wy) * sx;
    out[3] = 0;
    out[4] = (xy - wz) * sy;
    out[5] = (1 - (xx + zz)) * sy;
    out[6] = (yz + wx) * sy;
    out[7] = 0;
    out[8] = (xz + wy) * sz;
    out[9] = (yz - wx) * sz;
    out[10] = (1 - (xx + yy)) * sz;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromRotationTranslationScaleOrigin(out, q2, v, s, o) {
    var x = q2[0], y = q2[1], z = q2[2], w = q2[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    var ox = o[0];
    var oy = o[1];
    var oz = o[2];
    var out0 = (1 - (yy + zz)) * sx;
    var out1 = (xy + wz) * sx;
    var out2 = (xz - wy) * sx;
    var out4 = (xy - wz) * sy;
    var out5 = (1 - (xx + zz)) * sy;
    var out6 = (yz + wx) * sy;
    var out8 = (xz + wy) * sz;
    var out9 = (yz - wx) * sz;
    var out10 = (1 - (xx + yy)) * sz;
    out[0] = out0;
    out[1] = out1;
    out[2] = out2;
    out[3] = 0;
    out[4] = out4;
    out[5] = out5;
    out[6] = out6;
    out[7] = 0;
    out[8] = out8;
    out[9] = out9;
    out[10] = out10;
    out[11] = 0;
    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
    out[15] = 1;
    return out;
  }
  function fromQuat(out, q2) {
    var x = q2[0], y = q2[1], z = q2[2], w = q2[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var yx = y * x2;
    var yy = y * y2;
    var zx = z * x2;
    var zy = z * y2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - yy - zz;
    out[1] = yx + wz;
    out[2] = zx - wy;
    out[3] = 0;
    out[4] = yx - wz;
    out[5] = 1 - xx - zz;
    out[6] = zy + wx;
    out[7] = 0;
    out[8] = zx + wy;
    out[9] = zy - wx;
    out[10] = 1 - xx - yy;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function frustum(out, left, right, bottom, top, near, far) {
    var rl = 1 / (right - left);
    var tb = 1 / (top - bottom);
    var nf = 1 / (near - far);
    out[0] = near * 2 * rl;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = near * 2 * tb;
    out[6] = 0;
    out[7] = 0;
    out[8] = (right + left) * rl;
    out[9] = (top + bottom) * tb;
    out[10] = (far + near) * nf;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near * 2 * nf;
    out[15] = 0;
    return out;
  }
  function perspectiveNO(out, fovy, aspect, near, far) {
    var f2 = 1 / Math.tan(fovy / 2), nf;
    out[0] = f2 / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f2;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = (far + near) * nf;
      out[14] = 2 * far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -2 * near;
    }
    return out;
  }
  var perspective = perspectiveNO;
  function perspectiveZO(out, fovy, aspect, near, far) {
    var f2 = 1 / Math.tan(fovy / 2), nf;
    out[0] = f2 / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f2;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = far * nf;
      out[14] = far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -near;
    }
    return out;
  }
  function perspectiveFromFieldOfView(out, fov, near, far) {
    var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
    var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
    var xScale = 2 / (leftTan + rightTan);
    var yScale = 2 / (upTan + downTan);
    out[0] = xScale;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = yScale;
    out[6] = 0;
    out[7] = 0;
    out[8] = -((leftTan - rightTan) * xScale * 0.5);
    out[9] = (upTan - downTan) * yScale * 0.5;
    out[10] = far / (near - far);
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near / (near - far);
    out[15] = 0;
    return out;
  }
  function orthoNO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 2 * nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = (far + near) * nf;
    out[15] = 1;
    return out;
  }
  var ortho = orthoNO;
  function orthoZO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = near * nf;
    out[15] = 1;
    return out;
  }
  function lookAt(out, eye, center, up) {
    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len4;
    var eyex = eye[0];
    var eyey = eye[1];
    var eyez = eye[2];
    var upx = up[0];
    var upy = up[1];
    var upz = up[2];
    var centerx = center[0];
    var centery = center[1];
    var centerz = center[2];
    if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
      return identity(out);
    }
    z0 = eyex - centerx;
    z1 = eyey - centery;
    z2 = eyez - centerz;
    len4 = 1 / Math.hypot(z0, z1, z2);
    z0 *= len4;
    z1 *= len4;
    z2 *= len4;
    x0 = upy * z2 - upz * z1;
    x1 = upz * z0 - upx * z2;
    x2 = upx * z1 - upy * z0;
    len4 = Math.hypot(x0, x1, x2);
    if (!len4) {
      x0 = 0;
      x1 = 0;
      x2 = 0;
    } else {
      len4 = 1 / len4;
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    y0 = z1 * x2 - z2 * x1;
    y1 = z2 * x0 - z0 * x2;
    y2 = z0 * x1 - z1 * x0;
    len4 = Math.hypot(y0, y1, y2);
    if (!len4) {
      y0 = 0;
      y1 = 0;
      y2 = 0;
    } else {
      len4 = 1 / len4;
      y0 *= len4;
      y1 *= len4;
      y2 *= len4;
    }
    out[0] = x0;
    out[1] = y0;
    out[2] = z0;
    out[3] = 0;
    out[4] = x1;
    out[5] = y1;
    out[6] = z1;
    out[7] = 0;
    out[8] = x2;
    out[9] = y2;
    out[10] = z2;
    out[11] = 0;
    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
    out[15] = 1;
    return out;
  }
  function targetTo(out, eye, target, up) {
    var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
    var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
    var len4 = z0 * z0 + z1 * z1 + z2 * z2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      z0 *= len4;
      z1 *= len4;
      z2 *= len4;
    }
    var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
    len4 = x0 * x0 + x1 * x1 + x2 * x2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    out[0] = x0;
    out[1] = x1;
    out[2] = x2;
    out[3] = 0;
    out[4] = z1 * x2 - z2 * x1;
    out[5] = z2 * x0 - z0 * x2;
    out[6] = z0 * x1 - z1 * x0;
    out[7] = 0;
    out[8] = z0;
    out[9] = z1;
    out[10] = z2;
    out[11] = 0;
    out[12] = eyex;
    out[13] = eyey;
    out[14] = eyez;
    out[15] = 1;
    return out;
  }
  function str(a) {
    return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
  }
  function frob(a) {
    return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
  }
  function add(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    out[8] = a[8] + b[8];
    out[9] = a[9] + b[9];
    out[10] = a[10] + b[10];
    out[11] = a[11] + b[11];
    out[12] = a[12] + b[12];
    out[13] = a[13] + b[13];
    out[14] = a[14] + b[14];
    out[15] = a[15] + b[15];
    return out;
  }
  function subtract(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    out[3] = a[3] - b[3];
    out[4] = a[4] - b[4];
    out[5] = a[5] - b[5];
    out[6] = a[6] - b[6];
    out[7] = a[7] - b[7];
    out[8] = a[8] - b[8];
    out[9] = a[9] - b[9];
    out[10] = a[10] - b[10];
    out[11] = a[11] - b[11];
    out[12] = a[12] - b[12];
    out[13] = a[13] - b[13];
    out[14] = a[14] - b[14];
    out[15] = a[15] - b[15];
    return out;
  }
  function multiplyScalar(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    out[8] = a[8] * b;
    out[9] = a[9] * b;
    out[10] = a[10] * b;
    out[11] = a[11] * b;
    out[12] = a[12] * b;
    out[13] = a[13] * b;
    out[14] = a[14] * b;
    out[15] = a[15] * b;
    return out;
  }
  function multiplyScalarAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    out[3] = a[3] + b[3] * scale6;
    out[4] = a[4] + b[4] * scale6;
    out[5] = a[5] + b[5] * scale6;
    out[6] = a[6] + b[6] * scale6;
    out[7] = a[7] + b[7] * scale6;
    out[8] = a[8] + b[8] * scale6;
    out[9] = a[9] + b[9] * scale6;
    out[10] = a[10] + b[10] * scale6;
    out[11] = a[11] + b[11] * scale6;
    out[12] = a[12] + b[12] * scale6;
    out[13] = a[13] + b[13] * scale6;
    out[14] = a[14] + b[14] * scale6;
    out[15] = a[15] + b[15] * scale6;
    return out;
  }
  function exactEquals(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
  }
  function equals(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
    var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
    var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
  }
  var mul = multiply;
  var sub = subtract;

  // node_modules/gl-matrix/esm/quat.js
  var quat_exports = {};
  __export(quat_exports, {
    add: () => add4,
    calculateW: () => calculateW,
    clone: () => clone4,
    conjugate: () => conjugate,
    copy: () => copy4,
    create: () => create5,
    dot: () => dot3,
    equals: () => equals4,
    exactEquals: () => exactEquals4,
    exp: () => exp,
    fromEuler: () => fromEuler,
    fromMat3: () => fromMat3,
    fromValues: () => fromValues4,
    getAngle: () => getAngle,
    getAxisAngle: () => getAxisAngle,
    identity: () => identity2,
    invert: () => invert2,
    len: () => len2,
    length: () => length3,
    lerp: () => lerp3,
    ln: () => ln,
    mul: () => mul3,
    multiply: () => multiply3,
    normalize: () => normalize3,
    pow: () => pow,
    random: () => random2,
    rotateX: () => rotateX3,
    rotateY: () => rotateY3,
    rotateZ: () => rotateZ3,
    rotationTo: () => rotationTo,
    scale: () => scale4,
    set: () => set4,
    setAxes: () => setAxes,
    setAxisAngle: () => setAxisAngle,
    slerp: () => slerp,
    sqlerp: () => sqlerp,
    sqrLen: () => sqrLen2,
    squaredLength: () => squaredLength3,
    str: () => str3
  });

  // node_modules/gl-matrix/esm/vec3.js
  var vec3_exports = {};
  __export(vec3_exports, {
    add: () => add2,
    angle: () => angle,
    bezier: () => bezier,
    ceil: () => ceil,
    clone: () => clone2,
    copy: () => copy2,
    create: () => create3,
    cross: () => cross,
    dist: () => dist,
    distance: () => distance,
    div: () => div,
    divide: () => divide,
    dot: () => dot,
    equals: () => equals2,
    exactEquals: () => exactEquals2,
    floor: () => floor,
    forEach: () => forEach,
    fromValues: () => fromValues2,
    hermite: () => hermite,
    inverse: () => inverse,
    len: () => len,
    length: () => length,
    lerp: () => lerp,
    max: () => max,
    min: () => min,
    mul: () => mul2,
    multiply: () => multiply2,
    negate: () => negate,
    normalize: () => normalize,
    random: () => random,
    rotateX: () => rotateX2,
    rotateY: () => rotateY2,
    rotateZ: () => rotateZ2,
    round: () => round,
    scale: () => scale2,
    scaleAndAdd: () => scaleAndAdd,
    set: () => set2,
    sqrDist: () => sqrDist,
    sqrLen: () => sqrLen,
    squaredDistance: () => squaredDistance,
    squaredLength: () => squaredLength,
    str: () => str2,
    sub: () => sub2,
    subtract: () => subtract2,
    transformMat3: () => transformMat3,
    transformMat4: () => transformMat4,
    transformQuat: () => transformQuat,
    zero: () => zero
  });
  function create3() {
    var out = new ARRAY_TYPE(3);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    return out;
  }
  function clone2(a) {
    var out = new ARRAY_TYPE(3);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function length(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return Math.hypot(x, y, z);
  }
  function fromValues2(x, y, z) {
    var out = new ARRAY_TYPE(3);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function copy2(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function set2(out, x, y, z) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function add2(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    return out;
  }
  function subtract2(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    return out;
  }
  function multiply2(out, a, b) {
    out[0] = a[0] * b[0];
    out[1] = a[1] * b[1];
    out[2] = a[2] * b[2];
    return out;
  }
  function divide(out, a, b) {
    out[0] = a[0] / b[0];
    out[1] = a[1] / b[1];
    out[2] = a[2] / b[2];
    return out;
  }
  function ceil(out, a) {
    out[0] = Math.ceil(a[0]);
    out[1] = Math.ceil(a[1]);
    out[2] = Math.ceil(a[2]);
    return out;
  }
  function floor(out, a) {
    out[0] = Math.floor(a[0]);
    out[1] = Math.floor(a[1]);
    out[2] = Math.floor(a[2]);
    return out;
  }
  function min(out, a, b) {
    out[0] = Math.min(a[0], b[0]);
    out[1] = Math.min(a[1], b[1]);
    out[2] = Math.min(a[2], b[2]);
    return out;
  }
  function max(out, a, b) {
    out[0] = Math.max(a[0], b[0]);
    out[1] = Math.max(a[1], b[1]);
    out[2] = Math.max(a[2], b[2]);
    return out;
  }
  function round(out, a) {
    out[0] = Math.round(a[0]);
    out[1] = Math.round(a[1]);
    out[2] = Math.round(a[2]);
    return out;
  }
  function scale2(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    return out;
  }
  function scaleAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    return out;
  }
  function distance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return Math.hypot(x, y, z);
  }
  function squaredDistance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return x * x + y * y + z * z;
  }
  function squaredLength(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return x * x + y * y + z * z;
  }
  function negate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    return out;
  }
  function inverse(out, a) {
    out[0] = 1 / a[0];
    out[1] = 1 / a[1];
    out[2] = 1 / a[2];
    return out;
  }
  function normalize(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var len4 = x * x + y * y + z * z;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = a[0] * len4;
    out[1] = a[1] * len4;
    out[2] = a[2] * len4;
    return out;
  }
  function dot(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function cross(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2];
    var bx = b[0], by = b[1], bz = b[2];
    out[0] = ay * bz - az * by;
    out[1] = az * bx - ax * bz;
    out[2] = ax * by - ay * bx;
    return out;
  }
  function lerp(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    return out;
  }
  function hermite(out, a, b, c, d, t) {
    var factorTimes2 = t * t;
    var factor1 = factorTimes2 * (2 * t - 3) + 1;
    var factor2 = factorTimes2 * (t - 2) + t;
    var factor3 = factorTimes2 * (t - 1);
    var factor4 = factorTimes2 * (3 - 2 * t);
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function bezier(out, a, b, c, d, t) {
    var inverseFactor = 1 - t;
    var inverseFactorTimesTwo = inverseFactor * inverseFactor;
    var factorTimes2 = t * t;
    var factor1 = inverseFactorTimesTwo * inverseFactor;
    var factor2 = 3 * t * inverseFactorTimesTwo;
    var factor3 = 3 * factorTimes2 * inverseFactor;
    var factor4 = factorTimes2 * t;
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function random(out, scale6) {
    scale6 = scale6 || 1;
    var r = RANDOM() * 2 * Math.PI;
    var z = RANDOM() * 2 - 1;
    var zScale = Math.sqrt(1 - z * z) * scale6;
    out[0] = Math.cos(r) * zScale;
    out[1] = Math.sin(r) * zScale;
    out[2] = z * scale6;
    return out;
  }
  function transformMat4(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    var w = m[3] * x + m[7] * y + m[11] * z + m[15];
    w = w || 1;
    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
    return out;
  }
  function transformMat3(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x * m[0] + y * m[3] + z * m[6];
    out[1] = x * m[1] + y * m[4] + z * m[7];
    out[2] = x * m[2] + y * m[5] + z * m[8];
    return out;
  }
  function transformQuat(out, a, q2) {
    var qx = q2[0], qy = q2[1], qz = q2[2], qw = q2[3];
    var x = a[0], y = a[1], z = a[2];
    var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
    var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
    var w2 = qw * 2;
    uvx *= w2;
    uvy *= w2;
    uvz *= w2;
    uuvx *= 2;
    uuvy *= 2;
    uuvz *= 2;
    out[0] = x + uvx + uuvx;
    out[1] = y + uvy + uuvy;
    out[2] = z + uvz + uuvz;
    return out;
  }
  function rotateX2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0];
    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateY2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
    r[1] = p[1];
    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateZ2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
    r[2] = p[2];
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function angle(a, b) {
    var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
    return Math.acos(Math.min(Math.max(cosine, -1), 1));
  }
  function zero(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    return out;
  }
  function str2(a) {
    return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
  }
  function exactEquals2(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
  }
  function equals2(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2];
    var b0 = b[0], b1 = b[1], b2 = b[2];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
  }
  var sub2 = subtract2;
  var mul2 = multiply2;
  var div = divide;
  var dist = distance;
  var sqrDist = squaredDistance;
  var len = length;
  var sqrLen = squaredLength;
  var forEach = function() {
    var vec = create3();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l2;
      if (!stride) {
        stride = 3;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l2 = Math.min(count * stride + offset2, a.length);
      } else {
        l2 = a.length;
      }
      for (i = offset2; i < l2; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/vec4.js
  function create4() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
    }
    return out;
  }
  function clone3(a) {
    var out = new ARRAY_TYPE(4);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function fromValues3(x, y, z, w) {
    var out = new ARRAY_TYPE(4);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function copy3(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function set3(out, x, y, z, w) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function add3(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    return out;
  }
  function scale3(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    return out;
  }
  function length2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return Math.hypot(x, y, z, w);
  }
  function squaredLength2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return x * x + y * y + z * z + w * w;
  }
  function normalize2(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    var len4 = x * x + y * y + z * z + w * w;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = x * len4;
    out[1] = y * len4;
    out[2] = z * len4;
    out[3] = w * len4;
    return out;
  }
  function dot2(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
  }
  function lerp2(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    var aw = a[3];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    out[3] = aw + t * (b[3] - aw);
    return out;
  }
  function exactEquals3(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
  }
  function equals3(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
  }
  var forEach2 = function() {
    var vec = create4();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l2;
      if (!stride) {
        stride = 4;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l2 = Math.min(count * stride + offset2, a.length);
      } else {
        l2 = a.length;
      }
      for (i = offset2; i < l2; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        vec[3] = a[i + 3];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
        a[i + 3] = vec[3];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/quat.js
  function create5() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    out[3] = 1;
    return out;
  }
  function identity2(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    return out;
  }
  function setAxisAngle(out, axis, rad) {
    rad = rad * 0.5;
    var s = Math.sin(rad);
    out[0] = s * axis[0];
    out[1] = s * axis[1];
    out[2] = s * axis[2];
    out[3] = Math.cos(rad);
    return out;
  }
  function getAxisAngle(out_axis, q2) {
    var rad = Math.acos(q2[3]) * 2;
    var s = Math.sin(rad / 2);
    if (s > EPSILON) {
      out_axis[0] = q2[0] / s;
      out_axis[1] = q2[1] / s;
      out_axis[2] = q2[2] / s;
    } else {
      out_axis[0] = 1;
      out_axis[1] = 0;
      out_axis[2] = 0;
    }
    return rad;
  }
  function getAngle(a, b) {
    var dotproduct = dot3(a, b);
    return Math.acos(2 * dotproduct * dotproduct - 1);
  }
  function multiply3(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    out[0] = ax * bw + aw * bx + ay * bz - az * by;
    out[1] = ay * bw + aw * by + az * bx - ax * bz;
    out[2] = az * bw + aw * bz + ax * by - ay * bx;
    out[3] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function rotateX3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + aw * bx;
    out[1] = ay * bw + az * bx;
    out[2] = az * bw - ay * bx;
    out[3] = aw * bw - ax * bx;
    return out;
  }
  function rotateY3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var by = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw - az * by;
    out[1] = ay * bw + aw * by;
    out[2] = az * bw + ax * by;
    out[3] = aw * bw - ay * by;
    return out;
  }
  function rotateZ3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bz = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + ay * bz;
    out[1] = ay * bw - ax * bz;
    out[2] = az * bw + aw * bz;
    out[3] = aw * bw - az * bz;
    return out;
  }
  function calculateW(out, a) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
    return out;
  }
  function exp(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var et = Math.exp(w);
    var s = r > 0 ? et * Math.sin(r) / r : 0;
    out[0] = x * s;
    out[1] = y * s;
    out[2] = z * s;
    out[3] = et * Math.cos(r);
    return out;
  }
  function ln(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var t = r > 0 ? Math.atan2(r, w) / r : 0;
    out[0] = x * t;
    out[1] = y * t;
    out[2] = z * t;
    out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
    return out;
  }
  function pow(out, a, b) {
    ln(out, a);
    scale4(out, out, b);
    exp(out, out);
    return out;
  }
  function slerp(out, a, b, t) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    var omega, cosom, sinom, scale0, scale1;
    cosom = ax * bx + ay * by + az * bz + aw * bw;
    if (cosom < 0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    }
    if (1 - cosom > EPSILON) {
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      scale0 = 1 - t;
      scale1 = t;
    }
    out[0] = scale0 * ax + scale1 * bx;
    out[1] = scale0 * ay + scale1 * by;
    out[2] = scale0 * az + scale1 * bz;
    out[3] = scale0 * aw + scale1 * bw;
    return out;
  }
  function random2(out) {
    var u1 = RANDOM();
    var u2 = RANDOM();
    var u3 = RANDOM();
    var sqrt1MinusU1 = Math.sqrt(1 - u1);
    var sqrtU1 = Math.sqrt(u1);
    out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
    out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
    out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
    out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
    return out;
  }
  function invert2(out, a) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var dot5 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
    var invDot = dot5 ? 1 / dot5 : 0;
    out[0] = -a0 * invDot;
    out[1] = -a1 * invDot;
    out[2] = -a2 * invDot;
    out[3] = a3 * invDot;
    return out;
  }
  function conjugate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    return out;
  }
  function fromMat3(out, m) {
    var fTrace = m[0] + m[4] + m[8];
    var fRoot;
    if (fTrace > 0) {
      fRoot = Math.sqrt(fTrace + 1);
      out[3] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[0] = (m[5] - m[7]) * fRoot;
      out[1] = (m[6] - m[2]) * fRoot;
      out[2] = (m[1] - m[3]) * fRoot;
    } else {
      var i = 0;
      if (m[4] > m[0])
        i = 1;
      if (m[8] > m[i * 3 + i])
        i = 2;
      var j = (i + 1) % 3;
      var k = (i + 2) % 3;
      fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
      out[i] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
      out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
      out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
    }
    return out;
  }
  function fromEuler(out, x, y, z) {
    var halfToRad = 0.5 * Math.PI / 180;
    x *= halfToRad;
    y *= halfToRad;
    z *= halfToRad;
    var sx = Math.sin(x);
    var cx = Math.cos(x);
    var sy = Math.sin(y);
    var cy = Math.cos(y);
    var sz = Math.sin(z);
    var cz = Math.cos(z);
    out[0] = sx * cy * cz - cx * sy * sz;
    out[1] = cx * sy * cz + sx * cy * sz;
    out[2] = cx * cy * sz - sx * sy * cz;
    out[3] = cx * cy * cz + sx * sy * sz;
    return out;
  }
  function str3(a) {
    return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
  }
  var clone4 = clone3;
  var fromValues4 = fromValues3;
  var copy4 = copy3;
  var set4 = set3;
  var add4 = add3;
  var mul3 = multiply3;
  var scale4 = scale3;
  var dot3 = dot2;
  var lerp3 = lerp2;
  var length3 = length2;
  var len2 = length3;
  var squaredLength3 = squaredLength2;
  var sqrLen2 = squaredLength3;
  var normalize3 = normalize2;
  var exactEquals4 = exactEquals3;
  var equals4 = equals3;
  var rotationTo = function() {
    var tmpvec3 = create3();
    var xUnitVec3 = fromValues2(1, 0, 0);
    var yUnitVec3 = fromValues2(0, 1, 0);
    return function(out, a, b) {
      var dot5 = dot(a, b);
      if (dot5 < -0.999999) {
        cross(tmpvec3, xUnitVec3, a);
        if (len(tmpvec3) < 1e-6)
          cross(tmpvec3, yUnitVec3, a);
        normalize(tmpvec3, tmpvec3);
        setAxisAngle(out, tmpvec3, Math.PI);
        return out;
      } else if (dot5 > 0.999999) {
        out[0] = 0;
        out[1] = 0;
        out[2] = 0;
        out[3] = 1;
        return out;
      } else {
        cross(tmpvec3, a, b);
        out[0] = tmpvec3[0];
        out[1] = tmpvec3[1];
        out[2] = tmpvec3[2];
        out[3] = 1 + dot5;
        return normalize3(out, out);
      }
    };
  }();
  var sqlerp = function() {
    var temp1 = create5();
    var temp2 = create5();
    return function(out, a, b, c, d, t) {
      slerp(temp1, a, d, t);
      slerp(temp2, b, c, t);
      slerp(out, temp1, temp2, 2 * t * (1 - t));
      return out;
    };
  }();
  var setAxes = function() {
    var matr = create();
    return function(out, view, right, up) {
      matr[0] = right[0];
      matr[3] = right[1];
      matr[6] = right[2];
      matr[1] = up[0];
      matr[4] = up[1];
      matr[7] = up[2];
      matr[2] = -view[0];
      matr[5] = -view[1];
      matr[8] = -view[2];
      return normalize3(out, fromMat3(out, matr));
    };
  }();

  // node_modules/gl-matrix/esm/quat2.js
  var quat2_exports = {};
  __export(quat2_exports, {
    add: () => add5,
    clone: () => clone5,
    conjugate: () => conjugate2,
    copy: () => copy5,
    create: () => create6,
    dot: () => dot4,
    equals: () => equals5,
    exactEquals: () => exactEquals5,
    fromMat4: () => fromMat4,
    fromRotation: () => fromRotation2,
    fromRotationTranslation: () => fromRotationTranslation2,
    fromRotationTranslationValues: () => fromRotationTranslationValues,
    fromTranslation: () => fromTranslation2,
    fromValues: () => fromValues5,
    getDual: () => getDual,
    getReal: () => getReal,
    getTranslation: () => getTranslation2,
    identity: () => identity3,
    invert: () => invert3,
    len: () => len3,
    length: () => length4,
    lerp: () => lerp4,
    mul: () => mul4,
    multiply: () => multiply4,
    normalize: () => normalize4,
    rotateAroundAxis: () => rotateAroundAxis,
    rotateByQuatAppend: () => rotateByQuatAppend,
    rotateByQuatPrepend: () => rotateByQuatPrepend,
    rotateX: () => rotateX4,
    rotateY: () => rotateY4,
    rotateZ: () => rotateZ4,
    scale: () => scale5,
    set: () => set5,
    setDual: () => setDual,
    setReal: () => setReal,
    sqrLen: () => sqrLen3,
    squaredLength: () => squaredLength4,
    str: () => str4,
    translate: () => translate2
  });
  function create6() {
    var dq = new ARRAY_TYPE(8);
    if (ARRAY_TYPE != Float32Array) {
      dq[0] = 0;
      dq[1] = 0;
      dq[2] = 0;
      dq[4] = 0;
      dq[5] = 0;
      dq[6] = 0;
      dq[7] = 0;
    }
    dq[3] = 1;
    return dq;
  }
  function clone5(a) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = a[0];
    dq[1] = a[1];
    dq[2] = a[2];
    dq[3] = a[3];
    dq[4] = a[4];
    dq[5] = a[5];
    dq[6] = a[6];
    dq[7] = a[7];
    return dq;
  }
  function fromValues5(x1, y1, z1, w1, x2, y2, z2, w2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    dq[4] = x2;
    dq[5] = y2;
    dq[6] = z2;
    dq[7] = w2;
    return dq;
  }
  function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    var ax = x2 * 0.5, ay = y2 * 0.5, az = z2 * 0.5;
    dq[4] = ax * w1 + ay * z1 - az * y1;
    dq[5] = ay * w1 + az * x1 - ax * z1;
    dq[6] = az * w1 + ax * y1 - ay * x1;
    dq[7] = -ax * x1 - ay * y1 - az * z1;
    return dq;
  }
  function fromRotationTranslation2(out, q2, t) {
    var ax = t[0] * 0.5, ay = t[1] * 0.5, az = t[2] * 0.5, bx = q2[0], by = q2[1], bz = q2[2], bw = q2[3];
    out[0] = bx;
    out[1] = by;
    out[2] = bz;
    out[3] = bw;
    out[4] = ax * bw + ay * bz - az * by;
    out[5] = ay * bw + az * bx - ax * bz;
    out[6] = az * bw + ax * by - ay * bx;
    out[7] = -ax * bx - ay * by - az * bz;
    return out;
  }
  function fromTranslation2(out, t) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = t[0] * 0.5;
    out[5] = t[1] * 0.5;
    out[6] = t[2] * 0.5;
    out[7] = 0;
    return out;
  }
  function fromRotation2(out, q2) {
    out[0] = q2[0];
    out[1] = q2[1];
    out[2] = q2[2];
    out[3] = q2[3];
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function fromMat4(out, a) {
    var outer = create5();
    getRotation(outer, a);
    var t = new ARRAY_TYPE(3);
    getTranslation(t, a);
    fromRotationTranslation2(out, outer, t);
    return out;
  }
  function copy5(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    return out;
  }
  function identity3(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function set5(out, x1, y1, z1, w1, x2, y2, z2, w2) {
    out[0] = x1;
    out[1] = y1;
    out[2] = z1;
    out[3] = w1;
    out[4] = x2;
    out[5] = y2;
    out[6] = z2;
    out[7] = w2;
    return out;
  }
  var getReal = copy4;
  function getDual(out, a) {
    out[0] = a[4];
    out[1] = a[5];
    out[2] = a[6];
    out[3] = a[7];
    return out;
  }
  var setReal = copy4;
  function setDual(out, q2) {
    out[4] = q2[0];
    out[5] = q2[1];
    out[6] = q2[2];
    out[7] = q2[3];
    return out;
  }
  function getTranslation2(out, a) {
    var ax = a[4], ay = a[5], az = a[6], aw = a[7], bx = -a[0], by = -a[1], bz = -a[2], bw = a[3];
    out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    return out;
  }
  function translate2(out, a, v) {
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3], bx1 = v[0] * 0.5, by1 = v[1] * 0.5, bz1 = v[2] * 0.5, ax2 = a[4], ay2 = a[5], az2 = a[6], aw2 = a[7];
    out[0] = ax1;
    out[1] = ay1;
    out[2] = az1;
    out[3] = aw1;
    out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;
    out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;
    out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;
    out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;
    return out;
  }
  function rotateX4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateX3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateY4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateY3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateZ4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateZ3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateByQuatAppend(out, a, q2) {
    var qx = q2[0], qy = q2[1], qz = q2[2], qw = q2[3], ax = a[0], ay = a[1], az = a[2], aw = a[3];
    out[0] = ax * qw + aw * qx + ay * qz - az * qy;
    out[1] = ay * qw + aw * qy + az * qx - ax * qz;
    out[2] = az * qw + aw * qz + ax * qy - ay * qx;
    out[3] = aw * qw - ax * qx - ay * qy - az * qz;
    ax = a[4];
    ay = a[5];
    az = a[6];
    aw = a[7];
    out[4] = ax * qw + aw * qx + ay * qz - az * qy;
    out[5] = ay * qw + aw * qy + az * qx - ax * qz;
    out[6] = az * qw + aw * qz + ax * qy - ay * qx;
    out[7] = aw * qw - ax * qx - ay * qy - az * qz;
    return out;
  }
  function rotateByQuatPrepend(out, q2, a) {
    var qx = q2[0], qy = q2[1], qz = q2[2], qw = q2[3], bx = a[0], by = a[1], bz = a[2], bw = a[3];
    out[0] = qx * bw + qw * bx + qy * bz - qz * by;
    out[1] = qy * bw + qw * by + qz * bx - qx * bz;
    out[2] = qz * bw + qw * bz + qx * by - qy * bx;
    out[3] = qw * bw - qx * bx - qy * by - qz * bz;
    bx = a[4];
    by = a[5];
    bz = a[6];
    bw = a[7];
    out[4] = qx * bw + qw * bx + qy * bz - qz * by;
    out[5] = qy * bw + qw * by + qz * bx - qx * bz;
    out[6] = qz * bw + qw * bz + qx * by - qy * bx;
    out[7] = qw * bw - qx * bx - qy * by - qz * bz;
    return out;
  }
  function rotateAroundAxis(out, a, axis, rad) {
    if (Math.abs(rad) < EPSILON) {
      return copy5(out, a);
    }
    var axisLength = Math.hypot(axis[0], axis[1], axis[2]);
    rad = rad * 0.5;
    var s = Math.sin(rad);
    var bx = s * axis[0] / axisLength;
    var by = s * axis[1] / axisLength;
    var bz = s * axis[2] / axisLength;
    var bw = Math.cos(rad);
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3];
    out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    var ax = a[4], ay = a[5], az = a[6], aw = a[7];
    out[4] = ax * bw + aw * bx + ay * bz - az * by;
    out[5] = ay * bw + aw * by + az * bx - ax * bz;
    out[6] = az * bw + aw * bz + ax * by - ay * bx;
    out[7] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function add5(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    return out;
  }
  function multiply4(out, a, b) {
    var ax0 = a[0], ay0 = a[1], az0 = a[2], aw0 = a[3], bx1 = b[4], by1 = b[5], bz1 = b[6], bw1 = b[7], ax1 = a[4], ay1 = a[5], az1 = a[6], aw1 = a[7], bx0 = b[0], by0 = b[1], bz0 = b[2], bw0 = b[3];
    out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;
    out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;
    out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;
    out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;
    out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;
    out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;
    out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;
    out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;
    return out;
  }
  var mul4 = multiply4;
  function scale5(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    return out;
  }
  var dot4 = dot3;
  function lerp4(out, a, b, t) {
    var mt2 = 1 - t;
    if (dot4(a, b) < 0)
      t = -t;
    out[0] = a[0] * mt2 + b[0] * t;
    out[1] = a[1] * mt2 + b[1] * t;
    out[2] = a[2] * mt2 + b[2] * t;
    out[3] = a[3] * mt2 + b[3] * t;
    out[4] = a[4] * mt2 + b[4] * t;
    out[5] = a[5] * mt2 + b[5] * t;
    out[6] = a[6] * mt2 + b[6] * t;
    out[7] = a[7] * mt2 + b[7] * t;
    return out;
  }
  function invert3(out, a) {
    var sqlen = squaredLength4(a);
    out[0] = -a[0] / sqlen;
    out[1] = -a[1] / sqlen;
    out[2] = -a[2] / sqlen;
    out[3] = a[3] / sqlen;
    out[4] = -a[4] / sqlen;
    out[5] = -a[5] / sqlen;
    out[6] = -a[6] / sqlen;
    out[7] = a[7] / sqlen;
    return out;
  }
  function conjugate2(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    out[4] = -a[4];
    out[5] = -a[5];
    out[6] = -a[6];
    out[7] = a[7];
    return out;
  }
  var length4 = length3;
  var len3 = length4;
  var squaredLength4 = squaredLength3;
  var sqrLen3 = squaredLength4;
  function normalize4(out, a) {
    var magnitude = squaredLength4(a);
    if (magnitude > 0) {
      magnitude = Math.sqrt(magnitude);
      var a0 = a[0] / magnitude;
      var a1 = a[1] / magnitude;
      var a2 = a[2] / magnitude;
      var a3 = a[3] / magnitude;
      var b0 = a[4];
      var b1 = a[5];
      var b2 = a[6];
      var b3 = a[7];
      var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;
      out[0] = a0;
      out[1] = a1;
      out[2] = a2;
      out[3] = a3;
      out[4] = (b0 - a0 * a_dot_b) / magnitude;
      out[5] = (b1 - a1 * a_dot_b) / magnitude;
      out[6] = (b2 - a2 * a_dot_b) / magnitude;
      out[7] = (b3 - a3 * a_dot_b) / magnitude;
    }
    return out;
  }
  function str4(a) {
    return "quat2(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ")";
  }
  function exactEquals5(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];
  }
  function equals5(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7));
  }

  // node_modules/@sorskoot/wonderland-components/dist/components/snap-rotate.js
  var __decorate5 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SnapRotate = class extends Component {
    player;
    degrees;
    input = null;
    snapped = false;
    start() {
      this.input = this.object.getComponent(InputComponent);
      this.snapped = false;
    }
    update(dt) {
      if (!this.input || !this.input.xrInputSource || !this.input.xrInputSource.gamepad || !this.input.xrInputSource.gamepad.axes) {
        return;
      }
      const currentAxis = this.input.xrInputSource.gamepad.axes[2];
      if (currentAxis > -0.2 && currentAxis < 0.2) {
        this.snapped = false;
        return;
      }
      if (Math.abs(currentAxis) < 0.8) {
        return;
      }
      let lastHeadPos = vec3_exports.fromValues(0, 0, 0);
      this.player.getPositionWorld(lastHeadPos);
      if (currentAxis < -0.8 && !this.snapped) {
        this.player.rotateAxisAngleDegLocal([0, 1, 0], this.degrees);
        this.snapped = true;
      }
      if (currentAxis > 0.8 && !this.snapped) {
        this.player.rotateAxisAngleDegLocal([0, 1, 0], -this.degrees);
        this.snapped = true;
      }
      let currentHeadPos = vec3_exports.fromValues(0, 0, 0);
      this.player.getPositionWorld(currentHeadPos);
      let newPos = vec3_exports.fromValues(0, 0, 0);
      vec3_exports.sub(newPos, lastHeadPos, currentHeadPos);
      this.player.translateLocal(newPos);
    }
  };
  __publicField(SnapRotate, "TypeName", "snap-rotate");
  __decorate5([
    property.object()
  ], SnapRotate.prototype, "player", void 0);
  __decorate5([
    property.int(30)
  ], SnapRotate.prototype, "degrees", void 0);

  // node_modules/@sorskoot/wonderland-components/dist/components/snow-particles.js
  var __decorate6 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var _objects, _velocities, _speeds, _direction;
  var SnowParticles = class extends Component {
    constructor() {
      super(...arguments);
      __publicField(this, "mesh");
      __publicField(this, "material");
      __publicField(this, "delay");
      __publicField(this, "maxParticles");
      __publicField(this, "initialSpeed");
      __publicField(this, "particleScale");
      __publicField(this, "size");
      __publicField(this, "time", 0);
      __publicField(this, "count", 0);
      /**
       * @type {Object3D[]}
       */
      __privateAdd(this, _objects, []);
      /**
      * @type {number[][]}
      */
      __privateAdd(this, _velocities, []);
      __privateAdd(this, _speeds, []);
      __privateAdd(this, _direction, [0, 0, 0]);
    }
    start() {
      __privateSet(this, _objects, this.engine.scene.addObjects(this.maxParticles, null, this.maxParticles));
      for (let i = 0; i < this.maxParticles; ++i) {
        __privateGet(this, _velocities).push([Math.random() / 4 - 0.125, -Math.random() - 0.2, Math.random() / 4 - 0.125]);
        let obj = __privateGet(this, _objects)[i];
        obj.name = "particle" + this.count.toString();
        let mesh = obj.addComponent(MeshComponent);
        mesh.mesh = this.mesh;
        mesh.material = this.material;
        obj.scaleLocal([0, 0, 0]);
      }
      for (let i = 0; i < this.maxParticles; ++i) {
        this.spawn();
      }
    }
    update(dt) {
      let origin = vec3_exports.fromValues(0, 0, 0);
      let distance2 = vec3_exports.fromValues(0, 0, 0);
      for (let i = 0; i < Math.min(this.count, __privateGet(this, _objects).length); ++i) {
        quat2_exports.getTranslation(origin, __privateGet(this, _objects)[i].getTransformWorld());
        const vel = __privateGet(this, _velocities)[i];
        if (origin[0] + vel[0] * dt > 8)
          origin[0] -= 16;
        else if (origin[0] + vel[0] * dt <= -8)
          origin[0] += 16;
        if (origin[2] + vel[2] * dt > 8)
          origin[2] -= 16;
        else if (origin[2] + vel[2] * dt <= -8)
          origin[2] += 16;
        if (origin[1] + vel[1] * dt <= 0) {
          origin[1] = 5;
          __privateGet(this, _objects)[i].setPositionWorld(origin);
        }
      }
      for (let i = 0; i < Math.min(this.count, __privateGet(this, _objects).length); ++i) {
        vec3_exports.scale(distance2, __privateGet(this, _velocities)[i], dt);
        __privateGet(this, _objects)[i].translateWorld(distance2);
      }
    }
    /** Spawn a particle */
    spawn() {
      let index = this.count % this.maxParticles;
      let obj = __privateGet(this, _objects)[index];
      obj.resetTransform();
      obj.scaleLocal([this.particleScale, this.particleScale, this.particleScale]);
      obj.getComponent(MeshComponent).active = true;
      obj.translateWorld([Math.random() * this.size - this.size / 2, Math.random() * 5, Math.random() * this.size - this.size / 2]);
      this.count += 1;
    }
  };
  _objects = new WeakMap();
  _velocities = new WeakMap();
  _speeds = new WeakMap();
  _direction = new WeakMap();
  __publicField(SnowParticles, "TypeName", "snow-particles");
  __decorate6([
    property.mesh()
  ], SnowParticles.prototype, "mesh", void 0);
  __decorate6([
    property.material()
  ], SnowParticles.prototype, "material", void 0);
  __decorate6([
    property.float(0.1)
  ], SnowParticles.prototype, "delay", void 0);
  __decorate6([
    property.int(1500)
  ], SnowParticles.prototype, "maxParticles", void 0);
  __decorate6([
    property.float(15)
  ], SnowParticles.prototype, "initialSpeed", void 0);
  __decorate6([
    property.float(0.01)
  ], SnowParticles.prototype, "particleScale", void 0);
  __decorate6([
    property.int(16)
  ], SnowParticles.prototype, "size", void 0);

  // node_modules/@sorskoot/wonderland-components/dist/components/tags.js
  var __decorate7 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var Tags = class extends Component {
    tags;
    /**
     * @param {string} tag the tag to test
     */
    hasTag(tag) {
      const tags = this.tags.split(/\W+/g);
      return !!~tags.indexOf(tag);
    }
  };
  __publicField(Tags, "TypeName", "tags");
  __decorate7([
    property.string()
  ], Tags.prototype, "tags", void 0);

  // node_modules/@sorskoot/wonderland-components/dist/utils/rng.js
  var FRAC = 23283064365386963e-26;
  var RNG = class {
    _seed = 0;
    _s0 = 0;
    _s1 = 0;
    _s2 = 0;
    _c = 0;
    getSeed() {
      return this._seed;
    }
    /**
     * Seed the number generator
     * @type {number} seed - Seed value
     */
    setSeed(seed) {
      seed = seed < 1 ? 1 / seed : seed;
      this._seed = seed;
      this._s0 = (seed >>> 0) * FRAC;
      seed = seed * 69069 + 1 >>> 0;
      this._s1 = seed * FRAC;
      seed = seed * 69069 + 1 >>> 0;
      this._s2 = seed * FRAC;
      this._c = 1;
      return this;
    }
    /**
     * @returns Pseudorandom value [0,1), uniformly distributed
     */
    getUniform() {
      let t = 2091639 * this._s0 + this._c * FRAC;
      this._s0 = this._s1;
      this._s1 = this._s2;
      this._c = t | 0;
      this._s2 = t - this._c;
      return this._s2;
    }
    /**
     * @param {number} lowerBound The lower end of the range to return a value from, inclusive
     * @param {number} upperBound The upper end of the range to return a value from, inclusive
     * @returns Pseudorandom value [lowerBound, upperBound], using ROT.RNG.getUniform() to distribute the value
     */
    getUniformInt(lowerBound, upperBound) {
      let max2 = Math.max(lowerBound, upperBound);
      let min2 = Math.min(lowerBound, upperBound);
      return Math.floor(this.getUniform() * (max2 - min2 + 1)) + min2;
    }
    /**
     * @param mean Mean value
     * @param stddev Standard deviation. ~95% of the absolute values will be lower than 2*stddev.
     * @returns A normally distributed pseudorandom value
     */
    getNormal(mean = 0, stddev = 1) {
      let u, v, r;
      do {
        u = 2 * this.getUniform() - 1;
        v = 2 * this.getUniform() - 1;
        r = u * u + v * v;
      } while (r > 1 || r == 0);
      let gauss = u * Math.sqrt(-2 * Math.log(r) / r);
      return mean + gauss * stddev;
    }
    /**
     * @returns Pseudorandom value [1,100] inclusive, uniformly distributed
     */
    getPercentage() {
      return 1 + Math.floor(this.getUniform() * 100);
    }
    /**
     * @param {Array} array Array to pick a random item from
     * @returns Randomly picked item, null when length=0
     */
    getItem(array) {
      if (!array.length) {
        return null;
      }
      return array[Math.floor(this.getUniform() * array.length)];
    }
    /**
     * @param {Array} array Array to randomize
     * @returns New array with randomized items
     */
    shuffle(array) {
      let result = [];
      let clone6 = array.slice();
      while (clone6.length) {
        let index = clone6.indexOf(this.getItem(clone6));
        result.push(clone6.splice(index, 1)[0]);
      }
      return result;
    }
    /**
     * @param {Object} data key = whatever, value=weight (relative probability)
     * @returns whatever
     */
    getWeightedValue(data) {
      let total = 0;
      for (let id2 in data) {
        total += data[id2];
      }
      let random3 = this.getUniform() * total;
      let id, part = 0;
      for (id in data) {
        part += data[id];
        if (random3 < part) {
          return id;
        }
      }
      return id;
    }
    /**
     * Get RNG state. Useful for storing the state and re-setting it via setState.
     * @returns Internal state
     */
    getState() {
      return [this._s0, this._s1, this._s2, this._c];
    }
    /**
     * Set a previously retrieved state.
     */
    setState(state) {
      this._s0 = state[0];
      this._s1 = state[1];
      this._s2 = state[2];
      this._c = state[3];
      return this;
    }
    /**
     * Returns a cloned RNG
     */
    clone() {
      let clone6 = new RNG();
      return clone6.setState(this.getState());
    }
  };
  var rng = new RNG().setSeed(Date.now());

  // node_modules/@sorskoot/wonderland-components/dist/utils/ObjectCache.js
  var ObjectCache = class {
    #objects;
    engine;
    name;
    cacheSize;
    index;
    /**
     *
     * @param {WonderlandEngine} engine
     * @param {string} name
     * @param {number} cacheSize
     * @param {Object3D} parent
     * @param {number} components
     */
    constructor(engine, name, cacheSize, parent, components) {
      this.engine = engine;
      this.name = name;
      console.log(`creating cache: ${name} with ${cacheSize} elements`);
      this.cacheSize = cacheSize;
      this.#objects = this.engine.scene.addObjects(cacheSize, parent, components);
      this.index = 0;
    }
    reset() {
      this.index = 0;
      this.#objects.forEach((obj) => {
        obj.getComponents().forEach((c) => {
          c.active = false;
        });
        obj.parent = null;
        obj.resetPositionRotation();
      });
    }
    getItem() {
      if (this.index >= this.cacheSize) {
        console.warn(`Cache ${this.name} ran out of space`);
        return;
      }
      let obj = this.#objects[this.index];
      this.index++;
      return obj;
    }
  };

  // node_modules/@sorskoot/wonderland-components/dist/utils/wlUtils.js
  function cloneObject(engine, object, cache) {
    if (!object || !object.parent) {
      console.log("can't clone undefined object");
      return;
    }
    let cloned;
    if (cache) {
      cloned = cache.getItem();
    }
    if (!cloned) {
      console.error("no cache available, cloning object");
      cloned = engine.scene.addObject(object.parent);
    }
    let components = object.getComponents();
    const comp = cloned.getComponents();
    for (let i = 0; i < components.length; i++) {
      if (components[i].type == "mesh") {
        const m = comp.find((c) => c.type == "mesh" && c.active == false);
        const original = components[i];
        if (m) {
          m.mesh = original.mesh;
          m.material = original.material;
          m.skin = original.skin;
          m.active = true;
        } else {
          cloned.addComponent("mesh", {
            mesh: original.mesh,
            material: original.material,
            skin: original.skin
          });
        }
      } else if (components[i].type == "collision") {
        const c = comp.find((c2) => c2.type == "collision" && c2.active == false);
        const original = components[i];
        if (c) {
          c.collider = original.collider;
          c.extents = original.extents;
          c.group = original.group;
          c.active = true;
        } else {
          cloned.addComponent("collision", {
            collider: original.collider,
            extents: original.extents,
            group: original.group
          });
        }
      } else if (components[i].type == "animation") {
        const c = comp.find((c2) => c2.type == "animation" && c2.active == false);
        const original = components[i];
        if (c) {
          c.animation = original.animation;
          c.playCount = original.playCount;
          c.active = true;
        } else
          cloned.addComponent("animation", {
            animation: original.animation,
            playCount: original.playCount
          });
      } else if (components[i].type == "tags") {
        const c = comp.find((c2) => c2.type == "tags" && c2.active == false);
        const original = components[i];
        if (c) {
          c.tags = original.tags;
          c.active = true;
        } else
          cloned.addComponent(Tags, {
            tags: original.tags
          });
      } else if (components[i].type == "flipbook") {
        const c = comp.find((c2) => c2.type == "flipbook" && c2.active == false);
        const original = components[i];
        if (c) {
          c.base = original.base;
          c.url = original.url;
          c.urlEmissive = original.urlEmissive;
          c.columns = original.columns;
          c.rows = original.rows;
          c.speed = original.speed;
          c.active = true;
        } else
          cloned.addComponent(Flipbook, {
            base: original.base,
            url: original.url,
            urlEmissive: original.urlEmissive,
            columns: original.columns,
            rows: original.rows,
            speed: original.speed
          });
      } else {
        const c = comp.find((c2) => c2.type == components[i].type && c2.active == false);
        if (c) {
          c.active = true;
        } else {
          cloned.addComponent(components[i].type, components[i]);
        }
      }
    }
    let pos = [];
    let rot = [];
    let scale6 = [];
    object.getPositionLocal(pos);
    object.getRotationLocal(rot);
    object.getScalingLocal(scale6);
    cloned.resetPositionRotation();
    cloned.setPositionLocal(pos);
    cloned.setRotationLocal(rot);
    cloned.setScalingLocal(scale6);
    cloned.name = object.name;
    if (object.children.length > 0) {
      for (let i = 0; i < object.children.length; i++) {
        let childClone = cloneObject(engine, object.children[i], cache);
        childClone.parent = cloned;
      }
    }
    cloned.setDirty();
    return cloned;
  }
  function findChild(object, childName) {
    return object.children.filter((o) => o.name == childName)[0];
  }
  function replaceAt(string, index, replacement) {
    return string.slice(0, index) + replacement + string.slice(index + replacement.length);
  }
  var wlUtils = {
    cloneObject,
    findChild,
    replaceAt
  };

  // node_modules/@sorskoot/wonderland-components/dist/utils/arrayHelpers.js
  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = rng.getUniformInt(0, i + 1);
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  // node_modules/@sorskoot/wonderland-components/dist/utils/lerp.js
  var Easing = {
    /**
     * Linear easing function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns The same value as `t`, providing a linear progression.
     */
    Linear: (t) => t,
    /**
     * Quadratic ease-in function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an accelerated (quadratic) progression from 0 to 1.
     */
    InQuad: (t) => t * t,
    /**
     * Quadratic ease-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing a decelerated (quadratic) progression from 0 to 1.
     */
    OutQuad: (t) => 1 - (1 - t) * (1 - t),
    /**
     * Quadratic ease-in-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value that accelerates in, then decelerates out, providing a smooth transition between motion states.
     */
    InOutQuad: (t) => t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2,
    /**
     * Cubic ease-in function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an accelerated (cubic) progression from 0 to 1.
     */
    InCubic: (t) => Math.pow(t, 3),
    /**
     * Cubic ease-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an decelerated (cubic) progression from 0 to 1.
     */
    OutCubic: (t) => Math.pow(t - 1, 3) + 1,
    /**
     * Cubic ease-in-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value that accelerates in, then decelerates out, providing a smooth transition between motion states.
     */
    InOutCubic: (t) => {
      if (t < 0.5) {
        return Math.pow(2 * t, 3) / 2;
      } else {
        return (Math.pow(2 * t - 2, 3) + 2) / 2;
      }
    }
  };
  function lerp5(start, end, t, easing = Easing.Linear) {
    if (typeof easing === "function") {
      easing = getEasingFunction(easing);
    }
    return start * (1 - easing(t)) + end * easing(t);
  }
  function getEasingFunction(type) {
    return typeof type === "function" ? type : Easing.Linear;
  }
  function clamp2(value, min2, max2) {
    return Math.min(Math.max(value, min2), max2);
  }

  // node_modules/@sorskoot/wonderland-components/dist/utils/queue.js
  var Queue = class {
    items = [];
    enqueue(item) {
      this.items.push(item);
    }
    dequeue() {
      return this.items.shift();
    }
    isEmpty() {
      return this.items.length === 0;
    }
  };

  // node_modules/@sorskoot/wonderland-components/dist/utils/rngWithWeight.js
  function rngWithWeight(array, itemsWithWeights) {
    let totalWeight = itemsWithWeights.reduce((total, itemWithWeight) => {
      return total + itemWithWeight;
    }, 0);
    let randomValue = rng.getUniformInt(0, totalWeight);
    for (let i = 0; i < itemsWithWeights.length; i++) {
      randomValue -= itemsWithWeights[i];
      if (randomValue <= 0) {
        return array[i];
      }
    }
    return null;
  }

  // node_modules/@wonderlandengine/components/dist/index.js
  var dist_exports2 = {};
  __export(dist_exports2, {
    ARCamera8thwall: () => ARCamera8thwall,
    Anchor: () => Anchor,
    Cursor: () => Cursor,
    CursorTarget: () => CursorTarget,
    DebugObject: () => DebugObject,
    DeviceOrientationLook: () => DeviceOrientationLook,
    FingerCursor: () => FingerCursor,
    FixedFoveation: () => FixedFoveation,
    HandTracking: () => HandTracking,
    HitTestLocation: () => HitTestLocation,
    HowlerAudioListener: () => HowlerAudioListener,
    HowlerAudioSource: () => HowlerAudioSource,
    ImageTexture: () => ImageTexture,
    InputProfile: () => InputProfile,
    MouseLookComponent: () => MouseLookComponent,
    OrbitalCamera: () => OrbitalCamera,
    PlaneDetection: () => PlaneDetection,
    PlayerHeight: () => PlayerHeight,
    TargetFramerate: () => TargetFramerate,
    TeleportComponent: () => TeleportComponent,
    Trail: () => Trail,
    TwoJointIkSolver: () => TwoJointIkSolver,
    VideoTexture: () => VideoTexture,
    VrModeActiveSwitch: () => VrModeActiveSwitch,
    Vrm: () => Vrm,
    WasdControlsComponent: () => WasdControlsComponent,
    isPointLocalOnXRPlanePolygon: () => isPointLocalOnXRPlanePolygon,
    isPointWorldOnXRPlanePolygon: () => isPointWorldOnXRPlanePolygon
  });

  // node_modules/@wonderlandengine/components/dist/8thwall-camera.js
  var ARCamera8thwall = class extends Component {
    /* 8thwall camera pipeline module name */
    name = "wonderland-engine-8thwall-camera";
    started = false;
    view = null;
    // cache camera
    position = [0, 0, 0];
    // cache 8thwall cam position
    rotation = [0, 0, 0, -1];
    // cache 8thwall cam rotation
    glTextureRenderer = null;
    // cache XR8.GlTextureRenderer.pipelineModule
    promptForDeviceMotion() {
      return new Promise(async (resolve, reject) => {
        window.dispatchEvent(new Event("8thwall-request-user-interaction"));
        window.addEventListener("8thwall-safe-to-request-permissions", async () => {
          try {
            const motionEvent = await DeviceMotionEvent.requestPermission();
            resolve(motionEvent);
          } catch (exception) {
            reject(exception);
          }
        });
      });
    }
    async getPermissions() {
      if (DeviceMotionEvent && DeviceMotionEvent.requestPermission) {
        try {
          const result = await DeviceMotionEvent.requestPermission();
          if (result !== "granted") {
            throw new Error("MotionEvent");
          }
        } catch (exception) {
          if (exception.name === "NotAllowedError") {
            const motionEvent = await this.promptForDeviceMotion();
            if (motionEvent !== "granted") {
              throw new Error("MotionEvent");
            }
          } else {
            throw new Error("MotionEvent");
          }
        }
      }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: true,
          audio: true
        });
        stream.getTracks().forEach((track) => {
          track.stop();
        });
      } catch (exception) {
        throw new Error("Camera");
      }
    }
    init() {
      this.view = this.object.getComponent("view");
      this.onUpdate = this.onUpdate.bind(this);
      this.onAttach = this.onAttach.bind(this);
      this.onException = this.onException.bind(this);
      this.onCameraStatusChange = this.onCameraStatusChange.bind(this);
    }
    async start() {
      this.view = this.object.getComponent("view");
      if (!this.useCustomUIOverlays) {
        OverlaysHandler.init();
      }
      try {
        await this.getPermissions();
      } catch (error) {
        window.dispatchEvent(new CustomEvent("8thwall-permission-fail", { detail: error }));
        return;
      }
      await this.waitForXR8();
      XR8.XrController.configure({
        disableWorldTracking: false
      });
      this.glTextureRenderer = XR8.GlTextureRenderer.pipelineModule();
      XR8.addCameraPipelineModules([
        this.glTextureRenderer,
        XR8.XrController.pipelineModule(),
        this
      ]);
      const config2 = {
        cameraConfig: {
          direction: XR8.XrConfig.camera().BACK
        },
        canvas: Module.canvas,
        allowedDevices: XR8.XrConfig.device().ANY,
        ownRunLoop: false
      };
      XR8.run(config2);
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onAttach(params) {
      this.started = true;
      this.engine.scene.colorClearEnabled = false;
      const gl = Module.ctx;
      const rot = this.object.rotationWorld;
      const pos = this.object.getTranslationWorld([]);
      this.position = Array.from(pos);
      this.rotation = Array.from(rot);
      XR8.XrController.updateCameraProjectionMatrix({
        origin: { x: pos[0], y: pos[1], z: pos[2] },
        facing: { x: rot[0], y: rot[1], z: rot[2], w: rot[3] },
        cam: {
          pixelRectWidth: Module.canvas.width,
          pixelRectHeight: Module.canvas.height,
          nearClipPlane: this.view.near,
          farClipPlane: this.view.far
        }
      });
      this.engine.scene.onPreRender.push(() => {
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
        XR8.runPreRender(Date.now());
        XR8.runRender();
      });
      this.engine.scene.onPostRender.push(() => {
        XR8.runPostRender(Date.now());
      });
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onCameraStatusChange(e) {
      if (e && e.status === "failed") {
        this.onException(new Error(`Camera failed with status: ${e.status}`));
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onUpdate(e) {
      if (!e.processCpuResult.reality)
        return;
      const { rotation, position, intrinsics } = e.processCpuResult.reality;
      this.rotation[0] = rotation.x;
      this.rotation[1] = rotation.y;
      this.rotation[2] = rotation.z;
      this.rotation[3] = rotation.w;
      this.position[0] = position.x;
      this.position[1] = position.y;
      this.position[2] = position.z;
      if (intrinsics) {
        const projectionMatrix = this.view.projectionMatrix;
        for (let i = 0; i < 16; i++) {
          if (Number.isFinite(intrinsics[i])) {
            projectionMatrix[i] = intrinsics[i];
          }
        }
      }
      if (position && rotation) {
        this.object.rotationWorld = this.rotation;
        this.object.setTranslationWorld(this.position);
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onException(error) {
      console.error("8thwall exception:", error);
      window.dispatchEvent(new CustomEvent("8thwall-error", { detail: error }));
    }
    waitForXR8() {
      return new Promise((resolve, _rej) => {
        if (window.XR8) {
          resolve();
        } else {
          window.addEventListener("xrloaded", () => resolve());
        }
      });
    }
  };
  __publicField(ARCamera8thwall, "TypeName", "8thwall-camera");
  __publicField(ARCamera8thwall, "Properties", {
    /** Override the WL html overlays for handling camera/motion permissions and error handling */
    useCustomUIOverlays: { type: Type.Bool, default: false }
  });
  var OverlaysHandler = {
    init: function() {
      this.handleRequestUserInteraction = this.handleRequestUserInteraction.bind(this);
      this.handlePermissionFail = this.handlePermissionFail.bind(this);
      this.handleError = this.handleError.bind(this);
      window.addEventListener("8thwall-request-user-interaction", this.handleRequestUserInteraction);
      window.addEventListener("8thwall-permission-fail", this.handlePermissionFail);
      window.addEventListener("8thwall-error", this.handleError);
    },
    handleRequestUserInteraction: function() {
      const overlay = this.showOverlay(requestPermissionOverlay);
      window.addEventListener("8thwall-safe-to-request-permissions", () => {
        overlay.remove();
      });
    },
    handlePermissionFail: function(_reason) {
      this.showOverlay(failedPermissionOverlay);
    },
    handleError: function(_error) {
      this.showOverlay(runtimeErrorOverlay);
    },
    showOverlay: function(htmlContent) {
      const overlay = document.createElement("div");
      overlay.innerHTML = htmlContent;
      document.body.appendChild(overlay);
      return overlay;
    }
  };
  var requestPermissionOverlay = `
<style>
  #request-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .request-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .request-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="request-permission-overlay">
  <div class="request-permission-overlay_title">This app requires to use your camera and motion sensors</div>

  <button class="request-permission-overlay_button" onclick="window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))">OK</button>
</div>`;
  var failedPermissionOverlay = `
<style>
  #failed-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .failed-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .failed-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="failed-permission-overlay">
  <div class="failed-permission-overlay_title">Failed to grant permissions. Reset the the permissions and refresh the page.</div>

  <button class="failed-permission-overlay_button" onclick="window.location.reload()">Refresh the page</button>
</div>`;
  var runtimeErrorOverlay = `
<style>
  #wall-error-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .wall-error-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .wall-error-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="wall-error-overlay">
  <div class="wall-error-overlay_title">Error has occurred. Please reload the page</div>

  <button class="wall-error-overlay_button" onclick="window.location.reload()">Reload</button>
</div>`;

  // node_modules/@wonderlandengine/components/dist/utils/webxr.js
  var tempVec = new Float32Array(3);
  var tempQuat = new Float32Array(4);
  function setXRRigidTransformLocal(o, transform) {
    const r = transform.orientation;
    tempQuat[0] = r.x;
    tempQuat[1] = r.y;
    tempQuat[2] = r.z;
    tempQuat[3] = r.w;
    const t = transform.position;
    tempVec[0] = t.x;
    tempVec[1] = t.y;
    tempVec[2] = t.z;
    o.resetPositionRotation();
    o.setRotationLocal(tempQuat);
    o.translateLocal(tempVec);
  }

  // node_modules/@wonderlandengine/components/dist/anchor.js
  var __decorate8 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec3 = new Float32Array(3);
  var tempQuat2 = new Float32Array(4);
  var _anchors, _addAnchor, addAnchor_fn, _removeAnchor, removeAnchor_fn, _getFrame, getFrame_fn, _createAnchor, createAnchor_fn, _onAddAnchor, onAddAnchor_fn, _onRestoreAnchor, onRestoreAnchor_fn, _onCreate, onCreate_fn;
  var _Anchor = class extends Component {
    constructor() {
      super(...arguments);
      __privateAdd(this, _getFrame);
      __privateAdd(this, _createAnchor);
      __privateAdd(this, _onAddAnchor);
      __privateAdd(this, _onRestoreAnchor);
      __privateAdd(this, _onCreate);
      __publicField(this, "persist", false);
      /** Unique identifier to load a persistent anchor from, or empty/null if unknown */
      __publicField(this, "uuid", null);
      /** The xrAnchor, if created */
      __publicField(this, "xrAnchor", null);
      /** Emits events when the anchor is created either by being restored or newly created */
      __publicField(this, "onCreate", new Emitter());
      /** Whether the anchor is currently being tracked */
      __publicField(this, "visible", false);
      /** Emits an event when this anchor starts tracking */
      __publicField(this, "onTrackingFound", new Emitter());
      /** Emits an event when this anchor stops tracking */
      __publicField(this, "onTrackingLost", new Emitter());
      /** XRFrame to use for creating the anchor */
      __publicField(this, "xrFrame", null);
      /** XRHitTestResult to use for creating the anchor */
      __publicField(this, "xrHitResult", null);
    }
    /** Retrieve all anchors of the current scene */
    static getAllAnchors() {
      return __privateGet(_Anchor, _anchors);
    }
    /**
     * Create a new anchor
     *
     * @param o Object to attach the component to
     * @param params Parameters for the anchor component
     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available
     * @param hitResult Optional hit-test result to create the anchor with
     * @returns Promise for the newly created anchor component
     */
    static create(o, params, frame, hitResult) {
      const a = o.addComponent(_Anchor, { ...params, active: false });
      if (a === null)
        return null;
      a.xrHitResult = hitResult ?? null;
      a.xrFrame = frame ?? null;
      a.onCreate.once(() => (a.xrFrame = null, a.xrHitResult = null));
      a.active = true;
      return a.onCreate.promise();
    }
    start() {
      if (this.uuid && this.engine.xr) {
        this.persist = true;
        if (this.engine.xr.session.restorePersistentAnchor === void 0) {
          console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
        }
        this.engine.xr.session.restorePersistentAnchor(this.uuid).then(__privateMethod(this, _onRestoreAnchor, onRestoreAnchor_fn).bind(this));
      } else if (__privateMethod(this, _getFrame, getFrame_fn).call(this)) {
        __privateMethod(this, _createAnchor, createAnchor_fn).call(this).then(__privateMethod(this, _onAddAnchor, onAddAnchor_fn).bind(this));
      } else {
        throw new Error("Anchors can only be created during the XR frame in an active XR session");
      }
    }
    update() {
      if (!this.xrAnchor || !this.engine.xr)
        return;
      const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);
      const visible = !!pose;
      if (visible != this.visible) {
        this.visible = visible;
        (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);
      }
      if (pose) {
        setXRRigidTransformLocal(this.object, pose.transform);
      }
    }
    onDestroy() {
      var _a;
      __privateMethod(_a = _Anchor, _removeAnchor, removeAnchor_fn).call(_a, this);
    }
  };
  var Anchor = _Anchor;
  _anchors = new WeakMap();
  _addAnchor = new WeakSet();
  addAnchor_fn = function(anchor) {
    __privateGet(_Anchor, _anchors).push(anchor);
  };
  _removeAnchor = new WeakSet();
  removeAnchor_fn = function(anchor) {
    const index = __privateGet(_Anchor, _anchors).indexOf(anchor);
    if (index < 0)
      return;
    __privateGet(_Anchor, _anchors).splice(index, 1);
  };
  _getFrame = new WeakSet();
  getFrame_fn = function() {
    return this.xrFrame || this.engine.xr.frame;
  };
  _createAnchor = new WeakSet();
  createAnchor_fn = async function() {
    if (!__privateMethod(this, _getFrame, getFrame_fn).call(this).createAnchor) {
      throw new Error("Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?");
    }
    if (this.xrHitResult) {
      if (this.xrHitResult.createAnchor === void 0) {
        throw new Error("Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.");
      }
      return this.xrHitResult.createAnchor();
    } else {
      this.object.getTranslationWorld(tempVec3);
      tempQuat2.set(this.object.rotationWorld);
      const rotation = tempQuat2;
      const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });
      return __privateMethod(this, _getFrame, getFrame_fn).call(this)?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);
    }
  };
  _onAddAnchor = new WeakSet();
  onAddAnchor_fn = function(anchor) {
    if (!anchor)
      return;
    if (this.persist) {
      if (anchor.requestPersistentHandle !== void 0) {
        anchor.requestPersistentHandle().then((uuid) => {
          var _a;
          this.uuid = uuid;
          __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
          __privateMethod(_a = _Anchor, _addAnchor, addAnchor_fn).call(_a, this);
        });
        return;
      } else {
        console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
      }
    }
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onRestoreAnchor = new WeakSet();
  onRestoreAnchor_fn = function(anchor) {
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onCreate = new WeakSet();
  onCreate_fn = function(anchor) {
    this.xrAnchor = anchor;
    this.onCreate.notify(this);
  };
  __privateAdd(Anchor, _addAnchor);
  __privateAdd(Anchor, _removeAnchor);
  __publicField(Anchor, "TypeName", "anchor");
  /* Static management of all anchors */
  __privateAdd(Anchor, _anchors, []);
  __decorate8([
    property.bool(false)
  ], Anchor.prototype, "persist", void 0);
  __decorate8([
    property.string()
  ], Anchor.prototype, "uuid", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor-target.js
  var CursorTarget = class extends Component {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.add(f);
     */
    addHoverFunction(f2) {
      this.onHover.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.remove(f);
     */
    removeHoverFunction(f2) {
      this.onHover.remove(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.add(f);
     */
    addUnHoverFunction(f2) {
      this.onUnhover.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.remove(f);
     */
    removeUnHoverFunction(f2) {
      this.onUnhover.remove(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onClick.add(f);
     */
    addClickFunction(f2) {
      this.onClick.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onClick.remove(f);
     */
    removeClickFunction(f2) {
      this.onClick.remove(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.add(f);
     */
    addMoveFunction(f2) {
      this.onMove.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.remove(f);
     */
    removeMoveFunction(f2) {
      this.onMove.remove(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.add(f);
     */
    addDownFunction(f2) {
      this.onDown.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.remove(f);
     */
    removeDownFunction(f2) {
      this.onDown.remove(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.add(f);
     */
    addUpFunction(f2) {
      this.onUp.add(f2);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.remove(f);
     */
    removeUpFunction(f2) {
      this.onUp.remove(f2);
    }
  };
  __publicField(CursorTarget, "TypeName", "cursor-target");
  __publicField(CursorTarget, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/hit-test-location.js
  var __decorate9 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HitTestLocation = class extends Component {
    tempScaling = new Float32Array(3);
    visible = false;
    xrHitTestSource = null;
    /** Reference space for creating the hit test when the session starts */
    xrReferenceSpace = null;
    /**
     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.
     * @deprecated Use onHitLost and onHitFound instead.
     */
    scaleObject = true;
    /** Emits an event when the hit test switches from visible to invisible */
    onHitLost = new Emitter();
    /** Emits an event when the hit test switches from invisible to visible */
    onHitFound = new Emitter();
    onSessionStartCallback = null;
    onSessionEndCallback = null;
    start() {
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
      if (this.scaleObject) {
        this.tempScaling.set(this.object.scalingLocal);
        this.object.scale([0, 0, 0]);
        this.onHitLost.add(() => {
          this.tempScaling.set(this.object.scalingLocal);
          this.object.scale([0, 0, 0]);
        });
        this.onHitFound.add(() => {
          this.object.scalingLocal.set(this.tempScaling);
          this.object.setDirty();
        });
      }
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    update() {
      const wasVisible = this.visible;
      if (this.xrHitTestSource) {
        const frame = this.engine.xrFrame;
        if (!frame)
          return;
        let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);
        if (hitTestResults.length > 0) {
          let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);
          this.visible = !!pose;
          if (pose) {
            setXRRigidTransformLocal(this.object, pose.transform);
          }
        } else {
          this.visible = false;
        }
      }
      if (this.visible != wasVisible) {
        (this.visible ? this.onHitFound : this.onHitLost).notify(this);
      }
    }
    getHitTestResults(frame = this.engine.xr?.frame ?? null) {
      if (!frame)
        return [];
      if (!this.xrHitTestSource)
        return [];
      return frame.getHitTestResults(this.xrHitTestSource);
    }
    onXRSessionStart(session) {
      if (session.requestHitTestSource === void 0) {
        console.error("hit-test-location: hit test feature not available. Deactivating component.");
        this.active = false;
        return;
      }
      session.requestHitTestSource({
        space: this.xrReferenceSpace ?? this.engine.xr.referenceSpaceForType("viewer")
      }).then((hitTestSource) => {
        this.xrHitTestSource = hitTestSource;
      }).catch(console.error);
    }
    onXRSessionEnd() {
      if (!this.xrHitTestSource)
        return;
      this.xrHitTestSource.cancel();
      this.xrHitTestSource = null;
    }
  };
  __publicField(HitTestLocation, "TypeName", "hit-test-location");
  __decorate9([
    property.bool(true)
  ], HitTestLocation.prototype, "scaleObject", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor.js
  var __decorate10 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec2 = new Float32Array(3);
  var ZERO = [0, 0, 0];
  var CursorTargetEmitters = class {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
  };
  var Cursor = class extends Component {
    static onRegister(engine) {
      engine.registerComponent(HitTestLocation);
    }
    _collisionMask = 0;
    _onDeactivateCallbacks = [];
    _input = null;
    _origin = new Float32Array(3);
    _cursorObjScale = new Float32Array(3);
    _direction = new Float32Array(3);
    _projectionMatrix = new Float32Array(16);
    _viewComponent = null;
    _isDown = false;
    _lastIsDown = false;
    _arTouchDown = false;
    _lastPointerPos = new Float32Array(2);
    _lastCursorPosOnTarget = new Float32Array(3);
    _hitTestLocation = null;
    _hitTestObject = null;
    _onSessionStartCallback = null;
    /**
     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object
     * that matches the collision group
     */
    visible = true;
    /** Currently hovered object */
    hoveringObject = null;
    /** CursorTarget component of the currently hovered object */
    hoveringObjectTarget = null;
    /** Whether the cursor is hovering reality via hit-test */
    hoveringReality = false;
    /**
     * Global target lets you receive global cursor events on any object.
     */
    globalTarget = new CursorTargetEmitters();
    /**
     * Hit test target lets you receive cursor events for "reality", if
     * `useWebXRHitTest` is set to `true`.
     *
     * @example
     * ```js
     * cursor.hitTestTarget.onClick.add((hit, cursor) => {
     *     // User clicked on reality
     * });
     * ```
     */
    hitTestTarget = new CursorTargetEmitters();
    /** World position of the cursor */
    cursorPos = new Float32Array(3);
    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */
    collisionGroup = 1;
    /** (optional) Object that visualizes the cursor's ray. */
    cursorRayObject = null;
    /** Axis along which to scale the `cursorRayObject`. */
    cursorRayScalingAxis = 2;
    /** (optional) Object that visualizes the cursor's hit location. */
    cursorObject = null;
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness = 0;
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode = 0;
    /** Maximum distance for the cursor's ray cast. */
    maxDistance = 100;
    /** Whether to set the CSS style of the mouse cursor on desktop */
    styleCursor = true;
    /**
     * Use WebXR hit-test if available.
     *
     * Attaches a hit-test-location component to the cursorObject, which will be used
     * by the cursor to send events to the hitTestTarget with HitTestResult.
     */
    useWebXRHitTest = false;
    _onViewportResize = () => {
      if (!this._viewComponent)
        return;
      mat4_exports.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);
    };
    start() {
      this._collisionMask = 1 << this.collisionGroup;
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("cursor component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness || "none";
          this._input = inputComp;
        }
      } else {
        this.handedness = ["left", "right", "none"][this.handedness - 1];
      }
      this._viewComponent = this.object.getComponent(ViewComponent);
      if (this.useWebXRHitTest) {
        this._hitTestObject = this.engine.scene.addObject(this.object);
        this._hitTestLocation = this._hitTestObject.addComponent(HitTestLocation, {
          scaleObject: false
        }) ?? null;
      }
      this._onSessionStartCallback = this.setupVREvents.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this._onSessionStartCallback);
      this.engine.onResize.add(this._onViewportResize);
      this._setCursorVisibility(true);
      if (this._viewComponent != null) {
        const canvas2 = this.engine.canvas;
        const onClick = this.onClick.bind(this);
        const onPointerMove = this.onPointerMove.bind(this);
        const onPointerDown = this.onPointerDown.bind(this);
        const onPointerUp = this.onPointerUp.bind(this);
        canvas2.addEventListener("click", onClick);
        canvas2.addEventListener("pointermove", onPointerMove);
        canvas2.addEventListener("pointerdown", onPointerDown);
        canvas2.addEventListener("pointerup", onPointerUp);
        this._onDeactivateCallbacks.push(() => {
          canvas2.removeEventListener("click", onClick);
          canvas2.removeEventListener("pointermove", onPointerMove);
          canvas2.removeEventListener("pointerdown", onPointerDown);
          canvas2.removeEventListener("pointerup", onPointerUp);
        });
      }
      this._onViewportResize();
    }
    _setCursorRayTransform(hitPosition) {
      if (!this.cursorRayObject)
        return;
      const dist2 = vec3_exports.dist(this._origin, hitPosition);
      this.cursorRayObject.setPositionLocal([0, 0, -dist2 / 2]);
      if (this.cursorRayScalingAxis != 4) {
        tempVec2.fill(1);
        tempVec2[this.cursorRayScalingAxis] = dist2 / 2;
        this.cursorRayObject.setScalingLocal(tempVec2);
      }
    }
    _setCursorVisibility(visible) {
      if (this.visible == visible)
        return;
      this.visible = visible;
      if (!this.cursorObject)
        return;
      if (visible) {
        this.cursorObject.setScalingWorld(this._cursorObjScale);
      } else {
        this.cursorObject.getScalingWorld(this._cursorObjScale);
        this.cursorObject.scaleLocal([0, 0, 0]);
      }
    }
    update() {
      if (this.engine.xr && this._arTouchDown && this._input && this.engine.xr.session.inputSources[0].handedness === "none" && this.engine.xr.session.inputSources[0].gamepad) {
        const p = this.engine.xr.session.inputSources[0].gamepad.axes;
        this._direction[0] = p[0];
        this._direction[1] = -p[1];
        this._direction[2] = -1;
        this.applyTransformAndProjectDirection();
      } else if (this.engine.xr && this._input && this._input.xrInputSource) {
        this._direction[0] = 0;
        this._direction[1] = 0;
        this._direction[2] = -1;
        this.applyTransformToDirection();
      } else if (this._viewComponent) {
        this.updateDirection();
      }
      this.rayCast(null, this.engine.xr?.frame);
      if (this.cursorObject) {
        if (this.hoveringObject && (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {
          this._setCursorVisibility(true);
          this.cursorObject.setPositionWorld(this.cursorPos);
          this._setCursorRayTransform(this.cursorPos);
        } else {
          this._setCursorVisibility(false);
        }
      }
    }
    /* Returns the hovered cursor target, if available */
    notify(event, originalEvent) {
      const target = this.hoveringObject;
      if (target) {
        const cursorTarget = this.hoveringObjectTarget;
        if (cursorTarget)
          cursorTarget[event].notify(target, this, originalEvent ?? void 0);
        this.globalTarget[event].notify(target, this, originalEvent ?? void 0);
      }
    }
    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {
      const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;
      if (hit) {
        if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {
          if (this.hoveringObject) {
            this.notify("onUnhover", originalEvent);
          }
          this.hoveringObject = hit;
          this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);
          if (this.styleCursor)
            this.engine.canvas.style.cursor = "pointer";
          this.notify("onHover", originalEvent);
        }
      } else if (this.hoveringObject) {
        this.notify("onUnhover", originalEvent);
        this.hoveringObject = null;
        this.hoveringObjectTarget = null;
        if (this.styleCursor)
          this.engine.canvas.style.cursor = "default";
      }
      if (this.hoveringObject) {
        if (this._isDown !== this._lastIsDown) {
          this.notify(this._isDown ? "onDown" : "onUp", originalEvent);
        }
        if (doClick)
          this.notify("onClick", originalEvent);
      } else if (this.hoveringReality) {
        if (this._isDown !== this._lastIsDown) {
          (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? void 0);
        }
        if (doClick)
          this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? void 0);
      }
      if (hit) {
        if (this.hoveringObject) {
          this.hoveringObject.transformPointInverseWorld(tempVec2, this.cursorPos);
        } else {
          tempVec2.set(this.cursorPos);
        }
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, tempVec2)) {
          this.notify("onMove", originalEvent);
          this._lastCursorPosOnTarget.set(tempVec2);
        }
      } else if (this.hoveringReality) {
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, this.cursorPos)) {
          this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? void 0);
          this._lastCursorPosOnTarget.set(this.cursorPos);
        }
      } else {
        this._lastCursorPosOnTarget.set(this.cursorPos);
      }
      this._lastIsDown = this._isDown;
    }
    /**
     * Setup event listeners on session object
     * @param s WebXR session
     *
     * Sets up 'select' and 'end' events.
     */
    setupVREvents(s) {
      if (!s)
        console.error("setupVREvents called without a valid session");
      if (!this.active)
        return;
      const onSelect = this.onSelect.bind(this);
      s.addEventListener("select", onSelect);
      const onSelectStart = this.onSelectStart.bind(this);
      s.addEventListener("selectstart", onSelectStart);
      const onSelectEnd = this.onSelectEnd.bind(this);
      s.addEventListener("selectend", onSelectEnd);
      this._onDeactivateCallbacks.push(() => {
        if (!this.engine.xr)
          return;
        s.removeEventListener("select", onSelect);
        s.removeEventListener("selectstart", onSelectStart);
        s.removeEventListener("selectend", onSelectEnd);
      });
      this._onViewportResize();
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this._onSessionStartCallback);
      this.engine.onResize.remove(this._onViewportResize);
      this._setCursorVisibility(false);
      if (this.hoveringObject)
        this.notify("onUnhover", null);
      if (this.cursorRayObject)
        this.cursorRayObject.setScalingLocal(ZERO);
      for (const f2 of this._onDeactivateCallbacks)
        f2();
      this._onDeactivateCallbacks.length = 0;
    }
    onDestroy() {
      this._hitTestObject?.destroy();
    }
    /** 'select' event listener */
    onSelect(e) {
      if (e.inputSource.handedness != this.handedness)
        return;
      this.rayCast(e, e.frame, true);
    }
    /** 'selectstart' event listener */
    onSelectStart(e) {
      this._arTouchDown = true;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = true;
        this.rayCast(e, e.frame);
      }
    }
    /** 'selectend' event listener */
    onSelectEnd(e) {
      this._arTouchDown = false;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = false;
        this.rayCast(e, e.frame);
      }
    }
    /** 'pointermove' event listener */
    onPointerMove(e) {
      if (!e.isPrimary)
        return;
      this.updateMousePos(e);
      this.rayCast(e, null);
    }
    /** 'click' event listener */
    onClick(e) {
      this.updateMousePos(e);
      this.rayCast(e, null, true);
    }
    /** 'pointerdown' event listener */
    onPointerDown(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = true;
      this.rayCast(e);
    }
    /** 'pointerup' event listener */
    onPointerUp(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = false;
      this.rayCast(e);
    }
    /**
     * Update mouse position in non-VR mode and raycast for new position
     * @returns @ref WL.RayHit for new position.
     */
    updateMousePos(e) {
      this._lastPointerPos[0] = e.clientX;
      this._lastPointerPos[1] = e.clientY;
      this.updateDirection();
    }
    updateDirection() {
      const bounds = this.engine.canvas.getBoundingClientRect();
      const left = this._lastPointerPos[0] / bounds.width;
      const top = this._lastPointerPos[1] / bounds.height;
      this._direction[0] = left * 2 - 1;
      this._direction[1] = -top * 2 + 1;
      this._direction[2] = -1;
      this.applyTransformAndProjectDirection();
    }
    applyTransformAndProjectDirection() {
      vec3_exports.transformMat4(this._direction, this._direction, this._projectionMatrix);
      vec3_exports.normalize(this._direction, this._direction);
      this.applyTransformToDirection();
    }
    applyTransformToDirection() {
      this.object.transformVectorWorld(this._direction, this._direction);
      this.object.getPositionWorld(this._origin);
    }
    rayCast(originalEvent, frame = null, doClick = false) {
      const rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask) : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);
      let hitResultDistance = Infinity;
      let hitTestResult = null;
      if (this._hitTestLocation?.visible) {
        this._hitTestObject.getPositionWorld(this.cursorPos);
        hitResultDistance = vec3_exports.distance(this.object.getPositionWorld(tempVec2), this.cursorPos);
        hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];
      }
      let hoveringReality = false;
      if (rayHit.hitCount > 0) {
        const d = rayHit.distances[0];
        if (hitResultDistance >= d) {
          this.cursorPos.set(rayHit.locations[0]);
        } else {
          hoveringReality = true;
        }
      } else if (hitResultDistance < Infinity) {
      } else {
        this.cursorPos.fill(0);
      }
      if (hoveringReality && !this.hoveringReality) {
        this.hitTestTarget.onHover.notify(hitTestResult, this);
      } else if (!hoveringReality && this.hoveringReality) {
        this.hitTestTarget.onUnhover.notify(hitTestResult, this);
      }
      this.hoveringReality = hoveringReality;
      this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);
      return rayHit;
    }
  };
  __publicField(Cursor, "TypeName", "cursor");
  /* Dependencies is deprecated, but we keep it here for compatibility
   * with 1.0.0-rc2 until 1.0.0 is released */
  __publicField(Cursor, "Dependencies", [HitTestLocation]);
  __decorate10([
    property.int(1)
  ], Cursor.prototype, "collisionGroup", void 0);
  __decorate10([
    property.object()
  ], Cursor.prototype, "cursorRayObject", void 0);
  __decorate10([
    property.enum(["x", "y", "z", "none"], "z")
  ], Cursor.prototype, "cursorRayScalingAxis", void 0);
  __decorate10([
    property.object()
  ], Cursor.prototype, "cursorObject", void 0);
  __decorate10([
    property.enum(["input component", "left", "right", "none"], "input component")
  ], Cursor.prototype, "handedness", void 0);
  __decorate10([
    property.enum(["collision", "physx"], "collision")
  ], Cursor.prototype, "rayCastMode", void 0);
  __decorate10([
    property.float(100)
  ], Cursor.prototype, "maxDistance", void 0);
  __decorate10([
    property.bool(true)
  ], Cursor.prototype, "styleCursor", void 0);
  __decorate10([
    property.bool(false)
  ], Cursor.prototype, "useWebXRHitTest", void 0);

  // node_modules/@wonderlandengine/components/dist/debug-object.js
  var __decorate11 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DebugObject = class extends Component {
    /** A second object to print the name of */
    obj = null;
    start() {
      let origin = new Float32Array(3);
      quat2_exports.getTranslation(origin, this.object.transformWorld);
      console.log("Debug object:", this.object.name);
      console.log("Other object:", this.obj?.name);
      console.log("	translation", origin);
      console.log("	transformWorld", this.object.transformWorld);
      console.log("	transformLocal", this.object.transformLocal);
    }
  };
  __publicField(DebugObject, "TypeName", "debug-object");
  __decorate11([
    property.object()
  ], DebugObject.prototype, "obj", void 0);

  // node_modules/@wonderlandengine/components/dist/device-orientation-look.js
  function quatFromEulerYXZ(out, x, y, z) {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);
    out[0] = s1 * c2 * c3 + c1 * s2 * s3;
    out[1] = c1 * s2 * c3 - s1 * c2 * s3;
    out[2] = c1 * c2 * s3 - s1 * s2 * c3;
    out[3] = c1 * c2 * c3 + s1 * s2 * s3;
  }
  var DeviceOrientationLook = class extends Component {
    start() {
      this.rotationX = 0;
      this.rotationY = 0;
      this.lastClientX = -1;
      this.lastClientY = -1;
    }
    init() {
      this.deviceOrientation = [0, 0, 0, 1];
      this.screenOrientation = window.innerHeight > window.innerWidth ? 0 : 90;
      this._origin = [0, 0, 0];
      window.addEventListener("deviceorientation", function(e) {
        let alpha = e.alpha || 0;
        let beta = e.beta || 0;
        let gamma = e.gamma || 0;
        const toRad = Math.PI / 180;
        quatFromEulerYXZ(this.deviceOrientation, beta * toRad, alpha * toRad, -gamma * toRad);
      }.bind(this));
      window.addEventListener("orientationchange", function(e) {
        this.screenOrientation = window.orientation || 0;
      }.bind(this), false);
    }
    update() {
      if (this.engine.xr)
        return;
      this.object.getTranslationLocal(this._origin);
      this.object.resetTransform();
      if (this.screenOrientation != 0) {
        this.object.rotateAxisAngleDeg([0, 0, -1], this.screenOrientation);
      }
      this.object.rotate([-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)]);
      this.object.rotate(this.deviceOrientation);
      this.object.translate(this._origin);
    }
  };
  __publicField(DeviceOrientationLook, "TypeName", "device-orientation-look");
  __publicField(DeviceOrientationLook, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/finger-cursor.js
  var FingerCursor = class extends Component {
    init() {
      this.lastTarget = null;
    }
    start() {
      this.tip = this.object.getComponent("collision");
    }
    update() {
      const overlaps = this.tip.queryOverlaps();
      let overlapFound = null;
      for (let i = 0; i < overlaps.length; ++i) {
        const o = overlaps[i].object;
        const target = o.getComponent("cursor-target");
        if (target) {
          if (!target.equals(this.lastTarget)) {
            target.onHover(o, this);
            target.onClick(o, this);
          }
          overlapFound = target;
          break;
        }
      }
      if (!overlapFound) {
        if (this.lastTarget)
          this.lastTarget.onUnhover(this.lastTarget.object, this);
        this.lastTarget = null;
        return;
      } else {
        this.lastTarget = overlapFound;
      }
    }
  };
  __publicField(FingerCursor, "TypeName", "finger-cursor");
  __publicField(FingerCursor, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/fixed-foveation.js
  var FixedFoveation = class extends Component {
    start() {
      this.onSessionStartCallback = this.setFixedFoveation.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setFixedFoveation() {
      this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;
    }
  };
  __publicField(FixedFoveation, "TypeName", "fixed-foveation");
  __publicField(FixedFoveation, "Properties", {
    /** Amount to apply from 0 (none) to 1 (full) */
    fixedFoveation: { type: Type.Float, default: 0.5 }
  });

  // node_modules/@wonderlandengine/components/dist/hand-tracking.js
  var __decorate12 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ORDERED_JOINTS = [
    "wrist",
    "thumb-metacarpal",
    "thumb-phalanx-proximal",
    "thumb-phalanx-distal",
    "thumb-tip",
    "index-finger-metacarpal",
    "index-finger-phalanx-proximal",
    "index-finger-phalanx-intermediate",
    "index-finger-phalanx-distal",
    "index-finger-tip",
    "middle-finger-metacarpal",
    "middle-finger-phalanx-proximal",
    "middle-finger-phalanx-intermediate",
    "middle-finger-phalanx-distal",
    "middle-finger-tip",
    "ring-finger-metacarpal",
    "ring-finger-phalanx-proximal",
    "ring-finger-phalanx-intermediate",
    "ring-finger-phalanx-distal",
    "ring-finger-tip",
    "pinky-finger-metacarpal",
    "pinky-finger-phalanx-proximal",
    "pinky-finger-phalanx-intermediate",
    "pinky-finger-phalanx-distal",
    "pinky-finger-tip"
  ];
  var invTranslation = vec3_exports.create();
  var invRotation = quat_exports.create();
  var tempVec0 = vec3_exports.create();
  var tempVec1 = vec3_exports.create();
  var HandTracking = class extends Component {
    /** Handedness determining whether to receive tracking input from right or left hand */
    handedness = 0;
    /** (optional) Mesh to use to visualize joints */
    jointMesh = null;
    /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */
    jointMaterial = null;
    /** (optional) Skin to apply tracked joint poses to. If not present,
     * joint spheres will be used for display instead. */
    handSkin = null;
    /** Deactivate children if no pose was tracked */
    deactivateChildrenWithoutPose = true;
    /** Controller objects to activate including children if no pose is available */
    controllerToDeactivate = null;
    init() {
      this.handedness = ["left", "right"][this.handedness];
    }
    joints = {};
    session = null;
    /* Whether last update had a hand pose */
    hasPose = false;
    _childrenActive = true;
    start() {
      if (!("XRHand" in window)) {
        console.warn("WebXR Hand Tracking not supported by this browser.");
        this.active = false;
        return;
      }
      if (this.handSkin) {
        const skin = this.handSkin;
        const jointIds = skin.jointIds;
        this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);
        for (let j = 0; j < jointIds.length; ++j) {
          const joint = this.engine.wrapObject(jointIds[j]);
          this.joints[joint.name] = joint;
        }
        return;
      }
      const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object, ORDERED_JOINTS.length);
      for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
        const joint = jointObjects[j];
        joint.addComponent(MeshComponent, {
          mesh: this.jointMesh,
          material: this.jointMaterial
        });
        this.joints[ORDERED_JOINTS[j]] = joint;
        joint.name = ORDERED_JOINTS[j];
      }
    }
    update(dt) {
      if (!this.engine.xr)
        return;
      this.hasPose = false;
      if (this.engine.xr.session.inputSources) {
        for (let i = 0; i < this.engine.xr.session.inputSources.length; ++i) {
          const inputSource = this.engine.xr.session.inputSources[i];
          if (!inputSource?.hand || inputSource?.handedness != this.handedness)
            continue;
          const wristSpace = inputSource.hand.get("wrist");
          if (wristSpace) {
            const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);
            if (p) {
              setXRRigidTransformLocal(this.object, p.transform);
            }
          }
          this.object.getRotationLocal(invRotation);
          quat_exports.conjugate(invRotation, invRotation);
          this.object.getPositionLocal(invTranslation);
          this.joints["wrist"].resetTransform();
          for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
            const jointName = ORDERED_JOINTS[j];
            const joint = this.joints[jointName];
            if (!joint)
              continue;
            let jointPose = null;
            const jointSpace = inputSource.hand.get(jointName);
            if (jointSpace) {
              jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);
            }
            if (jointPose) {
              this.hasPose = true;
              joint.resetPositionRotation();
              joint.translateLocal([
                jointPose.transform.position.x - invTranslation[0],
                jointPose.transform.position.y - invTranslation[1],
                jointPose.transform.position.z - invTranslation[2]
              ]);
              joint.rotateLocal(invRotation);
              joint.rotateObject([
                jointPose.transform.orientation.x,
                jointPose.transform.orientation.y,
                jointPose.transform.orientation.z,
                jointPose.transform.orientation.w
              ]);
              if (!this.handSkin) {
                const r = jointPose.radius || 7e-3;
                joint.setScalingLocal([r, r, r]);
              }
            }
          }
        }
      }
      if (!this.hasPose && this._childrenActive) {
        this._childrenActive = false;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(false);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = true;
          this.setChildrenActive(true, this.controllerToDeactivate);
        }
      } else if (this.hasPose && !this._childrenActive) {
        this._childrenActive = true;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(true);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = false;
          this.setChildrenActive(false, this.controllerToDeactivate);
        }
      }
    }
    setChildrenActive(active, object) {
      object = object || this.object;
      const children = object.children;
      for (const o of children) {
        o.active = active;
        this.setChildrenActive(active, o);
      }
    }
    isGrabbing() {
      this.joints["index-finger-tip"].getPositionLocal(tempVec0);
      this.joints["thumb-tip"].getPositionLocal(tempVec1);
      return vec3_exports.sqrDist(tempVec0, tempVec1) < 1e-3;
    }
  };
  __publicField(HandTracking, "TypeName", "hand-tracking");
  __decorate12([
    property.enum(["left", "right"])
  ], HandTracking.prototype, "handedness", void 0);
  __decorate12([
    property.mesh()
  ], HandTracking.prototype, "jointMesh", void 0);
  __decorate12([
    property.material()
  ], HandTracking.prototype, "jointMaterial", void 0);
  __decorate12([
    property.skin()
  ], HandTracking.prototype, "handSkin", void 0);
  __decorate12([
    property.bool(true)
  ], HandTracking.prototype, "deactivateChildrenWithoutPose", void 0);
  __decorate12([
    property.object()
  ], HandTracking.prototype, "controllerToDeactivate", void 0);

  // node_modules/@wonderlandengine/components/dist/howler-audio-listener.js
  var import_howler = __toESM(require_howler(), 1);
  var HowlerAudioListener = class extends Component {
    init() {
      this.origin = new Float32Array(3);
      this.fwd = new Float32Array(3);
      this.up = new Float32Array(3);
    }
    update() {
      if (!this.spatial)
        return;
      this.object.getTranslationWorld(this.origin);
      this.object.getForward(this.fwd);
      this.object.getUp(this.up);
      Howler.pos(this.origin[0], this.origin[1], this.origin[2]);
      Howler.orientation(this.fwd[0], this.fwd[1], this.fwd[2], this.up[0], this.up[1], this.up[2]);
    }
  };
  __publicField(HowlerAudioListener, "TypeName", "howler-audio-listener");
  __publicField(HowlerAudioListener, "Properties", {
    /** Whether audio should be spatialized/positional. */
    spatial: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/howler-audio-source.js
  var import_howler2 = __toESM(require_howler(), 1);
  var HowlerAudioSource = class extends Component {
    start() {
      this.audio = new Howl({
        src: [this.src],
        loop: this.loop,
        volume: this.volume,
        autoplay: this.autoplay
      });
      this.lastPlayedAudioId = null;
      this.origin = new Float32Array(3);
      this.lastOrigin = new Float32Array(3);
      if (this.spatial && this.autoplay) {
        this.updatePosition();
        this.play();
      }
    }
    update() {
      if (!this.spatial || !this.lastPlayedAudioId)
        return;
      this.object.getTranslationWorld(this.origin);
      if (Math.abs(this.lastOrigin[0] - this.origin[0]) > 5e-3 || Math.abs(this.lastOrigin[1] - this.origin[1]) > 5e-3 || Math.abs(this.lastOrigin[2] - this.origin[2]) > 5e-3) {
        this.updatePosition();
      }
    }
    updatePosition() {
      this.audio.pos(this.origin[0], this.origin[1], this.origin[2], this.lastPlayedAudioId);
      this.lastOrigin.set(this.origin);
    }
    play() {
      if (this.lastPlayedAudioId)
        this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = this.audio.play();
      if (this.spatial)
        this.updatePosition();
    }
    stop() {
      if (!this.lastPlayedAudioId)
        return;
      this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = null;
    }
    onDeactivate() {
      this.stop();
    }
  };
  __publicField(HowlerAudioSource, "TypeName", "howler-audio-source");
  __publicField(HowlerAudioSource, "Properties", {
    /** Volume */
    volume: { type: Type.Float, default: 1 },
    /** Whether audio should be spatialized/positional */
    spatial: { type: Type.Bool, default: true },
    /** Whether to loop the sound */
    loop: { type: Type.Bool, default: false },
    /** Whether to start playing automatically */
    autoplay: { type: Type.Bool, default: false },
    /** URL to a sound file to play */
    src: { type: Type.String, default: "" }
  });

  // node_modules/@wonderlandengine/components/dist/utils/utils.js
  function setFirstMaterialTexture(mat, texture, customTextureProperty) {
    if (customTextureProperty !== "auto") {
      mat[customTextureProperty] = texture;
      return true;
    }
    const shader = mat.shader;
    if (shader === "Flat Opaque Textured") {
      mat.flatTexture = texture;
      return true;
    } else if (shader === "Phong Opaque Textured" || shader === "Foliage" || shader === "Phong Normalmapped" || shader === "Phong Lightmapped") {
      mat.diffuseTexture = texture;
      return true;
    } else if (shader === "Particle") {
      mat.mainTexture = texture;
      return true;
    } else if (shader === "DistanceFieldVector") {
      mat.vectorTexture = texture;
      return true;
    } else if (shader === "Background" || shader === "Sky") {
      mat.texture = texture;
      return true;
    } else if (shader === "Physical Opaque Textured") {
      mat.albedoTexture = texture;
      return true;
    }
    return false;
  }
  function deg2rad(value) {
    return value * Math.PI / 180;
  }
  function rad2deg(value) {
    return value * 180 / Math.PI;
  }

  // node_modules/@wonderlandengine/components/dist/image-texture.js
  var ImageTexture = class extends Component {
    start() {
      if (!this.material) {
        throw Error("image-texture: material property not set");
      }
      this.engine.textures.load(this.url, "anonymous").then((texture) => {
        const mat = this.material;
        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
          console.error("Shader", mat.shader, "not supported by image-texture");
        }
      }).catch(console.err);
    }
  };
  __publicField(ImageTexture, "TypeName", "image-texture");
  __publicField(ImageTexture, "Properties", {
    /** URL to download the image from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/mouse-look.js
  var __decorate13 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault = (e) => {
    e.preventDefault();
  };
  var MouseLookComponent = class extends Component {
    /** Mouse look sensitivity */
    sensitity = 0.25;
    /** Require a mouse button to be pressed to control view.
     * Otherwise view will allways follow mouse movement */
    requireMouseDown = true;
    /** If "moveOnClick" is enabled, mouse button which should
     * be held down to control view */
    mouseButtonIndex = 0;
    /** Enables pointer lock on "mousedown" event on canvas */
    pointerLockOnClick = false;
    currentRotationY = 0;
    currentRotationX = 0;
    origin = new Float32Array(3);
    parentOrigin = new Float32Array(3);
    rotationX = 0;
    rotationY = 0;
    mouseDown = false;
    onActivate() {
      document.addEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.addEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.addEventListener("contextmenu", preventDefault, false);
        }
        canvas2.addEventListener("mousedown", this.onMouseDown);
        canvas2.addEventListener("mouseup", this.onMouseUp);
      }
    }
    onDeactivate() {
      document.removeEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.removeEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.removeEventListener("contextmenu", preventDefault, false);
        }
        canvas2.removeEventListener("mousedown", this.onMouseDown);
        canvas2.removeEventListener("mouseup", this.onMouseUp);
      }
    }
    requestPointerLock = () => {
      const canvas2 = this.engine.canvas;
      canvas2.requestPointerLock = canvas2.requestPointerLock || canvas2.mozRequestPointerLock || canvas2.webkitRequestPointerLock;
      canvas2.requestPointerLock();
    };
    onMouseDown = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    onMouseUp = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    onMouseMove = (e) => {
      if (this.active && (this.mouseDown || !this.requireMouseDown)) {
        this.rotationY = -this.sensitity * e.movementX / 100;
        this.rotationX = -this.sensitity * e.movementY / 100;
        this.currentRotationX += this.rotationX;
        this.currentRotationY += this.rotationY;
        this.currentRotationX = Math.min(1.507, this.currentRotationX);
        this.currentRotationX = Math.max(-1.507, this.currentRotationX);
        this.object.getPositionWorld(this.origin);
        const parent = this.object.parent;
        if (parent) {
          parent.getPositionWorld(this.parentOrigin);
          vec3_exports.sub(this.origin, this.origin, this.parentOrigin);
        }
        this.object.resetPositionRotation();
        this.object.rotateAxisAngleRadLocal([1, 0, 0], this.currentRotationX);
        this.object.rotateAxisAngleRadLocal([0, 1, 0], this.currentRotationY);
        this.object.translateLocal(this.origin);
      }
    };
  };
  __publicField(MouseLookComponent, "TypeName", "mouse-look");
  __decorate13([
    property.float(0.25)
  ], MouseLookComponent.prototype, "sensitity", void 0);
  __decorate13([
    property.bool(true)
  ], MouseLookComponent.prototype, "requireMouseDown", void 0);
  __decorate13([
    property.int()
  ], MouseLookComponent.prototype, "mouseButtonIndex", void 0);
  __decorate13([
    property.bool(false)
  ], MouseLookComponent.prototype, "pointerLockOnClick", void 0);

  // node_modules/@wonderlandengine/components/dist/player-height.js
  var __decorate14 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PlayerHeight = class extends Component {
    height = 1.75;
    onSessionStartCallback;
    onSessionEndCallback;
    start() {
      this.object.resetPositionRotation();
      this.object.translateLocal([0, this.height, 0]);
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    onXRSessionStart() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
      }
    }
    onXRSessionEnd() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
        this.object.translateLocal([0, this.height, 0]);
      }
    }
  };
  __publicField(PlayerHeight, "TypeName", "player-height");
  __decorate14([
    property.float(1.75)
  ], PlayerHeight.prototype, "height", void 0);

  // node_modules/@wonderlandengine/components/dist/target-framerate.js
  var TargetFramerate = class extends Component {
    start() {
      this.onSessionStartCallback = this.setTargetFramerate.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setTargetFramerate(s) {
      if (s.supportedFrameRates && s.updateTargetFrameRate) {
        const a = this.engine.xr.session.supportedFrameRates;
        a.sort((a2, b) => Math.abs(a2 - this.framerate) - Math.abs(b - this.framerate));
        this.engine.xr.session.updateTargetFrameRate(a[0]);
      }
    }
  };
  __publicField(TargetFramerate, "TypeName", "target-framerate");
  __publicField(TargetFramerate, "Properties", {
    framerate: { type: Type.Float, default: 90 }
  });

  // node_modules/@wonderlandengine/components/dist/teleport.js
  var TeleportComponent = class extends Component {
    init() {
      this._prevThumbstickAxis = new Float32Array(2);
      this._tempVec = new Float32Array(3);
      this._tempVec0 = new Float32Array(3);
      this._currentIndicatorRotation = 0;
      this.input = this.object.getComponent("input");
      if (!this.input) {
        console.error(this.object.name, "generic-teleport-component.js: input component is required on the object");
        return;
      }
      if (!this.teleportIndicatorMeshObject) {
        console.error(this.object.name, "generic-teleport-component.js: Teleport indicator mesh is missing");
        return;
      }
      if (!this.camRoot) {
        console.error(this.object.name, "generic-teleport-component.js: camRoot not set");
        return;
      }
      this.isIndicating = false;
      this.indicatorHidden = true;
      this.hitSpot = new Float32Array(3);
      this._hasHit = false;
      this._extraRotation = 0;
      this._currentStickAxes = new Float32Array(2);
    }
    start() {
      if (this.cam) {
        this.isMouseIndicating = false;
        canvas.addEventListener("mousedown", this.onMouseDown.bind(this));
        canvas.addEventListener("mouseup", this.onMouseUp.bind(this));
      }
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("teleport component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness;
          this.input = inputComp;
        }
      } else {
        this.handedness = ["left", "right"][this.handedness - 1];
      }
      this.onSessionStartCallback = this.setupVREvents.bind(this);
      this.teleportIndicatorMeshObject.active = false;
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    /* Get current camera Y rotation */
    _getCamRotation() {
      this.eyeLeft.getForward(this._tempVec);
      this._tempVec[1] = 0;
      vec3_exports.normalize(this._tempVec, this._tempVec);
      return Math.atan2(this._tempVec[0], this._tempVec[2]);
    }
    update() {
      let inputLength = 0;
      if (this.gamepad && this.gamepad.axes) {
        this._currentStickAxes[0] = this.gamepad.axes[2];
        this._currentStickAxes[1] = this.gamepad.axes[3];
        inputLength = Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);
      }
      if (!this.isIndicating && this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold && this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {
        this.isIndicating = true;
      } else if (this.isIndicating && inputLength < this.thumbstickDeactivationThreshhold) {
        this.isIndicating = false;
        this.teleportIndicatorMeshObject.active = false;
        if (this._hasHit) {
          this._teleportPlayer(this.hitSpot, this._extraRotation);
        }
      }
      if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {
        const origin = this._tempVec0;
        this.object.getPositionWorld(origin);
        const direction2 = this.object.getForwardWorld(this._tempVec);
        let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
        if (rayHit.hitCount > 0) {
          this.indicatorHidden = false;
          this._extraRotation = Math.PI + Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);
          this._currentIndicatorRotation = this._getCamRotation() + (this._extraRotation - Math.PI);
          this.teleportIndicatorMeshObject.resetPositionRotation();
          this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
          this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
          this.teleportIndicatorMeshObject.translate([
            0,
            this.indicatorYOffset,
            0
          ]);
          this.teleportIndicatorMeshObject.active = true;
          this.hitSpot.set(rayHit.locations[0]);
          this._hasHit = true;
        } else {
          if (!this.indicatorHidden) {
            this.teleportIndicatorMeshObject.active = false;
            this.indicatorHidden = true;
          }
          this._hasHit = false;
        }
      } else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {
        this.onMousePressed();
      }
      this._prevThumbstickAxis.set(this._currentStickAxes);
    }
    setupVREvents(s) {
      this.session = s;
      s.addEventListener("end", function() {
        this.gamepad = null;
        this.session = null;
      }.bind(this));
      if (s.inputSources && s.inputSources.length) {
        for (let i = 0; i < s.inputSources.length; i++) {
          let inputSource = s.inputSources[i];
          if (inputSource.handedness == this.handedness) {
            this.gamepad = inputSource.gamepad;
          }
        }
      }
      s.addEventListener("inputsourceschange", function(e) {
        if (e.added && e.added.length) {
          for (let i = 0; i < e.added.length; i++) {
            let inputSource = e.added[i];
            if (inputSource.handedness == this.handedness) {
              this.gamepad = inputSource.gamepad;
            }
          }
        }
      }.bind(this));
    }
    onMouseDown() {
      this.isMouseIndicating = true;
    }
    onMouseUp() {
      this.isMouseIndicating = false;
      this.teleportIndicatorMeshObject.active = false;
      if (this._hasHit) {
        this._teleportPlayer(this.hitSpot, 0);
      }
    }
    onMousePressed() {
      let origin = [0, 0, 0];
      this.cam.getPositionWorld(origin);
      const direction2 = this.cam.getForward(this._tempVec);
      let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
      if (rayHit.hitCount > 0) {
        this.indicatorHidden = false;
        direction2[1] = 0;
        vec3_exports.normalize(direction2, direction2);
        this._currentIndicatorRotation = -Math.sign(direction2[2]) * Math.acos(direction2[0]) - Math.PI * 0.5;
        this.teleportIndicatorMeshObject.resetPositionRotation();
        this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
        this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
        this.teleportIndicatorMeshObject.active = true;
        this.hitSpot = rayHit.locations[0];
        this._hasHit = true;
      } else {
        if (!this.indicatorHidden) {
          this.teleportIndicatorMeshObject.active = false;
          this.indicatorHidden = true;
        }
        this._hasHit = false;
      }
    }
    _teleportPlayer(newPosition, rotationToAdd) {
      this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);
      const p = this._tempVec;
      const p1 = this._tempVec0;
      if (this.session) {
        this.eyeLeft.getPositionWorld(p);
        this.eyeRight.getPositionWorld(p1);
        vec3_exports.add(p, p, p1);
        vec3_exports.scale(p, p, 0.5);
      } else {
        this.cam.getPositionWorld(p);
      }
      this.camRoot.getPositionWorld(p1);
      vec3_exports.sub(p, p1, p);
      p[0] += newPosition[0];
      p[1] = newPosition[1];
      p[2] += newPosition[2];
      this.camRoot.setPositionWorld(p);
    }
  };
  __publicField(TeleportComponent, "TypeName", "teleport");
  __publicField(TeleportComponent, "Properties", {
    /** Object that will be placed as indiciation forwhere the player will teleport to. */
    teleportIndicatorMeshObject: { type: Type.Object },
    /** Root of the player, the object that will be positioned on teleportation. */
    camRoot: { type: Type.Object },
    /** Non-vr camera for use outside of VR */
    cam: { type: Type.Object },
    /** Left eye for use in VR*/
    eyeLeft: { type: Type.Object },
    /** Right eye for use in VR*/
    eyeRight: { type: Type.Object },
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness: {
      type: Type.Enum,
      values: ["input component", "left", "right", "none"],
      default: "input component"
    },
    /** Collision group of valid "floor" objects that can be teleported on */
    floorGroup: { type: Type.Int, default: 1 },
    /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */
    thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },
    /** How far the thumbstick needs to be released to execute the teleport */
    thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },
    /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */
    indicatorYOffset: { type: Type.Float, default: 0.01 },
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode: {
      type: Type.Enum,
      values: ["collision", "physx"],
      default: "collision"
    },
    /** Max distance for PhysX raycast */
    maxDistance: { type: Type.Float, default: 100 }
  });

  // node_modules/@wonderlandengine/components/dist/trail.js
  var __decorate15 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var direction = vec3_exports.create();
  var offset = vec3_exports.create();
  var normal = vec3_exports.create();
  var UP = vec3_exports.fromValues(0, 1, 0);
  var Trail = class extends Component {
    /** The material to apply to the trail mesh */
    material = null;
    /** The number of segments in the trail mesh */
    segments = 50;
    /** The time interval before recording a new point */
    interval = 0.1;
    /** The width of the trail (in world space) */
    width = 1;
    /** Whether or not the trail should taper off */
    taper = true;
    /**
     * The maximum delta time in seconds, above which the trail resets.
     * This prevents the trail from jumping around when updates happen
     * infrequently (e.g. when the tab doesn't have focus).
     */
    resetThreshold = 0.5;
    _currentPointIndex = 0;
    _timeTillNext = 0;
    _points = [];
    _trailContainer = null;
    _meshComp = null;
    _mesh = null;
    _indexData = null;
    start() {
      this._points = new Array(this.segments + 1);
      for (let i = 0; i < this._points.length; ++i) {
        this._points[i] = vec3_exports.create();
      }
      this._timeTillNext = this.interval;
      this._trailContainer = this.engine.scene.addObject();
      this._meshComp = this._trailContainer.addComponent("mesh");
      this._meshComp.material = this.material;
      const vertexCount = 2 * this._points.length;
      this._indexData = new Uint32Array(6 * this.segments);
      for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {
        this._indexData.subarray(v, v + 6).set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);
      }
      this._mesh = new Mesh(this.engine, {
        vertexCount,
        indexData: this._indexData,
        indexType: MeshIndexType.UnsignedInt
      });
      this._meshComp.mesh = this._mesh;
    }
    updateVertices() {
      if (!this._mesh)
        return;
      const positions = this._mesh.attribute(MeshAttribute.Position);
      const texCoords = this._mesh.attribute(MeshAttribute.TextureCoordinate);
      const normals = this._mesh.attribute(MeshAttribute.Normal);
      vec3_exports.set(direction, 0, 0, 0);
      for (let i = 0; i < this._points.length; ++i) {
        const curr = this._points[(this._currentPointIndex + i + 1) % this._points.length];
        const next = this._points[(this._currentPointIndex + i + 2) % this._points.length];
        if (i !== this._points.length - 1) {
          vec3_exports.sub(direction, next, curr);
        }
        vec3_exports.cross(offset, UP, direction);
        vec3_exports.normalize(offset, offset);
        const timeFraction = 1 - this._timeTillNext / this.interval;
        const fraction = (i - timeFraction) / this.segments;
        vec3_exports.scale(offset, offset, (this.taper ? fraction : 1) * this.width / 2);
        positions.set(i * 2, [
          curr[0] - offset[0],
          curr[1] - offset[1],
          curr[2] - offset[2]
        ]);
        positions.set(i * 2 + 1, [
          curr[0] + offset[0],
          curr[1] + offset[1],
          curr[2] + offset[2]
        ]);
        if (normals) {
          vec3_exports.cross(normal, direction, offset);
          vec3_exports.normalize(normal, normal);
          normals.set(i * 2, normal);
          normals.set(i * 2 + 1, normal);
        }
        if (texCoords) {
          texCoords.set(i * 2, [0, fraction]);
          texCoords.set(i * 2 + 1, [1, fraction]);
        }
      }
      this._mesh.update();
    }
    resetTrail() {
      this.object.getPositionWorld(this._points[0]);
      for (let i = 1; i < this._points.length; ++i) {
        vec3_exports.copy(this._points[i], this._points[0]);
      }
      this._currentPointIndex = 0;
      this._timeTillNext = this.interval;
    }
    update(dt) {
      this._timeTillNext -= dt;
      if (dt > this.resetThreshold) {
        this.resetTrail();
      }
      if (this._timeTillNext < 0) {
        this._currentPointIndex = (this._currentPointIndex + 1) % this._points.length;
        this._timeTillNext = this._timeTillNext % this.interval + this.interval;
      }
      this.object.getPositionWorld(this._points[this._currentPointIndex]);
      this.updateVertices();
    }
    onActivate() {
      this.resetTrail();
      if (this._meshComp)
        this._meshComp.active = true;
    }
    onDeactivate() {
      if (this._meshComp)
        this._meshComp.active = false;
    }
    onDestroy() {
      if (this._trailContainer)
        this._trailContainer.destroy();
      if (this._meshComp)
        this._meshComp.destroy();
      if (this._mesh)
        this._mesh.destroy();
    }
  };
  __publicField(Trail, "TypeName", "trail");
  __decorate15([
    property.material()
  ], Trail.prototype, "material", void 0);
  __decorate15([
    property.int(50)
  ], Trail.prototype, "segments", void 0);
  __decorate15([
    property.float(50)
  ], Trail.prototype, "interval", void 0);
  __decorate15([
    property.float(1)
  ], Trail.prototype, "width", void 0);
  __decorate15([
    property.bool(true)
  ], Trail.prototype, "taper", void 0);
  __decorate15([
    property.float(1)
  ], Trail.prototype, "resetThreshold", void 0);

  // node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js
  function clamp3(v, a, b) {
    return Math.max(a, Math.min(v, b));
  }
  var rootScaling = new Float32Array(3);
  var tempQuat3 = new Float32Array(4);
  var middlePos = new Float32Array(3);
  var endPos = new Float32Array(3);
  var targetPos = new Float32Array(3);
  var helperPos = new Float32Array(3);
  var rootTransform = new Float32Array(8);
  var middleTransform = new Float32Array(8);
  var endTransform = new Float32Array(8);
  var twoJointIK = function() {
    const ta = new Float32Array(3);
    const ca = new Float32Array(3);
    const ba = new Float32Array(3);
    const ab = new Float32Array(3);
    const cb = new Float32Array(3);
    const axis0 = new Float32Array(3);
    const axis1 = new Float32Array(3);
    const temp = new Float32Array(3);
    return function(root, middle, b, c, targetPos2, eps, helper) {
      ba.set(b);
      const lab = vec3_exports.length(ba);
      vec3_exports.sub(ta, b, c);
      const lcb = vec3_exports.length(ta);
      ta.set(targetPos2);
      const lat = clamp3(vec3_exports.length(ta), eps, lab + lcb - eps);
      ca.set(c);
      vec3_exports.scale(ab, b, -1);
      vec3_exports.sub(cb, c, b);
      vec3_exports.normalize(ca, ca);
      vec3_exports.normalize(ba, ba);
      vec3_exports.normalize(ab, ab);
      vec3_exports.normalize(cb, cb);
      vec3_exports.normalize(ta, ta);
      const ac_ab_0 = Math.acos(clamp3(vec3_exports.dot(ca, ba), -1, 1));
      const ba_bc_0 = Math.acos(clamp3(vec3_exports.dot(ab, cb), -1, 1));
      const ac_at_0 = Math.acos(clamp3(vec3_exports.dot(ca, ta), -1, 1));
      const ac_ab_1 = Math.acos(clamp3((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));
      const ba_bc_1 = Math.acos(clamp3((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));
      if (helper) {
        vec3_exports.sub(ba, helper, b);
        vec3_exports.normalize(ba, ba);
      }
      vec3_exports.cross(axis0, ca, ba);
      vec3_exports.normalize(axis0, axis0);
      vec3_exports.cross(axis1, c, targetPos2);
      vec3_exports.normalize(axis1, axis1);
      middle.transformVectorInverseLocal(temp, axis0);
      root.rotateAxisAngleRadObject(axis1, ac_at_0);
      root.rotateAxisAngleRadObject(axis0, ac_ab_1 - ac_ab_0);
      middle.rotateAxisAngleRadObject(axis0, ba_bc_1 - ba_bc_0);
    };
  }();
  var TwoJointIkSolver = class extends Component {
    time = 0;
    start() {
      this.root.getTransformLocal(rootTransform);
      this.middle.getTransformLocal(middleTransform);
      this.end.getTransformLocal(endTransform);
    }
    update(dt) {
      this.time += dt;
      this.root.setTransformLocal(rootTransform);
      this.middle.setTransformLocal(middleTransform);
      this.end.setTransformLocal(endTransform);
      this.root.getScalingWorld(rootScaling);
      this.middle.getPositionLocal(middlePos);
      this.end.getPositionLocal(endPos);
      this.middle.transformPointLocal(endPos, endPos);
      if (this.helper) {
        this.helper.getPositionWorld(helperPos);
        this.root.transformPointInverseWorld(helperPos, helperPos);
        vec3_exports.div(helperPos, helperPos, rootScaling);
      }
      this.target.getPositionWorld(targetPos);
      this.root.transformPointInverseWorld(targetPos, targetPos);
      vec3_exports.div(targetPos, targetPos, rootScaling);
      twoJointIK(this.root, this.middle, middlePos, endPos, targetPos, 0.01, this.helper ? helperPos : null, this.time);
      if (this.copyTargetRotation) {
        this.end.setRotationWorld(this.target.getRotationWorld(tempQuat3));
      }
    }
  };
  __publicField(TwoJointIkSolver, "TypeName", "two-joint-ik-solver");
  __publicField(TwoJointIkSolver, "Properties", {
    /** Root bone, never moves */
    root: Property.object(),
    /** Bone attached to the root */
    middle: Property.object(),
    /** Bone attached to the middle */
    end: Property.object(),
    /** Target the joins should reach for */
    target: Property.object(),
    /** Flag for copying rotation from target to end */
    copyTargetRotation: Property.bool(true),
    /** Helper object to use to determine joint rotation axis */
    helper: Property.object()
  });

  // node_modules/@wonderlandengine/components/dist/video-texture.js
  var VideoTexture = class extends Component {
    init() {
      if (!this.material) {
        throw Error("video-texture: material property not set");
      }
      this.loaded = false;
      this.frameUpdateRequested = true;
    }
    start() {
      this.video = document.createElement("video");
      this.video.src = this.url;
      this.video.crossOrigin = "anonymous";
      this.video.playsInline = true;
      this.video.loop = this.loop;
      this.video.muted = this.muted;
      this.video.addEventListener("playing", () => {
        this.loaded = true;
      });
      if (this.autoplay) {
        const playAfterUserGesture = () => {
          this.video.play();
          window.removeEventListener("click", playAfterUserGesture);
          window.removeEventListener("touchstart", playAfterUserGesture);
        };
        window.addEventListener("click", playAfterUserGesture);
        window.addEventListener("touchstart", playAfterUserGesture);
      }
    }
    applyTexture() {
      const mat = this.material;
      const shader = mat.shader;
      const texture = this.texture = new Texture(this.engine, this.video);
      if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
        console.error("Shader", shader, "not supported by video-texture");
      }
      if ("requestVideoFrameCallback" in this.video) {
        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
      } else {
        this.video.addEventListener("timeupdate", () => {
          this.frameUpdateRequested = true;
        });
      }
    }
    update(dt) {
      if (this.loaded && this.frameUpdateRequested) {
        if (this.texture) {
          this.texture.update();
        } else {
          this.applyTexture();
        }
        this.frameUpdateRequested = false;
      }
    }
    updateVideo() {
      this.frameUpdateRequested = true;
      this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
    }
  };
  __publicField(VideoTexture, "TypeName", "video-texture");
  __publicField(VideoTexture, "Properties", {
    /** URL to download video from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Whether to loop the video */
    loop: Property.bool(true),
    /** Whether to automatically start playing the video */
    autoplay: Property.bool(true),
    /** Whether to mute sound */
    muted: Property.bool(true),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js
  var VrModeActiveSwitch = class extends Component {
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onXRSessionEnd();
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== "vr-mode-active-switch");
      this.components = this.components.concat(comps);
      if (this.affectChildren) {
        let children = obj.children;
        for (let i = 0; i < children.length; ++i) {
          this.getComponents(children[i]);
        }
      }
    }
    setComponentsActive(active) {
      const comps = this.components;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    onXRSessionStart() {
      this.setComponentsActive(this.activateComponents == 0);
    }
    onXRSessionEnd() {
      this.setComponentsActive(this.activateComponents != 0);
    }
  };
  __publicField(VrModeActiveSwitch, "TypeName", "vr-mode-active-switch");
  __publicField(VrModeActiveSwitch, "Properties", {
    /** When components should be active: In VR or when not in VR */
    activateComponents: {
      type: Type.Enum,
      values: ["in VR", "in non-VR"],
      default: "in VR"
    },
    /** Whether child object's components should be affected */
    affectChildren: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/plane-detection.js
  var import_earcut = __toESM(require_earcut(), 1);
  var __decorate16 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec32 = new Float32Array(3);
  function extentsFromContour(out, points) {
    if (points.length == 0)
      return out;
    let absMaxX = Math.abs(points[0].x);
    let absMaxZ = Math.abs(points[0].z);
    for (let i = 1; i < points.length; ++i) {
      absMaxX = Math.max(absMaxX, Math.abs(points[i].x));
      absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));
    }
    out[0] = absMaxX;
    out[1] = 0;
    out[2] = absMaxZ;
  }
  function within(x, a, b) {
    if (a > b)
      return x < a && x > b;
    return x > a && x < b;
  }
  function isPointLocalOnXRPlanePolygon(p, plane) {
    const points = plane.polygon;
    if (points.length < 3)
      return false;
    const pX = p[0];
    const pZ = p[2];
    let intersections = 0;
    for (let n = 0, l2 = points.length - 1; n < points.length; ++n) {
      const aX = points[l2].x;
      const aZ = points[l2].z;
      const s = (points[n].z - aZ) / (points[n].x - aX);
      const x = Math.abs((pZ - aZ) / s);
      if (x >= 0 && x <= 1 && within(x + pX, aX, points[n].x))
        ++intersections;
      l2 = n;
    }
    return (intersections & 1) == 0;
  }
  function isPointWorldOnXRPlanePolygon(object, p, plane) {
    if (plane.polygon.length < 3)
      return false;
    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec32, p), plane);
  }
  function planeMeshFromContour(engine, points, meshToUpdate = null) {
    const vertexCount = points.length;
    const vertices = new Float32Array(vertexCount * 2);
    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {
      vertices[d] = points[i].x;
      vertices[d + 1] = points[i].z;
    }
    const triangles = (0, import_earcut.default)(vertices);
    const mesh = meshToUpdate || new Mesh(engine, {
      vertexCount,
      /* Assumption here that we will never have more than 256 points
       * in the detected plane meshes! */
      indexType: MeshIndexType.UnsignedByte,
      indexData: triangles
    });
    if (mesh.vertexCount !== vertexCount) {
      console.warn("vertexCount of meshToUpdate did not match required vertexCount");
      return mesh;
    }
    const positions = mesh.attribute(MeshAttribute.Position);
    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);
    const normals = mesh.attribute(MeshAttribute.Normal);
    tempVec32[1] = 0;
    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {
      tempVec32[0] = vertices[s];
      tempVec32[2] = vertices[s + 1];
      positions.set(i, tempVec32);
    }
    textureCoords?.set(0, vertices);
    if (normals) {
      tempVec32[0] = 0;
      tempVec32[1] = 1;
      tempVec32[2] = 0;
      for (let i = 0; i < vertexCount; ++i) {
        normals.set(i, tempVec32);
      }
    }
    if (meshToUpdate)
      mesh.update();
    return mesh;
  }
  var _planeLost, planeLost_fn, _planeFound, planeFound_fn, _planeUpdate, planeUpdate_fn, _planeUpdatePose, planeUpdatePose_fn;
  var PlaneDetection = class extends Component {
    constructor() {
      super(...arguments);
      __privateAdd(this, _planeLost);
      __privateAdd(this, _planeFound);
      __privateAdd(this, _planeUpdate);
      __privateAdd(this, _planeUpdatePose);
      /**
       * Material to assign to created plane meshes or `null` if meshes should not be created.
       */
      __publicField(this, "planeMaterial", null);
      /**
       * Collision mask to assign to newly created collision components or a negative value if
       * collision components should not be created.
       */
      __publicField(this, "collisionMask", -1);
      /** Map of all planes and their last updated timestamps */
      __publicField(this, "planes", /* @__PURE__ */ new Map());
      /** Objects generated for each XRPlane */
      __publicField(this, "planeObjects", /* @__PURE__ */ new Map());
      /** Called when a plane starts tracking */
      __publicField(this, "onPlaneFound", new Emitter());
      /** Called when a plane stops tracking */
      __publicField(this, "onPlaneLost", new Emitter());
    }
    update() {
      if (!this.engine.xr?.frame)
        return;
      if (this.engine.xr.frame.detectedPlanes === void 0) {
        console.error("plane-detection: WebXR feature not available.");
        this.active = false;
        return;
      }
      const detectedPlanes = this.engine.xr.frame.detectedPlanes;
      for (const [plane, _] of this.planes) {
        if (!detectedPlanes.has(plane)) {
          __privateMethod(this, _planeLost, planeLost_fn).call(this, plane);
        }
      }
      detectedPlanes.forEach((plane) => {
        if (this.planes.has(plane)) {
          if (plane.lastChangedTime > this.planes.get(plane)) {
            __privateMethod(this, _planeUpdate, planeUpdate_fn).call(this, plane);
          }
        } else {
          __privateMethod(this, _planeFound, planeFound_fn).call(this, plane);
        }
        __privateMethod(this, _planeUpdatePose, planeUpdatePose_fn).call(this, plane);
      });
    }
  };
  _planeLost = new WeakSet();
  planeLost_fn = function(plane) {
    this.planes.delete(plane);
    const o = this.planeObjects.get(plane);
    this.onPlaneLost.notify(plane, o);
    if (o.objectId > 0)
      o.destroy();
  };
  _planeFound = new WeakSet();
  planeFound_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const o = this.engine.scene.addObject(this.object);
    this.planeObjects.set(plane, o);
    if (this.planeMaterial) {
      o.addComponent(MeshComponent, {
        mesh: planeMeshFromContour(this.engine, plane.polygon),
        material: this.planeMaterial
      });
    }
    if (this.collisionMask >= 0) {
      extentsFromContour(tempVec32, plane.polygon);
      tempVec32[1] = 0.025;
      o.addComponent(CollisionComponent, {
        group: this.collisionMask,
        collider: Collider.Box,
        extents: tempVec32
      });
    }
    this.onPlaneFound.notify(plane, o);
  };
  _planeUpdate = new WeakSet();
  planeUpdate_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);
    if (!planeMesh)
      return;
    planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);
  };
  _planeUpdatePose = new WeakSet();
  planeUpdatePose_fn = function(plane) {
    const o = this.planeObjects.get(plane);
    const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);
    if (!pose) {
      o.active = false;
      return;
    }
    setXRRigidTransformLocal(o, pose.transform);
  };
  __publicField(PlaneDetection, "TypeName", "plane-detection");
  __decorate16([
    property.material()
  ], PlaneDetection.prototype, "planeMaterial", void 0);
  __decorate16([
    property.int()
  ], PlaneDetection.prototype, "collisionMask", void 0);

  // node_modules/@wonderlandengine/components/dist/vrm.js
  var VRM_ROLL_AXES = {
    X: [1, 0, 0],
    Y: [0, 1, 0],
    Z: [0, 0, 1]
  };
  var VRM_AIM_AXES = {
    PositiveX: [1, 0, 0],
    NegativeX: [-1, 0, 0],
    PositiveY: [0, 1, 0],
    NegativeY: [0, -1, 0],
    PositiveZ: [0, 0, 1],
    NegativeZ: [0, 0, -1]
  };
  var Vrm = class extends Component {
    /** Meta information about the VRM model */
    meta = null;
    /** The humanoid bones of the VRM model */
    bones = {
      /* Torso */
      hips: null,
      spine: null,
      chest: null,
      upperChest: null,
      neck: null,
      /* Head */
      head: null,
      leftEye: null,
      rightEye: null,
      jaw: null,
      /* Legs */
      leftUpperLeg: null,
      leftLowerLeg: null,
      leftFoot: null,
      leftToes: null,
      rightUpperLeg: null,
      rightLowerLeg: null,
      rightFoot: null,
      rightToes: null,
      /* Arms */
      leftShoulder: null,
      leftUpperArm: null,
      leftLowerArm: null,
      leftHand: null,
      rightShoulder: null,
      rightUpperArm: null,
      rightLowerArm: null,
      rightHand: null,
      /* Fingers */
      leftThumbMetacarpal: null,
      leftThumbProximal: null,
      leftThumbDistal: null,
      leftIndexProximal: null,
      leftIndexIntermediate: null,
      leftIndexDistal: null,
      leftMiddleProximal: null,
      leftMiddleIntermediate: null,
      leftMiddleDistal: null,
      leftRingProximal: null,
      leftRingIntermediate: null,
      leftRingDistal: null,
      leftLittleProximal: null,
      leftLittleIntermediate: null,
      leftLittleDistal: null,
      rightThumbMetacarpal: null,
      rightThumbProximal: null,
      rightThumbDistal: null,
      rightIndexProximal: null,
      rightIndexIntermediate: null,
      rightIndexDistal: null,
      rightMiddleProximal: null,
      rightMiddleIntermediate: null,
      rightMiddleDistal: null,
      rightRingProximal: null,
      rightRingIntermediate: null,
      rightRingDistal: null,
      rightLittleProximal: null,
      rightLittleIntermediate: null,
      rightLittleDistal: null
    };
    /** Rotations of the bones in the rest pose (T-pose) */
    restPose = {};
    /* All node constraints, ordered to deal with dependencies */
    _nodeConstraints = [];
    /* VRMC_springBone chains */
    _springChains = [];
    /* Spherical colliders for spring bones */
    _sphereColliders = [];
    /* Capsule shaped colliders for spring bones */
    _capsuleColliders = [];
    /* Indicates which meshes are rendered in first/third person views */
    _firstPersonAnnotations = [];
    /* Contains details for (bone type) lookAt behaviour */
    _lookAt = null;
    /* Whether or not the VRM component has been initialized with `initializeVrm` */
    _initialized = false;
    init() {
      this._tempV3 = vec3_exports.create();
      this._tempV3A = vec3_exports.create();
      this._tempV3B = vec3_exports.create();
      this._tempQuat = quat_exports.create();
      this._tempQuatA = quat_exports.create();
      this._tempQuatB = quat_exports.create();
      this._tempMat4A = mat4_exports.create();
      this._tempQuat2 = quat2_exports.create();
      this._tailToShape = vec3_exports.create();
      this._headToTail = vec3_exports.create();
      this._inertia = vec3_exports.create();
      this._stiffness = vec3_exports.create();
      this._external = vec3_exports.create();
      this._rightVector = vec3_exports.set(vec3_exports.create(), 1, 0, 0);
      this._upVector = vec3_exports.set(vec3_exports.create(), 0, 1, 0);
      this._forwardVector = vec3_exports.set(vec3_exports.create(), 0, 0, 1);
      this._identityQuat = quat_exports.identity(quat_exports.create());
      this._rad2deg = 180 / Math.PI;
    }
    start() {
      if (!this.src) {
        console.error("vrm: src property not set");
        return;
      }
      this.engine.scene.append(this.src, { loadGltfExtensions: true }).then(({ root, extensions }) => {
        root.children.forEach((child) => child.parent = this.object);
        this._initializeVrm(extensions);
        root.destroy();
      });
    }
    /**
     * Parses the VRM glTF extensions and initializes the vrm component.
     * @param {GLTFExtensions} extensions The glTF extensions for the VRM model
     */
    _initializeVrm(extensions) {
      if (this._initialized) {
        throw Error("VRM component has already been initialized");
      }
      const VRMC_vrm = extensions.root["VRMC_vrm"];
      if (!VRMC_vrm) {
        throw Error("Missing VRM extensions");
      }
      if (VRMC_vrm.specVersion !== "1.0") {
        throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);
      }
      this.meta = VRMC_vrm.meta;
      this._parseHumanoid(VRMC_vrm.humanoid, extensions);
      if (VRMC_vrm.firstPerson) {
        this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);
      }
      if (VRMC_vrm.lookAt) {
        this._parseLookAt(VRMC_vrm.lookAt);
      }
      this._findAndParseNodeConstraints(extensions);
      const springBone = extensions.root["VRMC_springBone"];
      if (springBone) {
        this._parseAndInitializeSpringBones(springBone, extensions);
      }
      this._initialized = true;
    }
    _parseHumanoid(humanoid, extensions) {
      for (const boneName in humanoid.humanBones) {
        if (!(boneName in this.bones)) {
          console.warn(`Unrecognized bone '${boneName}'`);
          continue;
        }
        const node = humanoid.humanBones[boneName].node;
        const objectId = extensions.idMapping[node];
        this.bones[boneName] = this.engine.wrapObject(objectId);
        this.restPose[boneName] = quat_exports.copy(quat_exports.create(), this.bones[boneName].rotationLocal);
      }
    }
    _parseFirstPerson(firstPerson, extensions) {
      for (const meshAnnotation of firstPerson.meshAnnotations) {
        const annotation = {
          node: this.engine.wrapObject(extensions.idMapping[meshAnnotation.node]),
          firstPerson: true,
          thirdPerson: true
        };
        switch (meshAnnotation.type) {
          case "firstPersonOnly":
            annotation.thirdPerson = false;
            break;
          case "thirdPersonOnly":
            annotation.firstPerson = false;
            break;
          case "both":
            break;
          case "auto":
            console.warn("First person mesh annotation type 'auto' is not supported, treating as 'both'!");
            break;
          default:
            console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);
            break;
        }
        this._firstPersonAnnotations.push(annotation);
      }
    }
    _parseLookAt(lookAt2) {
      if (lookAt2.type !== "bone") {
        console.warn(`Unsupported lookAt type '${lookAt2.type}', only 'bone' is supported`);
        return;
      }
      const parseRangeMap = (rangeMap) => {
        return {
          inputMaxValue: rangeMap.inputMaxValue,
          outputScale: rangeMap.outputScale
        };
      };
      this._lookAt = {
        offsetFromHeadBone: lookAt2.offsetFromHeadBone || [0, 0, 0],
        horizontalInner: parseRangeMap(lookAt2.rangeMapHorizontalInner),
        horizontalOuter: parseRangeMap(lookAt2.rangeMapHorizontalOuter),
        verticalDown: parseRangeMap(lookAt2.rangeMapVerticalDown),
        verticalUp: parseRangeMap(lookAt2.rangeMapVerticalUp)
      };
    }
    _findAndParseNodeConstraints(extensions) {
      const traverse = (object) => {
        const nodeExtensions = extensions.node[object.objectId];
        if (nodeExtensions && "VRMC_node_constraint" in nodeExtensions) {
          const nodeConstraintExtension = nodeExtensions["VRMC_node_constraint"];
          const constraint = nodeConstraintExtension.constraint;
          let type, axis;
          if ("roll" in constraint) {
            type = "roll";
            axis = VRM_ROLL_AXES[constraint.roll.rollAxis];
          } else if ("aim" in constraint) {
            type = "aim";
            axis = VRM_AIM_AXES[constraint.aim.aimAxis];
          } else if ("rotation" in constraint) {
            type = "rotation";
          }
          if (type) {
            const source = this.engine.wrapObject(extensions.idMapping[constraint[type].source]);
            this._nodeConstraints.push({
              type,
              source,
              destination: object,
              axis,
              weight: constraint[type].weight,
              /* Rest pose */
              destinationRestLocalRotation: quat_exports.copy(quat_exports.create(), object.rotationLocal),
              sourceRestLocalRotation: quat_exports.copy(quat_exports.create(), source.rotationLocal),
              sourceRestLocalRotationInv: quat_exports.invert(quat_exports.create(), source.rotationLocal)
            });
          } else {
            console.warn("Unrecognized or invalid VRMC_node_constraint, ignoring it");
          }
        }
        for (const child of object.children) {
          traverse(child);
        }
      };
      traverse(this.object);
    }
    _parseAndInitializeSpringBones(springBone, extensions) {
      const colliders = (springBone.colliders || []).map((collider, i) => {
        const shapeType = "capsule" in collider.shape ? "capsule" : "sphere";
        return {
          id: i,
          object: this.engine.wrapObject(extensions.idMapping[collider.node]),
          shape: {
            isCapsule: shapeType === "capsule",
            radius: collider.shape[shapeType].radius,
            offset: collider.shape[shapeType].offset,
            tail: collider.shape[shapeType].tail
          },
          cache: {
            head: vec3_exports.create(),
            tail: vec3_exports.create()
          }
        };
      });
      this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);
      this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);
      const colliderGroups = (springBone.colliderGroups || []).map((group) => ({
        name: group.name,
        colliders: group.colliders.map((c) => colliders[c])
      }));
      for (const spring of springBone.springs) {
        const joints = [];
        for (const joint of spring.joints) {
          const springJoint = {
            hitRadius: 0,
            stiffness: 1,
            gravityPower: 0,
            gravityDir: [0, -1, 0],
            dragForce: 0.5,
            node: null,
            state: null
          };
          Object.assign(springJoint, joint);
          springJoint.node = this.engine.wrapObject(extensions.idMapping[springJoint.node]);
          joints.push(springJoint);
        }
        const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);
        this._springChains.push({
          name: spring.name,
          center: spring.center ? this.engine.wrapObject(extensions.idMapping[spring.center]) : null,
          joints,
          sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),
          capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule)
        });
      }
      for (const springChain of this._springChains) {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const springBoneJoint = springChain.joints[i];
          const childSpringBoneJoint = springChain.joints[i + 1];
          const springBonePosition = springBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const childSpringBonePosition = childSpringBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const boneDirection = vec3_exports.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);
          const state = {
            prevTail: childSpringBonePosition,
            currentTail: vec3_exports.copy(vec3_exports.create(), childSpringBonePosition),
            initialLocalRotation: quat_exports.copy(quat_exports.create(), springBoneJoint.node.rotationLocal),
            initialLocalTransformInvert: quat2_exports.invert(quat2_exports.create(), springBoneJoint.node.transformLocal),
            boneAxis: vec3_exports.normalize(vec3_exports.create(), childSpringBoneJoint.node.getTranslationLocal(this._tempV3)),
            /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */
            boneLength: Math.max(0.01, vec3_exports.length(boneDirection)),
            /* Tail positions in center space, if needed */
            prevTailCenter: null,
            currentTailCenter: null
          };
          if (springChain.center) {
            state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3_exports.create(), childSpringBonePosition);
            state.currentTailCenter = vec3_exports.copy(vec3_exports.create(), childSpringBonePosition);
          }
          springBoneJoint.state = state;
        }
      }
    }
    update(dt) {
      if (!this._initialized) {
        return;
      }
      this._resolveLookAt();
      this._resolveConstraints();
      this._updateSpringBones(dt);
    }
    _rangeMap(rangeMap, input) {
      const maxValue = rangeMap.inputMaxValue;
      const outputScale = rangeMap.outputScale;
      return Math.min(input, maxValue) / maxValue * outputScale;
    }
    _resolveLookAt() {
      if (!this._lookAt || !this.lookAtTarget) {
        return;
      }
      const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);
      const lookAtTarget = this.lookAtTarget.getTranslationWorld(this._tempV3B);
      const lookAtDirection = vec3_exports.sub(this._tempV3A, lookAtTarget, lookAtSource);
      vec3_exports.normalize(lookAtDirection, lookAtDirection);
      this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);
      const z = vec3_exports.dot(lookAtDirection, this._forwardVector);
      const x = vec3_exports.dot(lookAtDirection, this._rightVector);
      const yaw = Math.atan2(x, z) * this._rad2deg;
      const xz = Math.sqrt(x * x + z * z);
      const y = vec3_exports.dot(lookAtDirection, this._upVector);
      let pitch = Math.atan2(-y, xz) * this._rad2deg;
      if (pitch > 0) {
        pitch = this._rangeMap(this._lookAt.verticalDown, pitch);
      } else {
        pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);
      }
      if (this.bones.leftEye) {
        let yawLeft = yaw;
        if (yawLeft > 0) {
          yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);
        } else {
          yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawLeft, 0);
        this.bones.leftEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.leftEye, eyeRotation);
      }
      if (this.bones.rightEye) {
        let yawRight = yaw;
        if (yawRight > 0) {
          yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);
        } else {
          yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawRight, 0);
        this.bones.rightEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.rightEye, eyeRotation);
      }
    }
    _resolveConstraints() {
      for (const nodeConstraint of this._nodeConstraints) {
        this._resolveConstraint(nodeConstraint);
      }
    }
    _resolveConstraint(nodeConstraint) {
      const dstRestQuat = nodeConstraint.destinationRestLocalRotation;
      const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;
      const targetQuat = quat_exports.identity(this._tempQuatA);
      switch (nodeConstraint.type) {
        case "roll":
          {
            const deltaSrcQuat = quat_exports.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            const deltaSrcQuatInParent = quat_exports.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);
            quat_exports.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);
            const dstRestQuatInv = quat_exports.invert(this._tempQuatB, dstRestQuat);
            const deltaSrcQuatInDst = quat_exports.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);
            quat_exports.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);
            const toVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);
            quat_exports.mul(targetQuat, dstRestQuat, quat_exports.invert(this._tempQuat, fromToQuat));
            quat_exports.mul(targetQuat, targetQuat, deltaSrcQuatInDst);
          }
          break;
        case "aim":
          {
            const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;
            const fromVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);
            vec3_exports.transformQuat(fromVec, fromVec, dstParentWorldQuat);
            const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);
            vec3_exports.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));
            vec3_exports.normalize(toVec, toVec);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, fromVec, toVec);
            quat_exports.mul(targetQuat, quat_exports.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);
            quat_exports.mul(targetQuat, targetQuat, dstParentWorldQuat);
            quat_exports.mul(targetQuat, targetQuat, dstRestQuat);
          }
          break;
        case "rotation":
          {
            const srcDeltaQuat = quat_exports.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            quat_exports.mul(targetQuat, dstRestQuat, srcDeltaQuat);
          }
          break;
      }
      quat_exports.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);
      nodeConstraint.destination.rotationLocal = targetQuat;
    }
    _updateSpringBones(dt) {
      this._sphereColliders.forEach(({ object, shape, cache }) => {
        const offset2 = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(offset2);
        vec3_exports.add(cache.head, object.getTranslationWorld(this._tempV3), offset2);
      });
      this._capsuleColliders.forEach(({ object, shape, cache }) => {
        const shapeCenter = object.getTranslationWorld(this._tempV3A);
        const headOffset = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(headOffset);
        vec3_exports.add(cache.head, shapeCenter, headOffset);
        const tailOffset = vec3_exports.copy(cache.tail, shape.tail);
        object.transformVectorWorld(tailOffset);
        vec3_exports.add(cache.tail, shapeCenter, tailOffset);
      });
      this._springChains.forEach((springChain) => {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const joint = springChain.joints[i];
          const parentWorldRotation = joint.node.parent ? joint.node.parent.rotationWorld : this._identityQuat;
          const inertia = this._inertia;
          if (springChain.center) {
            vec3_exports.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);
            springChain.center.transformVectorWorld(inertia);
          } else {
            vec3_exports.sub(inertia, joint.state.currentTail, joint.state.prevTail);
          }
          vec3_exports.scale(inertia, inertia, 1 - joint.dragForce);
          const stiffness = vec3_exports.copy(this._stiffness, joint.state.boneAxis);
          vec3_exports.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);
          vec3_exports.transformQuat(stiffness, stiffness, parentWorldRotation);
          vec3_exports.scale(stiffness, stiffness, dt * joint.stiffness);
          const external = vec3_exports.scale(this._external, joint.gravityDir, dt * joint.gravityPower);
          const nextTail = vec3_exports.copy(this._tempV3A, joint.state.currentTail);
          vec3_exports.add(nextTail, nextTail, inertia);
          vec3_exports.add(nextTail, nextTail, stiffness);
          vec3_exports.add(nextTail, nextTail, external);
          const worldPosition = joint.node.getTranslationWorld(this._tempV3B);
          vec3_exports.sub(nextTail, nextTail, worldPosition);
          vec3_exports.normalize(nextTail, nextTail);
          vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
          for (const { shape, cache } of springChain.sphereColliders) {
            let tailToShape = this._tailToShape;
            const sphereCenter = cache.head;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, sphereCenter);
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          for (const { shape, cache } of springChain.capsuleColliders) {
            let tailToShape = this._tailToShape;
            const head = cache.head;
            const tail = cache.tail;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, head);
            const headToTail = vec3_exports.sub(this._headToTail, tail, head);
            const dot5 = vec3_exports.dot(headToTail, tailToShape);
            if (vec3_exports.squaredLength(headToTail) <= dot5) {
              vec3_exports.sub(tailToShape, nextTail, tail);
            } else if (dot5 > 0) {
              vec3_exports.scale(headToTail, headToTail, dot5 / vec3_exports.squaredLength(headToTail));
              vec3_exports.sub(tailToShape, tailToShape, headToTail);
            }
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          vec3_exports.copy(joint.state.prevTail, joint.state.currentTail);
          vec3_exports.copy(joint.state.currentTail, nextTail);
          if (springChain.center) {
            vec3_exports.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);
            vec3_exports.copy(joint.state.currentTailCenter, nextTail);
            springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);
          }
          joint.node.parent.transformPointInverseWorld(nextTail);
          const nextTailDualQuat = quat2_exports.fromTranslation(this._tempQuat2, nextTail);
          quat2_exports.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);
          quat2_exports.getTranslation(nextTail, nextTailDualQuat);
          vec3_exports.normalize(nextTail, nextTail);
          const jointRotation = quat_exports.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);
          joint.node.rotationLocal = quat_exports.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation);
        }
      });
    }
    /**
     * @param {boolean} firstPerson Whether the model should render for first person or third person views
     */
    set firstPerson(firstPerson) {
      this._firstPersonAnnotations.forEach((annotation) => {
        const visible = firstPerson == annotation.firstPerson || firstPerson != annotation.thirdPerson;
        annotation.node.getComponents("mesh").forEach((mesh) => {
          mesh.active = visible;
        });
      });
    }
  };
  __publicField(Vrm, "TypeName", "vrm");
  __publicField(Vrm, "Properties", {
    /** URL to a VRM file to load */
    src: { type: Type.String },
    /** Object the VRM is looking at */
    lookAtTarget: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/wasd-controls.js
  var _direction2 = new Float32Array(3);
  var WasdControlsComponent = class extends Component {
    init() {
      this.up = false;
      this.right = false;
      this.down = false;
      this.left = false;
      window.addEventListener("keydown", this.press.bind(this));
      window.addEventListener("keyup", this.release.bind(this));
    }
    start() {
      this.headObject = this.headObject || this.object;
    }
    update() {
      vec3_exports.zero(_direction2);
      if (this.up)
        _direction2[2] -= 1;
      if (this.down)
        _direction2[2] += 1;
      if (this.left)
        _direction2[0] -= 1;
      if (this.right)
        _direction2[0] += 1;
      vec3_exports.normalize(_direction2, _direction2);
      _direction2[0] *= this.speed;
      _direction2[2] *= this.speed;
      vec3_exports.transformQuat(_direction2, _direction2, this.headObject.transformWorld);
      if (this.lockY) {
        _direction2[1] = 0;
        vec3_exports.normalize(_direction2, _direction2);
        vec3_exports.scale(_direction2, _direction2, this.speed);
      }
      this.object.translateLocal(_direction2);
    }
    press(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = true;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = true;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = true;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = true;
      }
    }
    release(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = false;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = false;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = false;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = false;
      }
    }
  };
  __publicField(WasdControlsComponent, "TypeName", "wasd-controls");
  __publicField(WasdControlsComponent, "Properties", {
    /** Movement speed in m/s. */
    speed: { type: Type.Float, default: 0.1 },
    /** Flag for only moving the object on the global x & z planes */
    lockY: { type: Type.Bool, default: false },
    /** Object of which the orientation is used to determine forward direction */
    headObject: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/input-profile.js
  var __decorate17 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var _tempVec = vec3_exports.create();
  var _tempQuat = quat_exports.create();
  var _tempRotation1 = new Float32Array(4);
  var _tempRotation2 = new Float32Array(4);
  var minTemp = new Float32Array(3);
  var maxTemp = new Float32Array(3);
  var hands = ["left", "right"];
  var _InputProfile = class extends Component {
    _gamepadObjects = {};
    _controllerModel = null;
    _defaultControllerComponents;
    _handedness;
    _profileJSON = null;
    _buttons = [];
    _axes = [];
    /**
     * The XR gamepad associated with the current input source.
     */
    gamepad;
    /**
     * A reference to the emitter which triggered on model lodaed event.
     */
    onModelLoaded = new Emitter();
    /**
     * Returns url of input profile json file
     */
    url;
    /**
     * A set of components to filter during component retrieval.
     */
    toFilter = /* @__PURE__ */ new Set(["vr-mode-active-mode-switch"]);
    /**
     * The index representing the handedness of the controller (0 for left, 1 for right).
     */
    handedness = 0;
    /**
     * The base path where XR input profiles are stored.
     */
    defaultBasePath;
    /**
     * An optional folder path for loading custom XR input profiles.
     */
    customBasePath;
    /**
     * The default 3D controller model used when a custom model fails to load.
     */
    defaultController;
    /**
     * The object which has HandTracking component added to it.
     */
    trackedHand;
    /**
     * If true, the input profile will be mapped to the default controller, and no dynamic 3D model of controller will be loaded.
     */
    mapToDefaultController;
    /**
     * If true, adds a VR mode switch component to the loaded controller model.
     */
    addVrModeSwitch;
    onActivate() {
      this._handedness = hands[this.handedness];
      const defaultHandName = "Hand" + this._handedness.charAt(0).toUpperCase() + this._handedness.slice(1);
      this.trackedHand = this.trackedHand ?? this.object.parent?.findByNameRecursive(defaultHandName)[0];
      this.defaultController = this.defaultController || this.object.children[0];
      this._defaultControllerComponents = this._getComponents(this.defaultController);
      this.engine.onXRSessionStart.add(() => {
        this.engine.xr?.session.addEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
      });
    }
    onDeactivate() {
      this.engine.xr?.session?.removeEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
    }
    /**
     * Sets newly loaded controllers for the HandTracking component to proper switching.
     * @param controllerObject The controller object.
     * @hidden
     */
    _setHandTrackingControllers(controllerObject) {
      const handtrackingComponent = this.trackedHand.getComponent(HandTracking);
      if (!handtrackingComponent)
        return;
      handtrackingComponent.controllerToDeactivate = controllerObject;
    }
    /**
     * Retrieves all components from the specified object and its children.
     * @param obj The object to retrieve components from.
     * @return An array of components.
     * @hidden
     */
    _getComponents(obj) {
      const components = [];
      if (obj == null)
        return components;
      const stack = [obj];
      while (stack.length > 0) {
        const currentObj = stack.pop();
        const comps = currentObj.getComponents().filter((c) => !this.toFilter.has(c.type));
        components.push(...comps);
        const children = currentObj.children;
        for (let i = children.length - 1; i >= 0; --i) {
          stack.push(children[i]);
        }
      }
      return components;
    }
    /**
     * Activates or deactivates components based on the specified boolean value.
     * @param active If true, components are set to active; otherwise, they are set to inactive.
     * @hidden
     */
    _setComponentsActive(active) {
      const comps = this._defaultControllerComponents;
      if (comps == void 0)
        return;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    /**
     * Event handler triggered when XR input sources change.
     * Detects new XR input sources and initiates the loading of input profiles.
     * @param event The XR input source change event.
     * @hidden
     */
    _onInputSourcesChange(event) {
      if (this._isModelLoaded() && !this.mapToDefaultController) {
        this._setComponentsActive(false);
      }
      event.added.forEach((xrInputSource) => {
        if (xrInputSource.hand != null)
          return;
        if (this._handedness != xrInputSource.handedness)
          return;
        this.gamepad = xrInputSource.gamepad;
        const profile = this.customBasePath !== "" ? this.customBasePath : this.defaultBasePath + xrInputSource.profiles[0];
        this.url = profile + "/profile.json";
        this._profileJSON = _InputProfile.Cache.get(this.url) ?? null;
        if (this._profileJSON != null)
          return;
        fetch(this.url).then((res) => res.json()).then((out) => {
          this._profileJSON = out;
          _InputProfile.Cache.set(this.url, this._profileJSON);
          if (!this._isModelLoaded())
            this._loadAndMapGamepad(profile);
        }).catch((e) => {
          console.error(`Failed to load profile from ${this.url}. Reason:`, e);
        });
      });
    }
    /**
     * Checks if the 3D controller model is loaded.
     * @return True if the model is loaded; otherwise, false.
     * @hidden
     */
    _isModelLoaded() {
      return this._controllerModel !== null;
    }
    /**
     * Loads the 3D controller model and caches the mapping to the gamepad.
     * @param profile The path to the input profile.
     * @hidden
     */
    async _loadAndMapGamepad(profile) {
      const assetPath = profile + "/" + this._handedness + ".glb";
      this._controllerModel = this.defaultController;
      if (!this.mapToDefaultController) {
        try {
          this._controllerModel = await this.engine.scene.append(assetPath);
        } catch (e) {
          console.error(`Failed to load i-p controller model. Reason:`, e, `Continuing with ${this._handedness} default controller.`);
          this._setComponentsActive(true);
        }
        this._controllerModel.parent = this.object;
        this._controllerModel.setPositionLocal([0, 0, 0]);
        this._setComponentsActive(false);
        if (this.addVrModeSwitch)
          this._controllerModel.addComponent(VrModeActiveSwitch);
        this.onModelLoaded.notify();
      }
      this._cacheGamepadObjectsFromProfile(this._profileJSON, this._controllerModel);
      this._setHandTrackingControllers(this._controllerModel);
      this.update = () => this._mapGamepadInput();
    }
    /**
     * Caches gamepad objects (buttons, axes) from the loaded input profile.
     * @hidden
     */
    _cacheGamepadObjectsFromProfile(profile, obj) {
      const components = profile.layouts[this._handedness].components;
      if (!components)
        return;
      this._buttons = [];
      this._axes = [];
      for (const i in components) {
        const visualResponses = components[i].visualResponses;
        for (const j in visualResponses) {
          const visualResponse = visualResponses[j];
          const valueNode = visualResponse.valueNodeName;
          const minNode = visualResponse.minNodeName;
          const maxNode = visualResponse.maxNodeName;
          this._gamepadObjects[valueNode] = obj.findByNameRecursive(valueNode)[0];
          this._gamepadObjects[minNode] = obj.findByNameRecursive(minNode)[0];
          this._gamepadObjects[maxNode] = obj.findByNameRecursive(maxNode)[0];
          const indice = visualResponses[j].componentProperty;
          const response = {
            target: this._gamepadObjects[valueNode],
            min: this._gamepadObjects[minNode],
            max: this._gamepadObjects[maxNode],
            id: components[i].gamepadIndices[indice]
            // Assign a unique ID
          };
          switch (indice) {
            case "button":
              this._buttons.push(response);
              break;
            case "xAxis":
            case "yAxis":
              this._axes.push(response);
              break;
          }
        }
      }
    }
    /**
     * Assigns a transformed position and rotation to the target based on minimum and maximum values and a normalized input value.
     * @param target The target object to be transformed.
     * @param min The minimum object providing transformation limits.
     * @param max The maximum object providing transformation limits.
     * @param value The normalized input value.
     * @hidden
     */
    _assignTransform(target, min2, max2, value) {
      vec3_exports.lerp(_tempVec, min2.getPositionWorld(minTemp), max2.getPositionWorld(maxTemp), value);
      target.setPositionWorld(_tempVec);
      quat_exports.lerp(_tempQuat, min2.getRotationWorld(_tempRotation1), max2.getRotationWorld(_tempRotation2), value);
      quat_exports.normalize(_tempQuat, _tempQuat);
      target.setRotationWorld(_tempQuat);
    }
    /**
     * Maps input values (buttons, axes) to the 3D controller model.
     * @hidden
     */
    _mapGamepadInput() {
      for (const button of this._buttons) {
        const buttonValue = this.gamepad.buttons[button.id].value;
        this._assignTransform(button.target, button.min, button.max, buttonValue);
      }
      for (const axis of this._axes) {
        const axisValue = this.gamepad.axes[axis.id];
        const normalizedAxisValue = (axisValue + 1) / 2;
        this._assignTransform(axis.target, axis.min, axis.max, normalizedAxisValue);
      }
    }
  };
  var InputProfile = _InputProfile;
  __publicField(InputProfile, "TypeName", "input-profile");
  /**
   * A cache to store loaded profiles for reuse.
   */
  __publicField(InputProfile, "Cache", /* @__PURE__ */ new Map());
  __decorate17([
    property.enum(hands, 0)
  ], InputProfile.prototype, "handedness", void 0);
  __decorate17([
    property.string("https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@latest/dist/profiles/")
  ], InputProfile.prototype, "defaultBasePath", void 0);
  __decorate17([
    property.string()
  ], InputProfile.prototype, "customBasePath", void 0);
  __decorate17([
    property.object()
  ], InputProfile.prototype, "defaultController", void 0);
  __decorate17([
    property.object()
  ], InputProfile.prototype, "trackedHand", void 0);
  __decorate17([
    property.bool(false)
  ], InputProfile.prototype, "mapToDefaultController", void 0);
  __decorate17([
    property.bool(true)
  ], InputProfile.prototype, "addVrModeSwitch", void 0);

  // node_modules/@wonderlandengine/components/dist/orbital-camera.js
  var __decorate18 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault2 = (e) => {
    e.preventDefault();
  };
  var tempVec4 = [0, 0, 0];
  var tempquat = quat_exports.create();
  var tempquat2 = quat_exports.create();
  var tempVec33 = vec3_exports.create();
  var OrbitalCamera = class extends Component {
    mouseButtonIndex = 0;
    radial = 5;
    minElevation = 0;
    maxElevation = 89.99;
    minZoom = 0.01;
    maxZoom = 10;
    xSensitivity = 0.5;
    ySensitivity = 0.5;
    zoomSensitivity = 0.02;
    damping = 0.9;
    _mouseDown = false;
    _origin = [0, 0, 0];
    _azimuth = 0;
    _polar = 45;
    _initialPinchDistance = 0;
    _touchStartX = 0;
    _touchStartY = 0;
    _azimuthSpeed = 0;
    _polarSpeed = 0;
    init() {
      this.object.getPositionWorld(this._origin);
    }
    start() {
      this._updateCamera();
    }
    onActivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.addEventListener("contextmenu", preventDefault2, { passive: false });
      }
      canvas2.addEventListener("mousedown", this._onMouseDown);
      canvas2.addEventListener("wheel", this._onMouseScroll, { passive: false });
      canvas2.addEventListener("touchstart", this._onTouchStart, { passive: false });
      canvas2.addEventListener("touchmove", this._onTouchMove, { passive: false });
      canvas2.addEventListener("touchend", this._onTouchEnd);
    }
    onDeactivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.removeEventListener("contextmenu", preventDefault2);
      }
      canvas2.removeEventListener("mousemove", this._onMouseMove);
      canvas2.removeEventListener("mousedown", this._onMouseDown);
      canvas2.removeEventListener("wheel", this._onMouseScroll);
      canvas2.removeEventListener("touchstart", this._onTouchStart);
      canvas2.removeEventListener("touchmove", this._onTouchMove);
      canvas2.removeEventListener("touchend", this._onTouchEnd);
      this._mouseDown = false;
      this._initialPinchDistance = 0;
      this._touchStartX = 0;
      this._touchStartY = 0;
      this._azimuthSpeed = 0;
      this._polarSpeed = 0;
    }
    update() {
      this._azimuthSpeed *= this.damping;
      this._polarSpeed *= this.damping;
      if (Math.abs(this._azimuthSpeed) < 0.01)
        this._azimuthSpeed = 0;
      if (Math.abs(this._polarSpeed) < 0.01)
        this._polarSpeed = 0;
      this._azimuth += this._azimuthSpeed;
      this._polar += this._polarSpeed;
      this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));
      if (this._azimuthSpeed !== 0 || this._polarSpeed !== 0) {
        this._updateCamera();
      }
    }
    /**
     * Get the closest position to the given position on the orbit sphere of the camera.
     * This can be used to get a position and rotation to transition to.
     *
     * You pass this a position object. The method calculates the closest positition and updates the position parameter.
     * It also sets the rotation parameter to reflect the rotate the camera will have when it is on the orbit sphere,
     * pointing towards the center.
     * @param position the position to get the closest position to
     * @param rotation the rotation to get the closest position to
     */
    getClosestPosition(position, rotation) {
      this.object.getRotationWorld(tempquat);
      this.object.lookAt(this._origin);
      this.object.getRotationWorld(tempquat2);
      if (quat_exports.dot(tempquat, tempquat2) < 0) {
        quat_exports.scale(tempquat2, tempquat2, -1);
      }
      this.object.setRotationWorld(tempquat);
      const directionToCamera = vec3_exports.create();
      vec3_exports.subtract(directionToCamera, position, this._origin);
      vec3_exports.normalize(directionToCamera, directionToCamera);
      const nearestPointOnSphere = vec3_exports.create();
      vec3_exports.scale(nearestPointOnSphere, directionToCamera, this.radial);
      vec3_exports.add(nearestPointOnSphere, nearestPointOnSphere, this._origin);
      vec3_exports.copy(position, nearestPointOnSphere);
      quat_exports.copy(rotation, tempquat2);
    }
    /**
     * Set the camera position based on the given position and calculate the rotation.
     * @param cameraPosition the position to set the camera to
     */
    setPosition(cameraPosition) {
      const centerOfOrbit = this._origin;
      vec3_exports.subtract(tempVec33, cameraPosition, centerOfOrbit);
      vec3_exports.normalize(tempVec33, tempVec33);
      const azimuth = Math.atan2(tempVec33[0], tempVec33[2]);
      const polar = Math.acos(tempVec33[1]);
      const azimuthDeg = rad2deg(azimuth);
      const polarDeg = 90 - rad2deg(polar);
      this._azimuth = azimuthDeg;
      this._polar = polarDeg;
    }
    /**
     * Update the camera position based on the current azimuth,
     * polar and radial values
     */
    _updateCamera() {
      const azimuthInRadians = deg2rad(this._azimuth);
      const polarInRadians = deg2rad(this._polar);
      tempVec4[0] = this.radial * Math.sin(azimuthInRadians) * Math.cos(polarInRadians);
      tempVec4[1] = this.radial * Math.sin(polarInRadians);
      tempVec4[2] = this.radial * Math.cos(azimuthInRadians) * Math.cos(polarInRadians);
      this.object.setPositionWorld(tempVec4);
      this.object.translateWorld(this._origin);
      this.object.lookAt(this._origin);
    }
    /* Mouse Event Handlers */
    _onMouseDown = (e) => {
      window.addEventListener("mouseup", this._onMouseUp);
      window.addEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    _onMouseUp = (e) => {
      window.removeEventListener("mouseup", this._onMouseUp);
      window.removeEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    _onMouseMove = (e) => {
      if (this.active && this._mouseDown) {
        if (this.active && this._mouseDown) {
          this._azimuthSpeed = -(e.movementX * this.xSensitivity);
          this._polarSpeed = e.movementY * this.ySensitivity;
        }
      }
    };
    _onMouseScroll = (e) => {
      e.preventDefault();
      this.radial *= 1 - e.deltaY * this.zoomSensitivity * -1e-3;
      this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
      this._updateCamera();
    };
    /* Touch event handlers */
    _onTouchStart = (e) => {
      if (e.touches.length === 1) {
        e.preventDefault();
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
        this._mouseDown = true;
      } else if (e.touches.length === 2) {
        this._initialPinchDistance = this._getDistanceBetweenTouches(e.touches);
        e.preventDefault();
      }
    };
    _onTouchMove = (e) => {
      if (!this.active || !this._mouseDown) {
        return;
      }
      e.preventDefault();
      if (e.touches.length === 1) {
        const deltaX = e.touches[0].clientX - this._touchStartX;
        const deltaY = e.touches[0].clientY - this._touchStartY;
        this._azimuthSpeed = -(deltaX * this.xSensitivity);
        this._polarSpeed = deltaY * this.ySensitivity;
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      } else if (e.touches.length === 2) {
        const currentPinchDistance = this._getDistanceBetweenTouches(e.touches);
        const pinchScale = this._initialPinchDistance / currentPinchDistance;
        this.radial *= pinchScale;
        this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
        this._updateCamera();
        this._initialPinchDistance = currentPinchDistance;
      }
    };
    _onTouchEnd = (e) => {
      if (e.touches.length < 2) {
        this._mouseDown = false;
      }
      if (e.touches.length === 1) {
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      }
    };
    /**
     * Helper function to calculate the distance between two touch points
     * @param touches list of touch points
     * @returns distance between the two touch points
     */
    _getDistanceBetweenTouches(touches) {
      const dx = touches[0].clientX - touches[1].clientX;
      const dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  };
  __publicField(OrbitalCamera, "TypeName", "orbital-camera");
  __decorate18([
    property.int()
  ], OrbitalCamera.prototype, "mouseButtonIndex", void 0);
  __decorate18([
    property.float(5)
  ], OrbitalCamera.prototype, "radial", void 0);
  __decorate18([
    property.float()
  ], OrbitalCamera.prototype, "minElevation", void 0);
  __decorate18([
    property.float(89.99)
  ], OrbitalCamera.prototype, "maxElevation", void 0);
  __decorate18([
    property.float()
  ], OrbitalCamera.prototype, "minZoom", void 0);
  __decorate18([
    property.float(10)
  ], OrbitalCamera.prototype, "maxZoom", void 0);
  __decorate18([
    property.float(0.5)
  ], OrbitalCamera.prototype, "xSensitivity", void 0);
  __decorate18([
    property.float(0.5)
  ], OrbitalCamera.prototype, "ySensitivity", void 0);
  __decorate18([
    property.float(0.02)
  ], OrbitalCamera.prototype, "zoomSensitivity", void 0);
  __decorate18([
    property.float(0.9)
  ], OrbitalCamera.prototype, "damping", void 0);

  // ../../wle/wonderland-spatial-audio/dist/index.js
  var dist_exports3 = {};
  __export(dist_exports3, {
    AudioListener: () => AudioListener,
    AudioManager: () => AudioManager,
    AudioSource: () => AudioSource,
    globalAudioManager: () => globalAudioManager
  });

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/property.js
  var Type2;
  (function(Type3) {
    Type3[Type3["Native"] = 1] = "Native";
    Type3[Type3["Bool"] = 2] = "Bool";
    Type3[Type3["Int"] = 4] = "Int";
    Type3[Type3["Float"] = 8] = "Float";
    Type3[Type3["String"] = 16] = "String";
    Type3[Type3["Enum"] = 32] = "Enum";
    Type3[Type3["Object"] = 64] = "Object";
    Type3[Type3["Mesh"] = 128] = "Mesh";
    Type3[Type3["Texture"] = 256] = "Texture";
    Type3[Type3["Material"] = 512] = "Material";
    Type3[Type3["Animation"] = 1024] = "Animation";
    Type3[Type3["Skin"] = 2048] = "Skin";
    Type3[Type3["Color"] = 4096] = "Color";
  })(Type2 || (Type2 = {}));
  var Property2 = {
    /**
     * Create an boolean property.
     *
     * @param defaultValue The default value. If not provided, defaults to `false`.
     */
    bool(defaultValue = false) {
      return { type: Type2.Bool, default: defaultValue };
    },
    /**
     * Create an integer property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0`.
     */
    int(defaultValue = 0) {
      return { type: Type2.Int, default: defaultValue };
    },
    /**
     * Create an float property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0.0`.
     */
    float(defaultValue = 0) {
      return { type: Type2.Float, default: defaultValue };
    },
    /**
     * Create an string property.
     *
     * @param defaultValue The default value. If not provided, defaults to `''`.
     */
    string(defaultValue = "") {
      return { type: Type2.String, default: defaultValue };
    },
    /**
     * Create an enumeration property.
     *
     * @param values The list of values.
     * @param defaultValue The default value. Can be a string or an index into
     *     `values`. If not provided, defaults to the first element.
     */
    enum(values, defaultValue) {
      return { type: Type2.Enum, values, default: defaultValue };
    },
    /** Create an {@link Object3D} reference property. */
    object(opts) {
      return { type: Type2.Object, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Mesh} reference property. */
    mesh(opts) {
      return { type: Type2.Mesh, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Texture} reference property. */
    texture(opts) {
      return { type: Type2.Texture, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Material} reference property. */
    material(opts) {
      return { type: Type2.Material, default: null, required: opts?.required ?? false };
    },
    /** Create an {@link Animation} reference property. */
    animation(opts) {
      return { type: Type2.Animation, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Skin} reference property. */
    skin(opts) {
      return { type: Type2.Skin, default: null, required: opts?.required ?? false };
    },
    /**
     * Create a color property.
     *
     * @param r The red component, in the range [0; 1].
     * @param g The green component, in the range [0; 1].
     * @param b The blue component, in the range [0; 1].
     * @param a The alpha component, in the range [0; 1].
     */
    color(r = 0, g = 0, b = 0, a = 1) {
      return { type: Type2.Color, default: [r, g, b, a] };
    }
  };

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/decorators.js
  function propertyDecorator2(data) {
    return function(target, propertyKey) {
      const ctor = target.constructor;
      ctor.Properties = ctor.hasOwnProperty("Properties") ? ctor.Properties : {};
      ctor.Properties[propertyKey] = data;
    };
  }
  function enumerable2() {
    return function(_, __, descriptor) {
      descriptor.enumerable = true;
    };
  }
  function nativeProperty2() {
    return function(target, propertyKey, descriptor) {
      enumerable2()(target, propertyKey, descriptor);
      propertyDecorator2({ type: Type2.Native })(target, propertyKey);
    };
  }
  var property2 = {};
  for (const name in Property2) {
    property2[name] = (...args) => {
      const functor = Property2[name];
      return propertyDecorator2(functor(...args));
    };
  }

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/utils/object.js
  function isNumber2(value) {
    if (value === null || value === void 0)
      return false;
    return typeof value === "number" || value.constructor === Number;
  }

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/utils/event.js
  var Emitter2 = class {
    /**
     * List of listeners to trigger when `notify` is called.
     *
     * @hidden
     */
    _listeners = [];
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Basic usage:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * });
     * ```
     *
     * Automatically remove the listener when an event is received:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * }, {once: true});
     * ```
     *
     * @param listener The callback to register.
     * @param opts The listener options. For more information, please have a look
     *     at the {@link ListenerOptions} interface.
     *
     * @returns Reference to self (for method chaining)
     */
    add(listener, opts = {}) {
      const { once = false, id = void 0 } = opts;
      this._listeners.push({ id, once, callback: listener });
      return this;
    }
    /**
     * Equivalent to {@link Emitter.add}.
     *
     * @param listeners The callback(s) to register.
     * @returns Reference to self (for method chaining).
     *
     * @deprecated Please use {@link Emitter.add} instead.
     */
    push(...listeners) {
      for (const cb of listeners)
        this.add(cb);
      return this;
    }
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Once notified, the listener will be automatically removed.
     *
     * The method is equivalent to calling {@link Emitter.add} with:
     *
     * ```js
     * emitter.add(listener, {once: true});
     * ```
     *
     * @param listener The callback to register.
     *
     * @returns Reference to self (for method chaining).
     */
    once(listener) {
      return this.add(listener, { once: true });
    }
    /**
     * Remove a registered listener.
     *
     * Usage with a callback:
     *
     * ```js
     * const listener = (data) => console.log(data);
     * emitter.add(listener);
     *
     * // Remove using the callback reference:
     * emitter.remove(listener);
     * ```
     *
     * Usage with an id:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'my-callback'});
     *
     * // Remove using the id:
     * emitter.remove('my-callback');
     * ```
     *
     * Using identifiers, you will need to ensure your value is unique to avoid
     * removing listeners from other libraries, e.g.,:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'non-unique'});
     * // This second listener could be added by a third-party library.
     * emitter.add((data) => console.log('Hello From Library!'), {id: 'non-unique'});
     *
     * // Ho Snap! This also removed the library listener!
     * emitter.remove('non-unique');
     * ```
     *
     * The identifier can be any type. However, remember that the comparison will be
     * by-value for primitive types (string, number), but by reference for objects.
     *
     * Example:
     *
     * ```js
     * emitter.add(() => console.log('Hello'), {id: {value: 42}});
     * emitter.add(() => console.log('World!'), {id: {value: 42}});
     * emitter.remove({value: 42}); // None of the above listeners match!
     * emitter.notify(); // Prints 'Hello' and 'World!'.
     * ```
     *
     * Here, both emitters have id `{value: 42}`, but the comparison is made by reference. Thus,
     * the `remove()` call has no effect. We can make it work by doing:
     *
     * ```js
     * const id = {value: 42};
     * emitter.add(() => console.log('Hello'), {id});
     * emitter.add(() => console.log('World!'), {id});
     * emitter.remove(id); // Same reference, it works!
     * emitter.notify(); // Doesn't print.
     * ```
     *
     * @param listener The registered callback or a value representing the `id`.
     *
     * @returns Reference to self (for method chaining)
     */
    remove(listener) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener) {
          listeners.splice(i--, 1);
        }
      }
      return this;
    }
    /**
     * Check whether the listener is registered.
     *
     * @note This method performs a linear search.
     *
     * @param listener The registered callback or a value representing the `id`.
     * @returns `true` if the handle is found, `false` otherwise.
     */
    has(listener) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener)
          return true;
      }
      return false;
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note This method ensures all listeners are called even if
     * an exception is thrown. For (possibly) faster notification,
     * please use {@link Emitter.notifyUnsafe}.
     *
     * @param data The data to pass to listener when invoked.
     */
    notify(...data) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        try {
          listener.callback(...data);
        } catch (e) {
          console.error(e);
        }
      }
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note Because this method doesn't catch exceptions, some listeners
     * will be skipped on a throw. Please use {@link Emitter.notify} for safe
     * notification.
     *
     * @param data The data to pass to listener when invoked.
     */
    notifyUnsafe(...data) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        listener.callback(...data);
      }
    }
    /**
     * Return a promise that will resolve on the next event.
     *
     * @note The promise might never resolve if no event is sent.
     *
     * @returns A promise that resolves with the data passed to
     *     {@link Emitter.notify}.
     */
    promise() {
      return new Promise((res, _) => {
        this.once((...args) => {
          if (args.length > 1) {
            res(args);
          } else {
            res(args[0]);
          }
        });
      });
    }
    /** Number of listeners. */
    get listenerCount() {
      return this._listeners.length;
    }
    /** `true` if it has no listeners, `false` otherwise. */
    get isEmpty() {
      return this.listenerCount === 0;
    }
  };
  var RetainEmitterUndefined = {};
  var RetainEmitter2 = class extends Emitter2 {
    /** Pre-resolved data. @hidden */
    _event = RetainEmitterUndefined;
    /**
     * Emitter target used to reset the state of this emitter.
     *
     * @hidden
     */
    _reset;
    /** @override */
    add(listener, opts) {
      const immediate = opts?.immediate ?? true;
      if (this._event !== RetainEmitterUndefined && immediate) {
        listener(...this._event);
      }
      super.add(listener, opts);
      return this;
    }
    /**
     * @override
     *
     * @param listener The callback to register.
     * @param immediate If `true`, directly resolves if the emitter retains a value.
     *
     * @returns Reference to self (for method chaining).
     */
    once(listener, immediate) {
      return this.add(listener, { once: true, immediate });
    }
    /** @override */
    notify(...data) {
      this._event = data;
      super.notify(...data);
    }
    /** @override */
    notifyUnsafe(...data) {
      this._event = data;
      super.notifyUnsafe(...data);
    }
    /**
     * Reset the state of the emitter.
     *
     * Further call to {@link Emitter.add} will not automatically resolve,
     * until a new call to {@link Emitter.notify} is performed.
     *
     * @returns Reference to self (for method chaining)
     */
    reset() {
      this._event = RetainEmitterUndefined;
      return this;
    }
    /** Returns the retained data, or `undefined` if no data was retained. */
    get data() {
      return this.isDataRetained ? this._event : void 0;
    }
    /** `true` if data is retained from the last event, `false` otherwise. */
    get isDataRetained() {
      return this._event !== RetainEmitterUndefined;
    }
  };

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/wonderland.js
  var __decorate19 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var Collider2;
  (function(Collider3) {
    Collider3[Collider3["Sphere"] = 0] = "Sphere";
    Collider3[Collider3["AxisAlignedBox"] = 1] = "AxisAlignedBox";
    Collider3[Collider3["Box"] = 2] = "Box";
  })(Collider2 || (Collider2 = {}));
  var Alignment2;
  (function(Alignment3) {
    Alignment3[Alignment3["Left"] = 0] = "Left";
    Alignment3[Alignment3["Center"] = 1] = "Center";
    Alignment3[Alignment3["Right"] = 2] = "Right";
  })(Alignment2 || (Alignment2 = {}));
  var Justification;
  (function(Justification2) {
    Justification2[Justification2["Line"] = 0] = "Line";
    Justification2[Justification2["Middle"] = 1] = "Middle";
    Justification2[Justification2["Top"] = 2] = "Top";
    Justification2[Justification2["Bottom"] = 3] = "Bottom";
  })(Justification || (Justification = {}));
  var TextEffect2;
  (function(TextEffect3) {
    TextEffect3[TextEffect3["None"] = 0] = "None";
    TextEffect3[TextEffect3["Outline"] = 1] = "Outline";
  })(TextEffect2 || (TextEffect2 = {}));
  var InputType2;
  (function(InputType3) {
    InputType3[InputType3["Head"] = 0] = "Head";
    InputType3[InputType3["EyeLeft"] = 1] = "EyeLeft";
    InputType3[InputType3["EyeRight"] = 2] = "EyeRight";
    InputType3[InputType3["ControllerLeft"] = 3] = "ControllerLeft";
    InputType3[InputType3["ControllerRight"] = 4] = "ControllerRight";
    InputType3[InputType3["RayLeft"] = 5] = "RayLeft";
    InputType3[InputType3["RayRight"] = 6] = "RayRight";
  })(InputType2 || (InputType2 = {}));
  var LightType2;
  (function(LightType3) {
    LightType3[LightType3["Point"] = 0] = "Point";
    LightType3[LightType3["Spot"] = 1] = "Spot";
    LightType3[LightType3["Sun"] = 2] = "Sun";
  })(LightType2 || (LightType2 = {}));
  var AnimationState2;
  (function(AnimationState3) {
    AnimationState3[AnimationState3["Playing"] = 0] = "Playing";
    AnimationState3[AnimationState3["Paused"] = 1] = "Paused";
    AnimationState3[AnimationState3["Stopped"] = 2] = "Stopped";
  })(AnimationState2 || (AnimationState2 = {}));
  var ForceMode2;
  (function(ForceMode3) {
    ForceMode3[ForceMode3["Force"] = 0] = "Force";
    ForceMode3[ForceMode3["Impulse"] = 1] = "Impulse";
    ForceMode3[ForceMode3["VelocityChange"] = 2] = "VelocityChange";
    ForceMode3[ForceMode3["Acceleration"] = 3] = "Acceleration";
  })(ForceMode2 || (ForceMode2 = {}));
  var CollisionEventType2;
  (function(CollisionEventType3) {
    CollisionEventType3[CollisionEventType3["Touch"] = 0] = "Touch";
    CollisionEventType3[CollisionEventType3["TouchLost"] = 1] = "TouchLost";
    CollisionEventType3[CollisionEventType3["TriggerTouch"] = 2] = "TriggerTouch";
    CollisionEventType3[CollisionEventType3["TriggerTouchLost"] = 3] = "TriggerTouchLost";
  })(CollisionEventType2 || (CollisionEventType2 = {}));
  var Shape2;
  (function(Shape3) {
    Shape3[Shape3["None"] = 0] = "None";
    Shape3[Shape3["Sphere"] = 1] = "Sphere";
    Shape3[Shape3["Capsule"] = 2] = "Capsule";
    Shape3[Shape3["Box"] = 3] = "Box";
    Shape3[Shape3["Plane"] = 4] = "Plane";
    Shape3[Shape3["ConvexMesh"] = 5] = "ConvexMesh";
    Shape3[Shape3["TriangleMesh"] = 6] = "TriangleMesh";
  })(Shape2 || (Shape2 = {}));
  var MeshAttribute2;
  (function(MeshAttribute3) {
    MeshAttribute3[MeshAttribute3["Position"] = 0] = "Position";
    MeshAttribute3[MeshAttribute3["Tangent"] = 1] = "Tangent";
    MeshAttribute3[MeshAttribute3["Normal"] = 2] = "Normal";
    MeshAttribute3[MeshAttribute3["TextureCoordinate"] = 3] = "TextureCoordinate";
    MeshAttribute3[MeshAttribute3["Color"] = 4] = "Color";
    MeshAttribute3[MeshAttribute3["JointId"] = 5] = "JointId";
    MeshAttribute3[MeshAttribute3["JointWeight"] = 6] = "JointWeight";
  })(MeshAttribute2 || (MeshAttribute2 = {}));
  var MaterialParamType2;
  (function(MaterialParamType3) {
    MaterialParamType3[MaterialParamType3["UnsignedInt"] = 0] = "UnsignedInt";
    MaterialParamType3[MaterialParamType3["Int"] = 1] = "Int";
    MaterialParamType3[MaterialParamType3["Float"] = 2] = "Float";
    MaterialParamType3[MaterialParamType3["Sampler"] = 3] = "Sampler";
    MaterialParamType3[MaterialParamType3["Font"] = 4] = "Font";
  })(MaterialParamType2 || (MaterialParamType2 = {}));
  function createDestroyedProxy3(type) {
    return new Proxy({}, {
      get(_, param) {
        if (param === "isDestroyed")
          return true;
        throw new Error(`Canno't read '${param}' of destroyed ${type}`);
      },
      set(_, param) {
        throw new Error(`Canno't write '${param}' of destroyed ${type}`);
      }
    });
  }
  var DestroyedObjectInstance2 = createDestroyedProxy3("object");
  var DestroyedComponentInstance2 = createDestroyedProxy3("component");
  var DestroyedTextureInstance = createDestroyedProxy3("texture");
  function isMeshShape2(shape) {
    return shape === Shape2.ConvexMesh || shape === Shape2.TriangleMesh;
  }
  function isBaseComponentClass2(value) {
    return !!value && value.hasOwnProperty("_isBaseComponent") && value._isBaseComponent;
  }
  var SQRT_32 = Math.sqrt(3);
  var Component2 = class {
    /**
     * Allows to inherit properties directly inside the editor.
     *
     * @note Do not use directly, prefer using {@link inheritProperties}.
     *
     * @hidden
     */
    static _inheritProperties() {
      inheritProperties2(this);
    }
    /** Manager index. @hidden */
    _manager;
    /** Instance index. @hidden */
    _id;
    /**
     * Object containing this object.
     *
     * **Note**: This is cached for faster retrieval.
     *
     * @hidden
     */
    _object;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /**
     * Create a new instance
     *
     * @param engine The engine instance.
     * @param manager Index of the manager.
     * @param id WASM component instance index.
     *
     * @hidden
     */
    constructor(engine, manager = -1, id = -1) {
      this._engine = engine;
      this._manager = manager;
      this._id = id;
      this._object = null;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /** The name of this component's type */
    get type() {
      const ctor = this.constructor;
      return ctor.TypeName ?? this._engine.wasm._typeNameFor(this._manager);
    }
    /** The object this component is attached to. */
    get object() {
      if (!this._object) {
        const objectId = this._engine.wasm._wl_component_get_object(this._manager, this._id);
        this._object = this._engine.wrapObject(objectId);
      }
      return this._object;
    }
    /**
     * Set whether this component is active.
     *
     * Activating/deactivating a component comes at a small cost of reordering
     * components in the respective component manager. This function therefore
     * is not a trivial assignment.
     *
     * Does nothing if the component is already activated/deactivated.
     *
     * @param active New active state.
     */
    set active(active) {
      this._engine.wasm._wl_component_setActive(this._manager, this._id, active);
    }
    /**
     * Whether this component is active
     */
    get active() {
      return this._engine.wasm._wl_component_isActive(this._manager, this._id) != 0;
    }
    /**
     * Copy all the properties from `src` into this instance.
     *
     * @note Only properties are copied. If a component needs to
     * copy extra data, it needs to override this method.
     *
     * #### Example
     *
     * ```js
     * class MyComponent extends Component {
     *     nonPropertyData = 'Hello World';
     *
     *     copy(src) {
     *         super.copy(src);
     *         this.nonPropertyData = src.nonPropertyData;
     *         return this;
     *     }
     * }
     * ```
     *
     * @note This method is called by {@link Object3D.clone}. Do not attempt to:
     *     - Create new component
     *     - Read references to other objects
     *
     * When cloning via {@link Object3D.clone}, this method will be called before
     * {@link Component.start}.
     *
     * @note JavaScript component properties aren't retargeted. Thus, references
     * inside the source object will not be retargeted to the destination object,
     * at the exception of the skin data on {@link MeshComponent} and {@link AnimationComponent}.
     *
     * @param src The source component to copy from.
     *
     * @returns Reference to self (for method chaining).
     */
    copy(src) {
      const ctor = this.constructor;
      for (const name in ctor.Properties) {
        const value = src[name];
        if (value !== void 0) {
          this[name] = value;
        }
      }
      return this;
    }
    /**
     * Remove this component from its objects and destroy it.
     *
     * It is best practice to set the component to `null` after,
     * to ensure it does not get used later.
     *
     * ```js
     *    c.destroy();
     *    c = null;
     * ```
     * @since 0.9.0
     */
    destroy() {
      const manager = this._manager;
      if (manager < 0 || this._id < 0)
        return;
      const jsManager = this.engine.wasm._jsManagerIndex;
      this._engine.wasm._wl_component_remove(manager, this._id);
      if (manager !== jsManager)
        this._triggerOnDestroy();
    }
    /**
     * Checks equality by comparing whether the wrapped native component ids
     * and component manager types are equal.
     *
     * @param otherComponent Component to check equality with.
     * @returns Whether this component equals the given component.
     */
    equals(otherComponent) {
      if (!otherComponent)
        return false;
      return this._manager == otherComponent._manager && this._id == otherComponent._id;
    }
    /**
     * Reset the component properties to default.
     *
     * @note This is automatically called during the component instantiation.
     *
     * @returns Reference to self (for method chaining).
     */
    resetProperties() {
      const ctor = this.constructor;
      const properties = ctor.Properties;
      if (!properties)
        return this;
      for (const name in properties) {
        this[name] = properties[name].default;
      }
      return this;
    }
    /** @deprecated Use {@link Component.resetProperties} instead. */
    reset() {
      return this.resetProperties();
    }
    /**
     * Validate the properties on this instance.
     *
     * @throws If any of the required properties isn't initialized
     * on this instance.
     */
    validateProperties() {
      const ctor = this.constructor;
      if (!ctor.Properties)
        return;
      for (const name in ctor.Properties) {
        if (!ctor.Properties[name].required)
          continue;
        if (!this[name]) {
          throw new Error(`Property '${name}' is required but was not initialized`);
        }
      }
    }
    /**
     * `true` if the component is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a custom property will not work:
     *
     * ```js
     * engine.erasePrototypeOnDestroy = true;
     *
     * const comp = obj.addComponent('mesh');
     * comp.customParam = 'Hello World!';
     *
     * console.log(comp.isDestroyed); // Prints `false`
     * comp.destroy();
     * console.log(comp.isDestroyed); // Prints `true`
     * console.log(comp.customParam); // Throws an error
     * ```
     *
     * @since 1.1.1
     */
    get isDestroyed() {
      return this._id < 0;
    }
    /**
     * Trigger the component {@link Component.init} method.
     *
     * @note Use this method instead of directly calling {@link Component.init},
     * because this method creates an handler for the {@link Component.start}.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerInit() {
      if (this.init) {
        try {
          this.init();
        } catch (e) {
          console.error(`Exception during ${this.type} init() on object ${this.object.name}`);
          console.error(e);
        }
      }
      const oldActivate = this.onActivate;
      this.onActivate = function() {
        this.onActivate = oldActivate;
        let failed = false;
        try {
          this.validateProperties();
        } catch (e) {
          console.error(`Exception during ${this.type} validateProperties() on object ${this.object.name}`);
          console.error(e);
          failed = true;
        }
        try {
          this.start?.();
        } catch (e) {
          console.error(`Exception during ${this.type} start() on object ${this.object.name}`);
          console.error(e);
          failed = true;
        }
        if (failed) {
          this.active = false;
          return;
        }
        if (!this.onActivate)
          return;
        try {
          this.onActivate();
        } catch (e) {
          console.error(`Exception during ${this.type} onActivate() on object ${this.object.name}`);
          console.error(e);
        }
      };
    }
    /**
     * Trigger the component {@link Component.update} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerUpdate(dt) {
      if (!this.update)
        return;
      try {
        this.update(dt);
      } catch (e) {
        console.error(`Exception during ${this.type} update() on object ${this.object.name}`);
        console.error(e);
        if (this._engine.wasm._deactivate_component_on_error) {
          this.active = false;
        }
      }
    }
    /**
     * Trigger the component {@link Component.onActivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnActivate() {
      if (!this.onActivate)
        return;
      try {
        this.onActivate();
      } catch (e) {
        console.error(`Exception during ${this.type} onActivate() on object ${this.object.name}`);
        console.error(e);
      }
    }
    /**
     * Trigger the component {@link Component.onDeactivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDeactivate() {
      if (!this.onDeactivate)
        return;
      try {
        this.onDeactivate();
      } catch (e) {
        console.error(`Exception during ${this.type} onDeactivate() on object ${this.object.name}`);
        console.error(e);
      }
    }
    /**
     * Trigger the component {@link Component.onDestroy} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDestroy() {
      try {
        if (this.onDestroy)
          this.onDestroy();
      } catch (e) {
        console.error(`Exception during ${this.type} onDestroy() on object ${this.object.name}`);
        console.error(e);
      }
      this._engine._destroyComponent(this);
    }
  };
  /**
   * `true` for every class inheriting from this class.
   *
   * @note This is a workaround for `instanceof` to prevent issues
   * that could arise when an application ends up using multiple API versions.
   *
   * @hidden
   */
  __publicField(Component2, "_isBaseComponent", true);
  /**
   * Unique identifier for this component class.
   *
   * This is used to register, add, and retrieve components of a given type.
   */
  __publicField(Component2, "TypeName");
  /**
   * Properties of this component class.
   *
   * Properties are public attributes that can be configured via the
   * Wonderland Editor.
   *
   * Example:
   *
   * ```js
   * import { Component, Type } from '@wonderlandengine/api';
   * class MyComponent extends Component {
   *     static TypeName = 'my-component';
   *     static Properties = {
   *         myBoolean: { type: Type.Boolean, default: false },
   *         myFloat: { type: Type.Float, default: false },
   *         myTexture: { type: Type.Texture, default: null },
   *     };
   * }
   * ```
   *
   * Properties are automatically added to each component instance, and are
   * accessible like any JS attribute:
   *
   * ```js
   * // Creates a new component and set each properties value:
   * const myComponent = object.addComponent(MyComponent, {
   *     myBoolean: true,
   *     myFloat: 42.0,
   *     myTexture: null
   * });
   *
   * // You can also override the properties on the instance:
   * myComponent.myBoolean = false;
   * myComponent.myFloat = -42.0;
   * ```
   *
   * #### References
   *
   * Reference types (i.e., mesh, object, etc...) can also be listed as **required**:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class MyComponent extends Component {
   *     static Properties = {
   *         myObject: Property.object({required: true}),
   *         myAnimation: Property.animation({required: true}),
   *         myTexture: Property.texture({required: true}),
   *         myMesh: Property.mesh({required: true}),
   *     }
   * }
   * ```
   *
   * Please note that references are validated **once** before the call to {@link Component.start} only,
   * via the {@link Component.validateProperties} method.
   */
  __publicField(Component2, "Properties");
  /**
   * When set to `true`, the child class inherits from the parent
   * properties, as shown in the following example:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class Parent extends Component {
   *     static TypeName = 'parent';
   *     static Properties = {parentName: Property.string('parent')}
   * }
   *
   * class Child extends Parent {
   *     static TypeName = 'child';
   *     static Properties = {name: Property.string('child')}
   *     static InheritProperties = true;
   *
   *     start() {
   *         // Works because `InheritProperties` is `true`.
   *         console.log(`${this.name} inherits from ${this.parentName}`);
   *     }
   * }
   * ```
   *
   * @note Properties defined in descendant classes will override properties
   * with the same name defined in ancestor classes.
   *
   * Defaults to `true`.
   */
  __publicField(Component2, "InheritProperties");
  /**
   * Called when this component class is registered.
   *
   * @example
   *
   * This callback can be used to register dependencies of a component,
   * e.g., component classes that need to be registered in order to add
   * them at runtime with {@link Object3D.addComponent}, independent of whether
   * they are used in the editor.
   *
   * ```js
   * class Spawner extends Component {
   *     static TypeName = 'spawner';
   *
   *     static onRegister(engine) {
   *         engine.registerComponent(SpawnedComponent);
   *     }
   *
   *     // You can now use addComponent with SpawnedComponent
   * }
   * ```
   *
   * @example
   *
   * This callback can be used to register different implementations of a
   * component depending on client features or API versions.
   *
   * ```js
   * // Properties need to be the same for all implementations!
   * const SharedProperties = {};
   *
   * class Anchor extends Component {
   *     static TypeName = 'spawner';
   *     static Properties = SharedProperties;
   *
   *     static onRegister(engine) {
   *         if(navigator.xr === undefined) {
   *             /* WebXR unsupported, keep this dummy component *\/
   *             return;
   *         }
   *         /* WebXR supported! Override already registered dummy implementation
   *          * with one depending on hit-test API support *\/
   *         engine.registerComponent(window.HitTestSource === undefined ?
   *             AnchorWithoutHitTest : AnchorWithHitTest);
   *     }
   *
   *     // This one implements no functions
   * }
   * ```
   */
  __publicField(Component2, "onRegister");
  var BrokenComponent2 = class extends Component2 {
  };
  __publicField(BrokenComponent2, "TypeName", "__broken-component__");
  function inheritProperties2(target) {
    if (!target.TypeName)
      return;
    const chain = [];
    let curr = target;
    while (curr && !isBaseComponentClass2(curr)) {
      const comp = curr;
      const needsMerge = comp.hasOwnProperty("InheritProperties") ? comp.InheritProperties : true;
      if (!needsMerge)
        break;
      if (comp.TypeName && comp.hasOwnProperty("Properties")) {
        chain.push(comp.Properties);
      }
      curr = Object.getPrototypeOf(curr);
    }
    if (chain.length <= 1)
      return;
    const merged = {};
    for (let i = chain.length - 1; i >= 0; --i) {
      Object.assign(merged, chain[i]);
    }
    target.Properties = merged;
  }
  var _CollisionComponent = class extends Component2 {
    /** Collision component collider */
    get collider() {
      return this._engine.wasm._wl_collision_component_get_collider(this._id);
    }
    /**
     * Set collision component collider.
     *
     * @param collider Collider of the collision component.
     */
    set collider(collider) {
      this._engine.wasm._wl_collision_component_set_collider(this._id, collider);
    }
    /**
     * Collision component extents.
     *
     * If {@link collider} returns {@link Collider.Sphere}, only the first
     * component of the returned vector is used.
     */
    get extents() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
    }
    /**
     * Set collision component extents.
     *
     * If {@link collider} returns {@link Collider.Sphere}, only the first
     * component of the passed vector is used.
     *
     * Example:
     *
     * ```js
     * // Spans 1 unit on the x-axis, 2 on the y-axis, 3 on the z-axis.
     * collision.extent = [1, 2, 3];
     * ```
     *
     * @param extents Extents of the collision component, expects a
     *      3 component array.
     */
    set extents(extents) {
      this.extents.set(extents);
    }
    /**
     * Get collision component radius.
     *
     * @note If {@link collider} is not {@link Collider.Sphere}, the returned value
     * corresponds to the radius of a sphere enclosing the shape.
     *
     * Example:
     * ```js
     * sphere.radius = 3.0;
     * console.log(sphere.radius); // 3.0
     *
     * box.extents = [2.0, 2.0, 2.0];
     * console.log(box.radius); // 1.732...
     * ```
     *
     */
    get radius() {
      const wasm = this._engine.wasm;
      if (this.collider === Collider2.Sphere)
        return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];
      const extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
      const x2 = extents[0] * extents[0];
      const y2 = extents[1] * extents[1];
      const z2 = extents[2] * extents[2];
      return Math.sqrt(x2 + y2 + z2) / 2;
    }
    /**
     * Set collision component radius.
     *
     * @param radius Radius of the collision component
     *
     * @note If {@link collider} is not {@link Collider.Sphere},
     * the extents are set to form a square that fits a sphere with the provided radius.
     *
     * Example:
     * ```js
     * aabbCollision.radius = 2.0; // AABB fits a sphere of radius 2.0
     * boxCollision.radius = 3.0; // Box now fits a sphere of radius 3.0, keeping orientation
     * ```
     *
     */
    set radius(radius) {
      const length5 = this.collider === Collider2.Sphere ? radius : 2 * radius / SQRT_32;
      this.extents.set([length5, length5, length5]);
    }
    /**
     * Collision component group.
     *
     * The groups is a bitmask that is compared to other components in {@link CollisionComponent#queryOverlaps}
     * or the group in {@link Scene#rayCast}.
     *
     * Colliders that have no common groups will not overlap with each other. If a collider
     * has none of the groups set for {@link Scene#rayCast}, the ray will not hit it.
     *
     * Each bit represents belonging to a group, see example.
     *
     * ```js
     *    // c belongs to group 2
     *    c.group = (1 << 2);
     *
     *    // c belongs to group 0
     *    c.group = (1 << 0);
     *
     *    // c belongs to group 0 *and* 2
     *    c.group = (1 << 0) | (1 << 2);
     *
     *    (c.group & (1 << 2)) != 0; // true
     *    (c.group & (1 << 7)) != 0; // false
     * ```
     */
    get group() {
      return this._engine.wasm._wl_collision_component_get_group(this._id);
    }
    /**
     * Set collision component group.
     *
     * @param group Group mask of the collision component.
     */
    set group(group) {
      this._engine.wasm._wl_collision_component_set_group(this._id, group);
    }
    /**
     * Query overlapping objects.
     *
     * Usage:
     *
     * ```js
     * const collision = object.getComponent('collision');
     * const overlaps = collision.queryOverlaps();
     * for(const otherCollision of overlaps) {
     *     const otherObject = otherCollision.object;
     *     console.log(`Collision with object ${otherObject.objectId}`);
     * }
     * ```
     *
     * @returns Collision components overlapping this collider.
     */
    queryOverlaps() {
      const count = this._engine.wasm._wl_collision_component_query_overlaps(this._id, this._engine.wasm._tempMem, this._engine.wasm._tempMemSize >> 1);
      const overlaps = new Array(count);
      for (let i = 0; i < count; ++i) {
        overlaps[i] = new _CollisionComponent(this._engine, this._manager, this._engine.wasm._tempMemUint16[i]);
      }
      return overlaps;
    }
  };
  var CollisionComponent2 = _CollisionComponent;
  /** @override */
  __publicField(CollisionComponent2, "TypeName", "collision");
  __decorate19([
    nativeProperty2()
  ], CollisionComponent2.prototype, "collider", null);
  __decorate19([
    nativeProperty2()
  ], CollisionComponent2.prototype, "extents", null);
  __decorate19([
    nativeProperty2()
  ], CollisionComponent2.prototype, "group", null);
  var TextComponent2 = class extends Component2 {
    /** Text component alignment. */
    get alignment() {
      return this._engine.wasm._wl_text_component_get_horizontal_alignment(this._id);
    }
    /**
     * Set text component alignment.
     *
     * @param alignment Alignment for the text component.
     */
    set alignment(alignment) {
      this._engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);
    }
    /** Text component justification. */
    get justification() {
      return this._engine.wasm._wl_text_component_get_vertical_alignment(this._id);
    }
    /**
     * Set text component justification.
     *
     * @param justification Justification for the text component.
     */
    set justification(justification) {
      this._engine.wasm._wl_text_component_set_vertical_alignment(this._id, justification);
    }
    /** Text component character spacing. */
    get characterSpacing() {
      return this._engine.wasm._wl_text_component_get_character_spacing(this._id);
    }
    /**
     * Set text component character spacing.
     *
     * @param spacing Character spacing for the text component.
     */
    set characterSpacing(spacing) {
      this._engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);
    }
    /** Text component line spacing. */
    get lineSpacing() {
      return this._engine.wasm._wl_text_component_get_line_spacing(this._id);
    }
    /**
     * Set text component line spacing
     *
     * @param spacing Line spacing for the text component
     */
    set lineSpacing(spacing) {
      this._engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);
    }
    /** Text component effect. */
    get effect() {
      return this._engine.wasm._wl_text_component_get_effect(this._id);
    }
    /**
     * Set text component effect
     *
     * @param effect Effect for the text component
     */
    set effect(effect) {
      this._engine.wasm._wl_text_component_set_effect(this._id, effect);
    }
    /** Text component text. */
    get text() {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_text_component_get_text(this._id);
      return wasm.UTF8ToString(ptr);
    }
    /**
     * Set text component text.
     *
     * @param text Text of the text component.
     */
    set text(text) {
      const wasm = this._engine.wasm;
      wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));
    }
    /**
     * Set material to render the text with.
     *
     * @param material New material.
     */
    set material(material) {
      const matIndex = material ? material._index : 0;
      this._engine.wasm._wl_text_component_set_material(this._id, matIndex);
    }
    /** Material used to render the text. */
    get material() {
      const id = this._engine.wasm._wl_text_component_get_material(this._id);
      return id > 0 ? new Material2(this._engine, id) : null;
    }
  };
  /** @override */
  __publicField(TextComponent2, "TypeName", "text");
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "alignment", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "justification", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "characterSpacing", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "lineSpacing", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "effect", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "text", null);
  __decorate19([
    nativeProperty2()
  ], TextComponent2.prototype, "material", null);
  var ViewComponent2 = class extends Component2 {
    /** Projection matrix. */
    get projectionMatrix() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);
    }
    /** ViewComponent near clipping plane value. */
    get near() {
      return this._engine.wasm._wl_view_component_get_near(this._id);
    }
    /**
     * Set near clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param near Near depth value.
     */
    set near(near) {
      this._engine.wasm._wl_view_component_set_near(this._id, near);
    }
    /** Far clipping plane value. */
    get far() {
      return this._engine.wasm._wl_view_component_get_far(this._id);
    }
    /**
     * Set far clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param far Near depth value.
     */
    set far(far) {
      this._engine.wasm._wl_view_component_set_far(this._id, far);
    }
    /**
     * Get the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, this returns the field of view reported by
     * the device, regardless of the fov that was set.
     */
    get fov() {
      return this._engine.wasm._wl_view_component_get_fov(this._id);
    }
    /**
     * Set the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, the field of view reported by the device is
     * used and this value is ignored. After the XR session ends, the new value
     * is applied.
     *
     * @param fov Horizontal field of view, **in degrees**.
     */
    set fov(fov) {
      this._engine.wasm._wl_view_component_set_fov(this._id, fov);
    }
  };
  /** @override */
  __publicField(ViewComponent2, "TypeName", "view");
  __decorate19([
    enumerable2()
  ], ViewComponent2.prototype, "projectionMatrix", null);
  __decorate19([
    nativeProperty2()
  ], ViewComponent2.prototype, "near", null);
  __decorate19([
    nativeProperty2()
  ], ViewComponent2.prototype, "far", null);
  __decorate19([
    nativeProperty2()
  ], ViewComponent2.prototype, "fov", null);
  var InputComponent2 = class extends Component2 {
    /** Input component type */
    get inputType() {
      return this._engine.wasm._wl_input_component_get_type(this._id);
    }
    /**
     * Set input component type.
     *
     * @params New input component type.
     */
    set inputType(type) {
      this._engine.wasm._wl_input_component_set_type(this._id, type);
    }
    /**
     * WebXR Device API input source associated with this input component,
     * if type {@link InputType.ControllerLeft} or {@link InputType.ControllerRight}.
     */
    get xrInputSource() {
      const xrSession = this._engine.xrSession;
      if (xrSession) {
        for (let inputSource of xrSession.inputSources) {
          if (inputSource.handedness == this.handedness) {
            return inputSource;
          }
        }
      }
      return null;
    }
    /**
     * 'left', 'right' or `null` depending on the {@link InputComponent#inputType}.
     */
    get handedness() {
      const inputType = this.inputType;
      if (inputType == InputType2.ControllerRight || inputType == InputType2.RayRight || inputType == InputType2.EyeRight)
        return "right";
      if (inputType == InputType2.ControllerLeft || inputType == InputType2.RayLeft || inputType == InputType2.EyeLeft)
        return "left";
      return null;
    }
  };
  /** @override */
  __publicField(InputComponent2, "TypeName", "input");
  __decorate19([
    nativeProperty2()
  ], InputComponent2.prototype, "inputType", null);
  __decorate19([
    enumerable2()
  ], InputComponent2.prototype, "xrInputSource", null);
  __decorate19([
    enumerable2()
  ], InputComponent2.prototype, "handedness", null);
  var LightComponent2 = class extends Component2 {
    getColor(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /**
     * Set light color.
     *
     * @param c New color array/vector, expected to have at least 3 elements.
     * @since 1.0.0
     */
    setColor(c) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      wasm.HEAPF32[ptr] = c[0];
      wasm.HEAPF32[ptr + 1] = c[1];
      wasm.HEAPF32[ptr + 2] = c[2];
    }
    /**
     * View on the light color.
     *
     * @note Prefer to use {@link getColor} in performance-critical code.
     */
    get color() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);
    }
    /**
     * Set light color.
     *
     * @param c Color of the light component.
     *
     * @note Prefer to use {@link setColor} in performance-critical code.
     */
    set color(c) {
      this.color.set(c);
    }
    /** Light type. */
    get lightType() {
      return this._engine.wasm._wl_light_component_get_type(this._id);
    }
    /**
     * Set light type.
     *
     * @param lightType Type of the light component.
     */
    set lightType(t) {
      this._engine.wasm._wl_light_component_set_type(this._id, t);
    }
    /**
     * Light intensity.
     * @since 1.0.0
     */
    get intensity() {
      return this._engine.wasm._wl_light_component_get_intensity(this._id);
    }
    /**
     * Set light intensity.
     *
     * @param intensity Intensity of the light component.
     * @since 1.0.0
     */
    set intensity(intensity) {
      this._engine.wasm._wl_light_component_set_intensity(this._id, intensity);
    }
    /**
     * Outer angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get outerAngle() {
      return this._engine.wasm._wl_light_component_get_outerAngle(this._id);
    }
    /**
     * Set outer angle for spot lights.
     *
     * @param angle Outer angle, in degrees.
     * @since 1.0.0
     */
    set outerAngle(angle2) {
      this._engine.wasm._wl_light_component_set_outerAngle(this._id, angle2);
    }
    /**
     * Inner angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get innerAngle() {
      return this._engine.wasm._wl_light_component_get_innerAngle(this._id);
    }
    /**
     * Set inner angle for spot lights.
     *
     * @param angle Inner angle, in degrees.
     * @since 1.0.0
     */
    set innerAngle(angle2) {
      this._engine.wasm._wl_light_component_set_innerAngle(this._id, angle2);
    }
    /**
     * Whether the light casts shadows.
     * @since 1.0.0
     */
    get shadows() {
      return !!this._engine.wasm._wl_light_component_get_shadows(this._id);
    }
    /**
     * Set whether the light casts shadows.
     *
     * @param b Whether the light casts shadows.
     * @since 1.0.0
     */
    set shadows(b) {
      this._engine.wasm._wl_light_component_set_shadows(this._id, b);
    }
    /**
     * Range for shadows.
     * @since 1.0.0
     */
    get shadowRange() {
      return this._engine.wasm._wl_light_component_get_shadowRange(this._id);
    }
    /**
     * Set range for shadows.
     *
     * @param range Range for shadows.
     * @since 1.0.0
     */
    set shadowRange(range) {
      this._engine.wasm._wl_light_component_set_shadowRange(this._id, range);
    }
    /**
     * Bias value for shadows.
     * @since 1.0.0
     */
    get shadowBias() {
      return this._engine.wasm._wl_light_component_get_shadowBias(this._id);
    }
    /**
     * Set bias value for shadows.
     *
     * @param bias Bias for shadows.
     * @since 1.0.0
     */
    set shadowBias(bias) {
      this._engine.wasm._wl_light_component_set_shadowBias(this._id, bias);
    }
    /**
     * Normal bias value for shadows.
     * @since 1.0.0
     */
    get shadowNormalBias() {
      return this._engine.wasm._wl_light_component_get_shadowNormalBias(this._id);
    }
    /**
     * Set normal bias value for shadows.
     *
     * @param bias Normal bias for shadows.
     * @since 1.0.0
     */
    set shadowNormalBias(bias) {
      this._engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);
    }
    /**
     * Texel size for shadows.
     * @since 1.0.0
     */
    get shadowTexelSize() {
      return this._engine.wasm._wl_light_component_get_shadowTexelSize(this._id);
    }
    /**
     * Set texel size for shadows.
     *
     * @param size Texel size for shadows.
     * @since 1.0.0
     */
    set shadowTexelSize(size) {
      this._engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);
    }
    /**
     * Cascade count for {@link LightType.Sun} shadows.
     * @since 1.0.0
     */
    get cascadeCount() {
      return this._engine.wasm._wl_light_component_get_cascadeCount(this._id);
    }
    /**
     * Set cascade count for {@link LightType.Sun} shadows.
     *
     * @param count Cascade count.
     * @since 1.0.0
     */
    set cascadeCount(count) {
      this._engine.wasm._wl_light_component_set_cascadeCount(this._id, count);
    }
  };
  /** @override */
  __publicField(LightComponent2, "TypeName", "light");
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "color", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "lightType", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "intensity", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "outerAngle", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "innerAngle", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "shadows", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "shadowRange", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "shadowBias", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "shadowNormalBias", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "shadowTexelSize", null);
  __decorate19([
    nativeProperty2()
  ], LightComponent2.prototype, "cascadeCount", null);
  var AnimationComponent2 = class extends Component2 {
    /**
     * Set animation to play.
     *
     * Make sure to {@link Animation#retarget} the animation to affect the
     * right objects.
     *
     * @param anim Animation to play.
     */
    set animation(anim) {
      this._engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._index : 0);
    }
    /** Animation set for this component */
    get animation() {
      const id = this._engine.wasm._wl_animation_component_get_animation(this._id);
      return id > 0 ? new Animation2(this._engine, id) : null;
    }
    /**
     * Set play count. Set to `0` to loop indefinitely.
     *
     * @param playCount Number of times to repeat the animation.
     */
    set playCount(playCount) {
      this._engine.wasm._wl_animation_component_set_playCount(this._id, playCount);
    }
    /** Number of times the animation is played. */
    get playCount() {
      return this._engine.wasm._wl_animation_component_get_playCount(this._id);
    }
    /**
     * Set speed. Set to negative values to run the animation backwards.
     *
     * Setting speed has an immediate effect for the current frame's update
     * and will continue with the speed from the current point in the animation.
     *
     * @param speed New speed at which to play the animation.
     * @since 0.8.10
     */
    set speed(speed) {
      this._engine.wasm._wl_animation_component_set_speed(this._id, speed);
    }
    /**
     * Speed factor at which the animation is played.
     *
     * @since 0.8.10
     */
    get speed() {
      return this._engine.wasm._wl_animation_component_get_speed(this._id);
    }
    /** Current playing state of the animation */
    get state() {
      return this._engine.wasm._wl_animation_component_state(this._id);
    }
    /**
     * Play animation.
     *
     * If the animation is currently paused, resumes from that position. If the
     * animation is already playing, does nothing.
     *
     * To restart the animation, {@link AnimationComponent#stop} it first.
     */
    play() {
      this._engine.wasm._wl_animation_component_play(this._id);
    }
    /** Stop animation. */
    stop() {
      this._engine.wasm._wl_animation_component_stop(this._id);
    }
    /** Pause animation. */
    pause() {
      this._engine.wasm._wl_animation_component_pause(this._id);
    }
  };
  /** @override */
  __publicField(AnimationComponent2, "TypeName", "animation");
  __decorate19([
    nativeProperty2()
  ], AnimationComponent2.prototype, "animation", null);
  __decorate19([
    nativeProperty2()
  ], AnimationComponent2.prototype, "playCount", null);
  __decorate19([
    nativeProperty2()
  ], AnimationComponent2.prototype, "speed", null);
  __decorate19([
    enumerable2()
  ], AnimationComponent2.prototype, "state", null);
  var MeshComponent2 = class extends Component2 {
    /**
     * Set material to render the mesh with.
     *
     * @param material Material to render the mesh with.
     */
    set material(material) {
      this._engine.wasm._wl_mesh_component_set_material(this._id, material ? material._index : 0);
    }
    /** Material used to render the mesh. */
    get material() {
      const id = this._engine.wasm._wl_mesh_component_get_material(this._id);
      return id > 0 ? new Material2(this._engine, id) : null;
    }
    /** Mesh rendered by this component. */
    get mesh() {
      const id = this._engine.wasm._wl_mesh_component_get_mesh(this._id);
      return id > 0 ? new Mesh2(this._engine, id) : null;
    }
    /**
     * Set mesh to rendered with this component.
     *
     * @param mesh Mesh rendered by this component.
     */
    set mesh(mesh) {
      this._engine.wasm._wl_mesh_component_set_mesh(this._id, mesh ? mesh._index : 0);
    }
    /** Skin for this mesh component. */
    get skin() {
      const id = this._engine.wasm._wl_mesh_component_get_skin(this._id);
      return id > 0 ? new Skin2(this._engine, id) : null;
    }
    /**
     * Set skin to transform this mesh component.
     *
     * @param skin Skin to use for rendering skinned meshes.
     */
    set skin(skin) {
      this._engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._index : 0);
    }
  };
  /** @override */
  __publicField(MeshComponent2, "TypeName", "mesh");
  __decorate19([
    nativeProperty2()
  ], MeshComponent2.prototype, "material", null);
  __decorate19([
    nativeProperty2()
  ], MeshComponent2.prototype, "mesh", null);
  __decorate19([
    nativeProperty2()
  ], MeshComponent2.prototype, "skin", null);
  var LockAxis2;
  (function(LockAxis3) {
    LockAxis3[LockAxis3["None"] = 0] = "None";
    LockAxis3[LockAxis3["X"] = 1] = "X";
    LockAxis3[LockAxis3["Y"] = 2] = "Y";
    LockAxis3[LockAxis3["Z"] = 4] = "Z";
  })(LockAxis2 || (LockAxis2 = {}));
  var PhysXComponent2 = class extends Component2 {
    getTranslationOffset(out = new Float32Array(3)) {
      const wasm = this._engine.wasm;
      wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    getRotationOffset(out = new Float32Array(4)) {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      return out;
    }
    /**
     * Set whether this rigid body is static.
     *
     * Setting this property only takes effect once the component
     * switches from inactive to active.
     *
     * @param b Whether the rigid body should be static.
     */
    set static(b) {
      this._engine.wasm._wl_physx_component_set_static(this._id, b);
    }
    /**
     * Whether this rigid body is static.
     *
     * This property returns whether the rigid body is *effectively*
     * static. If static property was set while the rigid body was
     * active, it will not take effect until the rigid body is set
     * inactive and active again. Until the component is set inactive,
     * this getter will return whether the rigid body is actually
     * static.
     */
    get static() {
      return !!this._engine.wasm._wl_physx_component_get_static(this._id);
    }
    /**
     * Equivalent to {@link PhysXComponent.getTranslationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getTranslationOffset} for performance.
     *
     * @since 1.1.1
     */
    get translationOffset() {
      return this.getTranslationOffset();
    }
    /**
     * Set the offset translation.
     *
     * The array must be a vector of at least **3** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set translationOffset(offset2) {
      const wasm = this._engine.wasm;
      wasm._wl_physx_component_set_offsetTranslation(this._id, offset2[0], offset2[1], offset2[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getRotationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getRotationOffset} for performance.
     *
     * @since 1.1.1
     */
    get rotationOffset() {
      return this.getRotationOffset();
    }
    /**
     * Set the offset rotation.
     *
     * The array must be a quaternion of at least **4** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set rotationOffset(offset2) {
      const wasm = this._engine.wasm;
      wasm._wl_physx_component_set_offsetRotation(this._id, offset2[0], offset2[1], offset2[2], offset2[3]);
    }
    /**
     * Set whether this rigid body is kinematic.
     *
     * @param b Whether the rigid body should be kinematic.
     */
    set kinematic(b) {
      this._engine.wasm._wl_physx_component_set_kinematic(this._id, b);
    }
    /**
     * Whether this rigid body is kinematic.
     */
    get kinematic() {
      return !!this._engine.wasm._wl_physx_component_get_kinematic(this._id);
    }
    /**
     * Set whether this rigid body's gravity is enabled.
     *
     * @param b Whether the rigid body's gravity should be enabled.
     */
    set gravity(b) {
      this._engine.wasm._wl_physx_component_set_gravity(this._id, b);
    }
    /**
     * Whether this rigid body's gravity flag is enabled.
     */
    get gravity() {
      return !!this._engine.wasm._wl_physx_component_get_gravity(this._id);
    }
    /**
     * Set whether this rigid body's simulate flag is enabled.
     *
     * @param b Whether the rigid body's simulate flag should be enabled.
     */
    set simulate(b) {
      this._engine.wasm._wl_physx_component_set_simulate(this._id, b);
    }
    /**
     * Whether this rigid body's simulate flag is enabled.
     */
    get simulate() {
      return !!this._engine.wasm._wl_physx_component_get_simulate(this._id);
    }
    /**
     * Set whether to allow simulation of this rigid body.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling {@link allowSimulation} while {@link trigger} is enabled
     * will disable {@link trigger}.
     *
     * @param b Whether to allow simulation of this rigid body.
     */
    set allowSimulation(b) {
      this._engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);
    }
    /**
     * Whether to allow simulation of this rigid body.
     */
    get allowSimulation() {
      return !!this._engine.wasm._wl_physx_component_get_allowSimulation(this._id);
    }
    /**
     * Set whether this rigid body may be queried in ray casts.
     *
     * @param b Whether this rigid body may be queried in ray casts.
     */
    set allowQuery(b) {
      this._engine.wasm._wl_physx_component_set_allowQuery(this._id, b);
    }
    /**
     * Whether this rigid body may be queried in ray casts.
     */
    get allowQuery() {
      return !!this._engine.wasm._wl_physx_component_get_allowQuery(this._id);
    }
    /**
     * Set whether this physics body is a trigger.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling trigger while {@link allowSimulation} is enabled,
     * will disable {@link allowSimulation}.
     *
     * @param b Whether this physics body is a trigger.
     */
    set trigger(b) {
      this._engine.wasm._wl_physx_component_set_trigger(this._id, b);
    }
    /**
     * Whether this physics body is a trigger.
     */
    get trigger() {
      return !!this._engine.wasm._wl_physx_component_get_trigger(this._id);
    }
    /**
     * Set the shape for collision detection.
     *
     * @param s New shape.
     * @since 0.8.5
     */
    set shape(s) {
      this._engine.wasm._wl_physx_component_set_shape(this._id, s);
    }
    /** The shape for collision detection. */
    get shape() {
      return this._engine.wasm._wl_physx_component_get_shape(this._id);
    }
    /**
     * Set additional data for the shape.
     *
     * Retrieved only from {@link PhysXComponent#shapeData}.
     * @since 0.8.10
     */
    set shapeData(d) {
      if (d == null || !isMeshShape2(this.shape))
        return;
      this._engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);
    }
    /**
     * Additional data for the shape.
     *
     * `null` for {@link Shape} values: `None`, `Sphere`, `Capsule`, `Box`, `Plane`.
     * `{index: n}` for `TriangleMesh` and `ConvexHull`.
     *
     * This data is currently only for passing onto or creating other {@link PhysXComponent}.
     * @since 0.8.10
     */
    get shapeData() {
      if (!isMeshShape2(this.shape))
        return null;
      return {
        index: this._engine.wasm._wl_physx_component_get_shape_data(this._id)
      };
    }
    /**
     * Set the shape extents for collision detection.
     *
     * @param e New extents for the shape.
     * @since 0.8.5
     */
    set extents(e) {
      this.extents.set(e);
    }
    /**
     * The shape extents for collision detection.
     */
    get extents() {
      const wasm = this._engine.wasm;
      const ptr = wasm._wl_physx_component_get_extents(this._id);
      return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);
    }
    /**
     * Get staticFriction.
     */
    get staticFriction() {
      return this._engine.wasm._wl_physx_component_get_staticFriction(this._id);
    }
    /**
     * Set staticFriction.
     * @param v New staticFriction.
     */
    set staticFriction(v) {
      this._engine.wasm._wl_physx_component_set_staticFriction(this._id, v);
    }
    /**
     * Get dynamicFriction.
     */
    get dynamicFriction() {
      return this._engine.wasm._wl_physx_component_get_dynamicFriction(this._id);
    }
    /**
     * Set dynamicFriction
     * @param v New dynamicDamping.
     */
    set dynamicFriction(v) {
      this._engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);
    }
    /**
     * Get bounciness.
     * @since 0.9.0
     */
    get bounciness() {
      return this._engine.wasm._wl_physx_component_get_bounciness(this._id);
    }
    /**
     * Set bounciness.
     * @param v New bounciness.
     * @since 0.9.0
     */
    set bounciness(v) {
      this._engine.wasm._wl_physx_component_set_bounciness(this._id, v);
    }
    /**
     * Get linearDamping/
     */
    get linearDamping() {
      return this._engine.wasm._wl_physx_component_get_linearDamping(this._id);
    }
    /**
     * Set linearDamping.
     * @param v New linearDamping.
     */
    set linearDamping(v) {
      this._engine.wasm._wl_physx_component_set_linearDamping(this._id, v);
    }
    /** Get angularDamping. */
    get angularDamping() {
      return this._engine.wasm._wl_physx_component_get_angularDamping(this._id);
    }
    /**
     * Set angularDamping.
     * @param v New angularDamping.
     */
    set angularDamping(v) {
      this._engine.wasm._wl_physx_component_set_angularDamping(this._id, v);
    }
    /**
     * Set linear velocity.
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New linear velocity.
     */
    set linearVelocity(v) {
      this._engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);
    }
    /** Linear velocity or `[0, 0, 0]` if the component is not active. */
    get linearVelocity() {
      const wasm = this._engine.wasm;
      wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set angular velocity
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New angular velocity
     */
    set angularVelocity(v) {
      this._engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);
    }
    /** Angular velocity or `[0, 0, 0]` if the component is not active. */
    get angularVelocity() {
      const wasm = this._engine.wasm;
      wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set the components groups mask.
     *
     * @param flags New flags that need to be set.
     */
    set groupsMask(flags) {
      this._engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);
    }
    /**
     * Get the components groups mask flags.
     *
     * Each bit represents membership to group, see example.
     *
     * ```js
     * // Assign c to group 2
     * c.groupsMask = (1 << 2);
     *
     * // Assign c to group 0
     * c.groupsMask  = (1 << 0);
     *
     * // Assign c to group 0 and 2
     * c.groupsMask = (1 << 0) | (1 << 2);
     *
     * (c.groupsMask & (1 << 2)) != 0; // true
     * (c.groupsMask & (1 << 7)) != 0; // false
     * ```
     */
    get groupsMask() {
      return this._engine.wasm._wl_physx_component_get_groupsMask(this._id);
    }
    /**
     * Set the components blocks mask.
     *
     * @param flags New flags that need to be set.
     */
    set blocksMask(flags) {
      this._engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);
    }
    /**
     * Get the components blocks mask flags.
     *
     * Each bit represents membership to the block, see example.
     *
     * ```js
     * // Block overlap with any objects in group 2
     * c.blocksMask = (1 << 2);
     *
     * // Block overlap with any objects in group 0
     * c.blocksMask  = (1 << 0)
     *
     * // Block overlap with any objects in group 0 and 2
     * c.blocksMask = (1 << 0) | (1 << 2);
     *
     * (c.blocksMask & (1 << 2)) != 0; // true
     * (c.blocksMask & (1 << 7)) != 0; // false
     * ```
     */
    get blocksMask() {
      return this._engine.wasm._wl_physx_component_get_blocksMask(this._id);
    }
    /**
     * Set axes to lock for linear velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * Combine flags with Bitwise OR.
     * ```js
     * body.linearLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.linearLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set linearLockAxis(lock) {
      this._engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);
    }
    /**
     * Get the linear lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed.
     *
     * ```js
     * if(body.linearLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for linear movement.
     */
    get linearLockAxis() {
      return this._engine.wasm._wl_physx_component_get_linearLockAxis(this._id);
    }
    /**
     * Set axes to lock for angular velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * ```js
     * body.angularLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.angularLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set angularLockAxis(lock) {
      this._engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);
    }
    /**
     * Get the angular lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed.
     *
     * ```js
     * if(body.angularLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for angular movement.
     */
    get angularLockAxis() {
      return this._engine.wasm._wl_physx_component_get_angularLockAxis(this._id);
    }
    /**
     * Set mass.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * @param m New mass.
     */
    set mass(m) {
      this._engine.wasm._wl_physx_component_set_mass(this._id, m);
    }
    /** Mass */
    get mass() {
      return this._engine.wasm._wl_physx_component_get_mass(this._id);
    }
    /**
     * Set mass space interia tensor.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New mass space interatia tensor.
     */
    set massSpaceInteriaTensor(v) {
      this._engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);
    }
    /**
     * Apply a force.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     * @param localForce Whether the force vector is in local space, default `false`.
     * @param p Position to apply force at, default is center of mass.
     * @param local Whether position is in local space, default `false`.
     */
    addForce(f2, m = ForceMode2.Force, localForce = false, p, local = false) {
      const wasm = this._engine.wasm;
      if (!p) {
        wasm._wl_physx_component_addForce(this._id, f2[0], f2[1], f2[2], m, localForce);
        return;
      }
      wasm._wl_physx_component_addForceAt(this._id, f2[0], f2[1], f2[2], m, localForce, p[0], p[1], p[2], local);
    }
    /**
     * Apply torque.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     */
    addTorque(f2, m = ForceMode2.Force) {
      this._engine.wasm._wl_physx_component_addTorque(this._id, f2[0], f2[1], f2[2], m);
    }
    /**
     * Add on collision callback.
     *
     * @param callback Function to call when this rigid body (un)collides with any other.
     *
     * ```js
     *  let rigidBody = this.object.getComponent('physx');
     *  rigidBody.onCollision(function(type, other) {
     *      // Ignore uncollides
     *      if(type == CollisionEventType.TouchLost) return;
     *
     *      // Take damage on collision with enemies
     *      if(other.object.name.startsWith("enemy-")) {
     *          this.applyDamage(10);
     *      }
     *  }.bind(this));
     * ```
     *
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollision(callback) {
      return this.onCollisionWith(this, callback);
    }
    /**
     * Add filtered on collision callback.
     *
     * @param otherComp Component for which callbacks will
     *        be triggered. If you pass this component, the method is equivalent to.
     *        {@link PhysXComponent#onCollision}.
     * @param callback Function to call when this rigid body
     *        (un)collides with `otherComp`.
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollisionWith(otherComp, callback) {
      const physics = this._engine.physics;
      physics._callbacks[this._id] = physics._callbacks[this._id] || [];
      physics._callbacks[this._id].push(callback);
      return this._engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id || this._id);
    }
    /**
     * Remove a collision callback added with {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     *
     * @param callbackId Callback id as returned by {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     * @throws When the callback does not belong to the component.
     * @throws When the callback does not exist.
     */
    removeCollisionCallback(callbackId) {
      const physics = this._engine.physics;
      const r = this._engine.wasm._wl_physx_component_removeCallback(this._id, callbackId);
      if (r)
        physics._callbacks[this._id].splice(-r);
    }
  };
  /** @override */
  __publicField(PhysXComponent2, "TypeName", "physx");
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "static", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "translationOffset", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "rotationOffset", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "kinematic", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "gravity", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "simulate", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "allowSimulation", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "allowQuery", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "trigger", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "shape", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "shapeData", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "extents", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "staticFriction", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "dynamicFriction", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "bounciness", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "linearDamping", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "angularDamping", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "linearVelocity", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "angularVelocity", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "groupsMask", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "blocksMask", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "linearLockAxis", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "angularLockAxis", null);
  __decorate19([
    nativeProperty2()
  ], PhysXComponent2.prototype, "mass", null);
  var MeshIndexType2;
  (function(MeshIndexType3) {
    MeshIndexType3[MeshIndexType3["UnsignedByte"] = 1] = "UnsignedByte";
    MeshIndexType3[MeshIndexType3["UnsignedShort"] = 2] = "UnsignedShort";
    MeshIndexType3[MeshIndexType3["UnsignedInt"] = 4] = "UnsignedInt";
  })(MeshIndexType2 || (MeshIndexType2 = {}));
  var MeshSkinningType2;
  (function(MeshSkinningType3) {
    MeshSkinningType3[MeshSkinningType3["None"] = 0] = "None";
    MeshSkinningType3[MeshSkinningType3["FourJoints"] = 1] = "FourJoints";
    MeshSkinningType3[MeshSkinningType3["EightJoints"] = 2] = "EightJoints";
  })(MeshSkinningType2 || (MeshSkinningType2 = {}));
  var Mesh2 = class {
    /**
     * Index of the mesh in the manager.
     *
     * @hidden
     */
    _index = -1;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /**
     * Create a new instance.
     *
     * @param params Either a mesh index to wrap or set of parameters to create a new mesh.
     *    For more information, please have a look at the {@link MeshParameters} interface.
     */
    constructor(engine, params) {
      this._engine = engine ?? WL;
      this._index = -1;
      if (isNumber2(params)) {
        this._index = params;
        return;
      }
      if (!params.vertexCount)
        throw new Error("Missing parameter 'vertexCount'");
      const wasm = this._engine.wasm;
      let indexData = 0;
      let indexType = 0;
      let indexDataSize = 0;
      if (params.indexData) {
        indexType = params.indexType || MeshIndexType2.UnsignedShort;
        indexDataSize = params.indexData.length * indexType;
        indexData = wasm._malloc(indexDataSize);
        switch (indexType) {
          case MeshIndexType2.UnsignedByte:
            wasm.HEAPU8.set(params.indexData, indexData);
            break;
          case MeshIndexType2.UnsignedShort:
            wasm.HEAPU16.set(params.indexData, indexData >> 1);
            break;
          case MeshIndexType2.UnsignedInt:
            wasm.HEAPU32.set(params.indexData, indexData >> 2);
            break;
        }
      }
      const { skinningType = MeshSkinningType2.None } = params;
      this._index = wasm._wl_mesh_create(indexData, indexDataSize, indexType, params.vertexCount, skinningType);
    }
    /** Number of vertices in this mesh. */
    get vertexCount() {
      return this._engine.wasm._wl_mesh_get_vertexCount(this._index);
    }
    /** Index data (read-only) or `null` if the mesh is not indexed. */
    get indexData() {
      const wasm = this._engine.wasm;
      const tempMem = wasm._tempMem;
      const ptr = wasm._wl_mesh_get_indexData(this._index, tempMem, tempMem + 4);
      if (ptr === null)
        return null;
      const indexCount = wasm.HEAPU32[tempMem / 4];
      const indexSize = wasm.HEAPU32[tempMem / 4 + 1];
      switch (indexSize) {
        case MeshIndexType2.UnsignedByte:
          return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);
        case MeshIndexType2.UnsignedShort:
          return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);
        case MeshIndexType2.UnsignedInt:
          return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);
      }
      return null;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /**
     * Apply changes to {@link attribute | vertex attributes}.
     *
     * Uploads the updated vertex attributes to the GPU and updates the bounding
     * sphere to match the new vertex positions.
     *
     * Since this is an expensive operation, call it only once you have performed
     * all modifications on a mesh and avoid calling if you did not perform any
     * modifications at all.
     */
    update() {
      this._engine.wasm._wl_mesh_update(this._index);
    }
    getBoundingSphere(out = new Float32Array(4)) {
      const tempMemFloat = this._engine.wasm._tempMemFloat;
      this._engine.wasm._wl_mesh_get_boundingSphere(this._index, this._engine.wasm._tempMem);
      out[0] = tempMemFloat[0];
      out[1] = tempMemFloat[1];
      out[2] = tempMemFloat[2];
      out[3] = tempMemFloat[3];
      return out;
    }
    attribute(attr) {
      if (typeof attr != "number")
        throw new TypeError("Expected number, but got " + typeof attr);
      const tempMemUint32 = this._engine.wasm._tempMemUint32;
      this._engine.wasm._wl_mesh_get_attribute(this._index, attr, this._engine.wasm._tempMem);
      if (tempMemUint32[0] == 255)
        return null;
      const arraySize = tempMemUint32[5];
      return new MeshAttributeAccessor2(this._engine, {
        attribute: tempMemUint32[0],
        offset: tempMemUint32[1],
        stride: tempMemUint32[2],
        formatSize: tempMemUint32[3],
        componentCount: tempMemUint32[4],
        /* The WASM API returns `0` for a scalar value. We clamp it to 1 as we strictly use it as a multiplier for get/set operations */
        arraySize: arraySize ? arraySize : 1,
        length: this.vertexCount,
        bufferType: attr !== MeshAttribute2.JointId ? Float32Array : Uint16Array
      });
    }
    /**
     * Destroy and free the meshes memory.
     *
     * It is best practice to set the mesh variable to `null` after calling
     * destroy to prevent accidental use:
     *
     * ```js
     *   mesh.destroy();
     *   mesh = null;
     * ```
     *
     * Accessing the mesh after destruction behaves like accessing an empty
     * mesh.
     *
     * @since 0.9.0
     */
    destroy() {
      this._engine.wasm._wl_mesh_destroy(this._index);
    }
    /**
     * Checks equality by comparing whether the wrapped native mesh ids are
     * equal.
     *
     * @param otherMesh Mesh to check equality with.
     * @returns Whether this mesh equals the given mesh.
     *
     * @since 1.0.0
     */
    equals(otherMesh) {
      if (!otherMesh)
        return false;
      return this._index === otherMesh._index;
    }
  };
  var MeshAttributeAccessor2 = class {
    /** Max number of elements. */
    length = 0;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /** Attribute index. @hidden */
    _attribute = -1;
    /** Attribute offset. @hidden */
    _offset = 0;
    /** Attribute stride. @hidden */
    _stride = 0;
    /** Format size native enum. @hidden */
    _formatSize = 0;
    /** Number of components per vertex. @hidden */
    _componentCount = 0;
    /** Number of values per vertex. @hidden */
    _arraySize = 1;
    /**
     * Class to instantiate an ArrayBuffer to get/set values.
     */
    _bufferType;
    /**
     * Function to allocate temporary WASM memory. It is cached in the accessor to avoid
     * conditionals during get/set.
     */
    _tempBufferGetter;
    /**
     * Create a new instance.
     *
     * @note Please use {@link Mesh.attribute} to create a new instance.
     *
     * @param options Contains information about how to read the data.
     * @note Do not use this constructor. Instead, please use the {@link Mesh.attribute} method.
     *
     * @hidden
     */
    constructor(engine, options) {
      this._engine = engine;
      const wasm = this._engine.wasm;
      this._attribute = options.attribute;
      this._offset = options.offset;
      this._stride = options.stride;
      this._formatSize = options.formatSize;
      this._componentCount = options.componentCount;
      this._arraySize = options.arraySize;
      this._bufferType = options.bufferType;
      this.length = options.length;
      this._tempBufferGetter = this._bufferType === Float32Array ? wasm.getTempBufferF32.bind(wasm) : wasm.getTempBufferU16.bind(wasm);
    }
    /**
     * Create a new TypedArray to hold this attribute's values.
     *
     * This method is useful to create a view to hold the data to
     * pass to {@link get} and {@link set}
     *
     * Example:
     *
     * ```js
     * const vertexCount = 4;
     * const positionAttribute = mesh.attribute(MeshAttribute.Position);
     *
     * // A position has 3 floats per vertex. Thus, positions has length 3 * 4.
     * const positions = positionAttribute.createArray(vertexCount);
     * ```
     *
     * @param count The number of **vertices** expected.
     * @returns A TypedArray with the appropriate format to access the data
     */
    createArray(count = 1) {
      count = count > this.length ? this.length : count;
      return new this._bufferType(count * this._componentCount * this._arraySize);
    }
    get(index, out = this.createArray()) {
      if (out.length % this._componentCount !== 0) {
        throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      }
      const dest = this._tempBufferGetter(out.length);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const destSize = elementSize * out.length;
      const srcFormatSize = this._formatSize * this._arraySize;
      const destFormatSize = this._componentCount * elementSize * this._arraySize;
      this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);
      for (let i = 0; i < out.length; ++i)
        out[i] = dest[i];
      return out;
    }
    /**
     * Set attribute element.
     *
     * @param i Index
     * @param v Value to set the element to
     *
     * `v.length` needs to be a multiple of the attributes component count, see
     * {@link MeshAttribute}. If `v.length` is more than one multiple, it will be
     * filled with the next n attribute elements, which can reduce overhead
     * of this call.
     *
     * @returns Reference to self (for method chaining)
     */
    set(i, v) {
      if (v.length % this._componentCount !== 0)
        throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const srcSize = elementSize * v.length;
      const srcFormatSize = this._componentCount * elementSize * this._arraySize;
      const destFormatSize = this._formatSize * this._arraySize;
      const wasm = this._engine.wasm;
      if (v.buffer != wasm.HEAPU8.buffer) {
        const dest = this._tempBufferGetter(v.length);
        dest.set(v);
        v = dest;
      }
      wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride);
      return this;
    }
  };
  var Material2 = class {
    /**
     * Index of this material in the manager.
     *
     * @hidden
     */
    _index;
    /**
     * Material definition index in the scene.
     *
     * @hidden
     */
    _definition;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /**
     * Create a new Material.
     *
     * @note Creating material is expensive. Please use {@link Material#clone} to clone a material.
     * @note Do not use this constructor directly with an index, this is reserved for internal purposes.
     */
    constructor(engine, params) {
      this._engine = engine;
      if (typeof params !== "number") {
        if (!params?.pipeline)
          throw new Error("Missing parameter 'pipeline'");
        const wasm = this._engine.wasm;
        const pipeline = params.pipeline;
        this._index = wasm._wl_material_create(wasm.tempUTF8(pipeline));
        if (this._index < 0)
          throw new Error(`No such pipeline '${pipeline}'`);
      } else {
        this._index = params;
      }
      this._definition = this._engine.wasm._wl_material_get_definition(this._index);
      if (!this._engine.wasm._materialDefinitions[this._definition])
        throw new Error(`Material Definition ${this._definition} not found for material with index ${this._index}`);
      return new Proxy(this, {
        get(target, prop) {
          const wasm = engine.wasm;
          const definition = wasm._materialDefinitions[target._definition];
          const param = definition.get(prop);
          if (!param)
            return target[prop];
          if (wasm._wl_material_get_param_value(target._index, param.index, wasm._tempMem)) {
            const type = param.type;
            switch (type.type) {
              case MaterialParamType2.UnsignedInt:
                return type.componentCount == 1 ? wasm._tempMemUint32[0] : new Uint32Array(wasm.HEAPU32.buffer, wasm._tempMem, type.componentCount);
              case MaterialParamType2.Int:
                return type.componentCount == 1 ? wasm._tempMemInt[0] : new Int32Array(wasm.HEAP32.buffer, wasm._tempMem, type.componentCount);
              case MaterialParamType2.Float:
                return type.componentCount == 1 ? wasm._tempMemFloat[0] : new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, type.componentCount);
              case MaterialParamType2.Sampler:
                return engine.textures.wrap(wasm._tempMemInt[0]);
              default:
                throw new Error(`Invalid type ${type.type} on parameter ${param.index} for material ${target._index}`);
            }
          }
        },
        set(target, prop, value) {
          const wasm = engine.wasm;
          const definition = wasm._materialDefinitions[target._definition];
          const param = definition.get(prop);
          if (!param) {
            target[prop] = value;
            return true;
          }
          const type = param.type;
          switch (type.type) {
            case MaterialParamType2.UnsignedInt:
            case MaterialParamType2.Int:
            case MaterialParamType2.Sampler:
              const v = value.id ?? value;
              wasm._wl_material_set_param_value_uint(target._index, param.index, v);
              break;
            case MaterialParamType2.Float:
              let count = 1;
              if (typeof value === "number") {
                wasm._tempMemFloat[0] = value;
              } else {
                count = value.length;
                for (let i = 0; i < count; ++i)
                  wasm._tempMemFloat[i] = value[i];
              }
              wasm._wl_material_set_param_value_float(target._index, param.index, wasm._tempMem, count);
              break;
            case MaterialParamType2.Font:
              throw new Error("Setting font properties is currently unsupported.");
          }
          return true;
        }
      });
    }
    /** @deprecated Use {@link #pipeline} instead. */
    get shader() {
      return this.pipeline;
    }
    /** Name of the pipeline used by this material. */
    get pipeline() {
      const wasm = this._engine.wasm;
      return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._index));
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /**
     * Create a copy of the underlying native material.
     *
     * @returns Material clone.
     */
    clone() {
      const id = this._engine.wasm._wl_material_clone(this._index);
      return id > 0 ? new Material2(this._engine, id) : null;
    }
    /**
     * Checks equality by comparing whether the wrapped native material ids are
     * equal.
     *
     * @param otherMaterial Material to check equality with.
     * @returns Whether this material equals the given material.
     *
     * @since 1.0.0
     */
    equals(otherMaterial) {
      if (!otherMaterial)
        return false;
      return this._index === otherMaterial._index;
    }
    /**
     * Wrap a native material index.
     *
     * @param engine Engine instance.
     * @param index The index.
     * @returns Material instance or `null` if index <= 0.
     *
     * @deprecated Please use `new Material()` instead.
     */
    static wrap(engine, index) {
      return index > 0 ? new Material2(engine, index) : null;
    }
  };
  var Animation2 = class {
    /** Index of the mesh in the manager. @hidden */
    _index;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /**
     * @param index Index in the manager
     */
    constructor(engine = WL, index) {
      this._engine = engine;
      this._index = index;
    }
    /** Duration of this animation. */
    get duration() {
      return this._engine.wasm._wl_animation_get_duration(this._index);
    }
    /** Number of tracks in this animation. */
    get trackCount() {
      return this._engine.wasm._wl_animation_get_trackCount(this._index);
    }
    /**
     * Clone this animation retargeted to a new set of objects.
     *
     * The clone shares most of the data with the original and is therefore
     * light-weight.
     *
     * **Experimental:** This API might change in upcoming versions.
     *
     * If retargeting to {@link Skin}, the join names will be used to determine a mapping
     * from the previous skin to the new skin. The source skin will be retrieved from
     * the first track in the animation that targets a joint.
     *
     * @param newTargets New targets per track. Expected to have
     *      {@link Animation#trackCount} elements or to be a {@link Skin}.
     * @returns The retargeted clone of this animation.
     */
    retarget(newTargets) {
      const wasm = this._engine.wasm;
      if (newTargets instanceof Skin2) {
        const animId2 = wasm._wl_animation_retargetToSkin(this._index, newTargets._index);
        return new Animation2(this._engine, animId2);
      }
      if (newTargets.length != this.trackCount) {
        throw Error("Expected " + this.trackCount.toString() + " targets, but got " + newTargets.length.toString());
      }
      const ptr = wasm._malloc(2 * newTargets.length);
      for (let i = 0; i < newTargets.length; ++i) {
        wasm.HEAPU16[ptr >> 1 + i] = newTargets[i].objectId;
      }
      const animId = wasm._wl_animation_retarget(this._index, ptr);
      wasm._free(ptr);
      return new Animation2(this._engine, animId);
    }
    /**
     * Checks equality by comparing whether the wrapped native animation ids
     * are equal.
     *
     * @param otherAnimation Animation to check equality with.
     * @returns Whether this animation equals the given animation.
     *
     * @since 1.0.0
     */
    equals(otherAnimation) {
      if (!otherAnimation)
        return false;
      return this._index === otherAnimation._index;
    }
  };
  var Skin2 = class {
    /**
     * Index of the skin in the manager.
     * @hidden
     */
    _index;
    /** Wonderland Engine instance. @hidden */
    _engine;
    constructor(engine, index) {
      this._engine = engine;
      this._index = index;
    }
    /** Amount of joints in this skin. */
    get jointCount() {
      return this._engine.wasm._wl_skin_get_joint_count(this._index);
    }
    /** Joints object ids for this skin */
    get jointIds() {
      const wasm = this._engine.wasm;
      return new Uint16Array(wasm.HEAPU16.buffer, wasm._wl_skin_joint_ids(this._index), this.jointCount);
    }
    /**
     * Dual quaternions in a flat array of size 8 times {@link jointCount}.
     *
     * Inverse bind transforms of the skin.
     */
    get inverseBindTransforms() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_transforms(this._index), 8 * this.jointCount);
    }
    /**
     * Vectors in a flat array of size 3 times {@link jointCount}.
     *
     * Inverse bind scalings of the skin.
     */
    get inverseBindScalings() {
      const wasm = this._engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_skin_inverse_bind_scalings(this._index), 3 * this.jointCount);
    }
    /**
     * Checks equality by comparing whether the wrapped native skin ids are
     * equal.
     *
     * @param otherSkin Skin to check equality with.
     * @returns Whether this skin equals the given skin.
     *
     * @since 1.0.0
     */
    equals(otherSkin) {
      if (!otherSkin)
        return false;
      return this._index === otherSkin._index;
    }
  };
  var XR2 = class {
    /** Wonderland WASM bridge. @hidden */
    #wasm;
    #mode;
    constructor(wasm, mode) {
      this.#wasm = wasm;
      this.#mode = mode;
    }
    /** Current WebXR session mode */
    get sessionMode() {
      return this.#mode;
    }
    /** Current WebXR session */
    get session() {
      return this.#wasm.webxr_session;
    }
    /** Current WebXR frame */
    get frame() {
      return this.#wasm.webxr_frame;
    }
    referenceSpaceForType(type) {
      return this.#wasm.webxr_refSpaces[type] ?? null;
    }
    /** Set current reference space type used for retrieving eye, head, hand and joint poses */
    set currentReferenceSpace(refSpace) {
      this.#wasm.webxr_refSpace = refSpace;
      this.#wasm.webxr_refSpaceType = null;
      for (const type of Object.keys(this.#wasm.webxr_refSpaces)) {
        if (this.#wasm.webxr_refSpaces[type] === refSpace) {
          this.#wasm.webxr_refSpaceType = type;
        }
      }
    }
    /** Current reference space type used for retrieving eye, head, hand and joint poses */
    get currentReferenceSpace() {
      return this.#wasm.webxr_refSpace;
    }
    /** Current WebXR reference space type or `null` if not a default reference space */
    get currentReferenceSpaceType() {
      return this.#wasm.webxr_refSpaceType;
    }
    /** Current WebXR base layer  */
    get baseLayer() {
      return this.#wasm.webxr_baseLayer;
    }
    /** Current WebXR framebuffer */
    get framebuffers() {
      if (!Array.isArray(this.#wasm.webxr_fbo)) {
        return [this.#wasm.GL.framebuffers[this.#wasm.webxr_fbo]];
      }
      return this.#wasm.webxr_fbo.map((id) => this.#wasm.GL.framebuffers[id]);
    }
  };

  // ../../wle/wonderland-spatial-audio/node_modules/@wonderlandengine/api/dist/wasm.js
  var _componentDefaults2 = /* @__PURE__ */ new Map([
    [Type2.Bool, false],
    [Type2.Int, 0],
    [Type2.Float, 0],
    [Type2.String, ""],
    [Type2.Enum, void 0],
    [Type2.Object, null],
    [Type2.Mesh, null],
    [Type2.Texture, null],
    [Type2.Material, null],
    [Type2.Animation, null],
    [Type2.Skin, null],
    [Type2.Color, [0, 0, 0, 1]]
  ]);
  function _setupDefaults(ctor) {
    for (const name in ctor.Properties) {
      const p = ctor.Properties[name];
      if (p.type === Type2.Enum) {
        if (p.values?.length) {
          if (typeof p.default !== "number") {
            p.default = p.values.indexOf(p.default);
          }
          if (p.default < 0 || p.default >= p.values.length) {
            p.default = 0;
          }
        } else {
          p.default = void 0;
        }
      } else {
        p.default = p.default ?? _componentDefaults2.get(p.type);
      }
      ctor.prototype[name] = p.default;
    }
  }
  var WASM2 = class {
    /**
     * Emscripten worker field.
     *
     * @note This api is meant to be used internally.
     */
    worker = "";
    /**
     * Emscripten wasm field.
     *
     * @note This api is meant to be used internally.
     */
    wasm = null;
    /**
     * Emscripten canvas.
     *
     * @note This api is meant to be used internally.
     */
    canvas = null;
    /** Current WebXR  */
    /**
     * Emscripten WebXR session.
     *
     * @note This api is meant to be used internally.
     */
    webxr_session = null;
    /**
     * Emscripten WebXR request session callback.
     *
     * @note This api is meant to be used internally.
     */
    webxr_requestSession = null;
    /**
     * Emscripten WebXR frame.
     *
     * @note This api is meant to be used internally.
     */
    webxr_frame = null;
    /**
     * Emscripten current WebXR reference space.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpace = null;
    /**
     * Emscripten WebXR reference spaces.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpaces = null;
    /**
     * Emscripten WebXR current reference space type.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpaceType = null;
    /**
     * Emscripten WebXR GL projection layer.
     *
     * @note This api is meant to be used internally.
     */
    webxr_baseLayer = null;
    /**
     * Emscripten WebXR framebuffer scale factor.
     *
     * @note This api is meant to be used internally.
     */
    webxr_framebufferScaleFactor = 1;
    /**
     * Emscripten WebXR framebuffer(s).
     *
     * @note This api is meant to be used internally.
     */
    /* webxr_fbo will not get overwritten if we are rendering to the
     * default framebuffer, e.g., when using WebXR emulator. */
    webxr_fbo = 0;
    /**
     * Convert a WASM memory view to a JavaScript string.
     *
     * @param ptr Pointer start
     * @param ptrEnd Pointer end
     * @returns JavaScript string
     */
    UTF8ViewToString;
    /** If `true`, logs will not spam the console on error. */
    _deactivate_component_on_error = false;
    /** Temporary memory pointer. */
    _tempMem = null;
    /** Temporary memory size. */
    _tempMemSize = 0;
    /** Temporary float memory view. */
    _tempMemFloat = null;
    /** Temporary int memory view. */
    _tempMemInt = null;
    /** Temporary uint8 memory view. */
    _tempMemUint8 = null;
    /** Temporary uint32 memory view. */
    _tempMemUint32 = null;
    /** Temporary uint16 memory view. */
    _tempMemUint16 = null;
    /** Loading screen .bin file data */
    _loadingScreen = null;
    /** List of callbacks triggered when the scene is loaded. */
    _sceneLoadedCallback = [];
    /**
     * Material definition cache. Each pipeline has its own
     * associated material definition.
     */
    _materialDefinitions = [];
    /** Image cache. */
    _images = [];
    /** Component instances. */
    _components = [];
    /** Component Type info. */
    _componentTypes = [];
    /** Index per component type name. */
    _componentTypeIndices = {};
    /** Wonderland engine instance. */
    _engine = null;
    /**
     * `true` if this runtime is using physx.
     *
     * @note This api is meant to be used internally.
     */
    _withPhysX = false;
    /** Decoder for UTF8 `ArrayBuffer` to JavaScript string. */
    _utf8Decoder = new TextDecoder("utf8");
    /** JavaScript manager index. */
    _jsManagerIndexCached = null;
    /**
     * Registration index of {@link BrokenComponent}.
     *
     * This is used to return dummy instances when a component
     * isn't registered.
     *
     * @hidden
     */
    _brokenComponentIndex = 0;
    /**
     * Create a new instance of the WebAssembly <> API bridge.
     *
     * @param threads `true` if the runtime used has threads support
     */
    constructor(threads3) {
      if (threads3) {
        this.UTF8ViewToString = (s, e) => {
          if (!s)
            return "";
          return this._utf8Decoder.decode(this.HEAPU8.slice(s, e));
        };
        return;
      }
      this.UTF8ViewToString = (s, e) => {
        if (!s)
          return "";
        return this._utf8Decoder.decode(this.HEAPU8.subarray(s, e));
      };
      this._brokenComponentIndex = this._registerComponent(BrokenComponent2);
    }
    /**
     * Reset the cache of the library.
     *
     * @note Should only be called when tearing down the runtime.
     */
    reset() {
      this.allocateTempMemory(1024);
      this._materialDefinitions = [];
      this._images = [];
      this._components = [];
      this._componentTypes = [];
      this._componentTypeIndices = {};
      this._jsManagerIndexCached = null;
      this._brokenComponentIndex = this._registerComponent(BrokenComponent2);
    }
    /**
     * Checks whether the given component is registered or not.
     *
     * @param ctor  A string representing the component typename (e.g., `'cursor-component'`).
     * @returns `true` if the component is registered, `false` otherwise.
     */
    isRegistered(type) {
      return type in this._componentTypeIndices;
    }
    /**
     * Register a legacy component in this Emscripten instance.
     *
     * @note This api is meant to be used internally.
     *
     * @param typeName The name of the component.
     * @param params An object containing the parameters (properties).
     * @param object The object's prototype.
     * @returns The registration index
     */
    _registerComponentLegacy(typeName, params, object) {
      const ctor = class CustomComponent extends Component2 {
      };
      ctor.TypeName = typeName;
      ctor.Properties = params;
      Object.assign(ctor.prototype, object);
      return this._registerComponent(ctor);
    }
    /**
     * Register a class component in this Emscripten instance.
     *
     * @note This api is meant to be used internally.
     *
     * @param ctor The class to register.
     * @returns The registration index.
     */
    _registerComponent(ctor) {
      if (!ctor.TypeName)
        throw new Error("no name provided for component.");
      if (!ctor.prototype._triggerInit) {
        throw new Error(`registerComponent(): Component ${ctor.TypeName} must extend Component`);
      }
      inheritProperties2(ctor);
      _setupDefaults(ctor);
      const typeIndex = ctor.TypeName in this._componentTypeIndices ? this._componentTypeIndices[ctor.TypeName] : this._componentTypes.length;
      this._componentTypes[typeIndex] = ctor;
      this._componentTypeIndices[ctor.TypeName] = typeIndex;
      if (ctor === BrokenComponent2)
        return typeIndex;
      console.log("Registered component", ctor.TypeName, `(class ${ctor.name})`, "with index", typeIndex);
      if (ctor.onRegister)
        ctor.onRegister(this._engine);
      return typeIndex;
    }
    /**
     * Allocate the requested amount of temporary memory
     * in this WASM instance.
     *
     * @param size The number of bytes to allocate
     */
    allocateTempMemory(size) {
      console.log("Allocating temp mem:", size);
      this._tempMemSize = size;
      if (this._tempMem)
        this._free(this._tempMem);
      this._tempMem = this._malloc(this._tempMemSize);
      this.updateTempMemory();
    }
    /**
     * @todo: Delete this and only keep `allocateTempMemory`
     *
     * @param size Number of bytes to allocate
     */
    requireTempMem(size) {
      if (this._tempMemSize >= size)
        return;
      this.allocateTempMemory(Math.ceil(size / 1024) * 1024);
    }
    /**
     * Update the temporary memory views. This must be called whenever the
     * temporary memory address changes.
     *
     * @note This api is meant to be used internally.
     */
    updateTempMemory() {
      this._tempMemFloat = new Float32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemInt = new Int32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemUint32 = new Uint32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemUint16 = new Uint16Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 1);
      this._tempMemUint8 = new Uint8Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize);
    }
    /**
     * Returns a uint8 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required
     * @returns A {@link TypedArray} over the WASM memory
     */
    getTempBufferU8(count) {
      this.requireTempMem(count);
      return this._tempMemUint8;
    }
    /**
     * Returns a uint16 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required
     * @returns A {@link TypedArray} over the WASM memory
     */
    getTempBufferU16(count) {
      this.requireTempMem(count * 2);
      return this._tempMemUint16;
    }
    /**
     * Returns a uint32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferU32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemUint32;
    }
    /**
     * Returns a int32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferI32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemInt;
    }
    /**
     * Returns a float32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferF32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemFloat;
    }
    /**
     * Copy the string into temporary WASM memory and retrieve the pointer.
     *
     * @note This method will compute the strlen and append a `\0`.
     *
     * @note The result should be used **directly** otherwise it might get
     * overridden by any next call modifying the temporary memory.
     *
     * @param str The string to write to temporary memory
     * @param byteOffset The starting byte offset in the temporary memory at which
     *     the string should be written. This is useful when using multiple temporaries.
     * @return The temporary pointer onto the WASM memory
     */
    tempUTF8(str5, byteOffset = 0) {
      const strLen = this.lengthBytesUTF8(str5) + 1;
      this.requireTempMem(strLen + byteOffset);
      const ptr = this._tempMem + byteOffset;
      this.stringToUTF8(str5, ptr, strLen);
      return ptr;
    }
    /**
     * Return the index of the component type.
     *
     * @note This method uses malloc and copies the string
     * to avoid overwriting caller's temporary data.
     *
     * @param type The type
     * @return The component type index
     */
    _typeIndexFor(type) {
      const lengthBytes = this.lengthBytesUTF8(type) + 1;
      const mem = this._malloc(lengthBytes);
      this.stringToUTF8(type, mem, lengthBytes);
      const componentType = this._wl_get_component_manager_index(mem);
      this._free(mem);
      return componentType;
    }
    /**
     * Return the name of component type stored at the given index.
     *
     * @param typeIndex The type index
     * @return The name as a string
     */
    _typeNameFor(typeIndex) {
      return this.UTF8ToString(this._wl_component_manager_name(typeIndex));
    }
    /**
     * Returns `true` if the runtime supports physx or not.
     */
    get withPhysX() {
      return this._withPhysX;
    }
    /** JavaScript manager index. */
    get _jsManagerIndex() {
      if (this._jsManagerIndexCached === null) {
        this._jsManagerIndexCached = this._typeIndexFor("js");
      }
      return this._jsManagerIndexCached;
    }
    /**
     * Set the engine instance holding this bridge.
     *
     * @note This api is meant to be used internally.
     *
     * @param engine The engine instance.
     */
    _setEngine(engine) {
      this._engine = engine;
    }
    /* WebAssembly to JS call bridge. */
    _wljs_xr_session_start(mode) {
      if (this._engine.xr === null) {
        this._engine.xr = new XR2(this, mode);
        this._engine.onXRSessionStart.notify(this.webxr_session, mode);
      }
    }
    _wljs_xr_session_end() {
      const startEmitter = this._engine.onXRSessionStart;
      if (startEmitter instanceof RetainEmitter2)
        startEmitter.reset();
      this._engine.onXRSessionEnd.notify();
      this._engine.xr = null;
    }
    _wljs_xr_disable() {
      this._engine.arSupported = false;
      this._engine.vrSupported = false;
    }
    _wljs_allocate(numComponents) {
      this._components = new Array(numComponents);
    }
    _wljs_init(withPhysX) {
      this._withPhysX = withPhysX;
      this.allocateTempMemory(1024);
    }
    _wljs_reallocate(numComponents) {
      if (numComponents > this._components.length) {
        this._components.length = numComponents;
      }
    }
    _wljs_scene_add_material_definition(definitionId) {
      const definition = /* @__PURE__ */ new Map();
      const nbParams = this._wl_material_definition_get_count(definitionId);
      for (let i = 0; i < nbParams; ++i) {
        const name = this.UTF8ToString(this._wl_material_definition_get_param_name(definitionId, i));
        const t = this._wl_material_definition_get_param_type(definitionId, i);
        definition.set(name, {
          index: i,
          type: {
            type: t & 255,
            componentCount: t >> 8 & 255,
            metaType: t >> 16 & 255
          }
        });
      }
      this._materialDefinitions[definitionId] = definition;
    }
    _wljs_set_component_param_bool(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v !== 0;
    }
    _wljs_set_component_param_int(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v;
    }
    _wljs_set_component_param_float(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v;
    }
    _wljs_set_component_param_string(c, p, pe, v, ve) {
      const param = this.UTF8ViewToString(p, pe);
      const value = this.UTF8ViewToString(v, ve);
      this._components[c][param] = value;
    }
    _wljs_set_component_param_color(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = new Float32Array([0, 8, 16, 24].map((s) => (v >>> s & 255) / 255));
    }
    _wljs_set_component_param_object(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? this._engine.wrapObject(v) : null;
    }
    _wljs_set_component_param_mesh(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? new Mesh2(this._engine, v) : null;
    }
    _wljs_set_component_param_texture(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? this._engine.textures.wrap(v) : null;
    }
    _wljs_set_component_param_material(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? new Material2(this._engine, v) : null;
    }
    _wljs_set_component_param_animation(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? new Animation2(this._engine, v) : null;
    }
    _wljs_set_component_param_skin(c, p, pe, v) {
      const param = this.UTF8ViewToString(p, pe);
      this._components[c][param] = v > 0 ? new Skin2(this._engine, v) : null;
    }
    _wljs_get_component_type_index(namePtr, nameEndPtr) {
      const typename = this.UTF8ViewToString(namePtr, nameEndPtr);
      const index = this._componentTypeIndices[typename];
      if (index === void 0) {
        return this._brokenComponentIndex;
      }
      return index;
    }
    _wljs_component_create(jsManagerIndex, index, id, type, object) {
      const ctor = this._componentTypes[type];
      if (!ctor) {
        throw new Error(`Type index ${type} isn't registered`);
      }
      let component = null;
      try {
        component = new ctor();
      } catch (e) {
        console.error(`Exception during instantiation of component ${ctor.TypeName}`);
        component = new BrokenComponent2(this._engine);
      }
      component._engine = this._engine;
      component._manager = jsManagerIndex;
      component._id = id;
      component._object = this._engine.wrapObject(object);
      try {
        component.resetProperties();
      } catch (e) {
        console.error(`Exception during ${component.type} resetProperties() on object ${component.object.name}`);
      }
      this._components[index] = component;
      return component;
    }
    _wljs_component_init(component) {
      const c = this._components[component];
      c._triggerInit();
    }
    _wljs_component_update(component, dt) {
      const c = this._components[component];
      c._triggerUpdate(dt);
    }
    _wljs_component_onActivate(component) {
      const c = this._components[component];
      if (c)
        c._triggerOnActivate();
    }
    _wljs_component_onDeactivate(component) {
      const c = this._components[component];
      c._triggerOnDeactivate();
    }
    _wljs_component_onDestroy(component) {
      const c = this._components[component];
      c._triggerOnDestroy();
    }
    _wljs_swap(a, b) {
      const componentA = this._components[a];
      this._components[a] = this._components[b];
      this._components[b] = componentA;
    }
    _wljs_copy(src, dst) {
      const destComp = this._components[dst];
      try {
        destComp.copy(this._components[src]);
      } catch (e) {
        console.error(`Exception during ${destComp.type} copy() on object ${destComp.object.name}`);
      }
    }
  };
  function throwInvalidRuntime(version) {
    return function() {
      throw new Error(`Feature added in version ${version}.
	\u2192 Please use a Wonderland Engine editor version >= ${version}`);
    };
  }
  var requireRuntime1_1_1 = throwInvalidRuntime("1.1.1");
  WASM2.prototype._wl_physx_component_get_offsetTranslation = requireRuntime1_1_1;
  WASM2.prototype._wl_physx_component_set_offsetTranslation = requireRuntime1_1_1;
  WASM2.prototype._wl_physx_component_get_offsetTransform = requireRuntime1_1_1;
  WASM2.prototype._wl_physx_component_set_offsetRotation = requireRuntime1_1_1;
  WASM2.prototype._wl_object_clone = requireRuntime1_1_1;

  // ../../wle/wonderland-spatial-audio/dist/audio-listener.js
  var SAMPLE_RATE = 48e3;
  var FADE_DURATION = 5 / 1e3;
  var tempVec5 = new Float32Array(3);
  var tempVec22 = new Float32Array(3);
  var _audioContext = null;
  if (window.AudioContext !== void 0) {
    _audioContext = new AudioContext({
      latencyHint: "interactive",
      sampleRate: SAMPLE_RATE
    });
  }
  async function _unlockAudioContext() {
    return new Promise((resolve) => {
      const unlockHandler = () => {
        _audioContext.resume().then(() => {
          window.removeEventListener("click", unlockHandler);
          window.removeEventListener("touch", unlockHandler);
          window.removeEventListener("keydown", unlockHandler);
          window.removeEventListener("mousedown", unlockHandler);
          resolve();
        });
      };
      window.addEventListener("click", unlockHandler);
      window.addEventListener("touch", unlockHandler);
      window.addEventListener("keydown", unlockHandler);
      window.addEventListener("mousedown", unlockHandler);
    });
  }
  var AudioListener = class extends Component2 {
    /**
     * The WebAudio listener instance associated with this component.
     */
    listener = _audioContext.listener;
    /**
     * The time in which the last position update will be done.
     */
    time = 0;
    start() {
      if ("positionX" in this.listener) {
        this.update = this._updateRecommended.bind(this);
      } else {
        this.update = this._updateDeprecated.bind(this);
      }
    }
    _updateDeprecated() {
      this.object.getPositionWorld(tempVec5);
      this.listener.setPosition(tempVec5[0], tempVec5[2], -tempVec5[1]);
      this.object.getForwardWorld(tempVec5);
      this.object.getUpWorld(tempVec22);
      this.listener.setOrientation(tempVec5[0], tempVec5[2], -tempVec5[1], tempVec22[0], tempVec22[2], -tempVec22[1]);
    }
    _updateRecommended() {
      this.time = _audioContext.currentTime + FADE_DURATION;
      this.object.getPositionWorld(tempVec5);
      this.listener.positionX.linearRampToValueAtTime(tempVec5[0], this.time);
      this.listener.positionY.linearRampToValueAtTime(tempVec5[2], this.time);
      this.listener.positionZ.linearRampToValueAtTime(-tempVec5[1], this.time);
      this.object.getForwardWorld(tempVec5);
      this.listener.forwardX.linearRampToValueAtTime(tempVec5[0], this.time);
      this.listener.forwardY.linearRampToValueAtTime(tempVec5[2], this.time);
      this.listener.forwardZ.linearRampToValueAtTime(-tempVec5[1], this.time);
      this.object.getUpWorld(tempVec5);
      this.listener.upX.linearRampToValueAtTime(tempVec5[0], this.time);
      this.listener.upY.linearRampToValueAtTime(tempVec5[2], this.time);
      this.listener.upZ.linearRampToValueAtTime(-tempVec5[1], this.time);
    }
  };
  __publicField(AudioListener, "TypeName", "audio-listener");
  __publicField(AudioListener, "Properties", {});

  // ../../wle/wonderland-spatial-audio/dist/audio-players.js
  var MIN_RAMP_TIME = 5 / 1e3;
  var MIN_VOLUME = 1e-3;
  var DEF_VOL = 1;
  var DEFAULT_PANNER_CONFIG = {
    coneInnerAngle: 360,
    coneOuterAngle: 0,
    coneOuterGain: 0,
    distanceModel: "exponential",
    maxDistance: 1e4,
    refDistance: 1,
    rolloffFactor: 1,
    panningModel: "HRTF",
    positionX: 0,
    positionY: 0,
    positionZ: 1,
    orientationX: 0,
    orientationY: 0,
    orientationZ: 1
  };
  var PlayableNode = class {
    _gainNode = new GainNode(_audioContext);
    _pannerNode = new PannerNode(_audioContext, DEFAULT_PANNER_CONFIG);
    _audioNode = new AudioBufferSourceNode(_audioContext);
    _pannerOptions = DEFAULT_PANNER_CONFIG;
    _isPlaying = false;
    constructor() {
    }
    _reset() {
      this._isPlaying = false;
      this._audioNode.onended = null;
      this._audioNode.stop();
      this._audioNode.disconnect();
      this._pannerNode.disconnect();
      this._audioNode = new AudioBufferSourceNode(_audioContext);
    }
  };
  var BufferPlayer = class extends PlayableNode {
    bufferId = -1;
    priority = false;
    _audioManager;
    /**
     * Constructs a BufferPlayer.
     *
     * @warning This is for internal use only. BufferPlayer's should only be created and used inside the AudioManager.
     * @param audioManager Manager that manages this player.
     */
    constructor(audioManager) {
      super();
      this._audioManager = audioManager;
    }
    play(audioBuffers, id, config2) {
      if (this._isPlaying) {
        this.stop();
      }
      this.bufferId = id;
      switch (config2?.channel) {
        case AudioChannel.MUSIC:
          this._gainNode.connect(this._audioManager["_musicGain"]);
          break;
        case AudioChannel.MASTER:
          this._gainNode.connect(this._audioManager["_masterGain"]);
          break;
        default:
          this._gainNode.connect(this._audioManager["_sfxGain"]);
      }
      this._gainNode.gain.value = config2?.volume || DEF_VOL;
      const randomIndex = Math.floor(Math.random() * audioBuffers.length);
      this._audioNode.buffer = audioBuffers[randomIndex];
      this._audioNode.loop = config2?.loop || false;
      if (config2?.position) {
        const position = config2.position;
        this._pannerOptions.positionX = position[0];
        this._pannerOptions.positionY = position[2];
        this._pannerOptions.positionZ = -position[1];
        this._pannerNode = new PannerNode(_audioContext, this._pannerOptions);
        this._audioNode.connect(this._pannerNode).connect(this._gainNode);
      } else {
        this._audioNode.connect(this._gainNode);
      }
      this._audioNode.start();
      this._audioNode.onended = () => this.stopAndFree();
      this._isPlaying = true;
    }
    /**
     * Same as stop() but additionally calls free on the audio manager, so that it is available again.
     */
    stopAndFree() {
      this.stop();
      this._audioManager._freeUpBusyPlayer(this.bufferId);
    }
    /**
     * Stops current playback and sends notification on the audio managers emitter.
     */
    stop() {
      if (!this._isPlaying)
        return;
      this._reset();
      this._gainNode.disconnect();
      this._audioManager.emitter.notify({ id: this.bufferId, state: PlayState.STOPPED });
    }
  };
  var OneShotPlayer = class extends PlayableNode {
    _audioManager;
    /**
     * Constructs a OneShotPlayer.
     *
     * @warning This is for internal use only. OneShotPlayers's should only be created and used inside the AudioManager.
     * @param audioManager Manager that manages this player.
     */
    constructor(audioManager) {
      super();
      this._audioManager = audioManager;
      this._gainNode.connect(this._audioManager["_sfxGain"]);
    }
    async play(audioBuffer, vol, position) {
      if (this._isPlaying) {
        this.stop();
      }
      this._gainNode.gain.value = Math.max(MIN_VOLUME, vol);
      this._audioNode.buffer = audioBuffer;
      if (!position) {
        this._audioNode.connect(this._gainNode);
      } else {
        this._pannerOptions.positionX = position[0];
        this._pannerOptions.positionY = position[2];
        this._pannerOptions.positionZ = -position[1];
        this._pannerNode = new PannerNode(_audioContext, this._pannerOptions);
        this._audioNode.connect(this._pannerNode).connect(this._gainNode);
      }
      this._audioNode.onended = () => this.stop();
      this._audioNode.start();
      this._isPlaying = true;
    }
    stop() {
      if (!this._isPlaying)
        return;
      this._reset();
    }
  };

  // ../../wle/wonderland-spatial-audio/dist/audio-manager.js
  var AudioChannel;
  (function(AudioChannel2) {
    AudioChannel2[AudioChannel2["SFX"] = 0] = "SFX";
    AudioChannel2[AudioChannel2["MUSIC"] = 1] = "MUSIC";
    AudioChannel2[AudioChannel2["MASTER"] = 2] = "MASTER";
  })(AudioChannel || (AudioChannel = {}));
  var PlayState;
  (function(PlayState2) {
    PlayState2[PlayState2["READY"] = 0] = "READY";
    PlayState2[PlayState2["PLAYING"] = 1] = "PLAYING";
    PlayState2[PlayState2["STOPPED"] = 2] = "STOPPED";
  })(PlayState || (PlayState = {}));
  var DEF_ONESHT_PLR_COUNT = 16;
  var DEF_PLR_COUNT = 16;
  var SHIFT_AMOUNT = 16;
  var MAX_NUMBER_OF_INSTANCES = (1 << SHIFT_AMOUNT) - 1;
  var AudioManager = class {
    /** The emitter will notify all listeners about the PlayState of a unique ID.
     *
     * @note
     * - READY will be emitted if all sources of a given source ID have loaded.
     * - PLAYING / STOPPED are only emitted for play IDs that are returned by the play() method.
     * - If you want to check the status for a source ID, convert the play ID of the message using the
     *   getSourceIdFromPlayId() method.
     * - OneShots won't give status updates.
     *
     * @see getSourceIdFromPlayId
     * @example
     * ```js
     * const music = audioManager.play(Sounds.Music);
     * audioManager.emitter.add((msg) => {
     *    if (msg.id === music) {
     *          console.log(msg.state);
     *    }
     * });
     * ```
     */
    emitter = new Emitter2();
    /* Cache for decoded audio buffers */
    _bufferCache = [];
    /* Simple, fast cache for one-shot nodes */
    _oneShotCache;
    _oneShotIndex = 0;
    /* Cache for regular nodes */
    _freePlayers = [];
    _busyPlayers = /* @__PURE__ */ new Map();
    /* Counts how many times a sourceId has played. Resets to 0 after {@link MAX_NUMBER_OF_INSTANCES }. */
    _instanceCounter = [];
    _masterGain = new GainNode(_audioContext);
    _musicGain = new GainNode(_audioContext);
    _sfxGain = new GainNode(_audioContext);
    /**
     * Constructs a AudioManager.
     *
     * Uses the default amount of one-shot and regular players.
     * @see DEF_ONESHT_PLR_COUNT
     * @see DEF_PLR_COUNT
     * @example
     * ```js
     * // AudioManager can't be constructed in a non-browser environment!
     * export const am = window.AudioContext ? new AudioManager() : null!;
     * ```
     */
    constructor() {
      this._sfxGain.connect(this._masterGain);
      this._musicGain.connect(this._masterGain);
      this._masterGain.connect(_audioContext.destination);
      this._oneShotCache = this._initOneShotCache(DEF_ONESHT_PLR_COUNT);
      for (let i = 0; i < DEF_PLR_COUNT; i++) {
        this._freePlayers[i] = new BufferPlayer(this);
      }
    }
    _initOneShotCache(size) {
      const cache = [];
      for (let i = 0; i < size; i++) {
        cache[i] = new OneShotPlayer(this);
      }
      return cache;
    }
    /**
     * Decodes and stores the given audio files and associates them with the given ID.
     *
     * @param path Path to the audio files. Can either be a single string or a list of strings.
     * @param id Identifier for the given audio files.
     *
     * @note Is there more than one-audio file available per id, on playback, they will be selected at random.
     * This enables easy variation of the same sounds!
     *
     * @throws If negative ID was provided.
     *
     * @returns A Promise that resolves when all files are successfully loaded.
     */
    async load(path, id) {
      if (id < 0) {
        throw "audio-manager: Negative IDs are not valid! Skipping ${path}";
      }
      const paths = Array.isArray(path) ? path : [path];
      if (!this._bufferCache[id]) {
        this._bufferCache[id] = [];
      }
      for (let i = 0; i < paths.length; i++) {
        const response = await fetch(paths[i]);
        const arrayBuffer = await response.arrayBuffer();
        const audioBuffer = await _audioContext.decodeAudioData(arrayBuffer);
        this._bufferCache[id].push(audioBuffer);
      }
      this._instanceCounter[id] = 0;
      this.emitter.notify({ id, state: PlayState.READY });
    }
    /**
     * Analogous to load(), but lets you easily load a bunch of files without needing to call the manager everytime.
     *
     * @see load
     *
     * @note Logs an error message to the console if one pair failed to load.
     *
     * @param pair Pair of source files and associating identifier.
     * Multiple pairs can be provided as separate arguments.
     *
     * @returns A Promise that resolves when all files are successfully loaded.
     */
    async loadBatch(...pair) {
      for (const p of pair) {
        try {
          await this.load(p[0], p[1]);
        } catch (e) {
          console.error(e);
        }
      }
    }
    /**
     * Plays the audio file associated with the given ID.
     *
     * @param id ID of the file that should be played.
     * @param config Optional parameter that will configure how the audio is played. Is no configuration provided,
     * the audio will play at volume 1.0, without panning and on the SFX channel, priority set to false.
     *
     * @note If the 'priority' parameter is set to true, the audio playback will not be interrupted
     * to allocate a player in case all players are currently occupied. If 'priority' is set to false (default),
     * playback may be interrupted to allocate a player for a new 'play()' call.
     *
     * @throws If the given ID does not have a buffer associated with it or there are no available players.
     *
     * @returns A Promise that resolves with a playId when the audio has started playing.
     */
    async play(id, config2) {
      const buffer = this._bufferCache[id];
      if (!buffer) {
        throw `audio-manager: No audio source is associated with identifier: ${id} !`;
      }
      const player = this._freePlayers.pop() || this._freePlayerWithLowPriority();
      if (!player) {
        throw `audio-manager: All players are busy and no low priority player could be found to free up!`;
      }
      const instanceCount = this._instanceCounter[id];
      const unique_id = (id << SHIFT_AMOUNT) + instanceCount;
      this._instanceCounter[id] = (instanceCount + 1) % MAX_NUMBER_OF_INSTANCES;
      this._busyPlayers.set(unique_id, player);
      if (_audioContext.state === "suspended") {
        await _unlockAudioContext();
      }
      player.priority = config2?.priority || false;
      player.play(buffer, unique_id, config2);
      this.emitter.notify({ id: unique_id, state: PlayState.PLAYING });
      return unique_id;
    }
    _freePlayerWithLowPriority() {
      for (const player of this._busyPlayers.values()) {
        if (player.priority)
          continue;
        player.stopAndFree();
        return this._freePlayers.pop();
      }
    }
    /**
     * Plays the audio file associated with the given ID until it naturally ends.
     *
     * @note
     * - IDs can be triggered as often as there are one-shot players in the AudioManager.
     * - One shots work with First-In-First-Out principle. If all players are occupied, the manager will stop the
     *   one that started playing first, to free up a player for the new ID.
     * - One-shots are always connect to the SFX channel.
     * - One-shots cant loop.
     * - One-shots can only be stopped all at once with stopOneShots().
     * - One-shots can't be assigned a priority.
     *
     * @param id ID of the file that should be played.
     * @param config  Optional parameter that will configure how the audio is played. Note that only the position
     * and volume settings will affect the playback.
     * @throws If the given ID does not have a buffer associated with it.
     *
     * @returns A Promise that resolves when the audio has started playing.
     */
    async playOneShot(id, config2) {
      const buffers = this._bufferCache[id];
      if (!buffers) {
        throw `audio-manager: No audio source is associated with identifier: ${id} !`;
      }
      const audioBuffer = buffers[Math.floor(Math.random() * buffers.length)];
      const player = this._oneShotCache[this._oneShotIndex];
      await player.play(audioBuffer, config2?.volume || DEF_VOL, config2?.position);
      this._oneShotIndex = (this._oneShotIndex + 1) % DEF_ONESHT_PLR_COUNT;
    }
    /**
     * Stops the audio associated with the given ID.
     *
     * @warning This does not work for one-shots!
     *
     * @param sourceId Identifier of the audio source that should be stopped.
     * @param playId Optional parameter that specifies the exact audio that should be stopped.
     * If not provided, all audio of the given sourceId will be stopped.
     *
     * @note Obtain the playId from the play() method.
     * @see play
     */
    stop(sourceId, playId) {
      if (playId) {
        this._busyPlayers.get(playId)?.stopAndFree();
        return;
      }
      this._busyPlayers.forEach((player) => {
        if (player.bufferId >> SHIFT_AMOUNT === sourceId) {
          player.stopAndFree();
        }
      });
    }
    /**
     * Stops playback of all one-shot players.
     */
    stopOneShots() {
      for (const node of this._oneShotCache) {
        node.stop();
      }
    }
    /**
     * Stops all audio.
     */
    stopAll() {
      this.stopOneShots();
      this._busyPlayers.forEach((value) => {
        value.stopAndFree();
      });
    }
    /**
     * Sets the volume of the given audio channel.
     *
     * @param channel Specifies the audio channel type that should be modified.
     * @param volume Volume that the channel should be set to.
     * @param time Optional time parameter that specifies the time it takes for the channel to reach the specified
     * volume in seconds (Default is 0).
     */
    setGlobalVolume(channel, volume, time = 0) {
      volume = Math.max(MIN_VOLUME, volume);
      time = _audioContext.currentTime + Math.max(MIN_RAMP_TIME, time);
      switch (channel) {
        case AudioChannel.MUSIC:
          this._musicGain.gain.linearRampToValueAtTime(volume, time);
          break;
        case AudioChannel.SFX:
          this._sfxGain.gain.linearRampToValueAtTime(volume, time);
          break;
        case AudioChannel.MASTER:
          this._masterGain.gain.linearRampToValueAtTime(volume, time);
          break;
        default:
          return;
      }
    }
    /**
     * Removes all decoded audio from the manager that is associated with the given ID.
     *
     * @warning This will stop playback of the given ID.
     * @param id Identifier of the audio that should be removed.
     */
    remove(id) {
      if (id < 0)
        return;
      this.stop(id);
      this._bufferCache[id] = void 0;
      this._instanceCounter[id] = 0;
    }
    /**
     * Removes all decoded audio from the manager, effectively resetting it.
     *
     * @warning This will stop playback entirely.
     */
    removeAll() {
      this.stopAll();
      this._bufferCache.length = 0;
      this._instanceCounter.length = 0;
    }
    /**
     * Gets the sourceId of a playId.
     *
     * @param playId of which to get the sourceId from.
     */
    getSourceIdFromPlayId(playId) {
      return playId >> SHIFT_AMOUNT;
    }
    /**
     * Frees a player that was currently playing the given ID.
     *
     * @warning This is for internal use only, use at your own risk!
     * @param playId Identifier of previously playing audio.
     */
    _freeUpBusyPlayer(playId) {
      const player = this._busyPlayers.get(playId);
      if (player) {
        this._busyPlayers.delete(playId);
        this._freePlayers.push(player);
      }
    }
    /**
     * Gets the current amount of free regular players in the audio manager.
     *
     * @note Use this to check how many resources your current project is using.
     */
    get amountOfFreePlayers() {
      return this._freePlayers.length;
    }
  };
  var globalAudioManager = window.AudioContext ? new AudioManager() : null;

  // ../../wle/wonderland-spatial-audio/dist/audio-source.js
  var __decorate20 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PanningType;
  (function(PanningType2) {
    PanningType2[PanningType2["NONE"] = 0] = "NONE";
    PanningType2[PanningType2["REGULAR"] = 1] = "REGULAR";
    PanningType2[PanningType2["HRTF"] = 2] = "HRTF";
  })(PanningType || (PanningType = {}));
  var posVec = new Float32Array(3);
  var oriVec = new Float32Array(3);
  var distanceModels = ["linear", "exponential", "inverse"];
  var bufferCache = /* @__PURE__ */ new Map();
  async function addBufferToCache(source) {
    if (bufferCache.has(source)) {
      const [audioBuffer2, referenceCount] = bufferCache.get(source);
      bufferCache.set(source, [audioBuffer2, referenceCount + 1]);
      return audioBuffer2;
    }
    const response = await fetch(source);
    const arrayBuffer = await response.arrayBuffer();
    const audioBuffer = await _audioContext.decodeAudioData(arrayBuffer);
    bufferCache.set(source, [audioBuffer, 1]);
    return audioBuffer;
  }
  function removeBufferFromCache(source) {
    if (!bufferCache.has(source)) {
      return;
    }
    const [, referenceCount] = bufferCache.get(source);
    if (referenceCount > 1) {
      const [audioBuffer, referenceCount2] = bufferCache.get(source);
      bufferCache.set(source, [audioBuffer, referenceCount2 - 1]);
    } else {
      bufferCache.delete(source);
    }
  }
  var AudioSource = class extends Component2 {
    static onRegister(engine) {
      engine.registerComponent(AudioListener);
    }
    /** Path to the audio file that should be played. */
    src;
    /**
     * Volume of the audio source.
     *
     * @note This will only take effect audio that has not started playing yet. Is the audio already playing, use
     * setVolumeDuringPlayback()
     * @see setVolumeDuringPlayback
     */
    volume;
    /** Whether to loop the sound. */
    loop;
    /** Whether to autoplay the sound. */
    autoplay;
    /** Select the panning method.
     *
     * @note When setting this in code, use numbers or boolean values!
     * - 0 / false, for no panning.
     * - 1 / true, for regular panning.
     * - 2 for HRTF spatial audio.
     * @warning Enabling HRTF (Head-Related Transfer Function) is computationally more intensive than regular panning!
     */
    spatial;
    /**
     * Set this property if the object will never move.
     * Disabling position updates each frame saves CPU time.
     */
    isStationary;
    /** The distance model used for spatial audio. */
    distanceModel;
    /** The maximum distance for audio falloff. */
    maxDistance;
    /** The reference distance for audio falloff. */
    refDistance;
    /** The rolloff factor for audio falloff. */
    rolloffFactor;
    /** The inner angle of the audio cone. */
    coneInnerAngle;
    /** The outer angle of the audio cone. */
    coneOuterAngle;
    /** The outer gain of the audio cone. */
    coneOuterGain;
    /**
     * The emitter will notify all subscribers when a state change occurs.
     * @see PlayState
     */
    emitter = new Emitter2();
    _pannerOptions = {};
    _buffer;
    _pannerNode = new PannerNode(_audioContext);
    _audioNode = new AudioBufferSourceNode(_audioContext);
    _isPlaying = false;
    _time = 0;
    _gainNode = new GainNode(_audioContext);
    /**
     * Initializes the audio src component.
     * If `autoplay` is enabled, the audio will start playing as soon as the file is loaded.
     *
     * @throws If no audio source path was provided.
     */
    async start() {
      if (this.src === "") {
        throw "audio-source: No audio source path provided!";
      }
      this._gainNode.connect(_audioContext.destination);
      this._buffer = await addBufferToCache(this.src);
      this.emitter.notify(PlayState.READY);
      if (this.autoplay) {
        this.play();
      }
    }
    setAudioChannel(am, channel) {
      this.stop();
      switch (channel) {
        case AudioChannel.MUSIC:
          this._gainNode.disconnect();
          this._gainNode.connect(am["_musicGain"]);
          break;
        case AudioChannel.SFX:
          this._gainNode.disconnect();
          this._gainNode.connect(am["_sfxGain"]);
          break;
        case AudioChannel.MASTER:
          this._gainNode.disconnect();
          this._gainNode.connect(am["_masterGain"]);
          break;
        default:
          return;
      }
    }
    /**
     * Plays the audio associated with this audio src.
     *
     * @note Is this audio-source currently playing, playback will be restarted.
     */
    async play() {
      if (this._isPlaying) {
        this.stop();
      } else if (_audioContext.state === "suspended") {
        await _unlockAudioContext();
      }
      this._gainNode.gain.value = this.volume;
      this._audioNode.buffer = this._buffer;
      this._audioNode.loop = this.loop;
      if (!this.spatial) {
        this._audioNode.connect(this._gainNode);
      } else {
        this._updateSettings();
        this._pannerNode = new PannerNode(_audioContext, this._pannerOptions);
        this._audioNode.connect(this._pannerNode).connect(this._gainNode);
      }
      this._audioNode.onended = () => this.stop();
      this._audioNode.start();
      this._isPlaying = true;
      if (!this.isStationary) {
        this.update = this._update.bind(this);
      }
      this.emitter.notify(PlayState.PLAYING);
    }
    /**
     * Stops the audio associated with this audio src.
     */
    stop() {
      if (!this._isPlaying)
        return;
      this._isPlaying = false;
      this._audioNode.onended = null;
      this._audioNode.stop();
      this.update = void 0;
      this._audioNode.disconnect();
      this._pannerNode.disconnect();
      this._audioNode = new AudioBufferSourceNode(_audioContext);
      this.emitter.notify(PlayState.STOPPED);
    }
    /**
     * Checks if the audio src is currently playing.
     */
    get isPlaying() {
      return this._isPlaying;
    }
    /**
     * Changes the volume during playback.
     * @param v Volume that source should have.
     * @param t Optional parameter that specifies the time it takes for the volume to reach its specified value in
     * seconds (Default is 0).
     */
    setVolumeDuringPlayback(v, t = 0) {
      const volume = Math.max(MIN_VOLUME, v);
      const time = _audioContext.currentTime + Math.max(MIN_RAMP_TIME, t);
      this._gainNode.gain.linearRampToValueAtTime(volume, time);
    }
    /**
     * Change out the source.
     *
     * @param path Path to the audio file.
     */
    async changeAudioSource(path) {
      this._buffer = await addBufferToCache(path);
      removeBufferFromCache(this.src);
      this.src = path;
    }
    /**
     * Called when the component is deactivated.
     * Stops the audio playback.
     */
    onDeactivate() {
      this.stop();
    }
    /**
     * Called when the component is destroyed.
     * Stops the audio playback and removes the src from cache.
     */
    onDestroy() {
      this.stop();
      this._gainNode.disconnect();
      removeBufferFromCache(this.src);
    }
    _update(dt) {
      this.object.getPositionWorld(posVec);
      this.object.getForwardWorld(oriVec);
      this._time = _audioContext.currentTime + dt;
      this._pannerNode.positionX.linearRampToValueAtTime(posVec[0], this._time);
      this._pannerNode.positionY.linearRampToValueAtTime(posVec[2], this._time);
      this._pannerNode.positionZ.linearRampToValueAtTime(-posVec[1], this._time);
      this._pannerNode.orientationX.linearRampToValueAtTime(oriVec[0], this._time);
      this._pannerNode.orientationY.linearRampToValueAtTime(oriVec[2], this._time);
      this._pannerNode.orientationZ.linearRampToValueAtTime(-oriVec[1], this._time);
    }
    _updateSettings() {
      this.object.getPositionWorld(posVec);
      this.object.getForwardWorld(oriVec);
      this._pannerOptions = {
        coneInnerAngle: this.coneInnerAngle,
        coneOuterAngle: this.coneOuterAngle,
        coneOuterGain: this.coneOuterGain,
        distanceModel: this._distanceModelSelector(),
        maxDistance: this.maxDistance,
        refDistance: this.refDistance,
        rolloffFactor: this.rolloffFactor,
        panningModel: this.spatial === 2 ? "HRTF" : "equalpower",
        positionX: posVec[0],
        positionY: posVec[2],
        positionZ: -posVec[1],
        orientationX: oriVec[0],
        orientationY: oriVec[2],
        orientationZ: -oriVec[1]
      };
    }
    _distanceModelSelector() {
      if (distanceModels.includes(this.distanceModel)) {
        return this.distanceModel;
      }
      return "exponential";
    }
  };
  /**
   * The type name for this component.
   */
  __publicField(AudioSource, "TypeName", "audio-source");
  __decorate20([
    property2.string()
  ], AudioSource.prototype, "src", void 0);
  __decorate20([
    property2.float(1)
  ], AudioSource.prototype, "volume", void 0);
  __decorate20([
    property2.bool(false)
  ], AudioSource.prototype, "loop", void 0);
  __decorate20([
    property2.bool(false)
  ], AudioSource.prototype, "autoplay", void 0);
  __decorate20([
    property2.enum(["none", "panning", "hrtf"], 1)
  ], AudioSource.prototype, "spatial", void 0);
  __decorate20([
    property2.bool(false)
  ], AudioSource.prototype, "isStationary", void 0);
  __decorate20([
    property2.enum(["linear", "inverse", "exponential"], "exponential")
  ], AudioSource.prototype, "distanceModel", void 0);
  __decorate20([
    property2.float(1e4)
  ], AudioSource.prototype, "maxDistance", void 0);
  __decorate20([
    property2.float(1)
  ], AudioSource.prototype, "refDistance", void 0);
  __decorate20([
    property2.float(1)
  ], AudioSource.prototype, "rolloffFactor", void 0);
  __decorate20([
    property2.float(360)
  ], AudioSource.prototype, "coneInnerAngle", void 0);
  __decorate20([
    property2.float(0)
  ], AudioSource.prototype, "coneOuterAngle", void 0);
  __decorate20([
    property2.float(0)
  ], AudioSource.prototype, "coneOuterGain", void 0);

  // node_modules/@zestymarket/wonderland-sdk/dist/zesty-wonderland-sdk.js
  var zesty_wonderland_sdk_exports = {};
  __export(zesty_wonderland_sdk_exports, {
    ZestyBanner: () => J
  });
  var Qt = Object.create;
  var X = Object.defineProperty;
  var Yt = Object.getOwnPropertyDescriptor;
  var Zt = Object.getOwnPropertyNames;
  var er = Object.getPrototypeOf;
  var tr = Object.prototype.hasOwnProperty;
  var rr = (t, e, r) => e in t ? X(t, e, { enumerable: true, configurable: true, writable: true, value: r }) : t[e] = r;
  var l = (t, e) => () => (e || t((e = { exports: {} }).exports, e), e.exports);
  var nr = (t, e, r, i) => {
    if (e && typeof e == "object" || typeof e == "function")
      for (let n of Zt(e))
        !tr.call(t, n) && n !== r && X(t, n, { get: () => e[n], enumerable: !(i = Yt(e, n)) || i.enumerable });
    return t;
  };
  var Ae = (t, e, r) => (r = t != null ? Qt(er(t)) : {}, nr(e || !t || !t.__esModule ? X(r, "default", { value: t, enumerable: true }) : r, t));
  var G = (t, e, r) => (rr(t, typeof e != "symbol" ? e + "" : e, r), r);
  var Q = l((yn, qe) => {
    "use strict";
    qe.exports = function(e, r) {
      return function() {
        for (var n = new Array(arguments.length), s = 0; s < n.length; s++)
          n[s] = arguments[s];
        return e.apply(r, n);
      };
    };
  });
  var f = l((wn, ke) => {
    "use strict";
    var ir = Q(), Z = Object.prototype.toString, ee = function(t) {
      return function(e) {
        var r = Z.call(e);
        return t[r] || (t[r] = r.slice(8, -1).toLowerCase());
      };
    }(/* @__PURE__ */ Object.create(null));
    function A(t) {
      return t = t.toLowerCase(), function(r) {
        return ee(r) === t;
      };
    }
    function te(t) {
      return Array.isArray(t);
    }
    function j(t) {
      return typeof t > "u";
    }
    function sr(t) {
      return t !== null && !j(t) && t.constructor !== null && !j(t.constructor) && typeof t.constructor.isBuffer == "function" && t.constructor.isBuffer(t);
    }
    var Te = A("ArrayBuffer");
    function ar(t) {
      var e;
      return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? e = ArrayBuffer.isView(t) : e = t && t.buffer && Te(t.buffer), e;
    }
    function or(t) {
      return typeof t == "string";
    }
    function ur(t) {
      return typeof t == "number";
    }
    function Se(t) {
      return t !== null && typeof t == "object";
    }
    function L(t) {
      if (ee(t) !== "object")
        return false;
      var e = Object.getPrototypeOf(t);
      return e === null || e === Object.prototype;
    }
    var cr = A("Date"), lr = A("File"), dr = A("Blob"), fr = A("FileList");
    function re(t) {
      return Z.call(t) === "[object Function]";
    }
    function hr(t) {
      return Se(t) && re(t.pipe);
    }
    function pr(t) {
      var e = "[object FormData]";
      return t && (typeof FormData == "function" && t instanceof FormData || Z.call(t) === e || re(t.toString) && t.toString() === e);
    }
    var mr = A("URLSearchParams");
    function yr(t) {
      return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
    }
    function wr() {
      return typeof navigator < "u" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS") ? false : typeof window < "u" && typeof document < "u";
    }
    function ne(t, e) {
      if (!(t === null || typeof t > "u"))
        if (typeof t != "object" && (t = [t]), te(t))
          for (var r = 0, i = t.length; r < i; r++)
            e.call(null, t[r], r, t);
        else
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && e.call(null, t[n], n, t);
    }
    function Y() {
      var t = {};
      function e(n, s) {
        L(t[s]) && L(n) ? t[s] = Y(t[s], n) : L(n) ? t[s] = Y({}, n) : te(n) ? t[s] = n.slice() : t[s] = n;
      }
      for (var r = 0, i = arguments.length; r < i; r++)
        ne(arguments[r], e);
      return t;
    }
    function vr(t, e, r) {
      return ne(e, function(n, s) {
        r && typeof n == "function" ? t[s] = ir(n, r) : t[s] = n;
      }), t;
    }
    function gr(t) {
      return t.charCodeAt(0) === 65279 && (t = t.slice(1)), t;
    }
    function br(t, e, r, i) {
      t.prototype = Object.create(e.prototype, i), t.prototype.constructor = t, r && Object.assign(t.prototype, r);
    }
    function Er(t, e, r) {
      var i, n, s, a = {};
      e = e || {};
      do {
        for (i = Object.getOwnPropertyNames(t), n = i.length; n-- > 0; )
          s = i[n], a[s] || (e[s] = t[s], a[s] = true);
        t = Object.getPrototypeOf(t);
      } while (t && (!r || r(t, e)) && t !== Object.prototype);
      return e;
    }
    function xr(t, e, r) {
      t = String(t), (r === void 0 || r > t.length) && (r = t.length), r -= e.length;
      var i = t.indexOf(e, r);
      return i !== -1 && i === r;
    }
    function Cr(t) {
      if (!t)
        return null;
      var e = t.length;
      if (j(e))
        return null;
      for (var r = new Array(e); e-- > 0; )
        r[e] = t[e];
      return r;
    }
    var Rr = function(t) {
      return function(e) {
        return t && e instanceof t;
      };
    }(typeof Uint8Array < "u" && Object.getPrototypeOf(Uint8Array));
    ke.exports = { isArray: te, isArrayBuffer: Te, isBuffer: sr, isFormData: pr, isArrayBufferView: ar, isString: or, isNumber: ur, isObject: Se, isPlainObject: L, isUndefined: j, isDate: cr, isFile: lr, isBlob: dr, isFunction: re, isStream: hr, isURLSearchParams: mr, isStandardBrowserEnv: wr, forEach: ne, merge: Y, extend: vr, trim: yr, stripBOM: gr, inherits: br, toFlatObject: Er, kindOf: ee, kindOfTest: A, endsWith: xr, toArray: Cr, isTypedArray: Rr, isFileList: fr };
  });
  var ie = l((vn, Pe) => {
    "use strict";
    var S = f();
    function Ne(t) {
      return encodeURIComponent(t).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
    }
    Pe.exports = function(e, r, i) {
      if (!r)
        return e;
      var n;
      if (i)
        n = i(r);
      else if (S.isURLSearchParams(r))
        n = r.toString();
      else {
        var s = [];
        S.forEach(r, function(c, p) {
          c === null || typeof c > "u" || (S.isArray(c) ? p = p + "[]" : c = [c], S.forEach(c, function(d) {
            S.isDate(d) ? d = d.toISOString() : S.isObject(d) && (d = JSON.stringify(d)), s.push(Ne(p) + "=" + Ne(d));
          }));
        }), n = s.join("&");
      }
      if (n) {
        var a = e.indexOf("#");
        a !== -1 && (e = e.slice(0, a)), e += (e.indexOf("?") === -1 ? "?" : "&") + n;
      }
      return e;
    };
  });
  var De = l((gn, _e) => {
    "use strict";
    var Or = f();
    function I() {
      this.handlers = [];
    }
    I.prototype.use = function(e, r, i) {
      return this.handlers.push({ fulfilled: e, rejected: r, synchronous: i ? i.synchronous : false, runWhen: i ? i.runWhen : null }), this.handlers.length - 1;
    };
    I.prototype.eject = function(e) {
      this.handlers[e] && (this.handlers[e] = null);
    };
    I.prototype.forEach = function(e) {
      Or.forEach(this.handlers, function(i) {
        i !== null && e(i);
      });
    };
    _e.exports = I;
  });
  var Be = l((bn, Ue) => {
    "use strict";
    var Ar = f();
    Ue.exports = function(e, r) {
      Ar.forEach(e, function(n, s) {
        s !== r && s.toUpperCase() === r.toUpperCase() && (e[r] = n, delete e[s]);
      });
    };
  });
  var q = l((En, Fe) => {
    "use strict";
    var Le = f();
    function k(t, e, r, i, n) {
      Error.call(this), this.message = t, this.name = "AxiosError", e && (this.code = e), r && (this.config = r), i && (this.request = i), n && (this.response = n);
    }
    Le.inherits(k, Error, { toJSON: function() {
      return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: this.config, code: this.code, status: this.response && this.response.status ? this.response.status : null };
    } });
    var je = k.prototype, Ie = {};
    ["ERR_BAD_OPTION_VALUE", "ERR_BAD_OPTION", "ECONNABORTED", "ETIMEDOUT", "ERR_NETWORK", "ERR_FR_TOO_MANY_REDIRECTS", "ERR_DEPRECATED", "ERR_BAD_RESPONSE", "ERR_BAD_REQUEST", "ERR_CANCELED"].forEach(function(t) {
      Ie[t] = { value: t };
    });
    Object.defineProperties(k, Ie);
    Object.defineProperty(je, "isAxiosError", { value: true });
    k.from = function(t, e, r, i, n, s) {
      var a = Object.create(je);
      return Le.toFlatObject(t, a, function(c) {
        return c !== Error.prototype;
      }), k.call(a, t.message, e, r, i, n), a.name = t.name, s && Object.assign(a, s), a;
    };
    Fe.exports = k;
  });
  var se = l((xn, ze) => {
    "use strict";
    ze.exports = { silentJSONParsing: true, forcedJSONParsing: true, clarifyTimeoutError: false };
  });
  var ae = l((Cn, Me) => {
    "use strict";
    var b = f();
    function qr(t, e) {
      e = e || new FormData();
      var r = [];
      function i(s) {
        return s === null ? "" : b.isDate(s) ? s.toISOString() : b.isArrayBuffer(s) || b.isTypedArray(s) ? typeof Blob == "function" ? new Blob([s]) : Buffer.from(s) : s;
      }
      function n(s, a) {
        if (b.isPlainObject(s) || b.isArray(s)) {
          if (r.indexOf(s) !== -1)
            throw Error("Circular reference detected in " + a);
          r.push(s), b.forEach(s, function(c, p) {
            if (!b.isUndefined(c)) {
              var o = a ? a + "." + p : p, d;
              if (c && !a && typeof c == "object") {
                if (b.endsWith(p, "{}"))
                  c = JSON.stringify(c);
                else if (b.endsWith(p, "[]") && (d = b.toArray(c))) {
                  d.forEach(function(w) {
                    !b.isUndefined(w) && e.append(o, i(w));
                  });
                  return;
                }
              }
              n(c, o);
            }
          }), r.pop();
        } else
          e.append(a, i(s));
      }
      return n(t), e;
    }
    Me.exports = qr;
  });
  var He = l((Rn, $e) => {
    "use strict";
    var oe = q();
    $e.exports = function(e, r, i) {
      var n = i.config.validateStatus;
      !i.status || !n || n(i.status) ? e(i) : r(new oe("Request failed with status code " + i.status, [oe.ERR_BAD_REQUEST, oe.ERR_BAD_RESPONSE][Math.floor(i.status / 100) - 4], i.config, i.request, i));
    };
  });
  var Je = l((On, We) => {
    "use strict";
    var F = f();
    We.exports = F.isStandardBrowserEnv() ? function() {
      return { write: function(r, i, n, s, a, u) {
        var c = [];
        c.push(r + "=" + encodeURIComponent(i)), F.isNumber(n) && c.push("expires=" + new Date(n).toGMTString()), F.isString(s) && c.push("path=" + s), F.isString(a) && c.push("domain=" + a), u === true && c.push("secure"), document.cookie = c.join("; ");
      }, read: function(r) {
        var i = document.cookie.match(new RegExp("(^|;\\s*)(" + r + ")=([^;]*)"));
        return i ? decodeURIComponent(i[3]) : null;
      }, remove: function(r) {
        this.write(r, "", Date.now() - 864e5);
      } };
    }() : function() {
      return { write: function() {
      }, read: function() {
        return null;
      }, remove: function() {
      } };
    }();
  });
  var Ke = l((An, Ve) => {
    "use strict";
    Ve.exports = function(e) {
      return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);
    };
  });
  var Ge = l((qn, Xe) => {
    "use strict";
    Xe.exports = function(e, r) {
      return r ? e.replace(/\/+$/, "") + "/" + r.replace(/^\/+/, "") : e;
    };
  });
  var ue = l((Tn, Qe) => {
    "use strict";
    var Tr = Ke(), Sr = Ge();
    Qe.exports = function(e, r) {
      return e && !Tr(r) ? Sr(e, r) : r;
    };
  });
  var Ze = l((Sn, Ye) => {
    "use strict";
    var ce = f(), kr = ["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"];
    Ye.exports = function(e) {
      var r = {}, i, n, s;
      return e && ce.forEach(e.split(`
`), function(u) {
        if (s = u.indexOf(":"), i = ce.trim(u.substr(0, s)).toLowerCase(), n = ce.trim(u.substr(s + 1)), i) {
          if (r[i] && kr.indexOf(i) >= 0)
            return;
          i === "set-cookie" ? r[i] = (r[i] ? r[i] : []).concat([n]) : r[i] = r[i] ? r[i] + ", " + n : n;
        }
      }), r;
    };
  });
  var rt = l((kn, tt) => {
    "use strict";
    var et = f();
    tt.exports = et.isStandardBrowserEnv() ? function() {
      var e = /(msie|trident)/i.test(navigator.userAgent), r = document.createElement("a"), i;
      function n(s) {
        var a = s;
        return e && (r.setAttribute("href", a), a = r.href), r.setAttribute("href", a), { href: r.href, protocol: r.protocol ? r.protocol.replace(/:$/, "") : "", host: r.host, search: r.search ? r.search.replace(/^\?/, "") : "", hash: r.hash ? r.hash.replace(/^#/, "") : "", hostname: r.hostname, port: r.port, pathname: r.pathname.charAt(0) === "/" ? r.pathname : "/" + r.pathname };
      }
      return i = n(window.location.href), function(a) {
        var u = et.isString(a) ? n(a) : a;
        return u.protocol === i.protocol && u.host === i.host;
      };
    }() : function() {
      return function() {
        return true;
      };
    }();
  });
  var U = l((Nn, it) => {
    "use strict";
    var le = q(), Nr = f();
    function nt(t) {
      le.call(this, t ?? "canceled", le.ERR_CANCELED), this.name = "CanceledError";
    }
    Nr.inherits(nt, le, { __CANCEL__: true });
    it.exports = nt;
  });
  var at = l((Pn, st) => {
    "use strict";
    st.exports = function(e) {
      var r = /^([-+\w]{1,25})(:?\/\/|:)/.exec(e);
      return r && r[1] || "";
    };
  });
  var de = l((_n, ot) => {
    "use strict";
    var B = f(), Pr = He(), _r = Je(), Dr = ie(), Ur = ue(), Br = Ze(), Lr = rt(), jr = se(), x = q(), Ir = U(), Fr = at();
    ot.exports = function(e) {
      return new Promise(function(i, n) {
        var s = e.data, a = e.headers, u = e.responseType, c;
        function p() {
          e.cancelToken && e.cancelToken.unsubscribe(c), e.signal && e.signal.removeEventListener("abort", c);
        }
        B.isFormData(s) && B.isStandardBrowserEnv() && delete a["Content-Type"];
        var o = new XMLHttpRequest();
        if (e.auth) {
          var d = e.auth.username || "", w = e.auth.password ? unescape(encodeURIComponent(e.auth.password)) : "";
          a.Authorization = "Basic " + btoa(d + ":" + w);
        }
        var m = Ur(e.baseURL, e.url);
        o.open(e.method.toUpperCase(), Dr(m, e.params, e.paramsSerializer), true), o.timeout = e.timeout;
        function Re() {
          if (o) {
            var g = "getAllResponseHeaders" in o ? Br(o.getAllResponseHeaders()) : null, T = !u || u === "text" || u === "json" ? o.responseText : o.response, O = { data: T, status: o.status, statusText: o.statusText, headers: g, config: e, request: o };
            Pr(function(K) {
              i(K), p();
            }, function(K) {
              n(K), p();
            }, O), o = null;
          }
        }
        if ("onloadend" in o ? o.onloadend = Re : o.onreadystatechange = function() {
          !o || o.readyState !== 4 || o.status === 0 && !(o.responseURL && o.responseURL.indexOf("file:") === 0) || setTimeout(Re);
        }, o.onabort = function() {
          o && (n(new x("Request aborted", x.ECONNABORTED, e, o)), o = null);
        }, o.onerror = function() {
          n(new x("Network Error", x.ERR_NETWORK, e, o, o)), o = null;
        }, o.ontimeout = function() {
          var T = e.timeout ? "timeout of " + e.timeout + "ms exceeded" : "timeout exceeded", O = e.transitional || jr;
          e.timeoutErrorMessage && (T = e.timeoutErrorMessage), n(new x(T, O.clarifyTimeoutError ? x.ETIMEDOUT : x.ECONNABORTED, e, o)), o = null;
        }, B.isStandardBrowserEnv()) {
          var Oe = (e.withCredentials || Lr(m)) && e.xsrfCookieName ? _r.read(e.xsrfCookieName) : void 0;
          Oe && (a[e.xsrfHeaderName] = Oe);
        }
        "setRequestHeader" in o && B.forEach(a, function(T, O) {
          typeof s > "u" && O.toLowerCase() === "content-type" ? delete a[O] : o.setRequestHeader(O, T);
        }), B.isUndefined(e.withCredentials) || (o.withCredentials = !!e.withCredentials), u && u !== "json" && (o.responseType = e.responseType), typeof e.onDownloadProgress == "function" && o.addEventListener("progress", e.onDownloadProgress), typeof e.onUploadProgress == "function" && o.upload && o.upload.addEventListener("progress", e.onUploadProgress), (e.cancelToken || e.signal) && (c = function(g) {
          o && (n(!g || g && g.type ? new Ir() : g), o.abort(), o = null);
        }, e.cancelToken && e.cancelToken.subscribe(c), e.signal && (e.signal.aborted ? c() : e.signal.addEventListener("abort", c))), s || (s = null);
        var V = Fr(m);
        if (V && ["http", "https", "file"].indexOf(V) === -1) {
          n(new x("Unsupported protocol " + V + ":", x.ERR_BAD_REQUEST, e));
          return;
        }
        o.send(s);
      });
    };
  });
  var ct = l((Dn, ut) => {
    ut.exports = null;
  });
  var M = l((Un, ht) => {
    "use strict";
    var h = f(), lt = Be(), dt = q(), zr = se(), Mr = ae(), $r = { "Content-Type": "application/x-www-form-urlencoded" };
    function ft(t, e) {
      !h.isUndefined(t) && h.isUndefined(t["Content-Type"]) && (t["Content-Type"] = e);
    }
    function Hr() {
      var t;
      return typeof XMLHttpRequest < "u" ? t = de() : typeof process < "u" && Object.prototype.toString.call(process) === "[object process]" && (t = de()), t;
    }
    function Wr(t, e, r) {
      if (h.isString(t))
        try {
          return (e || JSON.parse)(t), h.trim(t);
        } catch (i) {
          if (i.name !== "SyntaxError")
            throw i;
        }
      return (r || JSON.stringify)(t);
    }
    var z = { transitional: zr, adapter: Hr(), transformRequest: [function(e, r) {
      if (lt(r, "Accept"), lt(r, "Content-Type"), h.isFormData(e) || h.isArrayBuffer(e) || h.isBuffer(e) || h.isStream(e) || h.isFile(e) || h.isBlob(e))
        return e;
      if (h.isArrayBufferView(e))
        return e.buffer;
      if (h.isURLSearchParams(e))
        return ft(r, "application/x-www-form-urlencoded;charset=utf-8"), e.toString();
      var i = h.isObject(e), n = r && r["Content-Type"], s;
      if ((s = h.isFileList(e)) || i && n === "multipart/form-data") {
        var a = this.env && this.env.FormData;
        return Mr(s ? { "files[]": e } : e, a && new a());
      } else if (i || n === "application/json")
        return ft(r, "application/json"), Wr(e);
      return e;
    }], transformResponse: [function(e) {
      var r = this.transitional || z.transitional, i = r && r.silentJSONParsing, n = r && r.forcedJSONParsing, s = !i && this.responseType === "json";
      if (s || n && h.isString(e) && e.length)
        try {
          return JSON.parse(e);
        } catch (a) {
          if (s)
            throw a.name === "SyntaxError" ? dt.from(a, dt.ERR_BAD_RESPONSE, this, null, this.response) : a;
        }
      return e;
    }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, env: { FormData: ct() }, validateStatus: function(e) {
      return e >= 200 && e < 300;
    }, headers: { common: { Accept: "application/json, text/plain, */*" } } };
    h.forEach(["delete", "get", "head"], function(e) {
      z.headers[e] = {};
    });
    h.forEach(["post", "put", "patch"], function(e) {
      z.headers[e] = h.merge($r);
    });
    ht.exports = z;
  });
  var mt = l((Bn, pt) => {
    "use strict";
    var Jr = f(), Vr = M();
    pt.exports = function(e, r, i) {
      var n = this || Vr;
      return Jr.forEach(i, function(a) {
        e = a.call(n, e, r);
      }), e;
    };
  });
  var fe = l((Ln, yt) => {
    "use strict";
    yt.exports = function(e) {
      return !!(e && e.__CANCEL__);
    };
  });
  var gt = l((jn, vt) => {
    "use strict";
    var wt = f(), he = mt(), Kr = fe(), Xr = M(), Gr = U();
    function pe(t) {
      if (t.cancelToken && t.cancelToken.throwIfRequested(), t.signal && t.signal.aborted)
        throw new Gr();
    }
    vt.exports = function(e) {
      pe(e), e.headers = e.headers || {}, e.data = he.call(e, e.data, e.headers, e.transformRequest), e.headers = wt.merge(e.headers.common || {}, e.headers[e.method] || {}, e.headers), wt.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function(n) {
        delete e.headers[n];
      });
      var r = e.adapter || Xr.adapter;
      return r(e).then(function(n) {
        return pe(e), n.data = he.call(e, n.data, n.headers, e.transformResponse), n;
      }, function(n) {
        return Kr(n) || (pe(e), n && n.response && (n.response.data = he.call(e, n.response.data, n.response.headers, e.transformResponse))), Promise.reject(n);
      });
    };
  });
  var me = l((In, bt) => {
    "use strict";
    var v = f();
    bt.exports = function(e, r) {
      r = r || {};
      var i = {};
      function n(o, d) {
        return v.isPlainObject(o) && v.isPlainObject(d) ? v.merge(o, d) : v.isPlainObject(d) ? v.merge({}, d) : v.isArray(d) ? d.slice() : d;
      }
      function s(o) {
        if (v.isUndefined(r[o])) {
          if (!v.isUndefined(e[o]))
            return n(void 0, e[o]);
        } else
          return n(e[o], r[o]);
      }
      function a(o) {
        if (!v.isUndefined(r[o]))
          return n(void 0, r[o]);
      }
      function u(o) {
        if (v.isUndefined(r[o])) {
          if (!v.isUndefined(e[o]))
            return n(void 0, e[o]);
        } else
          return n(void 0, r[o]);
      }
      function c(o) {
        if (o in r)
          return n(e[o], r[o]);
        if (o in e)
          return n(void 0, e[o]);
      }
      var p = { url: a, method: a, data: a, baseURL: u, transformRequest: u, transformResponse: u, paramsSerializer: u, timeout: u, timeoutMessage: u, withCredentials: u, adapter: u, responseType: u, xsrfCookieName: u, xsrfHeaderName: u, onUploadProgress: u, onDownloadProgress: u, decompress: u, maxContentLength: u, maxBodyLength: u, beforeRedirect: u, transport: u, httpAgent: u, httpsAgent: u, cancelToken: u, socketPath: u, responseEncoding: u, validateStatus: c };
      return v.forEach(Object.keys(e).concat(Object.keys(r)), function(d) {
        var w = p[d] || s, m = w(d);
        v.isUndefined(m) && w !== c || (i[d] = m);
      }), i;
    };
  });
  var ye = l((Fn, Et) => {
    Et.exports = { version: "0.27.2" };
  });
  var Rt = l((zn, Ct) => {
    "use strict";
    var Qr = ye().version, R = q(), we = {};
    ["object", "boolean", "number", "function", "string", "symbol"].forEach(function(t, e) {
      we[t] = function(i) {
        return typeof i === t || "a" + (e < 1 ? "n " : " ") + t;
      };
    });
    var xt = {};
    we.transitional = function(e, r, i) {
      function n(s, a) {
        return "[Axios v" + Qr + "] Transitional option '" + s + "'" + a + (i ? ". " + i : "");
      }
      return function(s, a, u) {
        if (e === false)
          throw new R(n(a, " has been removed" + (r ? " in " + r : "")), R.ERR_DEPRECATED);
        return r && !xt[a] && (xt[a] = true, console.warn(n(a, " has been deprecated since v" + r + " and will be removed in the near future"))), e ? e(s, a, u) : true;
      };
    };
    function Yr(t, e, r) {
      if (typeof t != "object")
        throw new R("options must be an object", R.ERR_BAD_OPTION_VALUE);
      for (var i = Object.keys(t), n = i.length; n-- > 0; ) {
        var s = i[n], a = e[s];
        if (a) {
          var u = t[s], c = u === void 0 || a(u, s, t);
          if (c !== true)
            throw new R("option " + s + " must be " + c, R.ERR_BAD_OPTION_VALUE);
          continue;
        }
        if (r !== true)
          throw new R("Unknown option " + s, R.ERR_BAD_OPTION);
      }
    }
    Ct.exports = { assertOptions: Yr, validators: we };
  });
  var kt = l((Mn, St) => {
    "use strict";
    var qt = f(), Zr = ie(), Ot = De(), At = gt(), $ = me(), en = ue(), Tt = Rt(), N = Tt.validators;
    function P(t) {
      this.defaults = t, this.interceptors = { request: new Ot(), response: new Ot() };
    }
    P.prototype.request = function(e, r) {
      typeof e == "string" ? (r = r || {}, r.url = e) : r = e || {}, r = $(this.defaults, r), r.method ? r.method = r.method.toLowerCase() : this.defaults.method ? r.method = this.defaults.method.toLowerCase() : r.method = "get";
      var i = r.transitional;
      i !== void 0 && Tt.assertOptions(i, { silentJSONParsing: N.transitional(N.boolean), forcedJSONParsing: N.transitional(N.boolean), clarifyTimeoutError: N.transitional(N.boolean) }, false);
      var n = [], s = true;
      this.interceptors.request.forEach(function(m) {
        typeof m.runWhen == "function" && m.runWhen(r) === false || (s = s && m.synchronous, n.unshift(m.fulfilled, m.rejected));
      });
      var a = [];
      this.interceptors.response.forEach(function(m) {
        a.push(m.fulfilled, m.rejected);
      });
      var u;
      if (!s) {
        var c = [At, void 0];
        for (Array.prototype.unshift.apply(c, n), c = c.concat(a), u = Promise.resolve(r); c.length; )
          u = u.then(c.shift(), c.shift());
        return u;
      }
      for (var p = r; n.length; ) {
        var o = n.shift(), d = n.shift();
        try {
          p = o(p);
        } catch (w) {
          d(w);
          break;
        }
      }
      try {
        u = At(p);
      } catch (w) {
        return Promise.reject(w);
      }
      for (; a.length; )
        u = u.then(a.shift(), a.shift());
      return u;
    };
    P.prototype.getUri = function(e) {
      e = $(this.defaults, e);
      var r = en(e.baseURL, e.url);
      return Zr(r, e.params, e.paramsSerializer);
    };
    qt.forEach(["delete", "get", "head", "options"], function(e) {
      P.prototype[e] = function(r, i) {
        return this.request($(i || {}, { method: e, url: r, data: (i || {}).data }));
      };
    });
    qt.forEach(["post", "put", "patch"], function(e) {
      function r(i) {
        return function(s, a, u) {
          return this.request($(u || {}, { method: e, headers: i ? { "Content-Type": "multipart/form-data" } : {}, url: s, data: a }));
        };
      }
      P.prototype[e] = r(), P.prototype[e + "Form"] = r(true);
    });
    St.exports = P;
  });
  var Pt = l(($n, Nt) => {
    "use strict";
    var tn = U();
    function _(t) {
      if (typeof t != "function")
        throw new TypeError("executor must be a function.");
      var e;
      this.promise = new Promise(function(n) {
        e = n;
      });
      var r = this;
      this.promise.then(function(i) {
        if (r._listeners) {
          var n, s = r._listeners.length;
          for (n = 0; n < s; n++)
            r._listeners[n](i);
          r._listeners = null;
        }
      }), this.promise.then = function(i) {
        var n, s = new Promise(function(a) {
          r.subscribe(a), n = a;
        }).then(i);
        return s.cancel = function() {
          r.unsubscribe(n);
        }, s;
      }, t(function(n) {
        r.reason || (r.reason = new tn(n), e(r.reason));
      });
    }
    _.prototype.throwIfRequested = function() {
      if (this.reason)
        throw this.reason;
    };
    _.prototype.subscribe = function(e) {
      if (this.reason) {
        e(this.reason);
        return;
      }
      this._listeners ? this._listeners.push(e) : this._listeners = [e];
    };
    _.prototype.unsubscribe = function(e) {
      if (this._listeners) {
        var r = this._listeners.indexOf(e);
        r !== -1 && this._listeners.splice(r, 1);
      }
    };
    _.source = function() {
      var e, r = new _(function(n) {
        e = n;
      });
      return { token: r, cancel: e };
    };
    Nt.exports = _;
  });
  var Dt = l((Hn, _t) => {
    "use strict";
    _t.exports = function(e) {
      return function(i) {
        return e.apply(null, i);
      };
    };
  });
  var Bt = l((Wn, Ut) => {
    "use strict";
    var rn = f();
    Ut.exports = function(e) {
      return rn.isObject(e) && e.isAxiosError === true;
    };
  });
  var It = l((Jn, ve) => {
    "use strict";
    var Lt = f(), nn = Q(), H = kt(), sn = me(), an = M();
    function jt(t) {
      var e = new H(t), r = nn(H.prototype.request, e);
      return Lt.extend(r, H.prototype, e), Lt.extend(r, e), r.create = function(n) {
        return jt(sn(t, n));
      }, r;
    }
    var y = jt(an);
    y.Axios = H;
    y.CanceledError = U();
    y.CancelToken = Pt();
    y.isCancel = fe();
    y.VERSION = ye().version;
    y.toFormData = ae();
    y.AxiosError = q();
    y.Cancel = y.CanceledError;
    y.all = function(e) {
      return Promise.all(e);
    };
    y.spread = Dt();
    y.isAxiosError = Bt();
    ve.exports = y;
    ve.exports.default = y;
  });
  var ge = l((Vn, Ft) => {
    Ft.exports = It();
  });
  var W = Ae(ge(), 1);
  var C = "https://zesty-storage-prod.s3.amazonaws.com/images/zesty";
  var D = { tall: { width: 0.75, height: 1, style: { standard: `${C}/zesty-banner-tall.png`, minimal: `${C}/zesty-banner-tall-minimal.png`, transparent: `${C}/zesty-banner-tall-transparent.png` } }, wide: { width: 4, height: 1, style: { standard: `${C}/zesty-banner-wide.png`, minimal: `${C}/zesty-banner-wide-minimal.png`, transparent: `${C}/zesty-banner-wide-transparent.png` } }, square: { width: 1, height: 1, style: { standard: `${C}/zesty-banner-square.png`, minimal: `${C}/zesty-banner-square-minimal.png`, transparent: `${C}/zesty-banner-square-transparent.png` } } };
  var on = Ae(ge(), 1);
  var be = () => {
    let t = window.XRHand != null && window.XRMediaBinding != null, e = navigator.userAgent.includes("OculusBrowser"), r = t && e ? "Full" : t || e ? "Partial" : "None";
    return { match: r !== "None", confidence: r };
  };
  var Ee = () => {
    let t = window.mozInnerScreenX != null && window.speechSynthesis == null, e = navigator.userAgent.includes("Mobile VR") && !navigator.userAgent.includes("OculusBrowser"), r = t && e ? "Full" : t || e ? "Partial" : "None";
    return { match: r !== "None", confidence: r };
  };
  var zt = async () => {
    let t = navigator.xr && await navigator.xr.isSessionSupported("immersive-vr") && await navigator.xr.isSessionSupported("immersive-ar"), e = navigator.userAgent.includes("Pico Neo 3 Link"), r = t && e ? "Full" : t || e ? "Partial" : "None";
    return { match: r !== "None", confidence: r };
  };
  var Mt = () => {
    let t = navigator.maxTouchPoints === 0 || navigator.msMaxTouchPoints === 0, e = !navigator.userAgent.includes("Android") && !navigator.userAgent.includes("Mobile"), r = t && e ? "Full" : t || e ? "Partial" : "None";
    return { match: r !== "None", confidence: r };
  };
  var xe = async () => {
    let t = { platform: "", confidence: "" };
    return be().match ? t = { platform: "Oculus", confidence: be().confidence } : Ee().match ? t = { platform: "Wolvic", confidence: Ee().confidence } : await zt().match ? t = { platform: "Pico", confidence: await zt().confidence } : Mt().match ? t = { platform: "Desktop", confidence: Mt().confidence } : t = { platform: "Unknown", confidence: "None" }, t;
  };
  var $t = (t) => {
    if (t) {
      if (be().match) {
        if (t.includes("https://www.oculus.com/experiences/quest/")) {
          setTimeout(() => {
            window.open(t, "_blank");
          }, 1e3);
          return;
        }
      } else if (Ee().match) {
        let e = document.createElement("div"), r = document.createElement("div"), i = document.createElement("p"), n = document.createElement("button"), s = document.createElement("button");
        e.style.backgroundColor = "rgb(0, 0, 0, 0.75)", e.style.color = "white", e.style.textAlign = "center", e.style.position = "fixed", e.style.top = "50%", e.style.left = "50%", e.style.padding = "5%", e.style.borderRadius = "5%", e.style.transform = "translate(-50%, -50%)", i.innerHTML = `<b>This billboard leads to ${t}. Continue?</b>`, n.innerText = "Move cursor back into window.", n.style.width = "100vw", n.style.height = "100vh", n.onmouseenter = () => {
          n.style.width = "auto", n.style.height = "auto", n.innerText = "Yes";
        }, n.onclick = () => {
          window.open(t, "_blank"), e.remove();
        }, s.innerText = "No", s.onclick = () => {
          e.remove();
        }, e.append(r), r.append(i), r.append(n), r.append(s), document.body.append(e);
        return;
      }
      window.open(t, "_blank");
    }
  };
  var Ht = "https://beacon2.zesty.market/zgraphql";
  var un = "https://api.zesty.market/api";
  var Wt = async (t, e = "tall", r = "standard") => {
    try {
      let i = encodeURI(window.top.location.href).replace(/\/$/, ""), n = await W.default.get(`${un}/ad?ad_unit_id=${t}&url=${i}`);
      return n.data ? n.data : { Ads: [{ asset_url: D[e].style[r], cta_url: "https://www.zesty.market" }], CampaignId: "TestCampaign" };
    } catch {
      return console.warn("Could not retrieve an active campaign banner. Retrieving default banner."), { Ads: [{ asset_url: D[e].style[r], cta_url: "https://www.zesty.market" }], CampaignId: "TestCampaign" };
    }
  };
  var Jt = async (t, e = null) => {
    let { platform: r, confidence: i } = await xe();
    try {
      await W.default.post(Ht, { query: `mutation { increment(eventType: visits, spaceId: "${t}", campaignId: "${e}", platform: { name: ${r}, confidence: ${i} }) { message } }` }, { headers: { "Content-Type": "application/json" } });
    } catch (n) {
      console.log("Failed to emit onload event", n.message);
    }
  };
  var Vt = async (t, e = null) => {
    let { platform: r, confidence: i } = await xe();
    try {
      await W.default.post(Ht, { query: `mutation { increment(eventType: clicks, spaceId: "${t}", campaignId: "${e}", platform: { name: ${r}, confidence: ${i} }) { message } }` }, { headers: { "Content-Type": "application/json" } });
    } catch (n) {
      console.log("Failed to emit onclick event", n.message);
    }
  };
  var Kt = "2.2.0";
  console.log("Zesty SDK Version: ", Kt);
  var hn = "https://cdn.zesty.xyz/sdk/zesty-formats.js";
  var pn = "https://cdn.zesty.xyz/sdk/zesty-networking.js";
  var J = class extends Component {
    static onRegister(e) {
      e.registerComponent(CursorTarget);
    }
    init() {
      this.formats = Object.values(D), this.formatKeys = Object.keys(D), this.styleKeys = ["standard", "minimal", "transparent"];
    }
    start() {
      if (this.mesh = this.object.getComponent(MeshComponent), !this.mesh)
        throw new Error("'zesty-banner ' missing mesh component");
      if (this.createAutomaticCollision && (this.collision = this.object.getComponent(CollisionComponent) || this.object.addComponent(CollisionComponent, { collider: Collider.Box, group: 2 }), this.cursorTarget = this.object.getComponent(CursorTarget) || this.object.addComponent(CursorTarget), this.cursorTarget.onClick.add(this.onClick.bind(this))), this.dynamicFormats) {
        let e = document.createElement("script");
        e.onload = () => {
          this.formatsOverride = zestyFormats.formats;
        }, e.setAttribute("src", hn), e.setAttribute("crossorigin", "anonymous"), document.body.appendChild(e);
      }
      this.dynamicNetworking ? import(pn).then((e) => {
        this.zestyNetworking = Object.assign({}, e), this.startLoading();
      }).catch(() => {
        console.error("Failed to dynamically retrieve networking code, falling back to bundled version."), this.dynamicNetworking = false, this.startLoading();
      }) : this.startLoading();
    }
    startLoading() {
      this.loadBanner(this.adUnit, this.formatKeys[this.format], this.styleKeys[this.style]).then((e) => {
        this.banner = e, this.scaleToRatio && (this.height = this.object.scalingLocal[1], this.object.resetScaling(), this.createAutomaticCollision && (this.collision.extents = [this.formats[this.format].width * this.height, this.height, 0.1]), this.object.scale([this.formats[this.format].width * this.height, this.height, 1]));
        let r = this.mesh.material.clone();
        if (this.textureProperty === "auto") {
          let i = r.shader;
          if (i === "Phong Opaque Textured")
            r.diffuseTexture = e.texture, r.alphaMaskThreshold = 0.3;
          else if (i === "Flat Opaque Textured")
            r.flatTexture = e.texture, r.alphaMaskThreshold = 0.8;
          else
            throw Error("'zesty-banner' unable to apply banner texture: unsupported pipeline " + i);
          this.mesh.material = r, this.mesh.material.alphaMaskTexture = e.texture;
        } else
          this.mesh.material[this.textureProperty] = e.texture, this.mesh.material.alphaMaskTexture = e.texture;
        this.beacon && (this.dynamicNetworking ? this.zestyNetworking.sendOnLoadMetric(this.adUnit, this.banner.campaignId) : Jt(this.adUnit, this.banner.campaignId));
      });
    }
    onClick() {
      this.banner?.url && (this.engine.xr ? this.engine.xr.session.end().then(this.executeClick.bind(this)) : this.engine.xrSession ? this.engine.xrSession.end().then(this.executeClick.bind(this)) : this.executeClick());
    }
    executeClick() {
      $t(this.banner.url), this.beacon && (this.dynamicNetworking ? this.zestyNetworking.sendOnClickMetric(this.adUnit, this.banner.campaignId) : Vt(this.adUnit, this.banner.campaignId));
    }
    async loadBanner(e, r, i) {
      let n = this.dynamicNetworking ? await this.zestyNetworking.fetchCampaignAd(e, r, i) : await Wt(e, r, i), { asset_url: s, cta_url: a } = n.Ads[0];
      return this.campaignId = n.CampaignId, this.engine.textures.load(s, "").then((u) => ({ texture: u, imageSrc: s, url: a, campaignId: n.CampaignId }));
    }
  };
  G(J, "TypeName", "zesty-banner"), G(J, "Properties", { adUnit: Property.string(""), format: Property.enum(["tall", "wide", "square"], "square"), style: Property.enum(["standard", "minimal", "transparent"], "transparent"), scaleToRatio: Property.bool(true), textureProperty: Property.string("auto"), assignAlphaMaskTexture: Property.bool(true), beacon: Property.bool(true), dynamicFormats: Property.bool(true), createAutomaticCollision: Property.bool(true), dynamicNetworking: Property.bool(false) });

  // js/components/active-ad.ts
  var active_ad_exports = {};
  __export(active_ad_exports, {
    ActiveAd: () => ActiveAd
  });

  // node_modules/tslib/tslib.es6.mjs
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2)
        if (Object.prototype.hasOwnProperty.call(b2, p))
          d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }
  function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m)
      return m.call(o);
    if (o && typeof o.length === "number")
      return {
        next: function() {
          if (o && i >= o.length)
            o = void 0;
          return { value: o && o[i++], done: !o };
        }
      };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
  }
  function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m)
      return o;
    var i = m.call(o), r, ar = [], e;
    try {
      while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
        ar.push(r.value);
    } catch (error) {
      e = { error };
    } finally {
      try {
        if (r && !r.done && (m = i["return"]))
          m.call(i);
      } finally {
        if (e)
          throw e.error;
      }
    }
    return ar;
  }
  function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2)
      for (var i = 0, l2 = from.length, ar; i < l2; i++) {
        if (ar || !(i in from)) {
          if (!ar)
            ar = Array.prototype.slice.call(from, 0, i);
          ar[i] = from[i];
        }
      }
    return to.concat(ar || Array.prototype.slice.call(from));
  }

  // node_modules/rxjs/dist/esm5/internal/util/isFunction.js
  function isFunction(value) {
    return typeof value === "function";
  }

  // node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js
  function createErrorClass(createImpl) {
    var _super = function(instance) {
      Error.call(instance);
      instance.stack = new Error().stack;
    };
    var ctorFunc = createImpl(_super);
    ctorFunc.prototype = Object.create(Error.prototype);
    ctorFunc.prototype.constructor = ctorFunc;
    return ctorFunc;
  }

  // node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js
  var UnsubscriptionError = createErrorClass(function(_super) {
    return function UnsubscriptionErrorImpl(errors) {
      _super(this);
      this.message = errors ? errors.length + " errors occurred during unsubscription:\n" + errors.map(function(err, i) {
        return i + 1 + ") " + err.toString();
      }).join("\n  ") : "";
      this.name = "UnsubscriptionError";
      this.errors = errors;
    };
  });

  // node_modules/rxjs/dist/esm5/internal/util/arrRemove.js
  function arrRemove(arr, item) {
    if (arr) {
      var index = arr.indexOf(item);
      0 <= index && arr.splice(index, 1);
    }
  }

  // node_modules/rxjs/dist/esm5/internal/Subscription.js
  var Subscription = function() {
    function Subscription2(initialTeardown) {
      this.initialTeardown = initialTeardown;
      this.closed = false;
      this._parentage = null;
      this._finalizers = null;
    }
    Subscription2.prototype.unsubscribe = function() {
      var e_1, _a, e_2, _b;
      var errors;
      if (!this.closed) {
        this.closed = true;
        var _parentage = this._parentage;
        if (_parentage) {
          this._parentage = null;
          if (Array.isArray(_parentage)) {
            try {
              for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {
                var parent_1 = _parentage_1_1.value;
                parent_1.remove(this);
              }
            } catch (e_1_1) {
              e_1 = { error: e_1_1 };
            } finally {
              try {
                if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return))
                  _a.call(_parentage_1);
              } finally {
                if (e_1)
                  throw e_1.error;
              }
            }
          } else {
            _parentage.remove(this);
          }
        }
        var initialFinalizer = this.initialTeardown;
        if (isFunction(initialFinalizer)) {
          try {
            initialFinalizer();
          } catch (e) {
            errors = e instanceof UnsubscriptionError ? e.errors : [e];
          }
        }
        var _finalizers = this._finalizers;
        if (_finalizers) {
          this._finalizers = null;
          try {
            for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {
              var finalizer = _finalizers_1_1.value;
              try {
                execFinalizer(finalizer);
              } catch (err) {
                errors = errors !== null && errors !== void 0 ? errors : [];
                if (err instanceof UnsubscriptionError) {
                  errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));
                } else {
                  errors.push(err);
                }
              }
            }
          } catch (e_2_1) {
            e_2 = { error: e_2_1 };
          } finally {
            try {
              if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return))
                _b.call(_finalizers_1);
            } finally {
              if (e_2)
                throw e_2.error;
            }
          }
        }
        if (errors) {
          throw new UnsubscriptionError(errors);
        }
      }
    };
    Subscription2.prototype.add = function(teardown) {
      var _a;
      if (teardown && teardown !== this) {
        if (this.closed) {
          execFinalizer(teardown);
        } else {
          if (teardown instanceof Subscription2) {
            if (teardown.closed || teardown._hasParent(this)) {
              return;
            }
            teardown._addParent(this);
          }
          (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);
        }
      }
    };
    Subscription2.prototype._hasParent = function(parent) {
      var _parentage = this._parentage;
      return _parentage === parent || Array.isArray(_parentage) && _parentage.includes(parent);
    };
    Subscription2.prototype._addParent = function(parent) {
      var _parentage = this._parentage;
      this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;
    };
    Subscription2.prototype._removeParent = function(parent) {
      var _parentage = this._parentage;
      if (_parentage === parent) {
        this._parentage = null;
      } else if (Array.isArray(_parentage)) {
        arrRemove(_parentage, parent);
      }
    };
    Subscription2.prototype.remove = function(teardown) {
      var _finalizers = this._finalizers;
      _finalizers && arrRemove(_finalizers, teardown);
      if (teardown instanceof Subscription2) {
        teardown._removeParent(this);
      }
    };
    Subscription2.EMPTY = function() {
      var empty = new Subscription2();
      empty.closed = true;
      return empty;
    }();
    return Subscription2;
  }();
  var EMPTY_SUBSCRIPTION = Subscription.EMPTY;
  function isSubscription(value) {
    return value instanceof Subscription || value && "closed" in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe);
  }
  function execFinalizer(finalizer) {
    if (isFunction(finalizer)) {
      finalizer();
    } else {
      finalizer.unsubscribe();
    }
  }

  // node_modules/rxjs/dist/esm5/internal/config.js
  var config = {
    onUnhandledError: null,
    onStoppedNotification: null,
    Promise: void 0,
    useDeprecatedSynchronousErrorHandling: false,
    useDeprecatedNextContext: false
  };

  // node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js
  var timeoutProvider = {
    setTimeout: function(handler, timeout2) {
      var args = [];
      for (var _i = 2; _i < arguments.length; _i++) {
        args[_i - 2] = arguments[_i];
      }
      var delegate = timeoutProvider.delegate;
      if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {
        return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout2], __read(args)));
      }
      return setTimeout.apply(void 0, __spreadArray([handler, timeout2], __read(args)));
    },
    clearTimeout: function(handle) {
      var delegate = timeoutProvider.delegate;
      return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);
    },
    delegate: void 0
  };

  // node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js
  function reportUnhandledError(err) {
    timeoutProvider.setTimeout(function() {
      var onUnhandledError = config.onUnhandledError;
      if (onUnhandledError) {
        onUnhandledError(err);
      } else {
        throw err;
      }
    });
  }

  // node_modules/rxjs/dist/esm5/internal/util/noop.js
  function noop() {
  }

  // node_modules/rxjs/dist/esm5/internal/NotificationFactories.js
  var COMPLETE_NOTIFICATION = function() {
    return createNotification("C", void 0, void 0);
  }();
  function errorNotification(error) {
    return createNotification("E", void 0, error);
  }
  function nextNotification(value) {
    return createNotification("N", value, void 0);
  }
  function createNotification(kind, value, error) {
    return {
      kind,
      value,
      error
    };
  }

  // node_modules/rxjs/dist/esm5/internal/util/errorContext.js
  var context = null;
  function errorContext(cb) {
    if (config.useDeprecatedSynchronousErrorHandling) {
      var isRoot = !context;
      if (isRoot) {
        context = { errorThrown: false, error: null };
      }
      cb();
      if (isRoot) {
        var _a = context, errorThrown = _a.errorThrown, error = _a.error;
        context = null;
        if (errorThrown) {
          throw error;
        }
      }
    } else {
      cb();
    }
  }
  function captureError(err) {
    if (config.useDeprecatedSynchronousErrorHandling && context) {
      context.errorThrown = true;
      context.error = err;
    }
  }

  // node_modules/rxjs/dist/esm5/internal/Subscriber.js
  var Subscriber = function(_super) {
    __extends(Subscriber2, _super);
    function Subscriber2(destination) {
      var _this = _super.call(this) || this;
      _this.isStopped = false;
      if (destination) {
        _this.destination = destination;
        if (isSubscription(destination)) {
          destination.add(_this);
        }
      } else {
        _this.destination = EMPTY_OBSERVER;
      }
      return _this;
    }
    Subscriber2.create = function(next, error, complete) {
      return new SafeSubscriber(next, error, complete);
    };
    Subscriber2.prototype.next = function(value) {
      if (this.isStopped) {
        handleStoppedNotification(nextNotification(value), this);
      } else {
        this._next(value);
      }
    };
    Subscriber2.prototype.error = function(err) {
      if (this.isStopped) {
        handleStoppedNotification(errorNotification(err), this);
      } else {
        this.isStopped = true;
        this._error(err);
      }
    };
    Subscriber2.prototype.complete = function() {
      if (this.isStopped) {
        handleStoppedNotification(COMPLETE_NOTIFICATION, this);
      } else {
        this.isStopped = true;
        this._complete();
      }
    };
    Subscriber2.prototype.unsubscribe = function() {
      if (!this.closed) {
        this.isStopped = true;
        _super.prototype.unsubscribe.call(this);
        this.destination = null;
      }
    };
    Subscriber2.prototype._next = function(value) {
      this.destination.next(value);
    };
    Subscriber2.prototype._error = function(err) {
      try {
        this.destination.error(err);
      } finally {
        this.unsubscribe();
      }
    };
    Subscriber2.prototype._complete = function() {
      try {
        this.destination.complete();
      } finally {
        this.unsubscribe();
      }
    };
    return Subscriber2;
  }(Subscription);
  var _bind = Function.prototype.bind;
  function bind(fn, thisArg) {
    return _bind.call(fn, thisArg);
  }
  var ConsumerObserver = function() {
    function ConsumerObserver2(partialObserver) {
      this.partialObserver = partialObserver;
    }
    ConsumerObserver2.prototype.next = function(value) {
      var partialObserver = this.partialObserver;
      if (partialObserver.next) {
        try {
          partialObserver.next(value);
        } catch (error) {
          handleUnhandledError(error);
        }
      }
    };
    ConsumerObserver2.prototype.error = function(err) {
      var partialObserver = this.partialObserver;
      if (partialObserver.error) {
        try {
          partialObserver.error(err);
        } catch (error) {
          handleUnhandledError(error);
        }
      } else {
        handleUnhandledError(err);
      }
    };
    ConsumerObserver2.prototype.complete = function() {
      var partialObserver = this.partialObserver;
      if (partialObserver.complete) {
        try {
          partialObserver.complete();
        } catch (error) {
          handleUnhandledError(error);
        }
      }
    };
    return ConsumerObserver2;
  }();
  var SafeSubscriber = function(_super) {
    __extends(SafeSubscriber2, _super);
    function SafeSubscriber2(observerOrNext, error, complete) {
      var _this = _super.call(this) || this;
      var partialObserver;
      if (isFunction(observerOrNext) || !observerOrNext) {
        partialObserver = {
          next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : void 0,
          error: error !== null && error !== void 0 ? error : void 0,
          complete: complete !== null && complete !== void 0 ? complete : void 0
        };
      } else {
        var context_1;
        if (_this && config.useDeprecatedNextContext) {
          context_1 = Object.create(observerOrNext);
          context_1.unsubscribe = function() {
            return _this.unsubscribe();
          };
          partialObserver = {
            next: observerOrNext.next && bind(observerOrNext.next, context_1),
            error: observerOrNext.error && bind(observerOrNext.error, context_1),
            complete: observerOrNext.complete && bind(observerOrNext.complete, context_1)
          };
        } else {
          partialObserver = observerOrNext;
        }
      }
      _this.destination = new ConsumerObserver(partialObserver);
      return _this;
    }
    return SafeSubscriber2;
  }(Subscriber);
  function handleUnhandledError(error) {
    if (config.useDeprecatedSynchronousErrorHandling) {
      captureError(error);
    } else {
      reportUnhandledError(error);
    }
  }
  function defaultErrorHandler(err) {
    throw err;
  }
  function handleStoppedNotification(notification, subscriber) {
    var onStoppedNotification = config.onStoppedNotification;
    onStoppedNotification && timeoutProvider.setTimeout(function() {
      return onStoppedNotification(notification, subscriber);
    });
  }
  var EMPTY_OBSERVER = {
    closed: true,
    next: noop,
    error: defaultErrorHandler,
    complete: noop
  };

  // node_modules/rxjs/dist/esm5/internal/symbol/observable.js
  var observable = function() {
    return typeof Symbol === "function" && Symbol.observable || "@@observable";
  }();

  // node_modules/rxjs/dist/esm5/internal/util/identity.js
  function identity4(x) {
    return x;
  }

  // node_modules/rxjs/dist/esm5/internal/util/pipe.js
  function pipeFromArray(fns) {
    if (fns.length === 0) {
      return identity4;
    }
    if (fns.length === 1) {
      return fns[0];
    }
    return function piped(input) {
      return fns.reduce(function(prev, fn) {
        return fn(prev);
      }, input);
    };
  }

  // node_modules/rxjs/dist/esm5/internal/Observable.js
  var Observable = function() {
    function Observable2(subscribe) {
      if (subscribe) {
        this._subscribe = subscribe;
      }
    }
    Observable2.prototype.lift = function(operator) {
      var observable2 = new Observable2();
      observable2.source = this;
      observable2.operator = operator;
      return observable2;
    };
    Observable2.prototype.subscribe = function(observerOrNext, error, complete) {
      var _this = this;
      var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);
      errorContext(function() {
        var _a = _this, operator = _a.operator, source = _a.source;
        subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));
      });
      return subscriber;
    };
    Observable2.prototype._trySubscribe = function(sink) {
      try {
        return this._subscribe(sink);
      } catch (err) {
        sink.error(err);
      }
    };
    Observable2.prototype.forEach = function(next, promiseCtor) {
      var _this = this;
      promiseCtor = getPromiseCtor(promiseCtor);
      return new promiseCtor(function(resolve, reject) {
        var subscriber = new SafeSubscriber({
          next: function(value) {
            try {
              next(value);
            } catch (err) {
              reject(err);
              subscriber.unsubscribe();
            }
          },
          error: reject,
          complete: resolve
        });
        _this.subscribe(subscriber);
      });
    };
    Observable2.prototype._subscribe = function(subscriber) {
      var _a;
      return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);
    };
    Observable2.prototype[observable] = function() {
      return this;
    };
    Observable2.prototype.pipe = function() {
      var operations = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        operations[_i] = arguments[_i];
      }
      return pipeFromArray(operations)(this);
    };
    Observable2.prototype.toPromise = function(promiseCtor) {
      var _this = this;
      promiseCtor = getPromiseCtor(promiseCtor);
      return new promiseCtor(function(resolve, reject) {
        var value;
        _this.subscribe(function(x) {
          return value = x;
        }, function(err) {
          return reject(err);
        }, function() {
          return resolve(value);
        });
      });
    };
    Observable2.create = function(subscribe) {
      return new Observable2(subscribe);
    };
    return Observable2;
  }();
  function getPromiseCtor(promiseCtor) {
    var _a;
    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;
  }
  function isObserver(value) {
    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);
  }
  function isSubscriber(value) {
    return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);
  }

  // node_modules/rxjs/dist/esm5/internal/util/lift.js
  function hasLift(source) {
    return isFunction(source === null || source === void 0 ? void 0 : source.lift);
  }
  function operate(init) {
    return function(source) {
      if (hasLift(source)) {
        return source.lift(function(liftedSource) {
          try {
            return init(liftedSource, this);
          } catch (err) {
            this.error(err);
          }
        });
      }
      throw new TypeError("Unable to lift unknown Observable type");
    };
  }

  // node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js
  function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {
    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);
  }
  var OperatorSubscriber = function(_super) {
    __extends(OperatorSubscriber2, _super);
    function OperatorSubscriber2(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {
      var _this = _super.call(this, destination) || this;
      _this.onFinalize = onFinalize;
      _this.shouldUnsubscribe = shouldUnsubscribe;
      _this._next = onNext ? function(value) {
        try {
          onNext(value);
        } catch (err) {
          destination.error(err);
        }
      } : _super.prototype._next;
      _this._error = onError ? function(err) {
        try {
          onError(err);
        } catch (err2) {
          destination.error(err2);
        } finally {
          this.unsubscribe();
        }
      } : _super.prototype._error;
      _this._complete = onComplete ? function() {
        try {
          onComplete();
        } catch (err) {
          destination.error(err);
        } finally {
          this.unsubscribe();
        }
      } : _super.prototype._complete;
      return _this;
    }
    OperatorSubscriber2.prototype.unsubscribe = function() {
      var _a;
      if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
        var closed_1 = this.closed;
        _super.prototype.unsubscribe.call(this);
        !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));
      }
    };
    return OperatorSubscriber2;
  }(Subscriber);

  // node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js
  var ObjectUnsubscribedError = createErrorClass(function(_super) {
    return function ObjectUnsubscribedErrorImpl() {
      _super(this);
      this.name = "ObjectUnsubscribedError";
      this.message = "object unsubscribed";
    };
  });

  // node_modules/rxjs/dist/esm5/internal/Subject.js
  var Subject = function(_super) {
    __extends(Subject2, _super);
    function Subject2() {
      var _this = _super.call(this) || this;
      _this.closed = false;
      _this.currentObservers = null;
      _this.observers = [];
      _this.isStopped = false;
      _this.hasError = false;
      _this.thrownError = null;
      return _this;
    }
    Subject2.prototype.lift = function(operator) {
      var subject = new AnonymousSubject(this, this);
      subject.operator = operator;
      return subject;
    };
    Subject2.prototype._throwIfClosed = function() {
      if (this.closed) {
        throw new ObjectUnsubscribedError();
      }
    };
    Subject2.prototype.next = function(value) {
      var _this = this;
      errorContext(function() {
        var e_1, _a;
        _this._throwIfClosed();
        if (!_this.isStopped) {
          if (!_this.currentObservers) {
            _this.currentObservers = Array.from(_this.observers);
          }
          try {
            for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {
              var observer = _c.value;
              observer.next(value);
            }
          } catch (e_1_1) {
            e_1 = { error: e_1_1 };
          } finally {
            try {
              if (_c && !_c.done && (_a = _b.return))
                _a.call(_b);
            } finally {
              if (e_1)
                throw e_1.error;
            }
          }
        }
      });
    };
    Subject2.prototype.error = function(err) {
      var _this = this;
      errorContext(function() {
        _this._throwIfClosed();
        if (!_this.isStopped) {
          _this.hasError = _this.isStopped = true;
          _this.thrownError = err;
          var observers = _this.observers;
          while (observers.length) {
            observers.shift().error(err);
          }
        }
      });
    };
    Subject2.prototype.complete = function() {
      var _this = this;
      errorContext(function() {
        _this._throwIfClosed();
        if (!_this.isStopped) {
          _this.isStopped = true;
          var observers = _this.observers;
          while (observers.length) {
            observers.shift().complete();
          }
        }
      });
    };
    Subject2.prototype.unsubscribe = function() {
      this.isStopped = this.closed = true;
      this.observers = this.currentObservers = null;
    };
    Object.defineProperty(Subject2.prototype, "observed", {
      get: function() {
        var _a;
        return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;
      },
      enumerable: false,
      configurable: true
    });
    Subject2.prototype._trySubscribe = function(subscriber) {
      this._throwIfClosed();
      return _super.prototype._trySubscribe.call(this, subscriber);
    };
    Subject2.prototype._subscribe = function(subscriber) {
      this._throwIfClosed();
      this._checkFinalizedStatuses(subscriber);
      return this._innerSubscribe(subscriber);
    };
    Subject2.prototype._innerSubscribe = function(subscriber) {
      var _this = this;
      var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;
      if (hasError || isStopped) {
        return EMPTY_SUBSCRIPTION;
      }
      this.currentObservers = null;
      observers.push(subscriber);
      return new Subscription(function() {
        _this.currentObservers = null;
        arrRemove(observers, subscriber);
      });
    };
    Subject2.prototype._checkFinalizedStatuses = function(subscriber) {
      var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;
      if (hasError) {
        subscriber.error(thrownError);
      } else if (isStopped) {
        subscriber.complete();
      }
    };
    Subject2.prototype.asObservable = function() {
      var observable2 = new Observable();
      observable2.source = this;
      return observable2;
    };
    Subject2.create = function(destination, source) {
      return new AnonymousSubject(destination, source);
    };
    return Subject2;
  }(Observable);
  var AnonymousSubject = function(_super) {
    __extends(AnonymousSubject2, _super);
    function AnonymousSubject2(destination, source) {
      var _this = _super.call(this) || this;
      _this.destination = destination;
      _this.source = source;
      return _this;
    }
    AnonymousSubject2.prototype.next = function(value) {
      var _a, _b;
      (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);
    };
    AnonymousSubject2.prototype.error = function(err) {
      var _a, _b;
      (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);
    };
    AnonymousSubject2.prototype.complete = function() {
      var _a, _b;
      (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);
    };
    AnonymousSubject2.prototype._subscribe = function(subscriber) {
      var _a, _b;
      return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;
    };
    return AnonymousSubject2;
  }(Subject);

  // node_modules/rxjs/dist/esm5/internal/operators/filter.js
  function filter(predicate, thisArg) {
    return operate(function(source, subscriber) {
      var index = 0;
      source.subscribe(createOperatorSubscriber(subscriber, function(value) {
        return predicate.call(thisArg, value, index++) && subscriber.next(value);
      }));
    });
  }

  // js/classes/game-state.ts
  var State = /* @__PURE__ */ ((State2) => {
    State2[State2["welcome"] = 0] = "welcome";
    State2[State2["playing"] = 1] = "playing";
    State2[State2["gameOver"] = 2] = "gameOver";
    State2[State2["notInVR"] = 3] = "notInVR";
    return State2;
  })(State || {});
  var GameState = class {
    stateSubject;
    isInVRSubject;
    _state = 3 /* notInVR */;
    get state() {
      return this._state;
    }
    set state(newState) {
      this._state = newState;
      this.stateSubject.next(newState);
    }
    _currentWave = 0;
    get currentWave() {
      return this._currentWave;
    }
    set currentWave(v) {
      this._currentWave = v;
    }
    _score = 0;
    get score() {
      return this._score;
    }
    set score(v) {
      this._score = v;
    }
    _isInVR = false;
    get isInVR() {
      return this._isInVR;
    }
    set isInVR(v) {
      this._isInVR = v;
      this.isInVRSubject.next(v);
    }
    constructor() {
      this.stateSubject = new Subject();
      this.isInVRSubject = new Subject();
      this.setState(3 /* notInVR */);
    }
    setState(state) {
      this.state = state;
    }
    spawnMissile = new Emitter();
    newGame = new Emitter();
    invaderHit = new Emitter();
    /**
     * Space or trigger is pressed, fire a bullet or start the game
     */
    fire(direction2, position) {
      switch (this.state) {
        case 3 /* notInVR */:
          break;
        case 0 /* welcome */:
        case 2 /* gameOver */:
          this.setState(1 /* playing */);
          this.score = 0;
          this.newGame.notify();
          break;
        case 1 /* playing */:
          this.spawnMissile.notify({ direction: direction2, position });
          globalAudioManager.playOneShot(2 /* shoot */).catch(() => {
          });
          break;
      }
    }
    hit() {
      this.score++;
      this.invaderHit.notify();
    }
    gameOver() {
      this.setState(2 /* gameOver */);
    }
  };
  var gameState = new GameState();

  // js/components/active-ad.ts
  var _ActiveAd = class extends Component {
    components;
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onStateChange(gameState.state);
      gameState.stateSubject.subscribe(this.onStateChange.bind(this));
    }
    onStateChange(newState) {
      if (newState === 2 /* gameOver */ || newState === 0 /* welcome */) {
        this.components.forEach((c) => c.active = true);
      } else {
        this.components.forEach((c) => c.active = false);
      }
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== _ActiveAd.TypeName);
      this.components = this.components.concat(comps);
    }
  };
  var ActiveAd = _ActiveAd;
  __publicField(ActiveAd, "TypeName", "active-ad");

  // js/components/active-on-state.ts
  var active_on_state_exports = {};
  __export(active_on_state_exports, {
    ActiveOnState: () => ActiveOnState
  });
  var _ActiveOnState = class extends Component {
    state = 0 /* welcome */;
    affectChildren = true;
    inactive = false;
    components;
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onStateChange(gameState.state);
      gameState.stateSubject.subscribe(this.onStateChange.bind(this));
    }
    onStateChange(newState) {
      if (newState === this.state) {
        this.components.forEach((c) => c.active = !this.inactive);
      } else {
        this.components.forEach((c) => c.active = this.inactive);
      }
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== _ActiveOnState.TypeName);
      this.components = this.components.concat(comps);
      if (this.affectChildren) {
        const children = obj.children;
        for (let i = 0; i < children.length; ++i) {
          this.getComponents(children[i]);
        }
      }
    }
  };
  var ActiveOnState = _ActiveOnState;
  __publicField(ActiveOnState, "TypeName", "active-on-state");
  __decorateClass([
    property.enum(Object.keys(State).filter((k) => isNaN(Number(k))))
  ], ActiveOnState.prototype, "state", 2);
  __decorateClass([
    property.bool(true)
  ], ActiveOnState.prototype, "affectChildren", 2);
  __decorateClass([
    property.bool(false)
  ], ActiveOnState.prototype, "inactive", 2);

  // js/components/explosion-particles.ts
  var explosion_particles_exports = {};
  __export(explosion_particles_exports, {
    ExplosionParticles: () => ExplosionParticles,
    ParticlePool: () => ParticlePool
  });
  var tempQuat22 = quat2_exports.create();
  var tempQuat4 = quat_exports.create();
  var TOTALPARTICLES = 2500;
  var ParticlePool = class {
    objects;
    pointer = 0;
    constructor(engine) {
      this.objects = engine.scene.addObjects(TOTALPARTICLES, null, TOTALPARTICLES * 3);
      for (let i = 0; i < this.objects.length; ++i) {
        const obj = this.objects[i];
        obj.scaleLocal([0, 0, 0]);
        obj.addComponent(MeshComponent);
      }
    }
    request(amount) {
      const result = [];
      for (let i = 0; i < amount; ++i) {
        result.push(this.objects[this.pointer]);
        this.pointer = (this.pointer + 1) % this.objects.length;
      }
      return result;
    }
  };
  __publicField(ParticlePool, "instance");
  var ExplosionParticles = class extends Component {
    mesh;
    material;
    maxParticles;
    initialSpeed;
    particleScale;
    size;
    time = 0;
    selfDestructCountdown = 2.5;
    /**
     * @type {number[][]}
     */
    velocities = [];
    objects = [];
    rotations = [];
    lifetime = [];
    start() {
      this.objects = ParticlePool.instance.request(this.maxParticles);
      for (let i = 0; i < this.maxParticles; i++) {
        this.velocities.push([
          (Math.random() * 2 - 1) * this.initialSpeed,
          (Math.random() * 2 - 0.5) * this.initialSpeed,
          (Math.random() * 2 - 1) * this.initialSpeed
        ]);
        this.rotations.push([
          (Math.random() * 2 - 1) * 10,
          (Math.random() * 2 - 1) * 10,
          (Math.random() * 2 - 1) * 10
        ]);
        this.lifetime.push(Math.random() * 0.5 + 1);
        this.objects[i].scaleLocal([0, 0, 0]);
      }
      for (let i = 0; i < this.maxParticles; i++) {
        const obj = this.objects[i];
        obj.resetTransform();
        obj.scaleLocal([this.particleScale, this.particleScale, this.particleScale]);
        obj.getComponent(MeshComponent).active = true;
        obj.getComponent(MeshComponent).material = this.material;
        obj.getComponent(MeshComponent).mesh = this.mesh;
        const pos = this.object.getPositionWorld();
        obj.setPositionWorld(pos);
      }
    }
    update(dt) {
      this.selfDestructCountdown -= dt;
      if (this.selfDestructCountdown < 0) {
        console.log("destroying explosion particles");
        this.destroy();
        return;
      }
      const origin = vec3_exports.fromValues(0, 0, 0);
      const distance2 = vec3_exports.fromValues(0, 0, 0);
      for (let i = 0; i < this.objects.length; ++i) {
        if (this.lifetime[i] <= 0) {
          continue;
        }
        this.objects[i].getTransformWorld(tempQuat22);
        quat2_exports.getTranslation(origin, tempQuat22);
        const rot = this.rotations[i];
        this.objects[i].getRotationWorld(tempQuat4);
        quat_exports.rotateX(tempQuat4, tempQuat4, rot[0] * dt);
        quat_exports.rotateY(tempQuat4, tempQuat4, rot[1] * dt);
        quat_exports.rotateZ(tempQuat4, tempQuat4, rot[2] * dt);
        this.objects[i].setRotationWorld(tempQuat4);
        this.lifetime[i] -= dt;
        if (this.lifetime[i] <= 0) {
          this.objects[i].scaleLocal([0, 0, 0]);
          continue;
        }
      }
      for (let i = 0; i < this.objects.length; ++i) {
        this.velocities[i][1] -= 9.81 * dt;
        vec3_exports.scale(distance2, this.velocities[i], dt);
        this.objects[i].translateWorld(distance2);
      }
    }
  };
  __publicField(ExplosionParticles, "TypeName", "explosion-particles");
  __decorateClass([
    property.mesh()
  ], ExplosionParticles.prototype, "mesh", 2);
  __decorateClass([
    property.material()
  ], ExplosionParticles.prototype, "material", 2);
  __decorateClass([
    property.int(100)
  ], ExplosionParticles.prototype, "maxParticles", 2);
  __decorateClass([
    property.float(25)
  ], ExplosionParticles.prototype, "initialSpeed", 2);
  __decorateClass([
    property.float(0.01)
  ], ExplosionParticles.prototype, "particleScale", 2);
  __decorateClass([
    property.int(16)
  ], ExplosionParticles.prototype, "size", 2);

  // js/components/game.ts
  var game_exports = {};
  __export(game_exports, {
    Game: () => Game
  });

  // js/components/missile.ts
  var missile_exports = {};
  __export(missile_exports, {
    Missile: () => Missile
  });

  // js/components/invader.ts
  var invader_exports = {};
  __export(invader_exports, {
    Invader: () => Invader
  });

  // js/classes/utils/lerp.ts
  var Easing2 = {
    /**
     * Linear easing function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns The same value as `t`, providing a linear progression.
     */
    Linear: (t) => t,
    /**
     * Quadratic ease-in function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an accelerated (quadratic) progression from 0 to 1.
     */
    InQuad: (t) => t * t,
    /**
     * Quadratic ease-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing a decelerated (quadratic) progression from 0 to 1.
     */
    OutQuad: (t) => 1 - (1 - t) * (1 - t),
    /**
     * Quadratic ease-in-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value that accelerates in, then decelerates out, providing a smooth transition between motion states.
     */
    InOutQuad: (t) => t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2,
    /**
     * Cubic ease-in function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an accelerated (cubic) progression from 0 to 1.
     */
    InCubic: (t) => Math.pow(t, 3),
    /**
     * Cubic ease-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value representing an decelerated (cubic) progression from 0 to 1.
     */
    OutCubic: (t) => Math.pow(t - 1, 3) + 1,
    /**
     * Cubic ease-in-out function.
     * @param t A value between 0 and 1 representing the progress of the animation.
     * @returns A value that accelerates in, then decelerates out, providing a smooth transition between motion states.
     */
    InOutCubic: (t) => {
      if (t < 0.5) {
        return Math.pow(2 * t, 3) / 2;
      } else {
        return (Math.pow(2 * t - 2, 3) + 2) / 2;
      }
    }
  };
  function lerp6(start, end, t, easing = Easing2.Linear) {
    if (typeof easing === "function") {
      easing = getEasingFunction2(easing);
    }
    return start * (1 - easing(t)) + end * easing(t);
  }
  function lerpVec3(out, start, end, t, easing = Easing2.Linear) {
    if (typeof easing === "function") {
      easing = getEasingFunction2(easing);
    }
    for (let i = 0; i < 3; i++) {
      out[i] = start[i] * (1 - easing(t)) + end[i] * easing(t);
    }
    return out;
  }
  function getEasingFunction2(type) {
    return typeof type === "function" ? type : Easing2.Linear;
  }

  // js/components/invader.ts
  var Invader = class extends Component {
    shardMesh;
    speed = 5;
    frequency = 2;
    breakChange = 100;
    amp = 1;
    startDist = 0;
    dir = vec3_exports.create();
    deltaFreq = 0;
    orgX = 0;
    broken = false;
    collision;
    gameOver = false;
    isShowing = false;
    timer = Math.random() * -3;
    start() {
      const pos = this.object.getPositionWorld();
      const dist2 = vec3_exports.length(pos);
      this.startDist = dist2;
      this.dir = vec3_exports.normalize(vec3_exports.create(), pos);
      this.deltaFreq = this.frequency * Math.PI * 2 / dist2;
      this.orgX = pos[0];
      gameState.stateSubject.subscribe((state) => {
        if (state === 2 /* gameOver */) {
          this.gameOver = true;
        }
      });
      this.isShowing = true;
      this.object.scaleLocal([0, 0, 0]);
    }
    hit() {
      globalAudioManager.playOneShot(0 /* explosion */).catch(() => {
      });
      const obj = this.engine.scene.addObject();
      obj.setPositionWorld(this.object.getPositionWorld());
      obj.addComponent(ExplosionParticles, {
        mesh: this.shardMesh,
        material: this.object.getComponent(MeshComponent).material,
        maxParticles: 250,
        particleScale: 1,
        size: 1,
        initialSpeed: 100
      });
      this.object.destroy();
      return;
    }
    update(dt) {
      if (this.gameOver) {
        return;
      }
      if (this.isShowing) {
        this.timer += dt;
        if (this.timer >= 0) {
          const clampTimer = clamp2(this.timer, 0, 1);
          const scaleValue = lerp6(0, 1.5, clampTimer, Easing.OutCubic);
          this.object.setScalingLocal([scaleValue, scaleValue, scaleValue]);
        }
        if (this.timer >= 1) {
          this.isShowing = false;
          this.object.setScalingLocal([1.5, 1.5, 1.5]);
        }
      }
      const deltaTime = dt * this.speed;
      const pos = this.object.getPositionWorld();
      this.orgX -= this.dir[0] * deltaTime;
      pos[1] -= this.dir[1] * deltaTime;
      pos[2] -= this.dir[2] * deltaTime;
      const currentDist = vec3_exports.length(vec3_exports.fromValues(this.orgX, pos[1], pos[2]));
      pos[0] = Math.sin(this.startDist * this.deltaFreq - this.deltaFreq * currentDist) * currentDist / 10 * this.amp + this.orgX;
      this.object.lookAt(vec3_exports.fromValues(0, 0, 0));
      this.object.setPositionWorld(pos);
      if (currentDist < 10) {
        gameState.gameOver();
      }
      if (currentDist > 10 && !this.broken) {
        if (Math.random() * 1e6 <= this.breakChange) {
          this.broken = true;
          this.speed *= 2;
          this.frequency *= 4;
          this.amp *= 5;
        }
      }
    }
  };
  __publicField(Invader, "TypeName", "invader");
  __decorateClass([
    property.mesh()
  ], Invader.prototype, "shardMesh", 2);
  __decorateClass([
    property.int(5)
  ], Invader.prototype, "speed", 2);

  // js/components/missile.ts
  var Missile = class extends Component {
    aliensParent;
    speed = 100;
    lifetime = 2;
    fired = false;
    direction = vec3_exports.create();
    velocity = vec3_exports.create();
    update(dt) {
      if (!this.fired) {
        return;
      }
      const distance2 = this.speed * dt;
      vec3_exports.scale(this.velocity, this.direction, distance2);
      const pos = this.object.getPositionWorld();
      const newPosition = vec3_exports.create();
      vec3_exports.add(newPosition, pos, this.velocity);
      this.object.setPositionWorld(newPosition);
      this.aliensParent.children.forEach((alien) => {
        const alienPos = alien.getPositionWorld();
        if (alienPos[0] !== 0 && alienPos[1] !== 0 && alienPos[2] !== 0) {
          const distance3 = vec3_exports.distance(alienPos, newPosition);
          if (distance3 < 5) {
            alien.getComponent(Invader)?.hit();
            this.end();
            gameState.hit();
            return;
          }
        }
      });
      this.lifetime -= dt;
      if (this.lifetime < 0 || newPosition[1] < -150) {
        this.end();
      }
    }
    end() {
      this.object.active = false;
      this.fired = false;
    }
    liftOff(direction2) {
      this.direction = vec3_exports.clone(direction2);
      const quaternion = quat_exports.create();
      quat_exports.rotationTo(quaternion, vec3_exports.fromValues(0, 0, -1), this.direction);
      this.object.rotateObject(quaternion);
      this.fired = true;
      this.lifetime = 2;
    }
  };
  __publicField(Missile, "TypeName", "missile");
  __decorateClass([
    property.object()
  ], Missile.prototype, "aliensParent", 2);

  // js/data/Waves.ts
  var Waves = [
    [
      [1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1],
      [2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2],
      [3, 3, 3, 3, 3, 0, 3, 3, 3, 3, 3],
      [0, 4, 4, 4, 0, 0, 0, 4, 4, 4, 0],
      [0, 4, 0, 4, 0, 0, 0, 4, 0, 4, 0]
    ],
    [
      [0, 2, 0, 0, 0, 3, 0, 0, 0, 2, 0],
      [0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0],
      [4, 6, 4, 0, 1, 7, 1, 0, 4, 6, 4],
      [2, 4, 2, 0, 3, 1, 3, 0, 2, 4, 2],
      [4, 2, 4, 0, 1, 3, 1, 0, 4, 2, 4]
    ],
    [
      [0, 0, 0, 3, 2, 1, 2, 3, 0, 0, 0],
      [0, 0, 3, 2, 1, 1, 1, 2, 3, 0, 0],
      [0, 3, 2, 1, 1, 4, 1, 1, 2, 3, 0],
      [0, 0, 3, 2, 1, 1, 1, 2, 3, 0, 0],
      [0, 0, 0, 3, 2, 1, 2, 3, 0, 0, 0]
    ],
    [
      [1, 2, 3, 4, 5, 8, 5, 4, 3, 2, 1],
      [0, 1, 2, 3, 4, 5, 4, 3, 2, 1, 0],
      [0, 0, 1, 2, 3, 4, 3, 2, 1, 0, 0],
      [0, 0, 0, 1, 2, 3, 2, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0]
    ],
    [
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [4, 0, 4, 0, 4, 0, 4, 0, 4, 0, 4],
      [0, 3, 0, 3, 0, 3, 0, 3, 0, 3, 0],
      [6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6],
      [0, 7, 0, 7, 0, 7, 0, 7, 0, 7, 0]
    ],
    [
      [0, 0, 0, 8, 0, 0, 0, 8, 0, 0, 0],
      [0, 0, 8, 6, 8, 0, 8, 6, 8, 0, 0],
      [0, 8, 6, 4, 6, 8, 6, 4, 6, 8, 0],
      [8, 6, 4, 2, 4, 6, 4, 2, 4, 6, 8],
      [6, 4, 2, 0, 2, 4, 2, 0, 2, 4, 6]
    ]
  ];

  // js/components/show-leaderboard.ts
  var show_leaderboard_exports = {};
  __export(show_leaderboard_exports, {
    ShowLeaderboard: () => ShowLeaderboard
  });
  var tempVec34 = vec3_exports.create();
  var ShowLeaderboard = class extends Component {
    originalPosition = vec3_exports.create();
    hiddenPosition = vec3_exports.create();
    timer = 0;
    isShown = true;
    start() {
      this.object.getPositionWorld(this.originalPosition);
      vec3_exports.copy(this.hiddenPosition, this.originalPosition);
      this.hiddenPosition[1] = -3.5;
    }
    show() {
      this.isShown = true;
      this.active = true;
      this.timer = 0;
    }
    hide() {
      this.isShown = false;
      this.active = true;
      this.timer = 0;
    }
    update(dt) {
      this.timer += dt;
      clamp2(this.timer, 0, 1);
      if (this.isShown) {
        lerpVec3(
          tempVec34,
          this.hiddenPosition,
          this.originalPosition,
          this.timer,
          Easing2.InCubic
        );
      } else {
        lerpVec3(
          tempVec34,
          this.originalPosition,
          this.hiddenPosition,
          this.timer,
          Easing2.OutCubic
        );
      }
      this.object.setPositionWorld(tempVec34);
      if (this.timer >= 1) {
        this.active = false;
      }
    }
  };
  __publicField(ShowLeaderboard, "TypeName", "show-leaderboard");

  // js/heyvr/heyvr-leaderboard.ts
  var heyvr_leaderboard_exports = {};
  __export(heyvr_leaderboard_exports, {
    HeyvrLeaderboard: () => HeyvrLeaderboard
  });
  var HeyvrLeaderboard = class extends Component {
    leaderboardId = "";
    amountScoresDisplayed = 10;
    lastScoreDisplay;
    textColumn1Object;
    textColumn2Object;
    textColumn3Object;
    debug = false;
    loaded = false;
    firstColumn;
    secondColumn;
    thirdColumn;
    lastScoreDisplayText;
    init() {
      this.debug = false;
      this.loaded = false;
      this.firstColumn = this.textColumn1Object.getComponent(TextComponent);
      this.secondColumn = this.textColumn2Object.getComponent(TextComponent);
      this.thirdColumn = this.textColumn3Object.getComponent(TextComponent);
      if (this.lastScoreDisplay) {
        this.lastScoreDisplayText = this.lastScoreDisplay.getComponent(TextComponent);
      }
      if ("heyVR" in window || this.debug) {
        if (!this.loaded) {
          this.loaded = true;
          this.getLeaderboard().catch(console.error);
        }
      }
    }
    async submitScore(score) {
      if (this.lastScoreDisplayText) {
        this.lastScoreDisplayText.text = "Last score: " + score;
        this.lastScoreDisplayText.active = true;
      }
      if ("heyVR" in window) {
        const success = await window.heyVR.leaderboard.postScore(
          this.leaderboardId,
          score
        );
        if (success) {
          await this.getLeaderboard();
        }
      } else if (this.debug) {
        this.firstColumn.text = "";
        this.secondColumn.text = "Loading...";
        this.thirdColumn.text = "";
        setTimeout(() => {
          this.getLeaderboard().catch(console.error);
        }, 2e3);
      }
    }
    /**
     * @summary Request an update of the leaderboard entries.
     *
     * This is already done after @ref submitScore()
     */
    async getLeaderboard() {
      if (!("heyVR" in window)) {
        return;
      }
      this.firstColumn.text = "";
      this.secondColumn.text = "Loading...";
      this.thirdColumn.text = "";
      const result = await window.heyVR.leaderboard.get(
        this.leaderboardId,
        this.amountScoresDisplayed
      );
      this.onScoresRetrieved(result);
    }
    onScoresRetrieved(scores) {
      if (scores == null) {
        console.warn("Retrieving scores failed.");
        return;
      }
      let leftText = "\n";
      let centerText = "\n";
      let rightText = "\n";
      for (let i = 0; i < Math.min(this.amountScoresDisplayed, scores.length); i++) {
        const rank = i + 1 + "\n";
        const name = (scores[i].user || "unknown") + "\n";
        const score = scores[i].score + "\n";
        leftText += rank;
        centerText += name;
        rightText += score;
      }
      this.firstColumn.text = leftText;
      this.secondColumn.text = centerText;
      this.thirdColumn.text = rightText;
    }
  };
  __publicField(HeyvrLeaderboard, "TypeName", "heyvr-leaderboard");
  __decorateClass([
    property.string("")
  ], HeyvrLeaderboard.prototype, "leaderboardId", 2);
  __decorateClass([
    property.int(10)
  ], HeyvrLeaderboard.prototype, "amountScoresDisplayed", 2);
  __decorateClass([
    property.object({ required: true })
  ], HeyvrLeaderboard.prototype, "lastScoreDisplay", 2);
  __decorateClass([
    property.object({ required: true })
  ], HeyvrLeaderboard.prototype, "textColumn1Object", 2);
  __decorateClass([
    property.object({ required: true })
  ], HeyvrLeaderboard.prototype, "textColumn2Object", 2);
  __decorateClass([
    property.object({ required: true })
  ], HeyvrLeaderboard.prototype, "textColumn3Object", 2);
  __decorateClass([
    property.bool(false)
  ], HeyvrLeaderboard.prototype, "debug", 2);

  // js/components/game.ts
  var missilePoolSize = 1e3;
  var tempVec6 = vec3_exports.create();
  var Game = class extends Component {
    nonVRCamera;
    leaderboardObject;
    scoreObject;
    prefabStoreObject;
    missilesParent;
    aliensParent;
    alien1Mesh;
    alien2Mesh;
    shardMesh;
    alienMaterial1;
    alienMaterial2;
    alienMaterial3;
    alienMaterial4;
    alienMaterial5;
    alienMaterial6;
    missileMesh;
    missileMaterial;
    particleMesh;
    particleMaterial;
    startMissilePositionObject;
    prefabStore;
    currentwave = 0;
    missilePool;
    lastShot = 0;
    invadersLeftInWave = 0;
    currentspeed = 5;
    showLeaderboardComponent;
    leaderboard;
    scoreText;
    static onRegister(engine) {
      engine.registerComponent(Missile);
      engine.registerComponent(Invader);
    }
    start() {
      Promise.all([
        globalAudioManager.load(
          ["explosion.wav", "explosion2.wav", "explosion3.wav"],
          0 /* explosion */
        ),
        globalAudioManager.load("bigExplosion.wav", 1 /* gameOver */),
        globalAudioManager.load("laserShoot.wav", 2 /* shoot */)
      ]).then(() => {
        console.log("loaded all sounds");
      }).catch((e) => console.error(e));
      ParticlePool.instance = new ParticlePool(this.engine);
      if (!this.prefabStoreObject) {
        throw new Error("prefabStoreObject is not set");
      }
      this.prefabStore = this.prefabStoreObject.getComponent(PrefabStorage);
      this.leaderboard = this.leaderboardObject.getComponent(HeyvrLeaderboard);
      this.showLeaderboardComponent = this.leaderboardObject.getComponent(ShowLeaderboard);
      this.scoreText = this.scoreObject.getComponent(TextComponent);
      this.scoreText.text = "";
      this.engine.onXRSessionStart.add(() => gameState.isInVR = true);
      this.engine.onXRSessionEnd.add(() => gameState.isInVR = false);
      gameState.spawnMissile.add((data) => {
        this.startMissilePositionObject.getPositionWorld(tempVec6);
        this.spawnMissile(data.direction, tempVec6);
      });
      gameState.newGame.add(this.newGame);
      gameState.stateSubject.pipe(filter((x) => x === 2 /* gameOver */)).subscribe(this.isGameOver.bind(this));
      gameState.isInVRSubject.subscribe((isInVR) => {
        if (isInVR) {
          console.log("enter vr");
          gameState.setState(0 /* welcome */);
        } else {
          console.log("exit vr");
          this.clearInvaders();
          this.clearMissilePool();
          this.scoreText.text = "";
          gameState.setState(3 /* notInVR */);
        }
      });
      gameState.invaderHit.add(() => {
        this.invadersLeftInWave--;
        this.scoreText.text = `${gameState.score}`;
        if (this.invadersLeftInWave === 0) {
          this.currentwave++;
          this.currentspeed++;
          if (this.currentwave >= Waves.length) {
            this.currentwave = 0;
          }
          this.invadersLeftInWave = this.spawnInvaderWave();
        }
      });
    }
    newGame = () => {
      this.showLeaderboardComponent.hide();
      this.scoreText.text = "0";
      if (!this.missilePool) {
        this.createMissilePool();
      } else {
        this.clearMissilePool();
      }
      this.currentspeed = 5;
      this.currentwave = 0;
      this.clearInvaders();
      this.invadersLeftInWave = this.spawnInvaderWave();
    };
    createMissilePool() {
      this.missilePool = this.engine.scene.addObjects(
        missilePoolSize,
        this.missilesParent,
        missilePoolSize * 3
      );
      for (let m = 0; m < missilePoolSize; m++) {
        const missile = this.missilePool[m];
        missile.name = `missile-${m}`;
        missile.addComponent(MeshComponent, {
          mesh: this.missileMesh,
          material: this.missileMaterial
        });
        missile.addComponent(Missile, {
          aliensParent: this.aliensParent
        });
        missile.active = false;
      }
    }
    clearMissilePool() {
      if (!this.missilePool || this.missilePool.length === 0) {
        return;
      }
      for (let m = 0; m < missilePoolSize; m++) {
        const missile = this.missilePool[m];
        missile.active = false;
        const missileComponent = missile.getComponent(Missile);
        missileComponent.fired = false;
      }
    }
    spawnMissile(direction2, position) {
      const missileInstance = this.missilePool[this.lastShot];
      this.lastShot++;
      if (this.lastShot > this.missilePool.length) {
        this.lastShot = 0;
      }
      if (missileInstance) {
        missileInstance.resetPositionRotation();
        missileInstance.setPositionWorld(position ?? [0, 0, 0]);
        missileInstance.active = true;
        const missile = missileInstance.getComponent(Missile);
        missile.liftOff(direction2 ?? [0, 0, -1]);
      } else {
        console.error("no missiles left, somehow");
      }
    }
    clearInvaders() {
      this.aliensParent.children.forEach((alien) => {
        alien.destroy();
      });
    }
    spawnInvaderWave() {
      let spawned = 0;
      this.engine.scene.addObjects(55, this.aliensParent, 1e3);
      for (let i = 0; i < 5; i++) {
        for (let j = 0; j < 11; j++) {
          if (Waves[this.currentwave][i][j] > 0) {
            spawned++;
            this.spawnInvader(j, i, Waves[this.currentwave][i][j]);
          }
        }
      }
      return spawned;
    }
    spawnInvader(x, y, type) {
      const rndY = -y * 25 + 150;
      const rad = ((x + 0.5) / 11 - 0.5) * (Math.PI / 1.5);
      const obj = this.engine.scene.addObject(this.aliensParent);
      const meshComponent = obj.addComponent(MeshComponent, {
        mesh: type % 2 ? this.alien2Mesh : this.alien1Mesh
      });
      switch (type) {
        case 1:
          meshComponent.material = this.alienMaterial1;
          break;
        case 2:
          meshComponent.material = this.alienMaterial2;
          break;
        case 3:
          meshComponent.material = this.alienMaterial3;
          break;
        case 4:
          meshComponent.material = this.alienMaterial4;
          break;
        case 5:
        case 6:
          meshComponent.material = this.alienMaterial5;
          break;
        case 7:
        case 8:
          meshComponent.material = this.alienMaterial6;
          break;
        default:
          meshComponent.material = this.alienMaterial1;
          break;
      }
      const position = vec3_exports.fromValues(Math.sin(rad) * 250, rndY, Math.cos(rad) * -150);
      obj.setPositionWorld(position);
      obj.lookAt(vec3_exports.fromValues(0, 0, 0));
      obj.addComponent(Invader, {
        speed: this.currentspeed,
        shardMesh: this.shardMesh
      });
    }
    isGameOver() {
      this.leaderboard.submitScore(gameState.score).catch(console.error);
      this.showLeaderboardComponent.show();
    }
  };
  __publicField(Game, "TypeName", "game");
  __decorateClass([
    property.object()
  ], Game.prototype, "nonVRCamera", 2);
  __decorateClass([
    property.object({ required: true })
  ], Game.prototype, "leaderboardObject", 2);
  __decorateClass([
    property.object({ required: true })
  ], Game.prototype, "scoreObject", 2);
  __decorateClass([
    property.object()
  ], Game.prototype, "prefabStoreObject", 2);
  __decorateClass([
    property.object()
  ], Game.prototype, "missilesParent", 2);
  __decorateClass([
    property.object()
  ], Game.prototype, "aliensParent", 2);
  __decorateClass([
    property.mesh()
  ], Game.prototype, "alien1Mesh", 2);
  __decorateClass([
    property.mesh()
  ], Game.prototype, "alien2Mesh", 2);
  __decorateClass([
    property.mesh()
  ], Game.prototype, "shardMesh", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial1", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial2", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial3", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial4", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial5", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "alienMaterial6", 2);
  __decorateClass([
    property.mesh()
  ], Game.prototype, "missileMesh", 2);
  __decorateClass([
    property.material()
  ], Game.prototype, "missileMaterial", 2);
  __decorateClass([
    property.mesh({ required: true })
  ], Game.prototype, "particleMesh", 2);
  __decorateClass([
    property.material({ required: true })
  ], Game.prototype, "particleMaterial", 2);
  __decorateClass([
    property.object({ required: true })
  ], Game.prototype, "startMissilePositionObject", 2);

  // js/components/keyboard-controls.ts
  var keyboard_controls_exports = {};
  __export(keyboard_controls_exports, {
    KeyboardControls: () => KeyboardControls
  });
  var KeyboardControls = class extends Component {
    nonVRCamera;
    missileSpawnPoint;
    spacePressed = false;
    forward = vec3_exports.create();
    onActivate() {
    }
    onDeactivate() {
    }
    pressKeyboard = (input) => {
      if (input.code == "Space" && !this.spacePressed) {
        this.spacePressed = true;
        if (this.nonVRCamera && this.missileSpawnPoint) {
          this.nonVRCamera.getForwardWorld(this.forward);
          const position = this.missileSpawnPoint.getPositionWorld();
          gameState.fire(this.forward, position);
        }
      }
    };
    releaseKeyboard = (input) => {
      if (input.code == "Space" && this.spacePressed) {
        this.spacePressed = false;
      }
    };
  };
  __publicField(KeyboardControls, "TypeName", "keyboard-controls");
  __decorateClass([
    property.object()
  ], KeyboardControls.prototype, "nonVRCamera", 2);
  __decorateClass([
    property.object()
  ], KeyboardControls.prototype, "missileSpawnPoint", 2);

  // js/components/mouse-controls.ts
  var mouse_controls_exports = {};
  __export(mouse_controls_exports, {
    MouseControls: () => MouseControls
  });
  var MouseControls = class extends Component {
    cursorTargetObject;
    mouseLookObject;
    cursorTarget;
    mouselook;
    start() {
    }
  };
  __publicField(MouseControls, "TypeName", "mouse-controls");
  __decorateClass([
    property.object()
  ], MouseControls.prototype, "cursorTargetObject", 2);
  __decorateClass([
    property.object()
  ], MouseControls.prototype, "mouseLookObject", 2);

  // js/components/vr-controls.ts
  var vr_controls_exports = {};
  __export(vr_controls_exports, {
    VrControls: () => VrControls
  });
  var handedness2 = ["left", "right"];
  var tempVec35 = vec3_exports.create();
  var VrControls = class extends Component {
    leftController;
    rightController;
    haptics = true;
    handedness = 1;
    initialized = false;
    currentlyShootingWithRight = true;
    forward = vec3_exports.create();
    start() {
      this.initialized = false;
      this.engine.onXRSessionStart.add(this.onSessionStart);
    }
    onSessionStart = (session) => {
      session.addEventListener("select", (e) => {
        if (!this.active) {
          return;
        }
        if (e.inputSource.handedness === handedness2[this.handedness]) {
          if (this.haptics) {
            this.pulse(e.inputSource.gamepad);
          }
          this.rightController.getForwardWorld(this.forward);
          this.rightController.getPositionWorld(tempVec35);
          tempVec35[1] += 0.13;
          tempVec35[2] -= 0.4;
          this.shoot(this.forward, tempVec35);
        }
      });
      this.initialized = true;
    };
    pulse(gamepad) {
      if (!gamepad || !gamepad.hapticActuators) {
        return;
      }
      const actuator = gamepad.hapticActuators[0];
      if (!actuator) {
        return;
      }
      actuator.pulse(1, 100);
    }
    shoot(transform, rotation) {
      if (gameState.state === 0 /* welcome */ || gameState.state === 2 /* gameOver */) {
        const result = this.engine.scene.rayCast(transform, rotation, 10);
        if (result && result.hitCount > 0) {
          if (result.objects[0]?.name === "ZestyAd") {
            result.objects[0].getComponent(J).onClick();
            return;
          }
        } else {
          gameState.fire(transform, rotation);
        }
      } else {
        gameState.fire(transform, rotation);
        console.log("GO!");
      }
    }
  };
  __publicField(VrControls, "TypeName", "vr-controls");
  __decorateClass([
    property.object()
  ], VrControls.prototype, "leftController", 2);
  __decorateClass([
    property.object()
  ], VrControls.prototype, "rightController", 2);
  __decorateClass([
    property.bool(true)
  ], VrControls.prototype, "haptics", 2);

  // cache/js/_editor_index.js
  _registerEditor(dist_exports);
  _registerEditor(dist_exports2);
  _registerEditor(dist_exports3);
  _registerEditor(zesty_wonderland_sdk_exports);
  _registerEditor(active_ad_exports);
  _registerEditor(active_on_state_exports);
  _registerEditor(explosion_particles_exports);
  _registerEditor(game_exports);
  _registerEditor(invader_exports);
  _registerEditor(keyboard_controls_exports);
  _registerEditor(missile_exports);
  _registerEditor(mouse_controls_exports);
  _registerEditor(show_leaderboard_exports);
  _registerEditor(vr_controls_exports);
  _registerEditor(heyvr_leaderboard_exports);
})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZWFyY3V0L3NyYy9lYXJjdXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvcHJvcGVydHkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L2RlY29yYXRvcnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL29iamVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvdXRpbHMvZXZlbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL21pc2MuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Jlc291cmNlcy9yZXNvdXJjZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvcmVzb3VyY2VzL21hdGVyaWFsLW1hbmFnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Jlc291cmNlcy9tZXNoLW1hbmFnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Jlc291cmNlcy90ZXh0dXJlLW1hbmFnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL2ZldGNoLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9jb21wb25lbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3NjZW5lLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9zY2VuZS1nbHRmLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9zY2VuZS1ncm91cC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3Qvd29uZGVybGFuZC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvdXRpbHMvbG9nZ2VyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC93YXNtLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ac29yc2tvb3Qvd29uZGVybGFuZC1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9mbGlwYm9vay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvcHJlZmFiLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ac29yc2tvb3Qvd29uZGVybGFuZC1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9wcmVmYWItc3RvcmFnZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvc2hvb3RCYXNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL2NvbW1vbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9tYXQzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vcXVhdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS92ZWMzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3ZlYzQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vcXVhdDIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3NuYXAtcm90YXRlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ac29yc2tvb3Qvd29uZGVybGFuZC1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9zbm93LXBhcnRpY2xlcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvdGFncy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L3V0aWxzL3JuZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L3V0aWxzL09iamVjdENhY2hlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ac29yc2tvb3Qvd29uZGVybGFuZC1jb21wb25lbnRzL2Rpc3QvdXRpbHMvd2xVdGlscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L3V0aWxzL2FycmF5SGVscGVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L3V0aWxzL2xlcnAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMvZGlzdC91dGlscy9xdWV1ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHNvcnNrb290L3dvbmRlcmxhbmQtY29tcG9uZW50cy9kaXN0L3V0aWxzL3JuZ1dpdGhXZWlnaHQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0Lzh0aHdhbGwtY2FtZXJhLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdXRpbHMvd2VieHIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9hbmNob3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9jdXJzb3ItdGFyZ2V0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaGl0LXRlc3QtbG9jYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9jdXJzb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9kZWJ1Zy1vYmplY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9kZXZpY2Utb3JpZW50YXRpb24tbG9vay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2Zpbmdlci1jdXJzb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9maXhlZC1mb3ZlYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9oYW5kLXRyYWNraW5nLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaG93bGVyLWF1ZGlvLWxpc3RlbmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaG93bGVyLWF1ZGlvLXNvdXJjZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3V0aWxzL3V0aWxzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaW1hZ2UtdGV4dHVyZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L21vdXNlLWxvb2suanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9wbGF5ZXItaGVpZ2h0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdGFyZ2V0LWZyYW1lcmF0ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RlbGVwb3J0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdHJhaWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC90d28tam9pbnQtaWstc29sdmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdmlkZW8tdGV4dHVyZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZyLW1vZGUtYWN0aXZlLXN3aXRjaC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3BsYW5lLWRldGVjdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZybS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3dhc2QtY29udHJvbHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9pbnB1dC1wcm9maWxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3Qvb3JiaXRhbC1jYW1lcmEuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9kaXN0L2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL3dsZS93b25kZXJsYW5kLXNwYXRpYWwtYXVkaW8vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Byb3BlcnR5LmpzIiwgIi4uLy4uLy4uLy4uL3dsZS93b25kZXJsYW5kLXNwYXRpYWwtYXVkaW8vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L2RlY29yYXRvcnMuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvdXRpbHMvb2JqZWN0LmpzIiwgIi4uLy4uLy4uLy4uL3dsZS93b25kZXJsYW5kLXNwYXRpYWwtYXVkaW8vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL2V2ZW50LmpzIiwgIi4uLy4uLy4uLy4uL3dsZS93b25kZXJsYW5kLXNwYXRpYWwtYXVkaW8vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3dvbmRlcmxhbmQuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3Qvd2FzbS5qcyIsICIuLi8uLi8uLi8uLi93bGUvd29uZGVybGFuZC1zcGF0aWFsLWF1ZGlvL2Rpc3QvYXVkaW8tbGlzdGVuZXIuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9kaXN0L2F1ZGlvLXBsYXllcnMuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9kaXN0L2F1ZGlvLW1hbmFnZXIuanMiLCAiLi4vLi4vLi4vLi4vd2xlL3dvbmRlcmxhbmQtc3BhdGlhbC1hdWRpby9kaXN0L2F1ZGlvLXNvdXJjZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi91dGlscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0Vycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy90cmFuc2l0aW9uYWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdG9Gb3JtRGF0YS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2J1aWxkRnVsbFBhdGguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VQcm90b2NvbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL251bGwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2Vudi9kYXRhLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3ZhbGlkYXRvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbFRva2VuLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvbm9kZV9tb2R1bGVzL2F4aW9zL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvdXRpbHMvbmV0d29ya2luZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHplc3R5bWFya2V0L3V0aWxzL2Zvcm1hdHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B6ZXN0eW1hcmtldC91dGlscy9oZWxwZXJzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvd29uZGVybGFuZC1zZGsvcGFja2FnZS5qc29uIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AemVzdHltYXJrZXQvd29uZGVybGFuZC1zZGsvc3JjL2luZGV4LmpzIiwgIi4uLy4uL2pzL2NvbXBvbmVudHMvYWN0aXZlLWFkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3V0aWwvY3JlYXRlRXJyb3JDbGFzcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC91dGlsL2FyclJlbW92ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9jb25maWcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3NjaGVkdWxlci90aW1lb3V0UHJvdmlkZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3V0aWwvcmVwb3J0VW5oYW5kbGVkRXJyb3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3V0aWwvbm9vcC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvTm90aWZpY2F0aW9uRmFjdG9yaWVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC91dGlsL2Vycm9yQ29udGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvU3Vic2NyaWJlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3V0aWwvaWRlbnRpdHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3V0aWwvcGlwZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvT2JzZXJ2YWJsZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvdXRpbC9saWZ0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvT3BlcmF0b3JTdWJzY3JpYmVyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9TdWJqZWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvZmlsdGVyLnRzIiwgIi4uLy4uL2pzL2NsYXNzZXMvZ2FtZS1zdGF0ZS50cyIsICIuLi8uLi9qcy9jb21wb25lbnRzL2FjdGl2ZS1vbi1zdGF0ZS50cyIsICIuLi8uLi9qcy9jb21wb25lbnRzL2V4cGxvc2lvbi1wYXJ0aWNsZXMudHMiLCAiLi4vLi4vanMvY29tcG9uZW50cy9nYW1lLnRzIiwgIi4uLy4uL2pzL2NvbXBvbmVudHMvbWlzc2lsZS50cyIsICIuLi8uLi9qcy9jb21wb25lbnRzL2ludmFkZXIudHMiLCAiLi4vLi4vanMvY2xhc3Nlcy91dGlscy9sZXJwLnRzIiwgIi4uLy4uL2pzL2RhdGEvV2F2ZXMudHMiLCAiLi4vLi4vanMvY29tcG9uZW50cy9zaG93LWxlYWRlcmJvYXJkLnRzIiwgIi4uLy4uL2pzL2hleXZyL2hleXZyLWxlYWRlcmJvYXJkLnRzIiwgIi4uLy4uL2pzL2NvbXBvbmVudHMva2V5Ym9hcmQtY29udHJvbHMudHMiLCAiLi4vLi4vanMvY29tcG9uZW50cy9tb3VzZS1jb250cm9scy50cyIsICIuLi8uLi9qcy9jb21wb25lbnRzL3ZyLWNvbnRyb2xzLnRzIiwgIl9lZGl0b3JfaW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qIVxuICogIGhvd2xlci5qcyB2Mi4yLjRcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGdsb2JhbCBjb250cm9sbGVyLiBBbGwgY29udGFpbmVkIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgYXBwbHlcbiAgICogdG8gYWxsIHNvdW5kcyB0aGF0IGFyZSBjdXJyZW50bHkgcGxheWluZyBvciB3aWxsIGJlIGluIHRoZSBmdXR1cmUuXG4gICAqL1xuICB2YXIgSG93bGVyR2xvYmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gQ3JlYXRlIGEgZ2xvYmFsIElEIGNvdW50ZXIuXG4gICAgICBzZWxmLl9jb3VudGVyID0gMTAwMDtcblxuICAgICAgLy8gUG9vbCBvZiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3RzLlxuICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wgPSBbXTtcbiAgICAgIHNlbGYuaHRtbDVQb29sU2l6ZSA9IDEwO1xuXG4gICAgICAvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fY29kZWNzID0ge307XG4gICAgICBzZWxmLl9ob3dscyA9IFtdO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IDE7XG4gICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheXRocm91Z2gnO1xuICAgICAgc2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcbiAgICAgIHNlbGYubm9BdWRpbyA9IGZhbHNlO1xuICAgICAgc2VsZi51c2luZ1dlYkF1ZGlvID0gdHJ1ZTtcbiAgICAgIHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xuICAgICAgc2VsZi5jdHggPSBudWxsO1xuXG4gICAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBhdWRpbyB1bmxvY2tlci5cbiAgICAgIHNlbGYuYXV0b1VubG9jayA9IHRydWU7XG5cbiAgICAgIC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAgc2VsZi5fc2V0dXAoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGdsb2JhbCB2b2x1bWUgZm9yIGFsbCBzb3VuZHMuXG4gICAgICogQHBhcmFtICB7RmxvYXR9IHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZvbCA9IHBhcnNlRmxvYXQodm9sKTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIGFueSBvZiB0aGUgbm9kZXMgaWYgd2UgYXJlIG11dGVkLlxuICAgICAgICBpZiAoc2VsZi5fbXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW5kIGNoYW5nZSB2b2x1bWUgZm9yIGFsbCBIVE1MNSBhdWRpbyBub2Rlcy5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGFuZ2UgdGhlIHZvbHVtZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogdm9sO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtdXRpbmcgYW5kIHVubXV0aW5nIGdsb2JhbGx5LlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIElzIG11dGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgIC8vIFdpdGggV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gbXV0ZSB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNlbGYuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgbXV0ZSBhbGwgSFRNTDUgQXVkaW8gbm9kZXMuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBtYXJrIHRoZSBhdWRpbyBub2RlIGFzIG11dGVkLlxuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gKG11dGVkKSA/IHRydWUgOiBzb3VuZC5fbXV0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgc3RvcHBpbmcgYWxsIHNvdW5kcyBnbG9iYWxseS5cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHN0b3AgdGhlbS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS5zdG9wKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgYWxsIGN1cnJlbnRseSBsb2FkZWQgSG93bCBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIHNlbGYuX2hvd2xzW2ldLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHRvIG1ha2Ugc3VyZSBpdCBpcyBmdWxseSByZXNldC5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8gJiYgc2VsZi5jdHggJiYgdHlwZW9mIHNlbGYuY3R4LmNsb3NlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5jbG9zZSgpO1xuICAgICAgICBzZWxmLmN0eCA9IG51bGw7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgY29kZWMgc3VwcG9ydCBvZiBzcGVjaWZpYyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBleHQgQXVkaW8gZmlsZSBleHRlbnRpb24uXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb2RlY3M6IGZ1bmN0aW9uKGV4dCkge1xuICAgICAgcmV0dXJuICh0aGlzIHx8IEhvd2xlcikuX2NvZGVjc1tleHQucmVwbGFjZSgvXngtLywgJycpXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBzdXNwZW5kL3Jlc3VtZSBzdGF0ZSBvZiB0aGUgQXVkaW9Db250ZXh0LlxuICAgICAgc2VsZi5zdGF0ZSA9IHNlbGYuY3R4ID8gc2VsZi5jdHguc3RhdGUgfHwgJ3N1c3BlbmRlZCcgOiAnc3VzcGVuZGVkJztcblxuICAgICAgLy8gQXV0b21hdGljYWxseSBiZWdpbiB0aGUgMzAtc2Vjb25kIHN1c3BlbmQgcHJvY2Vzc1xuICAgICAgc2VsZi5fYXV0b1N1c3BlbmQoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYXVkaW8gaXMgYXZhaWxhYmxlLlxuICAgICAgaWYgKCFzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgLy8gTm8gYXVkaW8gaXMgYXZhaWxhYmxlIG9uIHRoaXMgc3lzdGVtIGlmIG5vQXVkaW8gaXMgc2V0IHRvIHRydWUuXG4gICAgICAgIGlmICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYW5wbGF5dGhyb3VnaCBldmVudCBpcyBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlc3Qub25jYW5wbGF5dGhyb3VnaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IHRvIG1ha2Ugc3VyZSBhdWRpbyBpc24ndCBkaXNhYmxlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgIGlmICh0ZXN0Lm11dGVkKSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRlZCBjb2RlY3MuXG4gICAgICBpZiAoIXNlbGYubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9zZXR1cENvZGVjcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGJyb3dzZXIgc3VwcG9ydCBmb3IgdmFyaW91cyBjb2RlY3MgYW5kIGNhY2hlIHRoZSByZXN1bHRzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXBDb2RlY3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZhciBhdWRpb1Rlc3QgPSBudWxsO1xuXG4gICAgICAvLyBNdXN0IHdyYXAgaW4gYSB0cnkvY2F0Y2ggYmVjYXVzZSBJRTExIGluIHNlcnZlciBtb2RlIHRocm93cyBhbiBlcnJvci5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF1ZGlvVGVzdCA9ICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSA/IG5ldyBBdWRpbygpIDogbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhdWRpb1Rlc3QgfHwgdHlwZW9mIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1wZWdUZXN0ID0gYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcGVnOycpLnJlcGxhY2UoL15ubyQvLCAnJyk7XG5cbiAgICAgIC8vIE9wZXJhIHZlcnNpb24gPDMzIGhhcyBtaXhlZCBNUDMgc3VwcG9ydCwgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgYW5kIGJsb2NrIGl0LlxuICAgICAgdmFyIHVhID0gc2VsZi5fbmF2aWdhdG9yID8gc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuICAgICAgdmFyIGNoZWNrT3BlcmEgPSB1YS5tYXRjaCgvT1BSXFwvKFxcZCspL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcbiAgICAgIHZhciBjaGVja1NhZmFyaSA9IHVhLmluZGV4T2YoJ1NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTE7XG4gICAgICB2YXIgc2FmYXJpVmVyc2lvbiA9IHVhLm1hdGNoKC9WZXJzaW9uXFwvKC4qPykgLyk7XG4gICAgICB2YXIgaXNPbGRTYWZhcmkgPSAoY2hlY2tTYWZhcmkgJiYgc2FmYXJpVmVyc2lvbiAmJiBwYXJzZUludChzYWZhcmlWZXJzaW9uWzFdLCAxMCkgPCAxNSk7XG5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHtcbiAgICAgICAgbXAzOiAhISghaXNPbGRPcGVyYSAmJiAobXBlZ1Rlc3QgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDM7JykucmVwbGFjZSgvXm5vJC8sICcnKSkpLFxuICAgICAgICBtcGVnOiAhIW1wZWdUZXN0LFxuICAgICAgICBvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdhdjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz1cIjFcIicpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGFhYzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBjYWY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWNhZjsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGE6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJhOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICB3ZWJtOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICBkb2xieTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsgY29kZWNzPVwiZWMtM1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZmxhYzogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWZsYWM7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9mbGFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU29tZSBicm93c2Vycy9kZXZpY2VzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIEF0dGVtcHQgdG8gYXV0b21hdGljYWxseSB1bmxvY2sgYXVkaW8gb24gdGhlIGZpcnN0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ29uY2VwdCBmcm9tOiBodHRwOi8vcGF1bGJha2F1cy5jb20vdHV0b3JpYWxzL2h0bWw1L3dlYi1hdWRpby1vbi1pb3MvXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF91bmxvY2tBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBPbmx5IHJ1biB0aGlzIGlmIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQgYW5kIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoc2VsZi5fYXVkaW9VbmxvY2tlZCB8fCAhc2VsZi5jdHgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gZmFsc2U7XG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU29tZSBtb2JpbGUgZGV2aWNlcy9wbGF0Zm9ybXMgaGF2ZSBkaXN0b3J0aW9uIGlzc3VlcyB3aGVuIG9wZW5pbmcvY2xvc2luZyB0YWJzIGFuZC9vciB3ZWIgdmlld3MuXG4gICAgICAvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cbiAgICAgIC8vIEJ5IGNhbGxpbmcgSG93bGVyLnVubG9hZCgpLCB3ZSBjcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHdpdGggdGhlIGNvcnJlY3Qgc2FtcGxlUmF0ZS5cbiAgICAgIGlmICghc2VsZi5fbW9iaWxlVW5sb2FkZWQgJiYgc2VsZi5jdHguc2FtcGxlUmF0ZSAhPT0gNDQxMDApIHtcbiAgICAgICAgc2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhdGNoIGJ1ZmZlciBmb3IgZW5hYmxpbmcgaU9TIHRvIGRpc3Bvc2Ugb2Ygd2ViIGF1ZGlvIGJ1ZmZlcnMgY29ycmVjdGx5LCBhcyBwZXI6XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MTE5Njg0XG4gICAgICBzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcblxuICAgICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCBvbiB0b3VjaCBzdGFydCB0byBjcmVhdGUgYW5kIHBsYXkgYSBidWZmZXIsXG4gICAgICAvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICAvLyBhdWRpbyBoYXMgbm93IGJlZW4gdW5sb2NrZWQgb24gaU9TLCBBbmRyb2lkLCBldGMuXG4gICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBDcmVhdGUgYSBwb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMgdGhhdCBjYW5cbiAgICAgICAgLy8gYmUgdXNlZCBmb3IgcGxheWluZyBzb3VuZHMgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLiBIVE1MNVxuICAgICAgICAvLyBBdWRpbyBvYmplY3RzIG11c3QgYmUgaW5kaXZpZHVhbGx5IHVubG9ja2VkLCBhcyBvcHBvc2VkXG4gICAgICAgIC8vIHRvIHRoZSBXZWJBdWRpbyBBUEkgd2hpY2ggb25seSBuZWVkcyBhIHNpbmdsZSBhY3RpdmF0aW9uLlxuICAgICAgICAvLyBUaGlzIG11c3Qgb2NjdXIgYmVmb3JlIFdlYkF1ZGlvIHNldHVwIG9yIHRoZSBzb3VyY2Uub25lbmRlZFxuICAgICAgICAvLyBldmVudCB3aWxsIG5vdCBmaXJlLlxuICAgICAgICB3aGlsZSAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoIDwgc2VsZi5odG1sNVBvb2xTaXplKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhdWRpb05vZGUgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gTWFyayB0aGlzIEF1ZGlvIG9iamVjdCBhcyB1bmxvY2tlZCB0byBlbnN1cmUgaXQgY2FuIGdldCByZXR1cm5lZFxuICAgICAgICAgICAgLy8gdG8gdGhlIHVubG9ja2VkIHBvb2wgd2hlbiByZWxlYXNlZC5cbiAgICAgICAgICAgIGF1ZGlvTm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGF1ZGlvIG5vZGUgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgICBzZWxmLl9yZWxlYXNlSHRtbDVBdWRpbyhhdWRpb05vZGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW55IGFzc2lnbmVkIGF1ZGlvIG5vZGVzIGFuZCB1bmxvY2sgdGhlbS5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCB1bmxvY2sgdGhlIGF1ZGlvIG5vZGVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5fdW5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmxvYWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpeCBBbmRyb2lkIGNhbiBub3QgcGxheSBpbiBzdXNwZW5kIHN0YXRlLlxuICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3Qoc2VsZi5jdHguZGVzdGluYXRpb24pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsaW5nIHJlc3VtZSgpIG9uIGEgc3RhY2sgaW5pdGlhdGVkIGJ5IHVzZXIgZ2VzdHVyZSBpcyB3aGF0IGFjdHVhbGx5IHVubG9ja3MgdGhlIGF1ZGlvIG9uIEFuZHJvaWQgQ2hyb21lID49IDU1LlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXG4gICAgICAgIHNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc291cmNlLmRpc2Nvbm5lY3QoMCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW4uXG4gICAgICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRvdWNoIHN0YXJ0IGxpc3RlbmVyLlxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBMZXQgYWxsIHNvdW5kcyBrbm93IHRoYXQgYXVkaW8gaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgndW5sb2NrJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0IGZyb20gdGhlIHBvb2wuIElmIG5vbmUgYXJlIGxlZnQsXG4gICAgICogcmV0dXJuIGEgbmV3IEF1ZGlvIG9iamVjdCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAqIEByZXR1cm4ge0F1ZGlvfSBIVE1MNSBBdWRpbyBvYmplY3QuXG4gICAgICovXG4gICAgX29idGFpbkh0bWw1QXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gUmV0dXJuIHRoZSBuZXh0IG9iamVjdCBmcm9tIHRoZSBwb29sIGlmIG9uZSBleGlzdHMuXG4gICAgICBpZiAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wb3AoKTtcbiAgICAgIH1cblxuICAgICAgLy8uQ2hlY2sgaWYgdGhlIGF1ZGlvIGlzIGxvY2tlZCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAgdmFyIHRlc3RQbGF5ID0gbmV3IEF1ZGlvKCkucGxheSgpO1xuICAgICAgaWYgKHRlc3RQbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAodGVzdFBsYXkgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHR5cGVvZiB0ZXN0UGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICB0ZXN0UGxheS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0hUTUw1IEF1ZGlvIHBvb2wgZXhoYXVzdGVkLCByZXR1cm5pbmcgcG90ZW50aWFsbHkgbG9ja2VkIGF1ZGlvIG9iamVjdC4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQXVkaW8oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGFjdGl2YXRlZCBIVE1MNSBBdWRpbyBvYmplY3QgdG8gdGhlIHBvb2wuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9yZWxlYXNlSHRtbDVBdWRpbzogZnVuY3Rpb24oYXVkaW8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIERvbid0IGFkZCBhdWRpbyB0byB0aGUgcG9vbCBpZiB3ZSBkb24ndCBrbm93IGlmIGl0IGhhcyBiZWVuIHVubG9ja2VkLlxuICAgICAgaWYgKGF1ZGlvLl91bmxvY2tlZCkge1xuICAgICAgICBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc3VzcGVuZCB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCBhZnRlciBubyBzb3VuZCBoYXMgcGxheWVkIGZvciAzMCBzZWNvbmRzLlxuICAgICAqIFRoaXMgc2F2ZXMgcHJvY2Vzc2luZy9lbmVyZ3kgYW5kIGZpeGVzIHZhcmlvdXMgYnJvd3Nlci1zcGVjaWZpYyBidWdzIHdpdGggYXVkaW8gZ2V0dGluZyBzdHVjay5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9TdXNwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kIHx8ICFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHguc3VzcGVuZCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IHNvdW5kcyBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHNlbGYuX2hvd2xzW2ldLl9zb3VuZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3NvdW5kc1tqXS5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBzb3VuZCBoYXMgcGxheWVkIGFmdGVyIDMwIHNlY29uZHMsIHN1c3BlbmQgdGhlIGNvbnRleHQuXG4gICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRpbmcnO1xuXG4gICAgICAgIC8vIEhhbmRsZSB1cGRhdGluZyB0aGUgc3RhdGUgb2YgdGhlIGF1ZGlvIGNvbnRleHQgYWZ0ZXIgc3VzcGVuZGluZy5cbiAgICAgICAgdmFyIGhhbmRsZVN1c3BlbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRlZCc7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kKSB7XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kO1xuICAgICAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFaXRoZXIgdGhlIHN0YXRlIGdldHMgc3VzcGVuZGVkIG9yIGl0IGlzIGludGVycnVwdGVkLlxuICAgICAgICAvLyBFaXRoZXIgd2F5LCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc3RhdGUgdG8gc3VzcGVuZGVkLlxuICAgICAgICBzZWxmLmN0eC5zdXNwZW5kKCkudGhlbihoYW5kbGVTdXNwZW5zaW9uLCBoYW5kbGVTdXNwZW5zaW9uKTtcbiAgICAgIH0sIDMwMDAwKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzdW1lIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IHdoZW4gYSBuZXcgc291bmQgaXMgcGxheWVkLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1Jlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSAhPT0gJ2ludGVycnVwdGVkJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnIHx8IHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSA9PT0gJ2ludGVycnVwdGVkJykge1xuICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAncnVubmluZyc7XG5cbiAgICAgICAgICAvLyBFbWl0IHRvIGFsbCBIb3dscyB0aGF0IHRoZSBhdWRpbyBoYXMgcmVzdW1lZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kaW5nJykge1xuICAgICAgICBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sbGVyLlxuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbCgpO1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXVkaW8gZ3JvdXAgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAqL1xuICB2YXIgSG93bCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBubyBzb3VyY2UgaXMgcHJvdmlkZWQuXG4gICAgaWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGFycmF5IG9mIHNvdXJjZSBmaWxlcyBtdXN0IGJlIHBhc3NlZCB3aXRoIGFueSBuZXcgSG93bC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxmLmluaXQobyk7XG4gIH07XG4gIEhvd2wucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fZm9ybWF0ID0gKHR5cGVvZiBvLmZvcm1hdCAhPT0gJ3N0cmluZycpID8gby5mb3JtYXQgOiBbby5mb3JtYXRdO1xuICAgICAgc2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBvLm11dGUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9sb29wID0gby5sb29wIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xuICAgICAgc2VsZi5fcHJlbG9hZCA9ICh0eXBlb2Ygby5wcmVsb2FkID09PSAnYm9vbGVhbicgfHwgby5wcmVsb2FkID09PSAnbWV0YWRhdGEnKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgICBzZWxmLl94aHIgPSB7XG4gICAgICAgIG1ldGhvZDogby54aHIgJiYgby54aHIubWV0aG9kID8gby54aHIubWV0aG9kIDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IG8ueGhyICYmIG8ueGhyLmhlYWRlcnMgPyBvLnhoci5oZWFkZXJzIDogbnVsbCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBvLnhociAmJiBvLnhoci53aXRoQ3JlZGVudGlhbHMgPyBvLnhoci53aXRoQ3JlZGVudGlhbHMgOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGFsbCBvdGhlciBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IDA7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYuX2VuZFRpbWVycyA9IHt9O1xuICAgICAgc2VsZi5fcXVldWUgPSBbXTtcbiAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uZW5kID0gby5vbmVuZCA/IFt7Zm46IG8ub25lbmR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25mYWRlID0gby5vbmZhZGUgPyBbe2ZuOiBvLm9uZmFkZX1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWQgPSBvLm9ubG9hZCA/IFt7Zm46IG8ub25sb2FkfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZGVycm9yID0gby5vbmxvYWRlcnJvciA/IFt7Zm46IG8ub25sb2FkZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ZXJyb3IgPSBvLm9ucGxheWVycm9yID8gW3tmbjogby5vbnBsYXllcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBhdXNlID0gby5vbnBhdXNlID8gW3tmbjogby5vbnBhdXNlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheSA9IG8ub25wbGF5ID8gW3tmbjogby5vbnBsYXl9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zdG9wID0gby5vbnN0b3AgPyBbe2ZuOiBvLm9uc3RvcH1dIDogW107XG4gICAgICBzZWxmLl9vbm11dGUgPSBvLm9ubXV0ZSA/IFt7Zm46IG8ub25tdXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udm9sdW1lID0gby5vbnZvbHVtZSA/IFt7Zm46IG8ub252b2x1bWV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yYXRlID0gby5vbnJhdGUgPyBbe2ZuOiBvLm9ucmF0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnNlZWsgPSBvLm9uc2VlayA/IFt7Zm46IG8ub25zZWVrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udW5sb2NrID0gby5vbnVubG9jayA/IFt7Zm46IG8ub251bmxvY2t9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yZXN1bWUgPSBbXTtcblxuICAgICAgLy8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xuICAgICAgc2VsZi5fd2ViQXVkaW8gPSBIb3dsZXIudXNpbmdXZWJBdWRpbyAmJiAhc2VsZi5faHRtbDU7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpby5cbiAgICAgIGlmICh0eXBlb2YgSG93bGVyLmN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eCAmJiBIb3dsZXIuYXV0b1VubG9jaykge1xuICAgICAgICBIb3dsZXIuX3VubG9ja0F1ZGlvKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhpcyBIb3dsIGdyb3VwIGluIHRoZSBnbG9iYWwgY29udHJvbGxlci5cbiAgICAgIEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gSWYgdGhleSBzZWxlY3RlZCBhdXRvcGxheSwgYWRkIGEgcGxheSBldmVudCB0byB0aGUgbG9hZCBxdWV1ZS5cbiAgICAgIGlmIChzZWxmLl9hdXRvcGxheSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICAgIGlmIChzZWxmLl9wcmVsb2FkICYmIHNlbGYuX3ByZWxvYWQgIT09ICdub25lJykge1xuICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGF1ZGlvIGZpbGUuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIElmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseS5cbiAgICAgIGlmIChIb3dsZXIubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gYXVkaW8gc3VwcG9ydC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgb3VyIHNvdXJjZSBpcyBpbiBhbiBhcnJheS5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgICBzZWxmLl9zcmMgPSBbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzb3VyY2VzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCBzdHI7XG5cbiAgICAgICAgaWYgKHNlbGYuX2Zvcm1hdCAmJiBzZWxmLl9mb3JtYXRbaV0pIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHRlbnNpb24gd2FzIHNwZWNpZmllZCwgdXNlIHRoYXQgaW5zdGVhZC5cbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXRbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcuXG4gICAgICAgICAgc3RyID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vbi1zdHJpbmcgZm91bmQgaW4gc2VsZWN0ZWQgYXVkaW8gc291cmNlcyAtIGlnbm9yaW5nLicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cbiAgICAgICAgICBleHQgPSAvXmRhdGE6YXVkaW9cXC8oW147LF0rKTsvaS5leGVjKHN0cik7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgZXh0ID0gZXh0WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9nIGEgd2FybmluZyBpZiBubyBleHRlbnNpb24gd2FzIGZvdW5kLlxuICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTm8gZmlsZSBleHRlbnNpb24gd2FzIGZvdW5kLiBDb25zaWRlciB1c2luZyB0aGUgXCJmb3JtYXRcIiBwcm9wZXJ0eSBvciBzcGVjaWZ5IGFuIGV4dGVuc2lvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZXh0ZW5zaW9uIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKGV4dCAmJiBIb3dsZXIuY29kZWNzKGV4dCkpIHtcbiAgICAgICAgICB1cmwgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGNvZGVjIHN1cHBvcnQgZm9yIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fc3JjID0gdXJsO1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgIC8vIElmIHRoZSBob3N0aW5nIHBhZ2UgaXMgSFRUUFMgYW5kIHRoZSBzb3VyY2UgaXNuJ3QsXG4gICAgICAvLyBkcm9wIGRvd24gdG8gSFRNTDUgQXVkaW8gdG8gYXZvaWQgTWl4ZWQgQ29udGVudCBlcnJvcnMuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwOicpIHtcbiAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgc291bmQgb2JqZWN0IGFuZCBhZGQgaXQgdG8gdGhlIHBvb2wuXG4gICAgICBuZXcgU291bmQoc2VsZik7XG5cbiAgICAgIC8vIExvYWQgYW5kIGRlY29kZSB0aGUgYXVkaW8gZGF0YSBmb3IgcGxheWJhY2suXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgbG9hZEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBsYXkgYSBzb3VuZCBvciByZXN1bWUgcHJldmlvdXMgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7U3RyaW5nL051bWJlcn0gc3ByaXRlICAgU3ByaXRlIG5hbWUgZm9yIHNwcml0ZSBwbGF5YmFjayBvciBzb3VuZCBpZCB0byBjb250aW51ZSBwcmV2aW91cy5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgU291bmQgSUQuXG4gICAgICovXG4gICAgcGxheTogZnVuY3Rpb24oc3ByaXRlLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlkID0gbnVsbDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgc3ByaXRlLCBzb3VuZCBpZCBvciBub3RoaW5nIHdhcyBwYXNzZWRcbiAgICAgIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IHNwcml0ZTtcbiAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xuICAgICAgICAvLyBJZiB0aGUgcGFzc2VkIHNwcml0ZSBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IHNvdW5kIHNwcml0ZSAocGxheXMgdGhlIGZ1bGwgYXVkaW8gbGVuZ3RoKS5cbiAgICAgICAgc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBzaW5nbGUgcGF1c2VkIHNvdW5kIHRoYXQgaXNuJ3QgZW5kZWQuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzLCBwbGF5IHRoYXQgc291bmQuIElmIG5vdCwgY29udGludWUgYXMgdXN1YWwuXG4gICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICB2YXIgbnVtID0gMDtcbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9wYXVzZWQgJiYgIXNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAgICAgbnVtKys7XG4gICAgICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzW2ldLl9pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobnVtID09PSAxKSB7XG4gICAgICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgbm9kZSwgb3IgZ2V0IG9uZSBmcm9tIHRoZSBwb29sLlxuICAgICAgdmFyIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5faW5hY3RpdmVTb3VuZCgpO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgIGlmICghc291bmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAoaWQgJiYgIXNwcml0ZSkge1xuICAgICAgICBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlIHx8ICdfX2RlZmF1bHQnO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgd2UgbXVzdCB3YWl0IHRvIGdldCB0aGUgYXVkaW8ncyBkdXJhdGlvbi5cbiAgICAgIC8vIFdlIGFsc28gbmVlZCB0byB3YWl0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBydW4gaW50byByYWNlIGNvbmRpdGlvbnMgd2l0aFxuICAgICAgLy8gdGhlIG9yZGVyIG9mIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICAvLyBTZXQgdGhlIHNwcml0ZSB2YWx1ZSBvbiB0aGlzIHNvdW5kLlxuICAgICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIC8vIE1hcmsgdGhpcyBzb3VuZCBhcyBub3QgZW5kZWQgaW4gY2FzZSBhbm90aGVyIHNvdW5kIGlzIHBsYXllZCBiZWZvcmUgdGhpcyBvbmUgbG9hZHMuXG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgc291bmQgdG8gdGhlIHF1ZXVlIHRvIGJlIHBsYXllZCBvbiBsb2FkLlxuICAgICAgICB2YXIgc291bmRJZCA9IHNvdW5kLl9pZDtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KHNvdW5kSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgIGlmIChpZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwbGF5IGV2ZW50LCBpbiBvcmRlciB0byBrZWVwIGl0ZXJhdGluZyB0aHJvdWdoIHF1ZXVlLlxuICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCdwbGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEF1ZGlvQ29udGV4dCBpc24ndCBzdXNwZW5kZWQsIGFuZCByZXN1bWUgaXQgaWYgaXQgaXMuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgSG93bGVyLl9hdXRvUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cbiAgICAgIHZhciBzZWVrID0gTWF0aC5tYXgoMCwgc291bmQuX3NlZWsgPiAwID8gc291bmQuX3NlZWsgOiBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDApO1xuICAgICAgdmFyIGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgKChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDApIC0gc2Vlayk7XG4gICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgdmFyIHN0YXJ0ID0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwO1xuICAgICAgdmFyIHN0b3AgPSAoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwO1xuICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgLy8gTWFyayB0aGUgc291bmQgYXMgZW5kZWQgaW5zdGFudGx5IHNvIHRoYXQgdGhpcyBhc3luYyBwbGF5YmFja1xuICAgICAgLy8gZG9lc24ndCBnZXQgZ3JhYmJlZCBieSBhbm90aGVyIGNhbGwgdG8gcGxheSB3aGlsZSB0aGlzIG9uZSB3YWl0cyB0byBzdGFydC5cbiAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNldFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgc291bmQuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHNvdW5kLl9zdG9wID0gc3RvcDtcbiAgICAgICAgc291bmQuX2xvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBFbmQgdGhlIHNvdW5kIGluc3RhbnRseSBpZiBzZWVrIGlzIGF0IHRoZSBlbmQuXG4gICAgICBpZiAoc2VlayA+PSBzdG9wKSB7XG4gICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgIHNlbGYuX3JlZnJlc2hCdWZmZXIoc291bmQpO1xuXG4gICAgICAgICAgLy8gU2V0dXAgdGhlIHBsYXliYWNrIHBhcmFtcy5cbiAgICAgICAgICB2YXIgdm9sID0gKHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCkgPyAwIDogc291bmQuX3ZvbHVtZTtcbiAgICAgICAgICBub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICAgIC8vIFBsYXkgdGhlIHNvdW5kIHVzaW5nIHRoZSBzdXBwb3J0ZWQgbWV0aG9kLlxuICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RhcnQgYSBuZXcgdGltZXIgaWYgbm9uZSBpcyBwcmVzZW50LlxuICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKEhvd2xlci5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIEhvd2xlci5jdHguc3RhdGUgIT09ICdpbnRlcnJ1cHRlZCcpIHtcbiAgICAgICAgICBwbGF5V2ViQXVkaW8oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgYXVkaW8gY29udGV4dCB0byByZXN1bWUgYmVmb3JlIHBsYXlpbmcuXG4gICAgICAgICAgc2VsZi5vbmNlKCdyZXN1bWUnLCBwbGF5V2ViQXVkaW8pO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgLy8gU29tZSBicm93c2VycyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoaXMgaXMgY2FsbGVkIHdpdGhvdXQgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHBsYXkgPSBub2RlLnBsYXkoKTtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBvbGRlciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJvbWlzZXMsIGFuZCB0aHVzIGRvbid0IGhhdmUgdGhpcyBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChwbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAocGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgICAgLy8gSW1wbGVtZW50cyBhIGxvY2sgdG8gcHJldmVudCBET01FeGNlcHRpb246IFRoZSBwbGF5KCkgcmVxdWVzdCB3YXMgaW50ZXJydXB0ZWQgYnkgYSBjYWxsIHRvIHBhdXNlKCkuXG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAvLyBTZXQgcGFyYW0gdmFsdWVzIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcblxuICAgICAgICAgICAgICAvLyBSZWxlYXNlcyB0aGUgbG9jayBhbmQgZXhlY3V0ZXMgcXVldWVkIGFjdGlvbnMuXG4gICAgICAgICAgICAgIHBsYXlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBub2RlLl91bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlbmRlZCBhbmQgcGF1c2VkIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dGluZyByYXRlIGJlZm9yZSBwbGF5aW5nIHdvbid0IHdvcmsgaW4gSUUsIHNvIHdlIHNldCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgc3RpbGwgcGF1c2VkLCB0aGVuIHdlIGNhbiBhc3N1bWUgdGhlcmUgd2FzIGEgcGxheWJhY2sgaXNzdWUuXG4gICAgICAgICAgICBpZiAobm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgZW5kIHRpbWVyIG9uIHNwcml0ZXMgb3IgbGlzdGVuIGZvciB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICAgICAgICBpZiAoc3ByaXRlICE9PSAnX19kZWZhdWx0JyB8fCBzb3VuZC5fbG9vcCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlIGVuZGVkIG9uIHRoaXMgYXVkaW8gbm9kZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBzdHJlYW1pbmcgYXVkaW8sIG1ha2Ugc3VyZSB0aGUgc3JjIGlzIHNldCBhbmQgbG9hZCBhZ2Fpbi5cbiAgICAgICAgaWYgKG5vZGUuc3JjID09PSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdBQUFCWFFWWkZabTEwSUJJQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQUFBQmtZWFJoQWdBQUFBRUEnKSB7XG4gICAgICAgICAgbm9kZS5zcmMgPSBzZWxmLl9zcmM7XG4gICAgICAgICAgbm9kZS5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQbGF5IGltbWVkaWF0ZWx5IGlmIHJlYWR5LCBvciB3YWl0IGZvciB0aGUgJ2NhbnBsYXl0aHJvdWdoJ2UgdmVudC5cbiAgICAgICAgdmFyIGxvYWRlZE5vUmVhZHlTdGF0ZSA9ICh3aW5kb3cgJiYgd2luZG93LmVqZWN0YSkgfHwgKCFub2RlLnJlYWR5U3RhdGUgJiYgSG93bGVyLl9uYXZpZ2F0b3IuaXNDb2Nvb25KUyk7XG4gICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPj0gMyB8fCBsb2FkZWROb1JlYWR5U3RhdGUpIHtcbiAgICAgICAgICBwbGF5SHRtbDUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEJlZ2luIHBsYXliYWNrLlxuICAgICAgICAgICAgcGxheUh0bWw1KCk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgcGxheWJhY2sgYW5kIHNhdmUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gcGF1c2UgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCBvciBhIHBsYXkoKSBwcm9taXNlIGlzIHBlbmRpbmcsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGF1c2UnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlbGYuc2VlayhpZHNbaV0pO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJlIHRoZSBwYXVzZSBldmVudCwgdW5sZXNzIGB0cnVlYCBpcyBwYXNzZWQgYXMgdGhlIDJuZCBhcmd1bWVudC5cbiAgICAgICAgaWYgKCFhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdwYXVzZScsIHNvdW5kID8gc291bmQuX2lkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgcGxheWJhY2sgYW5kIHJlc2V0IHRvIHN0YXJ0LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBzdG9wIGFsbCBpbiBncm91cCkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGlkLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHN0b3Agd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3N0b3AnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0b3AoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHN0b3BwZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQncyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG5cbiAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIGxpdmUgc3RyZWFtLCBzdG9wIGRvd25sb2FkIG9uY2UgdGhlIGF1ZGlvIGlzIHN0b3BwZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZS91bm11dGUgYSBzaW5nbGUgc291bmQgb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgU2V0IHRvIHRydWUgdG8gbXV0ZSBhbmQgZmFsc2UgdG8gdW5tdXRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdtdXRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5tdXRlKG11dGVkLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXBwbHlpbmcgbXV0ZS91bm11dGUgdG8gYWxsIHNvdW5kcywgdXBkYXRlIHRoZSBncm91cCdzIHZhbHVlLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtdXRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fbXV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbXV0ZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIGFjdGl2ZSBmYWRlIGFuZCBzZXQgdGhlIHZvbHVtZSB0byB0aGUgZW5kIHZhbHVlLlxuICAgICAgICAgIGlmIChzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNvdW5kLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gSG93bGVyLl9tdXRlZCA/IHRydWUgOiBtdXRlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdtdXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHZvbHVtZSgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3Mgdm9sdW1lIHZhbHVlLlxuICAgICAqICAgdm9sdW1lKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgdm9sdW1lKHZvbCwgaWQpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdm9sLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdyb3Vwcycgdm9sdW1lLlxuICAgICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHZvbHVtZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPj0gMikge1xuICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NlZCwgYWxsIHNvdW5kcyB3aWxsIGZhZGUpLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIChvbWl0IHRvIGZhZGUgYWxsIHNvdW5kcykuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBmYWRlOiBmdW5jdGlvbihmcm9tLCB0bywgbGVuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGZhZGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ2ZhZGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmZhZGUoZnJvbSwgdG8sIGxlbiwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdG8vZnJvbS9sZW4gdmFsdWVzIGFyZSBudW1iZXJzLlxuICAgICAgZnJvbSA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoZnJvbSkpLCAxKTtcbiAgICAgIHRvID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgcGFyc2VGbG9hdCh0bykpLCAxKTtcbiAgICAgIGxlbiA9IHBhcnNlRmxvYXQobGVuKTtcblxuICAgICAgLy8gU2V0IHRoZSB2b2x1bWUgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAgc2VsZi52b2x1bWUoZnJvbSwgaWQpO1xuXG4gICAgICAvLyBGYWRlIHRoZSB2b2x1bWUgb2Ygb25lIG9yIGFsbCBzb3VuZHMuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBsaW5lYXIgZmFkZSBvciBmYWxsIGJhY2sgdG8gdGltZW91dHMgd2l0aCBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gU3RvcCB0aGUgcHJldmlvdXMgZmFkZSBpZiBubyBzcHJpdGUgaXMgYmVpbmcgdXNlZCAob3RoZXJ3aXNlLCB2b2x1bWUgaGFuZGxlcyB0aGlzKS5cbiAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8sIGxldCB0aGUgbmF0aXZlIG1ldGhvZHMgZG8gdGhlIGFjdHVhbCBmYWRlLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGN1cnJlbnRUaW1lICsgKGxlbiAvIDEwMDApO1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IGZyb207XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGZyb20sIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodG8sIGVuZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fc3RhcnRGYWRlSW50ZXJ2YWwoc291bmQsIGZyb20sIHRvLCBsZW4sIGlkc1tpXSwgdHlwZW9mIGlkID09PSAndW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgaW50ZXJuYWwgaW50ZXJ2YWwgdG8gZmFkZSBhIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291bmQgUmVmZXJlbmNlIHRvIHNvdW5kIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpc0dyb3VwICAgSWYgdHJ1ZSwgc2V0IHRoZSB2b2x1bWUgb24gdGhlIGdyb3VwLlxuICAgICAqL1xuICAgIF9zdGFydEZhZGVJbnRlcnZhbDogZnVuY3Rpb24oc291bmQsIGZyb20sIHRvLCBsZW4sIGlkLCBpc0dyb3VwKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdm9sID0gZnJvbTtcbiAgICAgIHZhciBkaWZmID0gdG8gLSBmcm9tO1xuICAgICAgdmFyIHN0ZXBzID0gTWF0aC5hYnMoZGlmZiAvIDAuMDEpO1xuICAgICAgdmFyIHN0ZXBMZW4gPSBNYXRoLm1heCg0LCAoc3RlcHMgPiAwKSA/IGxlbiAvIHN0ZXBzIDogbGVuKTtcbiAgICAgIHZhciBsYXN0VGljayA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSB2YWx1ZSBiZWluZyBmYWRlZCB0by5cbiAgICAgIHNvdW5kLl9mYWRlVG8gPSB0bztcblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgdmFsdWUgb24gZWFjaCBpbnRlcnZhbCB0aWNrLlxuICAgICAgc291bmQuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIGJhc2VkIG9uIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IHRpY2suXG4gICAgICAgIHZhciB0aWNrID0gKERhdGUubm93KCkgLSBsYXN0VGljaykgLyBsZW47XG4gICAgICAgIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdm9sICs9IGRpZmYgKiB0aWNrO1xuXG4gICAgICAgIC8vIFJvdW5kIHRvIHdpdGhpbiAyIGRlY2ltYWwgcG9pbnRzLlxuICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5tYXgodG8sIHZvbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5taW4odG8sIHZvbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGFuZ2UgdGhlIHZvbHVtZS5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwJ3Mgdm9sdW1lLlxuICAgICAgICBpZiAoaXNHcm91cCkge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIGZhZGUgaXMgY29tcGxldGUsIHN0b3AgaXQgYW5kIGZpcmUgZXZlbnQuXG4gICAgICAgIGlmICgodG8gPCBmcm9tICYmIHZvbCA8PSB0bykgfHwgKHRvID4gZnJvbSAmJiB2b2wgPj0gdG8pKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgICAgc2VsZi52b2x1bWUodG8sIHNvdW5kLl9pZCk7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHN0ZXBMZW4pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBzdG9wcyB0aGUgY3VycmVudGx5IHBsYXlpbmcgZmFkZSB3aGVuXG4gICAgICogYSBuZXcgZmFkZSBzdGFydHMsIHZvbHVtZSBpcyBjaGFuZ2VkIG9yIHRoZSBzb3VuZCBpcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3N0b3BGYWRlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgc2VsZi52b2x1bWUoc291bmQuX2ZhZGVUbywgaWQpO1xuICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIGlkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGxvb3AgcGFyYW1ldGVyIG9uIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIGxvb3AoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGxvb3ApIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgZm9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgbG9vcChsb29wLCBpZCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9Cb29sZWFufSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBsb29wIHZhbHVlLlxuICAgICAqL1xuICAgIGxvb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgbG9vcCwgaWQsIHNvdW5kO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBmb3IgbG9vcCBhbmQgaWQuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBncm91J3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3A7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBsb29wIHZhbHVlLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX2xvb3AgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIGxvb3BlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX2xvb3AgPSBsb29wO1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gbG9vcDtcbiAgICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcblxuICAgICAgICAgICAgICAvLyBJZiBwbGF5aW5nLCByZXN0YXJ0IHBsYXliYWNrIHRvIGVuc3VyZSBsb29waW5nIHVwZGF0ZXMuXG4gICAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRzW2ldKSkge1xuICAgICAgICAgICAgICAgIHNlbGYucGF1c2UoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXkoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBpZiAoc2VsZi5wbGF5aW5nKGlkW2ldKSkge1xuICAgICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gc2VsZi5fd2ViQXVkaW8gPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIDogc291bmQuX3BsYXlTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdW5kLl9yYXRlID0gcmF0ZTtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHJhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wbGF5YmFja1JhdGUgPSByYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJzLlxuICAgICAgICAgICAgdmFyIHNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gKChzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgZW5kIHRpbWVyIGlmIHNvdW5kIGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRbaV1dIHx8ICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRbaV0pO1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbaWRbaV1dID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3JhdGUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcmF0ZSA6IHNlbGYuX3JhdGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBzZWVrIHBvc2l0aW9uIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHNlZWsoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKHNlZWspIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNvdW5kIG5vZGUuXG4gICAgICogICBzZWVrKHNlZWssIGlkKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICovXG4gICAgc2VlazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBzZWVrLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHNlZWsgcG9zaXRpb24uXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxuICAgICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNlZWsgYW5kIGVtaXQgd2hlbiByZWFkeS5cbiAgICAgICAgICB2YXIgc2Vla0FuZEVtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGlmIHRoZSBzb3VuZCB3YXMgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICAgIHNlbGYucGxheShpZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3NlZWsnLCBpZCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBwbGF5IGxvY2sgdG8gYmUgdW5zZXQgYmVmb3JlIGVtaXR0aW5nIChIVE1MNSBBdWRpbykuXG4gICAgICAgICAgaWYgKHBsYXlpbmcgJiYgIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgZW1pdFNlZWsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Vla0FuZEVtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBzZWxmLnBsYXlpbmcoaWQpID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSAtIHNvdW5kLl9wbGF5U3RhcnQgOiAwO1xuICAgICAgICAgICAgdmFyIHJhdGVTZWVrID0gc291bmQuX3JhdGVTZWVrID8gc291bmQuX3JhdGVTZWVrIC0gc291bmQuX3NlZWsgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9zZWVrICsgKHJhdGVTZWVrICsgcmVhbFRpbWUgKiBNYXRoLmFicyhzb3VuZC5fcmF0ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX25vZGUuY3VycmVudFRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHNwZWNpZmljIHNvdW5kIGlzIGN1cnJlbnRseSBwbGF5aW5nIG9yIG5vdCAoaWYgaWQgaXMgcHJvdmlkZWQpLCBvciBjaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIHNvdW5kcyBpbiB0aGUgZ3JvdXAgaXMgcGxheWluZyBvciBub3QuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgdGhlIHdob2xlIHNvdW5kIGdyb3VwIGlzIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nIGFuZCBmYWxzZSBpZiBub3QuXG4gICAgICovXG4gICAgcGxheWluZzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gQ2hlY2sgdGhlIHBhc3NlZCBzb3VuZCBJRCAoaWYgYW55KS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/ICFzb3VuZC5fcGF1c2VkIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSwgbG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoZWNrIGlmIGFueSBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkdXJhdGlvbiBvZiB0aGlzIHNvdW5kLiBQYXNzaW5nIGEgc291bmQgaWQgd2lsbCByZXR1cm4gdGhlIHNwcml0ZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHJldHVybiBmdWxsIHNvdXJjZSBkdXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEF1ZGlvIGR1cmF0aW9uIGluIHNlY29uZHMuXG4gICAgICovXG4gICAgZHVyYXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZHVyYXRpb24gPSBzZWxmLl9kdXJhdGlvbjtcblxuICAgICAgLy8gSWYgd2UgcGFzcyBhbiBJRCwgZ2V0IHRoZSBzb3VuZCBhbmQgcmV0dXJuIHRoZSBzcHJpdGUgbGVuZ3RoLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBkdXJhdGlvbiA9IHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSAvIDEwMDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBsb2FkZWQgc3RhdGUgb2YgdGhpcyBIb3dsLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gJ3VubG9hZGVkJywgJ2xvYWRpbmcnLCAnbG9hZGVkJ1xuICAgICAqL1xuICAgIHN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IHRoZSBjdXJyZW50IEhvd2wgb2JqZWN0LlxuICAgICAqIFRoaXMgd2lsbCBpbW1lZGlhdGVseSBzdG9wIGFsbCBzb3VuZCBpbnN0YW5jZXMgYXR0YWNoZWQgdG8gdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTdG9wIHBsYXlpbmcgYW55IGFjdGl2ZSBzb3VuZHMuXG4gICAgICB2YXIgc291bmRzID0gc2VsZi5fc291bmRzO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPHNvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBTdG9wIHRoZSBzb3VuZCBpZiBpdCBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgICAgaWYgKCFzb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHNlbGYuc3RvcChzb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc291cmNlIG9yIGRpc2Nvbm5lY3QuXG4gICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBTZXQgdGhlIHNvdXJjZSB0byAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nIChleGNlcHQgaW4gSUUpLlxuICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmRzW2ldLl9ub2RlKTtcblxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzb3VuZHNbaV0uX2xvYWRGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNvdW5kc1tpXS5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAgIC8vIFJlbGVhc2UgdGhlIEF1ZGlvIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sLlxuICAgICAgICAgIEhvd2xlci5fcmVsZWFzZUh0bWw1QXVkaW8oc291bmRzW2ldLl9ub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjIHx8IHNlbGYuX3NyYy5pbmRleE9mKEhvd2xlci5faG93bHNbaV0uX3NyYykgPj0gMCkge1xuICAgICAgICAgIHJlbUNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlICYmIHJlbUNhY2hlKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxuICAgICAgSG93bGVyLm5vQXVkaW8gPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgb3V0IGBzZWxmYC5cbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZiA9IG51bGw7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBvbmNlICAoSU5URVJOQUwpIE1hcmtzIGV2ZW50IHRvIGZpcmUgb25seSBvbmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQsIG9uY2UpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG9uY2UgPyB7aWQ6IGlkLCBmbjogZm4sIG9uY2U6IG9uY2V9IDoge2lkOiBpZCwgZm46IGZufSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byByZW1vdmUuIExlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gQWxsb3cgcGFzc2luZyBqdXN0IGFuIGV2ZW50IGFuZCBJRC5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gZm47XG4gICAgICAgIGZuID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGZuIHx8IGlkKSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoaT0wOyBpPGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBpc0lkID0gKGlkID09PSBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIGlmIChmbiA9PT0gZXZlbnRzW2ldLmZuICYmIGlzSWQgfHwgIWZuICYmIGlzSWQpIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgdGhpcyB0eXBlLlxuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiBldmVyeSB0eXBlLlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xuICAgICAgICBmb3IgKGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKChrZXlzW2ldLmluZGV4T2YoJ19vbicpID09PSAwKSAmJiBBcnJheS5pc0FycmF5KHNlbGZba2V5c1tpXV0pKSB7XG4gICAgICAgICAgICBzZWxmW2tleXNbaV1dID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQgYW5kIHJlbW92ZSBpdCBvbmNlIGZpcmVkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uY2U6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFNvdW5kIElELlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCBmaXJlIGFsbCBmdW5jdGlvbnMuXG4gICAgICBmb3IgKHZhciBpPWV2ZW50cy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIC8vIE9ubHkgZmlyZSB0aGUgbGlzdGVuZXIgaWYgdGhlIGNvcnJlY3QgSUQgaXMgdXNlZC5cbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGFzcyB0aGUgZXZlbnQgdHlwZSBpbnRvIGxvYWQgcXVldWUgc28gdGhhdCBpdCBjYW4gY29udGludWUgc3RlcHBpbmcuXG4gICAgICBzZWxmLl9sb2FkUXVldWUoZXZlbnQpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVldWUgb2YgYWN0aW9ucyBpbml0aWF0ZWQgYmVmb3JlIHRoZSBzb3VuZCBoYXMgbG9hZGVkLlxuICAgICAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXG4gICAgICogYWZ0ZXIgdGhlIHByZXZpb3VzIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcgKGV2ZW4gaWYgYXN5bmMgbGlrZSBwbGF5KS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9sb2FkUXVldWU6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YXNrID0gc2VsZi5fcXVldWVbMF07XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoaXMgdGFzayBpZiBhIG1hdGNoaW5nIGV2ZW50IHdhcyBwYXNzZWQuXG4gICAgICAgIGlmICh0YXNrLmV2ZW50ID09PSBldmVudCkge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHRhc2sgaWYgbm8gZXZlbnQgdHlwZSBpcyBwYXNzZWQuXG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHBsYXliYWNrIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGU7XG5cbiAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBJRSBhbmQgdGhlcmUgd2FzIG5ldHdvcmsgbGF0ZW5jeSB3ZSBtYXkgYmUgY2xpcHBpbmdcbiAgICAgIC8vIGF1ZGlvIGJlZm9yZSBpdCBjb21wbGV0ZXMgcGxheWluZy4gTGV0cyBjaGVjayB0aGUgbm9kZSB0byBtYWtlIHN1cmUgaXRcbiAgICAgIC8vIGJlbGlldmVzIGl0IGhhcyBjb21wbGV0ZWQsIGJlZm9yZSBlbmRpbmcgdGhlIHBsYXliYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUucGF1c2VkICYmICFzb3VuZC5fbm9kZS5lbmRlZCAmJiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA8IHNvdW5kLl9zdG9wKSB7XG4gICAgICAgIHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIDEwMCk7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICAvLyBDbGVhciB0aGUgdGltZW91dCBvciByZW1vdmUgdGhlIGVuZGVkIGxpc3RlbmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuX2VuZFRpbWVyc1tpZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW2lkXSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcCB8fCAwO1xuICAgICAgfVxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IG1lbW9yeSBsZWFrcyBieSBjbGVhbmluZyB1cCB0aGUgYnVmZmVyIHNvdXJjZSBhZnRlciBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpc0lPUyA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnZlbmRvci5pbmRleE9mKCdBcHBsZScpID49IDA7XG5cbiAgICAgIGlmICghbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmIChIb3dsZXIuX3NjcmF0Y2hCdWZmZXIgJiYgbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2Uub25lbmRlZCA9IG51bGw7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIHRyeSB7IG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IEhvd2xlci5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNvdXJjZSB0byBhIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIEF1ZGlvIG5vZGUgdG8gY2xlYXIuXG4gICAgICovXG4gICAgX2NsZWFyU291bmQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBjaGVja0lFID0gL01TSUUgfFRyaWRlbnRcXC8vLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIGlmICghY2hlY2tJRSkge1xuICAgICAgICBub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIGlmICghSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgLy8gR2V0IGFuIHVubG9ja2VkIEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLlxuICAgICAgICBzZWxmLl9ub2RlID0gSG93bGVyLl9vYnRhaW5IdG1sNUF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdGhlICdlbmRlZCcgZXZlbnQgb24gdGhlIHNvdW5kIHRvIGFjY291bnQgZm9yIGVkZ2UtY2FzZSB3aGVyZVxuICAgICAgICAvLyBhIGZpbml0ZSBzb3VuZCBoYXMgYSBkdXJhdGlvbiBvZiBJbmZpbml0eS5cbiAgICAgICAgc2VsZi5fZW5kRm4gPSBzZWxmLl9lbmRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXG4gICAgICAgIHNlbGYuX25vZGUuc3JjID0gcGFyZW50Ll9zcmM7XG4gICAgICAgIHNlbGYuX25vZGUucHJlbG9hZCA9IHBhcmVudC5fcHJlbG9hZCA9PT0gdHJ1ZSA/ICdhdXRvJyA6IHBhcmVudC5fcHJlbG9hZDtcbiAgICAgICAgc2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gQmVnaW4gbG9hZGluZyB0aGUgc291cmNlLlxuICAgICAgICBzZWxmLl9ub2RlLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQgdG8gdGhlIG9yaWdpbmFsIHN0YXRlIChmb3IgcmVjeWNsZSkuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIG9mIHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9yYXRlU2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIHNvIHRoYXQgaXQgaXNuJ3QgY29uZnVzZWQgd2l0aCB0aGUgcHJldmlvdXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZXJyb3IgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2Vycm9yTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBGaXJlIGFuIGVycm9yIGV2ZW50IGFuZCBwYXNzIGJhY2sgdGhlIGNvZGUuXG4gICAgICBzZWxmLl9wYXJlbnQuX2VtaXQoJ2xvYWRlcnJvcicsIHNlbGYuX2lkLCBzZWxmLl9ub2RlLmVycm9yID8gc2VsZi5fbm9kZS5lcnJvci5jb2RlIDogMCk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudC5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50Ll9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHBhcmVudC5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgcGFyZW50Ll9lbWl0KCdsb2FkJyk7XG4gICAgICAgIHBhcmVudC5fbG9hZFF1ZXVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVuZGVkIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lbmRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBPbmx5IGhhbmRsZSB0aGUgYGVuZGVkYGAgZXZlbnQgaWYgdGhlIGR1cmF0aW9uIGlzIEluZmluaXR5LlxuICAgICAgaWYgKHBhcmVudC5fZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyZW50IGR1cmF0aW9uIHRvIG1hdGNoIHRoZSByZWFsIGF1ZGlvIGR1cmF0aW9uLlxuICAgICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzcHJpdGUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcmVhbCBkdXJhdGlvbi5cbiAgICAgICAgaWYgKHBhcmVudC5fc3ByaXRlLl9fZGVmYXVsdFsxXSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICBwYXJlbnQuX3Nwcml0ZS5fX2RlZmF1bHRbMV0gPSBwYXJlbnQuX2R1cmF0aW9uICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgcmVndWxhciBlbmRlZCBtZXRob2QuXG4gICAgICAgIHBhcmVudC5fZW5kZWQoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lciBzaW5jZSB0aGUgZHVyYXRpb24gaXMgbm93IGNvcnJlY3QuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oc2VsZi5feGhyLm1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBzZWxmLl94aHIud2l0aENyZWRlbnRpYWxzO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cbiAgICAgIC8vIEFwcGx5IGFueSBjdXN0b20gaGVhZGVycyB0byB0aGUgcmVxdWVzdC5cbiAgICAgIGlmIChzZWxmLl94aHIuaGVhZGVycykge1xuICAgICAgICBPYmplY3Qua2V5cyhzZWxmLl94aHIuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHNlbGYuX3hoci5oZWFkZXJzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgc3VjY2Vzc2Z1bCByZXNwb25zZSBiYWNrLlxuICAgICAgICB2YXIgY29kZSA9ICh4aHIuc3RhdHVzICsgJycpWzBdO1xuICAgICAgICBpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRmFpbGVkIGxvYWRpbmcgYXVkaW8gZmlsZSB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMgKyAnLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIHNlbGYpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZVt1cmxdO1xuICAgICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgc2FmZVhoclNlbmQoeGhyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIFhIUiByZXF1ZXN0IHdyYXBwZWQgaW4gYSB0cnkvY2F0Y2guXG4gICAqIEBwYXJhbSAge09iamVjdH0geGhyIFhIUiB0byBzZW5kLlxuICAgKi9cbiAgdmFyIHNhZmVYaHJTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZSBhdWRpbyBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXG4gICAqL1xuICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIHNlbGYpIHtcbiAgICAvLyBGaXJlIGEgbG9hZCBlcnJvciBpZiBzb21ldGhpbmcgYnJva2UuXG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRGVjb2RpbmcgYXVkaW8gZGF0YSBmYWlsZWQuJyk7XG4gICAgfTtcblxuICAgIC8vIExvYWQgdGhlIHNvdW5kIG9uIHN1Y2Nlc3MuXG4gICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIGlmIChidWZmZXIgJiYgc2VsZi5fc291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FjaGVbc2VsZi5fc3JjXSA9IGJ1ZmZlcjtcbiAgICAgICAgbG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIpLnRoZW4oc3VjY2VzcykuY2F0Y2goZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlciwgc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTb3VuZCBpcyBub3cgbG9hZGVkLCBzbyBmaW5pc2ggc2V0dGluZyBldmVyeXRoaW5nIHVwIGFuZCBmaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICogQHBhcmFtICB7T2JqZWN0fSBidWZmZXIgVGhlIGRlY29kZWQgYnVmZmVyIHNvdW5kIHNvdXJjZS5cbiAgICovXG4gIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcbiAgICAvLyBTZXQgdGhlIGR1cmF0aW9uLlxuICAgIGlmIChidWZmZXIgJiYgIXNlbGYuX2R1cmF0aW9uKSB7XG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxmLl9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgc2VsZi5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkJyk7XG4gICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBhdWRpbyBjb250ZXh0IHdoZW4gYXZhaWxhYmxlLCBvciBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8gbW9kZS5cbiAgICovXG4gIHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIHdlIGhhdmUgYWxyZWFkeSBkZXRlY3RlZCB0aGF0IFdlYiBBdWRpbyBpc24ndCBzdXBwb3J0ZWQsIGRvbid0IHJ1biB0aGlzIHN0ZXAgYWdhaW4uXG4gICAgaWYgKCFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBhdWRpbyBjb250ZXh0IGNyZWF0aW9uIHN0aWxsIGZhaWxlZCwgc2V0IHVzaW5nIHdlYiBhdWRpbyB0byBmYWxzZS5cbiAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYSB3ZWJ2aWV3IGlzIGJlaW5nIHVzZWQgb24gaU9TOCBvciBlYXJsaWVyIChyYXRoZXIgdGhhbiB0aGUgYnJvd3NlcikuXG4gICAgLy8gSWYgaXQgaXMsIGRpc2FibGUgV2ViIEF1ZGlvIGFzIGl0IGNhdXNlcyBjcmFzaGluZy5cbiAgICB2YXIgaU9TID0gKC9pUChob25lfG9kfGFkKS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5wbGF0Zm9ybSkpO1xuICAgIHZhciBhcHBWZXJzaW9uID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1MgKFxcZCspXyhcXGQrKV8/KFxcZCspPy8pO1xuICAgIHZhciB2ZXJzaW9uID0gYXBwVmVyc2lvbiA/IHBhcnNlSW50KGFwcFZlcnNpb25bMV0sIDEwKSA6IG51bGw7XG4gICAgaWYgKGlPUyAmJiB2ZXJzaW9uICYmIHZlcnNpb24gPCA5KSB7XG4gICAgICB2YXIgc2FmYXJpID0gL3NhZmFyaS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoSG93bGVyLl9uYXZpZ2F0b3IgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoSG93bGVyLl9tdXRlZCA/IDAgOiBIb3dsZXIuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxuICAgIEhvd2xlci5fc2V0dXAoKTtcbiAgfTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EIChBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24pIGxpYnJhcmllcyBzdWNoIGFzIHJlcXVpcmUuanMuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgSG93bGVyOiBIb3dsZXIsXG4gICAgICAgIEhvd2w6IEhvd2xcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGV4cG9ydHMuSG93bGVyID0gSG93bGVyO1xuICAgIGV4cG9ydHMuSG93bCA9IEhvd2w7XG4gIH1cblxuICAvLyBBZGQgdG8gZ2xvYmFsIGluIE5vZGUuanMgKGZvciB0ZXN0aW5nLCBldGMpLlxuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIGdsb2JhbC5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZ2xvYmFsLkhvd2wgPSBIb3dsO1xuICAgIGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7ICAvLyBEZWZpbmUgZ2xvYmFsbHkgaW4gY2FzZSBBTUQgaXMgbm90IGF2YWlsYWJsZSBvciB1bnVzZWQuXG4gICAgd2luZG93Lkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICB3aW5kb3cuSG93bGVyID0gSG93bGVyO1xuICAgIHdpbmRvdy5Ib3dsID0gSG93bDtcbiAgICB3aW5kb3cuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4yLjRcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9wb3MgPSBbMCwgMCwgMF07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGVyZW8gcGFubmluZyBwb3NpdGlvbiBvZiBhbGwgY3VycmVudCBIb3dscy5cbiAgICogRnV0dXJlIEhvd2xzIHdpbGwgbm90IHVzZSB0aGlzIHZhbHVlIHVubGVzcyBleHBsaWNpdGx5IHNldC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHJldHVybiB7SG93bGVyL051bWJlcn0gICAgIFNlbGYgb3IgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHVwZGF0ZSB0aGVpciBzdGVyZW8gcGFubmluZy5cbiAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgIHNlbGYuX2hvd2xzW2ldLnN0ZXJlbyhwYW4pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIgaW4gM0QgY2FydGVzaWFuIHNwYWNlLiBTb3VuZHMgdXNpbmdcbiAgICogM0QgcG9zaXRpb24gd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgbGlzdGVuZXIncyBwb3NpdGlvbi5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4IFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5IFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6IFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgIFNlbGYgb3IgY3VycmVudCBsaXN0ZW5lciBwb3NpdGlvbi5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMl0gOiB6O1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWS5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblouc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldFBvc2l0aW9uKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gc3BhY2UuXG4gICAqIEEgZnJvbnQgYW5kIHVwIHZlY3RvciBtdXN0IGJlIHByb3ZpZGVkLiBUaGUgZnJvbnQgaXMgdGhlIGRpcmVjdGlvbiB0aGVcbiAgICogZmFjZSBvZiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcsIGFuZCB1cCBpcyB0aGUgZGlyZWN0aW9uIHRoZSB0b3Agb2YgdGhlXG4gICAqIGxpc3RlbmVyIGlzIHBvaW50aW5nLiBUaHVzLCB0aGVzZSB2YWx1ZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGF0IHJpZ2h0IGFuZ2xlc1xuICAgKiBmcm9tIGVhY2ggb3RoZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geFVwIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHlVcCBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6VXAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB2ZWN0b3JzLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHZhciBvciA9IHNlbGYuX29yaWVudGF0aW9uO1xuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IG9yWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBvclsyXSA6IHo7XG4gICAgeFVwID0gKHR5cGVvZiB4VXAgIT09ICdudW1iZXInKSA/IG9yWzNdIDogeFVwO1xuICAgIHlVcCA9ICh0eXBlb2YgeVVwICE9PSAnbnVtYmVyJykgPyBvcls0XSA6IHlVcDtcbiAgICB6VXAgPSAodHlwZW9mIHpVcCAhPT0gJ251bWJlcicpID8gb3JbNV0gOiB6VXA7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6LCB4VXAsIHlVcCwgelVwXTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFguc2V0VGFyZ2V0QXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRZLnNldFRhcmdldEF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWi5zZXRUYXJnZXRBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBYLnNldFRhcmdldEF0VGltZSh4VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWS5zZXRUYXJnZXRBdFRpbWUoeVVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFouc2V0VGFyZ2V0QXRUaW1lKHpVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge0hvd2x9XG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IG8ub3JpZW50YXRpb24gfHwgWzEsIDAsIDBdO1xuICAgICAgc2VsZi5fc3RlcmVvID0gby5zdGVyZW8gfHwgbnVsbDtcbiAgICAgIHNlbGYuX3BvcyA9IG8ucG9zIHx8IG51bGw7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogMCxcbiAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiAnaW52ZXJzZScsXG4gICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogMTAwMDAsXG4gICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogJ0hSVEYnLFxuICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IDEsXG4gICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogMVxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25zdGVyZW8gPSBvLm9uc3RlcmVvID8gW3tmbjogby5vbnN0ZXJlb31dIDogW107XG4gICAgICBzZWxmLl9vbnBvcyA9IG8ub25wb3MgPyBbe2ZuOiBvLm9ucG9zfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ub3JpZW50YXRpb24gPSBvLm9ub3JpZW50YXRpb24gPyBbe2ZuOiBvLm9ub3JpZW50YXRpb259XSA6IFtdO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG8pO1xuICAgIH07XG4gIH0pKEhvd2wucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBzdGVyZW8gcGFubmluZyBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGFsbCBpbiB0aGUgZ3JvdXAuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuICBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBzdGVyZW8gcGFuIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdzdGVyZW8nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RlcmVvKHBhbiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIFBhbm5lclN0ZXJlb05vZGUgc3VwcG9ydCBhbmQgZmFsbGJhY2sgdG8gUGFubmVyTm9kZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIHZhciBwYW5uZXJUeXBlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lciA9PT0gJ3VuZGVmaW5lZCcpID8gJ3NwYXRpYWwnIDogJ3N0ZXJlbyc7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fc3RlcmVvID0gcGFuO1xuICAgICAgICBzZWxmLl9wb3MgPSBbcGFuLCAwLCAwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9zdGVyZW87XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzdHJlbyBwYW5uaW5nIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3BhbiwgMCwgMF07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBmYWxsaW5nIGJhY2ssIG1ha2Ugc3VyZSB0aGUgcGFubmluZ01vZGVsIGlzIGVxdWFscG93ZXIuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgPSAnZXF1YWxwb3dlcic7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCAhc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsIHBhbm5lclR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFubmVyVHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RlcmVvJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3N0ZXJlbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSAzRCBzcGF0aWFsIHBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgZ3JvdXAgcmVsYXRpdmUgdG8gdGhlIGdsb2JhbCBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIHBvc2l0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBvc2l0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdwb3MnLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucG9zKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyAwIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyAtMC41IDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIHBvc2l0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCBzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgncG9zJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3BvcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGF1ZGlvIHNvdXJjZSBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIGNvb3JkaW5hdGVcbiAgICogc3BhY2UuIERlcGVuZGluZyBvbiBob3cgZGlyZWN0aW9uIHRoZSBzb3VuZCBpcywgYmFzZWQgb24gdGhlIGBjb25lYCBhdHRyaWJ1dGVzLFxuICAgKiBhIHNvdW5kIHBvaW50aW5nIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIgY2FuIGJlIHF1aWV0IG9yIHNpbGVudC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIG9yaWVudGF0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugb3JpZW50YXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ29yaWVudGF0aW9uJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMl0gOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fb3JpZW50YXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIG9yaWVudGF0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnb3JpZW50YXRpb24nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cbiAgICogVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbCB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAqICAgcGFubmVyQXR0cigpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIobykgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICogICBwYW5uZXJBdHRyKG8sIGlkKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICpcbiAgICogICBBdHRyaWJ1dGVzOlxuICAgKiAgICAgY29uZUlubmVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUgb2Ygd2hpY2ggdGhlcmUgd2lsbCBiZSBubyB2b2x1bWUgcmVkdWN0aW9uLlxuICAgKiAgICAgY29uZU91dGVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBvdXRzaWRlIG9mIHdoaWNoIHRoZSB2b2x1bWUgd2lsbCBiZSByZWR1Y2VkIHRvIGEgY29uc3RhbnQgdmFsdWUgb2YgYGNvbmVPdXRlckdhaW5gLlxuICAgKiAgICAgY29uZU91dGVyR2FpbiAtICgwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIHRoZSBnYWluIG91dHNpZGUgb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgYGNvbmVPdXRlckFuZ2xlYC4gSXQgaXMgYSBsaW5lYXIgdmFsdWUgaW4gdGhlIHJhbmdlIGBbMCwgMV1gLlxuICAgKiAgICAgZGlzdGFuY2VNb2RlbCAtICgnaW52ZXJzZScgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyBhbGdvcml0aG0gdXNlZCB0byByZWR1Y2Ugdm9sdW1lIGFzIGF1ZGlvIG1vdmVzIGF3YXkgZnJvbVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLiBDYW4gYmUgYGxpbmVhcmAsIGBpbnZlcnNlYCBvciBgZXhwb25lbnRpYWwuXG4gICAqICAgICBtYXhEaXN0YW5jZSAtICgxMDAwMCBieSBkZWZhdWx0KSBUaGUgbWF4aW11bSBkaXN0YW5jZSBiZXR3ZWVuIHNvdXJjZSBhbmQgbGlzdGVuZXIsIGFmdGVyIHdoaWNoIHRoZSB2b2x1bWVcbiAgICogICAgICAgICAgICAgICAgICAgd2lsbCBub3QgYmUgcmVkdWNlZCBhbnkgZnVydGhlci5cbiAgICogICAgIHJlZkRpc3RhbmNlIC0gKDEgYnkgZGVmYXVsdCkgQSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyBzb3VyY2UgbW92ZXMgZnVydGhlciBmcm9tIHRoZSBsaXN0ZW5lci5cbiAgICogICAgICAgICAgICAgICAgICAgVGhpcyBpcyBzaW1wbHkgYSB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGhhcyBhIGRpZmZlcmVudCBlZmZlY3QgZGVwZW5kaW5nIG9uIHdoaWNoIG1vZGVsXG4gICAqICAgICAgICAgICAgICAgICAgIGlzIHVzZWQgYW5kIHRoZSBzY2FsZSBvZiB5b3VyIGNvb3JkaW5hdGVzLiBHZW5lcmFsbHksIHZvbHVtZSB3aWxsIGJlIGVxdWFsIHRvIDEgYXQgdGhpcyBkaXN0YW5jZS5cbiAgICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuIFRoaXMgaXMgc2ltcGx5IGFcbiAgICogICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGNhbiBiZSBpbiB0aGUgcmFuZ2Ugb2YgYFswLCAxXWAgd2l0aCBgbGluZWFyYCBhbmQgYFswLCBcdTIyMUVdYFxuICAgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggYGludmVyc2VgIGFuZCBgZXhwb25lbnRpYWxgLlxuICAgKiAgICAgcGFubmluZ01vZGVsIC0gKCdIUlRGJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIHdoaWNoIHNwYXRpYWxpemF0aW9uIGFsZ29yaXRobSBpcyB1c2VkIHRvIHBvc2l0aW9uIGF1ZGlvLlxuICAgKiAgICAgICAgICAgICAgICAgICAgIENhbiBiZSBgSFJURmAgb3IgYGVxdWFscG93ZXJgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wYW5uZXJBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBvLCBpZCwgc291bmQ7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICByZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG8gPSBhcmdzWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdSdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmICghby5wYW5uZXJBdHRyKSB7XG4gICAgICAgICAgICBvLnBhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiBvLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogby5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyR2Fpbjogby5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiBvLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICAgIG1heERpc3RhbmNlOiBvLm1heERpc3RhbmNlLFxuICAgICAgICAgICAgICByZWZEaXN0YW5jZTogby5yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcm9sbG9mZkZhY3Rvcjogby5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgICBwYW5uaW5nTW9kZWw6IG8ucGFubmluZ01vZGVsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgOiBzZWxmLl9jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSA6IHNlbGYuX2NvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluIDogc2VsZi5fY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCA6IHNlbGYuX2Rpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgOiBzZWxmLl9tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSA6IHNlbGYuX3JlZkRpc3RhbmNlLFxuICAgICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yIDogc2VsZi5fcm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA6IHNlbGYuX3Bhbm5pbmdNb2RlbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9wYW5uZXJBdHRyIDogc2VsZi5fcGFubmVyQXR0cjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICBvID0gYXJnc1swXTtcbiAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBzcGVjaWZpZWQgc291bmRzLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgdmFsdWVzIGludG8gdGhlIHNvdW5kLlxuICAgICAgICB2YXIgcGEgPSBzb3VuZC5fcGFubmVyQXR0cjtcbiAgICAgICAgcGEgPSB7XG4gICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiBwYS5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IHBhLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogcGEuY29uZU91dGVyR2FpbixcbiAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6IHBhLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiBwYS5tYXhEaXN0YW5jZSxcbiAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHBhLnJlZkRpc3RhbmNlLFxuICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogcGEucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHBhLnBhbm5pbmdNb2RlbFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBpZiBvbmUgZG9lc24ndCBhbHJlYWR5IGV4aXN0LlxuICAgICAgICB2YXIgcGFubmVyID0gc291bmQuX3Bhbm5lcjtcbiAgICAgICAgaWYgKCFwYW5uZXIpIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXG4gICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgcGFubmVyID0gc291bmQuX3Bhbm5lclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYW5uZXIgdmFsdWVzIG9yIGNyZWF0ZSBhIG5ldyBwYW5uZXIgaWYgbm9uZSBleGlzdHMuXG4gICAgICAgIHBhbm5lci5jb25lSW5uZXJBbmdsZSA9IHBhLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgICBwYW5uZXIuY29uZU91dGVyQW5nbGUgPSBwYS5jb25lT3V0ZXJBbmdsZTtcbiAgICAgICAgcGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xuICAgICAgICBwYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHBhLmRpc3RhbmNlTW9kZWw7XG4gICAgICAgIHBhbm5lci5tYXhEaXN0YW5jZSA9IHBhLm1heERpc3RhbmNlO1xuICAgICAgICBwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcbiAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBwYS5yb2xsb2ZmRmFjdG9yO1xuICAgICAgICBwYW5uZXIucGFubmluZ01vZGVsID0gcGEucGFubmluZ01vZGVsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBTb3VuZCBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXG4gICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBTb3VuZC5yZXNldCBtZXRob2QgdG8gY2xlYW4gdXAgcHJvcGVydGllcyBmcm9tIHRoZSBzcGF0aWFsIHBsdWdpbi5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBTb3VuZCByZXNldCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLnJlc2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBzcGF0aWFsIHBsdWdpbiBwcm9wZXJ0aWVzIG9uIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcGFubmVyKSB7XG4gICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIHBhbm5lci5cbiAgICAgICAgc2VsZi5fcGFubmVyLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIHNlbGYuX3Bhbm5lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgcGFyZW50Ll9yZWZyZXNoQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb21wbGV0ZSByZXNldHRpbmcgb2YgdGhlIHNvdW5kLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5yZXNldCk7XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgYW5kIHNhdmUgaXQgb24gdGhlIHNvdW5kLlxuICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgU3BlY2lmaWMgc291bmQgdG8gc2V0dXAgcGFubmluZyBvbi5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVHlwZSBvZiBwYW5uZXIgdG8gY3JlYXRlOiAnc3RlcmVvJyBvciAnc3BhdGlhbCcuXG4gICAqL1xuICB2YXIgc2V0dXBQYW5uZXIgPSBmdW5jdGlvbihzb3VuZCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlIHx8ICdzcGF0aWFsJztcblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IHBhbm5lciBub2RlLlxuICAgIGlmICh0eXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lSW5uZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJHYWluID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyR2FpbjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWw7XG4gICAgICBzb3VuZC5fcGFubmVyLm1heERpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIubWF4RGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJlZkRpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIucmVmRGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBzb3VuZC5fcGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW5uaW5nTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWw7XG5cbiAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHNvdW5kLl9wb3NbMF0sIHNvdW5kLl9wb3NbMV0sIHNvdW5kLl9wb3NbMl0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbihzb3VuZC5fb3JpZW50YXRpb25bMF0sIHNvdW5kLl9vcmllbnRhdGlvblsxXSwgc291bmQuX29yaWVudGF0aW9uWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fc3RlcmVvLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICBzb3VuZC5fcGFubmVyLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgIHNvdW5kLl9wYXJlbnQucGF1c2Uoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZWFyY3V0O1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGVhcmN1dDtcblxuZnVuY3Rpb24gZWFyY3V0KGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0pIHtcblxuICAgIGRpbSA9IGRpbSB8fCAyO1xuXG4gICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoLFxuICAgICAgICBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJOb2RlID0gbGlua2VkTGlzdChkYXRhLCAwLCBvdXRlckxlbiwgZGltLCB0cnVlKSxcbiAgICAgICAgdHJpYW5nbGVzID0gW107XG5cbiAgICBpZiAoIW91dGVyTm9kZSB8fCBvdXRlck5vZGUubmV4dCA9PT0gb3V0ZXJOb2RlLnByZXYpIHJldHVybiB0cmlhbmdsZXM7XG5cbiAgICB2YXIgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgeCwgeSwgaW52U2l6ZTtcblxuICAgIGlmIChoYXNIb2xlcykgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKTtcblxuICAgIC8vIGlmIHRoZSBzaGFwZSBpcyBub3QgdG9vIHNpbXBsZSwgd2UnbGwgdXNlIHotb3JkZXIgY3VydmUgaGFzaCBsYXRlcjsgY2FsY3VsYXRlIHBvbHlnb24gYmJveFxuICAgIGlmIChkYXRhLmxlbmd0aCA+IDgwICogZGltKSB7XG4gICAgICAgIG1pblggPSBtYXhYID0gZGF0YVswXTtcbiAgICAgICAgbWluWSA9IG1heFkgPSBkYXRhWzFdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBkaW07IGkgPCBvdXRlckxlbjsgaSArPSBkaW0pIHtcbiAgICAgICAgICAgIHggPSBkYXRhW2ldO1xuICAgICAgICAgICAgeSA9IGRhdGFbaSArIDFdO1xuICAgICAgICAgICAgaWYgKHggPCBtaW5YKSBtaW5YID0geDtcbiAgICAgICAgICAgIGlmICh5IDwgbWluWSkgbWluWSA9IHk7XG4gICAgICAgICAgICBpZiAoeCA+IG1heFgpIG1heFggPSB4O1xuICAgICAgICAgICAgaWYgKHkgPiBtYXhZKSBtYXhZID0geTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1pblgsIG1pblkgYW5kIGludlNpemUgYXJlIGxhdGVyIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkcyBpbnRvIGludGVnZXJzIGZvciB6LW9yZGVyIGNhbGN1bGF0aW9uXG4gICAgICAgIGludlNpemUgPSBNYXRoLm1heChtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xuICAgICAgICBpbnZTaXplID0gaW52U2l6ZSAhPT0gMCA/IDMyNzY3IC8gaW52U2l6ZSA6IDA7XG4gICAgfVxuXG4gICAgZWFyY3V0TGlua2VkKG91dGVyTm9kZSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDApO1xuXG4gICAgcmV0dXJuIHRyaWFuZ2xlcztcbn1cblxuLy8gY3JlYXRlIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IGZyb20gcG9seWdvbiBwb2ludHMgaW4gdGhlIHNwZWNpZmllZCB3aW5kaW5nIG9yZGVyXG5mdW5jdGlvbiBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgY2xvY2t3aXNlKSB7XG4gICAgdmFyIGksIGxhc3Q7XG5cbiAgICBpZiAoY2xvY2t3aXNlID09PSAoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pID4gMCkpIHtcbiAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gZGltKSBsYXN0ID0gaW5zZXJ0Tm9kZShpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gZW5kIC0gZGltOyBpID49IHN0YXJ0OyBpIC09IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH1cblxuICAgIGlmIChsYXN0ICYmIGVxdWFscyhsYXN0LCBsYXN0Lm5leHQpKSB7XG4gICAgICAgIHJlbW92ZU5vZGUobGFzdCk7XG4gICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3Q7XG59XG5cbi8vIGVsaW1pbmF0ZSBjb2xpbmVhciBvciBkdXBsaWNhdGUgcG9pbnRzXG5mdW5jdGlvbiBmaWx0ZXJQb2ludHMoc3RhcnQsIGVuZCkge1xuICAgIGlmICghc3RhcnQpIHJldHVybiBzdGFydDtcbiAgICBpZiAoIWVuZCkgZW5kID0gc3RhcnQ7XG5cbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBhZ2FpbjtcbiAgICBkbyB7XG4gICAgICAgIGFnYWluID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFwLnN0ZWluZXIgJiYgKGVxdWFscyhwLCBwLm5leHQpIHx8IGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID09PSAwKSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHAgPSBlbmQgPSBwLnByZXY7XG4gICAgICAgICAgICBpZiAocCA9PT0gcC5uZXh0KSBicmVhaztcbiAgICAgICAgICAgIGFnYWluID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCA9IHAubmV4dDtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKGFnYWluIHx8IHAgIT09IGVuZCk7XG5cbiAgICByZXR1cm4gZW5kO1xufVxuXG4vLyBtYWluIGVhciBzbGljaW5nIGxvb3Agd2hpY2ggdHJpYW5ndWxhdGVzIGEgcG9seWdvbiAoZ2l2ZW4gYXMgYSBsaW5rZWQgbGlzdClcbmZ1bmN0aW9uIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCBwYXNzKSB7XG4gICAgaWYgKCFlYXIpIHJldHVybjtcblxuICAgIC8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbiAgICBpZiAoIXBhc3MgJiYgaW52U2l6ZSkgaW5kZXhDdXJ2ZShlYXIsIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgdmFyIHN0b3AgPSBlYXIsXG4gICAgICAgIHByZXYsIG5leHQ7XG5cbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggZWFycywgc2xpY2luZyB0aGVtIG9uZSBieSBvbmVcbiAgICB3aGlsZSAoZWFyLnByZXYgIT09IGVhci5uZXh0KSB7XG4gICAgICAgIHByZXYgPSBlYXIucHJldjtcbiAgICAgICAgbmV4dCA9IGVhci5uZXh0O1xuXG4gICAgICAgIGlmIChpbnZTaXplID8gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSA6IGlzRWFyKGVhcikpIHtcbiAgICAgICAgICAgIC8vIGN1dCBvZmYgdGhlIHRyaWFuZ2xlXG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwcmV2LmkgLyBkaW0gfCAwKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGVhci5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChuZXh0LmkgLyBkaW0gfCAwKTtcblxuICAgICAgICAgICAgcmVtb3ZlTm9kZShlYXIpO1xuXG4gICAgICAgICAgICAvLyBza2lwcGluZyB0aGUgbmV4dCB2ZXJ0ZXggbGVhZHMgdG8gbGVzcyBzbGl2ZXIgdHJpYW5nbGVzXG4gICAgICAgICAgICBlYXIgPSBuZXh0Lm5leHQ7XG4gICAgICAgICAgICBzdG9wID0gbmV4dC5uZXh0O1xuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVhciA9IG5leHQ7XG5cbiAgICAgICAgLy8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnNcbiAgICAgICAgaWYgKGVhciA9PT0gc3RvcCkge1xuICAgICAgICAgICAgLy8gdHJ5IGZpbHRlcmluZyBwb2ludHMgYW5kIHNsaWNpbmcgYWdhaW5cbiAgICAgICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDEpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGRpZG4ndCB3b3JrLCB0cnkgY3VyaW5nIGFsbCBzbWFsbCBzZWxmLWludGVyc2VjdGlvbnMgbG9jYWxseVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZWFyID0gY3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0pO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAyKTtcblxuICAgICAgICAgICAgLy8gYXMgYSBsYXN0IHJlc29ydCwgdHJ5IHNwbGl0dGluZyB0aGUgcmVtYWluaW5nIHBvbHlnb24gaW50byB0d29cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFzcyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHNwbGl0RWFyY3V0KGVhciwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gY2hlY2sgd2hldGhlciBhIHBvbHlnb24gbm9kZSBmb3JtcyBhIHZhbGlkIGVhciB3aXRoIGFkamFjZW50IG5vZGVzXG5mdW5jdGlvbiBpc0VhcihlYXIpIHtcbiAgICB2YXIgYSA9IGVhci5wcmV2LFxuICAgICAgICBiID0gZWFyLFxuICAgICAgICBjID0gZWFyLm5leHQ7XG5cbiAgICBpZiAoYXJlYShhLCBiLCBjKSA+PSAwKSByZXR1cm4gZmFsc2U7IC8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyXG5cbiAgICAvLyBub3cgbWFrZSBzdXJlIHdlIGRvbid0IGhhdmUgb3RoZXIgcG9pbnRzIGluc2lkZSB0aGUgcG90ZW50aWFsIGVhclxuICAgIHZhciBheCA9IGEueCwgYnggPSBiLngsIGN4ID0gYy54LCBheSA9IGEueSwgYnkgPSBiLnksIGN5ID0gYy55O1xuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgeDAgPSBheCA8IGJ4ID8gKGF4IDwgY3ggPyBheCA6IGN4KSA6IChieCA8IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkwID0gYXkgPCBieSA/IChheSA8IGN5ID8gYXkgOiBjeSkgOiAoYnkgPCBjeSA/IGJ5IDogY3kpLFxuICAgICAgICB4MSA9IGF4ID4gYnggPyAoYXggPiBjeCA/IGF4IDogY3gpIDogKGJ4ID4gY3ggPyBieCA6IGN4KSxcbiAgICAgICAgeTEgPSBheSA+IGJ5ID8gKGF5ID4gY3kgPyBheSA6IGN5KSA6IChieSA+IGN5ID8gYnkgOiBjeSk7XG5cbiAgICB2YXIgcCA9IGMubmV4dDtcbiAgICB3aGlsZSAocCAhPT0gYSkge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcC54LCBwLnkpICYmXG4gICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIHZhciBhID0gZWFyLnByZXYsXG4gICAgICAgIGIgPSBlYXIsXG4gICAgICAgIGMgPSBlYXIubmV4dDtcblxuICAgIGlmIChhcmVhKGEsIGIsIGMpID49IDApIHJldHVybiBmYWxzZTsgLy8gcmVmbGV4LCBjYW4ndCBiZSBhbiBlYXJcblxuICAgIHZhciBheCA9IGEueCwgYnggPSBiLngsIGN4ID0gYy54LCBheSA9IGEueSwgYnkgPSBiLnksIGN5ID0gYy55O1xuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgeDAgPSBheCA8IGJ4ID8gKGF4IDwgY3ggPyBheCA6IGN4KSA6IChieCA8IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkwID0gYXkgPCBieSA/IChheSA8IGN5ID8gYXkgOiBjeSkgOiAoYnkgPCBjeSA/IGJ5IDogY3kpLFxuICAgICAgICB4MSA9IGF4ID4gYnggPyAoYXggPiBjeCA/IGF4IDogY3gpIDogKGJ4ID4gY3ggPyBieCA6IGN4KSxcbiAgICAgICAgeTEgPSBheSA+IGJ5ID8gKGF5ID4gY3kgPyBheSA6IGN5KSA6IChieSA+IGN5ID8gYnkgOiBjeSk7XG5cbiAgICAvLyB6LW9yZGVyIHJhbmdlIGZvciB0aGUgY3VycmVudCB0cmlhbmdsZSBiYm94O1xuICAgIHZhciBtaW5aID0gek9yZGVyKHgwLCB5MCwgbWluWCwgbWluWSwgaW52U2l6ZSksXG4gICAgICAgIG1heFogPSB6T3JkZXIoeDEsIHkxLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcblxuICAgIHZhciBwID0gZWFyLnByZXZaLFxuICAgICAgICBuID0gZWFyLm5leHRaO1xuXG4gICAgLy8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgaW4gYm90aCBkaXJlY3Rpb25zXG4gICAgd2hpbGUgKHAgJiYgcC56ID49IG1pblogJiYgbiAmJiBuLnogPD0gbWF4Wikge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmIHAgIT09IGEgJiYgcCAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJiBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuXG4gICAgICAgIGlmIChuLnggPj0geDAgJiYgbi54IDw9IHgxICYmIG4ueSA+PSB5MCAmJiBuLnkgPD0geTEgJiYgbiAhPT0gYSAmJiBuICE9PSBjICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgbi54LCBuLnkpICYmIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgLy8gbG9vayBmb3IgcmVtYWluaW5nIHBvaW50cyBpbiBkZWNyZWFzaW5nIHotb3JkZXJcbiAgICB3aGlsZSAocCAmJiBwLnogPj0gbWluWikge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmIHAgIT09IGEgJiYgcCAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJiBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuICAgIH1cblxuICAgIC8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gaW5jcmVhc2luZyB6LW9yZGVyXG4gICAgd2hpbGUgKG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKG4ueCA+PSB4MCAmJiBuLnggPD0geDEgJiYgbi55ID49IHkwICYmIG4ueSA8PSB5MSAmJiBuICE9PSBhICYmIG4gIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBuLngsIG4ueSkgJiYgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gZ28gdGhyb3VnaCBhbGwgcG9seWdvbiBub2RlcyBhbmQgY3VyZSBzbWFsbCBsb2NhbCBzZWxmLWludGVyc2VjdGlvbnNcbmZ1bmN0aW9uIGN1cmVMb2NhbEludGVyc2VjdGlvbnMoc3RhcnQsIHRyaWFuZ2xlcywgZGltKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBhID0gcC5wcmV2LFxuICAgICAgICAgICAgYiA9IHAubmV4dC5uZXh0O1xuXG4gICAgICAgIGlmICghZXF1YWxzKGEsIGIpICYmIGludGVyc2VjdHMoYSwgcCwgcC5uZXh0LCBiKSAmJiBsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkpIHtcblxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYS5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwLmkgLyBkaW0gfCAwKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGIuaSAvIGRpbSB8IDApO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgdHdvIG5vZGVzIGludm9sdmVkXG4gICAgICAgICAgICByZW1vdmVOb2RlKHApO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwLm5leHQpO1xuXG4gICAgICAgICAgICBwID0gc3RhcnQgPSBiO1xuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIGZpbHRlclBvaW50cyhwKTtcbn1cblxuLy8gdHJ5IHNwbGl0dGluZyBwb2x5Z29uIGludG8gdHdvIGFuZCB0cmlhbmd1bGF0ZSB0aGVtIGluZGVwZW5kZW50bHlcbmZ1bmN0aW9uIHNwbGl0RWFyY3V0KHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIC8vIGxvb2sgZm9yIGEgdmFsaWQgZGlhZ29uYWwgdGhhdCBkaXZpZGVzIHRoZSBwb2x5Z29uIGludG8gdHdvXG4gICAgdmFyIGEgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBiID0gYS5uZXh0Lm5leHQ7XG4gICAgICAgIHdoaWxlIChiICE9PSBhLnByZXYpIHtcbiAgICAgICAgICAgIGlmIChhLmkgIT09IGIuaSAmJiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikpIHtcbiAgICAgICAgICAgICAgICAvLyBzcGxpdCB0aGUgcG9seWdvbiBpbiB0d28gYnkgdGhlIGRpYWdvbmFsXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBzcGxpdFBvbHlnb24oYSwgYik7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWx0ZXIgY29saW5lYXIgcG9pbnRzIGFyb3VuZCB0aGUgY3V0c1xuICAgICAgICAgICAgICAgIGEgPSBmaWx0ZXJQb2ludHMoYSwgYS5uZXh0KTtcbiAgICAgICAgICAgICAgICBjID0gZmlsdGVyUG9pbnRzKGMsIGMubmV4dCk7XG5cbiAgICAgICAgICAgICAgICAvLyBydW4gZWFyY3V0IG9uIGVhY2ggaGFsZlxuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChhLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMCk7XG4gICAgICAgICAgICAgICAgZWFyY3V0TGlua2VkKGMsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiID0gYi5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGEgPSBhLm5leHQ7XG4gICAgfSB3aGlsZSAoYSAhPT0gc3RhcnQpO1xufVxuXG4vLyBsaW5rIGV2ZXJ5IGhvbGUgaW50byB0aGUgb3V0ZXIgbG9vcCwgcHJvZHVjaW5nIGEgc2luZ2xlLXJpbmcgcG9seWdvbiB3aXRob3V0IGhvbGVzXG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlcyhkYXRhLCBob2xlSW5kaWNlcywgb3V0ZXJOb2RlLCBkaW0pIHtcbiAgICB2YXIgcXVldWUgPSBbXSxcbiAgICAgICAgaSwgbGVuLCBzdGFydCwgZW5kLCBsaXN0O1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gaG9sZUluZGljZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgZW5kID0gaSA8IGxlbiAtIDEgPyBob2xlSW5kaWNlc1tpICsgMV0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgbGlzdCA9IGxpbmtlZExpc3QoZGF0YSwgc3RhcnQsIGVuZCwgZGltLCBmYWxzZSk7XG4gICAgICAgIGlmIChsaXN0ID09PSBsaXN0Lm5leHQpIGxpc3Quc3RlaW5lciA9IHRydWU7XG4gICAgICAgIHF1ZXVlLnB1c2goZ2V0TGVmdG1vc3QobGlzdCkpO1xuICAgIH1cblxuICAgIHF1ZXVlLnNvcnQoY29tcGFyZVgpO1xuXG4gICAgLy8gcHJvY2VzcyBob2xlcyBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICBmb3IgKGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZShxdWV1ZVtpXSwgb3V0ZXJOb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0ZXJOb2RlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAtIGIueDtcbn1cblxuLy8gZmluZCBhIGJyaWRnZSBiZXR3ZWVuIHZlcnRpY2VzIHRoYXQgY29ubmVjdHMgaG9sZSB3aXRoIGFuIG91dGVyIHJpbmcgYW5kIGFuZCBsaW5rIGl0XG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBicmlkZ2UgPSBmaW5kSG9sZUJyaWRnZShob2xlLCBvdXRlck5vZGUpO1xuICAgIGlmICghYnJpZGdlKSB7XG4gICAgICAgIHJldHVybiBvdXRlck5vZGU7XG4gICAgfVxuXG4gICAgdmFyIGJyaWRnZVJldmVyc2UgPSBzcGxpdFBvbHlnb24oYnJpZGdlLCBob2xlKTtcblxuICAgIC8vIGZpbHRlciBjb2xsaW5lYXIgcG9pbnRzIGFyb3VuZCB0aGUgY3V0c1xuICAgIGZpbHRlclBvaW50cyhicmlkZ2VSZXZlcnNlLCBicmlkZ2VSZXZlcnNlLm5leHQpO1xuICAgIHJldHVybiBmaWx0ZXJQb2ludHMoYnJpZGdlLCBicmlkZ2UubmV4dCk7XG59XG5cbi8vIERhdmlkIEViZXJseSdzIGFsZ29yaXRobSBmb3IgZmluZGluZyBhIGJyaWRnZSBiZXR3ZWVuIGhvbGUgYW5kIG91dGVyIHBvbHlnb25cbmZ1bmN0aW9uIGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBwID0gb3V0ZXJOb2RlLFxuICAgICAgICBoeCA9IGhvbGUueCxcbiAgICAgICAgaHkgPSBob2xlLnksXG4gICAgICAgIHF4ID0gLUluZmluaXR5LFxuICAgICAgICBtO1xuXG4gICAgLy8gZmluZCBhIHNlZ21lbnQgaW50ZXJzZWN0ZWQgYnkgYSByYXkgZnJvbSB0aGUgaG9sZSdzIGxlZnRtb3N0IHBvaW50IHRvIHRoZSBsZWZ0O1xuICAgIC8vIHNlZ21lbnQncyBlbmRwb2ludCB3aXRoIGxlc3NlciB4IHdpbGwgYmUgcG90ZW50aWFsIGNvbm5lY3Rpb24gcG9pbnRcbiAgICBkbyB7XG4gICAgICAgIGlmIChoeSA8PSBwLnkgJiYgaHkgPj0gcC5uZXh0LnkgJiYgcC5uZXh0LnkgIT09IHAueSkge1xuICAgICAgICAgICAgdmFyIHggPSBwLnggKyAoaHkgLSBwLnkpICogKHAubmV4dC54IC0gcC54KSAvIChwLm5leHQueSAtIHAueSk7XG4gICAgICAgICAgICBpZiAoeCA8PSBoeCAmJiB4ID4gcXgpIHtcbiAgICAgICAgICAgICAgICBxeCA9IHg7XG4gICAgICAgICAgICAgICAgbSA9IHAueCA8IHAubmV4dC54ID8gcCA6IHAubmV4dDtcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gaHgpIHJldHVybiBtOyAvLyBob2xlIHRvdWNoZXMgb3V0ZXIgc2VnbWVudDsgcGljayBsZWZ0bW9zdCBlbmRwb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gb3V0ZXJOb2RlKTtcblxuICAgIGlmICghbSkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyBsb29rIGZvciBwb2ludHMgaW5zaWRlIHRoZSB0cmlhbmdsZSBvZiBob2xlIHBvaW50LCBzZWdtZW50IGludGVyc2VjdGlvbiBhbmQgZW5kcG9pbnQ7XG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIHBvaW50cyBmb3VuZCwgd2UgaGF2ZSBhIHZhbGlkIGNvbm5lY3Rpb247XG4gICAgLy8gb3RoZXJ3aXNlIGNob29zZSB0aGUgcG9pbnQgb2YgdGhlIG1pbmltdW0gYW5nbGUgd2l0aCB0aGUgcmF5IGFzIGNvbm5lY3Rpb24gcG9pbnRcblxuICAgIHZhciBzdG9wID0gbSxcbiAgICAgICAgbXggPSBtLngsXG4gICAgICAgIG15ID0gbS55LFxuICAgICAgICB0YW5NaW4gPSBJbmZpbml0eSxcbiAgICAgICAgdGFuO1xuXG4gICAgcCA9IG07XG5cbiAgICBkbyB7XG4gICAgICAgIGlmIChoeCA+PSBwLnggJiYgcC54ID49IG14ICYmIGh4ICE9PSBwLnggJiZcbiAgICAgICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoaHkgPCBteSA/IGh4IDogcXgsIGh5LCBteCwgbXksIGh5IDwgbXkgPyBxeCA6IGh4LCBoeSwgcC54LCBwLnkpKSB7XG5cbiAgICAgICAgICAgIHRhbiA9IE1hdGguYWJzKGh5IC0gcC55KSAvIChoeCAtIHAueCk7IC8vIHRhbmdlbnRpYWxcblxuICAgICAgICAgICAgaWYgKGxvY2FsbHlJbnNpZGUocCwgaG9sZSkgJiZcbiAgICAgICAgICAgICAgICAodGFuIDwgdGFuTWluIHx8ICh0YW4gPT09IHRhbk1pbiAmJiAocC54ID4gbS54IHx8IChwLnggPT09IG0ueCAmJiBzZWN0b3JDb250YWluc1NlY3RvcihtLCBwKSkpKSkpIHtcbiAgICAgICAgICAgICAgICBtID0gcDtcbiAgICAgICAgICAgICAgICB0YW5NaW4gPSB0YW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0b3ApO1xuXG4gICAgcmV0dXJuIG07XG59XG5cbi8vIHdoZXRoZXIgc2VjdG9yIGluIHZlcnRleCBtIGNvbnRhaW5zIHNlY3RvciBpbiB2ZXJ0ZXggcCBpbiB0aGUgc2FtZSBjb29yZGluYXRlc1xuZnVuY3Rpb24gc2VjdG9yQ29udGFpbnNTZWN0b3IobSwgcCkge1xuICAgIHJldHVybiBhcmVhKG0ucHJldiwgbSwgcC5wcmV2KSA8IDAgJiYgYXJlYShwLm5leHQsIG0sIG0ubmV4dCkgPCAwO1xufVxuXG4vLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXG5mdW5jdGlvbiBpbmRleEN1cnZlKHN0YXJ0LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIGlmIChwLnogPT09IDApIHAueiA9IHpPcmRlcihwLngsIHAueSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgIHAucHJldlogPSBwLnByZXY7XG4gICAgICAgIHAubmV4dFogPSBwLm5leHQ7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcC5wcmV2Wi5uZXh0WiA9IG51bGw7XG4gICAgcC5wcmV2WiA9IG51bGw7XG5cbiAgICBzb3J0TGlua2VkKHApO1xufVxuXG4vLyBTaW1vbiBUYXRoYW0ncyBsaW5rZWQgbGlzdCBtZXJnZSBzb3J0IGFsZ29yaXRobVxuLy8gaHR0cDovL3d3dy5jaGlhcmsuZ3JlZW5lbmQub3JnLnVrL35zZ3RhdGhhbS9hbGdvcml0aG1zL2xpc3Rzb3J0Lmh0bWxcbmZ1bmN0aW9uIHNvcnRMaW5rZWQobGlzdCkge1xuICAgIHZhciBpLCBwLCBxLCBlLCB0YWlsLCBudW1NZXJnZXMsIHBTaXplLCBxU2l6ZSxcbiAgICAgICAgaW5TaXplID0gMTtcblxuICAgIGRvIHtcbiAgICAgICAgcCA9IGxpc3Q7XG4gICAgICAgIGxpc3QgPSBudWxsO1xuICAgICAgICB0YWlsID0gbnVsbDtcbiAgICAgICAgbnVtTWVyZ2VzID0gMDtcblxuICAgICAgICB3aGlsZSAocCkge1xuICAgICAgICAgICAgbnVtTWVyZ2VzKys7XG4gICAgICAgICAgICBxID0gcDtcbiAgICAgICAgICAgIHBTaXplID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpblNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHBTaXplKys7XG4gICAgICAgICAgICAgICAgcSA9IHEubmV4dFo7XG4gICAgICAgICAgICAgICAgaWYgKCFxKSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHFTaXplID0gaW5TaXplO1xuXG4gICAgICAgICAgICB3aGlsZSAocFNpemUgPiAwIHx8IChxU2l6ZSA+IDAgJiYgcSkpIHtcblxuICAgICAgICAgICAgICAgIGlmIChwU2l6ZSAhPT0gMCAmJiAocVNpemUgPT09IDAgfHwgIXEgfHwgcC56IDw9IHEueikpIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IHA7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBwLm5leHRaO1xuICAgICAgICAgICAgICAgICAgICBwU2l6ZS0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBxO1xuICAgICAgICAgICAgICAgICAgICBxID0gcS5uZXh0WjtcbiAgICAgICAgICAgICAgICAgICAgcVNpemUtLTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGFpbCkgdGFpbC5uZXh0WiA9IGU7XG4gICAgICAgICAgICAgICAgZWxzZSBsaXN0ID0gZTtcblxuICAgICAgICAgICAgICAgIGUucHJldlogPSB0YWlsO1xuICAgICAgICAgICAgICAgIHRhaWwgPSBlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwID0gcTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhaWwubmV4dFogPSBudWxsO1xuICAgICAgICBpblNpemUgKj0gMjtcblxuICAgIH0gd2hpbGUgKG51bU1lcmdlcyA+IDEpO1xuXG4gICAgcmV0dXJuIGxpc3Q7XG59XG5cbi8vIHotb3JkZXIgb2YgYSBwb2ludCBnaXZlbiBjb29yZHMgYW5kIGludmVyc2Ugb2YgdGhlIGxvbmdlciBzaWRlIG9mIGRhdGEgYmJveFxuZnVuY3Rpb24gek9yZGVyKHgsIHksIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBjb29yZHMgYXJlIHRyYW5zZm9ybWVkIGludG8gbm9uLW5lZ2F0aXZlIDE1LWJpdCBpbnRlZ2VyIHJhbmdlXG4gICAgeCA9ICh4IC0gbWluWCkgKiBpbnZTaXplIHwgMDtcbiAgICB5ID0gKHkgLSBtaW5ZKSAqIGludlNpemUgfCAwO1xuXG4gICAgeCA9ICh4IHwgKHggPDwgOCkpICYgMHgwMEZGMDBGRjtcbiAgICB4ID0gKHggfCAoeCA8PCA0KSkgJiAweDBGMEYwRjBGO1xuICAgIHggPSAoeCB8ICh4IDw8IDIpKSAmIDB4MzMzMzMzMzM7XG4gICAgeCA9ICh4IHwgKHggPDwgMSkpICYgMHg1NTU1NTU1NTtcblxuICAgIHkgPSAoeSB8ICh5IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeSA9ICh5IHwgKHkgPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB5ID0gKHkgfCAoeSA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHkgPSAoeSB8ICh5IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICByZXR1cm4geCB8ICh5IDw8IDEpO1xufVxuXG4vLyBmaW5kIHRoZSBsZWZ0bW9zdCBub2RlIG9mIGEgcG9seWdvbiByaW5nXG5mdW5jdGlvbiBnZXRMZWZ0bW9zdChzdGFydCkge1xuICAgIHZhciBwID0gc3RhcnQsXG4gICAgICAgIGxlZnRtb3N0ID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC54IDwgbGVmdG1vc3QueCB8fCAocC54ID09PSBsZWZ0bW9zdC54ICYmIHAueSA8IGxlZnRtb3N0LnkpKSBsZWZ0bW9zdCA9IHA7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIGxlZnRtb3N0O1xufVxuXG4vLyBjaGVjayBpZiBhIHBvaW50IGxpZXMgd2l0aGluIGEgY29udmV4IHRyaWFuZ2xlXG5mdW5jdGlvbiBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcHgsIHB5KSB7XG4gICAgcmV0dXJuIChjeCAtIHB4KSAqIChheSAtIHB5KSA+PSAoYXggLSBweCkgKiAoY3kgLSBweSkgJiZcbiAgICAgICAgICAgKGF4IC0gcHgpICogKGJ5IC0gcHkpID49IChieCAtIHB4KSAqIChheSAtIHB5KSAmJlxuICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgPj0gKGN4IC0gcHgpICogKGJ5IC0gcHkpO1xufVxuXG4vLyBjaGVjayBpZiBhIGRpYWdvbmFsIGJldHdlZW4gdHdvIHBvbHlnb24gbm9kZXMgaXMgdmFsaWQgKGxpZXMgaW4gcG9seWdvbiBpbnRlcmlvcilcbmZ1bmN0aW9uIGlzVmFsaWREaWFnb25hbChhLCBiKSB7XG4gICAgcmV0dXJuIGEubmV4dC5pICE9PSBiLmkgJiYgYS5wcmV2LmkgIT09IGIuaSAmJiAhaW50ZXJzZWN0c1BvbHlnb24oYSwgYikgJiYgLy8gZG9uZXMndCBpbnRlcnNlY3Qgb3RoZXIgZWRnZXNcbiAgICAgICAgICAgKGxvY2FsbHlJbnNpZGUoYSwgYikgJiYgbG9jYWxseUluc2lkZShiLCBhKSAmJiBtaWRkbGVJbnNpZGUoYSwgYikgJiYgLy8gbG9jYWxseSB2aXNpYmxlXG4gICAgICAgICAgICAoYXJlYShhLnByZXYsIGEsIGIucHJldikgfHwgYXJlYShhLCBiLnByZXYsIGIpKSB8fCAvLyBkb2VzIG5vdCBjcmVhdGUgb3Bwb3NpdGUtZmFjaW5nIHNlY3RvcnNcbiAgICAgICAgICAgIGVxdWFscyhhLCBiKSAmJiBhcmVhKGEucHJldiwgYSwgYS5uZXh0KSA+IDAgJiYgYXJlYShiLnByZXYsIGIsIGIubmV4dCkgPiAwKTsgLy8gc3BlY2lhbCB6ZXJvLWxlbmd0aCBjYXNlXG59XG5cbi8vIHNpZ25lZCBhcmVhIG9mIGEgdHJpYW5nbGVcbmZ1bmN0aW9uIGFyZWEocCwgcSwgcikge1xuICAgIHJldHVybiAocS55IC0gcC55KSAqIChyLnggLSBxLngpIC0gKHEueCAtIHAueCkgKiAoci55IC0gcS55KTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHBvaW50cyBhcmUgZXF1YWxcbmZ1bmN0aW9uIGVxdWFscyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xufVxuXG4vLyBjaGVjayBpZiB0d28gc2VnbWVudHMgaW50ZXJzZWN0XG5mdW5jdGlvbiBpbnRlcnNlY3RzKHAxLCBxMSwgcDIsIHEyKSB7XG4gICAgdmFyIG8xID0gc2lnbihhcmVhKHAxLCBxMSwgcDIpKTtcbiAgICB2YXIgbzIgPSBzaWduKGFyZWEocDEsIHExLCBxMikpO1xuICAgIHZhciBvMyA9IHNpZ24oYXJlYShwMiwgcTIsIHAxKSk7XG4gICAgdmFyIG80ID0gc2lnbihhcmVhKHAyLCBxMiwgcTEpKTtcblxuICAgIGlmIChvMSAhPT0gbzIgJiYgbzMgIT09IG80KSByZXR1cm4gdHJ1ZTsgLy8gZ2VuZXJhbCBjYXNlXG5cbiAgICBpZiAobzEgPT09IDAgJiYgb25TZWdtZW50KHAxLCBwMiwgcTEpKSByZXR1cm4gdHJ1ZTsgLy8gcDEsIHExIGFuZCBwMiBhcmUgY29sbGluZWFyIGFuZCBwMiBsaWVzIG9uIHAxcTFcbiAgICBpZiAobzIgPT09IDAgJiYgb25TZWdtZW50KHAxLCBxMiwgcTEpKSByZXR1cm4gdHJ1ZTsgLy8gcDEsIHExIGFuZCBxMiBhcmUgY29sbGluZWFyIGFuZCBxMiBsaWVzIG9uIHAxcTFcbiAgICBpZiAobzMgPT09IDAgJiYgb25TZWdtZW50KHAyLCBwMSwgcTIpKSByZXR1cm4gdHJ1ZTsgLy8gcDIsIHEyIGFuZCBwMSBhcmUgY29sbGluZWFyIGFuZCBwMSBsaWVzIG9uIHAycTJcbiAgICBpZiAobzQgPT09IDAgJiYgb25TZWdtZW50KHAyLCBxMSwgcTIpKSByZXR1cm4gdHJ1ZTsgLy8gcDIsIHEyIGFuZCBxMSBhcmUgY29sbGluZWFyIGFuZCBxMSBsaWVzIG9uIHAycTJcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gZm9yIGNvbGxpbmVhciBwb2ludHMgcCwgcSwgciwgY2hlY2sgaWYgcG9pbnQgcSBsaWVzIG9uIHNlZ21lbnQgcHJcbmZ1bmN0aW9uIG9uU2VnbWVudChwLCBxLCByKSB7XG4gICAgcmV0dXJuIHEueCA8PSBNYXRoLm1heChwLngsIHIueCkgJiYgcS54ID49IE1hdGgubWluKHAueCwgci54KSAmJiBxLnkgPD0gTWF0aC5tYXgocC55LCByLnkpICYmIHEueSA+PSBNYXRoLm1pbihwLnksIHIueSk7XG59XG5cbmZ1bmN0aW9uIHNpZ24obnVtKSB7XG4gICAgcmV0dXJuIG51bSA+IDAgPyAxIDogbnVtIDwgMCA/IC0xIDogMDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGludGVyc2VjdHMgYW55IHBvbHlnb24gc2VnbWVudHNcbmZ1bmN0aW9uIGludGVyc2VjdHNQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgcCA9IGE7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC5pICE9PSBhLmkgJiYgcC5uZXh0LmkgIT09IGEuaSAmJiBwLmkgIT09IGIuaSAmJiBwLm5leHQuaSAhPT0gYi5pICYmXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0cyhwLCBwLm5leHQsIGEsIGIpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGxvY2FsbHkgaW5zaWRlIHRoZSBwb2x5Z29uXG5mdW5jdGlvbiBsb2NhbGx5SW5zaWRlKGEsIGIpIHtcbiAgICByZXR1cm4gYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPCAwID9cbiAgICAgICAgYXJlYShhLCBiLCBhLm5leHQpID49IDAgJiYgYXJlYShhLCBhLnByZXYsIGIpID49IDAgOlxuICAgICAgICBhcmVhKGEsIGIsIGEucHJldikgPCAwIHx8IGFyZWEoYSwgYS5uZXh0LCBiKSA8IDA7XG59XG5cbi8vIGNoZWNrIGlmIHRoZSBtaWRkbGUgcG9pbnQgb2YgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbWlkZGxlSW5zaWRlKGEsIGIpIHtcbiAgICB2YXIgcCA9IGEsXG4gICAgICAgIGluc2lkZSA9IGZhbHNlLFxuICAgICAgICBweCA9IChhLnggKyBiLngpIC8gMixcbiAgICAgICAgcHkgPSAoYS55ICsgYi55KSAvIDI7XG4gICAgZG8ge1xuICAgICAgICBpZiAoKChwLnkgPiBweSkgIT09IChwLm5leHQueSA+IHB5KSkgJiYgcC5uZXh0LnkgIT09IHAueSAmJlxuICAgICAgICAgICAgICAgIChweCA8IChwLm5leHQueCAtIHAueCkgKiAocHkgLSBwLnkpIC8gKHAubmV4dC55IC0gcC55KSArIHAueCkpXG4gICAgICAgICAgICBpbnNpZGUgPSAhaW5zaWRlO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IGEpO1xuXG4gICAgcmV0dXJuIGluc2lkZTtcbn1cblxuLy8gbGluayB0d28gcG9seWdvbiB2ZXJ0aWNlcyB3aXRoIGEgYnJpZGdlOyBpZiB0aGUgdmVydGljZXMgYmVsb25nIHRvIHRoZSBzYW1lIHJpbmcsIGl0IHNwbGl0cyBwb2x5Z29uIGludG8gdHdvO1xuLy8gaWYgb25lIGJlbG9uZ3MgdG8gdGhlIG91dGVyIHJpbmcgYW5kIGFub3RoZXIgdG8gYSBob2xlLCBpdCBtZXJnZXMgaXQgaW50byBhIHNpbmdsZSByaW5nXG5mdW5jdGlvbiBzcGxpdFBvbHlnb24oYSwgYikge1xuICAgIHZhciBhMiA9IG5ldyBOb2RlKGEuaSwgYS54LCBhLnkpLFxuICAgICAgICBiMiA9IG5ldyBOb2RlKGIuaSwgYi54LCBiLnkpLFxuICAgICAgICBhbiA9IGEubmV4dCxcbiAgICAgICAgYnAgPSBiLnByZXY7XG5cbiAgICBhLm5leHQgPSBiO1xuICAgIGIucHJldiA9IGE7XG5cbiAgICBhMi5uZXh0ID0gYW47XG4gICAgYW4ucHJldiA9IGEyO1xuXG4gICAgYjIubmV4dCA9IGEyO1xuICAgIGEyLnByZXYgPSBiMjtcblxuICAgIGJwLm5leHQgPSBiMjtcbiAgICBiMi5wcmV2ID0gYnA7XG5cbiAgICByZXR1cm4gYjI7XG59XG5cbi8vIGNyZWF0ZSBhIG5vZGUgYW5kIG9wdGlvbmFsbHkgbGluayBpdCB3aXRoIHByZXZpb3VzIG9uZSAoaW4gYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QpXG5mdW5jdGlvbiBpbnNlcnROb2RlKGksIHgsIHksIGxhc3QpIHtcbiAgICB2YXIgcCA9IG5ldyBOb2RlKGksIHgsIHkpO1xuXG4gICAgaWYgKCFsYXN0KSB7XG4gICAgICAgIHAucHJldiA9IHA7XG4gICAgICAgIHAubmV4dCA9IHA7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBwLm5leHQgPSBsYXN0Lm5leHQ7XG4gICAgICAgIHAucHJldiA9IGxhc3Q7XG4gICAgICAgIGxhc3QubmV4dC5wcmV2ID0gcDtcbiAgICAgICAgbGFzdC5uZXh0ID0gcDtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGUocCkge1xuICAgIHAubmV4dC5wcmV2ID0gcC5wcmV2O1xuICAgIHAucHJldi5uZXh0ID0gcC5uZXh0O1xuXG4gICAgaWYgKHAucHJldlopIHAucHJldloubmV4dFogPSBwLm5leHRaO1xuICAgIGlmIChwLm5leHRaKSBwLm5leHRaLnByZXZaID0gcC5wcmV2Wjtcbn1cblxuZnVuY3Rpb24gTm9kZShpLCB4LCB5KSB7XG4gICAgLy8gdmVydGV4IGluZGV4IGluIGNvb3JkaW5hdGVzIGFycmF5XG4gICAgdGhpcy5pID0gaTtcblxuICAgIC8vIHZlcnRleCBjb29yZGluYXRlc1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IHZlcnRleCBub2RlcyBpbiBhIHBvbHlnb24gcmluZ1xuICAgIHRoaXMucHJldiA9IG51bGw7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcblxuICAgIC8vIHotb3JkZXIgY3VydmUgdmFsdWVcbiAgICB0aGlzLnogPSAwO1xuXG4gICAgLy8gcHJldmlvdXMgYW5kIG5leHQgbm9kZXMgaW4gei1vcmRlclxuICAgIHRoaXMucHJldlogPSBudWxsO1xuICAgIHRoaXMubmV4dFogPSBudWxsO1xuXG4gICAgLy8gaW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBpcyBhIHN0ZWluZXIgcG9pbnRcbiAgICB0aGlzLnN0ZWluZXIgPSBmYWxzZTtcbn1cblxuLy8gcmV0dXJuIGEgcGVyY2VudGFnZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHBvbHlnb24gYXJlYSBhbmQgaXRzIHRyaWFuZ3VsYXRpb24gYXJlYTtcbi8vIHVzZWQgdG8gdmVyaWZ5IGNvcnJlY3RuZXNzIG9mIHRyaWFuZ3VsYXRpb25cbmVhcmN1dC5kZXZpYXRpb24gPSBmdW5jdGlvbiAoZGF0YSwgaG9sZUluZGljZXMsIGRpbSwgdHJpYW5nbGVzKSB7XG4gICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoO1xuICAgIHZhciBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcblxuICAgIHZhciBwb2x5Z29uQXJlYSA9IE1hdGguYWJzKHNpZ25lZEFyZWEoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSkpO1xuICAgIGlmIChoYXNIb2xlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaG9sZUluZGljZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGhvbGVJbmRpY2VzW2ldICogZGltO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBwb2x5Z29uQXJlYSAtPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRyaWFuZ2xlc0FyZWEgPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgdmFyIGEgPSB0cmlhbmdsZXNbaV0gKiBkaW07XG4gICAgICAgIHZhciBiID0gdHJpYW5nbGVzW2kgKyAxXSAqIGRpbTtcbiAgICAgICAgdmFyIGMgPSB0cmlhbmdsZXNbaSArIDJdICogZGltO1xuICAgICAgICB0cmlhbmdsZXNBcmVhICs9IE1hdGguYWJzKFxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2NdKSAqIChkYXRhW2IgKyAxXSAtIGRhdGFbYSArIDFdKSAtXG4gICAgICAgICAgICAoZGF0YVthXSAtIGRhdGFbYl0pICogKGRhdGFbYyArIDFdIC0gZGF0YVthICsgMV0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9seWdvbkFyZWEgPT09IDAgJiYgdHJpYW5nbGVzQXJlYSA9PT0gMCA/IDAgOlxuICAgICAgICBNYXRoLmFicygodHJpYW5nbGVzQXJlYSAtIHBvbHlnb25BcmVhKSAvIHBvbHlnb25BcmVhKTtcbn07XG5cbmZ1bmN0aW9uIHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSB7XG4gICAgdmFyIHN1bSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0LCBqID0gZW5kIC0gZGltOyBpIDwgZW5kOyBpICs9IGRpbSkge1xuICAgICAgICBzdW0gKz0gKGRhdGFbal0gLSBkYXRhW2ldKSAqIChkYXRhW2kgKyAxXSArIGRhdGFbaiArIDFdKTtcbiAgICAgICAgaiA9IGk7XG4gICAgfVxuICAgIHJldHVybiBzdW07XG59XG5cbi8vIHR1cm4gYSBwb2x5Z29uIGluIGEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgZm9ybSAoZS5nLiBhcyBpbiBHZW9KU09OKSBpbnRvIGEgZm9ybSBFYXJjdXQgYWNjZXB0c1xuZWFyY3V0LmZsYXR0ZW4gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBkaW0gPSBkYXRhWzBdWzBdLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0ID0ge3ZlcnRpY2VzOiBbXSwgaG9sZXM6IFtdLCBkaW1lbnNpb25zOiBkaW19LFxuICAgICAgICBob2xlSW5kZXggPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkaW07IGQrKykgcmVzdWx0LnZlcnRpY2VzLnB1c2goZGF0YVtpXVtqXVtkXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICBob2xlSW5kZXggKz0gZGF0YVtpIC0gMV0ubGVuZ3RoO1xuICAgICAgICAgICAgcmVzdWx0LmhvbGVzLnB1c2goaG9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbiIsICJleHBvcnQgKiBmcm9tICcuL2NvbXBvbmVudHMvZmxpcGJvb2suanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jb21wb25lbnRzL3ByZWZhYi1zdG9yYWdlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vY29tcG9uZW50cy9wcmVmYWIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jb21wb25lbnRzL3Nob290QmFzZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2NvbXBvbmVudHMvc25hcC1yb3RhdGUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jb21wb25lbnRzL3Nub3ctcGFydGljbGVzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vY29tcG9uZW50cy90YWdzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvcm5nLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvT2JqZWN0Q2FjaGUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi91dGlscy93bFV0aWxzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvYXJyYXlIZWxwZXJzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvbGVycC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzL3F1ZXVlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvcm5nV2l0aFdlaWdodC5qcyc7XG4iLCAiLyoqXG4gKiBDb21wb25lbnQgcHJvcGVydHkgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBUeXBlO1xuKGZ1bmN0aW9uIChUeXBlKSB7XG4gICAgLyoqXG4gICAgICogKipOYXRpdmUqKlxuICAgICAqXG4gICAgICogUHJvcGVydHkgb2YgYSBuYXRpdmUgY29tcG9uZW50LiBNdXN0IG5vdCBiZSB1c2VkIGluIGN1c3RvbSBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIk5hdGl2ZVwiXSA9IDBdID0gXCJOYXRpdmVcIjtcbiAgICAvKipcbiAgICAgKiAqKkJvb2wqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGNoZWNrYm94LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgZmFsc2VgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkJvb2xcIl0gPSAxXSA9IFwiQm9vbFwiO1xuICAgIC8qKlxuICAgICAqICoqSW50Kio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYW4gaW50ZWdlciBpbnB1dCBmaWVsZC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYDBgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkludFwiXSA9IDJdID0gXCJJbnRcIjtcbiAgICAvKipcbiAgICAgKiAqKkZsb2F0Kio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBmbG9hdGluZyBwb2ludCBpbnB1dCBmaWVsZC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYDAuMGAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZSBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiRmxvYXRcIl0gPSAzXSA9IFwiRmxvYXRcIjtcbiAgICAvKipcbiAgICAgKiAqKlN0cmluZyAvIFRleHQqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHNpbmdsZS1saW5lIHRleHQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGFuIGVtcHR5IHN0cmluZywgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YFxuICAgICAqIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIlN0cmluZ1wiXSA9IDRdID0gXCJTdHJpbmdcIjtcbiAgICAvKipcbiAgICAgKiAqKkVudW1lcmF0aW9uKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBkcm9wZG93biB3aXRoIGdpdmVuIHZhbHVlcy4gVGhlIGFkZGl0aW9uYWxcbiAgICAgKiBgdmFsdWVzYCBwYXJhbWV0ZXIgd2l0aCBzZWxlY3Rpb24gb3B0aW9ucyBpcyBtYW5kYXRvcnkuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvcGVydHkgdmFsdWUgaXMgcmVzb2x2ZWQgdG8gYW4gKippbmRleCoqIGludG8gdGhlIGB2YWx1ZXNgIGFycmF5LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiBgdmFsdWVzYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnlcbiAgICAgKiB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LiBUaGUgYGRlZmF1bHRgIHZhbHVlIGNhbiBiZSBhIHN0cmluZyBvciBhbiBpbmRleFxuICAgICAqIGludG8gYHZhbHVlc2AuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgICAgY2FtZXJhOiB7dHlwZTogVHlwZS5FbnVtLCB2YWx1ZXM6IFsnYXV0bycsICdiYWNrJywgJ2Zyb250J10sIGRlZmF1bHQ6ICdhdXRvJ30sXG4gICAgICogYGBgXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiRW51bVwiXSA9IDVdID0gXCJFbnVtXCI7XG4gICAgLyoqXG4gICAgICogKipPYmplY3QgcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYW4gb2JqZWN0IHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93blxuICAgICAqIHdpdGggb2JqZWN0IHBpY2tlci5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIk9iamVjdFwiXSA9IDZdID0gXCJPYmplY3RcIjtcbiAgICAvKipcbiAgICAgKiAqKk1lc2ggcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBtZXNoIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIk1lc2hcIl0gPSA3XSA9IFwiTWVzaFwiO1xuICAgIC8qKlxuICAgICAqICoqVGV4dHVyZSByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHRleHR1cmUgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiVGV4dHVyZVwiXSA9IDhdID0gXCJUZXh0dXJlXCI7XG4gICAgLyoqXG4gICAgICogKipNYXRlcmlhbCByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIG1hdGVyaWFsIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIk1hdGVyaWFsXCJdID0gOV0gPSBcIk1hdGVyaWFsXCI7XG4gICAgLyoqXG4gICAgICogKipBbmltYXRpb24gcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYW4gYW5pbWF0aW9uIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkFuaW1hdGlvblwiXSA9IDEwXSA9IFwiQW5pbWF0aW9uXCI7XG4gICAgLyoqXG4gICAgICogKipTa2luIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgc2tpbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJTa2luXCJdID0gMTFdID0gXCJTa2luXCI7XG4gICAgLyoqXG4gICAgICogKipDb2xvcioqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgY29sb3Igd2lkZ2V0LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wLCAwLjAsIDEuMF1gLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgICAgKiBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiQ29sb3JcIl0gPSAxMl0gPSBcIkNvbG9yXCI7XG59KShUeXBlIHx8IChUeXBlID0ge30pKTtcbi8qKlxuICogQ29tcG9uZW50IHByb3BlcnR5IG5hbWVzcGFjZS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAqICAgICAgICAgbXlCb29sOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICogICAgICAgICBteUludDogUHJvcGVydHkuaW50KDQyKSxcbiAqICAgICAgICAgbXlTdHJpbmc6IFByb3BlcnR5LnN0cmluZygnSGVsbG8gV29ybGQhJyksXG4gKiAgICAgICAgIG15TWVzaDogUHJvcGVydHkubWVzaCgpLFxuICogICAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEZvciBUeXBlU2NyaXB0IHVzZXJzLCB5b3UgY2FuIHVzZSB0aGUgZGVjb3JhdG9ycyBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydHkgPSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGJvb2xlYW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAgICovXG4gICAgYm9vbChkZWZhdWx0VmFsdWUgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGludGVnZXIgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAwYC5cbiAgICAgKi9cbiAgICBpbnQoZGVmYXVsdFZhbHVlID0gMCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkludCwgZGVmYXVsdDogZGVmYXVsdFZhbHVlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZmxvYXQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAwLjBgLlxuICAgICAqL1xuICAgIGZsb2F0KGRlZmF1bHRWYWx1ZSA9IDAuMCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiBkZWZhdWx0VmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBzdHJpbmcgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAnJ2AuXG4gICAgICovXG4gICAgc3RyaW5nKGRlZmF1bHRWYWx1ZSA9ICcnKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuU3RyaW5nLCBkZWZhdWx0OiBkZWZhdWx0VmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBlbnVtZXJhdGlvbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIGxpc3Qgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIENhbiBiZSBhIHN0cmluZyBvciBhbiBpbmRleCBpbnRvXG4gICAgICogICAgIGB2YWx1ZXNgLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIHRoZSBmaXJzdCBlbGVtZW50LlxuICAgICAqL1xuICAgIGVudW0odmFsdWVzLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5FbnVtLCB2YWx1ZXMsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhbiB7QGxpbmsgT2JqZWN0M0R9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBvYmplY3Qob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLk9iamVjdCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGEge0BsaW5rIE1lc2h9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBtZXNoKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5NZXNoLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgVGV4dHVyZX0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIHRleHR1cmUob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLlRleHR1cmUsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBNYXRlcmlhbH0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIG1hdGVyaWFsKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5NYXRlcmlhbCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGFuIHtAbGluayBBbmltYXRpb259IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBhbmltYXRpb24ob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkFuaW1hdGlvbiwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGEge0BsaW5rIFNraW59IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBza2luKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5Ta2luLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvbG9yIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHIgVGhlIHJlZCBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGcgVGhlIGdyZWVuIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKiBAcGFyYW0gYiBUaGUgYmx1ZSBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGEgVGhlIGFscGhhIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKi9cbiAgICBjb2xvcihyID0gMC4wLCBnID0gMC4wLCBiID0gMC4wLCBhID0gMS4wKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuQ29sb3IsIGRlZmF1bHQ6IFtyLCBnLCBiLCBhXSB9O1xuICAgIH0sXG59O1xuIiwgImltcG9ydCB7IFByb3BlcnR5LCBUeXBlIH0gZnJvbSAnLi9wcm9wZXJ0eS5qcyc7XG4vKipcbiAqIERlY29yYXRvciBmb3IgSlMgY29tcG9uZW50IHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIGRhdGEgVGhlIHByb3BlcnR5IGRlc2NyaXB0aW9uIGFzIGFuIG9iamVjdCBsaXRlcmFsXG4gKiBAcmV0dXJucyBBIGRlY29yYXRvciBmdW5jdGlvbiBtb2RpZnlpbmcgdGhlIGBQcm9wZXJ0aWVzYCBzdGF0aWNcbiAqICAgICBhdHRyaWJ1dGVcbiAqL1xuZnVuY3Rpb24gcHJvcGVydHlEZWNvcmF0b3IoZGF0YSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuICAgICAgICBjdG9yLlByb3BlcnRpZXMgPSBjdG9yLmhhc093blByb3BlcnR5KCdQcm9wZXJ0aWVzJykgPyBjdG9yLlByb3BlcnRpZXMgOiB7fTtcbiAgICAgICAgY3Rvci5Qcm9wZXJ0aWVzW3Byb3BlcnR5S2V5XSA9IGRhdGE7XG4gICAgfTtcbn1cbi8qKlxuICogRGVjb3JhdG9yIGZvciBtYWtpbmcgYSBnZXR0ZXIgZW51bWVyYWJsZS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGB0c1xuICogY2xhc3MgTXlDbGFzcyB7XG4gKiAgICAgQGVudW1lcmFibGUoKVxuICogICAgIGdldCBwcm9qZWN0aW9uTWF0cml4KCk6IEZsb2F0MzJBcnJheSB7IC4uLiB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVudW1lcmFibGUoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfLCBfXywgZGVzY3JpcHRvcikge1xuICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSB0cnVlO1xuICAgIH07XG59XG4vKipcbiAqIERlY29yYXRvciBmb3IgbmF0aXZlIHByb3BlcnRpZXMuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIE15Q2xhc3Mge1xuICogICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gKiAgICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5IHsgLi4uIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmF0aXZlUHJvcGVydHkoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIGVudW1lcmFibGUoKSh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgcHJvcGVydHlEZWNvcmF0b3IoeyB0eXBlOiBUeXBlLk5hdGl2ZSB9KSh0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufVxuLyoqXG4gKiBQcm9wZXJ0eSBkZWNvcmF0b3JzIG5hbWVzcGFjZS5cbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGUgZGVjb3JhdG9ycyB0byBtYXJrIGEgY2xhc3MgYXR0cmlidXRlIGFzXG4gKiBhIFdvbmRlcmxhbmQgRW5naW5lIHByb3BlcnR5LlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQge01lc2h9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKiBpbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG4gKlxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIEBwcm9wZXJ0eS5ib29sKHRydWUpXG4gKiAgICAgbXlCb29sITogYm9vbGVhbjtcbiAqXG4gKiAgICAgQHByb3BlcnR5LmludCg0MilcbiAqICAgICBteUludCE6IG51bWJlcjtcbiAqXG4gKiAgICAgQHByb3BlcnR5LnN0cmluZygnSGVsbG8gV29ybGQhJylcbiAqICAgICBteVN0cmluZyE6IHN0cmluZztcbiAqXG4gKiAgICAgQHByb3BlcnR5Lm1lc2goKVxuICogICAgIG15TWVzaCE6IE1lc2g7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBGb3IgSmF2YVNjcmlwdCB1c2VycywgcGxlYXNlIGRlY2xhcmUgdGhlIHByb3BlcnRpZXMgc3RhdGljYWxseS5cbiAqL1xuZXhwb3J0IGNvbnN0IHByb3BlcnR5ID0ge307XG5mb3IgKGNvbnN0IG5hbWUgaW4gUHJvcGVydHkpIHtcbiAgICAvKiBBc3NpZ24gZWFjaCBwcm9wZXJ0eSBmdW5jdG9yIHRvIGEgVHlwZVNjcmlwdCBkZWNvcmF0b3IuXG4gICAgICogVGhpcyBjb2RlIGV4dHJhY3RzIHBhcmFtZXRlcnMgYW5kIHJldHVybiB0eXBlIHRvIHByb3ZpZGUgcHJvcGVyXG4gICAgICogdHlwaW5ncyB0byB0aGUgdXNlci4gKi9cbiAgICBwcm9wZXJ0eVtuYW1lXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGZ1bmN0b3IgPSBQcm9wZXJ0eVtuYW1lXTtcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5RGVjb3JhdG9yKGZ1bmN0b3IoLi4uYXJncykpO1xuICAgIH07XG59XG4iLCAiLyoqXG4gKiBDaGVjayBpZiBhIGdpdmVuIHZhbHVlIGlzIGEgbmF0aXZlIHN0cmluZyBvciBhIGBTdHJpbmdgIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaGFzIHR5cGUgc3RyaW5nIGxpdGVyYWwgb3IgYFN0cmluZ2AsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICcnKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdmFsdWUuY29uc3RydWN0b3IgPT09IFN0cmluZyk7XG59XG4vKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBuYXRpdmUgbnVtYmVyIG9yIGEgYE51bWJlcmAgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBoYXMgdHlwZSBudW1iZXIgbGl0ZXJhbCBvciBgTnVtYmVyYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdmFsdWUuY29uc3RydWN0b3IgPT09IE51bWJlcjtcbn1cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHZhbHVlIGlzIGEgdmlzdWFsIG1lZGlhLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBpbWFnZSwgdmlkZW8sIG9yIGNhbnZhcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgfHxcbiAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50IHx8XG4gICAgICAgIHZhbHVlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpO1xufVxuIiwgIi8qKiBJbnRlcm5hbCB0eXBlIGZvciB0cmFuc2FjdGlvbi4gKi9cbnZhciBUcmFuc2FjdGlvblR5cGU7XG4oZnVuY3Rpb24gKFRyYW5zYWN0aW9uVHlwZSkge1xuICAgIFRyYW5zYWN0aW9uVHlwZVtUcmFuc2FjdGlvblR5cGVbXCJBZGRpdGlvblwiXSA9IDFdID0gXCJBZGRpdGlvblwiO1xuICAgIFRyYW5zYWN0aW9uVHlwZVtUcmFuc2FjdGlvblR5cGVbXCJSZW1vdmFsXCJdID0gMl0gPSBcIlJlbW92YWxcIjtcbn0pKFRyYW5zYWN0aW9uVHlwZSB8fCAoVHJhbnNhY3Rpb25UeXBlID0ge30pKTtcbi8qKlxuICogRXZlbnQgZW1pdHRlci5cbiAqXG4gKiBUaGlzIGNsYXNzIGFsbG93cyB0byByZWdpc3RlciBsaXN0ZW5lcnMgdGhhdCB3aWxsIGdldCBub3RpZmllZCBieSB0aGUgZW1pdHRlci5cbiAqXG4gKiBVc2FnZSBleGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiAvLyBgb25QcmVSZW5kZXJgIGlzIGFuIGBFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIHNjZW5lLm9uUHJlUmVuZGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnYmVmb3JlIHJlbmRlcmluZycpKTtcbiAqIC8vIGBvblBvc3RSZW5kZXJgIGlzIGFuIGBFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIHNjZW5lLm9uUG9zdFJlbmRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ2FmdGVyIHJlbmRlcmluZycpKTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gY3JlYXRlIHlvdXIgb3duIGVtaXR0ZXJzOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0VtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIG5vdGlmeSBsaXN0ZW5lcnMgaW4gdG8geW91ciBlbWl0dGVyIHVzaW5nIHtAbGluayBFbWl0dGVyLm5vdGlmeX06XG4gKlxuICogYGBganNcbiAqIC8vIE5vdGlmaWVzIGFsbCB0aGUgbGlzdGVuZXJzLlxuICogZW1pdHRlci5ub3RpZnkoKTtcbiAqIC8vIE5vdGlmaWVzIGFsbCB0aGUgbGlzdGVuZXJzIHdpdGggc29tZSBkYXRhLlxuICogZW1pdHRlci5ub3RpZnkoeyBteUludDogNDIsIG15U3RyOiAnSGVsbG8gV29ybGQhJyB9KTtcbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBldmVudFxuICovXG5leHBvcnQgY2xhc3MgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBsaXN0ZW5lcnMgdG8gdHJpZ2dlciB3aGVuIGBub3RpZnlgIGlzIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfbGlzdGVuZXJzID0gW107XG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBlbWl0dGVyIGlzIGN1cnJlbnRseSBub3RpZnlpbmcgbGlzdGVuZXJzLiBUaGlzXG4gICAgICogaXMgdXNlZCB0byBkZWZlciBhZGRpdGlvbiBhbmQgcmVtb3ZhbC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfbm90aWZ5aW5nID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogUGVuZGluZyBhZGRpdGlvbnMgLyByZW1vdmFscywgcGVyZm9ybWVkIGR1cmluZyBhIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfdHJhbnNhY3Rpb25zID0gW107XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBuZXcgbGlzdGVuZXIgdG8gYmUgdHJpZ2dlcmVkIG9uIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICpcbiAgICAgKiBCYXNpYyB1c2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ2V2ZW50IHJlY2VpdmVkIScpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBsaXN0ZW5lciB3aGVuIGFuIGV2ZW50IGlzIHJlY2VpdmVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnZXZlbnQgcmVjZWl2ZWQhJyk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAqIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHJlZ2lzdGVyLlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBsaXN0ZW5lciBvcHRpb25zLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rXG4gICAgICogICAgIGF0IHRoZSB7QGxpbmsgTGlzdGVuZXJPcHRpb25zfSBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICBhZGQobGlzdGVuZXIsIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IG9uY2UgPSBmYWxzZSwgaWQgPSB1bmRlZmluZWQgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IGlkLCBvbmNlLCBjYWxsYmFjazogbGlzdGVuZXIgfTtcbiAgICAgICAgaWYgKHRoaXMuX25vdGlmeWluZykge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25zLnB1c2goeyB0eXBlOiBUcmFuc2FjdGlvblR5cGUuQWRkaXRpb24sIGRhdGEgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIEVtaXR0ZXIuYWRkfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lcnMgVGhlIGNhbGxiYWNrKHMpIHRvIHJlZ2lzdGVyLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIuYWRkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHB1c2goLi4ubGlzdGVuZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2Igb2YgbGlzdGVuZXJzKVxuICAgICAgICAgICAgdGhpcy5hZGQoY2IpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBuZXcgbGlzdGVuZXIgdG8gYmUgdHJpZ2dlcmVkIG9uIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICpcbiAgICAgKiBPbmNlIG5vdGlmaWVkLCB0aGUgbGlzdGVuZXIgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgRW1pdHRlci5hZGR9IHdpdGg6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKGxpc3RlbmVyLCB7b25jZTogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byByZWdpc3Rlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBvbmNlKGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChsaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSByZWdpc3RlcmVkIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogVXNhZ2Ugd2l0aCBhIGNhbGxiYWNrOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBsaXN0ZW5lciA9IChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgKiBlbWl0dGVyLmFkZChsaXN0ZW5lcik7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdXNpbmcgdGhlIGNhbGxiYWNrIHJlZmVyZW5jZTpcbiAgICAgKiBlbWl0dGVyLnJlbW92ZShsaXN0ZW5lcik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBVc2FnZSB3aXRoIGFuIGlkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSksIHtpZDogJ215LWNhbGxiYWNrJ30pO1xuICAgICAqXG4gICAgICogLy8gUmVtb3ZlIHVzaW5nIHRoZSBpZDpcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSgnbXktY2FsbGJhY2snKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFVzaW5nIGlkZW50aWZpZXJzLCB5b3Ugd2lsbCBuZWVkIHRvIGVuc3VyZSB5b3VyIHZhbHVlIGlzIHVuaXF1ZSB0byBhdm9pZFxuICAgICAqIHJlbW92aW5nIGxpc3RlbmVycyBmcm9tIG90aGVyIGxpYnJhcmllcywgZS5nLiw6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSwge2lkOiAnbm9uLXVuaXF1ZSd9KTtcbiAgICAgKiAvLyBUaGlzIHNlY29uZCBsaXN0ZW5lciBjb3VsZCBiZSBhZGRlZCBieSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkuXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKCdIZWxsbyBGcm9tIExpYnJhcnkhJyksIHtpZDogJ25vbi11bmlxdWUnfSk7XG4gICAgICpcbiAgICAgKiAvLyBIbyBTbmFwISBUaGlzIGFsc28gcmVtb3ZlZCB0aGUgbGlicmFyeSBsaXN0ZW5lciFcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSgnbm9uLXVuaXF1ZScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIGlkZW50aWZpZXIgY2FuIGJlIGFueSB0eXBlLiBIb3dldmVyLCByZW1lbWJlciB0aGF0IHRoZSBjb21wYXJpc29uIHdpbGwgYmVcbiAgICAgKiBieS12YWx1ZSBmb3IgcHJpbWl0aXZlIHR5cGVzIChzdHJpbmcsIG51bWJlciksIGJ1dCBieSByZWZlcmVuY2UgZm9yIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnSGVsbG8nKSwge2lkOiB7dmFsdWU6IDQyfX0pO1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdXb3JsZCEnKSwge2lkOiB7dmFsdWU6IDQyfX0pO1xuICAgICAqIGVtaXR0ZXIucmVtb3ZlKHt2YWx1ZTogNDJ9KTsgLy8gTm9uZSBvZiB0aGUgYWJvdmUgbGlzdGVuZXJzIG1hdGNoIVxuICAgICAqIGVtaXR0ZXIubm90aWZ5KCk7IC8vIFByaW50cyAnSGVsbG8nIGFuZCAnV29ybGQhJy5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEhlcmUsIGJvdGggZW1pdHRlcnMgaGF2ZSBpZCBge3ZhbHVlOiA0Mn1gLCBidXQgdGhlIGNvbXBhcmlzb24gaXMgbWFkZSBieSByZWZlcmVuY2UuIFRodXMsXG4gICAgICogdGhlIGByZW1vdmUoKWAgY2FsbCBoYXMgbm8gZWZmZWN0LiBXZSBjYW4gbWFrZSBpdCB3b3JrIGJ5IGRvaW5nOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBpZCA9IHt2YWx1ZTogNDJ9O1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdIZWxsbycpLCB7aWR9KTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnV29ybGQhJyksIHtpZH0pO1xuICAgICAqIGVtaXR0ZXIucmVtb3ZlKGlkKTsgLy8gU2FtZSByZWZlcmVuY2UsIGl0IHdvcmtzIVxuICAgICAqIGVtaXR0ZXIubm90aWZ5KCk7IC8vIERvZXNuJ3QgcHJpbnQuXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgb3IgYSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGBpZGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICByZW1vdmUobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX25vdGlmeWluZykge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25zLnB1c2goeyB0eXBlOiBUcmFuc2FjdGlvblR5cGUuUmVtb3ZhbCwgZGF0YTogbGlzdGVuZXIgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNhbGxiYWNrID09PSBsaXN0ZW5lciB8fCB0YXJnZXQuaWQgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSBsaXN0ZW5lciBpcyByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgcGVyZm9ybXMgYSBsaW5lYXIgc2VhcmNoLlxuICAgICAqXG4gICAgICogKiBAbm90ZSBEb2Vzbid0IGFjY291bnQgZm9yIHBlbmRpbmcgbGlzdGVuZXJzLCBpLmUuLFxuICAgICAqIGxpc3RlbmVycyBhZGRlZCAvIHJlbW92ZWQgZHVyaW5nIGEgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSByZWdpc3RlcmVkIGNhbGxiYWNrIG9yIGEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBgaWRgLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgaGFuZGxlIGlzIGZvdW5kLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBoYXMobGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jYWxsYmFjayA9PT0gbGlzdGVuZXIgfHwgdGFyZ2V0LmlkID09PSBsaXN0ZW5lcilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmeSBsaXN0ZW5lcnMgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBlbnN1cmVzIGFsbCBsaXN0ZW5lcnMgYXJlIGNhbGxlZCBldmVuIGlmXG4gICAgICogYW4gZXhjZXB0aW9uIGlzIHRocm93bi4gRm9yIChwb3NzaWJseSkgZmFzdGVyIG5vdGlmaWNhdGlvbixcbiAgICAgKiBwbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLm5vdGlmeVVuc2FmZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBwYXNzIHRvIGxpc3RlbmVyIHdoZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBub3RpZnkoLi4uZGF0YSkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIHRoaXMuX25vdGlmeWluZyA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5vbmNlKVxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbGJhY2soLi4uZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbm90aWZ5aW5nID0gZmFsc2U7XG4gICAgICAgIC8qIFByb2Nlc3MgZGVmZXJyZWQgYWRkaXRpb25zICYgcmVtb3ZhbHMgKi9cbiAgICAgICAgdGhpcy5fZmx1c2hUcmFuc2FjdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZ5IGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIEJlY2F1c2UgdGhpcyBtZXRob2QgZG9lc24ndCBjYXRjaCBleGNlcHRpb25zLCBzb21lIGxpc3RlbmVyc1xuICAgICAqIHdpbGwgYmUgc2tpcHBlZCBvbiBhIHRocm93LiBQbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLm5vdGlmeX0gZm9yIHNhZmVcbiAgICAgKiBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBwYXNzIHRvIGxpc3RlbmVyIHdoZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBub3RpZnlVbnNhZmUoLi4uZGF0YSkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5vbmNlKVxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLmNhbGxiYWNrKC4uLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIC8qIFByb2Nlc3MgZGVmZXJyZWQgYWRkaXRpb25zICYgcmVtb3ZhbHMgKi9cbiAgICAgICAgdGhpcy5fZmx1c2hUcmFuc2FjdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbiB0aGUgbmV4dCBldmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBwcm9taXNlIG1pZ2h0IG5ldmVyIHJlc29sdmUgaWYgbm8gZXZlbnQgaXMgc2VudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRhdGEgcGFzc2VkIHRvXG4gICAgICogICAgIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICovXG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIF8pID0+IHtcbiAgICAgICAgICAgIHRoaXMub25jZSgoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIGxpc3RlbmVycy5cbiAgICAgKlxuICAgICAqIEBub3RlIERvZXNuJ3QgYWNjb3VudCBmb3IgcGVuZGluZyBsaXN0ZW5lcnMsIGkuZS4sXG4gICAgICogbGlzdGVuZXJzIGFkZGVkIC8gcmVtb3ZlZCBkdXJpbmcgYSBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgZ2V0IGxpc3RlbmVyQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogYHRydWVgIGlmIGl0IGhhcyBubyBsaXN0ZW5lcnMsIGBmYWxzZWAgb3RoZXJ3aXNlLiAqL1xuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lckNvdW50ID09PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGbHVzaCBhbGwgcGVuZGluZyB0cmFuc2FjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2ZsdXNoVHJhbnNhY3Rpb25zKCkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdGhpcy5fdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24udHlwZSA9PT0gVHJhbnNhY3Rpb25UeXBlLkFkZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2godHJhbnNhY3Rpb24uZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSh0cmFuc2FjdGlvbi5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9XG59XG4vKiBEdW1teSB2YWx1ZSB1c2VkIHdpdGggUmV0YWluRW1pdHRlci4gKi9cbmNvbnN0IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQgPSB7fTtcbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IHJldGFpbnMgZXZlbnQgZGF0YSB3aGVuIG5vdGlmaWVkLlxuICpcbiAqIEFmdGVyIGEgbm90aWZpY2F0aW9uIGhhcHBlbnMsIHN1YnNlcXVlbnQgY2FsbHMgdG8ge0BsaW5rIFJldGFpbkVtaXR0ZXIuYWRkfSB3aWxsIGdldFxuICogYXV0b21hdGljYWxseSBub3RpZmllZC5cbiAqXG4gKiBZb3UgY2FuIHVzZSBhbm90aGVyIGVtaXR0ZXIgaW4gb3JkZXIgdG8gY2FuY2VsIHRoZSBsYXN0IHJldGFpbmVkIGV2ZW50OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0VtaXR0ZXIsIFJldGFpbmVkRW1pdHRlcn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBvblN0YXJ0ID0gbmV3IFJldGFpbmVkRW1pdHRlcigpO1xuICpcbiAqIG9uU3RhcnQubm90aWZ5KDQyKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gUHJpbnRzICc0MicuXG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHJlc2V0IHRoZSBzdGF0ZSBvZiB0aGUgZW1pdHRlciwgaS5lLiwgbWFraW5nIGl0IGZvcmdldCBhYm91dCB0aGVcbiAqIGxhc3QgZXZlbnQgdXNpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlciwgUmV0YWluZWRFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IG9uU3RhcnQgPSBuZXcgUmV0YWluZWRFbWl0dGVyKCk7XG4gKiBvblN0YXJ0Lm5vdGlmeSg0Mik7XG4gKiBvblN0YXJ0LmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSkpIC8vIFByaW50cyAnNDInLlxuICpcbiAqIC8vIFJlc2V0IHRoZSBzdGF0ZSBvZiB0aGUgZW1pdHRlci5cbiAqIG9uU3RhcnQucmVzZXQoKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gRG9lc24ndCBwcmludCBhbnl0aGluZy5cbiAqIGBgYFxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGVtaXR0ZXJzLCBwbGVhc2UgaGF2ZSBhIGxvb2sgYXQgdGhlIGJhc2Uge0BsaW5rIEVtaXR0ZXJ9IGNsYXNzLlxuICpcbiAqIEBjYXRlZ29yeSBldmVudFxuICovXG5leHBvcnQgY2xhc3MgUmV0YWluRW1pdHRlciBleHRlbmRzIEVtaXR0ZXIge1xuICAgIC8qKiBQcmUtcmVzb2x2ZWQgZGF0YS4gQGhpZGRlbiAqL1xuICAgIF9ldmVudCA9IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogRW1pdHRlciB0YXJnZXQgdXNlZCB0byByZXNldCB0aGUgc3RhdGUgb2YgdGhpcyBlbWl0dGVyLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9yZXNldDtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgYWRkKGxpc3RlbmVyLCBvcHRzKSB7XG4gICAgICAgIGNvbnN0IGltbWVkaWF0ZSA9IG9wdHM/LmltbWVkaWF0ZSA/PyB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fZXZlbnQgIT09IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQgJiYgaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciguLi50aGlzLl9ldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuYWRkKGxpc3RlbmVyLCBvcHRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byByZWdpc3Rlci5cbiAgICAgKiBAcGFyYW0gaW1tZWRpYXRlIElmIGB0cnVlYCwgZGlyZWN0bHkgcmVzb2x2ZXMgaWYgdGhlIGVtaXR0ZXIgcmV0YWlucyBhIHZhbHVlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIG9uY2UobGlzdGVuZXIsIGltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGQobGlzdGVuZXIsIHsgb25jZTogdHJ1ZSwgaW1tZWRpYXRlIH0pO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgbm90aWZ5KC4uLmRhdGEpIHtcbiAgICAgICAgdGhpcy5fZXZlbnQgPSBkYXRhO1xuICAgICAgICBzdXBlci5ub3RpZnkoLi4uZGF0YSk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBub3RpZnlVbnNhZmUoLi4uZGF0YSkge1xuICAgICAgICB0aGlzLl9ldmVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm5vdGlmeVVuc2FmZSguLi5kYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLlxuICAgICAqXG4gICAgICogRnVydGhlciBjYWxsIHRvIHtAbGluayBFbWl0dGVyLmFkZH0gd2lsbCBub3QgYXV0b21hdGljYWxseSByZXNvbHZlLFxuICAgICAqIHVudGlsIGEgbmV3IGNhbGwgdG8ge0BsaW5rIEVtaXR0ZXIubm90aWZ5fSBpcyBwZXJmb3JtZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5fZXZlbnQgPSBSZXRhaW5FbWl0dGVyVW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIHJldGFpbmVkIGRhdGEsIG9yIGB1bmRlZmluZWRgIGlmIG5vIGRhdGEgd2FzIHJldGFpbmVkLiAqL1xuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RhdGFSZXRhaW5lZCA/IHRoaXMuX2V2ZW50IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogYHRydWVgIGlmIGRhdGEgaXMgcmV0YWluZWQgZnJvbSB0aGUgbGFzdCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuICovXG4gICAgZ2V0IGlzRGF0YVJldGFpbmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnQgIT09IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgfVxufVxuIiwgIi8qKlxuICogU2NoZWR1bGUgYSB0aW1lb3V0LCByZXNvbHZpbmcgaW4gYHRpbWVgIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAbm90ZSBgc2V0VGltZW91dGAgYmVpbmcgYSBtYWNyby10YXNrLCB0aGlzIG1ldGhvZCBjYW5cbiAqIGJlIHVzZSBhcyBhIGRlYm91bmNlIGNhbGwuXG4gKlxuICogQHBhcmFtIHRpbWUgVGhlIHRpbWUgdW50aWwgaXQgcmVzb2x2ZXMsIGluIG1pbGxpc2Vjb25kcy5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgaW4gYHRpbWVgIG1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGltZW91dCh0aW1lKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCB0aW1lKSk7XG59XG4vKipcbiAqIENsYW1wIHRoZSB2YWx1ZSBpbiB0aGUgcmFuZ2UgW21pbjsgbWF4XS5cbiAqXG4gKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZSB0byBjbGFtcC5cbiAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gdmFsdWUgKGluY2x1c2l2ZSkuXG4gKiBAcGFyYW0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIChpbmNsdXNpdmUpLlxuICogQHJldHVybnMgVGhlIGNsYW1wZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWwsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKG1heCwgdmFsKSwgbWluKTtcbn1cbi8qKlxuICogQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIGluIGEgc3RyaW5nLlxuICpcbiAqIEBub3RlIFRoZSBzdHJpbmcgbXVzdCBiZSBVVEYtOC5cbiAqXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0LlxuICogQHJldHVybnMgVGhlIHN0cmluZyB3aXRoIHRoZSBmaXJzdCBsZXR0ZXIgY2FwaXRhbGl6ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RVVEY4KHN0cikge1xuICAgIHJldHVybiBgJHtzdHJbMF0udG9VcHBlckNhc2UoKX0ke3N0ci5zdWJzdHJpbmcoMSl9YDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcHJveHkgdGhyb3dpbmcgZGVzdHJveWVkIGVycm9ycyB1cG9uIGFjY2Vzcy5cbiAqXG4gKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSB0byBkaXNwbGF5IHVwb24gZXJyb3JcbiAqIEByZXR1cm5zIFRoZSBwcm94eSBpbnN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVzdHJveWVkUHJveHkodHlwZSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHBhcmFtKSB7XG4gICAgICAgICAgICBpZiAocGFyYW0gPT09ICdpc0Rlc3Ryb3llZCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZWFkICcke3BhcmFtfScgb2YgZGVzdHJveWVkICR7dHlwZX1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHBhcmFtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAke3R5cGV9YCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4iLCAiLyoqXG4gKiBDcmVhdGUgYSBwcm94eSB0aHJvd2luZyBkZXN0cm95ZWQgZXJyb3JzIHVwb24gYWNjZXNzLlxuICpcbiAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIHRvIGRpc3BsYXkgdXBvbiBlcnJvclxuICogQHJldHVybnMgVGhlIHByb3h5IGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURlc3Ryb3llZFByb3h5KGhvc3QsIHR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgIGdldChfLCBwYXJhbSkge1xuICAgICAgICAgICAgaWYgKHBhcmFtID09PSAnaXNEZXN0cm95ZWQnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHBhcmFtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2NlbmUgcmVzb3VyY2VzLCBzdWNoIGFzOlxuICogLSB7QGxpbmsgVGV4dHVyZX1cbiAqIC0ge0BsaW5rIE1lc2h9XG4gKiAtIHtAbGluayBNYXRlcmlhbH1cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNjZW5lUmVzb3VyY2Uge1xuICAgIHN0YXRpYyBfcGFjayhzY2VuZSwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIChzY2VuZSA8PCAyMikgfCBpbmRleDtcbiAgICB9XG4gICAgLyoqIFJlbGF0aXZlIGluZGV4IGluIHRoZSBob3N0LiBAaGlkZGVuICovXG4gICAgX2luZGV4ID0gLTE7XG4gICAgLyoqIFBhY2tlZCBpZCBjb250YWluaW5nIHJvb3QgYW5kIGluZGV4LiBAaGlkZGVuICovXG4gICAgX2lkID0gLTE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBfaG9zdDtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBpbmRleCkge1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5faWQgPSBTY2VuZVJlc291cmNlLl9wYWNrKGhvc3QuX2luZGV4LCBpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgaWRzIGFuZCAqKm5vdCoqIHRoZSBKYXZhU2NyaXB0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBKYXZhU2NyaXB0IHJlZmVyZW5jZSBjb21wYXJpc29uIGluc3RlYWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1lc2hBID0gc2NlbmVHcm91cC5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hCID0gc2NlbmVHcm91cC5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hDID0gbWVzaEI7XG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cobWVzaEIgPT09IG1lc2hDKTsgLy8gdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICBpZiAoIW90aGVyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdC5faW5kZXggPT09IHRoaXMuX2hvc3QuX2luZGV4ICYmIHRoaXMuX2lkID09PSBvdGhlci5faWQ7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGluc3RhbmNlLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3Q7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdC5lbmdpbmU7XG4gICAgfVxuICAgIC8qKiBJbmRleCBvZiB0aGlzIHRleHR1cmUgaW4gdGhlIHtAbGluayBTY2VuZUdyb3VwfSdzIG1hbmFnZXIuICovXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjbGFzcyBhdHRyaWJ1dGUgLyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA8IDA7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2VyIGZvciByZXNvdXJjZXMuXG4gKlxuICogUmVzb3VyY2VzIGFyZSBhY2Nlc3NlZCB2aWEgdGhlIHNjZW5lIHJvb3QgdGhleSBiZWxvbmcgdG8uXG4gKlxuICogQHNlZSB7QGxpbmsgU2NlbmVHcm91cCN0ZXh0dXJlc30uXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZU1hbmFnZXIge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2hvc3Q7XG4gICAgLyoqIENhY2hlLiBAaGlkZGVuICovXG4gICAgX2NhY2hlID0gW107XG4gICAgLyoqIFJlc291cmNlIGNsYXNzLiBAaGlkZGVuICovXG4gICAgX3RlbXBsYXRlO1xuICAgIC8qKiBEZXN0cnVjdG9yIHByb3h5LCB1c2VkIGlmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAuIEBoaWRkZW4gKi9cbiAgICBfZGVzdHJ1Y3RvciA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IG1hbmFnZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBDbGFzcyBUaGUgY2xhc3MgdG8gaW5zdGFudGlhdGUgd2hlbiB3cmFwcGluZyBhbiBpbmRleC5cbiAgICAgKiBAcGFyYW0gcm9vdCBUaGUgcm9vdCBjb250YWluaW5nIHRoZSBtYW5hZ2VkIHJlc291cmNlcy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBDbGFzcykge1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBDbGFzcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JhcCB0aGUgaW5kZXggaW50byBhIHJlc291cmNlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGluZGV4IGlzIHJlbGF0aXZlIHRvIHRoZSByb290LCBpLmUuLCBkb2Vzbid0IHBhY2sgdGhlIHJvb3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIHJlc291cmNlIGluZGV4LlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgd3JhcChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPD0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5fY2FjaGVbaW5kZXhdID8/XG4gICAgICAgICAgICAodGhpcy5fY2FjaGVbaW5kZXhdID0gbmV3IHRoaXMuX3RlbXBsYXRlKHRoaXMuX2hvc3QsIGluZGV4KSk7XG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgcmVzb3VyY2UgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGluZGV4IGlzIHJlbGF0aXZlIHRvIHRoZSByb290LCBpLmUuLCBkb2Vzbid0IHBhY2sgdGhlIHJvb3QuXG4gICAgICovXG4gICAgZ2V0KGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtpbmRleF0gPz8gbnVsbDtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiB0ZXh0dXJlcyBhbGxvY2F0ZWQgaW4gdGhlIG1hbmFnZXIuICovXG4gICAgZ2V0IGFsbG9jYXRlZENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgdGV4dHVyZXMgaW4gdGhlIG1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgYXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCB3aGVuIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIGdldCBjb3VudCgpIHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCByZXMgb2YgdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgKytjb3VudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdC5lbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgdGFrZXMgY2FyZSBvZiB0aGUgcHJvdG90eXBlIGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZXN0cm95KGluc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5zdGFuY2UuaW5kZXg7XG4gICAgICAgIGluc3RhbmNlLl9pbmRleCA9IC0xO1xuICAgICAgICBpbnN0YW5jZS5faWQgPSAtMTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLl9kZXN0cnVjdG9yKVxuICAgICAgICAgICAgdGhpcy5fZGVzdHJ1Y3RvciA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KHRoaXMuX2hvc3QsIHRoaXMuX3RlbXBsYXRlKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCB0aGlzLl9kZXN0cnVjdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFjayBhIHJlbGF0aXZlIGluZGV4IGludG8gcm9vdCArIHJlbGF0aXZlIGluZGV4IG51bWJlci5cbiAgICAgKiBAcGFyYW0gaW5kZXhcbiAgICAgKi9cbiAgICBfcGFjayhpbmRleCkge1xuICAgICAgICByZXR1cm4gU2NlbmVSZXNvdXJjZS5fcGFjayh0aGlzLl9ob3N0Ll9pbmRleCwgaW5kZXgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTY2VuZUdyb3VwIH0gZnJvbSAnLi4vc2NlbmUtZ3JvdXAuanMnO1xuaW1wb3J0IHsgY2FwaXRhbGl6ZUZpcnN0VVRGOCwgY3JlYXRlRGVzdHJveWVkUHJveHkgfSBmcm9tICcuLi91dGlscy9taXNjLmpzJztcbmltcG9ydCB7IFJlc291cmNlTWFuYWdlciwgU2NlbmVSZXNvdXJjZSB9IGZyb20gJy4vcmVzb3VyY2UuanMnO1xuLyoqXG4gKiBNYXRlcmlhbCBwYXJhbWV0ZXIgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBNYXRlcmlhbFBhcmFtVHlwZTtcbihmdW5jdGlvbiAoTWF0ZXJpYWxQYXJhbVR5cGUpIHtcbiAgICAvKiogVW5zaWduZWQgaW50ZWdlciBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIlVuc2lnbmVkSW50XCJdID0gMF0gPSBcIlVuc2lnbmVkSW50XCI7XG4gICAgLyoqIEludGVnZXIgcGFyYW1ldGVyIHR5cGUuICovXG4gICAgTWF0ZXJpYWxQYXJhbVR5cGVbTWF0ZXJpYWxQYXJhbVR5cGVbXCJJbnRcIl0gPSAxXSA9IFwiSW50XCI7XG4gICAgLyoqIDE2LWJpdCBmbG9hdCBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIkhhbGZGbG9hdFwiXSA9IDJdID0gXCJIYWxmRmxvYXRcIjtcbiAgICAvKiogRmxvYXQgcGFyYW1ldGVyIHR5cGUuICovXG4gICAgTWF0ZXJpYWxQYXJhbVR5cGVbTWF0ZXJpYWxQYXJhbVR5cGVbXCJGbG9hdFwiXSA9IDNdID0gXCJGbG9hdFwiO1xuICAgIC8qKiBTYW1wbGVyIHJlc291cmNlIHBhcmFtZXRlciB0eXBlLCBpLmUuLCBhIHtAbGluayBUZXh0dXJlfS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIlNhbXBsZXJcIl0gPSA0XSA9IFwiU2FtcGxlclwiO1xuICAgIC8qKlxuICAgICAqIEZvbnQgcmVzb3VyY2UgcGFyYW1ldGVyIHR5cGUuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogQ2hhbmdpbmcgZm9udCBpc24ndCBleHBvc2VkIHlldCBhbmQgd2lsbCByYWlzZSBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIkZvbnRcIl0gPSA1XSA9IFwiRm9udFwiO1xufSkoTWF0ZXJpYWxQYXJhbVR5cGUgfHwgKE1hdGVyaWFsUGFyYW1UeXBlID0ge30pKTtcbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgbWF0ZXJpYWwuXG4gKlxuICogRWFjaCBtYXRlcmlhbCBpbnN0YW5jZSB3aWxsIGhhdmUgcHJvcGVydGllcyBhc3NvY2lhdGVkIHRvIHRoZSBwaXBlbGluZSBpdCB1c2VzLlxuICogVGhlIG1hdGVyaWFsIHByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCBtYXRlcmlhbCBpbnN0YW5jZSwgZXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsOyAvLyBNYXRlcmlhbCB3aXRoIGEgYFBob25nIE9wYXF1ZSBUZXh0dXJlZGAgcGlwZWxpbmVcbiAqIC8vIFlvdSBjYW4gYWNjZXNzIGFsbCB0aGUgbWF0ZXJpYWwgcHJvcGVydGllcyBmcm9tIHRoZSBlZGl0b3IgdXNpbmc6XG4gKiBtYXRlcmlhbC5kaWZmdXNlVGV4dHVyZSA9IG51bGw7XG4gKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBbMS4wLCAwLjAsIDAuMCwgMS4wXTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwgZXh0ZW5kcyBTY2VuZVJlc291cmNlIHtcbiAgICAvKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBtYXRlcmlhbHMuICovXG4gICAgc3RhdGljIF9kZXN0cm95ZWRQcm90b3R5cGUgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnbWF0ZXJpYWwnKTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIE1hdGVyaWFsTWFuYWdlciNnZXRUZW1wbGF0ZX0gdmlhIHtAbGluayBTY2VuZUdyb3VwI21hdGVyaWFsc31cbiAgICAgKiB0byBjcmVhdGUgYSBuZXcgbWF0ZXJpYWwgd2l0aCBhIGdpdmVuIHBpcGVsaW5lOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gc2NlbmVHcm91cC5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUoJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAgICAgKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEsIDAsIDBdKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBob3N0IGluc3RhbmNlb2YgU2NlbmVHcm91cCA/IGhvc3QgOiBob3N0LnNjZW5lLmdyb3VwO1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zPy5waXBlbGluZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAncGlwZWxpbmUnXCIpO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBncm91cC5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUocGFyYW1zLnBpcGVsaW5lKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IHRlbXBsYXRlKCk7XG4gICAgICAgICAgICBzdXBlcihncm91cCwgbWF0ZXJpYWwuX2luZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihncm91cCwgcGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciBhIHBhcmFtZXRlciBleGlzdHMgb24gdGhpcyBtYXRlcmlhbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgcGFyYW1ldGVyIHdpdGggbmFtZSBgbmFtZWAgZXhpc3RzIG9uIHRoaXMgbWF0ZXJpYWwsXG4gICAgICogICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGhhc1BhcmFtZXRlcihuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0aGlzLmNvbnN0cnVjdG9yLlBhcmFtZXRlcnM7XG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJzICYmIHBhcmFtZXRlcnMuaGFzKG5hbWUpO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjcGlwZWxpbmV9IGluc3RlYWQuICovXG4gICAgZ2V0IHNoYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZWxpbmU7XG4gICAgfVxuICAgIC8qKiBOYW1lIG9mIHRoZSBwaXBlbGluZSB1c2VkIGJ5IHRoaXMgbWF0ZXJpYWwuICovXG4gICAgZ2V0IHBpcGVsaW5lKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX21hdGVyaWFsX2dldF9waXBlbGluZSh0aGlzLl9pZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb3B5IG9mIHRoZSB1bmRlcmx5aW5nIG5hdGl2ZSBtYXRlcmlhbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIE1hdGVyaWFsIGNsb25lLlxuICAgICAqL1xuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2Nsb25lKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3QubWF0ZXJpYWxzLndyYXAoaW5kZXgpO1xuICAgIH1cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ01hdGVyaWFsKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgTWF0ZXJpYWwoJyR7dGhpcy5waXBlbGluZX0nLCAke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIGEgbmF0aXZlIG1hdGVyaWFsIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVuZ2luZSBFbmdpbmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleC5cbiAgICAgKiBAcmV0dXJucyBNYXRlcmlhbCBpbnN0YW5jZSBvciBgbnVsbGAgaWYgaW5kZXggPD0gMC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUge0BsaW5rIFNjZW5lR3JvdXAjbWF0ZXJpYWxzfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHN0YXRpYyB3cmFwKGVuZ2luZSwgaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IGVuZ2luZS5zY2VuZS5ncm91cDtcbiAgICAgICAgcmV0dXJuIHJvb3QubWF0ZXJpYWxzLndyYXAoaW5kZXgpO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIG1hdGVyaWFscy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlciB7XG4gICAgLyoqIE1hdGVyaWFsIGNsYXNzZXMuIEBoaWRkZW4uICovXG4gICAgX21hdGVyaWFsVGVtcGxhdGVzID0gW107XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgICAgIHN1cGVyKHJvb3QsIE1hdGVyaWFsKTtcbiAgICAgICAgdGhpcy5fY2FjaGVEZWZpbml0aW9ucygpO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgd3JhcChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPD0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLl9jYWNoZVtpbmRleF07XG4gICAgICAgIGlmIChjYWNoZWQpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5faG9zdC5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcGFja2VkID0gdGhpcy5fcGFjayhpbmRleCk7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSB3YXNtLl93bF9tYXRlcmlhbF9nZXRfZGVmaW5pdGlvbihwYWNrZWQpO1xuICAgICAgICBjb25zdCBUZW1wbGF0ZSA9IHRoaXMuX21hdGVyaWFsVGVtcGxhdGVzW2RlZmluaXRpb25dO1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUZW1wbGF0ZShpbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLl93cmFwSW5zdGFuY2UobWF0ZXJpYWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hdGVyaWFsIGNsYXNzIHdpdGggdGhlIGdpdmVuIHBpcGVsaW5lIG5hbWUuXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBzY2VuZUdyb3VwLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ZXJpYWwgPSBuZXcgUGhvbmdNYXRlcmlhbCgpO1xuICAgICAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMS4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgVGhlIHBpcGVsaW5lIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgbWF0ZXJpYWwgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIGBFcnJvcmAgaWYgdGhlIG1hdGVyaWFsIGNsYXNzIGRvZXNuJ3QgZXhpc3QuXG4gICAgICovXG4gICAgZ2V0VGVtcGxhdGUocGlwZWxpbmUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2hvc3QuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfc2NlbmVSb290X2dldF9tYXRlcmlhbF9kZWZpbml0aW9uX2luZGV4KHRoaXMuX2hvc3QuX2luZGV4LCB3YXNtLnRlbXBVVEY4KHBpcGVsaW5lKSk7XG4gICAgICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUGlwZWxpbmUgJyR7cGlwZWxpbmV9JyBkb2Vzbid0IGV4aXN0IGluIHRoZSBzY2VuZWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbFRlbXBsYXRlc1tpbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyYXAgYSBtYXRlcmlhbCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEB0b2RvOiBSZW1vdmUgYXQgMi4wLjAuXG4gICAgICpcbiAgICAgKiBAbm90ZSBXcmFwcGluZyBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZSBwZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgVGhlIG1hdGVyaWFsIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIFRoZSBuZXcgbWF0ZXJpYWwsIHdyYXBwZWQgaW4gYSBwcm94eS5cbiAgICAgKi9cbiAgICBfd3JhcEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlW2luc3RhbmNlLmluZGV4XSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLmxlZ2FjeU1hdGVyaWFsU3VwcG9ydClcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgLyoqIEB0b2RvOiBSZW1vdmUgYXQgMi4wLjAuIFRoaXMgaXMga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4gKi9cbiAgICAgICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoaW5zdGFuY2UsIHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5oYXNQYXJhbWV0ZXIocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIFRoaXMgaXMgc2xvdywgYnV0IHVzZXJzIHNob3VsZCBtaWdyYXRlIHRvIGBnZXRQYXJhbWAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYGdldCR7Y2FwaXRhbGl6ZUZpcnN0VVRGOChwcm9wKX1gO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRbbmFtZV0oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lmhhc1BhcmFtZXRlcihwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKiBUaGlzIGlzIHNsb3csIGJ1dCB1c2VycyBzaG91bGQgbWlncmF0ZSB0byBgZ2V0UGFyYW1gICovXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGBzZXQke2NhcGl0YWxpemVGaXJzdFVURjgocHJvcCl9YDtcbiAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0odmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NhY2hlW2luc3RhbmNlLmluZGV4XSA9IHByb3h5O1xuICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhY2hlIGFsbCBwaXBlbGluZSBkZWZpbml0aW9ucy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfY2FjaGVEZWZpbml0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2hvc3QuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfc2NlbmVSb290X2dldF9tYXRlcmlhbF9kZWZpbml0aW9uX2NvdW50KHRoaXMuX2hvc3QuX2luZGV4KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uSW5kZXggPSB0aGlzLl9wYWNrKGkpO1xuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWxUZW1wbGF0ZXNbaV0gPSB0aGlzLl9jcmVhdGVNYXRlcmlhbFRlbXBsYXRlKGRlZmluaXRpb25JbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbWF0ZXJpYWwgY2xhc3MgZnJvbSBhIGRlZmluaXRpb24gaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2FzbSBUaGUgV0FTTSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gZGVmaW5pdGlvbklkIFRoZSBkZWZpbml0aW9uIGluZGV4IHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIG1hdGVyaWFsIGNsYXNzLlxuICAgICAqL1xuICAgIF9jcmVhdGVNYXRlcmlhbFRlbXBsYXRlKGRlZmluaXRpb25JZCkge1xuICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuX2hvc3Q7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gY2xhc3MgQ3VzdG9tTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbCB7XG4gICAgICAgICAgICBzdGF0aWMgUGFyYW1ldGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5naW5lID0gZ3JvdXAuZW5naW5lO1xuICAgICAgICAgICAgICAgIGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPz8gZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2NyZWF0ZShncm91cC5faW5kZXgsIGRlZmluaXRpb25JZCk7XG4gICAgICAgICAgICAgICAgc3VwZXIoZ3JvdXAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBVbmlmeSB3aXRoIE1hdGVyaWFsLiBXZSBuZWVkIHRvIHdyYXAgaW4gYm90aCBzaW5jZSBtYXRlcmlhbHNcbiAgICAgICAgICAgICAgICAgKiBjYW4gYmUgY3JlYXRlZCB2aWEgdGhlIHBhcmVudCBjbGFzcywgb3IgdmlhIGNoaWxkIGNsYXNzZXMuXG4gICAgICAgICAgICAgICAgICogSW4gYWRkaXRpb24sIHdyYXBwaW5nIHJldHVybnMgYSBwcm94eSwgd2Ugd2FudCB0byBzdXBwb3J0IFByb3h5PE1hdGVyaWFsPlxuICAgICAgICAgICAgICAgICAqIGFzIHdlbGwgYXMgUHJveHk8Q3VzdG9tTWF0ZXJpYWw+LiAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5tYXRlcmlhbHMuX3dyYXBJbnN0YW5jZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IG5iUGFyYW1zID0gd2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fY291bnQoZGVmaW5pdGlvbklkKTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG5iUGFyYW1zOyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fbmFtZShkZWZpbml0aW9uSWQsIGluZGV4KSk7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5QYXJhbWV0ZXJzLmFkZChuYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB3YXNtLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV90eXBlKGRlZmluaXRpb25JZCwgaW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHQgJiAweGZmO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50Q291bnQgPSAodCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgICAvKiBtZXRhVHlwZSBjb3VsZCBhbHNvIGJlIGV4dHJhY3RlZCB1c2luZzogKHQgPj4gMTYpICYgMHhmZiAqL1xuICAgICAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWQgPSBjYXBpdGFsaXplRmlyc3RVVEY4KG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgZ2V0dGVySWQgPSBgZ2V0JHtjYXBpdGFsaXplZH1gO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGVySWQgPSBgc2V0JHtjYXBpdGFsaXplZH1gO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQcm90byA9IHRlbXBsYXRlLnByb3RvdHlwZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gdWludDMyR2V0dGVyKGluZGV4LCBjb21wb25lbnRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBub3csIGl0J3Mgb25seSBwb3NzaWJsZSB0byBzZXQgc2NhbGFyIHVpbnQgdmFsdWVzICovXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gdWludDMyU2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5JbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gaW50MzJHZXR0ZXIoaW5kZXgsIGNvbXBvbmVudENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIG5vdywgaXQncyBvbmx5IHBvc3NpYmxlIHRvIHNldCBzY2FsYXIgaW50IHZhbHVlcy4gSW50ZWdlciB2YWx1ZXMgc2V0dGVyXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIHB1cnBvc2VseSBzaGFyZWQgd2l0aCB1aW50LiAqL1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IHVpbnQzMlNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuSGFsZkZsb2F0OlxuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRmxvYXQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gZmxvYXQzMkdldHRlcihpbmRleCwgY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IGZsb2F0MzJTZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlNhbXBsZXI6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gc2FtcGxlckdldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gc2FtcGxlclNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vKiogQHRvZG86IFdpdGggdGhpcyBpbXBsZW1lbnRhdGlvbiwgYF93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWVgXG4gKiBkbyBub3QgbmVlZCB0byBjaGVjayBmb3IgdGhlIHBhcmFtZXRlciB0eXBlIGFueW1vcmUsIHdlIGNvdWxkIHVzZVxuICogZXhwbGljaXQgY2FsbHMuICovXG5mdW5jdGlvbiB1aW50MzJHZXR0ZXIoaW5kZXgsIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob3V0ID0gbmV3IFVpbnQzMkFycmF5KGNvdW50KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLl90ZW1wTWVtVWludDMyW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHVpbnQzMlNldHRlcihpbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV91aW50KHRoaXMuX2lkLCBpbmRleCwgdmFsdWUpO1xuICAgIH07XG59XG5mdW5jdGlvbiBpbnQzMkdldHRlcihpbmRleCwgY291bnQpIHtcbiAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbUludFswXTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvdXQgPSBuZXcgSW50MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUludFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5mdW5jdGlvbiBmbG9hdDMyR2V0dGVyKGluZGV4LCBjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob3V0ID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUZsb2F0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZsb2F0MzJTZXR0ZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBsZXQgY291bnQgPSAxO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb3VudCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSlcbiAgICAgICAgICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbaV0gPSB2YWx1ZVtpXTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfZmxvYXQodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtLCBjb3VudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNhbXBsZXJHZXR0ZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS50ZXh0dXJlcy53cmFwKHdhc20uX3RlbXBNZW1JbnRbMF0pO1xuICAgIH07XG59XG5mdW5jdGlvbiBzYW1wbGVyU2V0dGVyKGluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbih2YWx1ZSk7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfdWludCh0aGlzLl9pZCwgaW5kZXgsIHZhbHVlLl9pZCk7XG4gICAgfTtcbn1cbiIsICJpbXBvcnQgeyBNZXNoLCBNZXNoSW5kZXhUeXBlLCBNZXNoU2tpbm5pbmdUeXBlIH0gZnJvbSAnLi4vd29uZGVybGFuZC5qcyc7XG5pbXBvcnQgeyBSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuL3Jlc291cmNlLmpzJztcbi8qKlxuICogTWFuYWdlIG1lc2hlcy5cbiAqXG4gKiBUaGlzIG1hbmFnZXIgaXMgYWNjZXNzaWJsZSBvbiBhIHNjZW5lIGdyb3VwIHVzaW5nIHtAbGluayBTY2VuZUdyb3VwLm1lc2hlc30uXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNoTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoZ3JvdXApIHtcbiAgICAgICAgc3VwZXIoZ3JvdXAsIE1lc2gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgbWVzaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXMgVmVydGV4IGFuZCBpbmRleCBkYXRhLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2tcbiAgICAgKiAgICAgYXQgdGhlIHtAbGluayBNZXNoUGFyYW1ldGVyc30gb2JqZWN0LlxuICAgICAqL1xuICAgIGNyZWF0ZShwYXJhbXMpIHtcbiAgICAgICAgaWYgKCFwYXJhbXMudmVydGV4Q291bnQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAndmVydGV4Q291bnQnXCIpO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5faG9zdC5lbmdpbmUud2FzbTtcbiAgICAgICAgbGV0IGluZGV4RGF0YSA9IDA7XG4gICAgICAgIGxldCBpbmRleFR5cGUgPSAwO1xuICAgICAgICBsZXQgaW5kZXhEYXRhU2l6ZSA9IDA7XG4gICAgICAgIGlmIChwYXJhbXMuaW5kZXhEYXRhKSB7XG4gICAgICAgICAgICBpbmRleFR5cGUgPSBwYXJhbXMuaW5kZXhUeXBlIHx8IE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDtcbiAgICAgICAgICAgIGluZGV4RGF0YVNpemUgPSBwYXJhbXMuaW5kZXhEYXRhLmxlbmd0aCAqIGluZGV4VHlwZTtcbiAgICAgICAgICAgIGluZGV4RGF0YSA9IHdhc20uX21hbGxvYyhpbmRleERhdGFTaXplKTtcbiAgICAgICAgICAgIC8qIENvcHkgdGhlIGluZGV4IGRhdGEgaW50byB3YXNtIG1lbW9yeSAqL1xuICAgICAgICAgICAgc3dpdGNoIChpbmRleFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlOlxuICAgICAgICAgICAgICAgICAgICB3YXNtLkhFQVBVOC5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkU2hvcnQ6XG4gICAgICAgICAgICAgICAgICAgIHdhc20uSEVBUFUxNi5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhID4+IDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIHdhc20uSEVBUFUzMi5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhID4+IDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHNraW5uaW5nVHlwZSA9IE1lc2hTa2lubmluZ1R5cGUuTm9uZSB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX21lc2hfY3JlYXRlKHRoaXMuX2hvc3QuX2luZGV4LCBpbmRleERhdGEsIGluZGV4RGF0YVNpemUsIGluZGV4VHlwZSwgcGFyYW1zLnZlcnRleENvdW50LCBza2lubmluZ1R5cGUpO1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBNZXNoKHRoaXMuX2hvc3QsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gaW5zdGFuY2U7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uL3dvbmRlcmxhbmQuanMnO1xuaW1wb3J0IHsgUmVzb3VyY2VNYW5hZ2VyLCBTY2VuZVJlc291cmNlIH0gZnJvbSAnLi9yZXNvdXJjZS5qcyc7XG4vKipcbiAqIE1hbmFnZSB0ZXh0dXJlcy5cbiAqXG4gKiBUaGlzIG1hbmFnZXIgaXMgYWNjZXNzaWJsZSBvbiB0aGUgZW5naW5lIGluc3RhbmNlIHVzaW5nIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnRleHR1cmVzfS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBqc1xuICogdGhpcy5lbmdpbmUubG9hZCgncGF0aC90by90ZXh0dXJlLnBuZycpLnRoZW4oKHRleHR1cmUpID0+IHtcbiAqICAgICBjb25zb2xlLmxvZygnTG9hZGVkIScpO1xuICogICAgIGNvbnNvbGUubG9nKHRleHR1cmUpO1xuICogfSlcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZU1hbmFnZXIgZXh0ZW5kcyBSZXNvdXJjZU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJvb3QpIHtcbiAgICAgICAgc3VwZXIocm9vdCwgVGV4dHVyZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyB0ZXh0dXJlIGZyb20gYW4gaW1hZ2Ugb3IgdmlkZW8uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgbWVkaWEgbXVzdCBhbHJlYWR5IGJlIGxvYWRlZC4gVG8gYXV0b21hdGljYWxseVxuICAgICAqIGxvYWQgdGhlIG1lZGlhIGFuZCBjcmVhdGUgYSB0ZXh0dXJlLCB1c2Uge0BsaW5rIFRleHR1cmVNYW5hZ2VyLmxvYWR9IGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW1hZ2UgTWVkaWEgZWxlbWVudCB0byBjcmVhdGUgdGhlIHRleHR1cmUgZnJvbS5cbiAgICAgKiBAcmV0XFx1cm5zIFRoZSBuZXcgdGV4dHVyZSB3aXRoIHRoZSBtZWRpYSBjb250ZW50LlxuICAgICAqL1xuICAgIGNyZWF0ZShpbWFnZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QganNJbWFnZUluZGV4ID0gd2FzbS5faW1hZ2VzLmxlbmd0aDtcbiAgICAgICAgd2FzbS5faW1hZ2VzLnB1c2goaW1hZ2UpO1xuICAgICAgICBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmICFpbWFnZS5jb21wbGV0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbWFnZSBtdXN0IGJlIHJlYWR5IHRvIGNyZWF0ZSBhIHRleHR1cmUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aWR0aCA9IGltYWdlLnZpZGVvV2lkdGggPz8gaW1hZ2Uud2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGltYWdlLnZpZGVvSGVpZ2h0ID8/IGltYWdlLmhlaWdodDtcbiAgICAgICAgY29uc3QgaG9zdCA9IHRoaXMuX2hvc3QuX2luZGV4O1xuICAgICAgICBjb25zdCBpbWFnZUluZGV4ID0gd2FzbS5fd2xfaW1hZ2VfY3JlYXRlKGhvc3QsIGpzSW1hZ2VJbmRleCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIC8qIFJlcXVpcmVkIGJlY2F1c2UgdGhlIGltYWdlIGlzbid0IGEgcmVzb3VyY2UgYnkgaXRzZWxmLCBidXQgd2lsbCBldmVudHVhbGx5IGJlIG9uZS4gKi9cbiAgICAgICAgY29uc3QgaW1hZ2VJZCA9IFNjZW5lUmVzb3VyY2UuX3BhY2soaG9zdCwgaW1hZ2VJbmRleCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfdGV4dHVyZV9jcmVhdGUoaG9zdCwgaW1hZ2VJZCk7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFRleHR1cmUodGhpcy5faG9zdCwgaW5kZXgpO1xuICAgICAgICB0aGlzLl9jYWNoZVtpbnN0YW5jZS5pbmRleF0gPSBpbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIGltYWdlIGZyb20gVVJMIGFzIHtAbGluayBUZXh0dXJlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSBVUkwgdG8gbG9hZCBmcm9tLlxuICAgICAqIEBwYXJhbSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4gZmxhZyBmb3IgdGhlIGltYWdlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyBMb2FkZWQgdGV4dHVyZS5cbiAgICAgKi9cbiAgICBsb2FkKGZpbGVuYW1lLCBjcm9zc09yaWdpbikge1xuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbiA/PyBpbWFnZS5jcm9zc09yaWdpbjtcbiAgICAgICAgaW1hZ2Uuc3JjID0gZmlsZW5hbWU7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLmNyZWF0ZShpbWFnZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdGYWlsZWQgdG8gbG9hZCBpbWFnZS4gTm90IGZvdW5kIG9yIG5vIHJlYWQgYWNjZXNzJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBGZXRjaCBhIGZpbGUgYXMgYW4gYEFycmF5QnVmZmVyYCwgd2l0aCBmZXRjaCBwcm9ncmVzcyBwYXNzZWQgdG8gYSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0gcGF0aCBQYXRoIG9mIHRoZSBmaWxlIHRvIGZldGNoXG4gKiBAcGFyYW0gb25Qcm9ncmVzcyBDYWxsYmFjayByZWNlaXZpbmcgdGhlIGN1cnJlbnQgZmV0Y2ggcHJvZ3Jlc3MgYW5kIHRvdGFsXG4gKiAgICAgc2l6ZSwgaW4gYnl0ZXMuIEFsc28gY2FsbGVkIGEgZmluYWwgdGltZSBvbiBjb21wbGV0aW9uLlxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGZldGNoIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoV2l0aFByb2dyZXNzKHBhdGgsIG9uUHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHBhdGgpO1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgeGhyLm9ucHJvZ3Jlc3MgPSAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcy5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcz8uKHByb2dyZXNzLmxvYWRlZCwgcHJvZ3Jlc3MudG90YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSB4aHIucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcz8uKGJ1ZmZlci5ieXRlTGVuZ3RoLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShidWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBHZXQgcGFyZW50IHBhdGggZnJvbSBhIFVSTC5cbiAqXG4gKiBAcGFyYW0gdXJsIFVSTCB0byBnZXQgdGhlIHBhcmVudCBmcm9tLlxuICogQHJldHVybnMgUGFyZW50IFVSTCB3aXRob3V0IHRyYWlsaW5nIHNsYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZVVybCh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoJy8nKSk7XG59XG4vKipcbiAqIEdldCB0aGUgZmlsZW5hbWUgb2YgYSB1cmwuXG4gKlxuICogQHBhcmFtIHVybCBUaGUgdXJsIHRvIGV4dHJhY3QgdGhlIG5hbWUgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGZpbGVuYW1lLiBJZiBubyBmaWxlbmFtZSBpcyBmb3VuZCxcbiAqICAgICByZXR1cm5zIHRoZSBpbnB1dCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlbmFtZSh1cmwpIHtcbiAgICBpZiAodXJsLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgLyogUmVtb3ZlIHRyYWlsaW5nIHNsYXNoLiAqL1xuICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5sYXN0SW5kZXhPZignLycpKTtcbiAgICB9XG4gICAgY29uc3QgbGFzdFNsYXNoID0gdXJsLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgaWYgKGxhc3RTbGFzaCA8IDApXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcobGFzdFNsYXNoICsgMSk7XG59XG4vKipcbiAqIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgaW1hZ2UgaXMgcmVhZHkgdG8gYmUgdXNlZFxuICpcbiAqIEBwYXJhbSBpbWFnZSBUaGUgaW1hZ2UsIHZpZGVvLCBvciBjYW52YXMgdG8gd2FpdCBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2Ugd2l0aCB0aGUgaW1hZ2UsIG9uY2UgaXQncyByZWFkeSB0byBiZSB1c2VkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25JbWFnZVJlYWR5KGltYWdlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgcmVzKGltYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbWFnZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChpbWFnZS5yZWFkeVN0YXRlID49IDIpIHtcbiAgICAgICAgICAgICAgICByZXMoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlLnJlYWR5U3RhdGUgPj0gMilcbiAgICAgICAgICAgICAgICAgICAgcmVzKGltYWdlKTtcbiAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbWFnZS5jb21wbGV0ZSkge1xuICAgICAgICAgICAgcmVzKGltYWdlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gcmVzKGltYWdlKSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlaiwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH0pO1xufVxuIiwgImltcG9ydCB7IExvZ1RhZyB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgQW5pbWF0aW9uQ29tcG9uZW50LCBCcm9rZW5Db21wb25lbnQsIENvbGxpc2lvbkNvbXBvbmVudCwgRGVzdHJveWVkQ29tcG9uZW50SW5zdGFuY2UsIElucHV0Q29tcG9uZW50LCBMaWdodENvbXBvbmVudCwgTWVzaENvbXBvbmVudCwgUGh5c1hDb21wb25lbnQsIFRleHRDb21wb25lbnQsIFZpZXdDb21wb25lbnQsIH0gZnJvbSAnLi93b25kZXJsYW5kLmpzJztcbi8qKlxuICogTWFuYWdlIGFsbCBjb21wb25lbnQgbWFuYWdlcnMgaW4gYSBzY2VuZS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRNYW5hZ2VycyB7XG4gICAgLyoqIEFuaW1hdGlvbiBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIGFuaW1hdGlvbiA9IC0xO1xuICAgIC8qKiBDb2xsaXNpb24gbWFuYWdlciBpbmRleC4gKi9cbiAgICBjb2xsaXNpb24gPSAtMTtcbiAgICAvKiogSmF2YVNjcmlwdCBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIGpzID0gLTE7XG4gICAgLyoqIFBoeXN4IG1hbmFnZXIgaW5kZXguICovXG4gICAgcGh5c3ggPSAtMTtcbiAgICAvKiogVmlldyBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHZpZXcgPSAtMTtcbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgY2xhc3MgaW5zdGFuY2VzIHBlciB0eXBlIHRvIGF2b2lkIEdDLlxuICAgICAqXG4gICAgICogQG5vdGUgTWFwcyB0aGUgbWFuYWdlciBpbmRleCB0byB0aGUgbGlzdCBvZiBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHRvZG86IFJlZmFjdG9yIFJlc291cmNlTWFuYWdlciBhbmQgcmUtdXNlIGZvciBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIF9jYWNoZSA9IFtdO1xuICAgIC8qKiBNYW5hZ2VyIGluZGV4IHRvIGNvbXBvbmVudCBjbGFzcy4gKi9cbiAgICBfY29uc3RydWN0b3JzO1xuICAgIC8qIE1hbmFnZXIgbmFtZSB0byB0aGUgbWFuYWdlciBpbmRleC4gKi9cbiAgICBfbmF0aXZlTWFuYWdlcnMgPSBuZXcgTWFwKCk7XG4gICAgLyoqIEhvc3QgaW5zdGFuY2UuICovXG4gICAgX3NjZW5lO1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgbmF0aXZlID0gW1xuICAgICAgICAgICAgQW5pbWF0aW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgQ29sbGlzaW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgSW5wdXRDb21wb25lbnQsXG4gICAgICAgICAgICBMaWdodENvbXBvbmVudCxcbiAgICAgICAgICAgIE1lc2hDb21wb25lbnQsXG4gICAgICAgICAgICBQaHlzWENvbXBvbmVudCxcbiAgICAgICAgICAgIFRleHRDb21wb25lbnQsXG4gICAgICAgICAgICBWaWV3Q29tcG9uZW50LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBBcnJheShuYXRpdmUubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5fY29uc3RydWN0b3JzID0gbmV3IEFycmF5KG5hdGl2ZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGNvbnN0IENsYXNzIG9mIG5hdGl2ZSkge1xuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS50ZW1wVVRGOChDbGFzcy5UeXBlTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2NvbXBvbmVudF9tYW5hZ2VyX2luZGV4KHNjZW5lLl9pbmRleCwgcHRyKTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cnVjdG9ycztcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cnVjdG9yc1ttYW5hZ2VyXSA9IENsYXNzO1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVbbWFuYWdlcl0gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX25hdGl2ZU1hbmFnZXJzLnNldChDbGFzcy5UeXBlTmFtZSwgbWFuYWdlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5nZXQoQW5pbWF0aW9uQ29tcG9uZW50LlR5cGVOYW1lKTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb24gPSB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5nZXQoQ29sbGlzaW9uQ29tcG9uZW50LlR5cGVOYW1lKTtcbiAgICAgICAgdGhpcy5waHlzeCA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChQaHlzWENvbXBvbmVudC5UeXBlTmFtZSk7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChWaWV3Q29tcG9uZW50LlR5cGVOYW1lKTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS50ZW1wVVRGOCgnanMnKTtcbiAgICAgICAgdGhpcy5qcyA9IHdhc20uX3dsX3NjZW5lX2dldF9jb21wb25lbnRfbWFuYWdlcl9pbmRleChzY2VuZS5faW5kZXgsIHB0cik7XG4gICAgICAgIHRoaXMuX2NhY2hlW3RoaXMuanNdID0gW107XG4gICAgfVxuICAgIGNyZWF0ZUpzKGluZGV4LCBpZCwgdHlwZSwgb2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY3RvciA9IHdhc20uX2NvbXBvbmVudFR5cGVzW3R5cGVdO1xuICAgICAgICBpZiAoIWN0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVHlwZSBpbmRleCAke3R5cGV9IGlzbid0IHJlZ2lzdGVyZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2cgPSB0aGlzLl9zY2VuZS5lbmdpbmUubG9nO1xuICAgICAgICBsZXQgY29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IG5ldyBjdG9yKHRoaXMuX3NjZW5lLCB0aGlzLmpzLCBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBgRXhjZXB0aW9uIGR1cmluZyBpbnN0YW50aWF0aW9uIG9mIGNvbXBvbmVudCAke2N0b3IuVHlwZU5hbWV9YCk7XG4gICAgICAgICAgICBsb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICBjb21wb25lbnQgPSBuZXcgQnJva2VuQ29tcG9uZW50KHRoaXMuX3NjZW5lKTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnQuX29iamVjdCA9IHRoaXMuX3NjZW5lLndyYXAob2JqZWN0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5yZXNldFByb3BlcnRpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7Y29tcG9uZW50LnR5cGV9IHJlc2V0UHJvcGVydGllcygpIG9uIG9iamVjdCAke2NvbXBvbmVudC5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgIGxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZS5fanNDb21wb25lbnRzW2luZGV4XSA9IGNvbXBvbmVudDtcbiAgICAgICAgLyogQWRkIHRvIGNhY2hlLiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgZGVzdHJ1Y3Rpb24gaXNcbiAgICAgICAgICogSUQtYmFzZWQgYW5kIG5vdCBpbmRleC1iYXNlZC4gKi9cbiAgICAgICAgdGhpcy5fY2FjaGVbdGhpcy5qc11baWRdID0gY29tcG9uZW50O1xuICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIGNhY2hlZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFuYWdlciBUaGUgbWFuYWdlciBpbmRleC5cbiAgICAgKiBAcGFyYW0gaWQgVGhlIGNvbXBvbmVudCBpZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGlmIGNhY2hlZCwgYG51bGxgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBnZXQobWFuYWdlciwgaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlW21hbmFnZXJdW2lkXSA/PyBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSWQgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgaW5zdGFuY2UgaWYgaXQgd2FzIGNhY2hlZCwgb3IgYSBuZXcgb25lLlxuICAgICAqL1xuICAgIHdyYXBBbmltYXRpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZSh0aGlzLmFuaW1hdGlvbiwgaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBjb2xsaXNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSWQgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgaW5zdGFuY2UgaWYgaXQgd2FzIGNhY2hlZCwgb3IgYSBuZXcgb25lLlxuICAgICAqL1xuICAgIHdyYXBDb2xsaXNpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZSh0aGlzLmNvbGxpc2lvbiwgaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIElkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwVmlldyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwTmF0aXZlKHRoaXMudmlldywgaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBwaHlzeC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBJZCB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBpbnN0YW5jZSBpZiBpdCB3YXMgY2FjaGVkLCBvciBhIG5ldyBvbmUuXG4gICAgICovXG4gICAgd3JhcFBoeXN4KGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBOYXRpdmUodGhpcy5waHlzeCwgaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSBjb21wb25lbnQgaW5zdGFuY2UgaWYgaXQgZXhpc3RzLCBvciBjcmVhdGUgYW5kIGNhY2hlXG4gICAgICogYSBuZXcgb25lLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LiBQbGVhc2UgaGF2ZSBhIGxvb2sgYXRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuYWRkQ29tcG9uZW50fSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudFR5cGUgQ29tcG9uZW50IG1hbmFnZXIgaW5kZXhcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50SWQgQ29tcG9uZW50IGlkIGluIHRoZSBtYW5hZ2VyXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGluc3RhbmNlIHdyYXBwaW5nIHRoZSBuYXRpdmUgY29tcG9uZW50XG4gICAgICovXG4gICAgd3JhcE5hdGl2ZShtYW5hZ2VyLCBpZCkge1xuICAgICAgICBpZiAoaWQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY2FjaGVbbWFuYWdlcl07XG4gICAgICAgIGlmIChjYWNoZVtpZF0pXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVbaWRdO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgICAgICBjb25zdCBDbGFzcyA9IHRoaXMuX2NvbnN0cnVjdG9yc1ttYW5hZ2VyXTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gbmV3IENsYXNzKHNjZW5lLCBtYW5hZ2VyLCBpZCk7XG4gICAgICAgIGNhY2hlW2lkXSA9IGNvbXBvbmVudDtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JhcCBhIG5hdGl2ZSBvciBqcyBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIEZvciBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhhdCB3ZXJlbid0IHByZXZpb3VzbHkgY2FjaGVkLFxuICAgICAqIHNpbmNlIHRoYXQgd291bGQgYmUgYSBidWcgaW4gdGhlIHJ1bnRpbWUgLyBhcGkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFuYWdlciBUaGUgbWFuYWdlciBpbmRleC5cbiAgICAgKiBAcGFyYW0gaWQgVGhlIGlkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwQW55KG1hbmFnZXIsIGlkKSB7XG4gICAgICAgIGlmIChpZCA8IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKG1hbmFnZXIgPT09IHRoaXMuanMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5fY2FjaGVbdGhpcy5qc11baWRdO1xuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlMgY29tcG9uZW50cyBtdXN0IGFsd2F5cyBiZSBjYWNoZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3VuZC5jb25zdHJ1Y3RvciAhPT0gQnJva2VuQ29tcG9uZW50ID8gZm91bmQgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBOYXRpdmUobWFuYWdlciwgaWQpO1xuICAgIH1cbiAgICBnZXROYXRpdmVNYW5hZ2VyKG5hbWUpIHtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChuYW1lKTtcbiAgICAgICAgcmV0dXJuIG1hbmFnZXIgIT09IHVuZGVmaW5lZCA/IG1hbmFnZXIgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGNsZWFudXAgdXBvbiBjb21wb25lbnQgZGVzdHJ1Y3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIGRlc3Ryb3kuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZGVzdHJveShpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBsb2NhbElkID0gaW5zdGFuY2UuX2xvY2FsSWQ7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBpbnN0YW5jZS5fbWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UuX2lkID0gLTE7XG4gICAgICAgIGluc3RhbmNlLl9sb2NhbElkID0gLTE7XG4gICAgICAgIGluc3RhbmNlLl9tYW5hZ2VyID0gLTE7XG4gICAgICAgIGNvbnN0IGVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdGhpcy5fc2NlbmUuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95O1xuICAgICAgICAvKiBEZXN0cm95IHRoZSBwcm90b3R5cGUgb2YgdGhpcyBpbnN0YW5jZSB0byBhdm9pZCB1c2luZyBhIGRhbmdsaW5nIGNvbXBvbmVudCAqL1xuICAgICAgICBpZiAoZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgJiYgaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihpbnN0YW5jZSwgRGVzdHJveWVkQ29tcG9uZW50SW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qIFJlbW92ZSBmcm9tIHRoZSBjYWNoZSB0byBhdm9pZCBzaWRlLWVmZmVjdHMgd2hlblxuICAgICAgICAgKiByZS1jcmVhdGluZyBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIGlkLiAqL1xuICAgICAgICB0aGlzLl9jYWNoZVttYW5hZ2VyXVtsb2NhbElkXSA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgbWFuYWdlcnMsIGluY2x1ZGluZyB0aGUgSmF2YVNjcmlwdCBtYW5hZ2VyLiAqL1xuICAgIGdldCBtYW5hZ2Vyc0NvdW50KCkge1xuICAgICAgICAvKiArMSB0byBhY2NvdW50IGZvciB0aGUgSmF2YVNjcmlwdCBtYW5hZ2VyICovXG4gICAgICAgIHJldHVybiB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5zaXplICsgMTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTG9nVGFnIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG5pbXBvcnQgeyBmZXRjaFdpdGhQcm9ncmVzcywgZ2V0QmFzZVVybCB9IGZyb20gJy4vdXRpbHMvZmV0Y2guanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL3V0aWxzL21pc2MuanMnO1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQgeyBTY2VuZUdyb3VwIH0gZnJvbSAnLi9zY2VuZS1ncm91cC5qcyc7XG5pbXBvcnQgeyBBbmltYXRpb24sIERlc3Ryb3llZE9iamVjdEluc3RhbmNlLCBPYmplY3QzRCwgUmF5SGl0LCBTa2luLCB9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5pbXBvcnQgeyBSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuL3Jlc291cmNlcy9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBTY2VuZUdMVEYgfSBmcm9tICcuL3NjZW5lLWdsdGYuanMnO1xuaW1wb3J0IHsgQ29tcG9uZW50TWFuYWdlcnMgfSBmcm9tICcuL2NvbXBvbmVudC5qcyc7XG4vKipcbiAqIENvbnN0YW50c1xuICovXG4vKiogTWFnaWMgbnVtYmVyIGZvciAuYmluICovXG5jb25zdCBNQUdJQ19CSU4gPSAnV0xFVic7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFjdGl2YXRhYmxlIG9yIGluc3RhbnRpYWJsZSBzY2VuZS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBoYXZlIGEgbG9vayBhdCB0aGUgZGVyaXZlZCB0eXBlczpcbiAqIC0ge0BsaW5rIFNjZW5lfSBmb3IgV29uZGVybGFuZCBFbmdpbmUgc2NlbmVzICguYmluKVxuICogLSB7QGxpbmsgU2NlbmVHTFRGfSBmb3IgZ2xURiBzY2VuZXNcbiAqXG4gKiBTY2VuZXMgYXJlIGlzb2xhdGVkLiBJdCdzIHRodXMgZm9yYmlkZGVuIHRvIG1peCBvYmplY3RzIGFuZCBjb21wb25lbnRzIGZyb20gZGlmZmVyZW50IHNjZW5lcywgZS5nLixcbiAqXG4gKiBgYGBqc1xuICogY29uc3Qgb2JqQSA9IHNjZW5lQS5hZGRPYmplY3QoKTtcbiAqIGNvbnN0IG9iakIgPSBzY2VuZUEuYWRkT2JqZWN0KCk7XG4gKiBvYmpBLnBhcmVudCA9IG9iakI7IC8vIFRocm93c1xuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2VuZUxpa2Uge1xuICAgIC8qKiBJbmRleCBpbiB0aGUgc2NlbmUgbWFuYWdlci4gQGhpZGRlbiAqL1xuICAgIF9pbmRleDtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9yb290O1xuICAgIC8qKlxuICAgICAqIENvbXBvbmVudCBtYW5hZ2VyIGNhY2hpbmcgdG8gYXZvaWQgR0MuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NvbXBvbmVudHM7XG4gICAgLyoqXG4gICAgICogSmF2YVNjcmlwdCBjb21wb25lbnRzIGZvciB0aGlzIHNjZW5lLlxuICAgICAqXG4gICAgICogVGhpcyBhcnJheSBpcyBtb3ZlZCBpbnRvIHRoZSBXQVNNIGluc3RhbmNlIHVwb24gYWN0aXZhdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfanNDb21wb25lbnRzID0gW107XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBTY2VuZUxpa2UjZW5naW5lfSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHRvZG8oMi4wLjApOiBSZW1vdmUuXG4gICAgICovXG4gICAgX2VuZ2luZTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9hbmltYXRpb25zO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX3NraW5zO1xuICAgIC8qKlxuICAgICAqIE9iamVjdCBjbGFzcyBpbnN0YW5jZXMgdG8gYXZvaWQgR0MuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29iamVjdENhY2hlID0gW107XG4gICAgLyoqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwLCBpbmRleCkge1xuICAgICAgICB0aGlzLl9yb290ID0gZ3JvdXA7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGdyb3VwLmVuZ2luZTtcbiAgICAgICAgLyogTXVzdCBiZSBkb25lIGxhc3QsIHNpbmNlIGl0IHVzZXMgdGhlIGByb290YCBhbmQgYGluZGV4YCAqL1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzID0gbmV3IENvbXBvbmVudE1hbmFnZXJzKHRoaXMpO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25zID0gbmV3IFJlc291cmNlTWFuYWdlcih0aGlzLCBBbmltYXRpb24pO1xuICAgICAgICB0aGlzLl9za2lucyA9IG5ldyBSZXNvdXJjZU1hbmFnZXIodGhpcywgU2tpbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBvYmplY3QgdG8gdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBQYXJlbnQgb2JqZWN0IG9yIGBudWxsYC5cbiAgICAgKiBAcmV0dXJucyBBIG5ld2x5IGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqL1xuICAgIGFkZE9iamVjdChwYXJlbnQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0T3JpZ2luKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcGFyZW50ID8gcGFyZW50Ll9pZCA6IDA7XG4gICAgICAgIGNvbnN0IG9iamVjdElkID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfYWRkX29iamVjdCh0aGlzLl9pbmRleCwgcGFyZW50SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwKG9iamVjdElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmF0Y2gtYWRkIG9iamVjdHMgdG8gdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogV2lsbCBwcm92aWRlIGJldHRlciBwZXJmb3JtYW5jZSBmb3IgYWRkaW5nIG11bHRpcGxlIG9iamVjdHMgKGUuZy4gPiAxNilcbiAgICAgKiB0aGFuIGNhbGxpbmcge0BsaW5rIFNjZW5lI2FkZE9iamVjdH0gcmVwZWF0ZWRseSBpbiBhIGxvb3AuXG4gICAgICpcbiAgICAgKiBCeSBwcm92aWRpbmcgdXBmcm9udCBpbmZvcm1hdGlvbiBvZiBob3cgbWFueSBvYmplY3RzIHdpbGwgYmUgcmVxdWlyZWQsXG4gICAgICogdGhlIGVuZ2luZSBpcyBhYmxlIHRvIGJhdGNoLWFsbG9jYXRlIHRoZSByZXF1aXJlZCBtZW1vcnkgcmF0aGVyIHRoYW5cbiAgICAgKiBjb252ZXJ2YXRpdmVseSBncm93IHRoZSBtZW1vcnkgaW4gc21hbGwgc3RlcHMuXG4gICAgICpcbiAgICAgKiBAZXhwZXJpbWVudGFsIFRoaXMgQVBJIG1pZ2h0IGNoYW5nZSBpbiB1cGNvbWluZyB2ZXJzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBOdW1iZXIgb2Ygb2JqZWN0cyB0byBhZGQuXG4gICAgICogQHBhcmFtIHBhcmVudCBQYXJlbnQgb2JqZWN0IG9yIGBudWxsYCwgZGVmYXVsdCBgbnVsbGAuXG4gICAgICogQHBhcmFtIGNvbXBvbmVudENvdW50SGludCBIaW50IGZvciBob3cgbWFueSBjb21wb25lbnRzIGluIHRvdGFsIHdpbGxcbiAgICAgKiAgICAgIGJlIGFkZGVkIHRvIHRoZSBjcmVhdGVkIG9iamVjdHMgYWZ0ZXJ3YXJkcywgZGVmYXVsdCBgMGAuXG4gICAgICogQHJldHVybnMgTmV3bHkgY3JlYXRlZCBvYmplY3RzXG4gICAgICovXG4gICAgYWRkT2JqZWN0cyhjb3VudCwgcGFyZW50ID0gbnVsbCwgY29tcG9uZW50Q291bnRIaW50ID0gMCkge1xuICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHBhcmVudCA/IHBhcmVudC5faWQgOiAwO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogMik7XG4gICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfYWRkX29iamVjdHModGhpcy5faW5kZXgsIHBhcmVudElkLCBjb3VudCwgY29tcG9uZW50Q291bnRIaW50IHx8IDAsIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW0sIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtVWludDE2LnN1YmFycmF5KDAsIGFjdHVhbENvdW50KTtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMud3JhcC5iaW5kKHRoaXMpO1xuICAgICAgICBjb25zdCBvYmplY3RzID0gQXJyYXkuZnJvbShpZHMsIHdyYXBwZXIpO1xuICAgICAgICByZXR1cm4gb2JqZWN0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlLWFsbG9jYXRlIG1lbW9yeSBmb3IgYSBnaXZlbiBhbW91bnQgb2Ygb2JqZWN0cyBhbmQgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIFdpbGwgcHJvdmlkZSBiZXR0ZXIgcGVyZm9ybWFuY2UgZm9yIGFkZGluZyBvYmplY3RzIGxhdGVyIHdpdGgge0BsaW5rIFNjZW5lI2FkZE9iamVjdH1cbiAgICAgKiBhbmQge0BsaW5rIFNjZW5lI2FkZE9iamVjdHN9LlxuICAgICAqXG4gICAgICogQnkgcHJvdmlkaW5nIHVwZnJvbnQgaW5mb3JtYXRpb24gb2YgaG93IG1hbnkgb2JqZWN0cyB3aWxsIGJlIHJlcXVpcmVkLFxuICAgICAqIHRoZSBlbmdpbmUgaXMgYWJsZSB0byBiYXRjaC1hbGxvY2F0ZSB0aGUgcmVxdWlyZWQgbWVtb3J5IHJhdGhlciB0aGFuXG4gICAgICogY29uc2VydmF0aXZlbHkgZ3JvdyB0aGUgbWVtb3J5IGluIHNtYWxsIHN0ZXBzLlxuICAgICAqXG4gICAgICogKipFeHBlcmltZW50YWw6KiogVGhpcyBBUEkgbWlnaHQgY2hhbmdlIGluIHVwY29taW5nIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9iamVjdENvdW50IE51bWJlciBvZiBvYmplY3RzIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50Q291bnRQZXJUeXBlIEFtb3VudCBvZiBjb21wb25lbnRzIHRvXG4gICAgICogICAgICBhbGxvY2F0ZSBmb3Ige0BsaW5rIE9iamVjdDNELmFkZENvbXBvbmVudH0sIGUuZy4gYHttZXNoOiAxMDAsIGNvbGxpc2lvbjogMjAwLCBcIm15LWNvbXBcIjogMTAwfWAuXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHJlc2VydmVPYmplY3RzKG9iamVjdENvdW50LCBjb21wb25lbnRDb3VudFBlclR5cGUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbXBvbmVudENvdW50UGVyVHlwZSA9IGNvbXBvbmVudENvdW50UGVyVHlwZSB8fCB7fTtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRDb3VudFBlclR5cGUpO1xuICAgICAgICBjb25zdCBjb3VudHNQZXJUeXBlSW5kZXggPSB3YXNtLl90ZW1wTWVtSW50O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NvbXBvbmVudHMubWFuYWdlcnNDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb3VudHNQZXJUeXBlSW5kZXhbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBuYW1lcykge1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb21wb25lbnRDb3VudFBlclR5cGVbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBuYXRpdmVJbmRleCA9IHRoaXMuX2NvbXBvbmVudHMuZ2V0TmF0aXZlTWFuYWdlcihuYW1lKTtcbiAgICAgICAgICAgIGNvdW50c1BlclR5cGVJbmRleFtuYXRpdmVJbmRleCAhPT0gbnVsbCA/IG5hdGl2ZUluZGV4IDogdGhpcy5fY29tcG9uZW50cy5qc10gKz1cbiAgICAgICAgICAgICAgICBjb3VudDtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9zY2VuZV9yZXNlcnZlX29iamVjdHModGhpcy5faW5kZXgsIG9iamVjdENvdW50LCB3YXNtLl90ZW1wTWVtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm9vdCBvYmplY3QncyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Q2hpbGRyZW59IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldENoaWxkcmVuKG91dCA9IG5ldyBBcnJheSh0aGlzLmNoaWxkcmVuQ291bnQpKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmdldENoaWxkcmVuKG91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvcC1sZXZlbCBvYmplY3RzIG9mIHRoaXMgc2NlbmUuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIE9iamVjdDNELmNoaWxkcmVufSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGdldCBjaGlsZHJlbigpIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHJvb3QuY2hpbGRyZW47XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIG9mIHRoZSByb290IG9iamVjdC4gKi9cbiAgICBnZXQgY2hpbGRyZW5Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW5fY291bnQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3Igb2JqZWN0cyBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIG9iamVjdHMgb2ZcbiAgICAgKiAgICAgdGhpcyBzY2VuZS4gSWYgYGZhbHNlYCwgdGhpcyBtZXRob2Qgd2lsbCBvbmx5IHBlcmZvcm0gdGhlIHNlYXJjaCBpblxuICAgICAqICAgICByb290IG9iamVjdHMuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWUobmFtZSwgcmVjdXJzaXZlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHJvb3QuZmluZEJ5TmFtZShuYW1lLCByZWN1cnNpdmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFsbCAqKnRvcC1sZXZlbCoqIG9iamVjdHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWVEaXJlY3R9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZURpcmVjdChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmZpbmRCeU5hbWVEaXJlY3QobmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgKiphbGwgb2JqZWN0cyoqIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lUmVjdXJzaXZlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVSZWN1cnNpdmUobmFtZSkge1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy53cmFwKDApO1xuICAgICAgICByZXR1cm4gcm9vdC5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcmFwIGFuIG9iamVjdCBJRCB1c2luZyB7QGxpbmsgT2JqZWN0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHBlcmZvcm1zIGNhY2hpbmcgYW5kIHdpbGwgcmV0dXJuIHRoZSBzYW1lXG4gICAgICogaW5zdGFuY2Ugb24gc3Vic2VxdWVudCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmplY3RJZCBJRCBvZiB0aGUgb2JqZWN0IHRvIGNyZWF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3RcbiAgICAgKi9cbiAgICB3cmFwKG9iamVjdElkKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fb2JqZWN0Q2FjaGU7XG4gICAgICAgIGNvbnN0IG8gPSBjYWNoZVtvYmplY3RJZF0gfHwgKGNhY2hlW29iamVjdElkXSA9IG5ldyBPYmplY3QzRCh0aGlzLCBvYmplY3RJZCkpO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBEZXN0cm95aW5nIGEgc2NlbmUgKipkb2VzIG5vdCoqIGRlc3Ryb3kgaXRzIHJlc291cmNlcy5cbiAgICAgKiBSZXNvdXJjZXMgYXJlIGNsZWFyZWQgd2hlbiBkZXN0cm95aW5nIHRoZSByb290IHRvIHdoaWNoIHRoaXMgc2NlbmUgYmVsb25ncy5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX3Jvb3QuZ2V0U2NlbmVJbmRleCh0aGlzKTtcbiAgICAgICAgdGhpcy5ncm91cC5fZGVzdHJveVNjZW5lQXRJbmRleChpbmRleCk7XG4gICAgfVxuICAgIC8qIFB1YmxpYyBHZXR0ZXJzICYgU2V0dGVycyAqL1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyBzY2VuZSBjYW4gYmUgYWN0aXZhdGVkLlxuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYWN0aXZhdGFiaWxpdHksIGhhdmUgYSBsb29rIGF0IHtAbGluayBTY2VuZSNhY3RpdmF0ZX0uXG4gICAgICpcbiAgICAgKiBTdHJlYW1hYmxlIHNjZW5lcyBjYW4gYmUgdXNlZCBhcyBwcmVmYWIsIGJ1dCBjYW4ndCBiZSBhY3RpdmF0ZWQgYW5kXG4gICAgICogcnVuIGRpcmVjdGx5LlxuICAgICAqXG4gICAgICogZ2xURiBzY2VuZXMgYXJlIGNvbnNpZGVyZWQgc3RyZWFtYWJsZSBhbmQgY2FuIG9ubHkgYmUgaW5zdGFudGlhdGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYHRydWVgIGlzIHRoZSBzY2VuZSBjYW4gYmUgYWN0aXZhdGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBnZXQgYWN0aXZhdGFibGUoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gISF3YXNtLl93bF9zY2VuZV9hY3RpdmF0YWJsZSh0aGlzLl9pbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGF0aXZlIGRpcmVjdG9yeSBvZiB0aGUgc2NlbmUgdGhhdCB3YXMgbG9hZGVkLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VkIGZvciBsb2FkaW5nIGFueSBmaWxlcyByZWxhdGl2ZSB0byB0aGUgc2NlbmUuXG4gICAgICovXG4gICAgZ2V0IGJhc2VVUkwoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9zY2VuZV9nZXRfYmFzZVVSTCh0aGlzLl9pbmRleCk7XG4gICAgICAgIGlmICghcHRyKVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsZW5hbWUgdXNlZCB3aGVuIGxvYWRpbmcgdGhlIGZpbGUuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgc2NlbmVzIHdhcyBsb2FkZWQgZnJvbSBtZW1vcnkgYW5kIG5vIGZpbGVuYW1lIHdhcyBwcm92aWRlZCxcbiAgICAgKiB0aGlzIGFjY2Vzc29yIHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKi9cbiAgICBnZXQgZmlsZW5hbWUoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9zY2VuZV9nZXRfZmlsZW5hbWUodGhpcy5faW5kZXgpO1xuICAgICAgICBpZiAoIXB0cilcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHB0cik7XG4gICAgfVxuICAgIC8qKiBBbmltYXRpb24gcmVzb3VyY2VzICovXG4gICAgZ2V0IGFuaW1hdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmltYXRpb25zO1xuICAgIH1cbiAgICAvKiogU2tpbiByZXNvdXJjZXMgKi9cbiAgICBnZXQgc2tpbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9za2lucztcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb290LmVuZ2luZTtcbiAgICB9XG4gICAgLyoqIEhvc3Rpbmcgc2NlbmUgcm9vdCBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZ3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb290O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY2xhc3MgYXR0cmlidXRlIC8gbWV0aG9kIHdpbGwgdGhyb3cuXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPCAwO1xuICAgIH1cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NjZW5lKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgU2NlbmUoJyR7dGhpcy5maWxlbmFtZX0nLCAke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgaW5wdXQncyBzY2VuZSBpcyB0aGUgc2FtZSBhcyB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogSXQgaXMgZm9yYmlkZGVuIHRvIG1peCBvYmplY3RzIGFuZCBjb21wb25lbnRzIGZyb20gZGlmZmVyZW50IHNjZW5lcywgZS5nLixcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3Qgb2JqQSA9IHNjZW5lQS5hZGRPYmplY3QoKTtcbiAgICAgKiBjb25zdCBvYmpCID0gc2NlbmVBLmFkZE9iamVjdCgpO1xuICAgICAqIG9iakEucGFyZW50ID0gb2JqQjsgLy8gVGhyb3dzXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT2JqZWN0IC8gY29tcG9uZW50IHRvIGNoZWNrLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBvdGhlcidzIHNjZW5lIGlzbid0IHRoZSBzYW1lIHJlZmVyZW5jZSBhcyB0aGlzLlxuICAgICAqL1xuICAgIGFzc2VydE9yaWdpbihvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgJiYgb3RoZXIuc2NlbmUgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdCB0byB1c2UgJHtvdGhlcn0gZnJvbSAke290aGVyLnNjZW5lfSBpbiAke3RoaXN9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBjbGVhbnVwIHVwb24gb2JqZWN0IGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluc3RhbmNlIFRoZSBpbnN0YW5jZSB0byBkZXN0cm95LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZXN0cm95T2JqZWN0KGluc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsSWQgPSBpbnN0YW5jZS5fbG9jYWxJZDtcbiAgICAgICAgaW5zdGFuY2UuX2lkID0gLTE7XG4gICAgICAgIGluc3RhbmNlLl9sb2NhbElkID0gLTE7XG4gICAgICAgIC8qIERlc3Ryb3kgdGhlIHByb3RvdHlwZSBvZiB0aGlzIGluc3RhbmNlIHRvIGF2b2lkIHVzaW5nIGEgZGFuZ2xpbmcgb2JqZWN0ICovXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSAmJiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCBEZXN0cm95ZWRPYmplY3RJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyogUmVtb3ZlIGZyb20gdGhlIGNhY2hlIHRvIGF2b2lkIHNpZGUtZWZmZWN0cyB3aGVuXG4gICAgICAgICAqIHJlLWNyZWF0aW5nIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGlkLiAqL1xuICAgICAgICB0aGlzLl9vYmplY3RDYWNoZVtsb2NhbElkXSA9IG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBXb25kZXJsYW5kIEVuZ2luZSAoLmJpbikgc2NlbmUuXG4gKlxuICogV29uZGVybGFuZCBFbmdpbmUgcGFja2FnZXMgdHdvIHR5cGVzIG9mIHNjZW5lOlxuICogLSBBY3RpdmF0YWJsZSBzY2VuZTogQ29udGFpbnMgb2JqZWN0cywgY29tcG9uZW50cywgdmlld3MsIHJlc291cmNlcywgYW5kIHJlbmRlcmluZyBkYXRhXG4gKiAtIFN0cmVhbWFibGUgc2NlbmU6IENvbnRhaW5zIG9iamVjdHMsIGNvbXBvbmVudHMsIGFuZCByZXNvdXJjZXNcbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlIHtAbGluayBTY2VuZSNhY3RpdmF0ZX1cbiAqIGFuZCB7QGxpbmsgU2NlbmUjaW5zdGFudGlhdGV9IG1ldGhvZHMuXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2VuZSBleHRlbmRzIFNjZW5lTGlrZSB7XG4gICAgLyoqIENhbGxlZCBiZWZvcmUgcmVuZGVyaW5nIHRoZSBzY2VuZSAqL1xuICAgIG9uUHJlUmVuZGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogQ2FsbGVkIGFmdGVyIHRoZSBzY2VuZSBoYXMgYmVlbiByZW5kZXJlZCAqL1xuICAgIG9uUG9zdFJlbmRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFJheSBoaXQgcG9pbnRlciBpbiBXQVNNIGhlYXAuIEBoaWRkZW4gKi9cbiAgICBfcmF5SGl0O1xuICAgIC8qKiBSYXkgaGl0LiBAaGlkZGVuICovXG4gICAgX2hpdDtcbiAgICBjb25zdHJ1Y3Rvcihncm91cCwgaW5kZXgpIHtcbiAgICAgICAgc3VwZXIoZ3JvdXAsIGluZGV4KTtcbiAgICAgICAgLyoqIGB0aGlzLmVuZ2luZT9gIGlzIHVzZWQgZm9yIHRlc3RpbmcuICovXG4gICAgICAgIHRoaXMuX3JheUhpdCA9IHRoaXMuZW5naW5lPy53YXNtLl9tYWxsb2MoNCAqICgzICogNCArIDMgKiA0ICsgNCArIDIpICsgNCk7XG4gICAgICAgIHRoaXMuX2hpdCA9IG5ldyBSYXlIaXQodGhpcywgdGhpcy5fcmF5SGl0KTtcbiAgICB9XG4gICAgaW5zdGFudGlhdGUoY2h1bmspIHtcbiAgICAgICAgaWYgKGNodW5rLmdyb3VwICE9PSB0aGlzLmdyb3VwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgaW5zdGFudGlhdGUgJHtjaHVua30gZnJvbSAke2NodW5rLmdyb3VwfSBpbnRvIGAgK1xuICAgICAgICAgICAgICAgIGAke3RoaXN9IGZyb20gJHt0aGlzLmdyb3VwfSwgc2NlbmVzIG11c3QgbGl2ZSBpbiB0aGUgc2FtZSByb290YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gd2FzbS5fd2xfc2NlbmVfaW5zdGFudGlhdGUoY2h1bmsuX2luZGV4LCB0aGlzLl9pbmRleCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgcm9vdDogdGhpcy53cmFwKGlkKSB9O1xuICAgICAgICBpZiAoY2h1bmsgaW5zdGFuY2VvZiBTY2VuZUdMVEYpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMud3JhcChpZCk7XG4gICAgICAgICAgICBjaHVuay5fcHJvY2Vzc0luc3RhbnRpYXRvbih0aGlzLCBvYmosIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqIEB0b2RvOiBBZGQgYGluc3RhbnRpYXRlQmF0Y2hgIHRvIGluc3RhbnRpYXRlIG11bHRpcGxlIGNodW5rcyBpbiBhIHJvdy4gKi9cbiAgICAvKipcbiAgICAgKiBNYWtlIHRoaXMgc2NlbmUgYWN0aXZlLlxuICAgICAqXG4gICAgICogT25jZSBhY3RpdmUsIHRoZSBzY2VuZSB3aWxsIGJlIHVwZGF0ZWQgYW5kIHJlbmRlcmVkIG9uIHRoZSBjYW52YXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHRoZSBzY2VuZSBpc24ndCBhY3RpdmF0YWJsZS5cbiAgICAgKlxuICAgICAqICMjIyMgQ29tcG9uZW50IExpZmVjeWNsZVxuICAgICAqXG4gICAgICogTWFya2luZyBhIHNjZW5lIGFzIGFjdGl2ZSB3aWxsOlxuICAgICAqICogQ2FsbCB7QGxpbmsgQ29tcG9uZW50I29uRGVhY3RpdmF0ZX0gZm9yIGFsbCBhY3RpdmUgY29tcG9uZW50cyBvZiB0aGUgcHJldmlvdXMgc2NlbmVcbiAgICAgKiAqIENhbGwge0BsaW5rIENvbXBvbmVudCNvbkFjdGl2YXRlfSBmb3IgYWxsIGFjdGl2ZSBjb21wb25lbnRzIG9mIHRoZSBuZXcgc2NlbmVcbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3Qgc2NlbmUgPSBhd2FpdCBzY2VuZUdyb3VwLmxvYWRTY2VuZSgnU2NlbmUuYmluJyk7XG4gICAgICogc2NlbmUuYWN0aXZhdGUoKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHNjZW5lIGlzIHJlYWR5LlxuICAgICAqL1xuICAgIGFzeW5jIGFjdGl2YXRlKG9wdHMgPSB7IGRpc3BhdGNoUmVhZHlFdmVudDogZmFsc2UgfSkge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZhdGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzfSBpcyBub3QgYWN0aXZhdGFibGUuIElzIGl0IHBhY2thZ2VkIGZvciBzdHJlYW1pbmc/YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2RlYWN0aXZhdGVfYWN0aXZlU2NlbmUoKTtcbiAgICAgICAgLyogU3dpdGNoIHJlZmVyZW5jZSBvbiBlbmdpbmUgKipqdXN0KiogYmVmb3JlIGFjdGl2YXRpbmcsIHRvIGFsbG93XG4gICAgICAgICAqIGNvbXBvbmVudCB0byB1c2UgYHRoaXMuZW5naW5lLnNjZW5lYCBpbiBgb25BY3RpdmF0ZSgpYC9gc3RhcnQoKWAuICovXG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuZW5naW5lO1xuICAgICAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuZW5naW5lLnNjZW5lO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZSA9IHRoaXM7XG4gICAgICAgIHdhc20uX3dsX3NjZW5lX2FjdGl2YXRlKHRoaXMuX2luZGV4KTtcbiAgICAgICAgaWYgKCFlbmdpbmUub25Mb2FkaW5nU2NyZWVuRW5kLmlzRGF0YVJldGFpbmVkKSB7XG4gICAgICAgICAgICBlbmdpbmUub25Mb2FkaW5nU2NyZWVuRW5kLm5vdGlmeSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2aW91cy5ncm91cC5fbGVnYWN5TG9hZGVkKSB7XG4gICAgICAgICAgICAvKiBTY2VuZXMgbG9hZGVkIHZpYSBgU2NlbmUubG9hZGAgd2VyZSBwcmV2aW91c2x5XG4gICAgICAgICAgICAgKiBkZXN0cm95aW5nIGFueSBvdGhlciBsb2FkZWQgc2NlbmUuICovXG4gICAgICAgICAgICBwcmV2aW91cy5ncm91cC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogRm9yIG5vdywgd2UgYWx3YXlzIGF1dG9tYXRpY2FsbHkgZG93bmxvYWQgZGVwZW5kZW5jaWVzIGZvclxuICAgICAgICAgKiB0aGUgdXNlciwgaS5lLiwgc2VwYXJhdGUgdGV4dHVyZXMuYmluIGFuZCBsYW5ndWFnZXMuYmluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbiB0aGUgZnV0dXJlLCB3ZSBjYW4gZXZlbnR1YWxseSBleHBvc2UgdGhpcyBpbiB0aGUgY2h1bmsgQVBJXG4gICAgICAgICAqIHRvIGdpdmUgbW9yZSBjb250cm9sIHRvIHRoZSB1c2VyIGlmIG5lZWRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgZG8gbm90IG1ha2UgdGhlIHVzZXIgd2FpdCB1bnRpbCB0aGUgdGV4dHVyZXMgZG93bmxvYWQgaXMgY29tcGxldGUuICovXG4gICAgICAgIHRoaXMuX2Rvd25sb2FkRGVwZW5kZW5jaWVzKCk7XG4gICAgICAgIC8qIFVwZGF0ZSB0aGUgY3VycmVudCBhY3RpdmUgc2NlbmUgaW4gdGhlIHBoeXN4IG1hbmFnZXIgKi9cbiAgICAgICAgaWYgKGVuZ2luZS5waHlzaWNzKVxuICAgICAgICAgICAgZW5naW5lLnBoeXNpY3MuX2hpdC5fc2NlbmUgPSB0aGlzO1xuICAgICAgICBhd2FpdCBlbmdpbmUuaTE4bi5zZXRMYW5ndWFnZShlbmdpbmUuaTE4bi5sYW5ndWFnZUNvZGUoMCkpO1xuICAgICAgICBpZiAodGhpcy5ncm91cC5fbGVnYWN5TG9hZGVkKVxuICAgICAgICAgICAgZW5naW5lLm9uU2NlbmVMb2FkZWQubm90aWZ5KCk7XG4gICAgICAgIGVuZ2luZS5vblNjZW5lQWN0aXZhdGVkLm5vdGlmeShwcmV2aW91cywgdGhpcyk7XG4gICAgICAgIGlmIChvcHRzLmRpc3BhdGNoUmVhZHlFdmVudClcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hSZWFkeUV2ZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEB0b2RvIFByb3ZpZGUgYW4gQVBJIHRvIGRlbGV0ZSBhbGwgcmVzb3VyY2VzIGxpbmtlZCB0byBhIHNjZW5lLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3Qgc2NlbmUgPSBhd2FpdCBncm91cC5sb2FkU2NlbmUoJ1NjZW5lLmJpbicpO1xuICAgICAqIC4uLlxuICAgICAqIHNjZW5lLmRlc3Ryb3koe3JlbW92ZVJlc291cmNlczogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhpcyBzY2VuZSBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIGdyb3VwIGl0IGJlbG9uZ3MgdG8uXG4gICAgICpcbiAgICAgKiBAbm90ZSBEZXN0cm95aW5nIGEgc2NlbmUgKipkb2Vzbid0KiogcmVtb3ZlIHRoZSBtYXRlcmlhbHMsIG1lc2hlcyxcbiAgICAgKiBhbmQgdGV4dHVyZXMgaXQgcmVmZXJlbmNlcyBpbiB0aGUgZ3JvdXAuIFRob3NlIHNob3VsZCBiZSBjbGVhbmVkIHVwIGVpdGhlciBieSBkZXN0cm95aW5nXG4gICAgICogdGhlIGdyb3VwLCBvciBtYW51YWxseSB1c2luZyB7QGxpbmsgTWVzaC5kZXN0cm95fS5cbiAgICAgKlxuICAgICAqIEB0aHJvd3MgSWYgdGhlIHNjZW5lIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICogKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0IHRvIGRlc3Ryb3kgJHt0aGlzfSwgYnV0IGRlc3Ryb3lpbmcgdGhlIGFjdGl2ZSBzY2VuZSBpcyBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX2ZyZWUodGhpcy5fcmF5SGl0KTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDdXJyZW50bHkgYWN0aXZlIHZpZXcgY29tcG9uZW50cy5cbiAgICAgKi9cbiAgICBnZXQgYWN0aXZlVmlld3MoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb3VudCA9IHdhc20uX3dsX3NjZW5lX2dldF9hY3RpdmVfdmlld3ModGhpcy5faW5kZXgsIHdhc20uX3RlbXBNZW0sIDE2KTtcbiAgICAgICAgY29uc3Qgdmlld3MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHdhc20uX3RlbXBNZW1JbnRbaV07XG4gICAgICAgICAgICB2aWV3cy5wdXNoKHRoaXMuX2NvbXBvbmVudHMud3JhcFZpZXcoaWQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhc3QgYSByYXkgdGhyb3VnaCB0aGUgc2NlbmUgYW5kIGZpbmQgaW50ZXJzZWN0aW5nIGNvbGxpc2lvbiBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdGluZyByYXkgaGl0IHdpbGwgY29udGFpbiAqKnVwIHRvIDQqKiBjbG9zZXN0IHJheSBoaXRzLFxuICAgICAqIHNvcnRlZCBieSBpbmNyZWFzaW5nIGRpc3RhbmNlLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaGl0ID0gZW5naW5lLnNjZW5lLnJheUNhc3QoXG4gICAgICogICAgIFswLCAwLCAwXSxcbiAgICAgKiAgICAgWzAsIDAsIDFdLFxuICAgICAqICAgICAxIDw8IDAgfCAxIDw8IDQsIC8vIE9ubHkgY2hlY2sgYWdhaW5zdCBjb21wb25lbnRzIGluIGdyb3VwcyAwIGFuZCA0XG4gICAgICogICAgIDI1XG4gICAgICogKTtcbiAgICAgKiBpZiAoaGl0LmhpdENvdW50ID4gMCkge1xuICAgICAqICAgICBjb25zdCBsb2NhdGlvbnMgPSBoaXQuZ2V0TG9jYXRpb25zKCk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBPYmplY3QgaGl0IGF0OiAke2xvY2F0aW9uc1swXVswXX0sICR7bG9jYXRpb25zWzBdWzFdfSwgJHtsb2NhdGlvbnNbMF1bMl19YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG8gUmF5IG9yaWdpbi5cbiAgICAgKiBAcGFyYW0gZCBSYXkgZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSBncm91cE1hc2sgQml0bWFzayBvZiBjb2xsaXNpb24gZ3JvdXBzIHRvIGZpbHRlciBieTogb25seSBvYmplY3RzXG4gICAgICogICAgICAgIHRoYXQgYXJlIHBhcnQgb2YgZ2l2ZW4gZ3JvdXBzIGFyZSBjb25zaWRlcmVkIGZvciB0aGUgcmF5Y2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4RGlzdGFuY2UgTWF4aW11bSAqKmluY2x1c2l2ZSoqIGhpdCBkaXN0YW5jZS4gRGVmYXVsdHMgdG8gYDEwMGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIFJheUhpdH0gaW5zdGFuY2UsIGNhY2hlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHtAbGluayBSYXlIaXR9IG9iamVjdCBpcyBvd25lZCBieSB0aGUge0BsaW5rIFNjZW5lfVxuICAgICAqICAgICAgIGluc3RhbmNlIGFuZCB3aWxsIGJlIHJldXNlZCB3aXRoIHRoZSBuZXh0IHtAbGluayBTY2VuZSNyYXlDYXN0fSBjYWxsLlxuICAgICAqL1xuICAgIHJheUNhc3QobywgZCwgZ3JvdXBNYXNrLCBtYXhEaXN0YW5jZSA9IDEwMC4wKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX3JheV9jYXN0KHRoaXMuX2luZGV4LCBvWzBdLCBvWzFdLCBvWzJdLCBkWzBdLCBkWzFdLCBkWzJdLCBncm91cE1hc2ssIHRoaXMuX3JheUhpdCwgbWF4RGlzdGFuY2UpO1xuICAgICAgICByZXR1cm4gdGhpcy5faGl0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGJhY2tncm91bmQgY2xlYXIgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sb3IgbmV3IGNsZWFyIGNvbG9yIChSR0JBKS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgY2xlYXJDb2xvcihjb2xvcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9zZXRfY2xlYXJDb2xvcihjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRvIGNsZWFyIHRoZSBjb2xvciBmcmFtZWJ1ZmZlciBiZWZvcmUgZHJhd2luZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIGlmIGFuIGV4dGVybmFsIGZyYW1ld29yayAoZS5nLiBhbiBBUiB0cmFja2luZ1xuICAgICAqIGZyYW1ld29yaykgaXMgcmVzcG9uc2libGUgZm9yIGRyYXdpbmcgYSBjYW1lcmEgZnJhbWUgYmVmb3JlIFdvbmRlcmxhbmRcbiAgICAgKiBFbmdpbmUgZHJhd3MgdGhlIHNjZW5lIG9uIHRvcCBvZiBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdG8gZW5hYmxlIGNvbG9yIGNsZWFyLlxuICAgICAqIEBzaW5jZSAwLjkuNFxuICAgICAqL1xuICAgIHNldCBjb2xvckNsZWFyRW5hYmxlZChiKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2VuYWJsZUNvbG9yQ2xlYXIoYik7XG4gICAgfVxuICAgIC8qKiBgdHJ1ZWAgaWYgdGhlIHNjZW5lIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuICovXG4gICAgZ2V0IGlzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUuc2NlbmUgPT09IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWQgYSBzY2VuZSBmaWxlICguYmluKS5cbiAgICAgKlxuICAgICAqIFdpbGwgcmVwbGFjZSB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZSB3aXRoIHRoZSBvbmUgbG9hZGVkXG4gICAgICogZnJvbSBnaXZlbiBmaWxlLiBJdCBpcyBhc3N1bWVkIHRoYXQgSmF2YVNjcmlwdCBjb21wb25lbnRzIHJlcXVpcmVkIGJ5XG4gICAgICogdGhlIG5ldyBzY2VuZSB3ZXJlIHJlZ2lzdGVyZWQgaW4gYWR2YW5jZS5cbiAgICAgKlxuICAgICAqIE9uY2UgdGhlIHNjZW5lIGlzIGxvYWRlZCBzdWNjZXNzZnVsbHkgYW5kIGluaXRpYWxpemVkLFxuICAgICAqIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm9uU2NlbmVMb2FkZWR9IGlzIG5vdGlmaWVkLlxuICAgICAqXG4gICAgICogIyMjIyBBcnJheUJ1ZmZlclxuICAgICAqXG4gICAgICogVGhlIGBsb2FkKClgIG1ldGhvZCBhY2NlcHRzIGFuIGluLW1lbW9yeSBidWZmZXI6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHNjZW5lLmxvYWQoe1xuICAgICAqICAgICBidWZmZXI6IG5ldyBBcnJheUJ1ZmZlciguLi4pLFxuICAgICAqICAgICBiYXNlVVJMOiAnaHR0cHM6Ly9teS13ZWJzaXRlL2Fzc2V0cydcbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGBiYXNlVVJMYCBpcyBtYW5kYXRvcnkuIEl0J3MgdXNlZCB0byBmZXRjaCBpbWFnZXMgYW5kIGxhbmd1YWdlcy5cbiAgICAgKlxuICAgICAqIFVzZSB7QGxpbmsgU2NlbmUuc2V0TG9hZGluZ1Byb2dyZXNzfSB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgYmFyXG4gICAgICogd2hlbiB1c2luZyBhbiBBcnJheUJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgbmV3IHtAbGluayBTY2VuZUdyb3VwfSBhbmQge0BsaW5rIFNjZW5lfSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBQYXRoIHRvIHRoZSBmaWxlIHRvIGxvYWQsIG9yIGFuIG9wdGlvbiBvYmplY3QuXG4gICAgICogICAgIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgdGhlIHtAbGluayBTY2VuZUxvYWRPcHRpb25zfSBkb2N1bWVudGF0aW9uLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzY2VuZSB3YXMgbG9hZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWQob3B0aW9ucykge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG4gICAgICAgIGxldCBkaXNwYXRjaFJlYWR5RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNjZW5lR3JvdXA7XG4gICAgICAgIGxldCBvcHRzO1xuICAgICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdHMgPSBhd2FpdCBTY2VuZUdyb3VwLmxvYWRCdWZmZXIob3B0aW9ucywgKGJ5dGVzLCBzaXplKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmluZm8oTG9nVGFnLlNjZW5lLCBgU2NlbmUgZG93bmxvYWRpbmc6ICR7Ynl0ZXN9IC8gJHtzaXplfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZ1Byb2dyZXNzKGJ5dGVzIC8gc2l6ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdHMgPSBvcHRpb25zO1xuICAgICAgICAgICAgZGlzcGF0Y2hSZWFkeUV2ZW50ID0gb3B0aW9ucy5kaXNwYXRjaFJlYWR5RXZlbnQgPz8gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmVHcm91cCA9IGF3YWl0IHRoaXMuZW5naW5lLmxvYWRTY2VuZUdyb3VwRnJvbU1lbW9yeShvcHRzLCB0cnVlKTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBzY2VuZUdyb3VwLmdldFNjZW5lKDApO1xuICAgICAgICByZXR1cm4gc2NlbmUuYWN0aXZhdGUoeyBkaXNwYXRjaFJlYWR5RXZlbnQgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIHNjZW5lIGZpbGUuXG4gICAgICpcbiAgICAgKiBMb2FkcyBhbmQgcGFyc2VzIHRoZSBmaWxlIGFuZCBpdHMgaW1hZ2VzIGFuZCBhcHBlbmRzIHRoZSByZXN1bHRcbiAgICAgKiB0byB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIFN1cHBvcnRlZCBmb3JtYXRzIGFyZSBzdHJlYW1hYmxlIFdvbmRlcmxhbmQgc2NlbmUgZmlsZXMgKC5iaW4pIGFuZCBnbFRGXG4gICAgICogM0Qgc2NlbmVzICguZ2x0ZiwgLmdsYikuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSkudGhlbihyb290ID0+IHtcbiAgICAgKiAgICAgLy8gcm9vdCBjb250YWlucyB0aGUgbG9hZGVkIHNjZW5lXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBjYXNlIHRoZSBgbG9hZEdsdGZFeHRlbnNpb25zYCBvcHRpb24gaXMgc2V0IHRvIHRydWUsIHRoZSByZXNwb25zZVxuICAgICAqIHdpbGwgYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYm90aCB0aGUgcm9vdCBvZiB0aGUgbG9hZGVkIHNjZW5lIGFuZFxuICAgICAqIGFueSBnbFRGIGV4dGVuc2lvbnMgZm91bmQgb24gbm9kZXMsIG1lc2hlcyBhbmQgdGhlIHJvb3Qgb2YgdGhlIGZpbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSwgeyBsb2FkR2x0ZkV4dGVuc2lvbnM6IHRydWUgfSkudGhlbigoe3Jvb3QsIGV4dGVuc2lvbnN9KSA9PiB7XG4gICAgICogICAgIC8vIHJvb3QgY29udGFpbnMgdGhlIGxvYWRlZCBzY2VuZVxuICAgICAqICAgICAvLyBleHRlbnNpb25zLnJvb3QgY29udGFpbnMgYW55IGV4dGVuc2lvbnMgYXQgdGhlIHJvb3Qgb2YgZ2xURiBkb2N1bWVudFxuICAgICAqICAgICBjb25zdCByb290RXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMucm9vdDtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5tZXNoIGFuZCBleHRlbnNpb25zLm5vZGUgY29udGFpbiBleHRlbnNpb25zIGluZGV4ZWQgYnkgT2JqZWN0IGlkXG4gICAgICogICAgIGNvbnN0IGNoaWxkT2JqZWN0ID0gcm9vdC5jaGlsZHJlblswXTtcbiAgICAgKiAgICAgY29uc3QgbWVzaEV4dGVuc2lvbnMgPSByb290Lm1lc2hFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgY29uc3Qgbm9kZUV4dGVuc2lvbnMgPSByb290Lm5vZGVFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5pZE1hcHBpbmcgY29udGFpbnMgYSBtYXBwaW5nIGZyb20gZ2xURiBub2RlIGluZGV4IHRvIE9iamVjdCBpZFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgdGhlIGZpbGUgdG8gYmUgbG9hZGVkIGlzIGxvY2F0ZWQgaW4gYSBzdWJmb2xkZXIsIGl0IG1pZ2h0IGJlIHVzZWZ1bFxuICAgICAqIHRvIGRlZmluZSB0aGUgYGJhc2VVUkxgIG9wdGlvbi4gVGhpcyB3aWxsIGVuc3VyZSBhbnkgYmluIGZpbGVzXG4gICAgICogcmVmZXJlbmNlZCBieSB0aGUgbG9hZGVkIGJpbiBmaWxlIGFyZSBsb2FkZWQgYXQgdGhlIGNvcnJlY3QgcGF0aC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogV0wuc2NlbmUuYXBwZW5kKGZpbGVuYW1lLCB7IGJhc2VVUkw6ICdzY2VuZXMnIH0pLnRoZW4oKHtyb290LCBleHRlbnNpb25zfSkgPT4ge1xuICAgICAqICAgICAvLyBkbyBzdHVmZlxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFNjZW5lR3JvdXB9IGFuZCB7QGxpbmsgU2NlbmV9IEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSAuYmluLCAuZ2x0ZiBvciAuZ2xiIGZpbGUgdG8gYXBwZW5kLiBTaG91bGQgYmUgYSBVUkwgb3JcbiAgICAgKiAgIGFuIGBBcnJheUJ1ZmZlcmAgd2l0aCB0aGUgZmlsZSBjb250ZW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgbG9hZGluZy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc2NlbmUgd2FzIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGFwcGVuZChmaWxlLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBjb25zdCB7IGJhc2VVUkwgPSBpc1N0cmluZyhmaWxlKSA/IGdldEJhc2VVcmwoZmlsZSkgOiB0aGlzLmJhc2VVUkwgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBpc1N0cmluZyhmaWxlKSA/IGF3YWl0IGZldGNoV2l0aFByb2dyZXNzKGZpbGUpIDogZmlsZTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl9tYWxsb2Moc2l6ZSk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheSh3YXNtLkhFQVBVOC5idWZmZXIsIHB0ciwgc2l6ZSk7XG4gICAgICAgIGRhdGEuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgICAgICBjb25zdCBpc0JpbkZpbGUgPSBkYXRhLmJ5dGVMZW5ndGggPiBNQUdJQ19CSU4ubGVuZ3RoICYmXG4gICAgICAgICAgICBkYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KDAsIE1BR0lDX0JJTi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IE1BR0lDX0JJTi5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuZ3JvdXA7XG4gICAgICAgIGxldCBzY2VuZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNjZW5lID0gaXNCaW5GaWxlXG4gICAgICAgICAgICAgICAgPyByb290LmxvYWRTY2VuZUZyb21NZW1vcnkoeyBidWZmZXIsIGJhc2VVUkwgfSlcbiAgICAgICAgICAgICAgICA6IHJvb3QubG9hZEdMVEZGcm9tTWVtb3J5KHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICBiYXNlVVJMLFxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBvcHRpb25zLmxvYWRHbHRmRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX2ZyZWUocHRyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmluc3RhbnRpYXRlKHNjZW5lKTtcbiAgICAgICAgaWYgKHNjZW5lIGluc3RhbmNlb2YgU2NlbmVHTFRGKSB7XG4gICAgICAgICAgICBpZiAoIXNjZW5lLmV4dGVuc2lvbnMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yb290O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByb290OiByZXN1bHQucm9vdCxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5leHRlbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICByb290OiBzY2VuZS5leHRlbnNpb25zLnJvb3QsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yb290O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxvYWRpbmcgc2NyZWVuIHByb2dyZXNzIGJhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSBDdXJyZW50IGxvYWRpbmcgcGVyY2VudGFnZSwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKi9cbiAgICBzZXRMb2FkaW5nUHJvZ3Jlc3MocGVyY2VudGFnZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfc2V0X2xvYWRpbmdfc2NyZWVuX3Byb2dyZXNzKGNsYW1wKHBlcmNlbnRhZ2UsIDAsIDEpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcGF0Y2ggYW4gZXZlbnQgJ3dsZS1zY2VuZS1yZWFkeScgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyB1c2VkIGZvciBhdXRvbWF0aWMgdGVzdGluZy5cbiAgICAgKi9cbiAgICBkaXNwYXRjaFJlYWR5RXZlbnQoKSB7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3bGUtc2NlbmUtcmVhZHknLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHsgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUgfSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgbWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBza3kuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgc2t5IG5lZWRzIHRvIGJlIGVuYWJsZWQgaW4gdGhlIGVkaXRvciB3aGVuIGNyZWF0aW5nIHRoZSBzY2VuZS5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHJlZmVyIHRvIHRoZSBiYWNrZ3JvdW5kIFt0dXRvcmlhbF0oaHR0cHM6Ly93b25kZXJsYW5kZW5naW5lLmNvbS90dXRvcmlhbHMvYmFja2dyb3VuZC1lZmZlY3QvKS5cbiAgICAgKi9cbiAgICBzZXQgc2t5TWF0ZXJpYWwobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfc2V0X3NreV9tYXRlcmlhbCh0aGlzLl9pbmRleCwgbWF0ZXJpYWw/Ll9pZCA/PyAwKTtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgc2t5IG1hdGVyaWFsLCBvciBgbnVsbGAgaWYgbm8gc2t5IGlzIHNldC4gKi9cbiAgICBnZXQgc2t5TWF0ZXJpYWwoKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZ2V0X3NreV9tYXRlcmlhbCh0aGlzLl9pbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3VwLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgZGVsZXRlcyBhbGwgdXNlZCBhbmQgYWxsb2NhdGVkIG9iamVjdHMsIGFuZCBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgTG9hZCBhIG5ldyBzY2VuZSBhbmQgYWN0aXZhdGUgaXQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBkZXBlbmRlbmNpZXMgYW5kIGluaXRpYWxpemUgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9pbml0aWFsaXplKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9pbml0aWFsaXplKHRoaXMuX2luZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYW5kIGFwcGx5IHF1ZXVlZCBkZXBlbmRlbmN5IGZpbGVzICguYmluKS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBhc3luYyBfZG93bmxvYWREZXBlbmRlbmN5KHVybCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmV0Y2hXaXRoUHJvZ3Jlc3ModXJsKTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3YXNtLl93bF9zY2VuZV9sb2FkX3F1ZXVlZF9iaW4odGhpcy5faW5kZXgsIHB0ciwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLyogQ2F0Y2ggY2FsbHMgdG8gYWJvcnQoKSwgZS5nLiB2aWEgYXNzZXJ0cyAqL1xuICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFuZCBhcHBseSBxdWV1ZWQgZGVwZW5kZW5jeSBmaWxlcyAoLmJpbikuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYXN5bmMgX2Rvd25sb2FkRGVwZW5kZW5jaWVzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9zY2VuZV9xdWV1ZWRfYmluX2NvdW50KHRoaXMuX2luZGV4KTtcbiAgICAgICAgaWYgKCFjb3VudClcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgdXJscyA9IG5ldyBBcnJheShjb3VudCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3NjZW5lX3F1ZXVlZF9iaW5fcGF0aCh0aGlzLl9pbmRleCwgaSk7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSB3YXNtLlVURjhUb1N0cmluZyhwdHIpO1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhc20uX3dsX3NjZW5lX2NsZWFyX3F1ZXVlZF9iaW5fbGlzdCh0aGlzLl9pbmRleCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh1cmxzLm1hcCgodXJsKSA9PiB0aGlzLl9kb3dubG9hZERlcGVuZGVuY3kodXJsKSkpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTY2VuZUxpa2UgfSBmcm9tICcuL3NjZW5lLmpzJztcbmV4cG9ydCBjbGFzcyBHTFRGRXh0ZW5zaW9ucyB7XG4gICAgb2JqZWN0Q291bnQ7XG4gICAgLyoqIGdsVEYgcm9vdCBleHRlbnNpb25zIG9iamVjdC4gSlNPTiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuICovXG4gICAgcm9vdCA9IHt9O1xuICAgIC8qKlxuICAgICAqIE1lc2ggZXh0ZW5zaW9uIG9iamVjdHMuIEtleSBpcyB0aGUgZ2x0ZiBpbmRleCwgdmFsdWUgaXMgSlNPTlxuICAgICAqIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS5cbiAgICAgKi9cbiAgICBtZXNoID0ge307XG4gICAgLyoqXG4gICAgICogTm9kZSBleHRlbnNpb24gb2JqZWN0cy4gS2V5IGlzIGEgZ2xURiBpbmRleCwgdmFsdWUgaXMgSlNPTlxuICAgICAqIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS5cbiAgICAgKi9cbiAgICBub2RlID0ge307XG4gICAgY29uc3RydWN0b3IoY291bnQpIHtcbiAgICAgICAgdGhpcy5vYmplY3RDb3VudCA9IGNvdW50O1xuICAgIH1cbn1cbi8qKlxuICogZ2xURiBzY2VuZS5cbiAqXG4gKiBBdCB0aGUgb3Bwb3NpdGUgb2Yge0BsaW5rIFNjZW5lfSwgZ2xURiBzY2VuZXMgY2FuIGJlIGluc3RhbnRpYXRlZFxuICogaW4gb3RoZXIgc2NlbmVzIGJ1dCBjYW4ndDpcbiAqIC0gQmUgYWN0aXZhdGVkXG4gKiAtIEJlIHRoZSBkZXN0aW5hdGlvbiBvZiBhbiBpbnN0YW50aWF0aW9uXG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwcmVmYWIgPSBhd2FpdCBzY2VuZUdyb3VwLmxvYWRHTFRGKCdab21iaWUuZ2xiJyk7XG4gKlxuICogY29uc3Qgc2NlbmUgPSBlbmdpbmUuc2NlbmU7XG4gKiBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgKytpKSB7XG4gKiAgICAgc2NlbmUuaW5zdGFudGlhdGUocHJlZmFiKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBzY2VuZVxuICovXG5leHBvcnQgY2xhc3MgU2NlbmVHTFRGIGV4dGVuZHMgU2NlbmVMaWtlIHtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgZXh0ZW5zaW9ucy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBnbFRGIG11c3QgYmUgbG9hZGVkIHdpdGggYGV4dGVuc2lvbnNgIGVuYWJsZWQuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgR0xURk9wdGlvbnN9IHR5cGUuXG4gICAgICovXG4gICAgZXh0ZW5zaW9ucyA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwLCBpbmRleCkge1xuICAgICAgICBzdXBlcihncm91cCwgaW5kZXgpO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSB0aGlzLl9yZWFkRXh0ZW5zaW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgZ2xURiBleHRlbnNpb25zIG9uIGFuIGFjdGl2ZSBzdWIgc2NlbmUgZ3JhcGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgVGhlIHJvb3Qgb2JqZWN0IGlkLlxuICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIGluc3RhbnRpYXRpb24gb2JqZWN0IHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfcHJvY2Vzc0luc3RhbnRpYXRvbihkZXN0LCByb290LCByZXN1bHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV4dGVuc2lvbnMpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5leHRlbnNpb25zLm9iamVjdENvdW50O1xuICAgICAgICBjb25zdCBpZE1hcHBpbmcgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgICAgICAvKiogQHRvZG86IFdlIG5lZWQgc29tZSBjaGVjayB0byBlbnN1cmUgdGhhdCB0aGUgZ2x0ZiBsYXlvdXQgZGlkbid0IGNoYW5nZSB0byByZXRhcmdldCBleHRlbnNpb25zLlxuICAgICAgICAgKiBBdCBsZWFzdCBhIHNpbXBsZSBzY2VuZSBncmFwaCBzaXplIGNoZWNrIHNob3VsZCBiZSByZXF1aXJlZCB0byBhdm9pZCBhIHNlZ2ZhdWx0LiAqL1xuICAgICAgICBjb25zdCBhY3RpdmVSb290SW5kZXggPSB3YXNtLl93bF9vYmplY3RfaW5kZXgocm9vdC5faWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZElkID0gd2FzbS5fd2xfZ2xURl9zY2VuZV9leHRlbnNpb25zX2dsdGZJbmRleF90b19pZCh0aGlzLl9pbmRleCwgZGVzdC5faW5kZXgsIGFjdGl2ZVJvb3RJbmRleCwgaSk7XG4gICAgICAgICAgICBpZE1hcHBpbmdbaV0gPSBtYXBwZWRJZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1hcHBlZCA9IHtcbiAgICAgICAgICAgIG1lc2g6IHt9LFxuICAgICAgICAgICAgbm9kZToge30sXG4gICAgICAgICAgICBpZE1hcHBpbmcsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZ2x0ZkluZGV4IGluIHRoaXMuZXh0ZW5zaW9ucy5tZXNoKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGlkTWFwcGluZ1tnbHRmSW5kZXhdO1xuICAgICAgICAgICAgcmVtYXBwZWQubWVzaFtpZF0gPSB0aGlzLmV4dGVuc2lvbnMubWVzaFtnbHRmSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZ2x0ZkluZGV4IGluIHRoaXMuZXh0ZW5zaW9ucy5ub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGlkTWFwcGluZ1tnbHRmSW5kZXhdO1xuICAgICAgICAgICAgcmVtYXBwZWQubm9kZVtpZF0gPSB0aGlzLmV4dGVuc2lvbnMubm9kZVtnbHRmSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5leHRlbnNpb25zID0gcmVtYXBwZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVubWFyc2hhbGxzIGdsdGYgZXh0ZW5zaW9ucy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfcmVhZEV4dGVuc2lvbnMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9nbFRGX3NjZW5lX2dldF9leHRlbnNpb25zKHRoaXMuX2luZGV4KTtcbiAgICAgICAgaWYgKCFwdHIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGluZGV4ID0gcHRyIC8gNDtcbiAgICAgICAgY29uc3QgZGF0YSA9IHdhc20uSEVBUFUzMjtcbiAgICAgICAgY29uc3QgcmVhZFN0cmluZyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0clB0ciA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgICAgICBjb25zdCBzdHJMZW4gPSBkYXRhW2luZGV4KytdO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uVVRGOFZpZXdUb1N0cmluZyhzdHJQdHIsIHN0clB0ciArIHN0ckxlbik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9iamVjdENvdW50ID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IG5ldyBHTFRGRXh0ZW5zaW9ucyhvYmplY3RDb3VudCk7XG4gICAgICAgIGNvbnN0IG1lc2hFeHRlbnNpb25zU2l6ZSA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaEV4dGVuc2lvbnNTaXplOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdElkID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMubWVzaFtvYmplY3RJZF0gPSBKU09OLnBhcnNlKHJlYWRTdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZUV4dGVuc2lvbnNTaXplID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlRXh0ZW5zaW9uc1NpemU7ICsraSkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBkYXRhW2luZGV4KytdO1xuICAgICAgICAgICAgZXh0ZW5zaW9ucy5ub2RlW29iamVjdElkXSA9IEpTT04ucGFyc2UocmVhZFN0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb290RXh0ZW5zaW9uc1N0ciA9IHJlYWRTdHJpbmcoKTtcbiAgICAgICAgaWYgKHJvb3RFeHRlbnNpb25zU3RyKSB7XG4gICAgICAgICAgICBleHRlbnNpb25zLnJvb3QgPSBKU09OLnBhcnNlKHJvb3RFeHRlbnNpb25zU3RyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5zaW9ucztcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTWF0ZXJpYWxNYW5hZ2VyIH0gZnJvbSAnLi9yZXNvdXJjZXMvbWF0ZXJpYWwtbWFuYWdlci5qcyc7XG5pbXBvcnQgeyBNZXNoTWFuYWdlciB9IGZyb20gJy4vcmVzb3VyY2VzL21lc2gtbWFuYWdlci5qcyc7XG5pbXBvcnQgeyBSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuL3Jlc291cmNlcy9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBUZXh0dXJlTWFuYWdlciB9IGZyb20gJy4vcmVzb3VyY2VzL3RleHR1cmUtbWFuYWdlci5qcyc7XG5pbXBvcnQgeyBTY2VuZUdMVEYgfSBmcm9tICcuL3NjZW5lLWdsdGYuanMnO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tICcuL3NjZW5lLmpzJztcbmltcG9ydCB7IGZldGNoV2l0aFByb2dyZXNzLCBnZXRCYXNlVXJsLCBnZXRGaWxlbmFtZSwgb25JbWFnZVJlYWR5IH0gZnJvbSAnLi91dGlscy9mZXRjaC5qcyc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4vdXRpbHMvb2JqZWN0LmpzJztcbmltcG9ydCB7IERlc3Ryb3llZFNjZW5lSW5zdGFuY2UsIE1vcnBoVGFyZ2V0cyB9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG4vKipcbiAqIFNjZW5lIHJvb3QsIGhvc3RpbmcgbXVsdGlwbGUgaW5zdGFudGlhYmxlIC8gYWN0aXZhdGFibGUgc2NlbmVzLlxuICpcbiAqIEEgc2NlbmUgcm9vdCBjb250YWluczpcbiAqICogT25lIC8gbXVsdGlwbGUgc2NlbmVzXG4gKiAqIFNoYXJlZCByZXNvdXJjZXMgZm9yIGFsbCB0aGUgc2NlbmVzXG4gKlxuICogUm9vdHMgY2FuIGJlIHVzZWQgdG8gbG9hZDpcbiAqIC0gV29uZGVybGFuZCBFbmdpbmUgc2NlbmVzICguYmluKSB1c2luZyB7QGxpbmsgU2NlbmVHcm91cCNsb2FkU2NlbmV9XG4gKiAtIC5nbGIgZmlsZXMgdXNpbmcge0BsaW5rIFNjZW5lR3JvdXAjbG9hZEdMVEZ9XG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBzY2VuZUdyb3VwID0gZW5naW5lLmxvYWRTY2VuZUdyb3VwKCdTY2VuZS5iaW4nKTtcbiAqXG4gKiAvLyBgMGAgY29udGFpbnMgdGhlIG9yaWdpbmFsIGFjdGl2YXRhYmxlIHNjZW5lIGZyb20gJ1NjZW5lLmJpbicuXG4gKiAvLyBBY3RpdmF0aW5nIHRoZSBzY2VuZSBtZWFucyB0aGF0IGl0IHdpbGwgbm93IGJlIHVwZGF0ZWQgYW5kIHJlbmRlcmVkLlxuICogc2NlbmVHcm91cC5nZXRTY2VuZSgwKS5hY3RpdmF0ZSgpO1xuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2VuZUdyb3VwIHtcbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIGBBcnJheUJ1ZmZlcmAgdXNpbmcgZmV0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgdXJsIG9yIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIFByb2dyZXNzIGNhbGxiYWNrXG4gICAgICogQHJldHVybnMgQW4ge0BsaW5rIEluTWVtb3J5TG9hZE9wdGlvbnN9IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgbG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcykge1xuICAgICAgICBjb25zdCB1cmwgPSBpc1N0cmluZyhvcHRzKSA/IG9wdHMgOiBvcHRzLnVybDtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmV0Y2hXaXRoUHJvZ3Jlc3ModXJsLCBwcm9ncmVzcyk7XG4gICAgICAgIGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVXJsKHVybCk7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZ2V0RmlsZW5hbWUodXJsKTtcbiAgICAgICAgcmV0dXJuIHsgYnVmZmVyLCBiYXNlVVJMLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGUgaW4gbWVtb3J5IG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIHZhbGlkYXRlLlxuICAgICAqIEByZXR1cm5zIFZhbGlkYXRlZCBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVCaW5PcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBidWZmZXIsIGJhc2VVUkwsIGZpbGVuYW1lID0gJ3NjZW5lLmJpbicgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghYnVmZmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nICdidWZmZXInIGluIG9wdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1N0cmluZyhiYXNlVVJMKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyAnYmFzZVVSTCcgaW4gb3B0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmwgPSBiYXNlVVJMID8gYCR7YmFzZVVSTH0vJHtmaWxlbmFtZX1gIDogZmlsZW5hbWU7XG4gICAgICAgIHJldHVybiB7IGJ1ZmZlciwgYmFzZVVSTCwgdXJsIH07XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2luZGV4O1xuICAgIC8qKiBgdHJ1ZWAgaWYgaXQncyBiZWVuIGxvYWRlZCB2aWEgdGhlIGxlZ2FjeSBwYXRoLiBAaGlkZGVuICovXG4gICAgX2xlZ2FjeUxvYWRlZCA9IGZhbHNlO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9jYWNoZSA9IFtdO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX3RleHR1cmVzO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX21hdGVyaWFscztcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9tZXNoZXM7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBfbW9ycGhUYXJnZXRzO1xuICAgIC8qKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIGluZGV4LCBzY2VuZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuX3RleHR1cmVzID0gbmV3IFRleHR1cmVNYW5hZ2VyKHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbHMgPSBuZXcgTWF0ZXJpYWxNYW5hZ2VyKHRoaXMpO1xuICAgICAgICB0aGlzLl9tZXNoZXMgPSBuZXcgTWVzaE1hbmFnZXIodGhpcyk7XG4gICAgICAgIHRoaXMuX21vcnBoVGFyZ2V0cyA9IG5ldyBSZXNvdXJjZU1hbmFnZXIodGhpcywgTW9ycGhUYXJnZXRzKTtcbiAgICAgICAgdGhpcy5fY2FjaGVTY2VuZShuZXcgU2NlbmUodGhpcywgc2NlbmUpKTtcbiAgICB9XG4gICAgLyogUHVibGljIE1ldGhvZHMgKi9cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzY2VuZSBmcm9tIGEgVVJMLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgY2FuIG9ubHkgbG9hZCBXb25kZXJsYW5kIEVuZ2luZSBgLmJpbmAgZmlsZXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBTY2VuZUdyb3VwI2xvYWRTY2VuZUZyb21NZW1vcnl9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHVybCBUaGUgVVJMIHBvaW50aW5nIHRvIHRoZSBzY2VuZSB0byBsb2FkLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBPcHRpb25hbCBwcm9ncmVzcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBsb2FkZWQge0BsaW5rIFNjZW5lfS5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkU2NlbmUob3B0cywgcHJvZ3Jlc3MgPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IFNjZW5lR3JvdXAubG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRTY2VuZUZyb21NZW1vcnkob3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGdsVEYgc2NlbmUgZnJvbSBhIFVSTC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGlzIGEgd3JhcHBlciBhcm91bmQge0BsaW5rIFNjZW5lR3JvdXAjbG9hZEdMVEZGcm9tTWVtb3J5fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBVUkwgYXMgYSBzdHJpbmcsIG9yIGFuIG9iamVjdCBvZiB0aGUgZm9ybSB7QGxpbmsgR0xURk9wdGlvbnN9LlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBPcHRpb25hbCBwcm9ncmVzcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBsb2FkZWQge0BsaW5rIFNjZW5lR0xURn0uXG4gICAgICovXG4gICAgYXN5bmMgbG9hZEdMVEYob3B0cywgcHJvZ3Jlc3MgPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgY29uc3QgbWVtT3B0aW9ucyA9IGF3YWl0IFNjZW5lR3JvdXAubG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBpc1N0cmluZyhvcHRzKSA/IG1lbU9wdGlvbnMgOiB7IC4uLm9wdHMsIC4uLm1lbU9wdGlvbnMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZEdMVEZGcm9tTWVtb3J5KG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzY2VuZSBmcm9tIGFuIGBBcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgYnVmZmVyIGFuZCBleHRyYSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBsb2FkZWQge0BsaW5rIFNjZW5lfS5cbiAgICAgKi9cbiAgICBsb2FkU2NlbmVGcm9tTWVtb3J5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBidWZmZXIsIHVybCB9ID0gU2NlbmVHcm91cC52YWxpZGF0ZUJpbk9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaW5kZXggPSB3YXNtLl93bF9zY2VuZV9jcmVhdGUodGhpcy5faW5kZXgsIHB0ciwgYnVmZmVyLmJ5dGVMZW5ndGgsIHdhc20udGVtcFVURjgodXJsKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9jYWNoZVNjZW5lKG5ldyBTY2VuZSh0aGlzLCBpbmRleCkpO1xuICAgICAgICBjaHVuay5faW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBnbFRGIHNjZW5lIGZyb20gYW4gYEFycmF5QnVmZmVyYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBidWZmZXIgYW5kIGV4dHJhIGdsVEYgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMgQSBuZXcgbG9hZGVkIHtAbGluayBTY2VuZUdMVEZ9LlxuICAgICAqL1xuICAgIGxvYWRHTFRGRnJvbU1lbW9yeShvcHRpb25zKSB7XG4gICAgICAgIFNjZW5lR3JvdXAudmFsaWRhdGVCaW5PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IGJ1ZmZlciwgZXh0ZW5zaW9ucyA9IGZhbHNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uY29weUJ1ZmZlclRvSGVhcChidWZmZXIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9nbFRGX3NjZW5lX2NyZWF0ZSh0aGlzLl9pbmRleCwgZXh0ZW5zaW9ucywgcHRyLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVTY2VuZShuZXcgU2NlbmVHTFRGKHRoaXMsIGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHNjZW5lIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIHNjZW5lIGlzIGxvY2F0ZWQuXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBTY2VuZUxpa2V9IGlmIGZvdW5kLCBgbnVsbGAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGdldFNjZW5lKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtpbmRleF0gPz8gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbmRleCBvZiB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NlbmUgVGhlIHNjZW5lLlxuICAgICAqIEByZXR1cm5zIFRoZSBpbmRleCwgb3IgYG51bGxgIGlzIHRoaXMgc2NlbmUgZG9lc24ndCBiZWxvbmcgdG8gdGhlIHJvb3QuXG4gICAgICovXG4gICAgZ2V0U2NlbmVJbmRleChzY2VuZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NhY2hlLmluZGV4T2Yoc2NlbmUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPj0gMCA/IGluZGV4IDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhpcyBzY2VuZSByb290LlxuICAgICAqXG4gICAgICogVGhlIGRlc3RydWN0aW9uIGF1dG9tYXRpY2FsbHkgZGVzdHJveXMgYWxsIHtAbGluayBTY2VuZUxpa2V9IGxvYWRlZFxuICAgICAqIGFzIHdlbGwgYXMgYWxsIHRoZSBsb2FkZWQgcmVzb3VyY2VzLlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX2NhY2hlLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZVtpXS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfc2NlbmVSb290X2Rlc3Ryb3kodGhpcy5faW5kZXgpO1xuICAgICAgICB0aGlzLl9lbmdpbmUuX2Rlc3Ryb3lTY2VuZUdyb3VwKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgaW5wdXQncyBzY2VuZSByb290IGlzIHRoZSBzYW1lIGFzIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBJdCBpcyBmb3JiaWRkZW4gdG8gbWl4IHJlc291cmNlcyBkaWZmZXJlbnQgcm9vdHMsICBhcyB3ZWxsIGFzIHVzaW5nIGFub3RoZXIgcm9vdFxuICAgICAqIHJlc291cmNlcyBpbiBhIHNjZW5lLCBlLmcuLFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCB0ZXh0dXJlQSA9IHNjZW5lUm9vdEEudGV4dHVyZXMuY3JlYXRlKGltYWdlKTtcbiAgICAgKiBjb25zdCBvYmpCID0gc2NlbmVBLmFkZE9iamVjdCgpO1xuICAgICAqIG9iakEucGFyZW50ID0gb2JqQjsgLy8gVGhyb3dzXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT2JqZWN0IC8gY29tcG9uZW50IHRvIGNoZWNrLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBvdGhlcidzIHNjZW5lIGlzbid0IHRoZSBzYW1lIHJlZmVyZW5jZSBhcyB0aGlzLlxuICAgICAqL1xuICAgIGFzc2VydE9yaWdpbihvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgJiYgb3RoZXIuc2NlbmUgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdCB0byB1c2UgJHtvdGhlcn0gZnJvbSAke290aGVyLnNjZW5lfSBpbiAke3RoaXN9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdTY2VuZUdyb3VwKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgU2NlbmVHcm91cCgke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbiAgICAvKiBQdWJsaWMgR2V0dGVycyAmIFNldHRlcnMgKi9cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqIGB0cnVlYCBpZiBhIHNjZW5lIG9mIHRoaXMgcm9vdCBpcyBjdXJyZW50bHkgYWN0aXZlLiAqL1xuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHRoaXMuZW5naW5lLnNjZW5lLmdyb3VwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY2xhc3MgYXR0cmlidXRlIC8gbWV0aG9kIHdpbGwgdGhyb3cuXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPCAwO1xuICAgIH1cbiAgICAvKiogR2V0IGFsbCB1bmNvbXByZXNzZWQgaW1hZ2VzIHN0b3JlZCBpbiB0aGUgc2NlbmUgcm9vdC4gKi9cbiAgICBnZXQgaW1hZ2VzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgbWF4ID0gd2FzbS5fdGVtcE1lbVNpemUgPj4gMTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9zY2VuZVJvb3RfZ2V0X2ltYWdlcyh0aGlzLl9pbmRleCwgd2FzbS5fdGVtcE1lbSwgbWF4KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3RlbXBNZW1VaW50MTZbaV07XG4gICAgICAgICAgICByZXN1bHRbaV0gPSB3YXNtLl9pbWFnZXNbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb21pc2UgdGhhdCByZXNvbHZlIG9uY2UgYWxsIHVuY29tcHJlc3NlZCBpbWFnZXMgYXJlIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayBTY2VuZUdyb3VwLmltYWdlc30sIGFuZCB3cmFwcGluZyBlYWNoXG4gICAgICogYGxvYWRgIGxpc3RlbmVyIGludG8gYSBwcm9taXNlLlxuICAgICAqL1xuICAgIGdldCBpbWFnZXNQcm9taXNlKCkge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMuaW1hZ2VzLm1hcCgoaSkgPT4gb25JbWFnZVJlYWR5KGkpKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG4gICAgLyoqIFRleHR1cmUgcmVzb3VyY2VzICovXG4gICAgZ2V0IHRleHR1cmVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZXM7XG4gICAgfVxuICAgIC8qKiBNYXRlcmlhbCByZXNvdXJjZXMgKi9cbiAgICBnZXQgbWF0ZXJpYWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxzO1xuICAgIH1cbiAgICAvKiogTWVzaCByZXNvdXJjZXMgKi9cbiAgICBnZXQgbWVzaGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVzaGVzO1xuICAgIH1cbiAgICAvKiogTW9ycGggdGFyZ2V0IHNldCByZXNvdXJjZXMgKi9cbiAgICBnZXQgbW9ycGhUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW9ycGhUYXJnZXRzO1xuICAgIH1cbiAgICAvKiBJbnRlcm5hbC1Pbmx5IE1ldGhvZHMgKi9cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZW1wdHkgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBzY2VuZVxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9jcmVhdGVFbXB0eSgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2VtcHR5KHRoaXMuX2luZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlU2NlbmUobmV3IFNjZW5lKHRoaXMsIGluZGV4KSk7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2Rlc3Ryb3lTY2VuZUF0SW5kZXgoY2FjaGVkSW5kZXgpIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLl9jYWNoZVtjYWNoZWRJbmRleF07XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9zY2VuZV9kZXN0cm95KGluc3RhbmNlLl9pbmRleCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5zdGFuY2UuX2luZGV4O1xuICAgICAgICBpbnN0YW5jZS5faW5kZXggPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95KSB7XG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIERlc3Ryb3llZFNjZW5lSW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhY2hlLnNwbGljZShjYWNoZWRJbmRleCwgMSk7XG4gICAgICAgIHRoaXMuZW5naW5lLl9zY2VuZXNbaW5kZXhdID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBzY2VuZSB0byB0aGUgV0FTTSBhbmQgbG9jYWwgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NlbmUgU2NlbmUgdG8gY2FjaGUuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NhY2hlU2NlbmUoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUucHVzaChzY2VuZSk7XG4gICAgICAgIHRoaXMuZW5naW5lLl9zY2VuZXNbc2NlbmUuX2luZGV4XSA9IHNjZW5lO1xuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxufVxuIiwgIi8qKlxuICogVHlwZXNcbiAqL1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgbmF0aXZlUHJvcGVydHksIGVudW1lcmFibGUgfSBmcm9tICcuL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgaXNJbWFnZUxpa2UsIGlzTnVtYmVyLCBpc1N0cmluZyB9IGZyb20gJy4vdXRpbHMvb2JqZWN0LmpzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuL3V0aWxzL2V2ZW50LmpzJztcbmltcG9ydCB7IFR5cGUgfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcbmltcG9ydCB7IFNjZW5lR3JvdXAgfSBmcm9tICcuL3NjZW5lLWdyb3VwLmpzJztcbmltcG9ydCB7IFNjZW5lUmVzb3VyY2UgfSBmcm9tICcuL3Jlc291cmNlcy9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBTY2VuZUxpa2UgfSBmcm9tICcuL3NjZW5lLmpzJztcbmltcG9ydCB7IGNyZWF0ZURlc3Ryb3llZFByb3h5IH0gZnJvbSAnLi91dGlscy9taXNjLmpzJztcbi8qKlxuICogV29uZGVybGFuZCBFbmdpbmUgQVBJXG4gKiBAbmFtZXNwYWNlIFdMXG4gKi9cbi8qKlxuICogRGVmYXVsdCBzZXQgb2YgbG9nZ2luZyB0YWdzIHVzZWQgYnkgdGhlIEFQSS5cbiAqL1xuZXhwb3J0IHZhciBMb2dUYWc7XG4oZnVuY3Rpb24gKExvZ1RhZykge1xuICAgIC8qKiBJbml0aWFsaXphdGlvbiwgY29tcG9uZW50IHJlZ2lzdHJhdGlvbiwgZXRjLi4uICovXG4gICAgTG9nVGFnW0xvZ1RhZ1tcIkVuZ2luZVwiXSA9IDBdID0gXCJFbmdpbmVcIjtcbiAgICAvKiogU2NlbmUgbG9hZGluZyAqL1xuICAgIExvZ1RhZ1tMb2dUYWdbXCJTY2VuZVwiXSA9IDFdID0gXCJTY2VuZVwiO1xuICAgIC8qKiBDb21wb25lbnQgaW5pdCwgdXBkYXRlLCBldGMuLi4gKi9cbiAgICBMb2dUYWdbTG9nVGFnW1wiQ29tcG9uZW50XCJdID0gMl0gPSBcIkNvbXBvbmVudFwiO1xufSkoTG9nVGFnIHx8IChMb2dUYWcgPSB7fSkpO1xuLyoqXG4gKiBDb2xsaWRlciB0eXBlIGVudW0gZm9yIHtAbGluayBDb2xsaXNpb25Db21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIENvbGxpZGVyO1xuKGZ1bmN0aW9uIChDb2xsaWRlcikge1xuICAgIC8qKlxuICAgICAqICoqU3BoZXJlIENvbGxpZGVyKio6XG4gICAgICpcbiAgICAgKiBTaW1wbGVzdCBhbmQgbW9zdCBwZXJmb3JtYW50IGNvbGxpc2lvbiBzaGFwZS4gSWYgdGhpcyB0eXBlIGlzIHNldCBvbiBhXG4gICAgICoge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudH0sIG9ubHkgdGhlIGZpcnN0IGNvbXBvbmVudCBvZlxuICAgICAqIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQjZXh0ZW50c30gd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgcmFkaXVzLlxuICAgICAqL1xuICAgIENvbGxpZGVyW0NvbGxpZGVyW1wiU3BoZXJlXCJdID0gMF0gPSBcIlNwaGVyZVwiO1xuICAgIC8qKlxuICAgICAqICoqQXhpcyBBbGlnbmVkIEJvdW5kaW5nIEJveCBDb2xsaWRlcioqOlxuICAgICAqXG4gICAgICogQm94IHRoYXQgaXMgYWx3YXlzIGFsaWduZWQgdG8gWFlaIGF4aXMuIEl0IGNhbm5vdCBiZSByb3RhdGVkIGJ1dCBpcyBtb3JlXG4gICAgICogZWZmaWNpZW50IHRoYW4ge0BsaW5rIENvbGxpZGVyLkJveH0uXG4gICAgICovXG4gICAgQ29sbGlkZXJbQ29sbGlkZXJbXCJBeGlzQWxpZ25lZEJveFwiXSA9IDFdID0gXCJBeGlzQWxpZ25lZEJveFwiO1xuICAgIC8qKlxuICAgICAqICoqQWxpZ25lZCBCb3VuZGluZyBCb3ggQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIEJveCB0aGF0IG1hdGNoZXMgdGhlIG9iamVjdCdzIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiBjb3JyZWN0bHkuIFRoaXNcbiAgICAgKiBpcyB0aGUgbGVhc3QgZWZmaWNpZW50IGNvbGxpZGVyIGFuZCBzaG91bGQgb25seSBiZSBjaG9zZW4gb3ZlclxuICAgICAqIHtAbGluayBDb2xsaWRlci5TcGhlcmV9IGFuZCB7QGxpbmsgQ29sbGlkZXIuQXhpc0FsaWduZWRCb3h9IGlmIHJlYWxseVxuICAgICAqIG5lY2Vzc2FyeS5cbiAgICAgKi9cbiAgICBDb2xsaWRlcltDb2xsaWRlcltcIkJveFwiXSA9IDJdID0gXCJCb3hcIjtcbn0pKENvbGxpZGVyIHx8IChDb2xsaWRlciA9IHt9KSk7XG4vKipcbiAqIEFsaWdubWVudCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBBbGlnbm1lbnQ7XG4oZnVuY3Rpb24gKEFsaWdubWVudCkge1xuICAgIC8qKiBUZXh0IHN0YXJ0IGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBBbGlnbm1lbnRbQWxpZ25tZW50W1wiTGVmdFwiXSA9IDBdID0gXCJMZWZ0XCI7XG4gICAgLyoqIFRleHQgY2VudGVyIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBBbGlnbm1lbnRbQWxpZ25tZW50W1wiQ2VudGVyXCJdID0gMV0gPSBcIkNlbnRlclwiO1xuICAgIC8qKiBUZXh0IGVuZCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgQWxpZ25tZW50W0FsaWdubWVudFtcIlJpZ2h0XCJdID0gMl0gPSBcIlJpZ2h0XCI7XG59KShBbGlnbm1lbnQgfHwgKEFsaWdubWVudCA9IHt9KSk7XG4vKipcbiAqIFZlcnRpY2FsIGFsaWdubWVudCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBWZXJ0aWNhbEFsaWdubWVudDtcbihmdW5jdGlvbiAoVmVydGljYWxBbGlnbm1lbnQpIHtcbiAgICAvKiogVGV4dCBsaW5lIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBWZXJ0aWNhbEFsaWdubWVudFtWZXJ0aWNhbEFsaWdubWVudFtcIkxpbmVcIl0gPSAwXSA9IFwiTGluZVwiO1xuICAgIC8qKiBUZXh0IG1pZGRsZSBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgVmVydGljYWxBbGlnbm1lbnRbVmVydGljYWxBbGlnbm1lbnRbXCJNaWRkbGVcIl0gPSAxXSA9IFwiTWlkZGxlXCI7XG4gICAgLyoqIFRleHQgdG9wIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBWZXJ0aWNhbEFsaWdubWVudFtWZXJ0aWNhbEFsaWdubWVudFtcIlRvcFwiXSA9IDJdID0gXCJUb3BcIjtcbiAgICAvKiogVGV4dCBib3R0b20gaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIFZlcnRpY2FsQWxpZ25tZW50W1ZlcnRpY2FsQWxpZ25tZW50W1wiQm90dG9tXCJdID0gM10gPSBcIkJvdHRvbVwiO1xufSkoVmVydGljYWxBbGlnbm1lbnQgfHwgKFZlcnRpY2FsQWxpZ25tZW50ID0ge30pKTtcbi8qKlxuICogSnVzdGlmaWNhdGlvbiB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBWZXJ0aWNhbEFsaWdubWVudH0gaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGNvbnN0IEp1c3RpZmljYXRpb24gPSBWZXJ0aWNhbEFsaWdubWVudDtcbi8qKlxuICogRWZmZWN0IHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIFRleHRFZmZlY3Q7XG4oZnVuY3Rpb24gKFRleHRFZmZlY3QpIHtcbiAgICAvKiogVGV4dCBpcyByZW5kZXJlZCBub3JtYWxseSAqL1xuICAgIFRleHRFZmZlY3RbVGV4dEVmZmVjdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKiBUZXh0IGlzIHJlbmRlcmVkIHdpdGggYW4gb3V0bGluZSAqL1xuICAgIFRleHRFZmZlY3RbVGV4dEVmZmVjdFtcIk91dGxpbmVcIl0gPSAxXSA9IFwiT3V0bGluZVwiO1xufSkoVGV4dEVmZmVjdCB8fCAoVGV4dEVmZmVjdCA9IHt9KSk7XG4vKipcbiAqIElucHV0IHR5cGUgZW51bSBmb3Ige0BsaW5rIElucHV0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBJbnB1dFR5cGU7XG4oZnVuY3Rpb24gKElucHV0VHlwZSkge1xuICAgIC8qKiBIZWFkIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkhlYWRcIl0gPSAwXSA9IFwiSGVhZFwiO1xuICAgIC8qKiBMZWZ0IGV5ZSBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJFeWVMZWZ0XCJdID0gMV0gPSBcIkV5ZUxlZnRcIjtcbiAgICAvKiogUmlnaHQgZXllIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkV5ZVJpZ2h0XCJdID0gMl0gPSBcIkV5ZVJpZ2h0XCI7XG4gICAgLyoqIExlZnQgY29udHJvbGxlciBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJDb250cm9sbGVyTGVmdFwiXSA9IDNdID0gXCJDb250cm9sbGVyTGVmdFwiO1xuICAgIC8qKiBSaWdodCBjb250cm9sbGVyIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkNvbnRyb2xsZXJSaWdodFwiXSA9IDRdID0gXCJDb250cm9sbGVyUmlnaHRcIjtcbiAgICAvKiogTGVmdCByYXkgaW5wdXQgKi9cbiAgICBJbnB1dFR5cGVbSW5wdXRUeXBlW1wiUmF5TGVmdFwiXSA9IDVdID0gXCJSYXlMZWZ0XCI7XG4gICAgLyoqIFJpZ2h0IHJheSBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJSYXlSaWdodFwiXSA9IDZdID0gXCJSYXlSaWdodFwiO1xufSkoSW5wdXRUeXBlIHx8IChJbnB1dFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBMaWdodCB0eXBlIGVudW0gZm9yIHtAbGluayBMaWdodENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgTGlnaHRUeXBlO1xuKGZ1bmN0aW9uIChMaWdodFR5cGUpIHtcbiAgICAvKiogUG9pbnQgbGlnaHQgKi9cbiAgICBMaWdodFR5cGVbTGlnaHRUeXBlW1wiUG9pbnRcIl0gPSAwXSA9IFwiUG9pbnRcIjtcbiAgICAvKiogU3BvdCBsaWdodCAqL1xuICAgIExpZ2h0VHlwZVtMaWdodFR5cGVbXCJTcG90XCJdID0gMV0gPSBcIlNwb3RcIjtcbiAgICAvKiogU3VuIGxpZ2h0IC8gRGlyZWN0aW9uYWwgbGlnaHQgKi9cbiAgICBMaWdodFR5cGVbTGlnaHRUeXBlW1wiU3VuXCJdID0gMl0gPSBcIlN1blwiO1xufSkoTGlnaHRUeXBlIHx8IChMaWdodFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBBbmltYXRpb24gc3RhdGUgb2Yge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgQW5pbWF0aW9uU3RhdGU7XG4oZnVuY3Rpb24gKEFuaW1hdGlvblN0YXRlKSB7XG4gICAgLyoqIEFuaW1hdGlvbiBpcyBjdXJyZW50bHkgcGxheWluZyAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiUGxheWluZ1wiXSA9IDBdID0gXCJQbGF5aW5nXCI7XG4gICAgLyoqIEFuaW1hdGlvbiBpcyBwYXVzZWQgYW5kIHdpbGwgY29udGludWUgYXQgY3VycmVudCBwbGF5YmFja1xuICAgICAqIHRpbWUgb24ge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNwbGF5fSAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiUGF1c2VkXCJdID0gMV0gPSBcIlBhdXNlZFwiO1xuICAgIC8qKiBBbmltYXRpb24gaXMgc3RvcHBlZCAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiU3RvcHBlZFwiXSA9IDJdID0gXCJTdG9wcGVkXCI7XG59KShBbmltYXRpb25TdGF0ZSB8fCAoQW5pbWF0aW9uU3RhdGUgPSB7fSkpO1xuLyoqXG4gKiBSaWdpZCBib2R5IGZvcmNlIG1vZGUgZm9yIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRGb3JjZX0gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRUb3JxdWV9LlxuICpcbiAqIFtQaHlzWCBBUEkgUmVmZXJlbmNlXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGFwaS9maWxlcy9zdHJ1Y3RQeEZvcmNlTW9kZS5odG1sKVxuICovXG5leHBvcnQgdmFyIEZvcmNlTW9kZTtcbihmdW5jdGlvbiAoRm9yY2VNb2RlKSB7XG4gICAgLyoqIEFwcGx5IGFzIGZvcmNlICovXG4gICAgRm9yY2VNb2RlW0ZvcmNlTW9kZVtcIkZvcmNlXCJdID0gMF0gPSBcIkZvcmNlXCI7XG4gICAgLyoqIEFwcGx5IGFzIGltcHVsc2UgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiSW1wdWxzZVwiXSA9IDFdID0gXCJJbXB1bHNlXCI7XG4gICAgLyoqIEFwcGx5IGFzIHZlbG9jaXR5IGNoYW5nZSwgbWFzcyBkZXBlbmRlbnQgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiVmVsb2NpdHlDaGFuZ2VcIl0gPSAyXSA9IFwiVmVsb2NpdHlDaGFuZ2VcIjtcbiAgICAvKiogQXBwbHkgYXMgbWFzcyBkZXBlbmRlbnQgZm9yY2UgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiQWNjZWxlcmF0aW9uXCJdID0gM10gPSBcIkFjY2VsZXJhdGlvblwiO1xufSkoRm9yY2VNb2RlIHx8IChGb3JjZU1vZGUgPSB7fSkpO1xuLyoqXG4gKiBDb2xsaXNpb24gY2FsbGJhY2sgZXZlbnQgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBDb2xsaXNpb25FdmVudFR5cGU7XG4oZnVuY3Rpb24gKENvbGxpc2lvbkV2ZW50VHlwZSkge1xuICAgIC8qKiBUb3VjaC9jb250YWN0IGRldGVjdGVkLCBjb2xsaXNpb24gKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVG91Y2hcIl0gPSAwXSA9IFwiVG91Y2hcIjtcbiAgICAvKiogVG91Y2gvY29udGFjdCBsb3N0LCB1bmNvbGxpZGUgKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVG91Y2hMb3N0XCJdID0gMV0gPSBcIlRvdWNoTG9zdFwiO1xuICAgIC8qKiBUb3VjaC9jb250YWN0IHdpdGggdHJpZ2dlciBkZXRlY3RlZCAqL1xuICAgIENvbGxpc2lvbkV2ZW50VHlwZVtDb2xsaXNpb25FdmVudFR5cGVbXCJUcmlnZ2VyVG91Y2hcIl0gPSAyXSA9IFwiVHJpZ2dlclRvdWNoXCI7XG4gICAgLyoqIFRvdWNoL2NvbnRhY3Qgd2l0aCB0cmlnZ2VyIGxvc3QgKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVHJpZ2dlclRvdWNoTG9zdFwiXSA9IDNdID0gXCJUcmlnZ2VyVG91Y2hMb3N0XCI7XG59KShDb2xsaXNpb25FdmVudFR5cGUgfHwgKENvbGxpc2lvbkV2ZW50VHlwZSA9IHt9KSk7XG4vKipcbiAqIFJpZ2lkIGJvZHkge0BsaW5rIFBoeXNYQ29tcG9uZW50I3NoYXBlfS5cbiAqXG4gKiBbUGh5c1ggU0RLIEd1aWRlXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9HZW9tZXRyeS5odG1sI2dlb21ldHJ5LXR5cGVzKS5cbiAqL1xuZXhwb3J0IHZhciBTaGFwZTtcbihmdW5jdGlvbiAoU2hhcGUpIHtcbiAgICAvKiogTm8gc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICAvKiogU3BoZXJlIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiU3BoZXJlXCJdID0gMV0gPSBcIlNwaGVyZVwiO1xuICAgIC8qKiBDYXBzdWxlIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiQ2Fwc3VsZVwiXSA9IDJdID0gXCJDYXBzdWxlXCI7XG4gICAgLyoqIEJveCBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIkJveFwiXSA9IDNdID0gXCJCb3hcIjtcbiAgICAvKiogUGxhbmUgc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJQbGFuZVwiXSA9IDRdID0gXCJQbGFuZVwiO1xuICAgIC8qKiBDb252ZXggbWVzaCBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIkNvbnZleE1lc2hcIl0gPSA1XSA9IFwiQ29udmV4TWVzaFwiO1xuICAgIC8qKiBUcmlhbmdsZSBtZXNoIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiVHJpYW5nbGVNZXNoXCJdID0gNl0gPSBcIlRyaWFuZ2xlTWVzaFwiO1xufSkoU2hhcGUgfHwgKFNoYXBlID0ge30pKTtcbi8qKlxuICogTWVzaCBhdHRyaWJ1dGUgZW51bS5cbiAqIEBzaW5jZSAwLjkuMFxuICovXG5leHBvcnQgdmFyIE1lc2hBdHRyaWJ1dGU7XG4oZnVuY3Rpb24gKE1lc2hBdHRyaWJ1dGUpIHtcbiAgICAvKiogUG9zaXRpb24gYXR0cmlidXRlLCAzIGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIlBvc2l0aW9uXCJdID0gMF0gPSBcIlBvc2l0aW9uXCI7XG4gICAgLyoqIFRhbmdlbnQgYXR0cmlidXRlLCA0IGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIlRhbmdlbnRcIl0gPSAxXSA9IFwiVGFuZ2VudFwiO1xuICAgIC8qKiBOb3JtYWwgYXR0cmlidXRlLCAzIGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIk5vcm1hbFwiXSA9IDJdID0gXCJOb3JtYWxcIjtcbiAgICAvKiogVGV4dHVyZSBjb29yZGluYXRlIGF0dHJpYnV0ZSwgMiBmbG9hdHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJUZXh0dXJlQ29vcmRpbmF0ZVwiXSA9IDNdID0gXCJUZXh0dXJlQ29vcmRpbmF0ZVwiO1xuICAgIC8qKiBDb2xvciBhdHRyaWJ1dGUsIDQgZmxvYXRzLCBSR0JBLCByYW5nZSBgMGAgdG8gYDFgICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiQ29sb3JcIl0gPSA0XSA9IFwiQ29sb3JcIjtcbiAgICAvKiogSm9pbnQgaWQgYXR0cmlidXRlLCA4IHVuc2lnbmVkIGludHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJKb2ludElkXCJdID0gNV0gPSBcIkpvaW50SWRcIjtcbiAgICAvKiogSm9pbnQgd2VpZ2h0cyBhdHRyaWJ1dGUsIDggZmxvYXRzICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiSm9pbnRXZWlnaHRcIl0gPSA2XSA9IFwiSm9pbnRXZWlnaHRcIjtcbn0pKE1lc2hBdHRyaWJ1dGUgfHwgKE1lc2hBdHRyaWJ1dGUgPSB7fSkpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgb2JqZWN0cy4gKi9cbmV4cG9ydCBjb25zdCBEZXN0cm95ZWRPYmplY3RJbnN0YW5jZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdvYmplY3QnKTtcbi8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIGNvbXBvbmVudHMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkQ29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnY29tcG9uZW50Jyk7XG4vKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBzY2VuZSBjaHVua3MuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkU2NlbmVJbnN0YW5jZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdzY2VuZSBjaHVuaycpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgc2NlbmUgcm9vdC4gKi9cbmV4cG9ydCBjb25zdCBEZXN0cm95ZWRTY2VuZUdyb3VwSW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnc2NlbmUgZ3JvdXAnKTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHNoYXBlIGlzIGEgbWVzaCBvciBub3QuXG4gKlxuICogQHBhcmFtIHNoYXBlIFRoZSBzaGFwZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2hhcGUgaXMgYSBtZXNoLCBgZmFsc2VgIGlmIGl0J3MgYSBwcmltaXRpdmUuXG4gKi9cbmZ1bmN0aW9uIGlzTWVzaFNoYXBlKHNoYXBlKSB7XG4gICAgcmV0dXJuIHNoYXBlID09PSBTaGFwZS5Db252ZXhNZXNoIHx8IHNoYXBlID09PSBTaGFwZS5UcmlhbmdsZU1lc2g7XG59XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gb2JqZWN0IGlzIHRoZSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcyBvciBub3QsXG4gKlxuICogQG5vdGUgVGhpcyBtZXRob2QgaWYgZm9vbHByb29mIHRvIGRldmVsb3BlcnMgaW5hZHZlcnRlbnRseSB1c2luZ1xuICogbXVsdGlwbGUgV29uZGVybGFuZCBFbmdpbmUgQVBJIGluIGEgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgYSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcywgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzQmFzZUNvbXBvbmVudENsYXNzKHZhbHVlKSB7XG4gICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KCdfaXNCYXNlQ29tcG9uZW50JykgJiZcbiAgICAgICAgdmFsdWUuX2lzQmFzZUNvbXBvbmVudCk7XG59XG4vKipcbiAqIENvbnN0YW50cy5cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IHdvcmxkIHVwIHZlY3Rvci5cbiAqL1xuY29uc3QgVVBfVkVDVE9SID0gWzAsIDEsIDBdO1xuY29uc3QgU1FSVF8zID0gTWF0aC5zcXJ0KDMpO1xuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBjb21wb25lbnQgaW5zdGFuY2Ugb2YgYSBzcGVjaWZpZWQgY29tcG9uZW50IHR5cGUuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGlzIGlzIGhvdyB5b3UgZXh0ZW5kIHRoaXMgY2xhc3MgdG8gY3JlYXRlIHlvdXIgb3duIGN1c3RvbVxuICogY29tcG9uZW50OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gKiAgICAgICAgIG15Qm9vbGVhbjogeyB0eXBlOiBUeXBlLkJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gKiAgICAgfTtcbiAqICAgICBzdGFydCgpIHt9XG4gKiAgICAgb25BY3RpdmF0ZSgpIHt9XG4gKiAgICAgb25EZWFjdGl2YXRlKCkge31cbiAqICAgICB1cGRhdGUoZHQpIHt9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogUGFjayBzY2VuZSBpbmRleCBhbmQgY29tcG9uZW50IGlkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjZW5lIFNjZW5lIGluZGV4LlxuICAgICAqIEBwYXJhbSBpZCBDb21wb25lbnQgaWQuXG4gICAgICogQHJldHVybnMgVGhlIHBhY2tlZCBpZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhY2soc2NlbmUsIGlkKSB7XG4gICAgICAgIHJldHVybiAoc2NlbmUgPDwgMjIpIHwgaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBmb3IgZXZlcnkgY2xhc3MgaW5oZXJpdGluZyBmcm9tIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgYGluc3RhbmNlb2ZgIHRvIHByZXZlbnQgaXNzdWVzXG4gICAgICogdGhhdCBjb3VsZCBhcmlzZSB3aGVuIGFuIGFwcGxpY2F0aW9uIGVuZHMgdXAgdXNpbmcgbXVsdGlwbGUgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaXNCYXNlQ29tcG9uZW50ID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBGaXhlZCBvcmRlciBvZiBhdHRyaWJ1dGVzIGluIHRoZSBgUHJvcGVydGllc2AgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIHVzZWQgZm9yIHBhcmFtZXRlciBkZXNlcmlhbGl6YXRpb24gYW5kIGlzIGZpbGxlZCBkdXJpbmdcbiAgICAgKiBjb21wb25lbnQgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvcGVydHlPcmRlciA9IFtdO1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIGNvbXBvbmVudCBjbGFzcy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byByZWdpc3RlciwgYWRkLCBhbmQgcmV0cmlldmUgY29tcG9uZW50cyBvZiBhIGdpdmVuIHR5cGUuXG4gICAgICovXG4gICAgc3RhdGljIFR5cGVOYW1lO1xuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgdGhpcyBjb21wb25lbnQgY2xhc3MuXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0aWVzIGFyZSBwdWJsaWMgYXR0cmlidXRlcyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHZpYSB0aGVcbiAgICAgKiBXb25kZXJsYW5kIEVkaXRvci5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICogICAgICAgICBteUJvb2xlYW46IHsgdHlwZTogVHlwZS5Cb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlGbG9hdDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiB7IHR5cGU6IFR5cGUuVGV4dHVyZSwgZGVmYXVsdDogbnVsbCB9LFxuICAgICAqICAgICB9O1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCBjb21wb25lbnQgaW5zdGFuY2UsIGFuZCBhcmVcbiAgICAgKiBhY2Nlc3NpYmxlIGxpa2UgYW55IEpTIGF0dHJpYnV0ZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlcyBhIG5ldyBjb21wb25lbnQgYW5kIHNldCBlYWNoIHByb3BlcnRpZXMgdmFsdWU6XG4gICAgICogY29uc3QgbXlDb21wb25lbnQgPSBvYmplY3QuYWRkQ29tcG9uZW50KE15Q29tcG9uZW50LCB7XG4gICAgICogICAgIG15Qm9vbGVhbjogdHJ1ZSxcbiAgICAgKiAgICAgbXlGbG9hdDogNDIuMCxcbiAgICAgKiAgICAgbXlUZXh0dXJlOiBudWxsXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBZb3UgY2FuIGFsc28gb3ZlcnJpZGUgdGhlIHByb3BlcnRpZXMgb24gdGhlIGluc3RhbmNlOlxuICAgICAqIG15Q29tcG9uZW50Lm15Qm9vbGVhbiA9IGZhbHNlO1xuICAgICAqIG15Q29tcG9uZW50Lm15RmxvYXQgPSAtNDIuMDtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgUmVmZXJlbmNlc1xuICAgICAqXG4gICAgICogUmVmZXJlbmNlIHR5cGVzIChpLmUuLCBtZXNoLCBvYmplY3QsIGV0Yy4uLikgY2FuIGFsc28gYmUgbGlzdGVkIGFzICoqcmVxdWlyZWQqKjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIG15T2JqZWN0OiBQcm9wZXJ0eS5vYmplY3Qoe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgICAgICBteUFuaW1hdGlvbjogUHJvcGVydHkuYW5pbWF0aW9uKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiBQcm9wZXJ0eS50ZXh0dXJlKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlNZXNoOiBQcm9wZXJ0eS5tZXNoKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogUGxlYXNlIG5vdGUgdGhhdCByZWZlcmVuY2VzIGFyZSB2YWxpZGF0ZWQgKipvbmNlKiogYmVmb3JlIHRoZSBjYWxsIHRvIHtAbGluayBDb21wb25lbnQuc3RhcnR9IG9ubHksXG4gICAgICogdmlhIHRoZSB7QGxpbmsgQ29tcG9uZW50LnZhbGlkYXRlUHJvcGVydGllc30gbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzO1xuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIGNoaWxkIGNsYXNzIGluaGVyaXRzIGZyb20gdGhlIHBhcmVudFxuICAgICAqIHByb3BlcnRpZXMsIGFzIHNob3duIGluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgUGFyZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3BhcmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge3BhcmVudE5hbWU6IFByb3BlcnR5LnN0cmluZygncGFyZW50Jyl9XG4gICAgICogfVxuICAgICAqXG4gICAgICogY2xhc3MgQ2hpbGQgZXh0ZW5kcyBQYXJlbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY2hpbGQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtuYW1lOiBQcm9wZXJ0eS5zdHJpbmcoJ2NoaWxkJyl9XG4gICAgICogICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcyA9IHRydWU7XG4gICAgICpcbiAgICAgKiAgICAgc3RhcnQoKSB7XG4gICAgICogICAgICAgICAvLyBXb3JrcyBiZWNhdXNlIGBJbmhlcml0UHJvcGVydGllc2AgaXMgYHRydWVgLlxuICAgICAqICAgICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lfSBpbmhlcml0cyBmcm9tICR7dGhpcy5wYXJlbnROYW1lfWApO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgUHJvcGVydGllcyBkZWZpbmVkIGluIGRlc2NlbmRhbnQgY2xhc3NlcyB3aWxsIG92ZXJyaWRlIHByb3BlcnRpZXNcbiAgICAgKiB3aXRoIHRoZSBzYW1lIG5hbWUgZGVmaW5lZCBpbiBhbmNlc3RvciBjbGFzc2VzLlxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgICAqL1xuICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcztcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIGNvbXBvbmVudCBjbGFzcyBpcyByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoaXMgY2FsbGJhY2sgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgZGVwZW5kZW5jaWVzIG9mIGEgY29tcG9uZW50LFxuICAgICAqIGUuZy4sIGNvbXBvbmVudCBjbGFzc2VzIHRoYXQgbmVlZCB0byBiZSByZWdpc3RlcmVkIGluIG9yZGVyIHRvIGFkZFxuICAgICAqIHRoZW0gYXQgcnVudGltZSB3aXRoIHtAbGluayBPYmplY3QzRC5hZGRDb21wb25lbnR9LCBpbmRlcGVuZGVudCBvZiB3aGV0aGVyXG4gICAgICogdGhleSBhcmUgdXNlZCBpbiB0aGUgZWRpdG9yLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBTcGF3bmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3NwYXduZXInO1xuICAgICAqXG4gICAgICogICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KFNwYXduZWRDb21wb25lbnQpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gWW91IGNhbiBub3cgdXNlIGFkZENvbXBvbmVudCB3aXRoIFNwYXduZWRDb21wb25lbnRcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogVGhpcyBjYWxsYmFjayBjYW4gYmUgdXNlZCB0byByZWdpc3RlciBkaWZmZXJlbnQgaW1wbGVtZW50YXRpb25zIG9mIGFcbiAgICAgKiBjb21wb25lbnQgZGVwZW5kaW5nIG9uIGNsaWVudCBmZWF0dXJlcyBvciBBUEkgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIFByb3BlcnRpZXMgbmVlZCB0byBiZSB0aGUgc2FtZSBmb3IgYWxsIGltcGxlbWVudGF0aW9ucyFcbiAgICAgKiBjb25zdCBTaGFyZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICpcbiAgICAgKiBjbGFzcyBBbmNob3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnc3Bhd25lcic7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0gU2hhcmVkUHJvcGVydGllcztcbiAgICAgKlxuICAgICAqICAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgKiAgICAgICAgIGlmKG5hdmlnYXRvci54ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICogICAgICAgICAgICAgLyogV2ViWFIgdW5zdXBwb3J0ZWQsIGtlZXAgdGhpcyBkdW1teSBjb21wb25lbnQgKlxcL1xuICAgICAqICAgICAgICAgICAgIHJldHVybjtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIC8qIFdlYlhSIHN1cHBvcnRlZCEgT3ZlcnJpZGUgYWxyZWFkeSByZWdpc3RlcmVkIGR1bW15IGltcGxlbWVudGF0aW9uXG4gICAgICogICAgICAgICAgKiB3aXRoIG9uZSBkZXBlbmRpbmcgb24gaGl0LXRlc3QgQVBJIHN1cHBvcnQgKlxcL1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KHdpbmRvdy5IaXRUZXN0U291cmNlID09PSB1bmRlZmluZWQgP1xuICAgICAqICAgICAgICAgICAgIEFuY2hvcldpdGhvdXRIaXRUZXN0IDogQW5jaG9yV2l0aEhpdFRlc3QpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gVGhpcyBvbmUgaW1wbGVtZW50cyBubyBmdW5jdGlvbnNcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIG9uUmVnaXN0ZXI7XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIGluaGVyaXQgcHJvcGVydGllcyBkaXJlY3RseSBpbnNpZGUgdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIEBub3RlIERvIG5vdCB1c2UgZGlyZWN0bHksIHByZWZlciB1c2luZyB7QGxpbmsgaW5oZXJpdFByb3BlcnRpZXN9LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaW5oZXJpdFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGluaGVyaXRQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIH1cbiAgICAvKiogTWFuYWdlciBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9tYW5hZ2VyO1xuICAgIC8qKiBQYWNrZWQgaWQsIGNvbnRhaW5pbmcgdGhlIHNjZW5lIGFuZCB0aGUgbG9jYWwgaWQuIEBoaWRkZW4gKi9cbiAgICBfaWQ7XG4gICAgLyoqIElkIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBjb21wb25lbnQncyBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgX2xvY2FsSWQ7XG4gICAgLyoqXG4gICAgICogT2JqZWN0IGNvbnRhaW5pbmcgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBjYWNoZWQgZm9yIGZhc3RlciByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29iamVjdDtcbiAgICAvKiogU2NlbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfc2NlbmU7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIG1hbmFnZXIgSW5kZXggb2YgdGhlIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIGlkIFdBU00gY29tcG9uZW50IGluc3RhbmNlIGluZGV4LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBtYW5hZ2VyID0gLTEsIGlkID0gLTEpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuX2xvY2FsSWQgPSBpZDtcbiAgICAgICAgdGhpcy5faWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmUuX2luZGV4LCBpZCk7XG4gICAgICAgIHRoaXMuX29iamVjdCA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBTY2VuZSB0aGlzIGNvbXBvbmVudCBpcyBwYXJ0IG9mLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmVuZ2luZTtcbiAgICB9XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgY29tcG9uZW50J3MgdHlwZSAqL1xuICAgIGdldCB0eXBlKCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIGN0b3IuVHlwZU5hbWU7XG4gICAgfVxuICAgIC8qKiBUaGUgb2JqZWN0IHRoaXMgY29tcG9uZW50IGlzIGF0dGFjaGVkIHRvLiAqL1xuICAgIGdldCBvYmplY3QoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9nZXRfb2JqZWN0KHRoaXMuX21hbmFnZXIsIHRoaXMuX2lkKTtcbiAgICAgICAgICAgIHRoaXMuX29iamVjdCA9IHRoaXMuX3NjZW5lLndyYXAob2JqZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEFjdGl2YXRpbmcvZGVhY3RpdmF0aW5nIGEgY29tcG9uZW50IGNvbWVzIGF0IGEgc21hbGwgY29zdCBvZiByZW9yZGVyaW5nXG4gICAgICogY29tcG9uZW50cyBpbiB0aGUgcmVzcGVjdGl2ZSBjb21wb25lbnQgbWFuYWdlci4gVGhpcyBmdW5jdGlvbiB0aGVyZWZvcmVcbiAgICAgKiBpcyBub3QgYSB0cml2aWFsIGFzc2lnbm1lbnQuXG4gICAgICpcbiAgICAgKiBEb2VzIG5vdGhpbmcgaWYgdGhlIGNvbXBvbmVudCBpcyBhbHJlYWR5IGFjdGl2YXRlZC9kZWFjdGl2YXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmUgTmV3IGFjdGl2ZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGFjdGl2ZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfc2V0QWN0aXZlKHRoaXMuX21hbmFnZXIsIHRoaXMuX2lkLCBhY3RpdmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2ZVxuICAgICAqL1xuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfaXNBY3RpdmUodGhpcy5fbWFuYWdlciwgdGhpcy5faWQpICE9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgYWxsIHRoZSBwcm9wZXJ0aWVzIGZyb20gYHNyY2AgaW50byB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgT25seSBwcm9wZXJ0aWVzIGFyZSBjb3BpZWQuIElmIGEgY29tcG9uZW50IG5lZWRzIHRvXG4gICAgICogY29weSBleHRyYSBkYXRhLCBpdCBuZWVkcyB0byBvdmVycmlkZSB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIG5vblByb3BlcnR5RGF0YSA9ICdIZWxsbyBXb3JsZCc7XG4gICAgICpcbiAgICAgKiAgICAgY29weShzcmMpIHtcbiAgICAgKiAgICAgICAgIHN1cGVyLmNvcHkoc3JjKTtcbiAgICAgKiAgICAgICAgIHRoaXMubm9uUHJvcGVydHlEYXRhID0gc3JjLm5vblByb3BlcnR5RGF0YTtcbiAgICAgKiAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IHtAbGluayBPYmplY3QzRC5jbG9uZX0uIERvIG5vdCBhdHRlbXB0IHRvOlxuICAgICAqICAgICAtIENyZWF0ZSBuZXcgY29tcG9uZW50XG4gICAgICogICAgIC0gUmVhZCByZWZlcmVuY2VzIHRvIG90aGVyIG9iamVjdHNcbiAgICAgKlxuICAgICAqIFdoZW4gY2xvbmluZyB2aWEge0BsaW5rIE9iamVjdDNELmNsb25lfSwgdGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYmVmb3JlXG4gICAgICoge0BsaW5rIENvbXBvbmVudC5zdGFydH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBKYXZhU2NyaXB0IGNvbXBvbmVudCBwcm9wZXJ0aWVzIGFyZW4ndCByZXRhcmdldGVkLiBUaHVzLCByZWZlcmVuY2VzXG4gICAgICogaW5zaWRlIHRoZSBzb3VyY2Ugb2JqZWN0IHdpbGwgbm90IGJlIHJldGFyZ2V0ZWQgdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdCxcbiAgICAgKiBhdCB0aGUgZXhjZXB0aW9uIG9mIHRoZSBza2luIGRhdGEgb24ge0BsaW5rIE1lc2hDb21wb25lbnR9IGFuZCB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcmMgVGhlIHNvdXJjZSBjb21wb25lbnQgdG8gY29weSBmcm9tLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGNvcHkoc3JjKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNyY1tuYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBjb21wb25lbnQgZnJvbSBpdHMgb2JqZWN0cyBhbmQgZGVzdHJveSBpdC5cbiAgICAgKlxuICAgICAqIEl0IGlzIGJlc3QgcHJhY3RpY2UgdG8gc2V0IHRoZSBjb21wb25lbnQgdG8gYG51bGxgIGFmdGVyLFxuICAgICAqIHRvIGVuc3VyZSBpdCBkb2VzIG5vdCBnZXQgdXNlZCBsYXRlci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgYy5kZXN0cm95KCk7XG4gICAgICogICAgYyA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IHRoaXMuX21hbmFnZXI7XG4gICAgICAgIGlmIChtYW5hZ2VyIDwgMCB8fCB0aGlzLl9pZCA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8qIFRoaXMgY2FsbCB3aWxsIG1hcmsgdGhlIGNvbXBvbmVudCBkZXN0cm95ZWQsXG4gICAgICAgICAqIGF1dG9tYXRpY2FsbHkgY2FsbGluZyBgX3RyaWdnZXJPbkRlc3Ryb3lgLiAgKi9cbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfY29tcG9uZW50X3JlbW92ZShtYW5hZ2VyLCB0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgaWRzIGFuZCAqKm5vdCoqIHRoZSBKYXZhU2NyaXB0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGUgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgY29tcG9uZW50QSA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBjb21wb25lbnRCID0gb2JqLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqIGNvbnN0IGNvbXBvbmVudEMgPSBjb21wb25lbnRCO1xuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEEgPT09IGNvbXBvbmVudEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEEgPT09IGNvbXBvbmVudEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2coY29tcG9uZW50QiA9PT0gY29tcG9uZW50Qyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJDb21wb25lbnQpIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBpZiAoIW90aGVyQ29tcG9uZW50KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFuYWdlciA9PT0gb3RoZXJDb21wb25lbnQuX21hbmFnZXIgJiYgdGhpcy5faWQgPT09IG90aGVyQ29tcG9uZW50Ll9pZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGNvbXBvbmVudCBwcm9wZXJ0aWVzIHRvIGRlZmF1bHQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGR1cmluZyB0aGUgY29tcG9uZW50IGluc3RhbnRpYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRQcm9wZXJ0aWVzKCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGN0b3IuUHJvcGVydGllcztcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gcHJvcGVydGllc1tuYW1lXS5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBDb21wb25lbnQucmVzZXRQcm9wZXJ0aWVzfSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFByb3BlcnRpZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIHByb3BlcnRpZXMgb24gdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEB0aHJvd3MgSWYgYW55IG9mIHRoZSByZXF1aXJlZCBwcm9wZXJ0aWVzIGlzbid0IGluaXRpYWxpemVkXG4gICAgICogb24gdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICB2YWxpZGF0ZVByb3BlcnRpZXMoKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoIWN0b3IuUHJvcGVydGllcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGN0b3IuUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKCFjdG9yLlByb3BlcnRpZXNbbmFtZV0ucmVxdWlyZWQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIXRoaXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3BlcnR5ICcke25hbWV9JyBpcyByZXF1aXJlZCBidXQgd2FzIG5vdCBpbml0aWFsaXplZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29tcG9uZW50KGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgQ29tcG9uZW50KCcke3RoaXMudHlwZX0nLCAke3RoaXMuX2xvY2FsSWR9KWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjdXN0b20gcHJvcGVydHkgd2lsbCBub3Qgd29yazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IGNvbXAgPSBvYmouYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29tcC5jdXN0b21QYXJhbSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coY29tcC5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgZmFsc2VgXG4gICAgICogY29tcC5kZXN0cm95KCk7XG4gICAgICogY29uc29sZS5sb2coY29tcC5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wLmN1c3RvbVBhcmFtKTsgLy8gVGhyb3dzIGFuIGVycm9yXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA8IDA7XG4gICAgfVxuICAgIF9jb3B5KHNyYywgb2Zmc2V0c1B0cikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyoqIEB0b2RvOiBTdXBwb3J0IHJldGFyZ2V0aW5nIGZvciBgT2JqZWN0M0QuY2xvbmVgIGFzIHdlbGwuICovXG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB3YXNtLkhFQVBVMzI7XG4gICAgICAgIGNvbnN0IG9mZnNldHNTdGFydCA9IG9mZnNldHNQdHIgPj4+IDI7XG4gICAgICAgIGNvbnN0IGRlc3RTY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGN0b3IuUHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzcmNbbmFtZV07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXRzW29mZnNldHNTdGFydCArIHByb3AudHlwZV07XG4gICAgICAgICAgICBsZXQgcmV0YXJnZXRlZCA9IHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChwcm9wLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfb2JqZWN0X2luZGV4KHZhbHVlLl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gd2FzbS5fd2xfb2JqZWN0X2lkKGRlc3RTY2VuZS5faW5kZXgsIGluZGV4ICsgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0YXJnZXRlZCA9IGRlc3RTY2VuZS53cmFwKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5BbmltYXRpb246XG4gICAgICAgICAgICAgICAgICAgIHJldGFyZ2V0ZWQgPSBkZXN0U2NlbmUuYW5pbWF0aW9ucy53cmFwKG9mZnNldCArIHZhbHVlLl9pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5Ta2luOlxuICAgICAgICAgICAgICAgICAgICByZXRhcmdldGVkID0gZGVzdFNjZW5lLnNraW5zLndyYXAob2Zmc2V0ICsgdmFsdWUuX2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gcmV0YXJnZXRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQuaW5pdH0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVXNlIHRoaXMgbWV0aG9kIGluc3RlYWQgb2YgZGlyZWN0bHkgY2FsbGluZyB7QGxpbmsgQ29tcG9uZW50LmluaXR9LFxuICAgICAqIGJlY2F1c2UgdGhpcyBtZXRob2QgY3JlYXRlcyBhbiBoYW5kbGVyIGZvciB0aGUge0BsaW5rIENvbXBvbmVudC5zdGFydH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5pbml0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IGluaXQoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBBcm0gb25BY3RpdmF0ZSgpIHdpdGggdGhlIGluaXRpYWwgc3RhcnQoKSBjYWxsICovXG4gICAgICAgIGNvbnN0IG9sZEFjdGl2YXRlID0gdGhpcy5vbkFjdGl2YXRlO1xuICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBvbGRBY3RpdmF0ZTtcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB2YWxpZGF0ZVByb3BlcnRpZXMoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Py4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBzdGFydCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmFpbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uQWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQudXBkYXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJVcGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVwZGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGR0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB1cGRhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5naW5lLndhc20uX2RlYWN0aXZhdGVfY29tcG9uZW50X29uX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uQWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVhY3RpdmF0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25EZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25EZWFjdGl2YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5vbkRlYWN0aXZhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlYWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVzdHJveX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25EZXN0cm95KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25EZXN0cm95KVxuICAgICAgICAgICAgICAgIHRoaXMub25EZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gb25EZXN0cm95KCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy5kZXN0cm95KHRoaXMpO1xuICAgIH1cbn1cbi8qKlxuICogQ29tcG9uZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgYmVmb3JlIGxvYWRpbmcgLyBhcHBlbmRpbmcgYSBzY2VuZS5cbiAqXG4gKiBJdCdzIHBvc3NpYmxlIHRvIGVuZCB1cCB3aXRoIGEgYnJva2VuIGNvbXBvbmVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuICpcbiAqIC0gQ29tcG9uZW50IHdhc24ndCByZWdpc3RlcmVkIHdoZW4gdGhlIHNjZW5lIHdhcyBsb2FkZWRcbiAqIC0gQ29tcG9uZW50IGluc3RhbnRpYXRpb24gZmFpbGVkXG4gKlxuICogVGhpcyBkdW1teSBjb21wb25lbnQgaXMgdGh1cyB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgYnkgdGhlIGVuZ2luZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJyb2tlbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ19fYnJva2VuLWNvbXBvbmVudF9fJztcbn1cbi8qKlxuICogTWVyZ2UgdGhlIGFzY2VuZGFudCBwcm9wZXJ0aWVzIG9mIGNsYXNzXG4gKlxuICogVGhpcyBtZXRob2Qgd2Fsa3MgdGhlIHByb3RvdHlwZSBjaGFpbiwgYW5kIG1lcmdlc1xuICogYWxsIHRoZSBwcm9wZXJ0aWVzIGZvdW5kIGluIHBhcmVudCBjb21wb25lbnRzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7UHJvcGVydHksIGluaGVyaXRQcm9wZXJ0aWVzfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNsYXNzIFBhcmVudCB7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7IHBhcmVudFByb3A6IFByb3BlcnR5LnN0cmluZygncGFyZW50JykgfTtcbiAqIH1cbiAqXG4gKiBjbGFzcyBDaGlsZCBleHRlbmRzIFBhcmVudCB7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7IGNoaWxkUHJvcDogUHJvcGVydHkuc3RyaW5nKCdjaGlsZCcpIH07XG4gKiB9XG4gKiBpbmhlcml0UHJvcGVydGllcyhDaGlsZCk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBjbGFzcyBpbiB3aGljaCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBtZXJnZWRcbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0UHJvcGVydGllcyh0YXJnZXQpIHtcbiAgICBpZiAoIXRhcmdldC5UeXBlTmFtZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNoYWluID0gW107XG4gICAgbGV0IGN1cnIgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGN1cnIgJiYgIWlzQmFzZUNvbXBvbmVudENsYXNzKGN1cnIpKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjdXJyO1xuICAgICAgICAvKiBTdG9wIGF0IHRoZSBmaXJzdCBjbGFzcyB0aGF0IGRvZXNuJ3QgcmVxdWlyZSBwcm9wZXJ0aWVzIG1lcmdpbmcgKi9cbiAgICAgICAgY29uc3QgbmVlZHNNZXJnZSA9IGNvbXAuaGFzT3duUHJvcGVydHkoJ0luaGVyaXRQcm9wZXJ0aWVzJylcbiAgICAgICAgICAgID8gY29tcC5Jbmhlcml0UHJvcGVydGllc1xuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICBpZiAoIW5lZWRzTWVyZ2UpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKGNvbXAuVHlwZU5hbWUgJiYgY29tcC5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpKSB7XG4gICAgICAgICAgICBjaGFpbi5wdXNoKGNvbXApO1xuICAgICAgICB9XG4gICAgICAgIGN1cnIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3Vycik7XG4gICAgfVxuICAgIC8qIE5vIHByb3RvdHlwZSBtZXJnZSBpcyBuZWVkZWQuICovXG4gICAgaWYgKCFjaGFpbi5sZW5ndGggfHwgKGNoYWluLmxlbmd0aCA9PT0gMSAmJiBjaGFpblswXSA9PT0gdGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSBjaGFpbi5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZCwgY2hhaW5baV0uUHJvcGVydGllcyk7XG4gICAgfVxuICAgIHRhcmdldC5Qcm9wZXJ0aWVzID0gbWVyZ2VkO1xufVxuLyoqXG4gKiBOYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbGxpc2lvbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdjb2xsaXNpb24nO1xuICAgIGdldEV4dGVudHMob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQ29sbGlzaW9uIGNvbXBvbmVudCBjb2xsaWRlciAqL1xuICAgIGdldCBjb2xsaWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2NvbGxpZGVyKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXIgQ29sbGlkZXIgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNvbGxpZGVyKGNvbGxpZGVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfc2V0X2NvbGxpZGVyKHRoaXMuX2lkLCBjb2xsaWRlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGV4dGVudHMoKSB7XG4gICAgICAgIC8qKiBAdG9kbzogQnJlYWsgYXQgMi4wLjAuIERvIG5vdCBhbGxvdyBtb2RpZnlpbmcgbWVtb3J5IGluLXBsYWNlLiAqL1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCBleHRlbnRzLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIGNvbGxpZGVyfSByZXR1cm5zIHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCBvbmx5IHRoZSBmaXJzdFxuICAgICAqIGNvbXBvbmVudCBvZiB0aGUgcGFzc2VkIHZlY3RvciBpcyB1c2VkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gU3BhbnMgMSB1bml0IG9uIHRoZSB4LWF4aXMsIDIgb24gdGhlIHktYXhpcywgMyBvbiB0aGUgei1heGlzLlxuICAgICAqIGNvbGxpc2lvbi5leHRlbnQgPSBbMSwgMiwgM107XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXh0ZW50cyBFeHRlbnRzIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LCBleHBlY3RzIGFcbiAgICAgKiAgICAgIDMgY29tcG9uZW50IGFycmF5LlxuICAgICAqL1xuICAgIHNldCBleHRlbnRzKGV4dGVudHMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gZXh0ZW50c1swXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gZXh0ZW50c1sxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gZXh0ZW50c1syXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIGNvbGxpZGVyfSBpcyBub3Qge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSByYWRpdXMgb2YgYSBzcGhlcmUgZW5jbG9zaW5nIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHNwaGVyZS5yYWRpdXMgPSAzLjA7XG4gICAgICogY29uc29sZS5sb2coc3BoZXJlLnJhZGl1cyk7IC8vIDMuMFxuICAgICAqXG4gICAgICogYm94LmV4dGVudHMgPSBbMi4wLCAyLjAsIDIuMF07XG4gICAgICogY29uc29sZS5sb2coYm94LnJhZGl1cyk7IC8vIDEuNzMyLi4uXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXQgcmFkaXVzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSlcbiAgICAgICAgICAgIHJldHVybiB3YXNtLkhFQVBGMzJbd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgPj4gMl07XG4gICAgICAgIGNvbnN0IGV4dGVudHMgPSBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpLCAzKTtcbiAgICAgICAgY29uc3QgeDIgPSBleHRlbnRzWzBdICogZXh0ZW50c1swXTtcbiAgICAgICAgY29uc3QgeTIgPSBleHRlbnRzWzFdICogZXh0ZW50c1sxXTtcbiAgICAgICAgY29uc3QgejIgPSBleHRlbnRzWzJdICogZXh0ZW50c1syXTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4MiArIHkyICsgejIpIC8gMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJhZGl1cyBSYWRpdXMgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIEBub3RlIElmIHtAbGluayBjb2xsaWRlcn0gaXMgbm90IHtAbGluayBDb2xsaWRlci5TcGhlcmV9LFxuICAgICAqIHRoZSBleHRlbnRzIGFyZSBzZXQgdG8gZm9ybSBhIHNxdWFyZSB0aGF0IGZpdHMgYSBzcGhlcmUgd2l0aCB0aGUgcHJvdmlkZWQgcmFkaXVzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYWFiYkNvbGxpc2lvbi5yYWRpdXMgPSAyLjA7IC8vIEFBQkIgZml0cyBhIHNwaGVyZSBvZiByYWRpdXMgMi4wXG4gICAgICogYm94Q29sbGlzaW9uLnJhZGl1cyA9IDMuMDsgLy8gQm94IG5vdyBmaXRzIGEgc3BoZXJlIG9mIHJhZGl1cyAzLjAsIGtlZXBpbmcgb3JpZW50YXRpb25cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCByYWRpdXMocmFkaXVzKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSA/IHJhZGl1cyA6ICgyICogcmFkaXVzKSAvIFNRUlRfMztcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChbbGVuZ3RoLCBsZW5ndGgsIGxlbmd0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsaXNpb24gY29tcG9uZW50IGdyb3VwLlxuICAgICAqXG4gICAgICogVGhlIGdyb3VwcyBpcyBhIGJpdG1hc2sgdGhhdCBpcyBjb21wYXJlZCB0byBvdGhlciBjb21wb25lbnRzIGluIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQjcXVlcnlPdmVybGFwc31cbiAgICAgKiBvciB0aGUgZ3JvdXAgaW4ge0BsaW5rIFNjZW5lI3JheUNhc3R9LlxuICAgICAqXG4gICAgICogQ29sbGlkZXJzIHRoYXQgaGF2ZSBubyBjb21tb24gZ3JvdXBzIHdpbGwgbm90IG92ZXJsYXAgd2l0aCBlYWNoIG90aGVyLiBJZiBhIGNvbGxpZGVyXG4gICAgICogaGFzIG5vbmUgb2YgdGhlIGdyb3VwcyBzZXQgZm9yIHtAbGluayBTY2VuZSNyYXlDYXN0fSwgdGhlIHJheSB3aWxsIG5vdCBoaXQgaXQuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIGJlbG9uZ2luZyB0byBhIGdyb3VwLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgLy8gYyBiZWxvbmdzIHRvIGdyb3VwIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAgICAvLyBjIGJlbG9uZ3MgdG8gZ3JvdXAgMFxuICAgICAqICAgIGMuZ3JvdXAgPSAoMSA8PCAwKTtcbiAgICAgKlxuICAgICAqICAgIC8vIGMgYmVsb25ncyB0byBncm91cCAwICphbmQqIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqICAgIChjLmdyb3VwICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAgICAoYy5ncm91cCAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBncm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2dyb3VwKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgZ3JvdXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZ3JvdXAgR3JvdXAgbWFzayBvZiB0aGUgY29sbGlzaW9uIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgZ3JvdXAoZ3JvdXApIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfZ3JvdXAodGhpcy5faWQsIGdyb3VwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVlcnkgb3ZlcmxhcHBpbmcgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBjb2xsaXNpb24gPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdjb2xsaXNpb24nKTtcbiAgICAgKiBjb25zdCBvdmVybGFwcyA9IGNvbGxpc2lvbi5xdWVyeU92ZXJsYXBzKCk7XG4gICAgICogZm9yKGNvbnN0IG90aGVyQ29sbGlzaW9uIG9mIG92ZXJsYXBzKSB7XG4gICAgICogICAgIGNvbnN0IG90aGVyT2JqZWN0ID0gb3RoZXJDb2xsaXNpb24ub2JqZWN0O1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgQ29sbGlzaW9uIHdpdGggb2JqZWN0ICR7b3RoZXJPYmplY3Qub2JqZWN0SWR9YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgQ29sbGlzaW9uIGNvbXBvbmVudHMgb3ZlcmxhcHBpbmcgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBxdWVyeU92ZXJsYXBzKCkge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfcXVlcnlfb3ZlcmxhcHModGhpcy5faWQsIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW0sIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICBjb25zdCBvdmVybGFwcyA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtVWludDE2W2ldO1xuICAgICAgICAgICAgb3ZlcmxhcHNbaV0gPSB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy53cmFwQ29sbGlzaW9uKGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3ZlcmxhcHM7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgQ29sbGlzaW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb2xsaWRlclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZXh0ZW50c1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSB0ZXh0IGNvbXBvbmVudFxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSB0ZXh0IGNvbXBvbmVudCBpbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgVGV4dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0ZXh0JztcbiAgICAvKiogVGV4dCBjb21wb25lbnQgYWxpZ25tZW50LiAqL1xuICAgIGdldCBhbGlnbm1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgYWxpZ25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFsaWdubWVudCBBbGlnbm1lbnQgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgYWxpZ25tZW50KGFsaWdubWVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQsIGFsaWdubWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXQgdmVydGljYWxBbGlnbm1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2ZXJ0aWNhbEFsaWdubWVudCBWZXJ0aWNhbCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldCB2ZXJ0aWNhbEFsaWdubWVudCh2ZXJ0aWNhbEFsaWdubWVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkLCB2ZXJ0aWNhbEFsaWdubWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGp1c3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBUZXh0Q29tcG9uZW50LnZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBqdXN0aWZpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbEFsaWdubWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGp1c3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ganVzdGlmaWNhdGlvbiBKdXN0aWZpY2F0aW9uIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBUZXh0Q29tcG9uZW50LnZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCBqdXN0aWZpY2F0aW9uKGp1c3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbEFsaWdubWVudCA9IGp1c3RpZmljYXRpb247XG4gICAgfVxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCBjaGFyYWN0ZXIgc3BhY2luZy4gKi9cbiAgICBnZXQgY2hhcmFjdGVyU3BhY2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9jaGFyYWN0ZXJfc3BhY2luZyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBjaGFyYWN0ZXIgc3BhY2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFjaW5nIENoYXJhY3RlciBzcGFjaW5nIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNoYXJhY3RlclNwYWNpbmcoc3BhY2luZykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfY2hhcmFjdGVyX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cbiAgICAvKiogVGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nLiAqL1xuICAgIGdldCBsaW5lU3BhY2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9saW5lX3NwYWNpbmcodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BhY2luZyBMaW5lIHNwYWNpbmcgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudFxuICAgICAqL1xuICAgIHNldCBsaW5lU3BhY2luZyhzcGFjaW5nKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9saW5lX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cbiAgICAvKiogVGV4dCBjb21wb25lbnQgZWZmZWN0LiAqL1xuICAgIGdldCBlZmZlY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfZWZmZWN0KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGVmZmVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGVmZmVjdCBFZmZlY3QgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudFxuICAgICAqL1xuICAgIHNldCBlZmZlY3QoZWZmZWN0KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9lZmZlY3QodGhpcy5faWQsIGVmZmVjdCk7XG4gICAgfVxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCB0ZXh0LiAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3RleHQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IG9mIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGV4dCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdGV4dCh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOCh0ZXh0LnRvU3RyaW5nKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1hdGVyaWFsIHRvIHJlbmRlciB0aGUgdGV4dCB3aXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIE5ldyBtYXRlcmlhbC5cbiAgICAgKi9cbiAgICBzZXQgbWF0ZXJpYWwobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5ncm91cC5hc3NlcnRPcmlnaW4obWF0ZXJpYWwpO1xuICAgICAgICBjb25zdCBtYXRJbmRleCA9IG1hdGVyaWFsID8gbWF0ZXJpYWwuX2lkIDogMDtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X21hdGVyaWFsKHRoaXMuX2lkLCBtYXRJbmRleCk7XG4gICAgfVxuICAgIC8qKiBNYXRlcmlhbCB1c2VkIHRvIHJlbmRlciB0aGUgdGV4dC4gKi9cbiAgICBnZXQgbWF0ZXJpYWwoKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLl9zY2VuZS5ncm91cDtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfbWF0ZXJpYWwodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gcm9vdC5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwiYWxpZ25tZW50XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwidmVydGljYWxBbGlnbm1lbnRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJqdXN0aWZpY2F0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2hhcmFjdGVyU3BhY2luZ1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVTcGFjaW5nXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwiZWZmZWN0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcIm1hdGVyaWFsXCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgdmlldyBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIHZpZXcgY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgVmlld0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2aWV3JztcbiAgICBnZXRQcm9qZWN0aW9uTWF0cml4KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXgodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5IRUFQRjMyW3B0ciArIGldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFZpZXdDb21wb25lbnQuZ2V0UHJvamVjdGlvbk1hdHJpeH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBWaWV3Q29tcG9uZW50LmdldFByb2plY3Rpb25NYXRyaXh9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpIHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXgodGhpcy5faWQpLCAxNik7XG4gICAgfVxuICAgIC8qKiBWaWV3Q29tcG9uZW50IG5lYXIgY2xpcHBpbmcgcGxhbmUgdmFsdWUuICovXG4gICAgZ2V0IG5lYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfbmVhcih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBuZWFyIGNsaXBwaW5nIHBsYW5lIGRpc3RhbmNlIGZvciB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlLCB0aGUgY2hhbmdlIHdpbGwgYXBwbHkgaW4gdGhlXG4gICAgICogZm9sbG93aW5nIGZyYW1lLCBvdGhlcndpc2UgdGhlIGNoYW5nZSBpcyBpbW1lZGlhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmVhciBOZWFyIGRlcHRoIHZhbHVlLlxuICAgICAqL1xuICAgIHNldCBuZWFyKG5lYXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfc2V0X25lYXIodGhpcy5faWQsIG5lYXIpO1xuICAgIH1cbiAgICAvKiogRmFyIGNsaXBwaW5nIHBsYW5lIHZhbHVlLiAqL1xuICAgIGdldCBmYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZmFyKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGZhciBjbGlwcGluZyBwbGFuZSBkaXN0YW5jZSBmb3IgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGNoYW5nZSB3aWxsIGFwcGx5IGluIHRoZVxuICAgICAqIGZvbGxvd2luZyBmcmFtZSwgb3RoZXJ3aXNlIHRoZSBjaGFuZ2UgaXMgaW1tZWRpYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZhciBOZWFyIGRlcHRoIHZhbHVlLlxuICAgICAqL1xuICAgIHNldCBmYXIoZmFyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9mYXIodGhpcy5faWQsIGZhcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaG9yaXpvbnRhbCBmaWVsZCBvZiB2aWV3IGZvciB0aGUgdmlldywgKippbiBkZWdyZWVzKiouXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhpcyByZXR1cm5zIHRoZSBmaWVsZCBvZiB2aWV3IHJlcG9ydGVkIGJ5XG4gICAgICogdGhlIGRldmljZSwgcmVnYXJkbGVzcyBvZiB0aGUgZm92IHRoYXQgd2FzIHNldC5cbiAgICAgKi9cbiAgICBnZXQgZm92KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X2Zvdih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgaG9yaXpvbnRhbCBmaWVsZCBvZiB2aWV3IGZvciB0aGUgdmlldywgKippbiBkZWdyZWVzKiouXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGZpZWxkIG9mIHZpZXcgcmVwb3J0ZWQgYnkgdGhlIGRldmljZSBpc1xuICAgICAqIHVzZWQgYW5kIHRoaXMgdmFsdWUgaXMgaWdub3JlZC4gQWZ0ZXIgdGhlIFhSIHNlc3Npb24gZW5kcywgdGhlIG5ldyB2YWx1ZVxuICAgICAqIGlzIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm92IEhvcml6b250YWwgZmllbGQgb2YgdmlldywgKippbiBkZWdyZWVzKiouXG4gICAgICovXG4gICAgc2V0IGZvdihmb3YpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfc2V0X2Zvdih0aGlzLl9pZCwgZm92KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBlbnVtZXJhYmxlKClcbl0sIFZpZXdDb21wb25lbnQucHJvdG90eXBlLCBcInByb2plY3Rpb25NYXRyaXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBWaWV3Q29tcG9uZW50LnByb3RvdHlwZSwgXCJuZWFyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVmlld0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZmFyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVmlld0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZm92XCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgaW5wdXQgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBpbnB1dCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdpbnB1dCc7XG4gICAgLyoqIElucHV0IGNvbXBvbmVudCB0eXBlICovXG4gICAgZ2V0IGlucHV0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2lucHV0X2NvbXBvbmVudF9nZXRfdHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBpbnB1dCBjb21wb25lbnQgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbXMgTmV3IGlucHV0IGNvbXBvbmVudCB0eXBlLlxuICAgICAqL1xuICAgIHNldCBpbnB1dFR5cGUodHlwZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9pbnB1dF9jb21wb25lbnRfc2V0X3R5cGUodGhpcy5faWQsIHR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJYUiBEZXZpY2UgQVBJIGlucHV0IHNvdXJjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnB1dCBjb21wb25lbnQsXG4gICAgICogaWYgdHlwZSB7QGxpbmsgSW5wdXRUeXBlLkNvbnRyb2xsZXJMZWZ0fSBvciB7QGxpbmsgSW5wdXRUeXBlLkNvbnRyb2xsZXJSaWdodH0uXG4gICAgICovXG4gICAgZ2V0IHhySW5wdXRTb3VyY2UoKSB7XG4gICAgICAgIGNvbnN0IHhyID0gdGhpcy5lbmdpbmUueHI7XG4gICAgICAgIGlmICgheHIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaW5wdXRTb3VyY2Ugb2YgeHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dFNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogJ2xlZnQnLCAncmlnaHQnIG9yIGBudWxsYCBkZXBlbmRpbmcgb24gdGhlIHtAbGluayBJbnB1dENvbXBvbmVudCNpbnB1dFR5cGV9LlxuICAgICAqL1xuICAgIGdldCBoYW5kZWRuZXNzKCkge1xuICAgICAgICBjb25zdCBpbnB1dFR5cGUgPSB0aGlzLmlucHV0VHlwZTtcbiAgICAgICAgaWYgKGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuQ29udHJvbGxlclJpZ2h0IHx8XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLlJheVJpZ2h0IHx8XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkV5ZVJpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgICAgIGlmIChpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkNvbnRyb2xsZXJMZWZ0IHx8XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLlJheUxlZnQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuRXllTGVmdClcbiAgICAgICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIElucHV0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dFR5cGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBlbnVtZXJhYmxlKClcbl0sIElucHV0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ4cklucHV0U291cmNlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgZW51bWVyYWJsZSgpXG5dLCBJbnB1dENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGFuZGVkbmVzc1wiLCBudWxsKTtcbi8qKlxuICogTmF0aXZlIGxpZ2h0IGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgbGlnaHQgY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgTGlnaHRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbGlnaHQnO1xuICAgIGdldENvbG9yKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGMgTmV3IGNvbG9yIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldENvbG9yKGMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gY1swXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gY1sxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gY1syXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmlldyBvbiB0aGUgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBnZXRDb2xvcn0gaW4gcGVyZm9ybWFuY2UtY3JpdGljYWwgY29kZS5cbiAgICAgKi9cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjIENvbG9yIG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBzZXRDb2xvcn0gaW4gcGVyZm9ybWFuY2UtY3JpdGljYWwgY29kZS5cbiAgICAgKi9cbiAgICBzZXQgY29sb3IoYykge1xuICAgICAgICB0aGlzLmNvbG9yLnNldChjKTtcbiAgICB9XG4gICAgLyoqIExpZ2h0IHR5cGUuICovXG4gICAgZ2V0IGxpZ2h0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfdHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpZ2h0VHlwZSBUeXBlIG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGxpZ2h0VHlwZSh0KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfdHlwZSh0aGlzLl9pZCwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpZ2h0IGludGVuc2l0eS5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgaW50ZW5zaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9pbnRlbnNpdHkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgaW50ZW5zaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGludGVuc2l0eSBJbnRlbnNpdHkgb2YgdGhlIGxpZ2h0IGNvbXBvbmVudC5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgaW50ZW5zaXR5KGludGVuc2l0eSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X2ludGVuc2l0eSh0aGlzLl9pZCwgaW50ZW5zaXR5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3V0ZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBvdXRlckFuZ2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9vdXRlckFuZ2xlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG91dGVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSBPdXRlciBhbmdsZSwgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgb3V0ZXJBbmdsZShhbmdsZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X291dGVyQW5nbGUodGhpcy5faWQsIGFuZ2xlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5uZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBpbm5lckFuZ2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9pbm5lckFuZ2xlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGlubmVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSBJbm5lciBhbmdsZSwgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgaW5uZXJBbmdsZShhbmdsZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X2lubmVyQW5nbGUodGhpcy5faWQsIGFuZ2xlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgc2hhZG93cygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSBsaWdodCBjYXN0cyBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dzKGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dzKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd1JhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dSYW5nZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCByYW5nZSBmb3Igc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByYW5nZSBSYW5nZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93UmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dSYW5nZSh0aGlzLl9pZCwgcmFuZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBzaGFkb3dCaWFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dCaWFzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmlhcyBCaWFzIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dCaWFzKGJpYXMpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dCaWFzKHRoaXMuX2lkLCBiaWFzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm9ybWFsIGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd05vcm1hbEJpYXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd05vcm1hbEJpYXModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbm9ybWFsIGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmlhcyBOb3JtYWwgYmlhcyBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93Tm9ybWFsQmlhcyhiaWFzKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Tm9ybWFsQmlhcyh0aGlzLl9pZCwgYmlhcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleGVsIHNpemUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd1RleGVsU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93VGV4ZWxTaXplKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleGVsIHNpemUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBUZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dUZXhlbFNpemUoc2l6ZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd1RleGVsU2l6ZSh0aGlzLl9pZCwgc2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhc2NhZGUgY291bnQgZm9yIHtAbGluayBMaWdodFR5cGUuU3VufSBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBjYXNjYWRlQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2Nhc2NhZGVDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjYXNjYWRlIGNvdW50IGZvciB7QGxpbmsgTGlnaHRUeXBlLlN1bn0gc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBDYXNjYWRlIGNvdW50LlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBjYXNjYWRlQ291bnQoY291bnQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9jYXNjYWRlQ291bnQodGhpcy5faWQsIGNvdW50KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sb3JcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwibGlnaHRUeXBlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImludGVuc2l0eVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvdXRlckFuZ2xlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImlubmVyQW5nbGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93c1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaGFkb3dSYW5nZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaGFkb3dCaWFzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcInNoYWRvd05vcm1hbEJpYXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93VGV4ZWxTaXplXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImNhc2NhZGVDb3VudFwiLCBudWxsKTtcbi8qKlxuICogTmF0aXZlIGFuaW1hdGlvbiBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGFuaW1hdGlvbiBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbmltYXRpb25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnYW5pbWF0aW9uJztcbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIGZvciBhbmltYXRpb24gZXZlbnRzIHRyaWdnZXJlZCBvbiB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgb25FdmVudCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqXG4gICAgICogU2V0IGFuaW1hdGlvbiB0byBwbGF5LlxuICAgICAqXG4gICAgICogTWFrZSBzdXJlIHRvIHtAbGluayBBbmltYXRpb24jcmV0YXJnZXR9IHRoZSBhbmltYXRpb24gdG8gYWZmZWN0IHRoZVxuICAgICAqIHJpZ2h0IG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5pbSBBbmltYXRpb24gdG8gcGxheS5cbiAgICAgKi9cbiAgICBzZXQgYW5pbWF0aW9uKGFuaW0pIHtcbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4oYW5pbSk7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X2FuaW1hdGlvbih0aGlzLl9pZCwgYW5pbSA/IGFuaW0uX2luZGV4IDogMCk7XG4gICAgfVxuICAgIC8qKiBBbmltYXRpb24gc2V0IGZvciB0aGlzIGNvbXBvbmVudCAqL1xuICAgIGdldCBhbmltYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfYW5pbWF0aW9uKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmFuaW1hdGlvbnMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBwbGF5IGNvdW50LiBTZXQgdG8gYDBgIHRvIGxvb3AgaW5kZWZpbml0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBsYXlDb3VudCBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBhbmltYXRpb24uXG4gICAgICovXG4gICAgc2V0IHBsYXlDb3VudChwbGF5Q291bnQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcGxheUNvdW50KHRoaXMuX2lkLCBwbGF5Q291bnQpO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIHRpbWVzIHRoZSBhbmltYXRpb24gaXMgcGxheWVkLiAqL1xuICAgIGdldCBwbGF5Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9wbGF5Q291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgc3BlZWQuIFNldCB0byBuZWdhdGl2ZSB2YWx1ZXMgdG8gcnVuIHRoZSBhbmltYXRpb24gYmFja3dhcmRzLlxuICAgICAqXG4gICAgICogU2V0dGluZyBzcGVlZCBoYXMgYW4gaW1tZWRpYXRlIGVmZmVjdCBmb3IgdGhlIGN1cnJlbnQgZnJhbWUncyB1cGRhdGVcbiAgICAgKiBhbmQgd2lsbCBjb250aW51ZSB3aXRoIHRoZSBzcGVlZCBmcm9tIHRoZSBjdXJyZW50IHBvaW50IGluIHRoZSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BlZWQgTmV3IHNwZWVkIGF0IHdoaWNoIHRvIHBsYXkgdGhlIGFuaW1hdGlvbi5cbiAgICAgKiBAc2luY2UgMC44LjEwXG4gICAgICovXG4gICAgc2V0IHNwZWVkKHNwZWVkKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3NwZWVkKHRoaXMuX2lkLCBzcGVlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWVkIGZhY3RvciBhdCB3aGljaCB0aGUgYW5pbWF0aW9uIGlzIHBsYXllZC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBnZXQgc3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9zcGVlZCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IHBsYXlpbmcgc3RhdGUgb2YgdGhlIGFuaW1hdGlvbiAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc3RhdGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQbGF5IGFuaW1hdGlvbi5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhbmltYXRpb24gaXMgY3VycmVudGx5IHBhdXNlZCwgcmVzdW1lcyBmcm9tIHRoYXQgcG9zaXRpb24uIElmIHRoZVxuICAgICAqIGFuaW1hdGlvbiBpcyBhbHJlYWR5IHBsYXlpbmcsIGRvZXMgbm90aGluZy5cbiAgICAgKlxuICAgICAqIFRvIHJlc3RhcnQgdGhlIGFuaW1hdGlvbiwge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNzdG9wfSBpdCBmaXJzdC5cbiAgICAgKi9cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3BsYXkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogU3RvcCBhbmltYXRpb24uICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zdG9wKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIFBhdXNlIGFuaW1hdGlvbi4gKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9wYXVzZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBmbG9hdCBwYXJhbWV0ZXIgaW4gdGhlIGF0dGFjaGVkIGdyYXBoLlxuICAgICAqIFRocm93cyBpZiB0aGUgcGFyYW1ldGVyIGlzIG1pc3NpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0RmxvYXRQYXJhbWV0ZXIobmFtZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1JbmRleCh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOChuYW1lKSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNzaW5nIHBhcmFtZXRlciAnJHtuYW1lfSdgKTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1WYWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIGEgZmxvYXQgcGFyYW1ldGVyIGluIHRoZSBhdHRhY2hlZCBncmFwaFxuICAgICAqIFRocm93cyBpZiB0aGUgcGFyYW1ldGVyIGlzIG1pc3NpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHZhbHVlIEZsb2F0IHZhbHVlIHRvIHNldC5cbiAgICAgKiBAcmV0dXJucyAxIGlmIHRoZSBwYXJhbWV0ZXIgd2FzIHN1Y2Nlc3NmdWxseSBzZXQsIDAgb24gZmFpbC5cbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXRGbG9hdFBhcmFtZXRlcihuYW1lLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1JbmRleCh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOChuYW1lKSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNzaW5nIHBhcmFtZXRlciAnJHtuYW1lfSdgKTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2YWx1ZTtcbiAgICAgICAgd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRHcmFwaFBhcmFtVmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBBbmltYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIEFuaW1hdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicGxheUNvdW50XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgQW5pbWF0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzcGVlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIGVudW1lcmFibGUoKVxuXSwgQW5pbWF0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0ZVwiLCBudWxsKTtcbi8qKlxuICogTmF0aXZlIG1lc2ggY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBtZXNoIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2hDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbWVzaCc7XG4gICAgLyoqXG4gICAgICogU2V0IG1hdGVyaWFsIHRvIHJlbmRlciB0aGUgbWVzaCB3aXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIE1hdGVyaWFsIHRvIHJlbmRlciB0aGUgbWVzaCB3aXRoLlxuICAgICAqL1xuICAgIHNldCBtYXRlcmlhbChtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLnNjZW5lLmdyb3VwLmFzc2VydE9yaWdpbihtYXRlcmlhbCk7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tYXRlcmlhbCh0aGlzLl9pZCwgbWF0ZXJpYWwgPyBtYXRlcmlhbC5faWQgOiAwKTtcbiAgICB9XG4gICAgLyoqIE1hdGVyaWFsIHVzZWQgdG8gcmVuZGVyIHRoZSBtZXNoLiAqL1xuICAgIGdldCBtYXRlcmlhbCgpIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuX3NjZW5lLmdyb3VwO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiByb290Lm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqIE1lc2ggcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuICovXG4gICAgZ2V0IG1lc2goKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLl9zY2VuZS5ncm91cDtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbWVzaCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiByb290Lm1lc2hlcy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1lc2ggdG8gcmVuZGVyZWQgd2l0aCB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNoIE1lc2ggcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IG1lc2gobWVzaCkge1xuICAgICAgICB0aGlzLnNjZW5lLmdyb3VwLmFzc2VydE9yaWdpbihtZXNoKTtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21lc2godGhpcy5faWQsIG1lc2g/Ll9pZCA/PyAwKTtcbiAgICB9XG4gICAgLyoqIFNraW4gZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuICovXG4gICAgZ2V0IHNraW4oKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X3NraW4odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuc2tpbnMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBza2luIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNraW4gU2tpbiB0byB1c2UgZm9yIHJlbmRlcmluZyBza2lubmVkIG1lc2hlcy5cbiAgICAgKi9cbiAgICBzZXQgc2tpbihza2luKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKHNraW4pO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfc2tpbih0aGlzLl9pZCwgc2tpbiA/IHNraW4uX2lkIDogMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vcnBoIHRhcmdldHMgZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXQgbW9ycGhUYXJnZXRzKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tb3JwaF90YXJnZXRzKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmdyb3VwLm1vcnBoVGFyZ2V0cy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1vcnBoIHRhcmdldHMgdG8gdHJhbnNmb3JtIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9ycGhUYXJnZXRzIE1vcnBoIHRhcmdldHMgdG8gdXNlIGZvciByZW5kZXJpbmcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXQgbW9ycGhUYXJnZXRzKG1vcnBoVGFyZ2V0cykge1xuICAgICAgICB0aGlzLnNjZW5lLmdyb3VwLmFzc2VydE9yaWdpbihtb3JwaFRhcmdldHMpO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbW9ycGhfdGFyZ2V0cyh0aGlzLl9pZCwgbW9ycGhUYXJnZXRzPy5faWQgPz8gMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIGdldE1vcnBoVGFyZ2V0V2VpZ2h0c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBnZXRNb3JwaFRhcmdldFdlaWdodHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGdldCBtb3JwaFRhcmdldFdlaWdodHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vcnBoVGFyZ2V0V2VpZ2h0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1vcnBoIHRhcmdldCB3ZWlnaHRzIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdlaWdodHMgTmV3IHdlaWdodHMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXQgbW9ycGhUYXJnZXRXZWlnaHRzKHdlaWdodHMpIHtcbiAgICAgICAgdGhpcy5zZXRNb3JwaFRhcmdldFdlaWdodHMod2VpZ2h0cyk7XG4gICAgfVxuICAgIGdldE1vcnBoVGFyZ2V0V2VpZ2h0cyhvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldF93ZWlnaHRzKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUZsb2F0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2VpZ2h0IG9mIGEgc2luZ2xlIG1vcnBoIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgSW5kZXggb2YgdGhlIG1vcnBoIHRhcmdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgd2VpZ2h0LlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0TW9ycGhUYXJnZXRXZWlnaHQodGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5tb3JwaFRhcmdldHM/LmNvdW50ID8/IDA7XG4gICAgICAgIGlmICh0YXJnZXQgPj0gY291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5kZXggJHt0YXJnZXR9IGlzIG91dCBvZiBib3VuZHMgZm9yICR7Y291bnR9IHRhcmdldHNgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldF93ZWlnaHQodGhpcy5faWQsIHRhcmdldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBtb3JwaCB0YXJnZXQgd2VpZ2h0cyBmb3IgdGhpcyBtZXNoIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3ZWlnaHRzIEFycmF5IG9mIG5ldyB3ZWlnaHRzLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IGFzIG1hbnlcbiAgICAgKiAgICAgZWxlbWVudHMgYXMge0BsaW5rIE1vcnBoVGFyZ2V0cy5jb3VudH0uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXRNb3JwaFRhcmdldFdlaWdodHMod2VpZ2h0cykge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldCh3ZWlnaHRzKTtcbiAgICAgICAgd2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldF93ZWlnaHRzKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtLCB3ZWlnaHRzLmxlbmd0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd2VpZ2h0IG9mIGEgc2luZ2xlIG1vcnBoIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgSW5kZXggb2YgdGhlIG1vcnBoIHRhcmdldC5cbiAgICAgKiBAcGFyYW0gd2VpZ2h0IFRoZSBuZXcgd2VpZ2h0LlxuICAgICAqXG4gICAgICogIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IG9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBtb3V0aFRhcmdldCA9IG1lc2gubW9ycGhUYXJnZXRzLmdldFRhcmdldEluZGV4KCdtb3V0aCcpO1xuICAgICAqIG1lc2guc2V0TW9ycGhUYXJnZXRXZWlnaHQobW91dGhUYXJnZXQsIDAuNSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXRNb3JwaFRhcmdldFdlaWdodCh0YXJnZXQsIHdlaWdodCkge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMubW9ycGhUYXJnZXRzPy5jb3VudCA/PyAwO1xuICAgICAgICBpZiAodGFyZ2V0ID49IGNvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluZGV4ICR7dGFyZ2V0fSBpcyBvdXQgb2YgYm91bmRzIGZvciAke2NvdW50fSB0YXJnZXRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldF93ZWlnaHQodGhpcy5faWQsIHRhcmdldCwgd2VpZ2h0KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBNZXNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXRlcmlhbFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIE1lc2hDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc2hcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBNZXNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJza2luXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwibW9ycGhUYXJnZXRzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwibW9ycGhUYXJnZXRXZWlnaHRzXCIsIG51bGwpO1xuLyoqXG4gKiBFbnVtIGZvciBQaHlzaWNzIGF4ZXMgbG9ja2luZ1xuICpcbiAqIFNlZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuYW5ndWxhckxvY2tBeGlzfSBhbmQge0BsaW5rIFBoeXNYQ29tcG9uZW50LmxpbmVhckxvY2tBeGlzfS5cbiAqL1xuZXhwb3J0IHZhciBMb2NrQXhpcztcbihmdW5jdGlvbiAoTG9ja0F4aXMpIHtcbiAgICAvKipcbiAgICAgKiBObyBheGlzIHNlbGVjdGVkLlxuICAgICAqL1xuICAgIExvY2tBeGlzW0xvY2tBeGlzW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgLyoqXG4gICAgICogKipYIGF4aXMqKjpcbiAgICAgKi9cbiAgICBMb2NrQXhpc1tMb2NrQXhpc1tcIlhcIl0gPSAxXSA9IFwiWFwiO1xuICAgIC8qKlxuICAgICAqICoqWSBheGlzKio6XG4gICAgICovXG4gICAgTG9ja0F4aXNbTG9ja0F4aXNbXCJZXCJdID0gMl0gPSBcIllcIjtcbiAgICAvKipcbiAgICAgKiAqKlogYXhpcyoqOlxuICAgICAqL1xuICAgIExvY2tBeGlzW0xvY2tBeGlzW1wiWlwiXSA9IDRdID0gXCJaXCI7XG59KShMb2NrQXhpcyB8fCAoTG9ja0F4aXMgPSB7fSkpO1xuLyoqXG4gKiBOYXRpdmUgcGh5c3ggcmlnaWQgYm9keSBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIG1lc2ggY29tcG9uZW50IGluc3RhbmNlLlxuICogT25seSBhdmFpbGFibGUgd2hlbiB1c2luZyBwaHlzeCBlbmFibGVkIHJ1bnRpbWUsIHNlZSBcIlByb2plY3QgU2V0dGluZ3MgPiBSdW50aW1lXCIuXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzWENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwaHlzeCc7XG4gICAgZ2V0VHJhbnNsYXRpb25PZmZzZXQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2xhdGlvbih0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldFJvdGF0aW9uT2Zmc2V0KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfb2Zmc2V0VHJhbnNmb3JtKHRoaXMuX2lkKSA+PiAyOyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldEV4dGVudHMob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldExpbmVhclZlbG9jaXR5KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1GbG9hdCA9IHdhc20uX3RlbXBNZW1GbG9hdDtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJWZWxvY2l0eSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB0ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHRlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXRBbmd1bGFyVmVsb2NpdHkob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdGVtcE1lbUZsb2F0ID0gd2FzbS5fdGVtcE1lbUZsb2F0O1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJWZWxvY2l0eSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB0ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHRlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgaXMgc3RhdGljLlxuICAgICAqXG4gICAgICogU2V0dGluZyB0aGlzIHByb3BlcnR5IG9ubHkgdGFrZXMgZWZmZWN0IG9uY2UgdGhlIGNvbXBvbmVudFxuICAgICAqIHN3aXRjaGVzIGZyb20gaW5hY3RpdmUgdG8gYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSBzaG91bGQgYmUgc3RhdGljLlxuICAgICAqL1xuICAgIHNldCBzdGF0aWMoYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3N0YXRpYyh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIHN0YXRpYy5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcGVydHkgcmV0dXJucyB3aGV0aGVyIHRoZSByaWdpZCBib2R5IGlzICplZmZlY3RpdmVseSpcbiAgICAgKiBzdGF0aWMuIElmIHN0YXRpYyBwcm9wZXJ0eSB3YXMgc2V0IHdoaWxlIHRoZSByaWdpZCBib2R5IHdhc1xuICAgICAqIGFjdGl2ZSwgaXQgd2lsbCBub3QgdGFrZSBlZmZlY3QgdW50aWwgdGhlIHJpZ2lkIGJvZHkgaXMgc2V0XG4gICAgICogaW5hY3RpdmUgYW5kIGFjdGl2ZSBhZ2Fpbi4gVW50aWwgdGhlIGNvbXBvbmVudCBpcyBzZXQgaW5hY3RpdmUsXG4gICAgICogdGhpcyBnZXR0ZXIgd2lsbCByZXR1cm4gd2hldGhlciB0aGUgcmlnaWQgYm9keSBpcyBhY3R1YWxseVxuICAgICAqIHN0YXRpYy5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGljKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpYyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldFRyYW5zbGF0aW9uT2Zmc2V0fS5cbiAgICAgKlxuICAgICAqIEdpdmVzIGEgcXVpY2sgdmlldyBvZiB0aGUgb2Zmc2V0IGluIGEgZGVidWdnZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRUcmFuc2xhdGlvbk9mZnNldH0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IHRyYW5zbGF0aW9uT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUcmFuc2xhdGlvbk9mZnNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9mZnNldCB0cmFuc2xhdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSBhcnJheSBtdXN0IGJlIGEgdmVjdG9yIG9mIGF0IGxlYXN0ICoqMyoqIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGNvbXBvbmVudCBtdXN0IGJlIHJlLWFjdGl2YXRlZCB0byBhcHBseSB0aGUgY2hhbmdlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgc2V0IHRyYW5zbGF0aW9uT2Zmc2V0KG9mZnNldCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRUcmFuc2xhdGlvbih0aGlzLl9pZCwgb2Zmc2V0WzBdLCBvZmZzZXRbMV0sIG9mZnNldFsyXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldFJvdGF0aW9uT2Zmc2V0fS5cbiAgICAgKlxuICAgICAqIEdpdmVzIGEgcXVpY2sgdmlldyBvZiB0aGUgb2Zmc2V0IGluIGEgZGVidWdnZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRSb3RhdGlvbk9mZnNldH0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb3RhdGlvbk9mZnNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9mZnNldCByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSBhcnJheSBtdXN0IGJlIGEgcXVhdGVybmlvbiBvZiBhdCBsZWFzdCAqKjQqKiBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBjb21wb25lbnQgbXVzdCBiZSByZS1hY3RpdmF0ZWQgdG8gYXBwbHkgdGhlIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIHNldCByb3RhdGlvbk9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0Um90YXRpb24odGhpcy5faWQsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCBvZmZzZXRbMl0sIG9mZnNldFszXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBraW5lbWF0aWMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5IHNob3VsZCBiZSBraW5lbWF0aWMuXG4gICAgICovXG4gICAgc2V0IGtpbmVtYXRpYyhiKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfa2luZW1hdGljKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgaXMga2luZW1hdGljLlxuICAgICAqL1xuICAgIGdldCBraW5lbWF0aWMoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfa2luZW1hdGljKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3MgZ3Jhdml0eSBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSdzIGdyYXZpdHkgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2V0IGdyYXZpdHkoYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyYXZpdHkodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIGdyYXZpdHkgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIGdldCBncmF2aXR5KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2dyYXZpdHkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBzaW11bGF0ZSBmbGFnIGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzZXQgc2ltdWxhdGUoYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3NpbXVsYXRlKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBzaW11bGF0ZSBmbGFnIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgZ2V0IHNpbXVsYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NpbXVsYXRlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBhbmQge0BsaW5rIHRyaWdnZXJ9IGNhbiBub3QgYmUgZW5hYmxlZCBhdCB0aGVcbiAgICAgKiBzYW1lIHRpbWUuIEVuYWJsaW5nIHtAbGluayBhbGxvd1NpbXVsYXRpb259IHdoaWxlIHtAbGluayB0cmlnZ2VyfSBpcyBlbmFibGVkXG4gICAgICogd2lsbCBkaXNhYmxlIHtAbGluayB0cmlnZ2VyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgc2V0IGFsbG93U2ltdWxhdGlvbihiKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYWxsb3dTaW11bGF0aW9uKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBhbGxvdyBzaW11bGF0aW9uIG9mIHRoaXMgcmlnaWQgYm9keS5cbiAgICAgKi9cbiAgICBnZXQgYWxsb3dTaW11bGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93U2ltdWxhdGlvbih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICovXG4gICAgc2V0IGFsbG93UXVlcnkoYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93UXVlcnkodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICovXG4gICAgZ2V0IGFsbG93UXVlcnkoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYWxsb3dRdWVyeSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKlxuICAgICAqIHtAbGluayBhbGxvd1NpbXVsYXRpb259IGFuZCB7QGxpbmsgdHJpZ2dlcn0gY2FuIG5vdCBiZSBlbmFibGVkIGF0IHRoZVxuICAgICAqIHNhbWUgdGltZS4gRW5hYmxpbmcgdHJpZ2dlciB3aGlsZSB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBpcyBlbmFibGVkLFxuICAgICAqIHdpbGwgZGlzYWJsZSB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhpcyBwaHlzaWNzIGJvZHkgaXMgYSB0cmlnZ2VyLlxuICAgICAqL1xuICAgIHNldCB0cmlnZ2VyKGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF90cmlnZ2VyKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHBoeXNpY3MgYm9keSBpcyBhIHRyaWdnZXIuXG4gICAgICovXG4gICAgZ2V0IHRyaWdnZXIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfdHJpZ2dlcih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2hhcGUgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcyBOZXcgc2hhcGUuXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IHNoYXBlKHMpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaGFwZSh0aGlzLl9pZCwgcyk7XG4gICAgfVxuICAgIC8qKiBUaGUgc2hhcGUgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uICovXG4gICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaGFwZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhZGRpdGlvbmFsIGRhdGEgZm9yIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIFJldHJpZXZlZCBvbmx5IGZyb20ge0BsaW5rIFBoeXNYQ29tcG9uZW50I3NoYXBlRGF0YX0uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHNldCBzaGFwZURhdGEoZCkge1xuICAgICAgICBpZiAoZCA9PSBudWxsIHx8ICFpc01lc2hTaGFwZSh0aGlzLnNoYXBlKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaGFwZV9kYXRhKHRoaXMuX2lkLCBkLmluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBgbnVsbGAgZm9yIHtAbGluayBTaGFwZX0gdmFsdWVzOiBgTm9uZWAsIGBTcGhlcmVgLCBgQ2Fwc3VsZWAsIGBCb3hgLCBgUGxhbmVgLlxuICAgICAqIGB7aW5kZXg6IG59YCBmb3IgYFRyaWFuZ2xlTWVzaGAgYW5kIGBDb252ZXhIdWxsYC5cbiAgICAgKlxuICAgICAqIFRoaXMgZGF0YSBpcyBjdXJyZW50bHkgb25seSBmb3IgcGFzc2luZyBvbnRvIG9yIGNyZWF0aW5nIG90aGVyIHtAbGluayBQaHlzWENvbXBvbmVudH0uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIGdldCBzaGFwZURhdGEoKSB7XG4gICAgICAgIGlmICghaXNNZXNoU2hhcGUodGhpcy5zaGFwZSkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZGV4OiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlX2RhdGEodGhpcy5faWQpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNoYXBlIGV4dGVudHMgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSBOZXcgZXh0ZW50cyBmb3IgdGhlIHNoYXBlLlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqL1xuICAgIHNldCBleHRlbnRzKGUpIHtcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0RXh0ZW50c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRFeHRlbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGV4dGVudHMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgcHRyLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHN0YXRpY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0aWNGcmljdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc3RhdGljRnJpY3Rpb24odGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgc3RhdGljRnJpY3Rpb24uXG4gICAgICogQHBhcmFtIHYgTmV3IHN0YXRpY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIHNldCBzdGF0aWNGcmljdGlvbih2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc3RhdGljRnJpY3Rpb24odGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZHluYW1pY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBkeW5hbWljRnJpY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2R5bmFtaWNGcmljdGlvbih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBkeW5hbWljRnJpY3Rpb25cbiAgICAgKiBAcGFyYW0gdiBOZXcgZHluYW1pY0RhbXBpbmcuXG4gICAgICovXG4gICAgc2V0IGR5bmFtaWNGcmljdGlvbih2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZHluYW1pY0ZyaWN0aW9uKHRoaXMuX2lkLCB2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGJvdW5jaW5lc3MuXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZ2V0IGJvdW5jaW5lc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2JvdW5jaW5lc3ModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYm91bmNpbmVzcy5cbiAgICAgKiBAcGFyYW0gdiBOZXcgYm91bmNpbmVzcy5cbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBzZXQgYm91bmNpbmVzcyh2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYm91bmNpbmVzcyh0aGlzLl9pZCwgdik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBsaW5lYXJEYW1waW5nL1xuICAgICAqL1xuICAgIGdldCBsaW5lYXJEYW1waW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJEYW1waW5nKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpbmVhckRhbXBpbmcuXG4gICAgICogQHBhcmFtIHYgTmV3IGxpbmVhckRhbXBpbmcuXG4gICAgICovXG4gICAgc2V0IGxpbmVhckRhbXBpbmcodikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckRhbXBpbmcodGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKiogR2V0IGFuZ3VsYXJEYW1waW5nLiAqL1xuICAgIGdldCBhbmd1bGFyRGFtcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhckRhbXBpbmcodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYW5ndWxhckRhbXBpbmcuXG4gICAgICogQHBhcmFtIHYgTmV3IGFuZ3VsYXJEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBhbmd1bGFyRGFtcGluZyh2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckRhbXBpbmcodGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbGluZWFyIHZlbG9jaXR5LlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiVmVsb2NpdHlcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCN2ZWxvY2l0eSlcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICovXG4gICAgc2V0IGxpbmVhclZlbG9jaXR5KHYpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJWZWxvY2l0eSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldExpbmVhclZlbG9jaXR5fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldExpbmVhclZlbG9jaXR5fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGxpbmVhclZlbG9jaXR5KCkge1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl90ZW1wTWVtLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGFuZ3VsYXIgdmVsb2NpdHlcbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIlZlbG9jaXR5XCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjdmVsb2NpdHkpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgYW5ndWxhciB2ZWxvY2l0eVxuICAgICAqL1xuICAgIHNldCBhbmd1bGFyVmVsb2NpdHkodikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FuZ3VsYXJWZWxvY2l0eSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldEFuZ3VsYXJWZWxvY2l0eX0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRBbmd1bGFyVmVsb2NpdHl9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgYW5ndWxhclZlbG9jaXR5KCkge1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhclZlbG9jaXR5KHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fdGVtcE1lbSwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29tcG9uZW50cyBncm91cHMgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFncyBOZXcgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHNldC5cbiAgICAgKi9cbiAgICBzZXQgZ3JvdXBzTWFzayhmbGFncykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyb3Vwc01hc2sodGhpcy5faWQsIGZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb21wb25lbnRzIGdyb3VwcyBtYXNrIGZsYWdzLlxuICAgICAqXG4gICAgICogRWFjaCBiaXQgcmVwcmVzZW50cyBtZW1iZXJzaGlwIHRvIGdyb3VwLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQXNzaWduIGMgdG8gZ3JvdXAgMlxuICAgICAqIGMuZ3JvdXBzTWFzayA9ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogLy8gQXNzaWduIGMgdG8gZ3JvdXAgMFxuICAgICAqIGMuZ3JvdXBzTWFzayAgPSAoMSA8PCAwKTtcbiAgICAgKlxuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDAgYW5kIDJcbiAgICAgKiBjLmdyb3Vwc01hc2sgPSAoMSA8PCAwKSB8ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogKGMuZ3JvdXBzTWFzayAmICgxIDw8IDIpKSAhPSAwOyAvLyB0cnVlXG4gICAgICogKGMuZ3JvdXBzTWFzayAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBncm91cHNNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ncm91cHNNYXNrKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb21wb25lbnRzIGJsb2NrcyBtYXNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZsYWdzIE5ldyBmbGFncyB0aGF0IG5lZWQgdG8gYmUgc2V0LlxuICAgICAqL1xuICAgIHNldCBibG9ja3NNYXNrKGZsYWdzKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYmxvY2tzTWFzayh0aGlzLl9pZCwgZmxhZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbXBvbmVudHMgYmxvY2tzIG1hc2sgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIG1lbWJlcnNoaXAgdG8gdGhlIGJsb2NrLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQmxvY2sgb3ZlcmxhcCB3aXRoIGFueSBvYmplY3RzIGluIGdyb3VwIDJcbiAgICAgKiBjLmJsb2Nrc01hc2sgPSAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIC8vIEJsb2NrIG92ZXJsYXAgd2l0aCBhbnkgb2JqZWN0cyBpbiBncm91cCAwXG4gICAgICogYy5ibG9ja3NNYXNrICA9ICgxIDw8IDApXG4gICAgICpcbiAgICAgKiAvLyBCbG9jayBvdmVybGFwIHdpdGggYW55IG9iamVjdHMgaW4gZ3JvdXAgMCBhbmQgMlxuICAgICAqIGMuYmxvY2tzTWFzayA9ICgxIDw8IDApIHwgKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAoYy5ibG9ja3NNYXNrICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAoYy5ibG9ja3NNYXNrICYgKDEgPDwgNykpICE9IDA7IC8vIGZhbHNlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGJsb2Nrc01hc2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2Jsb2Nrc01hc2sodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYXhlcyB0byBsb2NrIGZvciBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jayBUaGUgQXhpcyB0aGF0IG5lZWRzIHRvIGJlIHNldC5cbiAgICAgKlxuICAgICAqIENvbWJpbmUgZmxhZ3Mgd2l0aCBCaXR3aXNlIE9SOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBib2R5LmxpbmVhckxvY2tBeGlzID0gTG9ja0F4aXMuWCB8IExvY2tBeGlzLlk7IC8vIHggYW5kIHkgc2V0XG4gICAgICogYm9keS5saW5lYXJMb2NrQXhpcyA9IExvY2tBeGlzLlg7IC8vIHkgdW5zZXRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY29tcG9uZW50IGlzIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyTG9ja0F4aXMobG9jaykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckxvY2tBeGlzKHRoaXMuX2lkLCBsb2NrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaW5lYXIgbG9jayBheGVzIGZsYWdzLlxuICAgICAqXG4gICAgICogVG8gZ2V0IHRoZSBzdGF0ZSBvZiBhIHNwZWNpZmljIGZsYWcsIEJpdHdpc2UgQU5EIHdpdGggdGhlIExvY2tBeGlzIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaWYoYm9keS5saW5lYXJMb2NrQXhpcyAmIExvY2tBeGlzLlkpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coXCJUaGUgWSBmbGFnIHdhcyBzZXQhXCIpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm4gYXhlcyB0aGF0IGFyZSBjdXJyZW50bHkgbG9ja2VkIGZvciBsaW5lYXIgbW92ZW1lbnQuXG4gICAgICovXG4gICAgZ2V0IGxpbmVhckxvY2tBeGlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJMb2NrQXhpcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBheGVzIHRvIGxvY2sgZm9yIGFuZ3VsYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jayBUaGUgQXhpcyB0aGF0IG5lZWRzIHRvIGJlIHNldC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYm9keS5hbmd1bGFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YIHwgTG9ja0F4aXMuWTsgLy8geCBhbmQgeSBzZXRcbiAgICAgKiBib2R5LmFuZ3VsYXJMb2NrQXhpcyA9IExvY2tBeGlzLlg7IC8vIHkgdW5zZXRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY29tcG9uZW50IGlzIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhckxvY2tBeGlzKGxvY2spIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyTG9ja0F4aXModGhpcy5faWQsIGxvY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuZ3VsYXIgbG9jayBheGVzIGZsYWdzLlxuICAgICAqXG4gICAgICogVG8gZ2V0IHRoZSBzdGF0ZSBvZiBhIHNwZWNpZmljIGZsYWcsIEJpdHdpc2UgQU5EIHdpdGggdGhlIExvY2tBeGlzIG5lZWRlZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaWYoYm9keS5hbmd1bGFyTG9ja0F4aXMgJiBMb2NrQXhpcy5ZKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiVGhlIFkgZmxhZyB3YXMgc2V0IVwiKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGF4ZXMgdGhhdCBhcmUgY3VycmVudGx5IGxvY2tlZCBmb3IgYW5ndWxhciBtb3ZlbWVudC5cbiAgICAgKi9cbiAgICBnZXQgYW5ndWxhckxvY2tBeGlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyTG9ja0F4aXModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbWFzcy5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIk1hc3MgUHJvcGVydGllc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI21hc3MtcHJvcGVydGllcylcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtIE5ldyBtYXNzLlxuICAgICAqL1xuICAgIHNldCBtYXNzKG0pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzKHRoaXMuX2lkLCBtKTtcbiAgICB9XG4gICAgLyoqIE1hc3MgKi9cbiAgICBnZXQgbWFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbWFzcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBtYXNzIHNwYWNlIGludGVyaWEgdGVuc29yLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiTWFzcyBQcm9wZXJ0aWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjbWFzcy1wcm9wZXJ0aWVzKVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IG1hc3Mgc3BhY2UgaW50ZXJhdGlhIHRlbnNvci5cbiAgICAgKi9cbiAgICBzZXQgbWFzc1NwYWNlSW50ZXJpYVRlbnNvcih2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbWFzc1NwYWNlSW5lcnRpYVRlbnNvcih0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmlnaWQgYm9keSB0byBzbGVlcCB1cG9uIGFjdGl2YXRpb24uXG4gICAgICpcbiAgICAgKiBXaGVuIGFzbGVlcCwgdGhlIHJpZ2lkIGJvZHkgd2lsbCBub3QgYmUgc2ltdWxhdGVkIHVudGlsIHRoZSBuZXh0IGNvbnRhY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZyBgdHJ1ZWAgdG8gc2xlZXAgdXBvbiBhY3RpdmF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS41XG4gICAgICovXG4gICAgc2V0IHNsZWVwT25BY3RpdmF0ZShmbGFnKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2xlZXBPbkFjdGl2YXRlKHRoaXMuX2lkLCBmbGFnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSByaWdpZCBib2R5IGlzIHNldCB0byBzbGVlcCB1cG9uIGFjdGl2YXRpb24sIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS41XG4gICAgICovXG4gICAgZ2V0IHNsZWVwT25BY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zbGVlcE9uQWN0aXZhdGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBhIGZvcmNlLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiQXBwbHlpbmcgRm9yY2VzIGFuZCBUb3JxdWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjYXBwbHlpbmctZm9yY2VzLWFuZC10b3JxdWVzKVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgRm9yY2UgdmVjdG9yLlxuICAgICAqIEBwYXJhbSBtIEZvcmNlIG1vZGUsIHNlZSB7QGxpbmsgRm9yY2VNb2RlfSwgZGVmYXVsdCBgRm9yY2VgLlxuICAgICAqIEBwYXJhbSBsb2NhbEZvcmNlIFdoZXRoZXIgdGhlIGZvcmNlIHZlY3RvciBpcyBpbiBsb2NhbCBzcGFjZSwgZGVmYXVsdCBgZmFsc2VgLlxuICAgICAqIEBwYXJhbSBwIFBvc2l0aW9uIHRvIGFwcGx5IGZvcmNlIGF0LCBkZWZhdWx0IGlzIGNlbnRlciBvZiBtYXNzLlxuICAgICAqIEBwYXJhbSBsb2NhbCBXaGV0aGVyIHBvc2l0aW9uIGlzIGluIGxvY2FsIHNwYWNlLCBkZWZhdWx0IGBmYWxzZWAuXG4gICAgICovXG4gICAgYWRkRm9yY2UoZiwgbSA9IEZvcmNlTW9kZS5Gb3JjZSwgbG9jYWxGb3JjZSA9IGZhbHNlLCBwLCBsb2NhbCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRGb3JjZSh0aGlzLl9pZCwgZlswXSwgZlsxXSwgZlsyXSwgbSwgbG9jYWxGb3JjZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZEZvcmNlQXQodGhpcy5faWQsIGZbMF0sIGZbMV0sIGZbMl0sIG0sIGxvY2FsRm9yY2UsIHBbMF0sIHBbMV0sIHBbMl0sIGxvY2FsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgdG9ycXVlLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiQXBwbHlpbmcgRm9yY2VzIGFuZCBUb3JxdWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjYXBwbHlpbmctZm9yY2VzLWFuZC10b3JxdWVzKVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgRm9yY2UgdmVjdG9yLlxuICAgICAqIEBwYXJhbSBtIEZvcmNlIG1vZGUsIHNlZSB7QGxpbmsgRm9yY2VNb2RlfSwgZGVmYXVsdCBgRm9yY2VgLlxuICAgICAqL1xuICAgIGFkZFRvcnF1ZShmLCBtID0gRm9yY2VNb2RlLkZvcmNlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRUb3JxdWUodGhpcy5faWQsIGZbMF0sIGZbMV0sIGZbMl0sIG0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgb24gY29sbGlzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHkgKHVuKWNvbGxpZGVzIHdpdGggYW55IG90aGVyLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgbGV0IHJpZ2lkQm9keSA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgncGh5c3gnKTtcbiAgICAgKiAgcmlnaWRCb2R5Lm9uQ29sbGlzaW9uKGZ1bmN0aW9uKHR5cGUsIG90aGVyKSB7XG4gICAgICogICAgICAvLyBJZ25vcmUgdW5jb2xsaWRlc1xuICAgICAqICAgICAgaWYodHlwZSA9PSBDb2xsaXNpb25FdmVudFR5cGUuVG91Y2hMb3N0KSByZXR1cm47XG4gICAgICpcbiAgICAgKiAgICAgIC8vIFRha2UgZGFtYWdlIG9uIGNvbGxpc2lvbiB3aXRoIGVuZW1pZXNcbiAgICAgKiAgICAgIGlmKG90aGVyLm9iamVjdC5uYW1lLnN0YXJ0c1dpdGgoXCJlbmVteS1cIikpIHtcbiAgICAgKiAgICAgICAgICB0aGlzLmFwcGx5RGFtYWdlKDEwKTtcbiAgICAgKiAgICAgIH1cbiAgICAgKiAgfS5iaW5kKHRoaXMpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIElkIG9mIHRoZSBuZXcgY2FsbGJhY2sgZm9yIHVzZSB3aXRoIHtAbGluayBQaHlzWENvbXBvbmVudCNyZW1vdmVDb2xsaXNpb25DYWxsYmFja30uXG4gICAgICovXG4gICAgb25Db2xsaXNpb24oY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25Db2xsaXNpb25XaXRoKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGZpbHRlcmVkIG9uIGNvbGxpc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlckNvbXAgQ29tcG9uZW50IGZvciB3aGljaCBjYWxsYmFja3Mgd2lsbFxuICAgICAqICAgICAgICBiZSB0cmlnZ2VyZWQuIElmIHlvdSBwYXNzIHRoaXMgY29tcG9uZW50LCB0aGUgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8uXG4gICAgICogICAgICAgIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHlcbiAgICAgKiAgICAgICAgKHVuKWNvbGxpZGVzIHdpdGggYG90aGVyQ29tcGAuXG4gICAgICogQHJldHVybnMgSWQgb2YgdGhlIG5ldyBjYWxsYmFjayBmb3IgdXNlIHdpdGgge0BsaW5rIFBoeXNYQ29tcG9uZW50I3JlbW92ZUNvbGxpc2lvbkNhbGxiYWNrfS5cbiAgICAgKi9cbiAgICBvbkNvbGxpc2lvbldpdGgob3RoZXJDb21wLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBwaHlzaWNzID0gdGhpcy5lbmdpbmUucGh5c2ljcztcbiAgICAgICAgcGh5c2ljcy5fY2FsbGJhY2tzW3RoaXMuX2lkXSA9IHBoeXNpY3MuX2NhbGxiYWNrc1t0aGlzLl9pZF0gfHwgW107XG4gICAgICAgIHBoeXNpY3MuX2NhbGxiYWNrc1t0aGlzLl9pZF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkQ2FsbGJhY2sodGhpcy5faWQsIG90aGVyQ29tcC5faWQgfHwgdGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjb2xsaXNpb24gY2FsbGJhY2sgYWRkZWQgd2l0aCB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb259IG9yIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbldpdGh9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrSWQgQ2FsbGJhY2sgaWQgYXMgcmV0dXJuZWQgYnkge0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9ufSBvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb25XaXRofS5cbiAgICAgKiBAdGhyb3dzIFdoZW4gdGhlIGNhbGxiYWNrIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgY29tcG9uZW50LlxuICAgICAqIEB0aHJvd3MgV2hlbiB0aGUgY2FsbGJhY2sgZG9lcyBub3QgZXhpc3QuXG4gICAgICovXG4gICAgcmVtb3ZlQ29sbGlzaW9uQ2FsbGJhY2soY2FsbGJhY2tJZCkge1xuICAgICAgICBjb25zdCBwaHlzaWNzID0gdGhpcy5lbmdpbmUucGh5c2ljcztcbiAgICAgICAgY29uc3QgciA9IHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9yZW1vdmVDYWxsYmFjayh0aGlzLl9pZCwgY2FsbGJhY2tJZCk7XG4gICAgICAgIC8qIHIgaXMgdGhlIGFtb3VudCBvZiBvYmplY3QgdG8gcmVtb3ZlIGZyb20gdGhlIGVuZCBvZiB0aGVcbiAgICAgICAgICogY2FsbGJhY2tzIGFycmF5IGZvciB0aGlzIG9iamVjdCAqL1xuICAgICAgICBpZiAocilcbiAgICAgICAgICAgIHBoeXNpY3MuX2NhbGxiYWNrc1t0aGlzLl9pZF0uc3BsaWNlKC1yKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGljXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInRyYW5zbGF0aW9uT2Zmc2V0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInJvdGF0aW9uT2Zmc2V0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImtpbmVtYXRpY1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJncmF2aXR5XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNpbXVsYXRlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImFsbG93U2ltdWxhdGlvblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGxvd1F1ZXJ5XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInRyaWdnZXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhcGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhcGVEYXRhXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImV4dGVudHNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGljRnJpY3Rpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiZHluYW1pY0ZyaWN0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5jaW5lc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwibGluZWFyRGFtcGluZ1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbmd1bGFyRGFtcGluZ1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsaW5lYXJWZWxvY2l0eVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbmd1bGFyVmVsb2NpdHlcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBzTWFza1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJibG9ja3NNYXNrXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVhckxvY2tBeGlzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImFuZ3VsYXJMb2NrQXhpc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNsZWVwT25BY3RpdmF0ZVwiLCBudWxsKTtcbi8qKlxuICogQWNjZXNzIHRvIHRoZSBwaHlzaWNzIHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzaWNzIHtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBwdWJsaWMgdG8gZW11bGF0ZSBhIGBmcmllbmRgIGFjY2Vzc29yLlxuICAgICAqL1xuICAgIF9jYWxsYmFja3M7XG4gICAgLyoqIEhpdC4gKi9cbiAgICBfaGl0O1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZSAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqIFJheSBIaXQgKi9cbiAgICBfcmF5SGl0O1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX3JheUhpdCA9IGVuZ2luZS53YXNtLl9tYWxsb2MoNCAqICgzICogNCArIDMgKiA0ICsgNCArIDIpICsgNCk7XG4gICAgICAgIHRoaXMuX2hpdCA9IG5ldyBSYXlIaXQoZW5naW5lLnNjZW5lLCB0aGlzLl9yYXlIaXQpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FzdCBhIHJheSB0aHJvdWdoIHRoZSBzY2VuZSBhbmQgZmluZCBpbnRlcnNlY3RpbmcgcGh5c2ljcyBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdGluZyByYXkgaGl0IHdpbGwgY29udGFpbiAqKnVwIHRvIDQqKiBjbG9zZXN0IHJheSBoaXRzLFxuICAgICAqIHNvcnRlZCBieSBpbmNyZWFzaW5nIGRpc3RhbmNlLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaGl0ID0gZW5naW5lLnBoeXNpY3MucmF5Q2FzdChcbiAgICAgKiAgICAgWzAsIDAsIDBdLFxuICAgICAqICAgICBbMCwgMCwgMV0sXG4gICAgICogICAgIDEgPDwgMCB8IDEgPDwgNCwgLy8gT25seSBjaGVjayBhZ2FpbnN0IHBoeXNpY3MgY29tcG9uZW50cyBpbiBncm91cHMgMCBhbmQgNFxuICAgICAqICAgICAyNVxuICAgICAqICk7XG4gICAgICogaWYgKGhpdC5oaXRDb3VudCA+IDApIHtcbiAgICAgKiAgICAgY29uc3QgbG9jYXRpb25zID0gaGl0LmdldExvY2F0aW9ucygpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgT2JqZWN0IGhpdCBhdDogJHtsb2NhdGlvbnNbMF1bMF19LCAke2xvY2F0aW9uc1swXVsxXX0sICR7bG9jYXRpb25zWzBdWzJdfWApO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvIFJheSBvcmlnaW4uXG4gICAgICogQHBhcmFtIGQgUmF5IGRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gZ3JvdXBNYXNrIEJpdG1hc2sgb2YgcGh5c2ljcyBncm91cHMgdG8gZmlsdGVyIGJ5OiBvbmx5IG9iamVjdHNcbiAgICAgKiAgICAgICAgdGhhdCBhcmUgcGFydCBvZiBnaXZlbiBncm91cHMgYXJlIGNvbnNpZGVyZWQgZm9yIHRoZSByYXljYXN0LlxuICAgICAqIEBwYXJhbSBtYXhEaXN0YW5jZSBNYXhpbXVtICoqaW5jbHVzaXZlKiogaGl0IGRpc3RhbmNlLiBEZWZhdWx0cyB0byBgMTAwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgUmF5SGl0fSBpbnN0YW5jZSwgY2FjaGVkIGJ5IHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcmV0dXJuZWQge0BsaW5rIFJheUhpdH0gb2JqZWN0IGlzIG93bmVkIGJ5IHRoZSB7QGxpbmsgUGh5c2ljc31cbiAgICAgKiAgICAgICBpbnN0YW5jZSBhbmQgd2lsbCBiZSByZXVzZWQgd2l0aCB0aGUgbmV4dCB7QGxpbmsgUGh5c2ljcyNyYXlDYXN0fSBjYWxsLlxuICAgICAqL1xuICAgIHJheUNhc3QobywgZCwgZ3JvdXBNYXNrLCBtYXhEaXN0YW5jZSA9IDEwMC4wKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLnNjZW5lLl9pbmRleDtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X3JheV9jYXN0KHNjZW5lLCBvWzBdLCBvWzFdLCBvWzJdLCBkWzBdLCBkWzFdLCBkWzJdLCBncm91cE1hc2ssIG1heERpc3RhbmNlLCB0aGlzLl9yYXlIaXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5faGl0O1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG59XG4vKipcbiAqIE1lc2ggaW5kZXggdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBNZXNoSW5kZXhUeXBlO1xuKGZ1bmN0aW9uIChNZXNoSW5kZXhUeXBlKSB7XG4gICAgLyoqIFNpbmdsZSBieXRlIG1lc2ggaW5kZXgsIHJhbmdlIDAtMjU1ICovXG4gICAgTWVzaEluZGV4VHlwZVtNZXNoSW5kZXhUeXBlW1wiVW5zaWduZWRCeXRlXCJdID0gMV0gPSBcIlVuc2lnbmVkQnl0ZVwiO1xuICAgIC8qKiBUd28gYnl0ZSBtZXNoIGluZGV4LCByYW5nZSAwLTY1NTM1ICovXG4gICAgTWVzaEluZGV4VHlwZVtNZXNoSW5kZXhUeXBlW1wiVW5zaWduZWRTaG9ydFwiXSA9IDJdID0gXCJVbnNpZ25lZFNob3J0XCI7XG4gICAgLyoqIEZvdXIgYnl0ZSBtZXNoIGluZGV4LCByYW5nZSAwLTQyOTQ5NjcyOTUgKi9cbiAgICBNZXNoSW5kZXhUeXBlW01lc2hJbmRleFR5cGVbXCJVbnNpZ25lZEludFwiXSA9IDRdID0gXCJVbnNpZ25lZEludFwiO1xufSkoTWVzaEluZGV4VHlwZSB8fCAoTWVzaEluZGV4VHlwZSA9IHt9KSk7XG4vKipcbiAqIE1lc2ggc2tpbm5pbmcgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBNZXNoU2tpbm5pbmdUeXBlO1xuKGZ1bmN0aW9uIChNZXNoU2tpbm5pbmdUeXBlKSB7XG4gICAgLyoqIE5vdCBza2lubmVkICovXG4gICAgTWVzaFNraW5uaW5nVHlwZVtNZXNoU2tpbm5pbmdUeXBlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgLyoqIFNraW5uZWQsIDQgam9pbnRzL3dlaWdodCBwZXIgdmVydGV4ICovXG4gICAgTWVzaFNraW5uaW5nVHlwZVtNZXNoU2tpbm5pbmdUeXBlW1wiRm91ckpvaW50c1wiXSA9IDFdID0gXCJGb3VySm9pbnRzXCI7XG4gICAgLyoqIFNraW5uZWQsIDggam9pbnRzL3dlaWdodCBwZXIgdmVydGV4ICovXG4gICAgTWVzaFNraW5uaW5nVHlwZVtNZXNoU2tpbm5pbmdUeXBlW1wiRWlnaHRKb2ludHNcIl0gPSAyXSA9IFwiRWlnaHRKb2ludHNcIjtcbn0pKE1lc2hTa2lubmluZ1R5cGUgfHwgKE1lc2hTa2lubmluZ1R5cGUgPSB7fSkpO1xuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBtZXNoIGRhdGEuXG4gKlxuICogVG8gbW9kaWZ5IGEgbWVzaCwgeW91IGdldCBhY2Nlc3MgdG8gYSB7QGxpbmsgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yfSB0aGF0IGFsbG93cyB5b3UgdG8gbW9kaWZ5XG4gKiB0aGUgY29udGVudCBvZiB0aGUgYnVmZmVyczpcbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWVzaCA9IG5ldyBNZXNoKGVuZ2luZSwge3ZlcnRleENvdW50OiAzLCBpbmRleERhdGE6IFswLCAxLCAyXSB9KTtcbiAqIGNvbnN0IHBvc2l0aW9ucyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICogLi4uXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2ggZXh0ZW5kcyBTY2VuZVJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIE1lc2hNYW5hZ2VyLmNyZWF0ZX0gaW5zdGVhZCwgYWNjZXNzaWJsZSB2aWEge0BsaW5rIFNjZW5lR3JvdXAubWVzaGVzfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IHNjZW5lR3JvdXAubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gICAgICogLi4uXG4gICAgICogbWVzaC51cGRhdGUoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBob3N0IGluc3RhbmNlb2YgU2NlbmVHcm91cCA/IGhvc3QgOiAoaG9zdCA/PyBXTCkuc2NlbmUuZ3JvdXA7XG4gICAgICAgIGlmICghaXNOdW1iZXIocGFyYW1zKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzaCA9IGdyb3VwLm1lc2hlcy5jcmVhdGUocGFyYW1zKTtcbiAgICAgICAgICAgIC8qIGBzdXBlcigpYCBtdXN0IGJlIGNhbGxlZCBhcyBzdGF0ZWQgaW4gdGhlIHNwZWNpZmljYXRpb24gKi9cbiAgICAgICAgICAgIHN1cGVyKGdyb3VwLCBtZXNoLl9pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbWVzaDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihncm91cCwgcGFyYW1zKTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGlzIG1lc2guICovXG4gICAgZ2V0IHZlcnRleENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfdmVydGV4Q291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogSW5kZXggZGF0YSAocmVhZC1vbmx5KSBvciBgbnVsbGAgaWYgdGhlIG1lc2ggaXMgbm90IGluZGV4ZWQuICovXG4gICAgZ2V0IGluZGV4RGF0YSgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW0gPSB3YXNtLl90ZW1wTWVtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9tZXNoX2dldF9pbmRleERhdGEodGhpcy5faWQsIHRlbXBNZW0sIHRlbXBNZW0gKyA0KTtcbiAgICAgICAgaWYgKHB0ciA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBpbmRleENvdW50ID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0XTtcbiAgICAgICAgY29uc3QgaW5kZXhTaXplID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0ICsgMV07XG4gICAgICAgIHN3aXRjaCAoaW5kZXhTaXplKSB7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh3YXNtLkhFQVBVOC5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHdhc20uSEVBUFUxNi5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSh3YXNtLkhFQVBVMzIuYnVmZmVyLCBwdHIsIGluZGV4Q291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBjaGFuZ2VzIHRvIHtAbGluayBhdHRyaWJ1dGUgfCB2ZXJ0ZXggYXR0cmlidXRlc30uXG4gICAgICpcbiAgICAgKiBVcGxvYWRzIHRoZSB1cGRhdGVkIHZlcnRleCBhdHRyaWJ1dGVzIHRvIHRoZSBHUFUgYW5kIHVwZGF0ZXMgdGhlIGJvdW5kaW5nXG4gICAgICogc3BoZXJlIHRvIG1hdGNoIHRoZSBuZXcgdmVydGV4IHBvc2l0aW9ucy5cbiAgICAgKlxuICAgICAqIFNpbmNlIHRoaXMgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiwgY2FsbCBpdCBvbmx5IG9uY2UgeW91IGhhdmUgcGVyZm9ybWVkXG4gICAgICogYWxsIG1vZGlmaWNhdGlvbnMgb24gYSBtZXNoIGFuZCBhdm9pZCBjYWxsaW5nIGlmIHlvdSBkaWQgbm90IHBlcmZvcm0gYW55XG4gICAgICogbW9kaWZpY2F0aW9ucyBhdCBhbGwuXG4gICAgICovXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX3VwZGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIGdldEJvdW5kaW5nU3BoZXJlKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfZ2V0X2JvdW5kaW5nU3BoZXJlKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBhdHRyaWJ1dGUoYXR0cikge1xuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT0gJ251bWJlcicpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBudW1iZXIsIGJ1dCBnb3QgJyArIHR5cGVvZiBhdHRyKTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1VaW50MzIgPSB3YXNtLl90ZW1wTWVtVWludDMyO1xuICAgICAgICB3YXNtLl93bF9tZXNoX2dldF9hdHRyaWJ1dGUodGhpcy5faWQsIGF0dHIsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBpZiAodGVtcE1lbVVpbnQzMlswXSA9PSAyNTUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgYXJyYXlTaXplID0gdGVtcE1lbVVpbnQzMls1XTtcbiAgICAgICAgcmV0dXJuIG5ldyBNZXNoQXR0cmlidXRlQWNjZXNzb3IodGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogdGVtcE1lbVVpbnQzMlswXSxcbiAgICAgICAgICAgIG9mZnNldDogdGVtcE1lbVVpbnQzMlsxXSxcbiAgICAgICAgICAgIHN0cmlkZTogdGVtcE1lbVVpbnQzMlsyXSxcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IHRlbXBNZW1VaW50MzJbM10sXG4gICAgICAgICAgICBjb21wb25lbnRDb3VudDogdGVtcE1lbVVpbnQzMls0XSxcbiAgICAgICAgICAgIC8qIFRoZSBXQVNNIEFQSSByZXR1cm5zIGAwYCBmb3IgYSBzY2FsYXIgdmFsdWUuIFdlIGNsYW1wIGl0IHRvIDEgYXMgd2Ugc3RyaWN0bHkgdXNlIGl0IGFzIGEgbXVsdGlwbGllciBmb3IgZ2V0L3NldCBvcGVyYXRpb25zICovXG4gICAgICAgICAgICBhcnJheVNpemU6IGFycmF5U2l6ZSA/IGFycmF5U2l6ZSA6IDEsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMudmVydGV4Q291bnQsXG4gICAgICAgICAgICBidWZmZXJUeXBlOiAoYXR0ciAhPT0gTWVzaEF0dHJpYnV0ZS5Kb2ludElkXG4gICAgICAgICAgICAgICAgPyBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgICAgICA6IFVpbnQxNkFycmF5KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIG1lc2hlcyBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgbWVzaCB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICBtZXNoLmRlc3Ryb3koKTtcbiAgICAgKiAgIG1lc2ggPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQWNjZXNzaW5nIHRoZSBtZXNoIGFmdGVyIGRlc3RydWN0aW9uIGJlaGF2ZXMgbGlrZSBhY2Nlc3NpbmcgYW4gZW1wdHlcbiAgICAgKiBtZXNoLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9kZXN0cm95KHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5faG9zdC5tZXNoZXMuX2Rlc3Ryb3kodGhpcyk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnTWVzaChkZXN0cm95ZWQpJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYE1lc2goJHt0aGlzLl9pbmRleH0pYDtcbiAgICB9XG59XG4vKipcbiAqIEFuIGl0ZXJhdG9yIG92ZXIgYSBtZXNoIHZlcnRleCBhdHRyaWJ1dGUuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKS5tZXNoO1xuICogY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gKlxuICogLy8gRXF1aXZhbGVudCB0byBgbmV3IEZsb2F0MzJBcnJheSgzKWAuXG4gKiBjb25zdCB0ZW1wID0gcG9zaXRpb25zLmNyZWF0ZUFycmF5KCk7XG4gKlxuICogZm9yKGxldCBpID0gMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7ICsraSkge1xuICogICAgIC8vIGBwb3NgIHdpbGwgcmVmZXJlbmNlIGB0ZW1wYCBhbmQgdGhlcmVieSBub3QgYWxsb2NhdGUgYWRkaXRpb25hbFxuICogICAgIC8vIG1lbW9yeSwgd2hpY2ggd291bGQgY2F1c2UgYSBwZXJmIHNwaWtlIHdoZW4gY29sbGVjdGVkLlxuICogICAgIGNvbnN0IHBvcyA9IHBvc2l0aW9ucy5nZXQoaSwgdGVtcCk7XG4gKiAgICAgLy8gU2NhbGUgcG9zaXRpb24gYnkgMiBvbiB4LWF4aXMgb25seS5cbiAqICAgICBwb3NbMF0gKj0gMi4wO1xuICogICAgIHBvc2l0aW9ucy5zZXQoaSwgcG9zKTtcbiAqIH1cbiAqIC8vIFdlJ3JlIGRvbmUgbW9kaWZ5aW5nLCB0ZWxsIHRoZSBlbmdpbmUgdG8gbW92ZSB2ZXJ0ZXggZGF0YSB0byB0aGUgR1BVLlxuICogbWVzaC51cGRhdGUoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICAvKiogTWF4IG51bWJlciBvZiBlbGVtZW50cy4gKi9cbiAgICBsZW5ndGggPSAwO1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqIEF0dHJpYnV0ZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9hdHRyaWJ1dGUgPSAtMTtcbiAgICAvKiogQXR0cmlidXRlIG9mZnNldC4gQGhpZGRlbiAqL1xuICAgIF9vZmZzZXQgPSAwO1xuICAgIC8qKiBBdHRyaWJ1dGUgc3RyaWRlLiBAaGlkZGVuICovXG4gICAgX3N0cmlkZSA9IDA7XG4gICAgLyoqIEZvcm1hdCBzaXplIG5hdGl2ZSBlbnVtLiBAaGlkZGVuICovXG4gICAgX2Zvcm1hdFNpemUgPSAwO1xuICAgIC8qKiBOdW1iZXIgb2YgY29tcG9uZW50cyBwZXIgdmVydGV4LiBAaGlkZGVuICovXG4gICAgX2NvbXBvbmVudENvdW50ID0gMDtcbiAgICAvKiogTnVtYmVyIG9mIHZhbHVlcyBwZXIgdmVydGV4LiBAaGlkZGVuICovXG4gICAgX2FycmF5U2l6ZSA9IDE7XG4gICAgLyoqXG4gICAgICogQ2xhc3MgdG8gaW5zdGFudGlhdGUgYW4gQXJyYXlCdWZmZXIgdG8gZ2V0L3NldCB2YWx1ZXMuXG4gICAgICovXG4gICAgX2J1ZmZlclR5cGU7XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gYWxsb2NhdGUgdGVtcG9yYXJ5IFdBU00gbWVtb3J5LiBJdCBpcyBjYWNoZWQgaW4gdGhlIGFjY2Vzc29yIHRvIGF2b2lkXG4gICAgICogY29uZGl0aW9uYWxzIGR1cmluZyBnZXQvc2V0LlxuICAgICAqL1xuICAgIF90ZW1wQnVmZmVyR2V0dGVyO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFBsZWFzZSB1c2Uge0BsaW5rIE1lc2guYXR0cmlidXRlfSB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBDb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gcmVhZCB0aGUgZGF0YS5cbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IuIEluc3RlYWQsIHBsZWFzZSB1c2UgdGhlIHtAbGluayBNZXNoLmF0dHJpYnV0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9wdGlvbnMub2Zmc2V0O1xuICAgICAgICB0aGlzLl9zdHJpZGUgPSBvcHRpb25zLnN0cmlkZTtcbiAgICAgICAgdGhpcy5fZm9ybWF0U2l6ZSA9IG9wdGlvbnMuZm9ybWF0U2l6ZTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50Q291bnQgPSBvcHRpb25zLmNvbXBvbmVudENvdW50O1xuICAgICAgICB0aGlzLl9hcnJheVNpemUgPSBvcHRpb25zLmFycmF5U2l6ZTtcbiAgICAgICAgdGhpcy5fYnVmZmVyVHlwZSA9IG9wdGlvbnMuYnVmZmVyVHlwZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fdGVtcEJ1ZmZlckdldHRlciA9ICh0aGlzLl9idWZmZXJUeXBlID09PSBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgID8gd2FzbS5nZXRUZW1wQnVmZmVyRjMyLmJpbmQod2FzbSlcbiAgICAgICAgICAgIDogd2FzbS5nZXRUZW1wQnVmZmVyVTE2LmJpbmQod2FzbSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgVHlwZWRBcnJheSB0byBob2xkIHRoaXMgYXR0cmlidXRlJ3MgdmFsdWVzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZnVsIHRvIGNyZWF0ZSBhIHZpZXcgdG8gaG9sZCB0aGUgZGF0YSB0b1xuICAgICAqIHBhc3MgdG8ge0BsaW5rIGdldH0gYW5kIHtAbGluayBzZXR9XG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCB2ZXJ0ZXhDb3VudCA9IDQ7XG4gICAgICogY29uc3QgcG9zaXRpb25BdHRyaWJ1dGUgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAgICAgKlxuICAgICAqIC8vIEEgcG9zaXRpb24gaGFzIDMgZmxvYXRzIHBlciB2ZXJ0ZXguIFRodXMsIHBvc2l0aW9ucyBoYXMgbGVuZ3RoIDMgKiA0LlxuICAgICAqIGNvbnN0IHBvc2l0aW9ucyA9IHBvc2l0aW9uQXR0cmlidXRlLmNyZWF0ZUFycmF5KHZlcnRleENvdW50KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqdmVydGljZXMqKiBleHBlY3RlZC5cbiAgICAgKiBAcmV0dXJucyBBIFR5cGVkQXJyYXkgd2l0aCB0aGUgYXBwcm9wcmlhdGUgZm9ybWF0IHRvIGFjY2VzcyB0aGUgZGF0YVxuICAgICAqL1xuICAgIGNyZWF0ZUFycmF5KGNvdW50ID0gMSkge1xuICAgICAgICBjb3VudCA9IGNvdW50ID4gdGhpcy5sZW5ndGggPyB0aGlzLmxlbmd0aCA6IGNvdW50O1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuX2J1ZmZlclR5cGUoY291bnQgKiB0aGlzLl9jb21wb25lbnRDb3VudCAqIHRoaXMuX2FycmF5U2l6ZSk7XG4gICAgfVxuICAgIGdldChpbmRleCwgb3V0ID0gdGhpcy5jcmVhdGVBcnJheSgpKSB7XG4gICAgICAgIGlmIChvdXQubGVuZ3RoICUgdGhpcy5fY29tcG9uZW50Q291bnQgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb3V0Lmxlbmd0aCwgJHtvdXQubGVuZ3RofSBpcyBub3QgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlIHZlY3RvciBjb21wb25lbnRzLCAke3RoaXMuX2NvbXBvbmVudENvdW50fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLl90ZW1wQnVmZmVyR2V0dGVyKG91dC5sZW5ndGgpO1xuICAgICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuX2J1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgIGNvbnN0IGRlc3RTaXplID0gZWxlbWVudFNpemUgKiBvdXQubGVuZ3RoO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXRTaXplID0gdGhpcy5fZm9ybWF0U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3QgZGVzdEZvcm1hdFNpemUgPSB0aGlzLl9jb21wb25lbnRDb3VudCAqIGVsZW1lbnRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfYXR0cmlidXRlX3ZhbHVlcyh0aGlzLl9hdHRyaWJ1dGUsIHNyY0Zvcm1hdFNpemUsIHRoaXMuX29mZnNldCArIGluZGV4ICogdGhpcy5fc3RyaWRlLCB0aGlzLl9zdHJpZGUsIGRlc3RGb3JtYXRTaXplLCBkZXN0LmJ5dGVPZmZzZXQsIGRlc3RTaXplKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICBvdXRbaV0gPSBkZXN0W2ldO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYXR0cmlidXRlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaSBJbmRleFxuICAgICAqIEBwYXJhbSB2IFZhbHVlIHRvIHNldCB0aGUgZWxlbWVudCB0b1xuICAgICAqXG4gICAgICogYHYubGVuZ3RoYCBuZWVkcyB0byBiZSBhIG11bHRpcGxlIG9mIHRoZSBhdHRyaWJ1dGVzIGNvbXBvbmVudCBjb3VudCwgc2VlXG4gICAgICoge0BsaW5rIE1lc2hBdHRyaWJ1dGV9LiBJZiBgdi5sZW5ndGhgIGlzIG1vcmUgdGhhbiBvbmUgbXVsdGlwbGUsIGl0IHdpbGwgYmVcbiAgICAgKiBmaWxsZWQgd2l0aCB0aGUgbmV4dCBuIGF0dHJpYnV0ZSBlbGVtZW50cywgd2hpY2ggY2FuIHJlZHVjZSBvdmVyaGVhZFxuICAgICAqIG9mIHRoaXMgY2FsbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHNldChpLCB2KSB7XG4gICAgICAgIGlmICh2Lmxlbmd0aCAlIHRoaXMuX2NvbXBvbmVudENvdW50ICE9PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvdXQubGVuZ3RoLCAke3YubGVuZ3RofSBpcyBub3QgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlIHZlY3RvciBjb21wb25lbnRzLCAke3RoaXMuX2NvbXBvbmVudENvdW50fWApO1xuICAgICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuX2J1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgIGNvbnN0IHNyY1NpemUgPSBlbGVtZW50U2l6ZSAqIHYubGVuZ3RoO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXRTaXplID0gdGhpcy5fY29tcG9uZW50Q291bnQgKiBlbGVtZW50U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3QgZGVzdEZvcm1hdFNpemUgPSB0aGlzLl9mb3JtYXRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFVubGVzcyB3ZSBhcmUgYWxyZWFkeSB3b3JraW5nIHdpdGggZGF0YSBmcm9tIFdBU00gaGVhcCwgd2VcbiAgICAgICAgICogbmVlZCB0byBjb3B5IGludG8gdGVtcG9yYXJ5IG1lbW9yeS4gKi9cbiAgICAgICAgaWYgKHYuYnVmZmVyICE9IHdhc20uSEVBUFU4LmJ1ZmZlcikge1xuICAgICAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIodi5sZW5ndGgpO1xuICAgICAgICAgICAgZGVzdC5zZXQodik7XG4gICAgICAgICAgICB2ID0gZGVzdDtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9tZXNoX3NldF9hdHRyaWJ1dGVfdmFsdWVzKHRoaXMuX2F0dHJpYnV0ZSwgc3JjRm9ybWF0U2l6ZSwgdi5ieXRlT2Zmc2V0LCBzcmNTaXplLCBkZXN0Rm9ybWF0U2l6ZSwgdGhpcy5fb2Zmc2V0ICsgaSAqIHRoaXMuX3N0cmlkZSwgdGhpcy5fc3RyaWRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbn1cbi8qKiBUZW1wb3JhcnkgY2FudmFzICovXG5sZXQgdGVtcDJkID0gbnVsbDtcbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgdGV4dHVyZSBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVGV4dHVyZU1hbmFnZXIuY3JlYXRlfSBpbnN0ZWFkLCBhY2Nlc3NpYmxlIHZpYSB7QGxpbmsgU2NlbmVHcm91cC50ZXh0dXJlc306XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICogaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAqICAgICBjb25zdCB0ZXh0dXJlID0gc2NlbmVHcm91cC50ZXh0dXJlcy5jcmVhdGUoaW1hZ2UpO1xuICAgICAqIH07XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCwgcGFyYW0pIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBob3N0IGluc3RhbmNlb2YgU2NlbmVHcm91cCA/IGhvc3QgOiAoaG9zdCA/PyBXTCkuc2NlbmUuZ3JvdXA7XG4gICAgICAgIGlmIChpc0ltYWdlTGlrZShwYXJhbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBncm91cC50ZXh0dXJlcy5jcmVhdGUocGFyYW0pO1xuICAgICAgICAgICAgLyogYHN1cGVyKClgIG11c3QgYmUgY2FsbGVkIGFzIHN0YXRlZCBpbiB0aGUgc3BlY2lmaWNhdGlvbiAqL1xuICAgICAgICAgICAgc3VwZXIoZ3JvdXAsIHRleHR1cmUuX2luZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGdyb3VwLCBwYXJhbSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0ZXh0dXJlIGlzIHZhbGlkXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFNjZW5lUmVzb3VyY2UjaXNEZXN0cm95ZWR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHZhbGlkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNEZXN0cm95ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGV4IGluIHRoaXMgbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVGV4dHVyZS5pbmRleH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4O1xuICAgIH1cbiAgICAvKiogVXBkYXRlIHRoZSB0ZXh0dXJlIHRvIG1hdGNoIHRoZSBIVE1MIGVsZW1lbnQgKGUuZy4gcmVmbGVjdCB0aGUgY3VycmVudCBmcmFtZSBvZiBhIHZpZGVvKS4gKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5faW1hZ2VJZDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkIHx8ICFpbWFnZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLl9ob3N0LmlzQWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9yZW5kZXJlcl91cGRhdGVJbWFnZSh0aGlzLl9pbWFnZUlkKTtcbiAgICB9XG4gICAgLyoqIFdpZHRoIG9mIHRoZSB0ZXh0dXJlLiAqL1xuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgLyogSFRNTCB0ZXh0dXJlcyBzaG91bGQgYmUgcmVhZCBkaXJlY3RseSBmcm9tIGpzLCBzaW5jZSB0aGUgQysrIGNvdWxkIGJlXG4gICAgICAgICAqIG9uZSBmcmFtZSBvdXQtb2Ytc3luYyBvbiB0aGUgc2l6ZSBvZiB0aGUgZWxlbWVudCBpdHNlbGYuICovXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmh0bWxFbGVtZW50O1xuICAgICAgICBpZiAoZWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LndpZHRoO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfaW1hZ2Vfc2l6ZSh0aGlzLl9pbWFnZUlkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgfVxuICAgIC8qKiBIZWlnaHQgb2YgdGhlIHRleHR1cmUuICovXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgLyogSFRNTCB0ZXh0dXJlcyBzaG91bGQgYmUgcmVhZCBkaXJlY3RseSBmcm9tIGpzLCBzaW5jZSB0aGUgQysrIGNvdWxkIGJlXG4gICAgICAgICAqIG9uZSBmcmFtZSBvdXQtb2Ytc3luYyBvbiB0aGUgc2l6ZSBvZiB0aGUgZWxlbWVudCBpdHNlbGYuICovXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmh0bWxFbGVtZW50O1xuICAgICAgICBpZiAoZWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmhlaWdodDtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2ltYWdlX3NpemUodGhpcy5faW1hZ2VJZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtVWludDMyWzFdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBodG1sIGVsZW1lbnQgYXNzb2NpYXRlZCB0byB0aGlzIHRleHR1cmUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFjY2Vzc29yIHdpbGwgcmV0dXJuIGBudWxsYCBpZiB0aGUgaW1hZ2UgaXMgY29tcHJlc3NlZC5cbiAgICAgKi9cbiAgICBnZXQgaHRtbEVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5faW1hZ2VJZDtcbiAgICAgICAgaWYgKCFpbWFnZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QganNJbWFnZUluZGV4ID0gd2FzbS5fd2xfaW1hZ2VfZ2V0X2pzSW1hZ2VfaW5kZXgoaW1hZ2UpO1xuICAgICAgICAvKiBTaW5jZSB0aGUgZmlyc3QgZWxlbWVudCBpcyBgbnVsbGAsIG5vIG5lZWQgdG8gY2hlY2sgZm9yIGBqc0ltYWdlSW5kZXhgICovXG4gICAgICAgIHJldHVybiB3YXNtLl9pbWFnZXNbanNJbWFnZUluZGV4XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGEgc3VicmFuZ2Ugb24gdGhlIHRleHR1cmUgdG8gbWF0Y2ggdGhlIEhUTUwgZWxlbWVudCAoZS5nLiByZWZsZWN0IHRoZSBjdXJyZW50IGZyYW1lIG9mIGEgdmlkZW8pLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIENvcGllcyByZWN0YW5nbGUgb2YgcGl4ZWwgc3RhcnRpbmcgZnJvbSAoMTAsIDIwKVxuICAgICAqIHRleHR1cmUudXBkYXRlU3ViSW1hZ2UoMTAsIDIwLCA2MDAsIDQwMCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCB4IG9mZnNldFxuICAgICAqIEBwYXJhbSB5IHkgb2Zmc2V0XG4gICAgICogQHBhcmFtIHcgd2lkdGhcbiAgICAgKiBAcGFyYW0gaCBoZWlnaHRcbiAgICAgKi9cbiAgICB1cGRhdGVTdWJJbWFnZSh4LCB5LCB3LCBoKSB7XG4gICAgICAgIC8vIFRPRE86IENoZWNrIHRoYXQgcm9vdCBpcyBhY3RpdmUuXG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2ltYWdlSWQ7XG4gICAgICAgIGlmICghaW1hZ2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBqc0ltYWdlSW5kZXggPSB3YXNtLl93bF9pbWFnZV9nZXRfanNJbWFnZV9pbmRleChpbWFnZSk7XG4gICAgICAgIC8qIExhenkgaW5pdGlhbGl6ZSB0ZW1wIGNhbnZhcyAqL1xuICAgICAgICBpZiAoIXRlbXAyZCkge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXh0dXJlLnVwZGF0ZVN1YkltYWdlKCk6IEZhaWxlZCB0byBvYnRhaW4gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGVtcDJkID0ge1xuICAgICAgICAgICAgICAgIGNhbnZhcyxcbiAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGltZyA9IHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdO1xuICAgICAgICBpZiAoIWltZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyoqIEB0b2RvOiBJZiB0aGUgaW1hZ2UgaXMgYW4gaW5zdGFuY2Ugb2YgY2FudmFzLCB0aGlzXG4gICAgICAgICAqIGNhbiBiZSBza2lwcGVkIGVudGlyZWx5LiAqL1xuICAgICAgICB0ZW1wMmQuY2FudmFzLndpZHRoID0gdztcbiAgICAgICAgdGVtcDJkLmNhbnZhcy5oZWlnaHQgPSBoO1xuICAgICAgICB0ZW1wMmQuY3R4LmRyYXdJbWFnZShpbWcsIHgsIHksIHcsIGgsIDAsIDAsIHcsIGgpO1xuICAgICAgICBjb25zdCB5T2Zmc2V0ID0gKGltZy52aWRlb0hlaWdodCA/PyBpbWcuaGVpZ2h0KSAtIHkgLSBoO1xuICAgICAgICB3YXNtLl9pbWFnZXNbanNJbWFnZUluZGV4XSA9IHRlbXAyZC5jYW52YXM7XG4gICAgICAgIHdhc20uX3dsX3JlbmRlcmVyX3VwZGF0ZUltYWdlKGltYWdlLCB4LCB5T2Zmc2V0KTtcbiAgICAgICAgd2FzbS5faW1hZ2VzW2pzSW1hZ2VJbmRleF0gPSBpbWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIHRleHR1cmUncyB0ZXh0dXJlIGFsdGFzIHNwYWNlIGFuZCBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgdGV4dHVyZSB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZSBvZiB0aGUgaW52YWxpZCB0ZXh0dXJlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIHRleHR1cmUuZGVzdHJveSgpO1xuICAgICAqICAgdGV4dHVyZSA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfdGV4dHVyZV9kZXN0cm95KHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5faG9zdC50ZXh0dXJlcy5fZGVzdHJveSh0aGlzKTtcbiAgICB9XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdUZXh0dXJlKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgVGV4dHVyZSgke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbiAgICAvKiogSW1hZ2UgaW5kZXguIEBoaWRkZW4gKi9cbiAgICBnZXQgX2ltYWdlSWQoKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dHVyZV9nZXRfaW1hZ2VfaW5kZXgodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gU2NlbmVSZXNvdXJjZS5fcGFjayh0aGlzLl9ob3N0Ll9pbmRleCwgaW5kZXgpO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgYW5pbWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uIGV4dGVuZHMgU2NlbmVSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IGluIHRoZSBtYW5hZ2VyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCA9IFdMLCBpbmRleCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGhvc3QgaW5zdGFuY2VvZiBTY2VuZUxpa2UgPyBob3N0IDogaG9zdC5zY2VuZTtcbiAgICAgICAgc3VwZXIoc2NlbmUsIGluZGV4KTtcbiAgICB9XG4gICAgLyoqIER1cmF0aW9uIG9mIHRoaXMgYW5pbWF0aW9uLiAqL1xuICAgIGdldCBkdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9nZXRfZHVyYXRpb24odGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIHRyYWNrcyBpbiB0aGlzIGFuaW1hdGlvbi4gKi9cbiAgICBnZXQgdHJhY2tDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9nZXRfdHJhY2tDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lIHRoaXMgYW5pbWF0aW9uIHJldGFyZ2V0ZWQgdG8gYSBuZXcgc2V0IG9mIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBUaGUgY2xvbmUgc2hhcmVzIG1vc3Qgb2YgdGhlIGRhdGEgd2l0aCB0aGUgb3JpZ2luYWwgYW5kIGlzIHRoZXJlZm9yZVxuICAgICAqIGxpZ2h0LXdlaWdodC5cbiAgICAgKlxuICAgICAqICoqRXhwZXJpbWVudGFsOioqIFRoaXMgQVBJIG1pZ2h0IGNoYW5nZSBpbiB1cGNvbWluZyB2ZXJzaW9ucy5cbiAgICAgKlxuICAgICAqIElmIHJldGFyZ2V0aW5nIHRvIHtAbGluayBTa2lufSwgdGhlIGpvaW4gbmFtZXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSBhIG1hcHBpbmdcbiAgICAgKiBmcm9tIHRoZSBwcmV2aW91cyBza2luIHRvIHRoZSBuZXcgc2tpbi4gVGhlIHNvdXJjZSBza2luIHdpbGwgYmUgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgZmlyc3QgdHJhY2sgaW4gdGhlIGFuaW1hdGlvbiB0aGF0IHRhcmdldHMgYSBqb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdUYXJnZXRzIE5ldyB0YXJnZXRzIHBlciB0cmFjay4gRXhwZWN0ZWQgdG8gaGF2ZVxuICAgICAqICAgICAge0BsaW5rIEFuaW1hdGlvbiN0cmFja0NvdW50fSBlbGVtZW50cyBvciB0byBiZSBhIHtAbGluayBTa2lufS5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmV0YXJnZXRlZCBjbG9uZSBvZiB0aGlzIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICByZXRhcmdldChuZXdUYXJnZXRzKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBpZiAobmV3VGFyZ2V0cyBpbnN0YW5jZW9mIFNraW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX3JldGFyZ2V0VG9Ta2luKHRoaXMuX2lkLCBuZXdUYXJnZXRzLl9pZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faG9zdC5hbmltYXRpb25zLndyYXAoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdUYXJnZXRzLmxlbmd0aCAhPSB0aGlzLnRyYWNrQ291bnQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdFeHBlY3RlZCAnICtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrQ291bnQudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAgICAgJyB0YXJnZXRzLCBidXQgZ290ICcgK1xuICAgICAgICAgICAgICAgIG5ld1RhcmdldHMubGVuZ3RoLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX21hbGxvYygyICogbmV3VGFyZ2V0cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1RhcmdldHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdDNkID0gbmV3VGFyZ2V0c1tpXTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKG9iamVjdDNkKTtcbiAgICAgICAgICAgIC8qIFVzZSBsb2NhbCBpZCBoZXJlIGFuZCAqKm5vdCoqIHBhY2tlZCBpZCwgYmVjYXVzZSB0aGUgV0FTTVxuICAgICAgICAgICAgICogdGFrZXMgb3duZXJzaGlwIGFuZCByZWludGVycHJldHMgdGhlIGlkcy4gKi9cbiAgICAgICAgICAgIHdhc20uSEVBUFUxNltwdHIgPj4gKDEgKyBpKV0gPSBuZXdUYXJnZXRzW2ldLm9iamVjdElkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX3JldGFyZ2V0KHRoaXMuX2lkLCBwdHIpO1xuICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgIHJldHVybiB0aGlzLl9ob3N0LmFuaW1hdGlvbnMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnQW5pbWF0aW9uKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgQW5pbWF0aW9uKCR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIHNjZW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3Q7XG4gICAgfVxufVxuLyoqXG4gKiBTY2VuZSBncmFwaCBvYmplY3QuXG4gKlxuICogTm9kZSBpbiB0aGUgc2NlbmUgZ3JhcGggb3IgXCJlbnRpdHlcIi4gQ29uc2lzdHMgb2YgdHJhbnNmb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlXG4gKiB0byBpdHMgcGFyZW50IG9iamVjdC4gVXN1YWxseSBob2xkcyBjb21wb25lbnRzIGFuZCBpcyBhY2Nlc3NpYmxlIGJ5IGNvbXBvbmVudHNcbiAqIHRocm91Z2gge0BsaW5rIENvbXBvbmVudCNvYmplY3R9LlxuICpcbiAqIE9iamVjdHMgYXJlIHN0b3JlZCBpbiBhIGRhdGEgb3JpZW50ZWQgbWFubmVyIGluc2lkZSBXZWJBc3NlbWJseSBtZW1vcnkuIFRoaXMgY2xhc3NcbiAqIGlzIGEgSmF2YVNjcmlwdCBBUEkgd3JhcHBlciBhcm91bmQgdGhpcyBtZW1vcnkgZm9yIG1vcmUgY29udmVuaWVudCB1c2UgaW5cbiAqIGNvbXBvbmVudHMuXG4gKlxuICogT2JqZWN0cyBjYW4gYmUgY3JlYXRlZCBhbmQgYWRkZWQgdG8gYSBzY2VuZSB0aHJvdWdoXG4gKiB7QGxpbmsgU2NlbmUjYWRkT2JqZWN0fSBvbiB0aGUge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc2NlbmV9LlxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0M0Qge1xuICAgIC8qKlxuICAgICAqIFBhY2tlZCBvYmplY3QgaWQsIGNvbnRhaW5pbmcgc2NlbmUgaW5kZXggYW5kIGxvY2FsIGlkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9pZCA9IC0xO1xuICAgIC8qKiBPYmplY3QgaWQsIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgX2xvY2FsSWQgPSAtMTtcbiAgICAvKiogU2NlbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfc2NlbmU7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbyBPYmplY3QgaWQgdG8gd3JhcC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIE9iamVjdHMgbXVzdCBiZSBvYnRhaW5lZCB2aWEge0BsaW5rIFNjZW5lLmFkZE9iamVjdH0gb3Ige0BsaW5rIFNjZW5lLndyYXB9OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0LlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqXG4gICAgICogLy8gV3JhcCBhbiBvYmplY3QgdXNpbmcgaXRzIGlkLiBUaGUgaWQgbXVzdCBiZSB2YWxpZC5cbiAgICAgKiBjb25zdCBvYmogPSBzY2VuZS53cmFwKDApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBpZCkge1xuICAgICAgICBzY2VuZSA9IHNjZW5lLnNjZW5lID8/IHNjZW5lO1xuICAgICAgICB0aGlzLl9sb2NhbElkID0gaWQ7XG4gICAgICAgIHRoaXMuX2lkID0gKHNjZW5lLl9pbmRleCA8PCAyMikgfCBpZDtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgLyoqIEB0b2RvOiBSZW1vdmUgYW5kIG9ubHkga2VlcCBnZXR0ZXIuICovXG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IHNjZW5lLmVuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogVXNlZnVsIGZvciBpZGVudGlmeWluZyBvYmplY3RzIGR1cmluZyBkZWJ1Z2dpbmcuXG4gICAgICovXG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX29iamVjdF9uYW1lKHRoaXMuX2lkKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2JqZWN0J3MgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdOYW1lIFRoZSBuZXcgbmFtZSB0byBzZXQuXG4gICAgICovXG4gICAgc2V0IG5hbWUobmV3TmFtZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX29iamVjdF9zZXRfbmFtZSh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOChuZXdOYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcmVudCBvZiB0aGlzIG9iamVjdCBvciBgbnVsbGAgaWYgcGFyZW50ZWQgdG8gcm9vdC5cbiAgICAgKi9cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCBwID0gdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9wYXJlbnQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gcCA9PT0gMCA/IG51bGwgOiB0aGlzLl9zY2VuZS53cmFwKHApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBPYmplY3QzRC5nZXRDaGlsZHJlbn0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBPYmplY3QzRC5nZXRDaGlsZHJlbn0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBjaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRyZW4oKTtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgY2hpbGRyZW4gb2YgdGhpcyBvYmplY3QuICovXG4gICAgZ2V0IGNoaWxkcmVuQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X2dldF9jaGlsZHJlbl9jb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGFyZW50IG9iamVjdCB0byBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBSZXBhcmVudGluZyBpcyBub3QgdHJpdmlhbCBhbmQgbWlnaHQgaGF2ZSBhIG5vdGljZWFibGUgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld1BhcmVudCBOZXcgcGFyZW50IG9yIGBudWxsYCB0byBwYXJlbnQgdG8gcm9vdFxuICAgICAqL1xuICAgIHNldCBwYXJlbnQobmV3UGFyZW50KSB7XG4gICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKG5ld1BhcmVudCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3BhcmVudCh0aGlzLl9pZCwgbmV3UGFyZW50ID09IG51bGwgPyAwIDogbmV3UGFyZW50Ll9pZCk7XG4gICAgfVxuICAgIC8qKiBMb2NhbCBvYmplY3QgaWQgaW4gdGhlIHNjZW5lIG1hbmFnZXIuICovXG4gICAgZ2V0IG9iamVjdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxJZDtcbiAgICB9XG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmUgdGhpcyBoaWVyYXJjaHkgaW50byBhIG5ldyBvbmUuXG4gICAgICpcbiAgICAgKiBDbG9uaW5nIGNvcGllcyB0aGUgaGllcmFyY2h5IHN0cnVjdHVyZSwgb2JqZWN0IG5hbWVzLFxuICAgICAqIGFzIHdlbGwgYXMgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEphdmFTY3JpcHQgY29tcG9uZW50cyBhcmUgY2xvbmVkIHVzaW5nIHtAbGluayBDb21wb25lbnQuY29weX0uIFlvdSBjYW5cbiAgICAgKiBvdmVycmlkZSB0aGlzIG1ldGhvZCBpbiB5b3VyIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgZm9yIHRoZSBjbG9uZWQgaGllcmFyY2h5IG9yIGBudWxsYCB0byBjbG9uZVxuICAgICAqICAgICBpbnRvIHRoZSBzY2VuZSByb290LiBEZWZhdWx0cyB0byBgbnVsbGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY2xvbmUgb2YgdGhpcyBvYmplY3QuXG4gICAgICovXG4gICAgY2xvbmUocGFyZW50ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihwYXJlbnQpO1xuICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLl9lbmdpbmU7XG4gICAgICAgIGNvbnN0IGlkID0gZW5naW5lLndhc20uX3dsX29iamVjdF9jbG9uZSh0aGlzLl9pZCwgcGFyZW50ID8gcGFyZW50Ll9pZCA6IDApO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUud3JhcChpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoaWxkcmVuIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQ2hpbGQgb3JkZXIgaXMgKip1bmRlZmluZWQqKi4gTm8gYXNzdW1wdGlvbnMgc2hvdWxkIGJlIG1hZGVcbiAgICAgKiBhYm91dCB0aGUgaW5kZXggb2YgYSBzcGVjaWZpYyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgYSBzcGVjaWZpYyBjaGlsZCBvZiB0aGlzIG9iamVjdCwgeW91IGNhblxuICAgICAqIHVzZSB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZX0uXG4gICAgICpcbiAgICAgKiBXaGVuIHRoZSBvYmplY3QgZXhpc3RzIGluIHRoZSBzY2VuZSBhdCBlZGl0b3IgdGltZSwgcHJlZmVyIHBhc3NpbmcgaXQgYXNcbiAgICAgKiBhIGNvbXBvbmVudCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBub3RlIFdoZW4gcHJvdmlkaW5nIGFuIG91dHB1dCBhcnJheSwgb25seSBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cyB3aWxsIGJlIHdyaXR0ZW4uXG4gICAgICogVGhlIHJlc3Qgb2YgdGhlIGFycmF5IHdpbGwgbm90IGJlIG1vZGlmaWVkIGJ5IHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldENoaWxkcmVuKG91dCA9IG5ldyBBcnJheSh0aGlzLmNoaWxkcmVuQ291bnQpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuQ291bnQgPSB0aGlzLmNoaWxkcmVuQ291bnQ7XG4gICAgICAgIGlmIChjaGlsZHJlbkNvdW50ID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLnJlcXVpcmVUZW1wTWVtKGNoaWxkcmVuQ291bnQgKiAyKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW4odGhpcy5faWQsIHdhc20uX3RlbXBNZW0sIHdhc20uX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gdGhpcy5fc2NlbmUud3JhcCh3YXNtLl90ZW1wTWVtVWludDE2W2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCB0cmFuc2Zvcm1hdGlvbiAodHJhbnNsYXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nKSB0byBpZGVudGl0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFRyYW5zZm9ybSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbl9yb3RhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfc2NhbGluZyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gaWRlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRQb3NpdGlvblJvdGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uX3JvdGF0aW9uKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yZXNldFBvc2l0aW9uUm90YXRpb259IGluc3RlYWQuICovXG4gICAgcmVzZXRUcmFuc2xhdGlvblJvdGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgcm90YXRpb24sIGtlZXAgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUbyByZXNldCBib3RoIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiwgcHJlZmVyXG4gICAgICogICAgICAge0BsaW5rIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRSb3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9yb3RhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCB0cmFuc2xhdGlvbiwga2VlcCByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBub3RlIFRvIHJlc2V0IGJvdGggcm90YXRpb24gYW5kIHRyYW5zbGF0aW9uLCBwcmVmZXJcbiAgICAgKiAgICAgICB7QGxpbmsgcmVzZXRUcmFuc2xhdGlvblJvdGF0aW9ufS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFBvc2l0aW9uKCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yZXNldFBvc2l0aW9ufSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0VHJhbnNsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0UG9zaXRpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgc2NhbGluZyB0byBpZGVudGl0eSAoYGBbMS4wLCAxLjAsIDEuMF1gYCkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRTY2FsaW5nKCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3NjYWxpbmcodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnRyYW5zbGF0ZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHRyYW5zbGF0ZSh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZUxvY2FsKHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIHRoZSBwYXJlbnQncyBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2xhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgdHJhbnNsYXRlTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zbGF0ZSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2xhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgdHJhbnNsYXRlT2JqZWN0KHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc2xhdGVfb2JqKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBvYmplY3QgYnkgYSB2ZWN0b3IgaW4gd29ybGQgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZVdvcmxkKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc2xhdGVfd29ybGQodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUF4aXNBbmdsZURlZ0xvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZURlZyhhLCBkKSB7XG4gICAgICAgIHRoaXMucm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoYSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlIG9iamVjdCBpcyB0cmFuc2xhdGVkIHRoZSByb3RhdGlvbiB3aWxsIGJlIGFyb3VuZFxuICAgICAqICAgICB0aGUgcGFyZW50LiBUbyByb3RhdGUgYXJvdW5kIHRoZSBvYmplY3Qgb3JpZ2luLCB1c2VcbiAgICAgKiAgICAge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZVJhZH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWdMb2NhbChhLCBkKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGUodGhpcy5faWQsIGFbMF0sIGFbMV0sIGFbMl0sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZChhLCBkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKGEsIGQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKHJhZGlhbnMpIGluIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiByYWRpYW5zLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlIG9iamVjdCBpcyB0cmFuc2xhdGVkIHRoZSByb3RhdGlvbiB3aWxsIGJlIGFyb3VuZFxuICAgICAqICAgICB0aGUgcGFyZW50LiBUbyByb3RhdGUgYXJvdW5kIHRoZSBvYmplY3Qgb3JpZ2luLCB1c2VcbiAgICAgKiAgICAge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ31cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChhLCBkKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfcmFkKHRoaXMuX2lkLCBhWzBdLCBhWzFdLCBhWzJdLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBhcm91bmQgZ2l2ZW4gYXhpcyBieSBnaXZlbiBhbmdsZSAoZGVncmVlcykgaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogRXF1aXZhbGVudCB0byBwcmVwZW5kaW5nIGEgcm90YXRpb24gcXVhdGVybmlvbiB0byB0aGUgb2JqZWN0J3NcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3QoYSwgZCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX29iaih0aGlzLl9pZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKHJhZGlhbnMpIGluIG9iamVjdCBzcGFjZVxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSBWZWN0b3IgcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbiBheGlzXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlc1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0fVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChhLCBkKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfcmFkX29iaih0aGlzLl9pZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Qucm90YXRlTG9jYWx9IGluc3RlYWQuICovXG4gICAgcm90YXRlKHEpIHtcbiAgICAgICAgdGhpcy5yb3RhdGVMb2NhbChxKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBieSBhIHF1YXRlcm5pb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcSB0aGUgUXVhdGVybmlvbiB0byByb3RhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlTG9jYWwocSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9xdWF0KHRoaXMuX2lkLCBxWzBdLCBxWzFdLCBxWzJdLCBxWzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBieSBhIHF1YXRlcm5pb24gaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogRXF1aXZhbGVudCB0byBwcmVwZW5kaW5nIGEgcm90YXRpb24gcXVhdGVybmlvbiB0byB0aGUgb2JqZWN0J3NcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxIHRoZSBRdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVPYmplY3QocSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9xdWF0X29iaih0aGlzLl9pZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2NhbGVMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICBzY2FsZSh2KSB7XG4gICAgICAgIHRoaXMuc2NhbGVMb2NhbCh2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjYWxlIG9iamVjdCBieSBhIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gc2NhbGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2NhbGVMb2NhbCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2NhbGUodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25Mb2NhbChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgLyogVHJhbnNsYXRpb24gaXMgZGlmZmVyZW50IHRoYW4gcm90YXRpb24gJiBzY2FsaW5nLlxuICAgICAgICAgKiBXZSBjYW4ndCBzaW1wbHkgcmVhZCB0aGUgbWVtb3J5LiAqL1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfZ2V0X3RyYW5zbGF0aW9uX2xvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZ2V0VHJhbnNsYXRpb25Mb2NhbChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uTG9jYWwob3V0KTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgLyogVHJhbnNsYXRpb24gaXMgZGlmZmVyZW50IHRoYW4gcm90YXRpb24gJiBzY2FsaW5nLlxuICAgICAgICAgKiBXZSBjYW4ndCBzaW1wbHkgcmVhZCB0aGUgbWVtb3J5LiAqL1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfZ2V0X3RyYW5zbGF0aW9uX3dvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZ2V0VHJhbnNsYXRpb25Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uV29ybGQob3V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIC8gb2JqZWN0IHNwYWNlIHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQ29uY2F0ZW5hdGVzIGEgbmV3IHRyYW5zbGF0aW9uIGR1YWwgcXVhdGVybmlvbiBvbnRvIHRoZSBleGlzdGluZyByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBsb2NhbCBwb3NpdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbkxvY2FsKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfdHJhbnNsYXRpb25fbG9jYWwodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFBvc2l0aW9uTG9jYWx9IGluc3RlYWQuICovXG4gICAgc2V0VHJhbnNsYXRpb25Mb2NhbCh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldFBvc2l0aW9uTG9jYWwodik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEFwcGxpZXMgdGhlIGludmVyc2UgcGFyZW50IHRyYW5zZm9ybSB3aXRoIGEgbmV3IHRyYW5zbGF0aW9uIGR1YWwgcXVhdGVybmlvblxuICAgICAqIHdoaWNoIGlzIGNvbmNhdGVuYXRlZCBvbnRvIHRoZSBleGlzdGluZyByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCBwb3NpdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbldvcmxkKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfdHJhbnNsYXRpb25fd29ybGQodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFBvc2l0aW9uV29ybGR9IGluc3RlYWQuICovXG4gICAgc2V0VHJhbnNsYXRpb25Xb3JsZCh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldFBvc2l0aW9uV29ybGQodik7XG4gICAgfVxuICAgIGdldFNjYWxpbmdMb2NhbChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIC8gb2JqZWN0IHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbG9jYWwgc2NhbGluZyBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRTY2FsaW5nTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9zY2FsaW5nX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFNjYWxpbmdXb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGQodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IFdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgc2NhbGluZyBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRTY2FsaW5nV29ybGQodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9zY2FsaW5nX3dvcmxkKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFJvdGF0aW9uTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgLyogVGhlIGZpcnN0IDQgZmxvYXRzIHJlcHJlc2VudCB0aGUgcm90YXRpb24gcXVhdGVybmlvbi4gKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCByb3RhdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgNCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRSb3RhdGlvbkxvY2FsKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWwodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0Um90YXRpb25Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICAvKiBUaGUgZmlyc3QgNCBmbG9hdHMgcmVwcmVzZW50IHRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uLiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHJvdGF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFJvdGF0aW9uV29ybGQodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9yb3RhdGlvbl93b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRUcmFuc2Zvcm1Mb2NhbChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDgpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5IRUFQRjMyW3B0ciArIDRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uSEVBUEYzMltwdHIgKyA2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5IRUFQRjMyW3B0ciArIDddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbG9jYWwgdHJhbnNmb3JtIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDggZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0VHJhbnNmb3JtTG9jYWwodikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSB2WzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgM10gPSB2WzNdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNF0gPSB2WzRdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNV0gPSB2WzVdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNl0gPSB2WzZdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgN10gPSB2WzddO1xuICAgICAgICB0aGlzLnNldERpcnR5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRUcmFuc2Zvcm1Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDgpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5IRUFQRjMyW3B0ciArIDRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uSEVBUEYzMltwdHIgKyA2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5IRUFQRjMyW3B0ciArIDddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgdHJhbnNmb3JtIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDggZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0VHJhbnNmb3JtV29ybGQodikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSB2WzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgM10gPSB2WzNdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNF0gPSB2WzRdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNV0gPSB2WzVdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNl0gPSB2WzZdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgN10gPSB2WzddO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkX3RvX2xvY2FsKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNmb3JtTG9jYWwoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMuX2lkKSwgOCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBMb2NhbCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgdHJhbnNmb3JtTG9jYWwodCkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUxvY2FsLnNldCh0KTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIE1heSByZWNvbXB1dGUgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBoaWVyYXJjaHkgb2YgdGhpcyBvYmplY3QsXG4gICAgICogaWYgdGhleSB3ZXJlIGNoYW5nZWQgYnkgSmF2YVNjcmlwdCBjb21wb25lbnRzIHRoaXMgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybVdvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0cmFuc2Zvcm1Xb3JsZCgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGQodGhpcy5faWQpLCA4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IEdsb2JhbCAvIHdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybVdvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCB0cmFuc2Zvcm1Xb3JsZCh0KSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtV29ybGQuc2V0KHQpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkX3RvX2xvY2FsKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9jYWwgLyBvYmplY3Qgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdMb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdMb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgc2NhbGluZ0xvY2FsKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsKHRoaXMuX2lkKSwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHMgTG9jYWwgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0U2NhbGluZ0xvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0U2NhbGluZ0xvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCBzY2FsaW5nTG9jYWwocykge1xuICAgICAgICB0aGlzLnNjYWxpbmdMb2NhbC5zZXQocyk7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2xvYmFsIC8gd29ybGQgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIE1heSByZWNvbXB1dGUgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBoaWVyYXJjaHkgb2YgdGhpcyBvYmplY3QsXG4gICAgICogaWYgdGhleSB3ZXJlIGNoYW5nZWQgYnkgSmF2YVNjcmlwdCBjb21wb25lbnRzIHRoaXMgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHNjYWxpbmdXb3JsZCgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ193b3JsZCh0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IFdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdXb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdXb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgc2NhbGluZ1dvcmxkKHMpIHtcbiAgICAgICAgdGhpcy5zY2FsaW5nV29ybGQuc2V0KHMpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGRfdG9fbG9jYWwodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uTG9jYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUxvY2FsLnN1YmFycmF5KDAsIDQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSByb3RhdGlvblxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbldvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb25Xb3JsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtV29ybGQuc3ViYXJyYXkoMCwgNCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIExvY2FsIHNwYWNlIHJvdGF0aW9uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFJvdGF0aW9uTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5zZXRSb3RhdGlvbkxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCByb3RhdGlvbkxvY2FsKHIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWwodGhpcy5faWQsIHJbMF0sIHJbMV0sIHJbMl0sIHJbM10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gciBHbG9iYWwgLyB3b3JsZCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHJvdGF0aW9uV29ybGQocikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9yb3RhdGlvbl93b3JsZCh0aGlzLl9pZCwgclswXSwgclsxXSwgclsyXSwgclszXSk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRGb3J3YXJkV29ybGR9IGluc3RlYWQuICovXG4gICAgZ2V0Rm9yd2FyZChvdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9yd2FyZFdvcmxkKG91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgdGhlIG9iamVjdCdzIGZvcndhcmQgZmFjaW5nIHdvcmxkIHNwYWNlIHZlY3Rvci5cbiAgICAgKlxuICAgICAqIFRoZSBmb3J3YXJkIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UgaXMgYWxvbmcgdGhlIG5lZ2F0aXZlIHotYXhpcywgaS5lLixcbiAgICAgKiBgWzAsIDAsIC0xXWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRGb3J3YXJkV29ybGQob3V0KSB7XG4gICAgICAgIG91dFswXSA9IDA7XG4gICAgICAgIG91dFsxXSA9IDA7XG4gICAgICAgIG91dFsyXSA9IC0xO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVZlY3RvcldvcmxkKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRVcFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldFVwKG91dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVcFdvcmxkKG91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgdGhlIG9iamVjdCdzIHVwIGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRVcFdvcmxkKG91dCkge1xuICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICBvdXRbMV0gPSAxO1xuICAgICAgICBvdXRbMl0gPSAwO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVZlY3RvcldvcmxkKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSaWdodFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldFJpZ2h0KG91dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSaWdodFdvcmxkKG91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgdGhlIG9iamVjdCdzIHJpZ2h0IGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRSaWdodFdvcmxkKG91dCkge1xuICAgICAgICBvdXRbMF0gPSAxO1xuICAgICAgICBvdXRbMV0gPSAwO1xuICAgICAgICBvdXRbMl0gPSAwO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVZlY3RvcldvcmxkKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHZlY3RvciBieSB0aGlzIG9iamVjdCdzIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3RvclxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQsIHYgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9yV29ybGQodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yTG9jYWwob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgcG9pbnQgYnkgdGhpcyBvYmplY3QncyB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRXb3JsZChvdXQsIHAgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSBwWzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSBwWzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSBwWzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtUG9pbnRXb3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50TG9jYWwob3V0LCBwID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gcFswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gcFsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gcFsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50TG9jYWwodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckludmVyc2VXb3JsZChvdXQsIHYgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgdmVjdG9yIGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9ySW52ZXJzZUxvY2FsKG91dCwgdiA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHZbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHZbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHZbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1WZWN0b3JJbnZlcnNlTG9jYWwodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGludmVyc2Ugd29ybGQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKG91dCwgcCA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRJbnZlcnNlTG9jYWwob3V0LCBwID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChwKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGFuIG9iamVjdCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byB3b3JsZCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSBxIExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRvV29ybGRTcGFjZVRyYW5zZm9ybShvdXQsIHEgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc2V0KHEpO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdG9Xb3JsZFNwYWNlVHJhbnNmb3JtKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICBvdXRbNF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbN107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHdvcmxkIHNwYWNlIGR1YWwgcXVhdGVybmlvbiBpbnRvIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdHJhbnNmb3JtYXRpb25cbiAgICAgKiBAcGFyYW0gcSBXb3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRvTG9jYWxTcGFjZVRyYW5zZm9ybShvdXQsIHEgPSBvdXQpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMucGFyZW50O1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgcC50b09iamVjdFNwYWNlVHJhbnNmb3JtKG91dCwgcSk7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXQgIT09IHEpIHtcbiAgICAgICAgICAgIG91dFswXSA9IHFbMF07XG4gICAgICAgICAgICBvdXRbMV0gPSBxWzFdO1xuICAgICAgICAgICAgb3V0WzJdID0gcVsyXTtcbiAgICAgICAgICAgIG91dFszXSA9IHFbM107XG4gICAgICAgICAgICBvdXRbNF0gPSBxWzRdO1xuICAgICAgICAgICAgb3V0WzVdID0gcVs1XTtcbiAgICAgICAgICAgIG91dFs2XSA9IHFbNl07XG4gICAgICAgICAgICBvdXRbN10gPSBxWzddO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHdvcmxkIHNwYWNlIGR1YWwgcXVhdGVybmlvbiBpbnRvIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSBxIFdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdG9PYmplY3RTcGFjZVRyYW5zZm9ybShvdXQsIHEgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc2V0KHEpO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdG9PYmplY3RTcGFjZVRyYW5zZm9ybSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJuIHRvd2FyZHMgLyBsb29rIGF0IHRhcmdldC5cbiAgICAgKlxuICAgICAqIFJvdGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGl0cyBmb3J3YXJkIHZlY3RvciBmYWNlcyB0b3dhcmRzIHRoZSB0YXJnZXRcbiAgICAgKiBwb3NpdGlvbi4gVGhlIGB1cGAgdmVjdG9yIGFjdHMgYXMgYSBoaW50IHRvIHVuaXF1ZWx5IG9yaWVudCB0aGUgb2JqZWN0J3NcbiAgICAgKiB1cCBkaXJlY3Rpb24uIFdoZW4gb3JpZW50aW5nIGEgdmlldyBjb21wb25lbnQsIHRoZSBwcm9qZWN0ZWQgYHVwYCB2ZWN0b3JcbiAgICAgKiBmYWNlcyB1cHdhcmRzIG9uIHRoZSB2aWV3aW5nIHBsYW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHAgVGFyZ2V0IHBvc2l0aW9uIHRvIHR1cm4gdG93YXJkcywgaW4gd29ybGQgc3BhY2UuXG4gICAgICogQHBhcmFtIHVwIFVwIHZlY3RvciB0byBhbGlnbiBvYmplY3Qgd2l0aCwgaW4gd29ybGQgc3BhY2UuIERlZmF1bHQgaXMgYFswLCAxLCAwXWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgbG9va0F0KHAsIHVwID0gVVBfVkVDVE9SKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfbG9va0F0KHRoaXMuX2lkLCBwWzBdLCBwWzFdLCBwWzJdLCB1cFswXSwgdXBbMV0sIHVwWzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBEZXN0cm95IHRoZSBvYmplY3Qgd2l0aCBhbGwgb2YgaXRzIGNvbXBvbmVudHMgYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBzY2VuZSAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl9pZCA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX29iamVjdF9yZW1vdmUodGhpcy5faWQpO1xuICAgICAgICB0aGlzLnNjZW5lLl9kZXN0cm95T2JqZWN0KHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrIHRyYW5zZm9ybWF0aW9uIGRpcnR5LlxuICAgICAqXG4gICAgICogQ2F1c2VzIGFuIGV2ZW50dWFsIHJlY2FsY3VsYXRpb24gb2Yge0BsaW5rIHRyYW5zZm9ybVdvcmxkfSwgZWl0aGVyXG4gICAgICogb24gbmV4dCB7QGxpbmsgZ2V0VHJhbnNsYXRpb25Xb3JsZH0sIHtAbGluayB0cmFuc2Zvcm1Xb3JsZH0gb3JcbiAgICAgKiB7QGxpbmsgc2NhbGluZ1dvcmxkfSBvciB0aGUgYmVnaW5uaW5nIG9mIG5leHQgZnJhbWUsIHdoaWNoZXZlclxuICAgICAqIGhhcHBlbnMgZmlyc3QuXG4gICAgICovXG4gICAgc2V0RGlydHkoKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X2RpcnR5KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZS9lbmFibGUgYWxsIGNvbXBvbmVudHMgb2YgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBOZXcgc3RhdGUgZm9yIHRoZSBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IGFjdGl2ZShiKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gdGhpcy5nZXRDb21wb25lbnRzKCk7XG4gICAgICAgIGZvciAobGV0IGMgb2YgY29tcHMpIHtcbiAgICAgICAgICAgIGMuYWN0aXZlID0gYjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDb21wb25lbnQodHlwZU9yQ2xhc3MsIGluZGV4ID0gMCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgICAgICBjb25zdCBjb21wb25lbnRUeXBlID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2NvbXBvbmVudF9tYW5hZ2VyX2luZGV4KHNjZW5lLl9pbmRleCwgd2FzbS50ZW1wVVRGOCh0eXBlKSk7XG4gICAgICAgIGlmIChjb21wb25lbnRUeXBlIDwgMCkge1xuICAgICAgICAgICAgLyogTm90IGEgbmF0aXZlIGNvbXBvbmVudCwgdHJ5IGpzOiAqL1xuICAgICAgICAgICAgY29uc3QgdHlwZUluZGV4ID0gd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXNbdHlwZV07XG4gICAgICAgICAgICBpZiAodHlwZUluZGV4ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBqc0luZGV4ID0gd2FzbS5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleCh0aGlzLl9pZCwgdHlwZUluZGV4LCBpbmRleCk7XG4gICAgICAgICAgICBpZiAoanNJbmRleCA8IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9zY2VuZS5fanNDb21wb25lbnRzW2pzSW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5jb25zdHJ1Y3RvciAhPT0gQnJva2VuQ29tcG9uZW50ID8gY29tcG9uZW50IDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IHdhc20uX3dsX2dldF9jb21wb25lbnRfaWQodGhpcy5faWQsIGNvbXBvbmVudFR5cGUsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHNjZW5lLl9jb21wb25lbnRzLndyYXBOYXRpdmUoY29tcG9uZW50VHlwZSwgY29tcG9uZW50SWQpO1xuICAgIH1cbiAgICBnZXRDb21wb25lbnRzKHR5cGVPckNsYXNzKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICAgICAgbGV0IG1hbmFnZXIgPSBudWxsO1xuICAgICAgICBsZXQgdHlwZSA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlT3JDbGFzcykge1xuICAgICAgICAgICAgdHlwZSA9IGlzU3RyaW5nKHR5cGVPckNsYXNzKSA/IHR5cGVPckNsYXNzIDogdHlwZU9yQ2xhc3MuVHlwZU5hbWU7XG4gICAgICAgICAgICBjb25zdCBuYXRpdmVNYW5hZ2VyID0gc2NlbmUuX2NvbXBvbmVudHMuZ2V0TmF0aXZlTWFuYWdlcih0eXBlKTtcbiAgICAgICAgICAgIG1hbmFnZXIgPSBuYXRpdmVNYW5hZ2VyICE9PSBudWxsID8gbmF0aXZlTWFuYWdlciA6IHNjZW5lLl9jb21wb25lbnRzLmpzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgY29uc3QgbWF4Q29tcHMgPSBNYXRoLmZsb29yKCh3YXNtLl90ZW1wTWVtU2l6ZSAvIDMpICogMik7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHNDb3VudCA9IHdhc20uX3dsX29iamVjdF9nZXRfY29tcG9uZW50cyh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSwgbWF4Q29tcHMpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAyICogY29tcG9uZW50c0NvdW50O1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfZ2V0X2NvbXBvbmVudF90eXBlcyh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSArIG9mZnNldCwgbWF4Q29tcHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHNDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gd2FzbS5fdGVtcE1lbVVpbnQ4W2kgKyBvZmZzZXRdO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50SWQgPSB3YXNtLl90ZW1wTWVtVWludDE2W2ldO1xuICAgICAgICAgICAgaWYgKG1hbmFnZXIgIT09IG51bGwgJiYgdCAhPT0gbWFuYWdlcilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXAgPSB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy53cmFwQW55KHQsIGNvbXBvbmVudElkKTtcbiAgICAgICAgICAgIGlmIChjb21wKVxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50cztcbiAgICB9XG4gICAgYWRkQ29tcG9uZW50KHR5cGVPckNsYXNzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgY29uc3QgbmF0aXZlTWFuYWdlciA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmdldE5hdGl2ZU1hbmFnZXIodHlwZSk7XG4gICAgICAgIGNvbnN0IGlzTmF0aXZlID0gbmF0aXZlTWFuYWdlciAhPT0gbnVsbDtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IGlzTmF0aXZlID8gbmF0aXZlTWFuYWdlciA6IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmpzO1xuICAgICAgICBsZXQgY29tcG9uZW50SWQgPSAtMTtcbiAgICAgICAgaWYgKCFpc05hdGl2ZSkge1xuICAgICAgICAgICAgLyogSmF2YVNjcmlwdCBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGlmICghKHR5cGUgaW4gd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gY29tcG9uZW50IHR5cGUgJ1wiICsgdHlwZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9qc19jb21wb25lbnQodGhpcy5faWQsIHdhc20uX2NvbXBvbmVudFR5cGVJbmRpY2VzW3R5cGVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIG5hdGl2ZSBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9jb21wb25lbnQodGhpcy5faWQsIG1hbmFnZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLndyYXBBbnkobWFuYWdlciwgY29tcG9uZW50SWQpO1xuICAgICAgICBpZiAocGFyYW1zICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBjb21wb25lbnQuY29weShwYXJhbXMpO1xuICAgICAgICAvKiBFeHBsaWNpdGx5IGluaXRpYWxpemUganMgY29tcG9uZW50cyAqL1xuICAgICAgICBpZiAoIWlzTmF0aXZlKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuX3RyaWdnZXJJbml0KCk7XG4gICAgICAgICAgICAvKiBzdGFydCgpIGlzIGNhbGxlZCB0aHJvdWdoIG9uQWN0aXZhdGUoKSAqL1xuICAgICAgICB9XG4gICAgICAgIC8qIElmIGl0IHdhcyBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQgYnkgdGhlIHVzZXIgdG8gbGVhdmUgdGhlIGNvbXBvbmVudCBpbmFjdGl2ZSxcbiAgICAgICAgICogd2UgYWN0aXZhdGUgaXQgYXMgYSBmaW5hbCBzdGVwLiBUaGlzIGludmFsaWRhdGVzIGNvbXBvbmVudEluZGV4ISAqL1xuICAgICAgICBpZiAoIXBhcmFtcyB8fCAhKCdhY3RpdmUnIGluIHBhcmFtcyAmJiAhcGFyYW1zLmFjdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgZGVzY2VuZGFudHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lRGlyZWN0fSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZVJlY3Vyc2l2ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqICAgICBJZiBgZmFsc2VgLCB0aGlzIG1ldGhvZCB3aWxsIG9ubHkgcGVyZm9ybSB0aGUgc2VhcmNoIGluIGRpcmVjdCBjaGlsZHJlbi5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZShuYW1lLCByZWN1cnNpdmUgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gcmVjdXJzaXZlID8gdGhpcy5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpIDogdGhpcy5maW5kQnlOYW1lRGlyZWN0KG5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFsbCAqKmRpcmVjdCoqIGNoaWxkcmVuIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgRXZlbiB0aG91Z2ggdGhpcyBtZXRob2QgaXMgaGVhdmlseSBvcHRpbWl6ZWQsIGl0IGRvZXMgcGVyZm9ybVxuICAgICAqIGEgbGluZWFyIHNlYXJjaCB0byBmaW5kIHRoZSBvYmplY3RzLiBEbyBub3QgdXNlIGluIGEgaG90IHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjBcbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lRGlyZWN0KG5hbWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuX2lkO1xuICAgICAgICAvKiBEaXZpZGUgYnkgNCB0byBnZXQgaGFsZiBhcyBtYW55IHVzaG9ydCBhcyBwb3NzaWJsZSAqL1xuICAgICAgICBjb25zdCB0ZW1wU2l6ZVUxNiA9IHdhc20uX3RlbXBNZW1TaXplID4+IDI7XG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gdGVtcFNpemVVMTYgLSAyOyAvKiBSZXNlcnZlIHR3byB1c2hvcnQgKi9cbiAgICAgICAgY29uc3QgYnVmZmVyID0gd2FzbS5fdGVtcE1lbVVpbnQxNjtcbiAgICAgICAgYnVmZmVyW21heENvdW50XSA9IDA7IC8qIEluZGV4IG9mZnNldCAqL1xuICAgICAgICBidWZmZXJbbWF4Q291bnQgKyAxXSA9IDA7IC8qIGNoaWxkIGNvdW50ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBjaGlsZENvdW50UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyICsgMjtcbiAgICAgICAgY29uc3QgbmFtZVB0ciA9IHdhc20udGVtcFVURjgobmFtZSwgKG1heENvdW50ICsgMikgKiAyKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgd2hpbGUgKChyZWFkID0gd2FzbS5fd2xfb2JqZWN0X2ZpbmRCeU5hbWUoaWQsIG5hbWVQdHIsIGluZGV4UHRyLCBjaGlsZENvdW50UHRyLCBidWZmZXJQdHIsIG1heENvdW50KSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5fc2NlbmUud3JhcChidWZmZXJbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yICoqYWxsIGRlc2NlbmRhbnRzKiogbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBFdmVuIHRob3VnaCB0aGlzIG1ldGhvZCBpcyBoZWF2aWx5IG9wdGltaXplZCwgaXQgZG9lcyBwZXJmb3JtXG4gICAgICogYSBsaW5lYXIgc2VhcmNoIHRvIGZpbmQgdGhlIG9iamVjdHMuIERvIG5vdCB1c2UgaW4gYSBob3QgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVSZWN1cnNpdmUobmFtZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5faWQ7XG4gICAgICAgIC8qIERpdmlkZSBieSA0IHRvIGdldCBoYWxmIGFzIG1hbnkgdXNob3J0IGFzIHBvc3NpYmxlICovXG4gICAgICAgIGNvbnN0IHRlbXBTaXplVTE2ID0gd2FzbS5fdGVtcE1lbVNpemUgPj4gMjtcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSB0ZW1wU2l6ZVUxNiAtIDE7IC8qIFJlc2VydmUgb25lIHVzaG9ydCAqL1xuICAgICAgICBjb25zdCBidWZmZXIgPSB3YXNtLl90ZW1wTWVtVWludDE2O1xuICAgICAgICBidWZmZXJbbWF4Q291bnRdID0gMDsgLyogSW5kZXggb2Zmc2V0ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBuYW1lUHRyID0gd2FzbS50ZW1wVVRGOChuYW1lLCAobWF4Q291bnQgKyAxKSAqIDIpO1xuICAgICAgICBsZXQgcmVhZCA9IDA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoKHJlYWQgPSB3YXNtLl93bF9vYmplY3RfZmluZEJ5TmFtZVJlY3Vyc2l2ZShpZCwgbmFtZVB0ciwgaW5kZXhQdHIsIGJ1ZmZlclB0ciwgbWF4Q291bnQpKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWFkOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLl9zY2VuZS53cmFwKGJ1ZmZlcltpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgZ2l2ZW4gb2JqZWN0J3MgdHJhbnNmb3JtYXRpb24gaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgZ2V0IGNoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfaXNfY2hhbmdlZCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjdXN0b20gcHJvcGVydHkgd2lsbCBub3Qgd29yazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIG9iai5jdXN0b21QYXJhbSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2cob2JqLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGBmYWxzZWBcbiAgICAgKiBvYmouZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iai5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiBjb25zb2xlLmxvZyhvYmouY3VzdG9tUGFyYW0pOyAvLyBUaHJvd3MgYW4gZXJyb3JcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkIDwgMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZSBVc2UgSmF2YVNjcmlwdCByZWZlcmVuY2UgY29tcGFyaXNvbiBpbnN0ZWFkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBvYmplY3RBID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICogY29uc3Qgb2JqZWN0QiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIGNvbnN0IG9iamVjdEMgPSBvYmplY3RCO1xuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cob2JqZWN0QiA9PT0gb2JqZWN0Qyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJPYmplY3QpIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBpZiAoIW90aGVyT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPT0gb3RoZXJPYmplY3QuX2lkO1xuICAgIH1cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ09iamVjdDNEKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgT2JqZWN0M0QoJyR7dGhpcy5uYW1lfScsICR7dGhpcy5fbG9jYWxJZH0pYDtcbiAgICB9XG59XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIHNraW4gZGF0YS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNraW4gZXh0ZW5kcyBTY2VuZVJlc291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBpbmRleCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGhvc3QgaW5zdGFuY2VvZiBTY2VuZUxpa2UgPyBob3N0IDogaG9zdC5zY2VuZTtcbiAgICAgICAgc3VwZXIoc2NlbmUsIGluZGV4KTtcbiAgICB9XG4gICAgLyoqIEFtb3VudCBvZiBqb2ludHMgaW4gdGhpcyBza2luLiAqL1xuICAgIGdldCBqb2ludENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2tpbl9nZXRfam9pbnRfY291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogSm9pbnRzIG9iamVjdCBpZHMgZm9yIHRoaXMgc2tpbiAqL1xuICAgIGdldCBqb2ludElkcygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkod2FzbS5IRUFQVTE2LmJ1ZmZlciwgd2FzbS5fd2xfc2tpbl9qb2ludF9pZHModGhpcy5faWQpLCB0aGlzLmpvaW50Q291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEdWFsIHF1YXRlcm5pb25zIGluIGEgZmxhdCBhcnJheSBvZiBzaXplIDggdGltZXMge0BsaW5rIGpvaW50Q291bnR9LlxuICAgICAqXG4gICAgICogSW52ZXJzZSBiaW5kIHRyYW5zZm9ybXMgb2YgdGhlIHNraW4uXG4gICAgICovXG4gICAgZ2V0IGludmVyc2VCaW5kVHJhbnNmb3JtcygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX3NraW5faW52ZXJzZV9iaW5kX3RyYW5zZm9ybXModGhpcy5faWQpLCA4ICogdGhpcy5qb2ludENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVjdG9ycyBpbiBhIGZsYXQgYXJyYXkgb2Ygc2l6ZSAzIHRpbWVzIHtAbGluayBqb2ludENvdW50fS5cbiAgICAgKlxuICAgICAqIEludmVyc2UgYmluZCBzY2FsaW5ncyBvZiB0aGUgc2tpbi5cbiAgICAgKi9cbiAgICBnZXQgaW52ZXJzZUJpbmRTY2FsaW5ncygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX3NraW5faW52ZXJzZV9iaW5kX3NjYWxpbmdzKHRoaXMuX2lkKSwgMyAqIHRoaXMuam9pbnRDb3VudCk7XG4gICAgfVxufVxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBzZXQgb2YgbW9ycGggdGFyZ2V0cy5cbiAqXG4gKiAjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gb2JqZWN0LmdldENvbXBvbmVudCgnbWVzaCcpO1xuICogY29uc3QgbW91dGhUYXJnZXQgPSBtZXNoLm1vcnBoVGFyZ2V0cy5nZXRUYXJnZXRJbmRleCgnbW91dGgnKTtcbiAqIG1lc2guc2V0TW9ycGhUYXJnZXRXZWlnaHQobW91dGhUYXJnZXQsIDAuNSk7XG4gKiBgYGBcbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIE1vcnBoVGFyZ2V0cyBleHRlbmRzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKiBBbW91bnQgb2YgdGFyZ2V0cyBpbiB0aGlzIG1vcnBoIHRhcmdldCBzZXQuICovXG4gICAgZ2V0IGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X2NvdW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIG5hbWUgb2YgYSBnaXZlbiB0YXJnZXQgKi9cbiAgICBnZXRUYXJnZXROYW1lKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID49IHRoaXMuY291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5kZXggJHt0YXJnZXR9IGlzIG91dCBvZiBib3VuZHMgZm9yICR7dGhpcy5jb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X25hbWUodGhpcy5faWQsIHRhcmdldCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGluZGV4IGZvciBhIGdpdmVuIHRhcmdldCBuYW1lLlxuICAgICAqXG4gICAgICogVGhyb3dzIGlmIG5vIHRhcmdldCB3aXRoIHRoYXQgbmFtZSBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgZ2V0VGFyZ2V0SW5kZXgobmFtZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfaW5kZXgodGhpcy5faWQsIHdhc20udGVtcFVURjgobmFtZSkpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzc2luZyB0YXJnZXQgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cbi8qIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggPCAxLjAuMC4gKi9cbmV4cG9ydCB7IE9iamVjdDNEIGFzIE9iamVjdCB9O1xuLyoqXG4gKiBSYXkgaGl0LlxuICpcbiAqIFJlc3VsdCBvZiBhIHtAbGluayBTY2VuZS5yYXlDYXN0fSBvciB7QGxpbmsgUGh5c2ljcy5yYXlDYXN0fS5cbiAqXG4gKiBAbm90ZSB0aGlzIGNsYXNzIHdyYXBzIGludGVybmFsIGVuZ2luZSBkYXRhIGFuZCBzaG91bGQgb25seSBiZSBjcmVhdGVkIGludGVybmFsbHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBSYXlIaXQge1xuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9zY2VuZTtcbiAgICAvKiogUG9pbnRlciB0byB0aGUgbWVtb3J5IGhlYXAuICovXG4gICAgX3B0cjtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHRyIFBvaW50ZXIgdG8gdGhlIHJheSBoaXRzIG1lbW9yeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgcHRyKSB7XG4gICAgICAgIGlmICgocHRyICYgMykgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzYWxpZ25lZCBwb2ludGVyOiBwbGVhc2UgcmVwb3J0IGEgYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5fcHRyID0gcHRyO1xuICAgIH1cbiAgICBnZXRMb2NhdGlvbnMob3V0KSB7XG4gICAgICAgIG91dCA9IG91dCA/PyBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aGlzLmhpdENvdW50IH0sICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMykpO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9IHRoaXMuX3B0ciAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGl0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25QdHIgPSBhbGlnbmVkUHRyICsgMyAqIGk7XG4gICAgICAgICAgICBvdXRbaV1bMF0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHJdO1xuICAgICAgICAgICAgb3V0W2ldWzFdID0gd2FzbS5IRUFQRjMyW2xvY2F0aW9uUHRyICsgMV07XG4gICAgICAgICAgICBvdXRbaV1bMl0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHIgKyAyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXROb3JtYWxzKG91dCkge1xuICAgICAgICBvdXQgPSBvdXQgPz8gQXJyYXkuZnJvbSh7IGxlbmd0aDogdGhpcy5oaXRDb3VudCB9LCAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KDMpKTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGFsaWduZWRQdHIgPSAodGhpcy5fcHRyICsgNDgpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxQdHIgPSBhbGlnbmVkUHRyICsgMyAqIGk7XG4gICAgICAgICAgICBvdXRbaV1bMF0gPSB3YXNtLkhFQVBGMzJbbm9ybWFsUHRyXTtcbiAgICAgICAgICAgIG91dFtpXVsxXSA9IHdhc20uSEVBUEYzMltub3JtYWxQdHIgKyAxXTtcbiAgICAgICAgICAgIG91dFtpXVsyXSA9IHdhc20uSEVBUEYzMltub3JtYWxQdHIgKyAyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXREaXN0YW5jZXMob3V0ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmhpdENvdW50KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9ICh0aGlzLl9wdHIgKyA0OCAqIDIpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZVB0ciA9IGFsaWduZWRQdHIgKyBpO1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5IRUFQRjMyW2Rpc3RhbmNlUHRyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcnJheSBvZiBoaXQgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IGB0aGlzLmhpdENvdW50YCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldE9iamVjdHMob3V0ID0gbmV3IEFycmF5KHRoaXMuaGl0Q291bnQpKSB7XG4gICAgICAgIGNvbnN0IEhFQVBVMTYgPSB0aGlzLmVuZ2luZS53YXNtLkhFQVBVMTY7XG4gICAgICAgIGNvbnN0IGFsaWduZWRQdHIgPSAodGhpcy5fcHRyICsgKDQ4ICogMiArIDE2KSkgPj4gMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHRoaXMuX3NjZW5lLndyYXAoSEVBUFUxNlthbGlnbmVkUHRyICsgaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuZW5naW5lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0TG9jYXRpb25zfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFJheUhpdC5nZXRMb2NhdGlvbnN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgbG9jYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMb2NhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUmF5SGl0LmdldE5vcm1hbHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldE5vcm1hbHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgbm9ybWFscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFscygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0RGlzdGFuY2VzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFJheUhpdC5nZXREaXN0YW5jZXN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgZGlzdGFuY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXREaXN0YW5jZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUmF5SGl0LmdldE9iamVjdHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldE9iamVjdHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgb2JqZWN0cygpIHtcbiAgICAgICAgLyoqIEB0b2RvOiBSZW1vdmUgYXQgMi4wLjAsIHRoaXMgaXMga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4gKi9cbiAgICAgICAgY29uc3Qgb2JqZWN0cyA9IFtudWxsLCBudWxsLCBudWxsLCBudWxsXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2JqZWN0cyhvYmplY3RzKTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBoaXRzIChtYXggNCkgKi9cbiAgICBnZXQgaGl0Q291bnQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLmVuZ2luZS53YXNtLkhFQVBVMzJbdGhpcy5fcHRyIC8gNCArIDMwXSwgNCk7XG4gICAgfVxufVxuY2xhc3MgbWF0aCB7XG4gICAgLyoqIChFeHBlcmltZW50YWwhKSBDdWJpYyBIZXJtaXRlIHNwbGluZSBpbnRlcnBvbGF0aW9uIGZvciB2ZWN0b3IzIGFuZCBxdWF0ZXJuaW9ucy5cbiAgICAgKlxuICAgICAqIFdpdGggYGYgPT0gMGAsIGBvdXRgIHdpbGwgYmUgYGJgLCBpZiBgZiA9PSAxYCwgYG91dGAgd2lsbCBiZSBjLlxuICAgICAqXG4gICAgICogV2hldGhlciBhIHF1YXRlcm5pb24gb3IgdmVjdG9yMyBpbnRlcnBvbGF0aW9uIGlzIGludGVuZGVkIGlzIGRldGVybWluZWQgYnlcbiAgICAgKiBsZW5ndGggb2YgYGFgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBBcnJheSB0byB3cml0ZSByZXN1bHQgdG8uXG4gICAgICogQHBhcmFtIGEgRmlyc3QgdGFuZ2VudC9oYW5kbGUuXG4gICAgICogQHBhcmFtIGIgRmlyc3QgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gYyBTZWNvbmQgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gZCBTZWNvbmQgaGFuZGxlLlxuICAgICAqIEBwYXJhbSBmIEludGVycG9sYXRpb24gZmFjdG9yIGluIFswOyAxXS5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC42XG4gICAgICovXG4gICAgc3RhdGljIGN1YmljSGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIGYsIGVuZ2luZSA9IFdMKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSBlbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDApLnNldChhKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDQpLnNldChiKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDgpLnNldChjKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDEyKS5zZXQoZCk7XG4gICAgICAgIGNvbnN0IGlzUXVhdCA9IGEubGVuZ3RoID09IDQ7XG4gICAgICAgIHdhc20uX3dsX21hdGhfY3ViaWNIZXJtaXRlKHdhc20uX3RlbXBNZW0gKyA0ICogMTYsIHdhc20uX3RlbXBNZW0gKyA0ICogMCwgd2FzbS5fdGVtcE1lbSArIDQgKiA0LCB3YXNtLl90ZW1wTWVtICsgNCAqIDgsIHdhc20uX3RlbXBNZW0gKyA0ICogMTIsIGYsIGlzUXVhdCk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxNl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxN107XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxOF07XG4gICAgICAgIGlmIChpc1F1YXQpXG4gICAgICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMTldO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbn1cbmV4cG9ydCB7IG1hdGggfTtcbi8qKlxuICogQ2xhc3MgZm9yIGFjY2Vzc2luZyBpbnRlcm5hdGlvbmFsaXphdGlvbiAoaTE4bikgZmVhdHVyZXMuXG4gKlxuICogQWxsb3dzIHtAbGluayBJMThOLm9uTGFuZ3VhZ2VDaGFuZ2VkIFwiZGV0ZWN0aW5nIGxhbmd1YWdlIGNoYW5nZVwifSxcbiAqIHtAbGluayBJMThOLmxhbmd1YWdlIFwic2V0dGluZyB0aGUgY3VycmVudCBsYW5ndWFnZVwifSBvciB0cmFuc2xhdGluZ1xuICoge0BsaW5rIEkxOE4udHJhbnNsYXRlIFwiaW5kaXZpZHVhbCB0ZXJtc1wifS5cbiAqXG4gKiBJbnRlcm5hdGlvbmFsaXphdGlvbiB3b3JrcyB3aXRoIHRlcm1zLFxuICogYSBzdHJpbmcgdHlwZSBrZXl3b3JkIHRoYXQgaXMgbGlua2VkIHRvIGEgZGlmZmVyZW50IHRleHQgZm9yIGVhY2ggbGFuZ3VhZ2UuXG4gKlxuICogSW50ZXJuYWxseSwgc3RyaW5nIHBhcmFtZXRlcnMgZm9yIHRleHQgYW5kIGpzIGNvbXBvbmVudHMgYXJlXG4gKiBhdXRvbWF0aWNhbGx5IHN3YXBwZWQgZHVyaW5nIGxhbmd1YWdlIGNoYW5nZSwgZ2l2ZW4gdGhleSBhcmUgbGlua2VkIHRvIGEgdGVybS5cbiAqIElmIG1hbnVhbCB0ZXh0IHN3YXBwaW5nIGlzIGRlc2lyZWQsIHtAbGluayBJMThOLnRyYW5zbGF0ZX1cbiAqIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBjdXJyZW50IHRyYW5zbGF0aW9uIGZvciBhbnkgdGVybS5cbiAqXG4gKiBZb3UgY2FuIGFsc28gdXNlIHRoZSB7QGxpbmsgSTE4Ti5vbkxhbmd1YWdlQ2hhbmdlZH0gdG8gbWFudWFsbHkgdXBkYXRlIHRleHRcbiAqIHdoZW4gYSBsYW5ndWFnZSBpcyBjaGFuZ2VkIHRvIGZvciBleGFtcGxlIHVwZGF0ZSBhIG51bWJlciBpbiBhIHN0cmluZy5cbiAqXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuZXhwb3J0IGNsYXNzIEkxOE4ge1xuICAgIC8qKlxuICAgICAqIHtAbGluayBFbWl0dGVyfSBmb3IgbGFuZ3VhZ2UgY2hhbmdlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEZpcnN0IHBhcmFtZXRlciB0byBhIGxpc3RlbmVyIGlzIHRoZSBvbGQgbGFuZ3VhZ2UgaW5kZXgsXG4gICAgICogc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgbmV3IGxhbmd1YWdlIGluZGV4LlxuICAgICAqXG4gICAgICogVXNhZ2UgZnJvbSBhIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUuaTE4bi5vbkxhbmd1YWdlQ2hhbmdlZC5hZGQoKG9sZExhbmd1YWdlSW5kZXgsIG5ld0xhbmd1YWdlSW5kZXgpID0+IHtcbiAgICAgKiAgICAgY29uc3Qgb2xkTGFuZ3VhZ2UgPSB0aGlzLmVuZ2luZS5pMThuLmxhbmd1YWdlTmFtZShvbGRMYW5ndWFnZUluZGV4KTtcbiAgICAgKiAgICAgY29uc3QgbmV3TGFuZ3VhZ2UgPSB0aGlzLmVuZ2luZS5pMThuLmxhbmd1YWdlTmFtZShuZXdMYW5ndWFnZUluZGV4KTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coXCJTd2l0Y2hlZCBmcm9tXCIsIG9sZExhbmd1YWdlLCBcInRvXCIsIG5ld0xhbmd1YWdlKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBvbkxhbmd1YWdlQ2hhbmdlZCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKiogUHJldmlvdXNseSBzZXQgbGFuZ3VhZ2UgaW5kZXguIEBoaWRkZW4gKi9cbiAgICBfcHJldkxhbmd1YWdlSW5kZXggPSAtMTtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IGxhbmd1YWdlIGFuZCBhcHBseSB0cmFuc2xhdGlvbnMgdG8gbGlua2VkIHRleHQgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgZXF1aXZhbGVudCB0byB7QGxpbmsgSTE4Ti5zZXRMYW5ndWFnZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29kZSBMYW5ndWFnZSBjb2RlIHRvIHN3aXRjaCB0b1xuICAgICAqL1xuICAgIHNldCBsYW5ndWFnZShjb2RlKSB7XG4gICAgICAgIHRoaXMuc2V0TGFuZ3VhZ2UoY29kZSk7XG4gICAgfVxuICAgIC8qKiBHZXQgY3VycmVudCBsYW5ndWFnZSBjb2RlLiAqL1xuICAgIGdldCBsYW5ndWFnZSgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb2RlID0gd2FzbS5fd2xfaTE4bl9jdXJyZW50TGFuZ3VhZ2UoKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKGNvZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UgaW5kZXguXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBtb3JlIGVmZmljaWVudCB0aGFuIGl0cyBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBpbmRleCA9IGkxOG4ubGFuZ3VhZ2VJbmRleChpMThuLmxhbmd1YWdlKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2kxOG5fY3VycmVudExhbmd1YWdlSW5kZXgoKTtcbiAgICB9XG4gICAgLyoqIFByZXZpb3VzIGxhbmd1YWdlIGluZGV4LiAqL1xuICAgIGdldCBwcmV2aW91c0luZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJldkxhbmd1YWdlSW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IGxhbmd1YWdlIGFuZCBhcHBseSB0cmFuc2xhdGlvbnMgdG8gbGlua2VkIHRleHQgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2RlIFRoZSBsYW5ndWFnZSBjb2RlLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGN1cnJlbnQgaW5kZXggY29kZSB3aGVuIHRoZVxuICAgICAqICAgICBsYW5ndWFnZSBpcyBsb2FkZWQuXG4gICAgICovXG4gICAgYXN5bmMgc2V0TGFuZ3VhZ2UoY29kZSkge1xuICAgICAgICBpZiAoY29kZSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgdGhpcy5fcHJldkxhbmd1YWdlSW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleDtcbiAgICAgICAgd2FzbS5fd2xfaTE4bl9zZXRMYW5ndWFnZSh3YXNtLnRlbXBVVEY4KGNvZGUpKTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmVuZ2luZS5zY2VuZTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9pMThuX2xhbmd1YWdlRmlsZSh0aGlzLmN1cnJlbnRJbmRleCkpO1xuICAgICAgICBjb25zdCB1cmwgPSBgJHtzY2VuZS5iYXNlVVJMfS9sb2NhbGUvJHtmaWxlbmFtZX1gO1xuICAgICAgICBhd2FpdCBzY2VuZS5fZG93bmxvYWREZXBlbmRlbmN5KHVybCk7XG4gICAgICAgIHRoaXMub25MYW5ndWFnZUNoYW5nZWQubm90aWZ5KHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4LCB0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRyYW5zbGF0ZWQgc3RyaW5nIGZvciBhIHRlcm0gZm9yIHRoZSBjdXJyZW50bHkgbG9hZGVkIGxhbmd1YWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRlcm0gVGVybSB0byB0cmFuc2xhdGVcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUodGVybSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gd2FzbS5fd2xfaTE4bl90cmFuc2xhdGUod2FzbS50ZW1wVVRGOCh0ZXJtKSk7XG4gICAgICAgIGlmICh0cmFuc2xhdGlvbiA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcodHJhbnNsYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBsYW5ndWFnZXMgaW4gdGhlIHByb2plY3QuXG4gICAgICpcbiAgICAgKi9cbiAgICBsYW5ndWFnZUNvdW50KCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLl93bF9pMThuX2xhbmd1YWdlQ291bnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgbGFuZ3VhZ2UgdG8gZ2V0IHRoZSBjb2RlIGZyb21cbiAgICAgKi9cbiAgICBsYW5ndWFnZUluZGV4KGNvZGUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZUluZGV4KHdhc20udGVtcFVURjgoY29kZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsYW5ndWFnZSBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBsYW5ndWFnZSB0byBnZXQgdGhlIGNvZGUgZnJvbVxuICAgICAqL1xuICAgIGxhbmd1YWdlQ29kZShpbmRleCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvZGUgPSB3YXNtLl93bF9pMThuX2xhbmd1YWdlQ29kZShpbmRleCk7XG4gICAgICAgIGlmIChjb2RlID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhjb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGFuZ3VhZ2UgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgbGFuZ3VhZ2UgdG8gZ2V0IHRoZSBuYW1lIGZyb21cbiAgICAgKi9cbiAgICBsYW5ndWFnZU5hbWUoaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBuYW1lID0gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZU5hbWUoaW5kZXgpO1xuICAgICAgICBpZiAobmFtZSA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcobmFtZSk7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbn1cbi8qKiBQcm9wZXJ0aWVzIG9mIGEgV2ViWFIgc2Vzc2lvbiAqL1xuZXhwb3J0IGNsYXNzIFhSIHtcbiAgICAvKiogV29uZGVybGFuZCBXQVNNIGJyaWRnZS4gQGhpZGRlbiAqL1xuICAgICN3YXNtO1xuICAgICNtb2RlO1xuICAgIGNvbnN0cnVjdG9yKHdhc20sIG1vZGUpIHtcbiAgICAgICAgdGhpcy4jd2FzbSA9IHdhc207XG4gICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiBzZXNzaW9uIG1vZGUgKi9cbiAgICBnZXQgc2Vzc2lvbk1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiBzZXNzaW9uICovXG4gICAgZ2V0IHNlc3Npb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3Nlc3Npb247XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGZyYW1lICovXG4gICAgZ2V0IGZyYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9mcmFtZTtcbiAgICB9XG4gICAgcmVmZXJlbmNlU3BhY2VGb3JUeXBlKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VzW3R5cGVdID8/IG51bGw7XG4gICAgfVxuICAgIC8qKiBTZXQgY3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZSB1c2VkIGZvciByZXRyaWV2aW5nIGV5ZSwgaGVhZCwgaGFuZCBhbmQgam9pbnQgcG9zZXMgKi9cbiAgICBzZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlKHJlZlNwYWNlKSB7XG4gICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2UgPSByZWZTcGFjZTtcbiAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZVR5cGUgPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LmtleXModGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXNbdHlwZV0gPT09IHJlZlNwYWNlKSB7XG4gICAgICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiByZWZlcmVuY2Ugc3BhY2UgdHlwZSAqL1xuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VUeXBlID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQ3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZSB1c2VkIGZvciByZXRyaWV2aW5nIGV5ZSwgaGVhZCwgaGFuZCBhbmQgam9pbnQgcG9zZXMgKi9cbiAgICBnZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZTtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgcmVmZXJlbmNlIHNwYWNlIHR5cGUgb3IgYG51bGxgIGlmIG5vdCBhIGRlZmF1bHQgcmVmZXJlbmNlIHNwYWNlICovXG4gICAgZ2V0IGN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZTtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgYmFzZSBsYXllciAgKi9cbiAgICBnZXQgYmFzZUxheWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9iYXNlTGF5ZXI7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGZyYW1lYnVmZmVyICovXG4gICAgZ2V0IGZyYW1lYnVmZmVycygpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuI3dhc20ud2VieHJfZmJvKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1t0aGlzLiN3YXNtLndlYnhyX2Zib11dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2Ziby5tYXAoKGlkKSA9PiB0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1tpZF0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBCaXRTZXQgfSBmcm9tICcuL2JpdHNldC5qcyc7XG4vKipcbiAqIExvZ2dpbmcgbGV2ZWxzIHN1cHBvcnRlZCBieSB7QGxpbmsgTG9nZ2VyfS5cbiAqL1xuZXhwb3J0IHZhciBMb2dMZXZlbDtcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkluZm9cIl0gPSAwXSA9IFwiSW5mb1wiO1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV2FyblwiXSA9IDFdID0gXCJXYXJuXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFcnJvclwiXSA9IDJdID0gXCJFcnJvclwiO1xufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcbi8qKlxuICogTG9nZ2luZyB3cmFwcGVyLlxuICpcbiAqIFRoaXMgaXMgdXNlZCB0byBhbGxvdyB0dXJuaW5nIG9uL29mZjpcbiAqICAgICAtIGBjb25zb2xlLmxvZ2BcbiAqICAgICAtIGBjb25zb2xlLndhcm5gXG4gKiAgICAgLSBgY29uc29sZS5lcnJvcmBcbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7TG9nZ2VyLCBMb2dMZXZlbCwgTG9nVGFnfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIC8vIENyZWF0ZSBhIGxvZ2dlciB3aXRoIG9ubHkgdGhlIFwiZXJyb3JcIiBhbmQgXCJ3YXJuXCIgbGV2ZWxzIGFjdGl2YXRlZFxuICogY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihMb2dMZXZlbC5XYXJuLCBMb2dMZXZlbC5FcnJvcik7XG4gKlxuICogLy8gT25seSB0aGUgXCJlcnJvclwiIGFuZCBcIndhcm5cIiBsZXZlbHMgYXJlIGFjdGl2YXRlZCxcbiAqIC8vIHRoaXMgbWVzc2FnZSBpc24ndCBsb2dnZWQuXG4gKiBsb2dnZXIuaW5mbyhMb2dUYWcuQ29tcG9uZW50LCAnVGhpcyBtZXNzYWdlIGlzIHNodXNoZWQnKVxuICpcbiAqIC8vIFByaW50cyAnSGVsbG8gRXJyb3IhJ1xuICogbG9nZ2VyLmVycm9yKExvZ1RhZy5Db21wb25lbnQsICdIZWxsbyBFcnJvciEnKTtcbiAqXG4gKiAvLyBQcmludHMgJ0hlbGxvIFdhcm5pbmchJ1xuICogbG9nZ2VyLndhcm4oTG9nVGFnLkNvbXBvbmVudCwgJ0hlbGxvIFdhcm5pbmchJyk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgbG9nIGxldmVscyBjYW4gYmUgY2hhbmdlZCBhdCBhbnl0aW1lIHVzaW5nIHRoZSB7QGxpbmsgQml0U2V0fSBhcGk6XG4gKlxuICogYGBganNcbiAqIC8vIEVuYWJsZSB0aGUgXCJpbmZvXCIgbGV2ZWxcbiAqIGxvZ2dlci5sZXZlbHMuZW5hYmxlKExvZ0xldmVsLkluZm8pO1xuICogKiAvLyBEaXNhYmxlIHRoZSBcIndhcm5cIiBsZXZlbFxuICogbG9nZ2VyLmxldmVscy5kaXNhYmxlKExvZ0xldmVsLldhcm4pO1xuICogYGBgXG4gKlxuICogIyMjIyBUYWdzXG4gKlxuICogSW4gYWRkaXRpb24sIHRoZSBsb2dnZXIgc3VwcG9ydHMgdGFnZ2luZyBtZXNzYWdlczpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtMb2dnZXIsIExvZ0xldmVsLCBMb2dUYWd9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihMb2dMZXZlbC5JbmZvKTtcbiAqXG4gKiBsb2dnZXIudGFncy5kaXNhYmxlQWxsKCk7XG4gKlxuICogLy8gQWxsIHRhZ3MgYXJlIG9mZiwgdGhpcyBtZXNzYWdlIGlzbid0IGxvZ2dlZFxuICogbG9nZ2VyLmluZm8oTG9nVGFnLkNvbXBvbmVudCwgJ1RoaXMgbWVzc2FnZSBpcyBzaHVzaGVkJyk7XG4gKlxuICogbG9nZ2VyLnRhZ3MuZW5hYmxlKExvZ1RhZy5Db21wb25lbnQpO1xuICogbG9nZ2VyLmluZm8oTG9nVGFnLkNvbXBvbmVudCwgJ0hlbGxvIFdvcmxkIScpIC8vIFByaW50cyAnSGVsbG8gV29ybGQhJ1xuICogYGBgXG4gKlxuICogVGhlIHRhZ2dpbmcgc3lzdGVtIGdpdmVzIGFub3RoZXIgbGF5ZXIgb2YgY29udHJvbCB0byBlbmFibGUgLyBkaXNhYmxlXG4gKiBzb21lIHNwZWNpZmljIGxvZ3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICAgIC8qKlxuICAgICAqIEJpdHNldCBvZiBlbmFibGVkIGxldmVscy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBsZXZlbHMgPSBuZXcgQml0U2V0KCk7XG4gICAgLyoqXG4gICAgICogQml0c2V0IG9mIGVuYWJsZWQgdGFncy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0YWdzID0gbmV3IEJpdFNldCgpLmVuYWJsZUFsbCgpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBsb2dnZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGV2ZWxzIERlZmF1bHQgc2V0IG9mIGxldmVscyB0byBlbmFibGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4ubGV2ZWxzKSB7XG4gICAgICAgIHRoaXMubGV2ZWxzLmVuYWJsZSguLi5sZXZlbHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2cgdGhlIG1lc3NhZ2UocykgdXNpbmcgYGNvbnNvbGUubG9nYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YWcgVGFnIHJlcHJlc2VudGVkIGJ5IGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgKiBAcGFyYW0gbXNnIEEgc3ByZWFkIG9mIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBpbmZvKHRhZywgLi4ubXNnKSB7XG4gICAgICAgIGlmICh0aGlzLmxldmVscy5lbmFibGVkKExvZ0xldmVsLkluZm8pICYmIHRoaXMudGFncy5lbmFibGVkKHRhZykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKC4uLm1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZyB0aGUgbWVzc2FnZShzKSB1c2luZyBgY29uc29sZS53YXJuYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YWcgVGFnIHJlcHJlc2VudGVkIGJ5IGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgKiBAcGFyYW0gbXNnIEEgc3ByZWFkIG9mIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB3YXJuKHRhZywgLi4ubXNnKSB7XG4gICAgICAgIGlmICh0aGlzLmxldmVscy5lbmFibGVkKExvZ0xldmVsLldhcm4pICYmIHRoaXMudGFncy5lbmFibGVkKHRhZykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybiguLi5tc2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2cgdGhlIG1lc3NhZ2UocykgdXNpbmcgYGNvbnNvbGUuZXJyb3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhZyBUYWcgcmVwcmVzZW50ZWQgYnkgYSBwb3NpdGl2ZSBpbnRlZ2VyLlxuICAgICAqIEBwYXJhbSBtc2cgQSBzcHJlYWQgb2YgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGVycm9yKHRhZywgLi4ubXNnKSB7XG4gICAgICAgIGlmICh0aGlzLmxldmVscy5lbmFibGVkKExvZ0xldmVsLkVycm9yKSAmJiB0aGlzLnRhZ3MuZW5hYmxlZCh0YWcpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLm1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IExvZ1RhZyB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gJy4vcHJvcGVydHkuanMnO1xuaW1wb3J0IHsgUmV0YWluRW1pdHRlciB9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHsgQ0JPUiB9IGZyb20gJy4vdXRpbHMvY2Jvci5qcyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBpbmhlcml0UHJvcGVydGllcywgQ29tcG9uZW50LCBCcm9rZW5Db21wb25lbnQsIFhSLCB9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG4vKipcbiAqIERlZmF1bHQgY29tcG9uZW50IHBhcmFtZXRlciB2YWx1ZSBwZXIgdHlwZS5cbiAqL1xuY29uc3QgX2NvbXBvbmVudERlZmF1bHRzID0gbmV3IE1hcChbXG4gICAgW1R5cGUuQm9vbCwgZmFsc2VdLFxuICAgIFtUeXBlLkludCwgMF0sXG4gICAgW1R5cGUuRmxvYXQsIDAuMF0sXG4gICAgW1R5cGUuU3RyaW5nLCAnJ10sXG4gICAgW1R5cGUuRW51bSwgdW5kZWZpbmVkXSxcbiAgICBbVHlwZS5PYmplY3QsIG51bGxdLFxuICAgIFtUeXBlLk1lc2gsIG51bGxdLFxuICAgIFtUeXBlLlRleHR1cmUsIG51bGxdLFxuICAgIFtUeXBlLk1hdGVyaWFsLCBudWxsXSxcbiAgICBbVHlwZS5BbmltYXRpb24sIG51bGxdLFxuICAgIFtUeXBlLlNraW4sIG51bGxdLFxuICAgIFtUeXBlLkNvbG9yLCBbMC4wLCAwLjAsIDAuMCwgMS4wXV0sXG5dKTtcbi8qKlxuICogU2V0dXAgdGhlIGRlZmF1bHRzIHZhbHVlIG9mIHRoZSBwcm9wZXJ0aWVzIG9uIGEgZ2l2ZW5cbiAqIGNvbXBvbmVudCBjbGFzcy5cbiAqXG4gKiBAcGFyYW0gY3RvciBUaGUgY29tcG9uZW50IGNsYXNzXG4gKi9cbmZ1bmN0aW9uIF9zZXR1cERlZmF1bHRzKGN0b3IpIHtcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHAgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgIGlmIChwLnR5cGUgPT09IFR5cGUuRW51bSkge1xuICAgICAgICAgICAgLyogRW51bSBkZWZhdWx0IGNhbiBiZSBhIHN0cmluZyBvciBhbiBpbmRleC4gQ29udmVydCB0byBhbmQvb3JcbiAgICAgICAgICAgICAqIHNhbml0eS1jaGVjayB0aGUgaW5kZXguICovXG4gICAgICAgICAgICBpZiAocC52YWx1ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8qIERvbid0IHRyeSB0byBsb29rIHVwIHRoZSBkZWZhdWx0IGlmIHRoZSB1c2VyIHNwZWNpZmllZCBhXG4gICAgICAgICAgICAgICAgICogbnVtYmVyIG9yIHdlIGFscmVhZHkgY29udmVydGVkIHRvIG9uZS4gKi9cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHAuZGVmYXVsdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdW5kZWZpbmVkLCBtaXNzaW5nIGVsZW1lbnQgb3Igd3JvbmcgdHlwZSB0aGlzIHJldHVybnNcbiAgICAgICAgICAgICAgICAgICAgICogLTEgd2hpY2ggYmVjb21lcyAwIGJlbG93LiBUaGlzIG1hdGNoZXMgZWRpdG9yIGJlaGF2aW9yLiAqL1xuICAgICAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSBwLnZhbHVlcy5pbmRleE9mKHAuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwLmRlZmF1bHQgPCAwIHx8IHAuZGVmYXVsdCA+PSBwLnZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZhdWx0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSdzIG5vIGluZGV4IHZhbHVlIHRoYXQgbWFrZXMgc2Vuc2UgKi9cbiAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwLmRlZmF1bHQgPSBwLmRlZmF1bHQgPz8gX2NvbXBvbmVudERlZmF1bHRzLmdldChwLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGN0b3IucHJvdG90eXBlW25hbWVdID0gcC5kZWZhdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBhIGZpeGVkIG9yZGVyIGZvciBwcm9wZXJ0eSBhdHRyaWJ1dGVzIHVzZWQgZm9yIGRlc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBAcGFyYW0gY3RvciBUaGUgY29tcG9uZW50IGNsYXNzXG4gKi9cbmZ1bmN0aW9uIF9zZXRQcm9wZXJ0eU9yZGVyKGN0b3IpIHtcbiAgICBjdG9yLl9wcm9wZXJ0eU9yZGVyID0gY3Rvci5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpXG4gICAgICAgID8gT2JqZWN0LmtleXMoY3Rvci5Qcm9wZXJ0aWVzKS5zb3J0KClcbiAgICAgICAgOiBbXTtcbn1cbi8qKlxuICogTG93LWxldmVsIHdyYXBwZXIgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgV2ViQXNzZW1ibHkgY29kZS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBXQVNNIHtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdvcmtlciBmaWVsZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3b3JrZXIgPSAnJztcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdhc20gZmllbGQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2FzbSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBjYW52YXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgY2FudmFzID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBXZWJHUFUgZGV2aWNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHByZWluaXRpYWxpemVkV2ViR1BVRGV2aWNlID0gbnVsbDtcbiAgICAvKiogQ3VycmVudCBXZWJYUiAgKi9cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfc2Vzc2lvbiA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiByZXF1ZXN0IHNlc3Npb24gY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVxdWVzdFNlc3Npb24gPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgb2ZmZXIgc2Vzc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9vZmZlclNlc3Npb24gPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfZnJhbWUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gY3VycmVudCBXZWJYUiByZWZlcmVuY2Ugc3BhY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVmU3BhY2UgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgcmVmZXJlbmNlIHNwYWNlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZXMgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgY3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZVR5cGUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgR0wgcHJvamVjdGlvbiBsYXllci5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9iYXNlTGF5ZXIgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWVidWZmZXIgc2NhbGUgZmFjdG9yLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3IgPSAxLjA7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZWJ1ZmZlcihzKS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICAvKiB3ZWJ4cl9mYm8gd2lsbCBub3QgZ2V0IG92ZXJ3cml0dGVuIGlmIHdlIGFyZSByZW5kZXJpbmcgdG8gdGhlXG4gICAgICogZGVmYXVsdCBmcmFtZWJ1ZmZlciwgZS5nLiwgd2hlbiB1c2luZyBXZWJYUiBlbXVsYXRvci4gKi9cbiAgICB3ZWJ4cl9mYm8gPSAwO1xuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBXQVNNIG1lbW9yeSB2aWV3IHRvIGEgSmF2YVNjcmlwdCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHRyIFBvaW50ZXIgc3RhcnRcbiAgICAgKiBAcGFyYW0gcHRyRW5kIFBvaW50ZXIgZW5kXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBzdHJpbmdcbiAgICAgKi9cbiAgICBVVEY4Vmlld1RvU3RyaW5nO1xuICAgIC8qKiBMb2dnZXIgaW5zdGFuY2UuICovXG4gICAgX2xvZyA9IG5ldyBMb2dnZXIoKTtcbiAgICAvKiogSWYgYHRydWVgLCBsb2dzIHdpbGwgbm90IHNwYW0gdGhlIGNvbnNvbGUgb24gZXJyb3IuICovXG4gICAgX2RlYWN0aXZhdGVfY29tcG9uZW50X29uX2Vycm9yID0gZmFsc2U7XG4gICAgLyoqIFRlbXBvcmFyeSBtZW1vcnkgcG9pbnRlci4gKi9cbiAgICBfdGVtcE1lbSA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSBtZW1vcnkgc2l6ZS4gKi9cbiAgICBfdGVtcE1lbVNpemUgPSAwO1xuICAgIC8qKiBUZW1wb3JhcnkgZmxvYXQgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1GbG9hdCA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSBpbnQgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1JbnQgPSBudWxsO1xuICAgIC8qKiBUZW1wb3JhcnkgdWludDggbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50OCA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50MzIgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50MzIgPSBudWxsO1xuICAgIC8qKiBUZW1wb3JhcnkgdWludDE2IG1lbW9yeSB2aWV3LiAqL1xuICAgIF90ZW1wTWVtVWludDE2ID0gbnVsbDtcbiAgICAvKiogTG9hZGluZyBzY3JlZW4gLmJpbiBmaWxlIGRhdGEgKi9cbiAgICBfbG9hZGluZ1NjcmVlbiA9IG51bGw7XG4gICAgLyoqIExpc3Qgb2YgY2FsbGJhY2tzIHRyaWdnZXJlZCB3aGVuIHRoZSBzY2VuZSBpcyBsb2FkZWQuICovXG4gICAgX3NjZW5lTG9hZGVkQ2FsbGJhY2sgPSBbXTtcbiAgICAvKiogSW1hZ2UgY2FjaGUuICovXG4gICAgX2ltYWdlcyA9IFtudWxsXTtcbiAgICAvKiogQ29tcG9uZW50IGluc3RhbmNlcy4gKi9cbiAgICBfY29tcG9uZW50cyA9IG51bGw7XG4gICAgLyoqIENvbXBvbmVudCBUeXBlIGluZm8uICovXG4gICAgX2NvbXBvbmVudFR5cGVzID0gW107XG4gICAgLyoqIEluZGV4IHBlciBjb21wb25lbnQgdHlwZSBuYW1lLiAqL1xuICAgIF9jb21wb25lbnRUeXBlSW5kaWNlcyA9IHt9O1xuICAgIC8qKiBXb25kZXJsYW5kIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBfZW5naW5lID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhpcyBydW50aW1lIGlzIHVzaW5nIHBoeXN4LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIF93aXRoUGh5c1ggPSBmYWxzZTtcbiAgICAvKiogRGVjb2RlciBmb3IgVVRGOCBgQXJyYXlCdWZmZXJgIHRvIEphdmFTY3JpcHQgc3RyaW5nLiAqL1xuICAgIF91dGY4RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpO1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdHJhdGlvbiBpbmRleCBvZiB7QGxpbmsgQnJva2VuQ29tcG9uZW50fS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byByZXR1cm4gZHVtbXkgaW5zdGFuY2VzIHdoZW4gYSBjb21wb25lbnRcbiAgICAgKiBpc24ndCByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9icm9rZW5Db21wb25lbnRJbmRleCA9IDA7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBXZWJBc3NlbWJseSA8PiBBUEkgYnJpZGdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRocmVhZHMgYHRydWVgIGlmIHRoZSBydW50aW1lIHVzZWQgaGFzIHRocmVhZHMgc3VwcG9ydFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRocmVhZHMpIHtcbiAgICAgICAgaWYgKHRocmVhZHMpIHtcbiAgICAgICAgICAgIHRoaXMuVVRGOFZpZXdUb1N0cmluZyA9IChzLCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZSh0aGlzLkhFQVBVOC5zbGljZShzLCBlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5VVEY4Vmlld1RvU3RyaW5nID0gKHMsIGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKHRoaXMuSEVBUFU4LnN1YmFycmF5KHMsIGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYnJva2VuQ29tcG9uZW50SW5kZXggPSB0aGlzLl9yZWdpc3RlckNvbXBvbmVudChCcm9rZW5Db21wb25lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgY2FjaGUgb2YgdGhlIGxpYnJhcnkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBTaG91bGQgb25seSBiZSBjYWxsZWQgd2hlbiB0ZWFyaW5nIGRvd24gdGhlIHJ1bnRpbWUuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBudWxsO1xuICAgICAgICAvKiBDYWxsZWQgZmlyc3QgdG8gcGVyZm9ybSBjbGVhbnVwLiAqL1xuICAgICAgICB0aGlzLl93bF9yZXNldCgpO1xuICAgICAgICB0aGlzLl9pbWFnZXMubGVuZ3RoID0gMTtcbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVzID0gW107XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzID0ge307XG4gICAgICAgIHRoaXMuX2Jyb2tlbkNvbXBvbmVudEluZGV4ID0gdGhpcy5fcmVnaXN0ZXJDb21wb25lbnQoQnJva2VuQ29tcG9uZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjdG9yICBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudCB0eXBlbmFtZSAoZS5nLiwgYCdjdXJzb3ItY29tcG9uZW50J2ApLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzUmVnaXN0ZXJlZCh0eXBlKSB7XG4gICAgICAgIHJldHVybiB0eXBlIGluIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIGxlZ2FjeSBjb21wb25lbnQgaW4gdGhpcyBFbXNjcmlwdGVuIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGVOYW1lIFRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGFyYW1ldGVycyAocHJvcGVydGllcykuXG4gICAgICogQHBhcmFtIG9iamVjdCBUaGUgb2JqZWN0J3MgcHJvdG90eXBlLlxuICAgICAqIEByZXR1cm5zIFRoZSByZWdpc3RyYXRpb24gaW5kZXhcbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJDb21wb25lbnRMZWdhY3kodHlwZU5hbWUsIHBhcmFtcywgb2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjbGFzcyBDdXN0b21Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAgICB9O1xuICAgICAgICBjdG9yLlR5cGVOYW1lID0gdHlwZU5hbWU7XG4gICAgICAgIGN0b3IuUHJvcGVydGllcyA9IHBhcmFtcztcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdG9yLnByb3RvdHlwZSwgb2JqZWN0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyQ29tcG9uZW50KGN0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIGNsYXNzIGNvbXBvbmVudCBpbiB0aGlzIEVtc2NyaXB0ZW4gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3RvciBUaGUgY2xhc3MgdG8gcmVnaXN0ZXIuXG4gICAgICogQHJldHVybnMgVGhlIHJlZ2lzdHJhdGlvbiBpbmRleC5cbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJDb21wb25lbnQoY3Rvcikge1xuICAgICAgICBpZiAoIWN0b3IuVHlwZU5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIG5hbWUgcHJvdmlkZWQgZm9yIGNvbXBvbmVudC4nKTtcbiAgICAgICAgaWYgKCFjdG9yLnByb3RvdHlwZS5fdHJpZ2dlckluaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgcmVnaXN0ZXJDb21wb25lbnQoKTogQ29tcG9uZW50ICR7Y3Rvci5UeXBlTmFtZX0gbXVzdCBleHRlbmQgQ29tcG9uZW50YCk7XG4gICAgICAgIH1cbiAgICAgICAgaW5oZXJpdFByb3BlcnRpZXMoY3Rvcik7XG4gICAgICAgIF9zZXR1cERlZmF1bHRzKGN0b3IpO1xuICAgICAgICBfc2V0UHJvcGVydHlPcmRlcihjdG9yKTtcbiAgICAgICAgY29uc3QgdHlwZUluZGV4ID0gY3Rvci5UeXBlTmFtZSBpbiB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1xuICAgICAgICAgICAgPyB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXVxuICAgICAgICAgICAgOiB0aGlzLl9jb21wb25lbnRUeXBlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVzW3R5cGVJbmRleF0gPSBjdG9yO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXSA9IHR5cGVJbmRleDtcbiAgICAgICAgaWYgKGN0b3IgPT09IEJyb2tlbkNvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybiB0eXBlSW5kZXg7XG4gICAgICAgIHRoaXMuX2xvZy5pbmZvKExvZ1RhZy5FbmdpbmUsICdSZWdpc3RlcmVkIGNvbXBvbmVudCcsIGN0b3IuVHlwZU5hbWUsIGAoY2xhc3MgJHtjdG9yLm5hbWV9KWAsICd3aXRoIGluZGV4JywgdHlwZUluZGV4KTtcbiAgICAgICAgaWYgKGN0b3Iub25SZWdpc3RlcilcbiAgICAgICAgICAgIGN0b3Iub25SZWdpc3Rlcih0aGlzLl9lbmdpbmUpO1xuICAgICAgICByZXR1cm4gdHlwZUluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSB0aGUgcmVxdWVzdGVkIGFtb3VudCBvZiB0ZW1wb3JhcnkgbWVtb3J5XG4gICAgICogaW4gdGhpcyBXQVNNIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgVGhlIG51bWJlciBvZiBieXRlcyB0byBhbGxvY2F0ZVxuICAgICAqL1xuICAgIGFsbG9jYXRlVGVtcE1lbW9yeShzaXplKSB7XG4gICAgICAgIHRoaXMuX2xvZy5pbmZvKExvZ1RhZy5FbmdpbmUsICdBbGxvY2F0aW5nIHRlbXAgbWVtOicsIHNpemUpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtU2l6ZSA9IHNpemU7XG4gICAgICAgIGlmICh0aGlzLl90ZW1wTWVtKVxuICAgICAgICAgICAgdGhpcy5fZnJlZSh0aGlzLl90ZW1wTWVtKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbSA9IHRoaXMuX21hbGxvYyh0aGlzLl90ZW1wTWVtU2l6ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVtcE1lbW9yeSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAdG9kbzogRGVsZXRlIHRoaXMgYW5kIG9ubHkga2VlcCBgYWxsb2NhdGVUZW1wTWVtb3J5YFxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgTnVtYmVyIG9mIGJ5dGVzIHRvIGFsbG9jYXRlXG4gICAgICovXG4gICAgcmVxdWlyZVRlbXBNZW0oc2l6ZSkge1xuICAgICAgICBpZiAodGhpcy5fdGVtcE1lbVNpemUgPj0gc2l6ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogR3JvdyBpbiAxa2IgaW5jcmVtZW50cyAqL1xuICAgICAgICB0aGlzLmFsbG9jYXRlVGVtcE1lbW9yeShNYXRoLmNlaWwoc2l6ZSAvIDEwMjQpICogMTAyNCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdGVtcG9yYXJ5IG1lbW9yeSB2aWV3cy4gVGhpcyBtdXN0IGJlIGNhbGxlZCB3aGVuZXZlciB0aGVcbiAgICAgKiB0ZW1wb3JhcnkgbWVtb3J5IGFkZHJlc3MgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB1cGRhdGVUZW1wTWVtb3J5KCkge1xuICAgICAgICB0aGlzLl90ZW1wTWVtRmxvYXQgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbUludCA9IG5ldyBJbnQzMkFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheSh0aGlzLkhFQVA4LmJ1ZmZlciwgdGhpcy5fdGVtcE1lbSwgdGhpcy5fdGVtcE1lbVNpemUgPj4gMik7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1VaW50MTYgPSBuZXcgVWludDE2QXJyYXkodGhpcy5IRUFQOC5idWZmZXIsIHRoaXMuX3RlbXBNZW0sIHRoaXMuX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDggPSBuZXcgVWludDhBcnJheSh0aGlzLkhFQVA4LmJ1ZmZlciwgdGhpcy5fdGVtcE1lbSwgdGhpcy5fdGVtcE1lbVNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDggYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWRcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeVxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJVOChjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50ODtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVpbnQxNiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclUxNihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogMik7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDE2O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJVMzIoY291bnQpIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbVVpbnQzMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGludDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJJMzIoY291bnQpIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbUludDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZsb2F0MzIgYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWQuXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnkuXG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlckYzMihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtRmxvYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgdGhlIHN0cmluZyBpbnRvIHRlbXBvcmFyeSBXQVNNIG1lbW9yeSBhbmQgcmV0cmlldmUgdGhlIHBvaW50ZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCB3aWxsIGNvbXB1dGUgdGhlIHN0cmxlbiBhbmQgYXBwZW5kIGEgYFxcMGAuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcmVzdWx0IHNob3VsZCBiZSB1c2VkICoqZGlyZWN0bHkqKiBvdGhlcndpc2UgaXQgbWlnaHQgZ2V0XG4gICAgICogb3ZlcnJpZGRlbiBieSBhbnkgbmV4dCBjYWxsIG1vZGlmeWluZyB0aGUgdGVtcG9yYXJ5IG1lbW9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB0byB3cml0ZSB0byB0ZW1wb3JhcnkgbWVtb3J5XG4gICAgICogQHBhcmFtIGJ5dGVPZmZzZXQgVGhlIHN0YXJ0aW5nIGJ5dGUgb2Zmc2V0IGluIHRoZSB0ZW1wb3JhcnkgbWVtb3J5IGF0IHdoaWNoXG4gICAgICogICAgIHRoZSBzdHJpbmcgc2hvdWxkIGJlIHdyaXR0ZW4uIFRoaXMgaXMgdXNlZnVsIHdoZW4gdXNpbmcgbXVsdGlwbGUgdGVtcG9yYXJpZXMuXG4gICAgICogQHJldHVybiBUaGUgdGVtcG9yYXJ5IHBvaW50ZXIgb250byB0aGUgV0FTTSBtZW1vcnlcbiAgICAgKi9cbiAgICB0ZW1wVVRGOChzdHIsIGJ5dGVPZmZzZXQgPSAwKSB7XG4gICAgICAgIGNvbnN0IHN0ckxlbiA9IHRoaXMubGVuZ3RoQnl0ZXNVVEY4KHN0cikgKyAxO1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKHN0ckxlbiArIGJ5dGVPZmZzZXQpO1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl90ZW1wTWVtICsgYnl0ZU9mZnNldDtcbiAgICAgICAgdGhpcy5zdHJpbmdUb1VURjgoc3RyLCBwdHIsIHN0ckxlbik7XG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgdGhlIGJ1ZmZlciBpbnRvIHRoZSBXQVNNIGhlYXAuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcmV0dXJuZWQgcG9pbnRlciBtdXN0IGJlIGZyZWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1ZmZlciBUaGUgYnVmZmVyIHRvIGNvcHkgaW50byB0aGUgaGVhcC5cbiAgICAgKiBAcmV0dXJucyBBbiBhbGxvY2F0ZWQgcG9pbnRlciwgdGhhdCBtdXN0IGJlIGZyZWUgYWZ0ZXIgdXNlLlxuICAgICAqL1xuICAgIGNvcHlCdWZmZXJUb0hlYXAoYnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fbWFsbG9jKHNpemUpO1xuICAgICAgICB0aGlzLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSwgcHRyKTtcbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHJ1bnRpbWUgc3VwcG9ydHMgcGh5c3ggb3Igbm90LlxuICAgICAqL1xuICAgIGdldCB3aXRoUGh5c1goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGh5c1g7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZW5naW5lIGluc3RhbmNlIGhvbGRpbmcgdGhpcyBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgX3NldEVuZ2luZShlbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgIH1cbiAgICAvKiBXZWJBc3NlbWJseSB0byBKUyBjYWxsIGJyaWRnZS4gKi9cbiAgICBfd2xqc194cl9zZXNzaW9uX3N0YXJ0KG1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VuZ2luZS54ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lLnhyID0gbmV3IFhSKHRoaXMsIG1vZGUpO1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQubm90aWZ5KHRoaXMud2VieHJfc2Vzc2lvbiwgbW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3dsanNfeHJfc2Vzc2lvbl9lbmQoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RW1pdHRlciA9IHRoaXMuX2VuZ2luZS5vblhSU2Vzc2lvblN0YXJ0O1xuICAgICAgICBpZiAoc3RhcnRFbWl0dGVyIGluc3RhbmNlb2YgUmV0YWluRW1pdHRlcilcbiAgICAgICAgICAgIHN0YXJ0RW1pdHRlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25FbmQubm90aWZ5KCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS54ciA9IG51bGw7XG4gICAgfVxuICAgIF93bGpzX3hyX2Rpc2FibGUoKSB7XG4gICAgICAgIC8qIEB0b2RvIFRoaXMgY291bGQgZGlyZWN0bHkgYmUgZnVsbHkgaGFuZGxlZCBpbiBKUy4gKi9cbiAgICAgICAgdGhpcy5fZW5naW5lLmFyU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2VuZ2luZS52clN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBfd2xqc19pbml0KHdpdGhQaHlzWCkge1xuICAgICAgICB0aGlzLl93aXRoUGh5c1ggPSB3aXRoUGh5c1g7XG4gICAgICAgIC8qIFRhcmdldCBtZW1vcnkgZm9yIEpTIEFQSSBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYXJyYXlzICovXG4gICAgICAgIHRoaXMuYWxsb2NhdGVUZW1wTWVtb3J5KDEwMjQpO1xuICAgIH1cbiAgICBfd2xqc19zY2VuZV9zd2l0Y2goaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tpbmRleF07XG4gICAgICAgIC8qIFNjZW5lIGNhbiBiZSBudWxsIGR1cmluZyB0ZXN0aW5nIHdpdGggYGVuZ2luZS5yZXNldCgpYCAqL1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzID0gc2NlbmU/Ll9qc0NvbXBvbmVudHMgPz8gbnVsbDtcbiAgICB9XG4gICAgX3dsanNfZGVzdHJveV9pbWFnZShpbmRleCkge1xuICAgICAgICBjb25zdCBpbWcgPSB0aGlzLl9pbWFnZXNbaW5kZXhdO1xuICAgICAgICBpZiAoIWltZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5faW1hZ2VzW2luZGV4XSA9IG51bGw7XG4gICAgICAgIGlmIChpbWcuc3JjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGltZy5zcmMgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1nLm9ubG9hZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1nLm9uZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIF93bGpzX3NjZW5lX2luaXRpYWxpemUoc2NlbmVJbmRleCwgaWRzUHRyLCBpZHNFbmQsIHBhcmFtRGF0YVB0ciwgcGFyYW1EYXRhRW5kUHRyLCBvZmZzZXRzUHRyLCBvZmZzZXRzRW5kUHRyKSB7XG4gICAgICAgIGNvbnN0IGNib3IgPSB0aGlzLkhFQVBVOC5zdWJhcnJheShwYXJhbURhdGFQdHIsIHBhcmFtRGF0YUVuZFB0cik7XG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB0aGlzLkhFQVBVMzIuc3ViYXJyYXkob2Zmc2V0c1B0ciA+Pj4gMiwgb2Zmc2V0c0VuZFB0ciA+Pj4gMik7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuSEVBUFUxNi5zdWJhcnJheShpZHNQdHIgPj4+IDEsIGlkc0VuZCA+Pj4gMSk7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVJbmRleF07XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBzY2VuZS5fanNDb21wb25lbnRzO1xuICAgICAgICBsZXQgZGVjb2RlZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlY29kZWQgPSBDQk9SLmRlY29kZShjYm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdFeGNlcHRpb24gZHVyaW5nIGNvbXBvbmVudCBwYXJhbWV0ZXIgZGVjb2RpbmcnKTtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGVjb2RlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuRW5naW5lLCAnUGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWNvZGVkLmxlbmd0aCAhPT0gaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsIGBQYXJhbWV0ZXIgZGF0YSBoYXMgc2l6ZSAke2RlY29kZWQubGVuZ3RofSBidXQgZXhwZWN0ZWQgJHtpZHMubGVuZ3RofWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVjb2RlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmVJbmRleCwgaWRzW2ldKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleF9mb3JfaWQoaWQpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1tpbmRleF07XG4gICAgICAgICAgICBjb25zdCBjdG9yID0gY29tcG9uZW50LmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKGN0b3IgPT0gQnJva2VuQ29tcG9uZW50KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1OYW1lcyA9IGN0b3IuX3Byb3BlcnR5T3JkZXI7XG4gICAgICAgICAgICBjb25zdCBwYXJhbVZhbHVlcyA9IGRlY29kZWRbaV07XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1WYWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdDb21wb25lbnQgcGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtVmFsdWVzLmxlbmd0aCAhPT0gcGFyYW1OYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkVuZ2luZSwgYENvbXBvbmVudCBwYXJhbWV0ZXIgZGF0YSBoYXMgc2l6ZSAke3BhcmFtVmFsdWVzLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7cGFyYW1OYW1lcy5sZW5ndGh9YCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcmFtVmFsdWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhcmFtTmFtZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGN0b3IuUHJvcGVydGllc1tuYW1lXS50eXBlO1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtVmFsdWVzW2pdO1xuICAgICAgICAgICAgICAgIC8qIFRoaXMgc2tpcHMgdW5zZXQgcmVzb3VyY2UgcGFyYW1ldGVycyBhcyB0aG9zZSBhcmUgc2VudFxuICAgICAgICAgICAgICAgICAqIGRpcmVjdGx5IHdpdGggdHlwZSBudWxsLiBPZmZzZXRzIGZvciBJbnQgYW5kIEZsb2F0IHR5cGVzXG4gICAgICAgICAgICAgICAgICogc2hvdWxkIGFsd2F5cyBiZSAwLiAqL1xuICAgICAgICAgICAgICAgIC8qKiBAdG9kbyBDQk9SIHRhZyB0byBtYXJrIHJlc291cmNlcz8gV2FzdGVzIGEgYnl0ZSB0aG91Z2guICovXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gb2Zmc2V0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5Cb29sOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuSW50OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuRmxvYXQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5TdHJpbmc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5FbnVtOlxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90aGluZyB0byBkbyAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5PYmplY3Q6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuX3dsX29iamVjdF9pZChzY2VuZS5faW5kZXgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyBzY2VuZS53cmFwKGlkKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLk1lc2g6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNjZW5lLmdyb3VwLm1lc2hlcy53cmFwKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuVGV4dHVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2NlbmUuZ3JvdXAudGV4dHVyZXMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLk1hdGVyaWFsOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzY2VuZS5ncm91cC5tYXRlcmlhbHMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkFuaW1hdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2NlbmUuYW5pbWF0aW9ucy53cmFwKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuU2tpbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2NlbmUuc2tpbnMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkNvbG9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29sb3JzIGFyZSBzZW50IGFzIHR5cGVkIGFycmF5cy4gTm9ybWFsaXplIHBvc2l0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBpbnRlZ2VyIHZhbHVlcyB0byAwLTEuIERvbid0IGFzc3VtZSBhbnkgYml0IHNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGhlcmUsIGNvdWxkIGJlIFVpbnQxNkFycmF5IGFzIHdlbGwuICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXggPSAoMSA8PCAodmFsdWUuQllURVNfUEVSX0VMRU1FTlQgKiA4KSkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBGbG9hdDMyQXJyYXkuZnJvbSh2YWx1ZSwgKGYsIF8pID0+IGYgLyBtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fdHJhbnNsYXRpb24oc2NlbmUsIGNvbXBvbmVudCwgcGFyYW0sIHZhbHVlUHRyLCB2YWx1ZUVuZFB0cikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVdLl9qc0NvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHZhbHVlUHRyLCB2YWx1ZUVuZFB0cik7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjb21wb25lbnQuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHBhcmFtTmFtZSA9IGN0b3IuX3Byb3BlcnR5T3JkZXJbcGFyYW1dO1xuICAgICAgICBjb21wW3BhcmFtTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgX3dsanNfZ2V0X2NvbXBvbmVudF90eXBlX2luZGV4KG5hbWVQdHIsIG5hbWVFbmRQdHIpIHtcbiAgICAgICAgY29uc3QgdHlwZW5hbWUgPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcobmFtZVB0ciwgbmFtZUVuZFB0cik7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXNbdHlwZW5hbWVdO1xuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jyb2tlbkNvbXBvbmVudEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgX3dsanNfY29tcG9uZW50X2NyZWF0ZShzY2VuZUluZGV4LCBpbmRleCwgaWQsIHR5cGUsIG9iamVjdCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdO1xuICAgICAgICBzY2VuZS5fY29tcG9uZW50cy5jcmVhdGVKcyhpbmRleCwgaWQsIHR5cGUsIG9iamVjdCk7XG4gICAgfVxuICAgIF93bGpzX2NvbXBvbmVudF9pbml0KHNjZW5lLCBjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lXS5fanNDb21wb25lbnRzO1xuICAgICAgICBjb25zdCBjID0gY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VySW5pdCgpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfdXBkYXRlKGNvbXBvbmVudCwgZHQpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlclVwZGF0ZShkdCk7XG4gICAgfVxuICAgIF93bGpzX2NvbXBvbmVudF9vbkFjdGl2YXRlKGNvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyT25BY3RpdmF0ZSgpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfb25EZWFjdGl2YXRlKGNvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyT25EZWFjdGl2YXRlKCk7XG4gICAgfVxuICAgIF93bGpzX2NvbXBvbmVudF9tYXJrRGVzdHJveWVkKHNjZW5lSW5kZXgsIG1hbmFnZXIsIGNvbXBvbmVudElkKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVJbmRleF07XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHNjZW5lLl9jb21wb25lbnRzLmdldChtYW5hZ2VyLCBjb21wb25lbnRJZCk7XG4gICAgICAgIGNvbXBvbmVudD8uX3RyaWdnZXJPbkRlc3Ryb3koKTtcbiAgICB9XG4gICAgX3dsanNfc3dhcChzY2VuZSwgYSwgYikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVdLl9qc0NvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEEgPSBjb21wb25lbnRzW2FdO1xuICAgICAgICBjb21wb25lbnRzW2FdID0gY29tcG9uZW50c1tiXTtcbiAgICAgICAgY29tcG9uZW50c1tiXSA9IGNvbXBvbmVudEE7XG4gICAgfVxuICAgIF93bGpzX2NvcHkoc3JjU2NlbmVJbmRleCwgc3JjSW5kZXgsIGRzdFNjZW5lSW5kZXgsIGRzdEluZGV4LCBvZmZzZXRzUHRyKSB7XG4gICAgICAgIGNvbnN0IHNyY1NjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc3JjU2NlbmVJbmRleF07XG4gICAgICAgIGNvbnN0IGRzdFNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbZHN0U2NlbmVJbmRleF07XG4gICAgICAgIGNvbnN0IGRlc3RDb21wID0gZHN0U2NlbmUuX2pzQ29tcG9uZW50c1tkc3RJbmRleF07XG4gICAgICAgIGNvbnN0IHNyY0NvbXAgPSBzcmNTY2VuZS5fanNDb21wb25lbnRzW3NyY0luZGV4XTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlc3RDb21wLl9jb3B5KHNyY0NvbXAsIG9mZnNldHNQdHIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHtkZXN0Q29tcC50eXBlfSBjb3B5KCkgb24gb2JqZWN0ICR7ZGVzdENvbXAub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yd2FyZCBhbiBhbmltYXRpb24gZXZlbnQgdG8gYSBjb3JyZXNwb25kaW5nXG4gICAgICoge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudH1cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS4gUGxlYXNlIGhhdmUgYSBsb29rIGF0XG4gICAgICoge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudC5vbkV2ZW50fSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudElkIENvbXBvbmVudCBpZCBpbiB0aGUgbWFuYWdlclxuICAgICAqIEBwYXJhbSBuYW1lUHRyIFBvaW50ZXIgdG8gVVRGOCBldmVudCBuYW1lXG4gICAgICogQHBhcmFtIG5hbWVFbmRQdHIgUG9pbnRlciB0byBlbmQgb2YgVVRGOCBldmVudCBuYW1lXG4gICAgICovXG4gICAgX3dsanNfdHJpZ2dlcl9hbmltYXRpb25FdmVudChjb21wb25lbnRJZCwgbmFtZVB0ciwgbmFtZUVuZFB0cikge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5zY2VuZTtcbiAgICAgICAgY29uc3QgY29tcCA9IHNjZW5lLl9jb21wb25lbnRzLndyYXBBbmltYXRpb24oY29tcG9uZW50SWQpO1xuICAgICAgICBjb25zdCBuYW1lU3RyID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKG5hbWVQdHIsIG5hbWVFbmRQdHIpO1xuICAgICAgICBjb21wLm9uRXZlbnQubm90aWZ5KG5hbWVTdHIpO1xuICAgIH1cbn1cbi8qXG4gKiBBcGkgPD4gUnVudGltZSBjb21wYXRpYmlsaXR5LlxuICpcbiAqIFNvbWUgZmVhdHVyZXMgZXhwb3NlZCBpbiB0aGUgQVBJIGFyZSBvbmx5IGF2YWlsYWJsZSBmcm9tIGEgc3BlY2lmaWNcbiAqIHJ1bnRpbWUgdmVyc2lvbi5cbiAqXG4gKiBFdmVyeSBhZGRlZCBmZWF0dXJlIG11c3QgdGhyb3cgYnkgZGVmYXVsdC4gSWYgdGhlIHJ1bnRpbWUgbG9hZGVkXG4gKiBoYXMgdGhlIHNwZWNpZmljIGZlYXR1cmUsIHRoZSBtZXRob2Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSBFbXNjcmlwdGVuXG4gKiB1cG9uIGxvYWRpbmcuXG4gKi9cbi8qKlxuICogVGhyb3dpbmcgZnVuY3Rpb24gdXNlZCBmb3IgZmVhdHVyZXMgYWRkZWQgaW4gYSBwYXRjaCB2ZXJzaW9uLlxuICpcbiAqICMjIyMgVXNhZ2VcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgcmVxdWlyZVJ1bnRpbWUxXzFfMSA9IHRocm93SW52YWxpZFJ1bnRpbWUoJzEuMS4xJyk7XG4gKiBXQVNNLnByb3RvdHlwZS5fd2xfbmV3X2Z1bmN0aW9uID0gcmVxdWlyZVJ1bnRpbWUxXzFfMTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB2ZXJzaW9uIFRoZSB2ZXJzaW9uIGluIHdoaWNoIHRoZSBmZWF0dXJlIHdhcyBhZGRlZC5cbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCB3aWxsIHRocm93IHdoZW4gY2FsbGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0ludmFsaWRSdW50aW1lKHZlcnNpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZlYXR1cmUgYWRkZWQgaW4gdmVyc2lvbiAke3ZlcnNpb259LmAgK1xuICAgICAgICAgICAgYFxcblxcdFx1MjE5MiBQbGVhc2UgdXNlIGEgV29uZGVybGFuZCBFbmdpbmUgZWRpdG9yIHZlcnNpb24gPj0gJHt2ZXJzaW9ufWApO1xuICAgIH07XG59XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUZXh0dXJlLCBNZXNoQ29tcG9uZW50IH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2FwaVwiO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanNcIjtcbmNsYXNzIER5bmFtaWNUZXh0dXJlQ2FjaGUge1xuICAgIHRleHR1cmVzO1xuICAgIGVuZ2luZTtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlcyA9IHt9O1xuICAgICAgICB0aGlzLmVuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG4gICAgbG9hZFRleHR1cmVzKHVybCwgY29sdW1ucywgcm93cykge1xuICAgICAgICBpZiAoIXRoaXMudGV4dHVyZXMuaGFzT3duUHJvcGVydHkodXJsKSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1t1cmxdID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IHVybDtcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJDb3VsZCBub3QgZ2V0IGNvbnRleHRcIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcHJpdGVXaWR0aCA9IGltYWdlLndpZHRoIC8gY29sdW1ucztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwcml0ZUhlaWdodCA9IGltYWdlLmhlaWdodCAvIHJvd3M7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgcm93czsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbHVtbnM7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYyA9IHRoaXMuY29weVBhcnRPZkNhbnZhcyhjYW52YXMsIHggKiBzcHJpdGVXaWR0aCwgeSAqIHNwcml0ZUhlaWdodCwgc3ByaXRlV2lkdGgsIHNwcml0ZUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHR1cmVQYyA9IG5ldyBUZXh0dXJlKHRoaXMuZW5naW5lLCBwYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZXMucHVzaCh0ZXh0dXJlUGMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGV4dHVyZXMpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlc1t1cmxdO1xuICAgIH1cbiAgICBjb3B5UGFydE9mQ2FudmFzKGNhbnZhcywgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICBsZXQgY29weSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNvcHkud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY29weS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGxldCBjdHgyID0gY29weS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIGN0eDIuZHJhd0ltYWdlKGNhbnZhcywgeCwgeSwgd2lkdGgsIGhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbn1cbmxldCB0ZXh0dXJlQ2FjaGU7XG5leHBvcnQgY2xhc3MgRmxpcGJvb2sgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9IFwiZmxpcGJvb2tcIjtcbiAgICBiYXNlO1xuICAgIHVybCA9IFwiXCI7XG4gICAgdXJsRW1pc3NpdmUgPSBcIlwiO1xuICAgIGNvbHVtbnMgPSA0O1xuICAgIHJvd3MgPSA0O1xuICAgIHNwZWVkID0gOC4wO1xuICAgIHRleHR1cmVzID0gW107XG4gICAgbG9hZGVkID0gZmFsc2U7XG4gICAgaW5kZXggPSAwO1xuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICghdGV4dHVyZUNhY2hlKSB7XG4gICAgICAgICAgICB0ZXh0dXJlQ2FjaGUgPSBuZXcgRHluYW1pY1RleHR1cmVDYWNoZSh0aGlzLmVuZ2luZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRleHR1cmVzUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgdGV4dHVyZXNQcm9taXNlcy5wdXNoKHRleHR1cmVDYWNoZS5sb2FkVGV4dHVyZXModGhpcy51cmwsIHRoaXMuY29sdW1ucywgdGhpcy5yb3dzKSk7XG4gICAgICAgIGlmICh0aGlzLnVybEVtaXNzaXZlKSB7XG4gICAgICAgICAgICB0ZXh0dXJlc1Byb21pc2VzLnB1c2godGV4dHVyZUNhY2hlLmxvYWRUZXh0dXJlcyh0aGlzLnVybEVtaXNzaXZlLCB0aGlzLmNvbHVtbnMsIHRoaXMucm93cykpO1xuICAgICAgICB9XG4gICAgICAgIFByb21pc2UuYWxsKHRleHR1cmVzUHJvbWlzZXMpLnRoZW4oKHRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMudXJsRW1pc3NpdmUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleFswXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVzLnB1c2godGhpcy5jcmVhdGVNYXRlcmlhbCh0aGlzLmJhc2UsIHRleFswXVtpXSwgdGV4WzFdW2ldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXhbMF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlcy5wdXNoKHRoaXMuY3JlYXRlTWF0ZXJpYWwodGhpcy5iYXNlLCB0ZXhbMF1baV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy50ZXh0dXJlcy5sZW5ndGgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlTWF0ZXJpYWwoYmFzZSwgdGV4dHVyZSwgZW1pc3NpdmVUZXh0dXJlID0gbnVsbCkge1xuICAgICAgICBjb25zdCBtYXQgPSBiYXNlLmNsb25lKCk7XG4gICAgICAgIGlmICghbWF0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGNsb25lIG1hdGVyaWFsXCIpO1xuICAgICAgICBpZiAobWF0LnBpcGVsaW5lID09IFwiRmxhdCBPcGFxdWUgVGV4dHVyZWRcIlxuICAgICAgICAgICAgfHwgbWF0LnBpcGVsaW5lLnN0YXJ0c1dpdGgoXCJGbGF0U29yc2tvb3RcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGZsYXRNYXQgPSBtYXQ7XG4gICAgICAgICAgICBmbGF0TWF0LmZsYXRUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIGlmIChtYXQucGlwZWxpbmUgPT0gXCJGbGF0U29yc2tvb3QgRW1pc3NpdmVcIikge1xuICAgICAgICAgICAgICAgIGZsYXRNYXQuZmxhdFRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgICAgIGlmIChlbWlzc2l2ZVRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhdE1hdC5lbWlzc2l2ZVRleHR1cmUgPSBlbWlzc2l2ZVRleHR1cmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGlwZWxpbmUgJHttYXQucGlwZWxpbmV9IG5vdCBzdXBwb3J0ZWQgYnkgZmxpcGJvb2tgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0O1xuICAgIH1cbiAgICBtYXQgPSBudWxsO1xuICAgIHQgPSAwO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm1hdCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcbiAgICAgICAgdGhpcy50ID0gTWF0aC5yYW5kb20oKSAqIHRoaXMuc3BlZWQ7XG4gICAgfVxuICAgIHByZXZpb3VzSW5kZXggPSAtMTtcbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy50ICs9IGR0ICogdGhpcy5zcGVlZDtcbiAgICAgICAgdGhpcy5pbmRleCA9IH5+dGhpcy50ICUgdGhpcy50ZXh0dXJlcy5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLnRleHR1cmVzICYmXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzLmxlbmd0aCAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0luZGV4ICE9IHRoaXMuaW5kZXggJiZcbiAgICAgICAgICAgIHRoaXMubWF0KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzSW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICAgICAgdGhpcy5tYXQubWF0ZXJpYWwgPSB0aGlzLnRleHR1cmVzW3RoaXMuaW5kZXhdO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWF0ZXJpYWwoKVxuXSwgRmxpcGJvb2sucHJvdG90eXBlLCBcImJhc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZyhcIlwiKVxuXSwgRmxpcGJvb2sucHJvdG90eXBlLCBcInVybFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuc3RyaW5nKFwiXCIpXG5dLCBGbGlwYm9vay5wcm90b3R5cGUsIFwidXJsRW1pc3NpdmVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCg0KVxuXSwgRmxpcGJvb2sucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCg0KVxuXSwgRmxpcGJvb2sucHJvdG90eXBlLCBcInJvd3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDguMClcbl0sIEZsaXBib29rLnByb3RvdHlwZSwgXCJzcGVlZFwiLCB2b2lkIDApO1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gXCJAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qc1wiO1xuZXhwb3J0IGNsYXNzIFByZWZhYiBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3ByZWZhYic7XG4gICAgbmFtZTtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZygpXG5dLCBQcmVmYWIucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcbjtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIE1lc2hDb21wb25lbnQsIENvbGxpc2lvbkNvbXBvbmVudCwgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpXCI7XG5pbXBvcnQgeyBQcmVmYWIgfSBmcm9tIFwiLi9wcmVmYWIuanNcIjtcbmV4cG9ydCBjbGFzcyBQcmVmYWJTdG9yYWdlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSBcInByZWZhYi1zdG9yYWdlXCI7XG4gICAgcHJlZmFicyA9IHt9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLm9iamVjdC5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBsZXQgY2hpbGRQcmVmYWIgPSBjaGlsZC5nZXRDb21wb25lbnQoUHJlZmFiKTtcbiAgICAgICAgICAgIGlmIChjaGlsZFByZWZhYikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZmFic1tjaGlsZFByZWZhYi5uYW1lXSA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIGNoaWxkLnNldFBvc2l0aW9uV29ybGQoWy0xMDAwLCAtMTAwMCwgLTEwMDBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSBhIHByZWZhYi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmYWJOYW1lIE5hbWUgb2YgdGhlIHByZWZhYiB0byBpbnN0YW50aWF0ZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdDNEfSBwYXJlbnRPYmplY3QgVGhlIG9iamVjdCB0byBwYXJlbnQgdGhlIHByZWZhYiB0byBhZnRlciBpbnN0YW50aWF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3QzRHx1bmRlZmluZWR9IFRoZSByb290IG9mIHRoZSBpbnN0YW50aWF0ZWQgcHJlZmFiLlxuICAgICAqL1xuICAgIGluc3RhbnRpYXRlKHByZWZhYk5hbWUsIHBhcmVudE9iamVjdCkge1xuICAgICAgICBsZXQgcHJlZmFiID0gdGhpcy5wcmVmYWJzW3ByZWZhYk5hbWVdO1xuICAgICAgICBpZiAoIXByZWZhYikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInRyeWluZyB0byBjcmVhdGUgXCIgKyBwcmVmYWJOYW1lICsgXCIgYnV0IHRoYXQgaXMgbm90IGEgcmVnaXN0ZXJkIHByZWZhYlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2JqID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KHBhcmVudE9iamVjdCk7XG4gICAgICAgIG9iai5uYW1lID0gcHJlZmFiTmFtZTtcbiAgICAgICAgb2JqLnNjYWxlTG9jYWwocHJlZmFiLmdldFNjYWxpbmdMb2NhbCgpKTtcbiAgICAgICAgb2JqLnNldFRyYW5zZm9ybUxvY2FsKHByZWZhYi5nZXRUcmFuc2Zvcm1Mb2NhbCgpKTtcbiAgICAgICAgdmFyIHByZWZhYk1lc2ggPSBwcmVmYWIuZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xuICAgICAgICBpZiAocHJlZmFiTWVzaCkge1xuICAgICAgICAgICAgbGV0IG5ld01lc2ggPSBvYmouYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xuICAgICAgICAgICAgaWYgKCFuZXdNZXNoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIm1lc2ggY29tcG9uZW50IGNvdWxkIG5vdCBiZSBhZGRlZCB0byBvYmplY3RcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3TWVzaC5tZXNoID0gcHJlZmFiTWVzaC5tZXNoO1xuICAgICAgICAgICAgbmV3TWVzaC5tYXRlcmlhbCA9IHByZWZhYk1lc2gubWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZWZhYkNvbGxpc2lvbiA9IHByZWZhYi5nZXRDb21wb25lbnQoQ29sbGlzaW9uQ29tcG9uZW50KTtcbiAgICAgICAgaWYgKHByZWZhYkNvbGxpc2lvbikge1xuICAgICAgICAgICAgbGV0IG5ld0NvbGxpc2lvbiA9IG9iai5hZGRDb21wb25lbnQoQ29sbGlzaW9uQ29tcG9uZW50KTtcbiAgICAgICAgICAgIGlmICghbmV3Q29sbGlzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImNvbGxpc2lvbiBjb21wb25lbnQgY291bGQgbm90IGJlIGFkZGVkIHRvIG9iamVjdFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdDb2xsaXNpb24uY29sbGlkZXIgPSBwcmVmYWJDb2xsaXNpb24uY29sbGlkZXI7XG4gICAgICAgICAgICBuZXdDb2xsaXNpb24uZXh0ZW50cyA9IHByZWZhYkNvbGxpc2lvbi5leHRlbnRzO1xuICAgICAgICAgICAgbmV3Q29sbGlzaW9uLmdyb3VwID0gcHJlZmFiQ29sbGlzaW9uLmdyb3VwO1xuICAgICAgICB9XG4gICAgICAgIG9iai5zZXREaXJ0eSgpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn1cbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanNcIjtcbmNvbnN0IGhhbmRlZG5lc3MgPSBbJ2xlZnQnLCAncmlnaHQnXTtcbmV4cG9ydCBjbGFzcyBTaG9vdEJhc2UgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdzaG9vdC1iYXNlJztcbiAgICBoYXB0aWNzID0gdHJ1ZTtcbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICBpbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKChzZXNzaW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChlLmlucHV0U291cmNlLmhhbmRlZG5lc3MgPT09IGhhbmRlZG5lc3NbdGhpcy5oYW5kZWRuZXNzXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXB0aWNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1bHNlKGUuaW5wdXRTb3VyY2UuZ2FtZXBhZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kbyBwYXNzIGN1cnJlbnQgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIHNob290XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvb3QodGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCgpLCB0aGlzLm9iamVjdC5nZXRSb3RhdGlvbldvcmxkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWxzZShnYW1lcGFkKSB7XG4gICAgICAgIHZhciBhY3R1YXRvcjtcbiAgICAgICAgaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmhhcHRpY0FjdHVhdG9ycykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFjdHVhdG9yID0gZ2FtZXBhZC5oYXB0aWNBY3R1YXRvcnNbMF07XG4gICAgICAgIGlmICghYWN0dWF0b3IpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGFjdHVhdG9yLnB1bHNlKDEsIDEwMCk7XG4gICAgfVxuICAgIHNob290KHRyYW5zZm9ybSwgcm90YXRpb24pIHsgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgU2hvb3RCYXNlLnByb3RvdHlwZSwgXCJoYXB0aWNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnTGVmdCcsICdSaWdodCddKVxuXSwgU2hvb3RCYXNlLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG47XG4iLCAiLyoqXG4gKiBDb21tb24gdXRpbGl0aWVzXG4gKiBAbW9kdWxlIGdsTWF0cml4XG4gKi9cbi8vIENvbmZpZ3VyYXRpb24gQ29uc3RhbnRzXG5leHBvcnQgdmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbmV4cG9ydCB2YXIgQVJSQVlfVFlQRSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG5leHBvcnQgdmFyIFJBTkRPTSA9IE1hdGgucmFuZG9tO1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIG9mIGFycmF5IHVzZWQgd2hlbiBjcmVhdGluZyBuZXcgdmVjdG9ycyBhbmQgbWF0cmljZXNcbiAqXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgQXJyYXlDb25zdHJ1Y3Rvcn0gdHlwZSBBcnJheSB0eXBlLCBzdWNoIGFzIEZsb2F0MzJBcnJheSBvciBBcnJheVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNYXRyaXhBcnJheVR5cGUodHlwZSkge1xuICBBUlJBWV9UWVBFID0gdHlwZTtcbn1cbnZhciBkZWdyZWUgPSBNYXRoLlBJIC8gMTgwO1xuLyoqXG4gKiBDb252ZXJ0IERlZ3JlZSBUbyBSYWRpYW5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBBbmdsZSBpbiBEZWdyZWVzXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFuKGEpIHtcbiAgcmV0dXJuIGEgKiBkZWdyZWU7XG59XG4vKipcbiAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IHRoZSBhcmd1bWVudHMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIHZhbHVlLCB3aXRoaW4gYW4gYWJzb2x1dGVcbiAqIG9yIHJlbGF0aXZlIHRvbGVyYW5jZSBvZiBnbE1hdHJpeC5FUFNJTE9OIChhbiBhYnNvbHV0ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgdmFsdWVzIGxlc3NcbiAqIHRoYW4gb3IgZXF1YWwgdG8gMS4wLCBhbmQgYSByZWxhdGl2ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgbGFyZ2VyIHZhbHVlcylcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgZmlyc3QgbnVtYmVyIHRvIHRlc3QuXG4gKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIG51bWJlciB0byB0ZXN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG51bWJlcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8PSBFUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhKSwgTWF0aC5hYnMoYikpO1xufVxuaWYgKCFNYXRoLmh5cG90KSBNYXRoLmh5cG90ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeSA9IDAsXG4gICAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgeSArPSBhcmd1bWVudHNbaV0gKiBhcmd1bWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gTWF0aC5zcXJ0KHkpO1xufTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDN4MyBNYXRyaXhcbiAqIEBtb2R1bGUgbWF0M1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQzXG4gKlxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3BpZXMgdGhlIHVwcGVyLWxlZnQgM3gzIHZhbHVlcyBpbnRvIHRoZSBnaXZlbiBtYXQzLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgM3gzIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgICB0aGUgc291cmNlIDR4NCBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDQob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbNF07XG4gIG91dFs0XSA9IGFbNV07XG4gIG91dFs1XSA9IGFbNl07XG4gIG91dFs2XSA9IGFbOF07XG4gIG91dFs3XSA9IGFbOV07XG4gIG91dFs4XSA9IGFbMTBdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDkpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0MyB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBtYXQzIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEByZXR1cm5zIHttYXQzfSBBIG5ldyBtYXQzXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMobTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMikge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0xMDtcbiAgb3V0WzRdID0gbTExO1xuICBvdXRbNV0gPSBtMTI7XG4gIG91dFs2XSA9IG0yMDtcbiAgb3V0WzddID0gbTIxO1xuICBvdXRbOF0gPSBtMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDMgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIG0wMCwgbTAxLCBtMDIsIG0xMCwgbTExLCBtMTIsIG0yMCwgbTIxLCBtMjIpIHtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTEwO1xuICBvdXRbNF0gPSBtMTE7XG4gIG91dFs1XSA9IG0xMjtcbiAgb3V0WzZdID0gbTIwO1xuICBvdXRbN10gPSBtMjE7XG4gIG91dFs4XSA9IG0yMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IGEgbWF0MyB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkob3V0KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zcG9zZSB0aGUgdmFsdWVzIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3Bvc2Uob3V0LCBhKSB7XG4gIC8vIElmIHdlIGFyZSB0cmFuc3Bvc2luZyBvdXJzZWx2ZXMgd2UgY2FuIHNraXAgYSBmZXcgc3RlcHMgYnV0IGhhdmUgdG8gY2FjaGUgc29tZSB2YWx1ZXNcbiAgaWYgKG91dCA9PT0gYSkge1xuICAgIHZhciBhMDEgPSBhWzFdLFxuICAgICAgICBhMDIgPSBhWzJdLFxuICAgICAgICBhMTIgPSBhWzVdO1xuICAgIG91dFsxXSA9IGFbM107XG4gICAgb3V0WzJdID0gYVs2XTtcbiAgICBvdXRbM10gPSBhMDE7XG4gICAgb3V0WzVdID0gYVs3XTtcbiAgICBvdXRbNl0gPSBhMDI7XG4gICAgb3V0WzddID0gYTEyO1xuICB9IGVsc2Uge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVszXTtcbiAgICBvdXRbMl0gPSBhWzZdO1xuICAgIG91dFszXSA9IGFbMV07XG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzddO1xuICAgIG91dFs2XSA9IGFbMl07XG4gICAgb3V0WzddID0gYVs1XTtcbiAgICBvdXRbOF0gPSBhWzhdO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogSW52ZXJ0cyBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICB2YXIgYjAxID0gYTIyICogYTExIC0gYTEyICogYTIxO1xuICB2YXIgYjExID0gLWEyMiAqIGExMCArIGExMiAqIGEyMDtcbiAgdmFyIGIyMSA9IGEyMSAqIGExMCAtIGExMSAqIGEyMDsgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuXG4gIHZhciBkZXQgPSBhMDAgKiBiMDEgKyBhMDEgKiBiMTEgKyBhMDIgKiBiMjE7XG5cbiAgaWYgKCFkZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGRldCA9IDEuMCAvIGRldDtcbiAgb3V0WzBdID0gYjAxICogZGV0O1xuICBvdXRbMV0gPSAoLWEyMiAqIGEwMSArIGEwMiAqIGEyMSkgKiBkZXQ7XG4gIG91dFsyXSA9IChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogZGV0O1xuICBvdXRbM10gPSBiMTEgKiBkZXQ7XG4gIG91dFs0XSA9IChhMjIgKiBhMDAgLSBhMDIgKiBhMjApICogZGV0O1xuICBvdXRbNV0gPSAoLWExMiAqIGEwMCArIGEwMiAqIGExMCkgKiBkZXQ7XG4gIG91dFs2XSA9IGIyMSAqIGRldDtcbiAgb3V0WzddID0gKC1hMjEgKiBhMDAgKyBhMDEgKiBhMjApICogZGV0O1xuICBvdXRbOF0gPSAoYTExICogYTAwIC0gYTAxICogYTEwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkam9pbnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIG91dFswXSA9IGExMSAqIGEyMiAtIGExMiAqIGEyMTtcbiAgb3V0WzFdID0gYTAyICogYTIxIC0gYTAxICogYTIyO1xuICBvdXRbMl0gPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIG91dFszXSA9IGExMiAqIGEyMCAtIGExMCAqIGEyMjtcbiAgb3V0WzRdID0gYTAwICogYTIyIC0gYTAyICogYTIwO1xuICBvdXRbNV0gPSBhMDIgKiBhMTAgLSBhMDAgKiBhMTI7XG4gIG91dFs2XSA9IGExMCAqIGEyMSAtIGExMSAqIGEyMDtcbiAgb3V0WzddID0gYTAxICogYTIwIC0gYTAwICogYTIxO1xuICBvdXRbOF0gPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgcmV0dXJuIGEwMCAqIChhMjIgKiBhMTEgLSBhMTIgKiBhMjEpICsgYTAxICogKC1hMjIgKiBhMTAgKyBhMTIgKiBhMjApICsgYTAyICogKGEyMSAqIGExMCAtIGExMSAqIGEyMCk7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDMnc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICB2YXIgYjAwID0gYlswXSxcbiAgICAgIGIwMSA9IGJbMV0sXG4gICAgICBiMDIgPSBiWzJdO1xuICB2YXIgYjEwID0gYlszXSxcbiAgICAgIGIxMSA9IGJbNF0sXG4gICAgICBiMTIgPSBiWzVdO1xuICB2YXIgYjIwID0gYls2XSxcbiAgICAgIGIyMSA9IGJbN10sXG4gICAgICBiMjIgPSBiWzhdO1xuICBvdXRbMF0gPSBiMDAgKiBhMDAgKyBiMDEgKiBhMTAgKyBiMDIgKiBhMjA7XG4gIG91dFsxXSA9IGIwMCAqIGEwMSArIGIwMSAqIGExMSArIGIwMiAqIGEyMTtcbiAgb3V0WzJdID0gYjAwICogYTAyICsgYjAxICogYTEyICsgYjAyICogYTIyO1xuICBvdXRbM10gPSBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjA7XG4gIG91dFs0XSA9IGIxMCAqIGEwMSArIGIxMSAqIGExMSArIGIxMiAqIGEyMTtcbiAgb3V0WzVdID0gYjEwICogYTAyICsgYjExICogYTEyICsgYjEyICogYTIyO1xuICBvdXRbNl0gPSBiMjAgKiBhMDAgKyBiMjEgKiBhMTAgKyBiMjIgKiBhMjA7XG4gIG91dFs3XSA9IGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMTtcbiAgb3V0WzhdID0gYjIwICogYTAyICsgYjIxICogYTEyICsgYjIyICogYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGUgYSBtYXQzIGJ5IHRoZSBnaXZlbiB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byB0cmFuc2xhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKG91dCwgYSwgdikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdLFxuICAgICAgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdLFxuICAgICAgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXTtcbiAgb3V0WzBdID0gYTAwO1xuICBvdXRbMV0gPSBhMDE7XG4gIG91dFsyXSA9IGEwMjtcbiAgb3V0WzNdID0gYTEwO1xuICBvdXRbNF0gPSBhMTE7XG4gIG91dFs1XSA9IGExMjtcbiAgb3V0WzZdID0geCAqIGEwMCArIHkgKiBhMTAgKyBhMjA7XG4gIG91dFs3XSA9IHggKiBhMDEgKyB5ICogYTExICsgYTIxO1xuICBvdXRbOF0gPSB4ICogYTAyICsgeSAqIGExMiArIGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdDMgYnkgdGhlIGdpdmVuIGFuZ2xlXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUob3V0LCBhLCByYWQpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XSxcbiAgICAgIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XSxcbiAgICAgIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGMgKiBhMDAgKyBzICogYTEwO1xuICBvdXRbMV0gPSBjICogYTAxICsgcyAqIGExMTtcbiAgb3V0WzJdID0gYyAqIGEwMiArIHMgKiBhMTI7XG4gIG91dFszXSA9IGMgKiBhMTAgLSBzICogYTAwO1xuICBvdXRbNF0gPSBjICogYTExIC0gcyAqIGEwMTtcbiAgb3V0WzVdID0gYyAqIGExMiAtIHMgKiBhMDI7XG4gIG91dFs2XSA9IGEyMDtcbiAgb3V0WzddID0gYTIxO1xuICBvdXRbOF0gPSBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgbWF0MyBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjMlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgdGhlIHZlYzIgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdO1xuICBvdXRbMF0gPSB4ICogYVswXTtcbiAgb3V0WzFdID0geCAqIGFbMV07XG4gIG91dFsyXSA9IHggKiBhWzJdO1xuICBvdXRbM10gPSB5ICogYVszXTtcbiAgb3V0WzRdID0geSAqIGFbNF07XG4gIG91dFs1XSA9IHkgKiBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQzLmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDMudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gdlswXTtcbiAgb3V0WzddID0gdlsxXTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGVcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQzLmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDMucm90YXRlKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSBzO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAtcztcbiAgb3V0WzRdID0gYztcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHNjYWxpbmdcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQzLmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDMuc2NhbGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU2NhbGluZyhvdXQsIHYpIHtcbiAgb3V0WzBdID0gdlswXTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gdlsxXTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29waWVzIHRoZSB2YWx1ZXMgZnJvbSBhIG1hdDJkIGludG8gYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQyZH0gYSB0aGUgbWF0cml4IHRvIGNvcHlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQyZChvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gYVsyXTtcbiAgb3V0WzRdID0gYVszXTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gYVs0XTtcbiAgb3V0WzddID0gYVs1XTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBhIDN4MyBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIFF1YXRlcm5pb24gdG8gY3JlYXRlIG1hdHJpeCBmcm9tXG4gKlxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUXVhdChvdXQsIHEpIHtcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB5eCA9IHkgKiB4MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgenggPSB6ICogeDI7XG4gIHZhciB6eSA9IHogKiB5MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0geXkgLSB6ejtcbiAgb3V0WzNdID0geXggLSB3ejtcbiAgb3V0WzZdID0genggKyB3eTtcbiAgb3V0WzFdID0geXggKyB3ejtcbiAgb3V0WzRdID0gMSAtIHh4IC0geno7XG4gIG91dFs3XSA9IHp5IC0gd3g7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFs1XSA9IHp5ICsgd3g7XG4gIG91dFs4XSA9IDEgLSB4eCAtIHl5O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgM3gzIG5vcm1hbCBtYXRyaXggKHRyYW5zcG9zZSBpbnZlcnNlKSBmcm9tIHRoZSA0eDQgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgTWF0NCB0byBkZXJpdmUgdGhlIG5vcm1hbCBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsRnJvbU1hdDQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFsyXSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbM10gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgb3V0WzRdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDEgKiBiMDggLSBhMDAgKiBiMTAgLSBhMDMgKiBiMDYpICogZGV0O1xuICBvdXRbNl0gPSAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldDtcbiAgb3V0WzddID0gKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSAyRCBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgeW91ciBnbCBjb250ZXh0XG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiBnbCBjb250ZXh0XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3Rpb24ob3V0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gIG91dFswXSA9IDIgLyB3aWR0aDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gLTIgLyBoZWlnaHQ7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IC0xO1xuICBvdXRbN10gPSAxO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIG1hdHJpeCB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDMoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvYihhKSB7XG4gIHJldHVybiBNYXRoLmh5cG90KGFbMF0sIGFbMV0sIGFbMl0sIGFbM10sIGFbNF0sIGFbNV0sIGFbNl0sIGFbN10sIGFbOF0pO1xufVxuLyoqXG4gKiBBZGRzIHR3byBtYXQzJ3NcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdO1xuICBvdXRbN10gPSBhWzddICsgYls3XTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyBtYXRyaXggYiBmcm9tIG1hdHJpeCBhXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIG91dFszXSA9IGFbM10gLSBiWzNdO1xuICBvdXRbNF0gPSBhWzRdIC0gYls0XTtcbiAgb3V0WzVdID0gYVs1XSAtIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gLSBiWzZdO1xuICBvdXRbN10gPSBhWzddIC0gYls3XTtcbiAgb3V0WzhdID0gYVs4XSAtIGJbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGx5IGVhY2ggZWxlbWVudCBvZiB0aGUgbWF0cml4IGJ5IGEgc2NhbGFyLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIG91dFs4XSA9IGFbOF0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byBtYXQzJ3MgYWZ0ZXIgbXVsdGlwbHlpbmcgZWFjaCBlbGVtZW50IG9mIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYidzIGVsZW1lbnRzIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXJBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XSAqIHNjYWxlO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XSAqIHNjYWxlO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XSAqIHNjYWxlO1xuICBvdXRbN10gPSBhWzddICsgYls3XSAqIHNjYWxlO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdICYmIGFbNF0gPT09IGJbNF0gJiYgYVs1XSA9PT0gYls1XSAmJiBhWzZdID09PSBiWzZdICYmIGFbN10gPT09IGJbN10gJiYgYVs4XSA9PT0gYls4XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXSxcbiAgICAgIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XSxcbiAgICAgIGE4ID0gYVs4XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXSxcbiAgICAgIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XSxcbiAgICAgIGI4ID0gYls4XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSkgJiYgTWF0aC5hYnMoYTggLSBiOCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTgpLCBNYXRoLmFicyhiOCkpO1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDMubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDMuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0OyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogNHg0IE1hdHJpeDxicj5Gb3JtYXQ6IGNvbHVtbi1tYWpvciwgd2hlbiB0eXBlZCBvdXQgaXQgbG9va3MgbGlrZSByb3ctbWFqb3I8YnI+VGhlIG1hdHJpY2VzIGFyZSBiZWluZyBwb3N0IG11bHRpcGxpZWQuXG4gKiBAbW9kdWxlIG1hdDRcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0NFxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAwO1xuICAgIG91dFs5XSA9IDA7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0NCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDR9IGEgbmV3IDR4NCBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0NCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIG91dFs5XSA9IGFbOV07XG4gIG91dFsxMF0gPSBhWzEwXTtcbiAgb3V0WzExXSA9IGFbMTFdO1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBtYXQ0IHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDMgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTMgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggOSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTApXG4gKiBAcGFyYW0ge051bWJlcn0gbTIzIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDMgcG9zaXRpb24gKGluZGV4IDExKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMCBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAxMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzEgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMTMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMyIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDIgcG9zaXRpb24gKGluZGV4IDE0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMyBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxNSlcbiAqIEByZXR1cm5zIHttYXQ0fSBBIG5ldyBtYXQ0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMobTAwLCBtMDEsIG0wMiwgbTAzLCBtMTAsIG0xMSwgbTEyLCBtMTMsIG0yMCwgbTIxLCBtMjIsIG0yMywgbTMwLCBtMzEsIG0zMiwgbTMzKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0wMztcbiAgb3V0WzRdID0gbTEwO1xuICBvdXRbNV0gPSBtMTE7XG4gIG91dFs2XSA9IG0xMjtcbiAgb3V0WzddID0gbTEzO1xuICBvdXRbOF0gPSBtMjA7XG4gIG91dFs5XSA9IG0yMTtcbiAgb3V0WzEwXSA9IG0yMjtcbiAgb3V0WzExXSA9IG0yMztcbiAgb3V0WzEyXSA9IG0zMDtcbiAgb3V0WzEzXSA9IG0zMTtcbiAgb3V0WzE0XSA9IG0zMjtcbiAgb3V0WzE1XSA9IG0zMztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgbWF0NCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDMgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTMgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggOSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTApXG4gKiBAcGFyYW0ge051bWJlcn0gbTIzIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDMgcG9zaXRpb24gKGluZGV4IDExKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMCBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAxMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzEgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMTMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMyIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDIgcG9zaXRpb24gKGluZGV4IDE0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMyBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxNSlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgbTAwLCBtMDEsIG0wMiwgbTAzLCBtMTAsIG0xMSwgbTEyLCBtMTMsIG0yMCwgbTIxLCBtMjIsIG0yMywgbTMwLCBtMzEsIG0zMiwgbTMzKSB7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0wMztcbiAgb3V0WzRdID0gbTEwO1xuICBvdXRbNV0gPSBtMTE7XG4gIG91dFs2XSA9IG0xMjtcbiAgb3V0WzddID0gbTEzO1xuICBvdXRbOF0gPSBtMjA7XG4gIG91dFs5XSA9IG0yMTtcbiAgb3V0WzEwXSA9IG0yMjtcbiAgb3V0WzExXSA9IG0yMztcbiAgb3V0WzEyXSA9IG0zMDtcbiAgb3V0WzEzXSA9IG0zMTtcbiAgb3V0WzE0XSA9IG0zMjtcbiAgb3V0WzE1XSA9IG0zMztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IGEgbWF0NCB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkob3V0KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDE7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAxO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zcG9zZSB0aGUgdmFsdWVzIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3Bvc2Uob3V0LCBhKSB7XG4gIC8vIElmIHdlIGFyZSB0cmFuc3Bvc2luZyBvdXJzZWx2ZXMgd2UgY2FuIHNraXAgYSBmZXcgc3RlcHMgYnV0IGhhdmUgdG8gY2FjaGUgc29tZSB2YWx1ZXNcbiAgaWYgKG91dCA9PT0gYSkge1xuICAgIHZhciBhMDEgPSBhWzFdLFxuICAgICAgICBhMDIgPSBhWzJdLFxuICAgICAgICBhMDMgPSBhWzNdO1xuICAgIHZhciBhMTIgPSBhWzZdLFxuICAgICAgICBhMTMgPSBhWzddO1xuICAgIHZhciBhMjMgPSBhWzExXTtcbiAgICBvdXRbMV0gPSBhWzRdO1xuICAgIG91dFsyXSA9IGFbOF07XG4gICAgb3V0WzNdID0gYVsxMl07XG4gICAgb3V0WzRdID0gYTAxO1xuICAgIG91dFs2XSA9IGFbOV07XG4gICAgb3V0WzddID0gYVsxM107XG4gICAgb3V0WzhdID0gYTAyO1xuICAgIG91dFs5XSA9IGExMjtcbiAgICBvdXRbMTFdID0gYVsxNF07XG4gICAgb3V0WzEyXSA9IGEwMztcbiAgICBvdXRbMTNdID0gYTEzO1xuICAgIG91dFsxNF0gPSBhMjM7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzRdO1xuICAgIG91dFsyXSA9IGFbOF07XG4gICAgb3V0WzNdID0gYVsxMl07XG4gICAgb3V0WzRdID0gYVsxXTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbOV07XG4gICAgb3V0WzddID0gYVsxM107XG4gICAgb3V0WzhdID0gYVsyXTtcbiAgICBvdXRbOV0gPSBhWzZdO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxNF07XG4gICAgb3V0WzEyXSA9IGFbM107XG4gICAgb3V0WzEzXSA9IGFbN107XG4gICAgb3V0WzE0XSA9IGFbMTFdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEludmVydHMgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IChhMTEgKiBiMTEgLSBhMTIgKiBiMTAgKyBhMTMgKiBiMDkpICogZGV0O1xuICBvdXRbMV0gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgb3V0WzJdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gIG91dFszXSA9IChhMjIgKiBiMDQgLSBhMjEgKiBiMDUgLSBhMjMgKiBiMDMpICogZGV0O1xuICBvdXRbNF0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgb3V0WzVdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs2XSA9IChhMzIgKiBiMDIgLSBhMzAgKiBiMDUgLSBhMzMgKiBiMDEpICogZGV0O1xuICBvdXRbN10gPSAoYTIwICogYjA1IC0gYTIyICogYjAyICsgYTIzICogYjAxKSAqIGRldDtcbiAgb3V0WzhdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gIG91dFs5XSA9IChhMDEgKiBiMDggLSBhMDAgKiBiMTAgLSBhMDMgKiBiMDYpICogZGV0O1xuICBvdXRbMTBdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMV0gPSAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldDtcbiAgb3V0WzEyXSA9IChhMTEgKiBiMDcgLSBhMTAgKiBiMDkgLSBhMTIgKiBiMDYpICogZGV0O1xuICBvdXRbMTNdID0gKGEwMCAqIGIwOSAtIGEwMSAqIGIwNyArIGEwMiAqIGIwNikgKiBkZXQ7XG4gIG91dFsxNF0gPSAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldDtcbiAgb3V0WzE1XSA9IChhMjAgKiBiMDMgLSBhMjEgKiBiMDEgKyBhMjIgKiBiMDApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIG91dFswXSA9IGExMSAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgKyBhMzEgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKTtcbiAgb3V0WzFdID0gLShhMDEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMxICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikpO1xuICBvdXRbMl0gPSBhMDEgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSAtIGExMSAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMxICogKGEwMiAqIGExMyAtIGEwMyAqIGExMik7XG4gIG91dFszXSA9IC0oYTAxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikgLSBhMTEgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSArIGEyMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgb3V0WzRdID0gLShhMTAgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMwICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikpO1xuICBvdXRbNV0gPSBhMDAgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMCAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMik7XG4gIG91dFs2XSA9IC0oYTAwICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgb3V0WzddID0gYTAwICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikgLSBhMTAgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSArIGEyMCAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbOF0gPSBhMTAgKiAoYTIxICogYTMzIC0gYTIzICogYTMxKSAtIGEyMCAqIChhMTEgKiBhMzMgLSBhMTMgKiBhMzEpICsgYTMwICogKGExMSAqIGEyMyAtIGExMyAqIGEyMSk7XG4gIG91dFs5XSA9IC0oYTAwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTAxICogYTMzIC0gYTAzICogYTMxKSArIGEzMCAqIChhMDEgKiBhMjMgLSBhMDMgKiBhMjEpKTtcbiAgb3V0WzEwXSA9IGEwMCAqIChhMTEgKiBhMzMgLSBhMTMgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKTtcbiAgb3V0WzExXSA9IC0oYTAwICogKGExMSAqIGEyMyAtIGExMyAqIGEyMSkgLSBhMTAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSArIGEyMCAqIChhMDEgKiBhMTMgLSBhMDMgKiBhMTEpKTtcbiAgb3V0WzEyXSA9IC0oYTEwICogKGEyMSAqIGEzMiAtIGEyMiAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMyIC0gYTEyICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjIgLSBhMTIgKiBhMjEpKTtcbiAgb3V0WzEzXSA9IGEwMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIyIC0gYTAyICogYTIxKTtcbiAgb3V0WzE0XSA9IC0oYTAwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgLSBhMTAgKiAoYTAxICogYTMyIC0gYTAyICogYTMxKSArIGEzMCAqIChhMDEgKiBhMTIgLSBhMDIgKiBhMTEpKTtcbiAgb3V0WzE1XSA9IGEwMCAqIChhMTEgKiBhMjIgLSBhMTIgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQoYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTtcbiAgdmFyIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgdmFyIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDtcbiAgdmFyIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMDtcbiAgdmFyIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgdmFyIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTtcbiAgdmFyIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMjtcbiAgdmFyIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMDtcbiAgdmFyIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDtcbiAgdmFyIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMDtcbiAgdmFyIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMTtcbiAgdmFyIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTtcbiAgdmFyIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjsgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuXG4gIHJldHVybiBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdOyAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcblxuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdO1xuICBvdXRbMF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzFdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsyXSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbM10gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgYjAgPSBiWzRdO1xuICBiMSA9IGJbNV07XG4gIGIyID0gYls2XTtcbiAgYjMgPSBiWzddO1xuICBvdXRbNF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzVdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFs2XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbN10gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgYjAgPSBiWzhdO1xuICBiMSA9IGJbOV07XG4gIGIyID0gYlsxMF07XG4gIGIzID0gYlsxMV07XG4gIG91dFs4XSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICBvdXRbOV0gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzEwXSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTFdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYlsxMl07XG4gIGIxID0gYlsxM107XG4gIGIyID0gYlsxNF07XG4gIGIzID0gYlsxNV07XG4gIG91dFsxMl0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzEzXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMTRdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gIG91dFsxNV0gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNsYXRlIGEgbWF0NCBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiB2ZWN0b3IgdG8gdHJhbnNsYXRlIGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV0sXG4gICAgICB6ID0gdlsyXTtcbiAgdmFyIGEwMCwgYTAxLCBhMDIsIGEwMztcbiAgdmFyIGExMCwgYTExLCBhMTIsIGExMztcbiAgdmFyIGEyMCwgYTIxLCBhMjIsIGEyMztcblxuICBpZiAoYSA9PT0gb3V0KSB7XG4gICAgb3V0WzEyXSA9IGFbMF0gKiB4ICsgYVs0XSAqIHkgKyBhWzhdICogeiArIGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzFdICogeCArIGFbNV0gKiB5ICsgYVs5XSAqIHogKyBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsyXSAqIHggKyBhWzZdICogeSArIGFbMTBdICogeiArIGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzNdICogeCArIGFbN10gKiB5ICsgYVsxMV0gKiB6ICsgYVsxNV07XG4gIH0gZWxzZSB7XG4gICAgYTAwID0gYVswXTtcbiAgICBhMDEgPSBhWzFdO1xuICAgIGEwMiA9IGFbMl07XG4gICAgYTAzID0gYVszXTtcbiAgICBhMTAgPSBhWzRdO1xuICAgIGExMSA9IGFbNV07XG4gICAgYTEyID0gYVs2XTtcbiAgICBhMTMgPSBhWzddO1xuICAgIGEyMCA9IGFbOF07XG4gICAgYTIxID0gYVs5XTtcbiAgICBhMjIgPSBhWzEwXTtcbiAgICBhMjMgPSBhWzExXTtcbiAgICBvdXRbMF0gPSBhMDA7XG4gICAgb3V0WzFdID0gYTAxO1xuICAgIG91dFsyXSA9IGEwMjtcbiAgICBvdXRbM10gPSBhMDM7XG4gICAgb3V0WzRdID0gYTEwO1xuICAgIG91dFs1XSA9IGExMTtcbiAgICBvdXRbNl0gPSBhMTI7XG4gICAgb3V0WzddID0gYTEzO1xuICAgIG91dFs4XSA9IGEyMDtcbiAgICBvdXRbOV0gPSBhMjE7XG4gICAgb3V0WzEwXSA9IGEyMjtcbiAgICBvdXRbMTFdID0gYTIzO1xuICAgIG91dFsxMl0gPSBhMDAgKiB4ICsgYTEwICogeSArIGEyMCAqIHogKyBhWzEyXTtcbiAgICBvdXRbMTNdID0gYTAxICogeCArIGExMSAqIHkgKyBhMjEgKiB6ICsgYVsxM107XG4gICAgb3V0WzE0XSA9IGEwMiAqIHggKyBhMTIgKiB5ICsgYTIyICogeiArIGFbMTRdO1xuICAgIG91dFsxNV0gPSBhMDMgKiB4ICsgYTEzICogeSArIGEyMyAqIHogKyBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgbWF0NCBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjMyBub3QgdXNpbmcgdmVjdG9yaXphdGlvblxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiB0aGUgdmVjMyB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV0sXG4gICAgICB6ID0gdlsyXTtcbiAgb3V0WzBdID0gYVswXSAqIHg7XG4gIG91dFsxXSA9IGFbMV0gKiB4O1xuICBvdXRbMl0gPSBhWzJdICogeDtcbiAgb3V0WzNdID0gYVszXSAqIHg7XG4gIG91dFs0XSA9IGFbNF0gKiB5O1xuICBvdXRbNV0gPSBhWzVdICogeTtcbiAgb3V0WzZdID0gYVs2XSAqIHk7XG4gIG91dFs3XSA9IGFbN10gKiB5O1xuICBvdXRbOF0gPSBhWzhdICogejtcbiAgb3V0WzldID0gYVs5XSAqIHo7XG4gIG91dFsxMF0gPSBhWzEwXSAqIHo7XG4gIG91dFsxMV0gPSBhWzExXSAqIHo7XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdDQgYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgZ2l2ZW4gYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKG91dCwgYSwgcmFkLCBheGlzKSB7XG4gIHZhciB4ID0gYXhpc1swXSxcbiAgICAgIHkgPSBheGlzWzFdLFxuICAgICAgeiA9IGF4aXNbMl07XG4gIHZhciBsZW4gPSBNYXRoLmh5cG90KHgsIHksIHopO1xuICB2YXIgcywgYywgdDtcbiAgdmFyIGEwMCwgYTAxLCBhMDIsIGEwMztcbiAgdmFyIGExMCwgYTExLCBhMTIsIGExMztcbiAgdmFyIGEyMCwgYTIxLCBhMjIsIGEyMztcbiAgdmFyIGIwMCwgYjAxLCBiMDI7XG4gIHZhciBiMTAsIGIxMSwgYjEyO1xuICB2YXIgYjIwLCBiMjEsIGIyMjtcblxuICBpZiAobGVuIDwgZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGVuID0gMSAvIGxlbjtcbiAgeCAqPSBsZW47XG4gIHkgKj0gbGVuO1xuICB6ICo9IGxlbjtcbiAgcyA9IE1hdGguc2luKHJhZCk7XG4gIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB0ID0gMSAtIGM7XG4gIGEwMCA9IGFbMF07XG4gIGEwMSA9IGFbMV07XG4gIGEwMiA9IGFbMl07XG4gIGEwMyA9IGFbM107XG4gIGExMCA9IGFbNF07XG4gIGExMSA9IGFbNV07XG4gIGExMiA9IGFbNl07XG4gIGExMyA9IGFbN107XG4gIGEyMCA9IGFbOF07XG4gIGEyMSA9IGFbOV07XG4gIGEyMiA9IGFbMTBdO1xuICBhMjMgPSBhWzExXTsgLy8gQ29uc3RydWN0IHRoZSBlbGVtZW50cyBvZiB0aGUgcm90YXRpb24gbWF0cml4XG5cbiAgYjAwID0geCAqIHggKiB0ICsgYztcbiAgYjAxID0geSAqIHggKiB0ICsgeiAqIHM7XG4gIGIwMiA9IHogKiB4ICogdCAtIHkgKiBzO1xuICBiMTAgPSB4ICogeSAqIHQgLSB6ICogcztcbiAgYjExID0geSAqIHkgKiB0ICsgYztcbiAgYjEyID0geiAqIHkgKiB0ICsgeCAqIHM7XG4gIGIyMCA9IHggKiB6ICogdCArIHkgKiBzO1xuICBiMjEgPSB5ICogeiAqIHQgLSB4ICogcztcbiAgYjIyID0geiAqIHogKiB0ICsgYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDI7XG4gIG91dFsxXSA9IGEwMSAqIGIwMCArIGExMSAqIGIwMSArIGEyMSAqIGIwMjtcbiAgb3V0WzJdID0gYTAyICogYjAwICsgYTEyICogYjAxICsgYTIyICogYjAyO1xuICBvdXRbM10gPSBhMDMgKiBiMDAgKyBhMTMgKiBiMDEgKyBhMjMgKiBiMDI7XG4gIG91dFs0XSA9IGEwMCAqIGIxMCArIGExMCAqIGIxMSArIGEyMCAqIGIxMjtcbiAgb3V0WzVdID0gYTAxICogYjEwICsgYTExICogYjExICsgYTIxICogYjEyO1xuICBvdXRbNl0gPSBhMDIgKiBiMTAgKyBhMTIgKiBiMTEgKyBhMjIgKiBiMTI7XG4gIG91dFs3XSA9IGEwMyAqIGIxMCArIGExMyAqIGIxMSArIGEyMyAqIGIxMjtcbiAgb3V0WzhdID0gYTAwICogYjIwICsgYTEwICogYjIxICsgYTIwICogYjIyO1xuICBvdXRbOV0gPSBhMDEgKiBiMjAgKyBhMTEgKiBiMjEgKyBhMjEgKiBiMjI7XG4gIG91dFsxMF0gPSBhMDIgKiBiMjAgKyBhMTIgKiBiMjEgKyBhMjIgKiBiMjI7XG4gIG91dFsxMV0gPSBhMDMgKiBiMjAgKyBhMTMgKiBiMjEgKyBhMjMgKiBiMjI7XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIGxhc3Qgcm93XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBYIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVgob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMTAgPSBhWzRdO1xuICB2YXIgYTExID0gYVs1XTtcbiAgdmFyIGExMiA9IGFbNl07XG4gIHZhciBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XTtcbiAgdmFyIGEyMSA9IGFbOV07XG4gIHZhciBhMjIgPSBhWzEwXTtcbiAgdmFyIGEyMyA9IGFbMTFdO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCByb3dzXG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzRdID0gYTEwICogYyArIGEyMCAqIHM7XG4gIG91dFs1XSA9IGExMSAqIGMgKyBhMjEgKiBzO1xuICBvdXRbNl0gPSBhMTIgKiBjICsgYTIyICogcztcbiAgb3V0WzddID0gYTEzICogYyArIGEyMyAqIHM7XG4gIG91dFs4XSA9IGEyMCAqIGMgLSBhMTAgKiBzO1xuICBvdXRbOV0gPSBhMjEgKiBjIC0gYTExICogcztcbiAgb3V0WzEwXSA9IGEyMiAqIGMgLSBhMTIgKiBzO1xuICBvdXRbMTFdID0gYTIzICogYyAtIGExMyAqIHM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWSBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVZKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTAwID0gYVswXTtcbiAgdmFyIGEwMSA9IGFbMV07XG4gIHZhciBhMDIgPSBhWzJdO1xuICB2YXIgYTAzID0gYVszXTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzZdO1xuICAgIG91dFs3XSA9IGFbN107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFswXSA9IGEwMCAqIGMgLSBhMjAgKiBzO1xuICBvdXRbMV0gPSBhMDEgKiBjIC0gYTIxICogcztcbiAgb3V0WzJdID0gYTAyICogYyAtIGEyMiAqIHM7XG4gIG91dFszXSA9IGEwMyAqIGMgLSBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMDAgKiBzICsgYTIwICogYztcbiAgb3V0WzldID0gYTAxICogcyArIGEyMSAqIGM7XG4gIG91dFsxMF0gPSBhMDIgKiBzICsgYTIyICogYztcbiAgb3V0WzExXSA9IGEwMyAqIHMgKyBhMjMgKiBjO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGEwMCA9IGFbMF07XG4gIHZhciBhMDEgPSBhWzFdO1xuICB2YXIgYTAyID0gYVsyXTtcbiAgdmFyIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdO1xuICB2YXIgYTExID0gYVs1XTtcbiAgdmFyIGExMiA9IGFbNl07XG4gIHZhciBhMTMgPSBhWzddO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgIG91dFs4XSA9IGFbOF07XG4gICAgb3V0WzldID0gYVs5XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTFdO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbMF0gPSBhMDAgKiBjICsgYTEwICogcztcbiAgb3V0WzFdID0gYTAxICogYyArIGExMSAqIHM7XG4gIG91dFsyXSA9IGEwMiAqIGMgKyBhMTIgKiBzO1xuICBvdXRbM10gPSBhMDMgKiBjICsgYTEzICogcztcbiAgb3V0WzRdID0gYTEwICogYyAtIGEwMCAqIHM7XG4gIG91dFs1XSA9IGExMSAqIGMgLSBhMDEgKiBzO1xuICBvdXRbNl0gPSBhMTIgKiBjIC0gYTAyICogcztcbiAgb3V0WzddID0gYTEzICogYyAtIGEwMyAqIHM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciB0cmFuc2xhdGlvblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVRyYW5zbGF0aW9uKG91dCwgdikge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5zY2FsZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSB2WzFdO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gdlsyXTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBnaXZlbiBhbmdsZSBhcm91bmQgYSBnaXZlbiBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZShkZXN0LCBkZXN0LCByYWQsIGF4aXMpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvbihvdXQsIHJhZCwgYXhpcykge1xuICB2YXIgeCA9IGF4aXNbMF0sXG4gICAgICB5ID0gYXhpc1sxXSxcbiAgICAgIHogPSBheGlzWzJdO1xuICB2YXIgbGVuID0gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbiAgdmFyIHMsIGMsIHQ7XG5cbiAgaWYgKGxlbiA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxlbiA9IDEgLyBsZW47XG4gIHggKj0gbGVuO1xuICB5ICo9IGxlbjtcbiAgeiAqPSBsZW47XG4gIHMgPSBNYXRoLnNpbihyYWQpO1xuICBjID0gTWF0aC5jb3MocmFkKTtcbiAgdCA9IDEgLSBjOyAvLyBQZXJmb3JtIHJvdGF0aW9uLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IHggKiB4ICogdCArIGM7XG4gIG91dFsxXSA9IHkgKiB4ICogdCArIHogKiBzO1xuICBvdXRbMl0gPSB6ICogeCAqIHQgLSB5ICogcztcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0geCAqIHkgKiB0IC0geiAqIHM7XG4gIG91dFs1XSA9IHkgKiB5ICogdCArIGM7XG4gIG91dFs2XSA9IHogKiB5ICogdCArIHggKiBzO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4ICogeiAqIHQgKyB5ICogcztcbiAgb3V0WzldID0geSAqIHogKiB0IC0geCAqIHM7XG4gIG91dFsxMF0gPSB6ICogeiAqIHQgKyBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBYIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWChkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21YUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSBzO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAtcztcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVZKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVlSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IC1zO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSBzO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWiBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVooZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWlJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYztcbiAgb3V0WzFdID0gcztcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gLXM7XG4gIG91dFs1XSA9IGM7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAxO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24gYW5kIHZlY3RvciB0cmFuc2xhdGlvblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBsZXQgcXVhdE1hdCA9IG1hdDQuY3JlYXRlKCk7XG4gKiAgICAgcXVhdDQudG9NYXQ0KHF1YXQsIHF1YXRNYXQpO1xuICogICAgIG1hdDQubXVsdGlwbHkoZGVzdCwgcXVhdE1hdCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBxLCB2KSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIG91dFswXSA9IDEgLSAoeXkgKyB6eik7XG4gIG91dFsxXSA9IHh5ICsgd3o7XG4gIG91dFsyXSA9IHh6IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHh5IC0gd3o7XG4gIG91dFs1XSA9IDEgLSAoeHggKyB6eik7XG4gIG91dFs2XSA9IHl6ICsgd3g7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHh6ICsgd3k7XG4gIG91dFs5XSA9IHl6IC0gd3g7XG4gIG91dFsxMF0gPSAxIC0gKHh4ICsgeXkpO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0NCBmcm9tIGEgZHVhbCBxdWF0LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IE1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIER1YWwgUXVhdGVybmlvblxuICogQHJldHVybnMge21hdDR9IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQyKG91dCwgYSkge1xuICB2YXIgdHJhbnNsYXRpb24gPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgdmFyIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXSxcbiAgICAgIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XTtcbiAgdmFyIG1hZ25pdHVkZSA9IGJ4ICogYnggKyBieSAqIGJ5ICsgYnogKiBieiArIGJ3ICogYnc7IC8vT25seSBzY2FsZSBpZiBpdCBtYWtlcyBzZW5zZVxuXG4gIGlmIChtYWduaXR1ZGUgPiAwKSB7XG4gICAgdHJhbnNsYXRpb25bMF0gPSAoYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSkgKiAyIC8gbWFnbml0dWRlO1xuICAgIHRyYW5zbGF0aW9uWzFdID0gKGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnopICogMiAvIG1hZ25pdHVkZTtcbiAgICB0cmFuc2xhdGlvblsyXSA9IChheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4KSAqIDIgLyBtYWduaXR1ZGU7XG4gIH0gZWxzZSB7XG4gICAgdHJhbnNsYXRpb25bMF0gPSAoYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSkgKiAyO1xuICAgIHRyYW5zbGF0aW9uWzFdID0gKGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnopICogMjtcbiAgICB0cmFuc2xhdGlvblsyXSA9IChheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4KSAqIDI7XG4gIH1cblxuICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIGEsIHRyYW5zbGF0aW9uKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgdHJhbnNsYXRpb24gdmVjdG9yIGNvbXBvbmVudCBvZiBhIHRyYW5zZm9ybWF0aW9uXG4gKiAgbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uLFxuICogIHRoZSByZXR1cm5lZCB2ZWN0b3Igd2lsbCBiZSB0aGUgc2FtZSBhcyB0aGUgdHJhbnNsYXRpb24gdmVjdG9yXG4gKiAgb3JpZ2luYWxseSBzdXBwbGllZC5cbiAqIEBwYXJhbSAge3ZlYzN9IG91dCBWZWN0b3IgdG8gcmVjZWl2ZSB0cmFuc2xhdGlvbiBjb21wb25lbnRcbiAqIEBwYXJhbSAge1JlYWRvbmx5TWF0NH0gbWF0IE1hdHJpeCB0byBiZSBkZWNvbXBvc2VkIChpbnB1dClcbiAqIEByZXR1cm4ge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2xhdGlvbihvdXQsIG1hdCkge1xuICBvdXRbMF0gPSBtYXRbMTJdO1xuICBvdXRbMV0gPSBtYXRbMTNdO1xuICBvdXRbMl0gPSBtYXRbMTRdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzY2FsaW5nIGZhY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxuICogIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aCBmcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlXG4gKiAgd2l0aCBhIG5vcm1hbGl6ZWQgUXVhdGVybmlvbiBwYXJhbXRlciwgdGhlIHJldHVybmVkIHZlY3RvciB3aWxsIGJlXG4gKiAgdGhlIHNhbWUgYXMgdGhlIHNjYWxpbmcgdmVjdG9yXG4gKiAgb3JpZ2luYWxseSBzdXBwbGllZC5cbiAqIEBwYXJhbSAge3ZlYzN9IG91dCBWZWN0b3IgdG8gcmVjZWl2ZSBzY2FsaW5nIGZhY3RvciBjb21wb25lbnRcbiAqIEBwYXJhbSAge1JlYWRvbmx5TWF0NH0gbWF0IE1hdHJpeCB0byBiZSBkZWNvbXBvc2VkIChpbnB1dClcbiAqIEByZXR1cm4ge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2FsaW5nKG91dCwgbWF0KSB7XG4gIHZhciBtMTEgPSBtYXRbMF07XG4gIHZhciBtMTIgPSBtYXRbMV07XG4gIHZhciBtMTMgPSBtYXRbMl07XG4gIHZhciBtMjEgPSBtYXRbNF07XG4gIHZhciBtMjIgPSBtYXRbNV07XG4gIHZhciBtMjMgPSBtYXRbNl07XG4gIHZhciBtMzEgPSBtYXRbOF07XG4gIHZhciBtMzIgPSBtYXRbOV07XG4gIHZhciBtMzMgPSBtYXRbMTBdO1xuICBvdXRbMF0gPSBNYXRoLmh5cG90KG0xMSwgbTEyLCBtMTMpO1xuICBvdXRbMV0gPSBNYXRoLmh5cG90KG0yMSwgbTIyLCBtMjMpO1xuICBvdXRbMl0gPSBNYXRoLmh5cG90KG0zMSwgbTMyLCBtMzMpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcXVhdGVybmlvbiByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uYWwgY29tcG9uZW50XG4gKiAgb2YgYSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGhcbiAqICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbiwgdGhlIHJldHVybmVkIHF1YXRlcm5pb24gd2lsbCBiZSB0aGVcbiAqICBzYW1lIGFzIHRoZSBxdWF0ZXJuaW9uIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBRdWF0ZXJuaW9uIHRvIHJlY2VpdmUgdGhlIHJvdGF0aW9uIGNvbXBvbmVudFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um90YXRpb24ob3V0LCBtYXQpIHtcbiAgdmFyIHNjYWxpbmcgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgZ2V0U2NhbGluZyhzY2FsaW5nLCBtYXQpO1xuICB2YXIgaXMxID0gMSAvIHNjYWxpbmdbMF07XG4gIHZhciBpczIgPSAxIC8gc2NhbGluZ1sxXTtcbiAgdmFyIGlzMyA9IDEgLyBzY2FsaW5nWzJdO1xuICB2YXIgc20xMSA9IG1hdFswXSAqIGlzMTtcbiAgdmFyIHNtMTIgPSBtYXRbMV0gKiBpczI7XG4gIHZhciBzbTEzID0gbWF0WzJdICogaXMzO1xuICB2YXIgc20yMSA9IG1hdFs0XSAqIGlzMTtcbiAgdmFyIHNtMjIgPSBtYXRbNV0gKiBpczI7XG4gIHZhciBzbTIzID0gbWF0WzZdICogaXMzO1xuICB2YXIgc20zMSA9IG1hdFs4XSAqIGlzMTtcbiAgdmFyIHNtMzIgPSBtYXRbOV0gKiBpczI7XG4gIHZhciBzbTMzID0gbWF0WzEwXSAqIGlzMztcbiAgdmFyIHRyYWNlID0gc20xMSArIHNtMjIgKyBzbTMzO1xuICB2YXIgUyA9IDA7XG5cbiAgaWYgKHRyYWNlID4gMCkge1xuICAgIFMgPSBNYXRoLnNxcnQodHJhY2UgKyAxLjApICogMjtcbiAgICBvdXRbM10gPSAwLjI1ICogUztcbiAgICBvdXRbMF0gPSAoc20yMyAtIHNtMzIpIC8gUztcbiAgICBvdXRbMV0gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMl0gPSAoc20xMiAtIHNtMjEpIC8gUztcbiAgfSBlbHNlIGlmIChzbTExID4gc20yMiAmJiBzbTExID4gc20zMykge1xuICAgIFMgPSBNYXRoLnNxcnQoMS4wICsgc20xMSAtIHNtMjIgLSBzbTMzKSAqIDI7XG4gICAgb3V0WzNdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzBdID0gMC4yNSAqIFM7XG4gICAgb3V0WzFdID0gKHNtMTIgKyBzbTIxKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMzEgKyBzbTEzKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20yMiA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMjIgLSBzbTExIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTMxIC0gc20xMykgLyBTO1xuICAgIG91dFswXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsxXSA9IDAuMjUgKiBTO1xuICAgIG91dFsyXSA9IChzbTIzICsgc20zMikgLyBTO1xuICB9IGVsc2Uge1xuICAgIFMgPSBNYXRoLnNxcnQoMS4wICsgc20zMyAtIHNtMTEgLSBzbTIyKSAqIDI7XG4gICAgb3V0WzNdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gICAgb3V0WzBdID0gKHNtMzEgKyBzbTEzKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMjMgKyBzbTMyKSAvIFM7XG4gICAgb3V0WzJdID0gMC4yNSAqIFM7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uLCB2ZWN0b3IgdHJhbnNsYXRpb24gYW5kIHZlY3RvciBzY2FsZVxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBsZXQgcXVhdE1hdCA9IG1hdDQuY3JlYXRlKCk7XG4gKiAgICAgcXVhdDQudG9NYXQ0KHF1YXQsIHF1YXRNYXQpO1xuICogICAgIG1hdDQubXVsdGlwbHkoZGVzdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5zY2FsZShkZXN0LCBzY2FsZSlcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHMgU2NhbGluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZShvdXQsIHEsIHYsIHMpIHtcbiAgLy8gUXVhdGVybmlvbiBtYXRoXG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeHkgPSB4ICogeTI7XG4gIHZhciB4eiA9IHggKiB6MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgeXogPSB5ICogejI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgdmFyIHN4ID0gc1swXTtcbiAgdmFyIHN5ID0gc1sxXTtcbiAgdmFyIHN6ID0gc1syXTtcbiAgb3V0WzBdID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIG91dFsxXSA9ICh4eSArIHd6KSAqIHN4O1xuICBvdXRbMl0gPSAoeHogLSB3eSkgKiBzeDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gKHh5IC0gd3opICogc3k7XG4gIG91dFs1XSA9ICgxIC0gKHh4ICsgenopKSAqIHN5O1xuICBvdXRbNl0gPSAoeXogKyB3eCkgKiBzeTtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHh6ICsgd3kpICogc3o7XG4gIG91dFs5XSA9ICh5eiAtIHd4KSAqIHN6O1xuICBvdXRbMTBdID0gKDEgLSAoeHggKyB5eSkpICogc3o7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiwgdmVjdG9yIHRyYW5zbGF0aW9uIGFuZCB2ZWN0b3Igc2NhbGUsIHJvdGF0aW5nIGFuZCBzY2FsaW5nIGFyb3VuZCB0aGUgZ2l2ZW4gb3JpZ2luXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG9yaWdpbik7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgbmVnYXRpdmVPcmlnaW4pO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcyBTY2FsaW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IG8gVGhlIG9yaWdpbiB2ZWN0b3IgYXJvdW5kIHdoaWNoIHRvIHNjYWxlIGFuZCByb3RhdGVcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZU9yaWdpbihvdXQsIHEsIHYsIHMsIG8pIHtcbiAgLy8gUXVhdGVybmlvbiBtYXRoXG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeHkgPSB4ICogeTI7XG4gIHZhciB4eiA9IHggKiB6MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgeXogPSB5ICogejI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgdmFyIHN4ID0gc1swXTtcbiAgdmFyIHN5ID0gc1sxXTtcbiAgdmFyIHN6ID0gc1syXTtcbiAgdmFyIG94ID0gb1swXTtcbiAgdmFyIG95ID0gb1sxXTtcbiAgdmFyIG96ID0gb1syXTtcbiAgdmFyIG91dDAgPSAoMSAtICh5eSArIHp6KSkgKiBzeDtcbiAgdmFyIG91dDEgPSAoeHkgKyB3eikgKiBzeDtcbiAgdmFyIG91dDIgPSAoeHogLSB3eSkgKiBzeDtcbiAgdmFyIG91dDQgPSAoeHkgLSB3eikgKiBzeTtcbiAgdmFyIG91dDUgPSAoMSAtICh4eCArIHp6KSkgKiBzeTtcbiAgdmFyIG91dDYgPSAoeXogKyB3eCkgKiBzeTtcbiAgdmFyIG91dDggPSAoeHogKyB3eSkgKiBzejtcbiAgdmFyIG91dDkgPSAoeXogLSB3eCkgKiBzejtcbiAgdmFyIG91dDEwID0gKDEgLSAoeHggKyB5eSkpICogc3o7XG4gIG91dFswXSA9IG91dDA7XG4gIG91dFsxXSA9IG91dDE7XG4gIG91dFsyXSA9IG91dDI7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IG91dDQ7XG4gIG91dFs1XSA9IG91dDU7XG4gIG91dFs2XSA9IG91dDY7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IG91dDg7XG4gIG91dFs5XSA9IG91dDk7XG4gIG91dFsxMF0gPSBvdXQxMDtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdICsgb3ggLSAob3V0MCAqIG94ICsgb3V0NCAqIG95ICsgb3V0OCAqIG96KTtcbiAgb3V0WzEzXSA9IHZbMV0gKyBveSAtIChvdXQxICogb3ggKyBvdXQ1ICogb3kgKyBvdXQ5ICogb3opO1xuICBvdXRbMTRdID0gdlsyXSArIG96IC0gKG91dDIgKiBveCArIG91dDYgKiBveSArIG91dDEwICogb3opO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBhIDR4NCBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIFF1YXRlcm5pb24gdG8gY3JlYXRlIG1hdHJpeCBmcm9tXG4gKlxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUXVhdChvdXQsIHEpIHtcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB5eCA9IHkgKiB4MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgenggPSB6ICogeDI7XG4gIHZhciB6eSA9IHogKiB5MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0geXkgLSB6ejtcbiAgb3V0WzFdID0geXggKyB3ejtcbiAgb3V0WzJdID0genggLSB3eTtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0geXggLSB3ejtcbiAgb3V0WzVdID0gMSAtIHh4IC0geno7XG4gIG91dFs2XSA9IHp5ICsgd3g7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHp4ICsgd3k7XG4gIG91dFs5XSA9IHp5IC0gd3g7XG4gIG91dFsxMF0gPSAxIC0geHggLSB5eTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBmcnVzdHVtIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge051bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJ1c3R1bShvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBybCA9IDEgLyAocmlnaHQgLSBsZWZ0KTtcbiAgdmFyIHRiID0gMSAvICh0b3AgLSBib3R0b20pO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSBuZWFyICogMiAqIHJsO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBuZWFyICogMiAqIHRiO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAocmlnaHQgKyBsZWZ0KSAqIHJsO1xuICBvdXRbOV0gPSAodG9wICsgYm90dG9tKSAqIHRiO1xuICBvdXRbMTBdID0gKGZhciArIG5lYXIpICogbmY7XG4gIG91dFsxMV0gPSAtMTtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gZmFyICogbmVhciAqIDIgKiBuZjtcbiAgb3V0WzE1XSA9IDA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFstMSwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdML09wZW5HTCdzIGNsaXAgdm9sdW1lLlxuICogUGFzc2luZyBudWxsL3VuZGVmaW5lZC9ubyB2YWx1ZSBmb3IgZmFyIHdpbGwgZ2VuZXJhdGUgaW5maW5pdGUgcHJvamVjdGlvbiBtYXRyaXguXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IGZvdnkgVmVydGljYWwgZmllbGQgb2YgdmlldyBpbiByYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gYXNwZWN0IEFzcGVjdCByYXRpby4gdHlwaWNhbGx5IHZpZXdwb3J0IHdpZHRoL2hlaWdodFxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW0sIGNhbiBiZSBudWxsIG9yIEluZmluaXR5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcnNwZWN0aXZlTk8ob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICB2YXIgZiA9IDEuMCAvIE1hdGgudGFuKGZvdnkgLyAyKSxcbiAgICAgIG5mO1xuICBvdXRbMF0gPSBmIC8gYXNwZWN0O1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBmO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE1XSA9IDA7XG5cbiAgaWYgKGZhciAhPSBudWxsICYmIGZhciAhPT0gSW5maW5pdHkpIHtcbiAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICAgIG91dFsxNF0gPSAyICogZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLTIgKiBuZWFyO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0LnBlcnNwZWN0aXZlTk99XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHBlcnNwZWN0aXZlID0gcGVyc3BlY3RpdmVOTztcbi8qKlxuICogR2VuZXJhdGVzIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXggc3VpdGFibGUgZm9yIFdlYkdQVSB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbMCwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdQVS9WdWxrYW4vRGlyZWN0WC9NZXRhbCdzIGNsaXAgdm9sdW1lLlxuICogUGFzc2luZyBudWxsL3VuZGVmaW5lZC9ubyB2YWx1ZSBmb3IgZmFyIHdpbGwgZ2VuZXJhdGUgaW5maW5pdGUgcHJvamVjdGlvbiBtYXRyaXguXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IGZvdnkgVmVydGljYWwgZmllbGQgb2YgdmlldyBpbiByYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gYXNwZWN0IEFzcGVjdCByYXRpby4gdHlwaWNhbGx5IHZpZXdwb3J0IHdpZHRoL2hlaWdodFxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW0sIGNhbiBiZSBudWxsIG9yIEluZmluaXR5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcnNwZWN0aXZlWk8ob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICB2YXIgZiA9IDEuMCAvIE1hdGgudGFuKGZvdnkgLyAyKSxcbiAgICAgIG5mO1xuICBvdXRbMF0gPSBmIC8gYXNwZWN0O1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBmO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE1XSA9IDA7XG5cbiAgaWYgKGZhciAhPSBudWxsICYmIGZhciAhPT0gSW5maW5pdHkpIHtcbiAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzEwXSA9IGZhciAqIG5mO1xuICAgIG91dFsxNF0gPSBmYXIgKiBuZWFyICogbmY7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzEwXSA9IC0xO1xuICAgIG91dFsxNF0gPSAtbmVhcjtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGZpZWxkIG9mIHZpZXcuXG4gKiBUaGlzIGlzIHByaW1hcmlseSB1c2VmdWwgZm9yIGdlbmVyYXRpbmcgcHJvamVjdGlvbiBtYXRyaWNlcyB0byBiZSB1c2VkXG4gKiB3aXRoIHRoZSBzdGlsbCBleHBlcmllbWVudGFsIFdlYlZSIEFQSS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge09iamVjdH0gZm92IE9iamVjdCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgdmFsdWVzOiB1cERlZ3JlZXMsIGRvd25EZWdyZWVzLCBsZWZ0RGVncmVlcywgcmlnaHREZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZUZyb21GaWVsZE9mVmlldyhvdXQsIGZvdiwgbmVhciwgZmFyKSB7XG4gIHZhciB1cFRhbiA9IE1hdGgudGFuKGZvdi51cERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgZG93blRhbiA9IE1hdGgudGFuKGZvdi5kb3duRGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciBsZWZ0VGFuID0gTWF0aC50YW4oZm92LmxlZnREZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIHJpZ2h0VGFuID0gTWF0aC50YW4oZm92LnJpZ2h0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciB4U2NhbGUgPSAyLjAgLyAobGVmdFRhbiArIHJpZ2h0VGFuKTtcbiAgdmFyIHlTY2FsZSA9IDIuMCAvICh1cFRhbiArIGRvd25UYW4pO1xuICBvdXRbMF0gPSB4U2NhbGU7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICBvdXRbM10gPSAwLjA7XG4gIG91dFs0XSA9IDAuMDtcbiAgb3V0WzVdID0geVNjYWxlO1xuICBvdXRbNl0gPSAwLjA7XG4gIG91dFs3XSA9IDAuMDtcbiAgb3V0WzhdID0gLSgobGVmdFRhbiAtIHJpZ2h0VGFuKSAqIHhTY2FsZSAqIDAuNSk7XG4gIG91dFs5XSA9ICh1cFRhbiAtIGRvd25UYW4pICogeVNjYWxlICogMC41O1xuICBvdXRbMTBdID0gZmFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTFdID0gLTEuMDtcbiAgb3V0WzEyXSA9IDAuMDtcbiAgb3V0WzEzXSA9IDAuMDtcbiAgb3V0WzE0XSA9IGZhciAqIG5lYXIgLyAobmVhciAtIGZhcik7XG4gIG91dFsxNV0gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWy0xLCAxXSxcbiAqIHdoaWNoIG1hdGNoZXMgV2ViR0wvT3BlbkdMJ3MgY2xpcCB2b2x1bWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG9ydGhvTk8ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgbHIgPSAxIC8gKGxlZnQgLSByaWdodCk7XG4gIHZhciBidCA9IDEgLyAoYm90dG9tIC0gdG9wKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gLTIgKiBscjtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gLTIgKiBidDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDIgKiBuZjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAobGVmdCArIHJpZ2h0KSAqIGxyO1xuICBvdXRbMTNdID0gKHRvcCArIGJvdHRvbSkgKiBidDtcbiAgb3V0WzE0XSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm9ydGhvTk99XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG9ydGhvID0gb3J0aG9OTztcbi8qKlxuICogR2VuZXJhdGVzIGEgb3J0aG9nb25hbCBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbMCwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdQVS9WdWxrYW4vRGlyZWN0WC9NZXRhbCdzIGNsaXAgdm9sdW1lLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBvcnRob1pPKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpO1xuICB2YXIgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IC0yICogbHI7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IC0yICogYnQ7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSBuZjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAobGVmdCArIHJpZ2h0KSAqIGxyO1xuICBvdXRbMTNdID0gKHRvcCArIGJvdHRvbSkgKiBidDtcbiAgb3V0WzE0XSA9IG5lYXIgKiBuZjtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIGxvb2stYXQgbWF0cml4IHdpdGggdGhlIGdpdmVuIGV5ZSBwb3NpdGlvbiwgZm9jYWwgcG9pbnQsIGFuZCB1cCBheGlzLlxuICogSWYgeW91IHdhbnQgYSBtYXRyaXggdGhhdCBhY3R1YWxseSBtYWtlcyBhbiBvYmplY3QgbG9vayBhdCBhbm90aGVyIG9iamVjdCwgeW91IHNob3VsZCB1c2UgdGFyZ2V0VG8gaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZXllIFBvc2l0aW9uIG9mIHRoZSB2aWV3ZXJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjZW50ZXIgUG9pbnQgdGhlIHZpZXdlciBpcyBsb29raW5nIGF0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgdmVjMyBwb2ludGluZyB1cFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsb29rQXQob3V0LCBleWUsIGNlbnRlciwgdXApIHtcbiAgdmFyIHgwLCB4MSwgeDIsIHkwLCB5MSwgeTIsIHowLCB6MSwgejIsIGxlbjtcbiAgdmFyIGV5ZXggPSBleWVbMF07XG4gIHZhciBleWV5ID0gZXllWzFdO1xuICB2YXIgZXlleiA9IGV5ZVsyXTtcbiAgdmFyIHVweCA9IHVwWzBdO1xuICB2YXIgdXB5ID0gdXBbMV07XG4gIHZhciB1cHogPSB1cFsyXTtcbiAgdmFyIGNlbnRlcnggPSBjZW50ZXJbMF07XG4gIHZhciBjZW50ZXJ5ID0gY2VudGVyWzFdO1xuICB2YXIgY2VudGVyeiA9IGNlbnRlclsyXTtcblxuICBpZiAoTWF0aC5hYnMoZXlleCAtIGNlbnRlcngpIDwgZ2xNYXRyaXguRVBTSUxPTiAmJiBNYXRoLmFicyhleWV5IC0gY2VudGVyeSkgPCBnbE1hdHJpeC5FUFNJTE9OICYmIE1hdGguYWJzKGV5ZXogLSBjZW50ZXJ6KSA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gaWRlbnRpdHkob3V0KTtcbiAgfVxuXG4gIHowID0gZXlleCAtIGNlbnRlcng7XG4gIHoxID0gZXlleSAtIGNlbnRlcnk7XG4gIHoyID0gZXlleiAtIGNlbnRlcno7XG4gIGxlbiA9IDEgLyBNYXRoLmh5cG90KHowLCB6MSwgejIpO1xuICB6MCAqPSBsZW47XG4gIHoxICo9IGxlbjtcbiAgejIgKj0gbGVuO1xuICB4MCA9IHVweSAqIHoyIC0gdXB6ICogejE7XG4gIHgxID0gdXB6ICogejAgLSB1cHggKiB6MjtcbiAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICBsZW4gPSBNYXRoLmh5cG90KHgwLCB4MSwgeDIpO1xuXG4gIGlmICghbGVuKSB7XG4gICAgeDAgPSAwO1xuICAgIHgxID0gMDtcbiAgICB4MiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbGVuID0gMSAvIGxlbjtcbiAgICB4MCAqPSBsZW47XG4gICAgeDEgKj0gbGVuO1xuICAgIHgyICo9IGxlbjtcbiAgfVxuXG4gIHkwID0gejEgKiB4MiAtIHoyICogeDE7XG4gIHkxID0gejIgKiB4MCAtIHowICogeDI7XG4gIHkyID0gejAgKiB4MSAtIHoxICogeDA7XG4gIGxlbiA9IE1hdGguaHlwb3QoeTAsIHkxLCB5Mik7XG5cbiAgaWYgKCFsZW4pIHtcbiAgICB5MCA9IDA7XG4gICAgeTEgPSAwO1xuICAgIHkyID0gMDtcbiAgfSBlbHNlIHtcbiAgICBsZW4gPSAxIC8gbGVuO1xuICAgIHkwICo9IGxlbjtcbiAgICB5MSAqPSBsZW47XG4gICAgeTIgKj0gbGVuO1xuICB9XG5cbiAgb3V0WzBdID0geDA7XG4gIG91dFsxXSA9IHkwO1xuICBvdXRbMl0gPSB6MDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0geDE7XG4gIG91dFs1XSA9IHkxO1xuICBvdXRbNl0gPSB6MTtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geDI7XG4gIG91dFs5XSA9IHkyO1xuICBvdXRbMTBdID0gejI7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gLSh4MCAqIGV5ZXggKyB4MSAqIGV5ZXkgKyB4MiAqIGV5ZXopO1xuICBvdXRbMTNdID0gLSh5MCAqIGV5ZXggKyB5MSAqIGV5ZXkgKyB5MiAqIGV5ZXopO1xuICBvdXRbMTRdID0gLSh6MCAqIGV5ZXggKyB6MSAqIGV5ZXkgKyB6MiAqIGV5ZXopO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWF0cml4IHRoYXQgbWFrZXMgc29tZXRoaW5nIGxvb2sgYXQgc29tZXRoaW5nIGVsc2UuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdGFyZ2V0VG8ob3V0LCBleWUsIHRhcmdldCwgdXApIHtcbiAgdmFyIGV5ZXggPSBleWVbMF0sXG4gICAgICBleWV5ID0gZXllWzFdLFxuICAgICAgZXlleiA9IGV5ZVsyXSxcbiAgICAgIHVweCA9IHVwWzBdLFxuICAgICAgdXB5ID0gdXBbMV0sXG4gICAgICB1cHogPSB1cFsyXTtcbiAgdmFyIHowID0gZXlleCAtIHRhcmdldFswXSxcbiAgICAgIHoxID0gZXlleSAtIHRhcmdldFsxXSxcbiAgICAgIHoyID0gZXlleiAtIHRhcmdldFsyXTtcbiAgdmFyIGxlbiA9IHowICogejAgKyB6MSAqIHoxICsgejIgKiB6MjtcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgICB6MCAqPSBsZW47XG4gICAgejEgKj0gbGVuO1xuICAgIHoyICo9IGxlbjtcbiAgfVxuXG4gIHZhciB4MCA9IHVweSAqIHoyIC0gdXB6ICogejEsXG4gICAgICB4MSA9IHVweiAqIHowIC0gdXB4ICogejIsXG4gICAgICB4MiA9IHVweCAqIHoxIC0gdXB5ICogejA7XG4gIGxlbiA9IHgwICogeDAgKyB4MSAqIHgxICsgeDIgKiB4MjtcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgICB4MCAqPSBsZW47XG4gICAgeDEgKj0gbGVuO1xuICAgIHgyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB4MTtcbiAgb3V0WzJdID0geDI7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHoxICogeDIgLSB6MiAqIHgxO1xuICBvdXRbNV0gPSB6MiAqIHgwIC0gejAgKiB4MjtcbiAgb3V0WzZdID0gejAgKiB4MSAtIHoxICogeDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHowO1xuICBvdXRbOV0gPSB6MTtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IGV5ZXg7XG4gIG91dFsxM10gPSBleWV5O1xuICBvdXRbMTRdID0gZXllejtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwibWF0NChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIiwgXCIgKyBhWzRdICsgXCIsIFwiICsgYVs1XSArIFwiLCBcIiArIGFbNl0gKyBcIiwgXCIgKyBhWzddICsgXCIsIFwiICsgYVs4XSArIFwiLCBcIiArIGFbOV0gKyBcIiwgXCIgKyBhWzEwXSArIFwiLCBcIiArIGFbMTFdICsgXCIsIFwiICsgYVsxMl0gKyBcIiwgXCIgKyBhWzEzXSArIFwiLCBcIiArIGFbMTRdICsgXCIsIFwiICsgYVsxNV0gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvYihhKSB7XG4gIHJldHVybiBNYXRoLmh5cG90KGFbMF0sIGFbMV0sIGFbMl0sIGFbM10sIGFbNF0sIGFbNV0sIGFbNl0sIGFbN10sIGFbOF0sIGFbOV0sIGFbMTBdLCBhWzExXSwgYVsxMl0sIGFbMTNdLCBhWzE0XSwgYVsxNV0pO1xufVxuLyoqXG4gKiBBZGRzIHR3byBtYXQ0J3NcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdO1xuICBvdXRbN10gPSBhWzddICsgYls3XTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF07XG4gIG91dFs5XSA9IGFbOV0gKyBiWzldO1xuICBvdXRbMTBdID0gYVsxMF0gKyBiWzEwXTtcbiAgb3V0WzExXSA9IGFbMTFdICsgYlsxMV07XG4gIG91dFsxMl0gPSBhWzEyXSArIGJbMTJdO1xuICBvdXRbMTNdID0gYVsxM10gKyBiWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdICsgYlsxNF07XG4gIG91dFsxNV0gPSBhWzE1XSArIGJbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgbWF0cml4IGIgZnJvbSBtYXRyaXggYVxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgb3V0WzRdID0gYVs0XSAtIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gLSBiWzVdO1xuICBvdXRbNl0gPSBhWzZdIC0gYls2XTtcbiAgb3V0WzddID0gYVs3XSAtIGJbN107XG4gIG91dFs4XSA9IGFbOF0gLSBiWzhdO1xuICBvdXRbOV0gPSBhWzldIC0gYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdIC0gYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSAtIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gLSBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdIC0gYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSAtIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gLSBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbHkgZWFjaCBlbGVtZW50IG9mIHRoZSBtYXRyaXggYnkgYSBzY2FsYXIuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgbWF0cml4J3MgZWxlbWVudHMgYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICBvdXRbNF0gPSBhWzRdICogYjtcbiAgb3V0WzVdID0gYVs1XSAqIGI7XG4gIG91dFs2XSA9IGFbNl0gKiBiO1xuICBvdXRbN10gPSBhWzddICogYjtcbiAgb3V0WzhdID0gYVs4XSAqIGI7XG4gIG91dFs5XSA9IGFbOV0gKiBiO1xuICBvdXRbMTBdID0gYVsxMF0gKiBiO1xuICBvdXRbMTFdID0gYVsxMV0gKiBiO1xuICBvdXRbMTJdID0gYVsxMl0gKiBiO1xuICBvdXRbMTNdID0gYVsxM10gKiBiO1xuICBvdXRbMTRdID0gYVsxNF0gKiBiO1xuICBvdXRbMTVdID0gYVsxNV0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byBtYXQ0J3MgYWZ0ZXIgbXVsdGlwbHlpbmcgZWFjaCBlbGVtZW50IG9mIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYidzIGVsZW1lbnRzIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXJBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XSAqIHNjYWxlO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XSAqIHNjYWxlO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XSAqIHNjYWxlO1xuICBvdXRbN10gPSBhWzddICsgYls3XSAqIHNjYWxlO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XSAqIHNjYWxlO1xuICBvdXRbOV0gPSBhWzldICsgYls5XSAqIHNjYWxlO1xuICBvdXRbMTBdID0gYVsxMF0gKyBiWzEwXSAqIHNjYWxlO1xuICBvdXRbMTFdID0gYVsxMV0gKyBiWzExXSAqIHNjYWxlO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXSAqIHNjYWxlO1xuICBvdXRbMTNdID0gYVsxM10gKyBiWzEzXSAqIHNjYWxlO1xuICBvdXRbMTRdID0gYVsxNF0gKyBiWzE0XSAqIHNjYWxlO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdICYmIGFbNF0gPT09IGJbNF0gJiYgYVs1XSA9PT0gYls1XSAmJiBhWzZdID09PSBiWzZdICYmIGFbN10gPT09IGJbN10gJiYgYVs4XSA9PT0gYls4XSAmJiBhWzldID09PSBiWzldICYmIGFbMTBdID09PSBiWzEwXSAmJiBhWzExXSA9PT0gYlsxMV0gJiYgYVsxMl0gPT09IGJbMTJdICYmIGFbMTNdID09PSBiWzEzXSAmJiBhWzE0XSA9PT0gYlsxNF0gJiYgYVsxNV0gPT09IGJbMTVdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdO1xuICB2YXIgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddO1xuICB2YXIgYTggPSBhWzhdLFxuICAgICAgYTkgPSBhWzldLFxuICAgICAgYTEwID0gYVsxMF0sXG4gICAgICBhMTEgPSBhWzExXTtcbiAgdmFyIGExMiA9IGFbMTJdLFxuICAgICAgYTEzID0gYVsxM10sXG4gICAgICBhMTQgPSBhWzE0XSxcbiAgICAgIGExNSA9IGFbMTVdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdO1xuICB2YXIgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddO1xuICB2YXIgYjggPSBiWzhdLFxuICAgICAgYjkgPSBiWzldLFxuICAgICAgYjEwID0gYlsxMF0sXG4gICAgICBiMTEgPSBiWzExXTtcbiAgdmFyIGIxMiA9IGJbMTJdLFxuICAgICAgYjEzID0gYlsxM10sXG4gICAgICBiMTQgPSBiWzE0XSxcbiAgICAgIGIxNSA9IGJbMTVdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSkgJiYgTWF0aC5hYnMoYTkgLSBiOSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTkpLCBNYXRoLmFicyhiOSkpICYmIE1hdGguYWJzKGExMCAtIGIxMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEwKSwgTWF0aC5hYnMoYjEwKSkgJiYgTWF0aC5hYnMoYTExIC0gYjExKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTEpLCBNYXRoLmFicyhiMTEpKSAmJiBNYXRoLmFicyhhMTIgLSBiMTIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMiksIE1hdGguYWJzKGIxMikpICYmIE1hdGguYWJzKGExMyAtIGIxMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEzKSwgTWF0aC5hYnMoYjEzKSkgJiYgTWF0aC5hYnMoYTE0IC0gYjE0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTQpLCBNYXRoLmFicyhiMTQpKSAmJiBNYXRoLmFicyhhMTUgLSBiMTUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExNSksIE1hdGguYWJzKGIxNSkpO1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDQuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0OyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbmltcG9ydCAqIGFzIG1hdDMgZnJvbSBcIi4vbWF0My5qc1wiO1xuaW1wb3J0ICogYXMgdmVjMyBmcm9tIFwiLi92ZWMzLmpzXCI7XG5pbXBvcnQgKiBhcyB2ZWM0IGZyb20gXCIuL3ZlYzQuanNcIjtcbi8qKlxuICogUXVhdGVybmlvblxuICogQG1vZHVsZSBxdWF0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IHF1YXRcbiAqXG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgfVxuXG4gIG91dFszXSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIHF1YXQgdG8gdGhlIGlkZW50aXR5IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkob3V0KSB7XG4gIG91dFswXSA9IDA7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldHMgYSBxdWF0IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFuZCByb3RhdGlvbiBheGlzLFxuICogdGhlbiByZXR1cm5zIGl0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgYXJvdW5kIHdoaWNoIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXhpc0FuZ2xlKG91dCwgYXhpcywgcmFkKSB7XG4gIHJhZCA9IHJhZCAqIDAuNTtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICBvdXRbMF0gPSBzICogYXhpc1swXTtcbiAgb3V0WzFdID0gcyAqIGF4aXNbMV07XG4gIG91dFsyXSA9IHMgKiBheGlzWzJdO1xuICBvdXRbM10gPSBNYXRoLmNvcyhyYWQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXRzIHRoZSByb3RhdGlvbiBheGlzIGFuZCBhbmdsZSBmb3IgYSBnaXZlblxuICogIHF1YXRlcm5pb24uIElmIGEgcXVhdGVybmlvbiBpcyBjcmVhdGVkIHdpdGhcbiAqICBzZXRBeGlzQW5nbGUsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSBzYW1lXG4gKiAgdmFsdWVzIGFzIHByb3ZpZGllZCBpbiB0aGUgb3JpZ2luYWwgcGFyYW1ldGVyIGxpc3RcbiAqICBPUiBmdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB2YWx1ZXMuXG4gKiBFeGFtcGxlOiBUaGUgcXVhdGVybmlvbiBmb3JtZWQgYnkgYXhpcyBbMCwgMCwgMV0gYW5kXG4gKiAgYW5nbGUgLTkwIGlzIHRoZSBzYW1lIGFzIHRoZSBxdWF0ZXJuaW9uIGZvcm1lZCBieVxuICogIFswLCAwLCAxXSBhbmQgMjcwLiBUaGlzIG1ldGhvZCBmYXZvcnMgdGhlIGxhdHRlci5cbiAqIEBwYXJhbSAge3ZlYzN9IG91dF9heGlzICBWZWN0b3IgcmVjZWl2aW5nIHRoZSBheGlzIG9mIHJvdGF0aW9uXG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXR9IHEgICAgIFF1YXRlcm5pb24gdG8gYmUgZGVjb21wb3NlZFxuICogQHJldHVybiB7TnVtYmVyfSAgICAgQW5nbGUsIGluIHJhZGlhbnMsIG9mIHRoZSByb3RhdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBeGlzQW5nbGUob3V0X2F4aXMsIHEpIHtcbiAgdmFyIHJhZCA9IE1hdGguYWNvcyhxWzNdKSAqIDIuMDtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQgLyAyLjApO1xuXG4gIGlmIChzID4gZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIG91dF9heGlzWzBdID0gcVswXSAvIHM7XG4gICAgb3V0X2F4aXNbMV0gPSBxWzFdIC8gcztcbiAgICBvdXRfYXhpc1syXSA9IHFbMl0gLyBzO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHMgaXMgemVybywgcmV0dXJuIGFueSBheGlzIChubyByb3RhdGlvbiAtIGF4aXMgZG9lcyBub3QgbWF0dGVyKVxuICAgIG91dF9heGlzWzBdID0gMTtcbiAgICBvdXRfYXhpc1sxXSA9IDA7XG4gICAgb3V0X2F4aXNbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIHJhZDtcbn1cbi8qKlxuICogR2V0cyB0aGUgYW5ndWxhciBkaXN0YW5jZSBiZXR3ZWVuIHR3byB1bml0IHF1YXRlcm5pb25zXG4gKlxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBhICAgICBPcmlnaW4gdW5pdCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXR9IGIgICAgIERlc3RpbmF0aW9uIHVuaXQgcXVhdGVybmlvblxuICogQHJldHVybiB7TnVtYmVyfSAgICAgQW5nbGUsIGluIHJhZGlhbnMsIGJldHdlZW4gdGhlIHR3byBxdWF0ZXJuaW9uc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmdsZShhLCBiKSB7XG4gIHZhciBkb3Rwcm9kdWN0ID0gZG90KGEsIGIpO1xuICByZXR1cm4gTWF0aC5hY29zKDIgKiBkb3Rwcm9kdWN0ICogZG90cHJvZHVjdCAtIDEpO1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIG91dFswXSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gIG91dFszXSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgKyBhdyAqIGJ4O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXogKiBieDtcbiAgb3V0WzJdID0gYXogKiBidyAtIGF5ICogYng7XG4gIG91dFszXSA9IGF3ICogYncgLSBheCAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnkgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnk7XG4gIG91dFsyXSA9IGF6ICogYncgKyBheCAqIGJ5O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXkgKiBieTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ6ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyArIGF5ICogYno7XG4gIG91dFsxXSA9IGF5ICogYncgLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBiejtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIFcgY29tcG9uZW50IG9mIGEgcXVhdCBmcm9tIHRoZSBYLCBZLCBhbmQgWiBjb21wb25lbnRzLlxuICogQXNzdW1lcyB0aGF0IHF1YXRlcm5pb24gaXMgMSB1bml0IGluIGxlbmd0aC5cbiAqIEFueSBleGlzdGluZyBXIGNvbXBvbmVudCB3aWxsIGJlIGlnbm9yZWQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBXIGNvbXBvbmVudCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVXKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSBNYXRoLnNxcnQoTWF0aC5hYnMoMS4wIC0geCAqIHggLSB5ICogeSAtIHogKiB6KSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgZXhwb25lbnRpYWwgb2YgYSB1bml0IHF1YXRlcm5pb24uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSB0aGUgZXhwb25lbnRpYWwgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhwKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIHZhciByID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIHZhciBldCA9IE1hdGguZXhwKHcpO1xuICB2YXIgcyA9IHIgPiAwID8gZXQgKiBNYXRoLnNpbihyKSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogcztcbiAgb3V0WzFdID0geSAqIHM7XG4gIG91dFsyXSA9IHogKiBzO1xuICBvdXRbM10gPSBldCAqIE1hdGguY29zKHIpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIG5hdHVyYWwgbG9nYXJpdGhtIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxuKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIHZhciByID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIHZhciB0ID0gciA+IDAgPyBNYXRoLmF0YW4yKHIsIHcpIC8gciA6IDA7XG4gIG91dFswXSA9IHggKiB0O1xuICBvdXRbMV0gPSB5ICogdDtcbiAgb3V0WzJdID0geiAqIHQ7XG4gIG91dFszXSA9IDAuNSAqIE1hdGgubG9nKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBzY2FsYXIgcG93ZXIgb2YgYSB1bml0IHF1YXRlcm5pb24uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSB0aGUgZXhwb25lbnRpYWwgb2ZcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgcXVhdGVybmlvbiBieVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwb3cob3V0LCBhLCBiKSB7XG4gIGxuKG91dCwgYSk7XG4gIHNjYWxlKG91dCwgb3V0LCBiKTtcbiAgZXhwKG91dCwgb3V0KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgLy8gYmVuY2htYXJrczpcbiAgLy8gICAgaHR0cDovL2pzcGVyZi5jb20vcXVhdGVybmlvbi1zbGVycC1pbXBsZW1lbnRhdGlvbnNcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIGJ3ID0gYlszXTtcbiAgdmFyIG9tZWdhLCBjb3NvbSwgc2lub20sIHNjYWxlMCwgc2NhbGUxOyAvLyBjYWxjIGNvc2luZVxuXG4gIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgaWYgKGNvc29tIDwgMC4wKSB7XG4gICAgY29zb20gPSAtY29zb207XG4gICAgYnggPSAtYng7XG4gICAgYnkgPSAtYnk7XG4gICAgYnogPSAtYno7XG4gICAgYncgPSAtYnc7XG4gIH0gLy8gY2FsY3VsYXRlIGNvZWZmaWNpZW50c1xuXG5cbiAgaWYgKDEuMCAtIGNvc29tID4gZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKVxuICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTtcbiAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gIH0gZWxzZSB7XG4gICAgLy8gXCJmcm9tXCIgYW5kIFwidG9cIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZVxuICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICBzY2FsZTAgPSAxLjAgLSB0O1xuICAgIHNjYWxlMSA9IHQ7XG4gIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgb3V0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgb3V0WzFdID0gc2NhbGUwICogYXkgKyBzY2FsZTEgKiBieTtcbiAgb3V0WzJdID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgb3V0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHVuaXQgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0KSB7XG4gIC8vIEltcGxlbWVudGF0aW9uIG9mIGh0dHA6Ly9wbGFubmluZy5jcy51aXVjLmVkdS9ub2RlMTk4Lmh0bWxcbiAgLy8gVE9ETzogQ2FsbGluZyByYW5kb20gMyB0aW1lcyBpcyBwcm9iYWJseSBub3QgdGhlIGZhc3Rlc3Qgc29sdXRpb25cbiAgdmFyIHUxID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciB1MiA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTMgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHNxcnQxTWludXNVMSA9IE1hdGguc3FydCgxIC0gdTEpO1xuICB2YXIgc3FydFUxID0gTWF0aC5zcXJ0KHUxKTtcbiAgb3V0WzBdID0gc3FydDFNaW51c1UxICogTWF0aC5zaW4oMi4wICogTWF0aC5QSSAqIHUyKTtcbiAgb3V0WzFdID0gc3FydDFNaW51c1UxICogTWF0aC5jb3MoMi4wICogTWF0aC5QSSAqIHUyKTtcbiAgb3V0WzJdID0gc3FydFUxICogTWF0aC5zaW4oMi4wICogTWF0aC5QSSAqIHUzKTtcbiAgb3V0WzNdID0gc3FydFUxICogTWF0aC5jb3MoMi4wICogTWF0aC5QSSAqIHUzKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgaW52ZXJzZSBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIGludmVyc2Ugb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KG91dCwgYSkge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdO1xuICB2YXIgZG90ID0gYTAgKiBhMCArIGExICogYTEgKyBhMiAqIGEyICsgYTMgKiBhMztcbiAgdmFyIGludkRvdCA9IGRvdCA/IDEuMCAvIGRvdCA6IDA7IC8vIFRPRE86IFdvdWxkIGJlIGZhc3RlciB0byByZXR1cm4gWzAsMCwwLDBdIGltbWVkaWF0ZWx5IGlmIGRvdCA9PSAwXG5cbiAgb3V0WzBdID0gLWEwICogaW52RG90O1xuICBvdXRbMV0gPSAtYTEgKiBpbnZEb3Q7XG4gIG91dFsyXSA9IC1hMiAqIGludkRvdDtcbiAgb3V0WzNdID0gYTMgKiBpbnZEb3Q7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvbmp1Z2F0ZSBvZiBhIHF1YXRcbiAqIElmIHRoZSBxdWF0ZXJuaW9uIGlzIG5vcm1hbGl6ZWQsIHRoaXMgZnVuY3Rpb24gaXMgZmFzdGVyIHRoYW4gcXVhdC5pbnZlcnNlIGFuZCBwcm9kdWNlcyB0aGUgc2FtZSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBjb25qdWdhdGUgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29uanVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiAzeDMgcm90YXRpb24gbWF0cml4LlxuICpcbiAqIE5PVEU6IFRoZSByZXN1bHRhbnQgcXVhdGVybmlvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28geW91IHNob3VsZCBiZSBzdXJlXG4gKiB0byByZW5vcm1hbGl6ZSB0aGUgcXVhdGVybmlvbiB5b3Vyc2VsZiB3aGVyZSBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gbSByb3RhdGlvbiBtYXRyaXhcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0MyhvdXQsIG0pIHtcbiAgLy8gQWxnb3JpdGhtIGluIEtlbiBTaG9lbWFrZSdzIGFydGljbGUgaW4gMTk4NyBTSUdHUkFQSCBjb3Vyc2Ugbm90ZXNcbiAgLy8gYXJ0aWNsZSBcIlF1YXRlcm5pb24gQ2FsY3VsdXMgYW5kIEZhc3QgQW5pbWF0aW9uXCIuXG4gIHZhciBmVHJhY2UgPSBtWzBdICsgbVs0XSArIG1bOF07XG4gIHZhciBmUm9vdDtcblxuICBpZiAoZlRyYWNlID4gMC4wKSB7XG4gICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMlxuICAgIGZSb290ID0gTWF0aC5zcXJ0KGZUcmFjZSArIDEuMCk7IC8vIDJ3XG5cbiAgICBvdXRbM10gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290OyAvLyAxLyg0dylcblxuICAgIG91dFswXSA9IChtWzVdIC0gbVs3XSkgKiBmUm9vdDtcbiAgICBvdXRbMV0gPSAobVs2XSAtIG1bMl0pICogZlJvb3Q7XG4gICAgb3V0WzJdID0gKG1bMV0gLSBtWzNdKSAqIGZSb290O1xuICB9IGVsc2Uge1xuICAgIC8vIHx3fCA8PSAxLzJcbiAgICB2YXIgaSA9IDA7XG4gICAgaWYgKG1bNF0gPiBtWzBdKSBpID0gMTtcbiAgICBpZiAobVs4XSA+IG1baSAqIDMgKyBpXSkgaSA9IDI7XG4gICAgdmFyIGogPSAoaSArIDEpICUgMztcbiAgICB2YXIgayA9IChpICsgMikgJSAzO1xuICAgIGZSb290ID0gTWF0aC5zcXJ0KG1baSAqIDMgKyBpXSAtIG1baiAqIDMgKyBqXSAtIG1bayAqIDMgKyBrXSArIDEuMCk7XG4gICAgb3V0W2ldID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDtcbiAgICBvdXRbM10gPSAobVtqICogMyArIGtdIC0gbVtrICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtqXSA9IChtW2ogKiAzICsgaV0gKyBtW2kgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2tdID0gKG1bayAqIDMgKyBpXSArIG1baSAqIDMgKyBrXSkgKiBmUm9vdDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIGV1bGVyIGFuZ2xlIHgsIHksIHouXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3h9IEFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWCBheGlzIGluIGRlZ3JlZXMuXG4gKiBAcGFyYW0ge3l9IEFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWSBheGlzIGluIGRlZ3JlZXMuXG4gKiBAcGFyYW0ge3p9IEFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWiBheGlzIGluIGRlZ3JlZXMuXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV1bGVyKG91dCwgeCwgeSwgeikge1xuICB2YXIgaGFsZlRvUmFkID0gMC41ICogTWF0aC5QSSAvIDE4MC4wO1xuICB4ICo9IGhhbGZUb1JhZDtcbiAgeSAqPSBoYWxmVG9SYWQ7XG4gIHogKj0gaGFsZlRvUmFkO1xuICB2YXIgc3ggPSBNYXRoLnNpbih4KTtcbiAgdmFyIGN4ID0gTWF0aC5jb3MoeCk7XG4gIHZhciBzeSA9IE1hdGguc2luKHkpO1xuICB2YXIgY3kgPSBNYXRoLmNvcyh5KTtcbiAgdmFyIHN6ID0gTWF0aC5zaW4oeik7XG4gIHZhciBjeiA9IE1hdGguY29zKHopO1xuICBvdXRbMF0gPSBzeCAqIGN5ICogY3ogLSBjeCAqIHN5ICogc3o7XG4gIG91dFsxXSA9IGN4ICogc3kgKiBjeiArIHN4ICogY3kgKiBzejtcbiAgb3V0WzJdID0gY3ggKiBjeSAqIHN6IC0gc3ggKiBzeSAqIGN6O1xuICBvdXRbM10gPSBjeCAqIGN5ICogY3ogKyBzeCAqIHN5ICogc3o7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBxdWF0ZW5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJxdWF0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHF1YXQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBjbG9uZVxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgY2xvbmUgPSB2ZWM0LmNsb25lO1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHF1YXQgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZyb21WYWx1ZXMgPSB2ZWM0LmZyb21WYWx1ZXM7XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBxdWF0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBzb3VyY2UgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBjb3B5ID0gdmVjNC5jb3B5O1xuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBxdWF0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNldCA9IHZlYzQuc2V0O1xuLyoqXG4gKiBBZGRzIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgYWRkID0gdmVjNC5hZGQ7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIFNjYWxlcyBhIHF1YXQgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNjYWxlID0gdmVjNC5zY2FsZTtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZG90ID0gdmVjNC5kb3Q7XG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlcnAgPSB2ZWM0LmxlcnA7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgdmFyIGxlbmd0aCA9IHZlYzQubGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3F1YXJlZExlbmd0aCA9IHZlYzQuc3F1YXJlZExlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG5vcm1hbGl6ZSA9IHZlYzQubm9ybWFsaXplO1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBxdWF0ZXJuaW9ucyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgVGhlIGZpcnN0IHF1YXRlcm5pb24uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiBUaGUgc2Vjb25kIHF1YXRlcm5pb24uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgdmFyIGV4YWN0RXF1YWxzID0gdmVjNC5leGFjdEVxdWFscztcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCB2YXIgZXF1YWxzID0gdmVjNC5lcXVhbHM7XG4vKipcbiAqIFNldHMgYSBxdWF0ZXJuaW9uIHRvIHJlcHJlc2VudCB0aGUgc2hvcnRlc3Qgcm90YXRpb24gZnJvbSBvbmVcbiAqIHZlY3RvciB0byBhbm90aGVyLlxuICpcbiAqIEJvdGggdmVjdG9ycyBhcmUgYXNzdW1lZCB0byBiZSB1bml0IGxlbmd0aC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgaW5pdGlhbCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBkZXN0aW5hdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHJvdGF0aW9uVG8gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0bXB2ZWMzID0gdmVjMy5jcmVhdGUoKTtcbiAgdmFyIHhVbml0VmVjMyA9IHZlYzMuZnJvbVZhbHVlcygxLCAwLCAwKTtcbiAgdmFyIHlVbml0VmVjMyA9IHZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgZG90ID0gdmVjMy5kb3QoYSwgYik7XG5cbiAgICBpZiAoZG90IDwgLTAuOTk5OTk5KSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIHhVbml0VmVjMywgYSk7XG4gICAgICBpZiAodmVjMy5sZW4odG1wdmVjMykgPCAwLjAwMDAwMSkgdmVjMy5jcm9zcyh0bXB2ZWMzLCB5VW5pdFZlYzMsIGEpO1xuICAgICAgdmVjMy5ub3JtYWxpemUodG1wdmVjMywgdG1wdmVjMyk7XG4gICAgICBzZXRBeGlzQW5nbGUob3V0LCB0bXB2ZWMzLCBNYXRoLlBJKTtcbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSBlbHNlIGlmIChkb3QgPiAwLjk5OTk5OSkge1xuICAgICAgb3V0WzBdID0gMDtcbiAgICAgIG91dFsxXSA9IDA7XG4gICAgICBvdXRbMl0gPSAwO1xuICAgICAgb3V0WzNdID0gMTtcbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZlYzMuY3Jvc3ModG1wdmVjMywgYSwgYik7XG4gICAgICBvdXRbMF0gPSB0bXB2ZWMzWzBdO1xuICAgICAgb3V0WzFdID0gdG1wdmVjM1sxXTtcbiAgICAgIG91dFsyXSA9IHRtcHZlYzNbMl07XG4gICAgICBvdXRbM10gPSAxICsgZG90O1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZShvdXQsIG91dCk7XG4gICAgfVxuICB9O1xufSgpO1xuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGMgdGhlIHRoaXJkIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBkIHRoZSBmb3VydGggb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCB2YXIgc3FsZXJwID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdGVtcDEgPSBjcmVhdGUoKTtcbiAgdmFyIHRlbXAyID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gICAgc2xlcnAodGVtcDEsIGEsIGQsIHQpO1xuICAgIHNsZXJwKHRlbXAyLCBiLCBjLCB0KTtcbiAgICBzbGVycChvdXQsIHRlbXAxLCB0ZW1wMiwgMiAqIHQgKiAoMSAtIHQpKTtcbiAgICByZXR1cm4gb3V0O1xuICB9O1xufSgpO1xuLyoqXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgcXVhdGVybmlvbiB3aXRoIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlblxuICogYXhlcy4gRWFjaCBheGlzIGlzIGEgdmVjMyBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgdW5pdCBsZW5ndGggYW5kXG4gKiBwZXJwZW5kaWN1bGFyIHRvIGFsbCBvdGhlciBzcGVjaWZpZWQgYXhlcy5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdmlldyAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIHZpZXdpbmcgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcmlnaHQgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwicmlnaHRcIiBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCAgICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJ1cFwiIGRpcmVjdGlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCB2YXIgc2V0QXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hdHIgPSBtYXQzLmNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgdmlldywgcmlnaHQsIHVwKSB7XG4gICAgbWF0clswXSA9IHJpZ2h0WzBdO1xuICAgIG1hdHJbM10gPSByaWdodFsxXTtcbiAgICBtYXRyWzZdID0gcmlnaHRbMl07XG4gICAgbWF0clsxXSA9IHVwWzBdO1xuICAgIG1hdHJbNF0gPSB1cFsxXTtcbiAgICBtYXRyWzddID0gdXBbMl07XG4gICAgbWF0clsyXSA9IC12aWV3WzBdO1xuICAgIG1hdHJbNV0gPSAtdmlld1sxXTtcbiAgICBtYXRyWzhdID0gLXZpZXdbMl07XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShvdXQsIGZyb21NYXQzKG91dCwgbWF0cikpO1xuICB9O1xufSgpOyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogMyBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjM1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjM1xuICpcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeikge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeikge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguY2VpbCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNlaWxcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2VpbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5jZWlsKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmNlaWwoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguY2VpbChhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5mbG9vciB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGZsb29yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmZsb29yKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmZsb29yKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtaW4ob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMzIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjMydzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkTGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogejtcblxuICBpZiAobGVuID4gMCkge1xuICAgIC8vVE9ETzogZXZhbHVhdGUgdXNlIG9mIGdsbV9pbnZzcXJ0IGhlcmU/XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0gYVswXSAqIGxlbjtcbiAgb3V0WzFdID0gYVsxXSAqIGxlbjtcbiAgb3V0WzJdID0gYVsyXSAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgaGVybWl0ZSBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGZhY3RvclRpbWVzMiAqICgyICogdCAtIDMpICsgMTtcbiAgdmFyIGZhY3RvcjIgPSBmYWN0b3JUaW1lczIgKiAodCAtIDIpICsgdDtcbiAgdmFyIGZhY3RvcjMgPSBmYWN0b3JUaW1lczIgKiAodCAtIDEpO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqICgzIC0gMiAqIHQpO1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGJlemllciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYmV6aWVyKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICB2YXIgaW52ZXJzZUZhY3RvciA9IDEgLSB0O1xuICB2YXIgaW52ZXJzZUZhY3RvclRpbWVzVHdvID0gaW52ZXJzZUZhY3RvciAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3JUaW1lczIgPSB0ICogdDtcbiAgdmFyIGZhY3RvcjEgPSBpbnZlcnNlRmFjdG9yVGltZXNUd28gKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yMiA9IDMgKiB0ICogaW52ZXJzZUZhY3RvclRpbWVzVHdvO1xuICB2YXIgZmFjdG9yMyA9IDMgKiBmYWN0b3JUaW1lczIgKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqIHQ7XG4gIG91dFswXSA9IGFbMF0gKiBmYWN0b3IxICsgYlswXSAqIGZhY3RvcjIgKyBjWzBdICogZmFjdG9yMyArIGRbMF0gKiBmYWN0b3I0O1xuICBvdXRbMV0gPSBhWzFdICogZmFjdG9yMSArIGJbMV0gKiBmYWN0b3IyICsgY1sxXSAqIGZhY3RvcjMgKyBkWzFdICogZmFjdG9yNDtcbiAgb3V0WzJdID0gYVsyXSAqIGZhY3RvcjEgKyBiWzJdICogZmFjdG9yMiArIGNbMl0gKiBmYWN0b3IzICsgZFsyXSAqIGZhY3RvcjQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQsIHNjYWxlKSB7XG4gIHNjYWxlID0gc2NhbGUgfHwgMS4wO1xuICB2YXIgciA9IGdsTWF0cml4LlJBTkRPTSgpICogMi4wICogTWF0aC5QSTtcbiAgdmFyIHogPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAtIDEuMDtcbiAgdmFyIHpTY2FsZSA9IE1hdGguc3FydCgxLjAgLSB6ICogeikgKiBzY2FsZTtcbiAgb3V0WzBdID0gTWF0aC5jb3MocikgKiB6U2NhbGU7XG4gIG91dFsxXSA9IE1hdGguc2luKHIpICogelNjYWxlO1xuICBvdXRbMl0gPSB6ICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDQuXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciB3ID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdO1xuICB3ID0gdyB8fCAxLjA7XG4gIG91dFswXSA9IChtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSkgLyB3O1xuICBvdXRbMV0gPSAobVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10pIC8gdztcbiAgb3V0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQzLlxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gdGhlIDN4MyBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0MyhvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geCAqIG1bMF0gKyB5ICogbVszXSArIHogKiBtWzZdO1xuICBvdXRbMV0gPSB4ICogbVsxXSArIHkgKiBtWzRdICsgeiAqIG1bN107XG4gIG91dFsyXSA9IHggKiBtWzJdICsgeSAqIG1bNV0gKyB6ICogbVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgcXVhdFxuICogQ2FuIGFsc28gYmUgdXNlZCBmb3IgZHVhbCBxdWF0ZXJuaW9ucy4gKE11bHRpcGx5IGl0IHdpdGggdGhlIHJlYWwgcGFydClcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgLy8gYmVuY2htYXJrczogaHR0cHM6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tdHJhbnNmb3JtLXZlYzMtaW1wbGVtZW50YXRpb25zLWZpeGVkXG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07IC8vIHZhciBxdmVjID0gW3F4LCBxeSwgcXpdO1xuICAvLyB2YXIgdXYgPSB2ZWMzLmNyb3NzKFtdLCBxdmVjLCBhKTtcblxuICB2YXIgdXZ4ID0gcXkgKiB6IC0gcXogKiB5LFxuICAgICAgdXZ5ID0gcXogKiB4IC0gcXggKiB6LFxuICAgICAgdXZ6ID0gcXggKiB5IC0gcXkgKiB4OyAvLyB2YXIgdXV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgdXYpO1xuXG4gIHZhciB1dXZ4ID0gcXkgKiB1dnogLSBxeiAqIHV2eSxcbiAgICAgIHV1dnkgPSBxeiAqIHV2eCAtIHF4ICogdXZ6LFxuICAgICAgdXV2eiA9IHF4ICogdXZ5IC0gcXkgKiB1dng7IC8vIHZlYzMuc2NhbGUodXYsIHV2LCAyICogdyk7XG5cbiAgdmFyIHcyID0gcXcgKiAyO1xuICB1dnggKj0gdzI7XG4gIHV2eSAqPSB3MjtcbiAgdXZ6ICo9IHcyOyAvLyB2ZWMzLnNjYWxlKHV1diwgdXV2LCAyKTtcblxuICB1dXZ4ICo9IDI7XG4gIHV1dnkgKj0gMjtcbiAgdXV2eiAqPSAyOyAvLyByZXR1cm4gdmVjMy5hZGQob3V0LCBhLCB2ZWMzLmFkZChvdXQsIHV2LCB1dXYpKTtcblxuICBvdXRbMF0gPSB4ICsgdXZ4ICsgdXV2eDtcbiAgb3V0WzFdID0geSArIHV2eSArIHV1dnk7XG4gIG91dFsyXSA9IHogKyB1dnogKyB1dXZ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB4LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFswXTtcbiAgclsxXSA9IHBbMV0gKiBNYXRoLmNvcyhyYWQpIC0gcFsyXSAqIE1hdGguc2luKHJhZCk7XG4gIHJbMl0gPSBwWzFdICogTWF0aC5zaW4ocmFkKSArIHBbMl0gKiBNYXRoLmNvcyhyYWQpOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeS1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMl0gKiBNYXRoLnNpbihyYWQpICsgcFswXSAqIE1hdGguY29zKHJhZCk7XG4gIHJbMV0gPSBwWzFdO1xuICByWzJdID0gcFsyXSAqIE1hdGguY29zKHJhZCkgLSBwWzBdICogTWF0aC5zaW4ocmFkKTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHotYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdICogTWF0aC5jb3MocmFkKSAtIHBbMV0gKiBNYXRoLnNpbihyYWQpO1xuICByWzFdID0gcFswXSAqIE1hdGguc2luKHJhZCkgKyBwWzFdICogTWF0aC5jb3MocmFkKTtcbiAgclsyXSA9IHBbMl07IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXQgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIDNEIHZlY3RvcnNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlKGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIG1hZzEgPSBNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkgKyBheiAqIGF6KSxcbiAgICAgIG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6KSxcbiAgICAgIG1hZyA9IG1hZzEgKiBtYWcyLFxuICAgICAgY29zaW5lID0gbWFnICYmIGRvdChhLCBiKSAvIG1hZztcbiAgcmV0dXJuIE1hdGguYWNvcyhNYXRoLm1pbihNYXRoLm1heChjb3NpbmUsIC0xKSwgMSkpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWMzcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWMzLiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjM3MgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gMztcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0oKTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDQgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzRcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzRcbiAqXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDQpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKHgsIHksIHosIHcpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDQpO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjNCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBzb3VyY2UgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4LCB5LCB6LCB3KSB7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIG91dFszXSA9IGFbM10gLSBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKiBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICogYlsyXTtcbiAgb3V0WzNdID0gYVszXSAqIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC8gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAvIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguY2VpbCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNlaWxcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2VpbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5jZWlsKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmNlaWwoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguY2VpbChhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5jZWlsKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmZsb29yIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gZmxvb3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguZmxvb3IoYVsyXSk7XG4gIG91dFszXSA9IE1hdGguZmxvb3IoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1pbihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1pbihhWzJdLCBiWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5taW4oYVszXSwgYlszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5tYXgoYVszXSwgYlszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGgucm91bmQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byByb3VuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5yb3VuZChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5yb3VuZChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5yb3VuZChhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5yb3VuZChhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIGEgdmVjNCBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWM0J3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHZhciB3ID0gYlszXSAtIGFbM107XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHosIHcpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICB2YXIgdyA9IGJbM10gLSBhWzNdO1xuICByZXR1cm4geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6LCB3KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkTGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICByZXR1cm4geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG59XG4vKipcbiAqIE5lZ2F0ZXMgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSAtYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICBvdXRbMl0gPSAxLjAgLyBhWzJdO1xuICBvdXRbM10gPSAxLjAgLyBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IHggKiBsZW47XG4gIG91dFsxXSA9IHkgKiBsZW47XG4gIG91dFsyXSA9IHogKiBsZW47XG4gIG91dFszXSA9IHcgKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl0gKyBhWzNdICogYlszXTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY3Jvc3MtcHJvZHVjdCBvZiB0aHJlZSB2ZWN0b3JzIGluIGEgNC1kaW1lbnNpb25hbCBzcGFjZVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSByZXN1bHQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBVIHRoZSBmaXJzdCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBWIHRoZSBzZWNvbmQgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gVyB0aGUgdGhpcmQgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjNH0gcmVzdWx0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKG91dCwgdSwgdiwgdykge1xuICB2YXIgQSA9IHZbMF0gKiB3WzFdIC0gdlsxXSAqIHdbMF0sXG4gICAgICBCID0gdlswXSAqIHdbMl0gLSB2WzJdICogd1swXSxcbiAgICAgIEMgPSB2WzBdICogd1szXSAtIHZbM10gKiB3WzBdLFxuICAgICAgRCA9IHZbMV0gKiB3WzJdIC0gdlsyXSAqIHdbMV0sXG4gICAgICBFID0gdlsxXSAqIHdbM10gLSB2WzNdICogd1sxXSxcbiAgICAgIEYgPSB2WzJdICogd1szXSAtIHZbM10gKiB3WzJdO1xuICB2YXIgRyA9IHVbMF07XG4gIHZhciBIID0gdVsxXTtcbiAgdmFyIEkgPSB1WzJdO1xuICB2YXIgSiA9IHVbM107XG4gIG91dFswXSA9IEggKiBGIC0gSSAqIEUgKyBKICogRDtcbiAgb3V0WzFdID0gLShHICogRikgKyBJICogQyAtIEogKiBCO1xuICBvdXRbMl0gPSBHICogRSAtIEggKiBDICsgSiAqIEE7XG4gIG91dFszXSA9IC0oRyAqIEQpICsgSCAqIEIgLSBJICogQTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKG91dCwgYSwgYiwgdCkge1xuICB2YXIgYXggPSBhWzBdO1xuICB2YXIgYXkgPSBhWzFdO1xuICB2YXIgYXogPSBhWzJdO1xuICB2YXIgYXcgPSBhWzNdO1xuICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gIG91dFsyXSA9IGF6ICsgdCAqIChiWzJdIC0gYXopO1xuICBvdXRbM10gPSBhdyArIHQgKiAoYlszXSAtIGF3KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCwgc2NhbGUpIHtcbiAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7IC8vIE1hcnNhZ2xpYSwgR2VvcmdlLiBDaG9vc2luZyBhIFBvaW50IGZyb20gdGhlIFN1cmZhY2Ugb2YgYVxuICAvLyBTcGhlcmUuIEFubi4gTWF0aC4gU3RhdGlzdC4gNDMgKDE5NzIpLCBuby4gMiwgNjQ1LS02NDYuXG4gIC8vIGh0dHA6Ly9wcm9qZWN0ZXVjbGlkLm9yZy9ldWNsaWQuYW9tcy8xMTc3NjkyNjQ0O1xuXG4gIHZhciB2MSwgdjIsIHYzLCB2NDtcbiAgdmFyIHMxLCBzMjtcblxuICBkbyB7XG4gICAgdjEgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHYyID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICBzMSA9IHYxICogdjEgKyB2MiAqIHYyO1xuICB9IHdoaWxlIChzMSA+PSAxKTtcblxuICBkbyB7XG4gICAgdjMgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHY0ID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICBzMiA9IHYzICogdjMgKyB2NCAqIHY0O1xuICB9IHdoaWxlIChzMiA+PSAxKTtcblxuICB2YXIgZCA9IE1hdGguc3FydCgoMSAtIHMxKSAvIHMyKTtcbiAgb3V0WzBdID0gc2NhbGUgKiB2MTtcbiAgb3V0WzFdID0gc2NhbGUgKiB2MjtcbiAgb3V0WzJdID0gc2NhbGUgKiB2MyAqIGQ7XG4gIG91dFszXSA9IHNjYWxlICogdjQgKiBkO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWM0IHdpdGggYSBtYXQ0LlxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl0sXG4gICAgICB3ID0gYVszXTtcbiAgb3V0WzBdID0gbVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6ICsgbVsxMl0gKiB3O1xuICBvdXRbMV0gPSBtWzFdICogeCArIG1bNV0gKiB5ICsgbVs5XSAqIHogKyBtWzEzXSAqIHc7XG4gIG91dFsyXSA9IG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSAqIHc7XG4gIG91dFszXSA9IG1bM10gKiB4ICsgbVs3XSAqIHkgKyBtWzExXSAqIHogKyBtWzE1XSAqIHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXTsgLy8gY2FsY3VsYXRlIHF1YXQgKiB2ZWNcblxuICB2YXIgaXggPSBxdyAqIHggKyBxeSAqIHogLSBxeiAqIHk7XG4gIHZhciBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgdmFyIGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4O1xuICB2YXIgaXcgPSAtcXggKiB4IC0gcXkgKiB5IC0gcXogKiB6OyAvLyBjYWxjdWxhdGUgcmVzdWx0ICogaW52ZXJzZSBxdWF0XG5cbiAgb3V0WzBdID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTtcbiAgb3V0WzFdID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgb3V0WzJdID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNCB0byB6ZXJvXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gemVybyhvdXQpIHtcbiAgb3V0WzBdID0gMC4wO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjNChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM107XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpO1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGlzdCA9IGRpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJEaXN0ID0gc3F1YXJlZERpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjNHMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjNC4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzRzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIHZlY1szXSA9IGFbaSArIDNdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICAgIGFbaSArIDNdID0gdmVjWzNdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSgpOyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbmltcG9ydCAqIGFzIHF1YXQgZnJvbSBcIi4vcXVhdC5qc1wiO1xuaW1wb3J0ICogYXMgbWF0NCBmcm9tIFwiLi9tYXQ0LmpzXCI7XG4vKipcbiAqIER1YWwgUXVhdGVybmlvbjxicj5cbiAqIEZvcm1hdDogW3JlYWwsIGR1YWxdPGJyPlxuICogUXVhdGVybmlvbiBmb3JtYXQ6IFhZWlc8YnI+XG4gKiBNYWtlIHN1cmUgdG8gaGF2ZSBub3JtYWxpemVkIGR1YWwgcXVhdGVybmlvbnMsIG90aGVyd2lzZSB0aGUgZnVuY3Rpb25zIG1heSBub3Qgd29yayBhcyBpbnRlbmRlZC48YnI+XG4gKiBAbW9kdWxlIHF1YXQyXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IGR1YWwgcXVhdFxuICpcbiAqIEByZXR1cm5zIHtxdWF0Mn0gYSBuZXcgZHVhbCBxdWF0ZXJuaW9uIFtyZWFsIC0+IHJvdGF0aW9uLCBkdWFsIC0+IHRyYW5zbGF0aW9uXVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBkcSA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDgpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIGRxWzBdID0gMDtcbiAgICBkcVsxXSA9IDA7XG4gICAgZHFbMl0gPSAwO1xuICAgIGRxWzRdID0gMDtcbiAgICBkcVs1XSA9IDA7XG4gICAgZHFbNl0gPSAwO1xuICAgIGRxWzddID0gMDtcbiAgfVxuXG4gIGRxWzNdID0gMTtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHF1YXQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdGVybmlvbiB0byBjbG9uZVxuICogQHJldHVybnMge3F1YXQyfSBuZXcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcbiAgZHFbMF0gPSBhWzBdO1xuICBkcVsxXSA9IGFbMV07XG4gIGRxWzJdID0gYVsyXTtcbiAgZHFbM10gPSBhWzNdO1xuICBkcVs0XSA9IGFbNF07XG4gIGRxWzVdID0gYVs1XTtcbiAgZHFbNl0gPSBhWzZdO1xuICBkcVs3XSA9IGFbN107XG4gIHJldHVybiBkcTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBkdWFsIHF1YXQgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHgxIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTEgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MSBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcxIFcgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geDIgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MiBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoyIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzIgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gbmV3IGR1YWwgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeDEsIHkxLCB6MSwgdzEsIHgyLCB5MiwgejIsIHcyKSB7XG4gIHZhciBkcSA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDgpO1xuICBkcVswXSA9IHgxO1xuICBkcVsxXSA9IHkxO1xuICBkcVsyXSA9IHoxO1xuICBkcVszXSA9IHcxO1xuICBkcVs0XSA9IHgyO1xuICBkcVs1XSA9IHkyO1xuICBkcVs2XSA9IHoyO1xuICBkcVs3XSA9IHcyO1xuICByZXR1cm4gZHE7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZHVhbCBxdWF0IGZyb20gdGhlIGdpdmVuIHZhbHVlcyAocXVhdCBhbmQgdHJhbnNsYXRpb24pXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHgxIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTEgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MSBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcxIFcgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geDIgWCBjb21wb25lbnQgKHRyYW5zbGF0aW9uKVxuICogQHBhcmFtIHtOdW1iZXJ9IHkyIFkgY29tcG9uZW50ICh0cmFuc2xhdGlvbilcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MiBaIGNvbXBvbmVudCAodHJhbnNsYXRpb24pXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG5ldyBkdWFsIHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvblZhbHVlcyh4MSwgeTEsIHoxLCB3MSwgeDIsIHkyLCB6Mikge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcbiAgZHFbMF0gPSB4MTtcbiAgZHFbMV0gPSB5MTtcbiAgZHFbMl0gPSB6MTtcbiAgZHFbM10gPSB3MTtcbiAgdmFyIGF4ID0geDIgKiAwLjUsXG4gICAgICBheSA9IHkyICogMC41LFxuICAgICAgYXogPSB6MiAqIDAuNTtcbiAgZHFbNF0gPSBheCAqIHcxICsgYXkgKiB6MSAtIGF6ICogeTE7XG4gIGRxWzVdID0gYXkgKiB3MSArIGF6ICogeDEgLSBheCAqIHoxO1xuICBkcVs2XSA9IGF6ICogdzEgKyBheCAqIHkxIC0gYXkgKiB4MTtcbiAgZHFbN10gPSAtYXggKiB4MSAtIGF5ICogeTEgLSBheiAqIHoxO1xuICByZXR1cm4gZHE7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBkdWFsIHF1YXQgZnJvbSBhIHF1YXRlcm5pb24gYW5kIGEgdHJhbnNsYXRpb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgYSBub3JtYWxpemVkIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB0IHRyYW5sYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgcSwgdCkge1xuICB2YXIgYXggPSB0WzBdICogMC41LFxuICAgICAgYXkgPSB0WzFdICogMC41LFxuICAgICAgYXogPSB0WzJdICogMC41LFxuICAgICAgYnggPSBxWzBdLFxuICAgICAgYnkgPSBxWzFdLFxuICAgICAgYnogPSBxWzJdLFxuICAgICAgYncgPSBxWzNdO1xuICBvdXRbMF0gPSBieDtcbiAgb3V0WzFdID0gYnk7XG4gIG91dFsyXSA9IGJ6O1xuICBvdXRbM10gPSBidztcbiAgb3V0WzRdID0gYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbNV0gPSBheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYno7XG4gIG91dFs2XSA9IGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieDtcbiAgb3V0WzddID0gLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGR1YWwgcXVhdCBmcm9tIGEgdHJhbnNsYXRpb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHQgdHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHQpIHtcbiAgb3V0WzBdID0gMDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMTtcbiAgb3V0WzRdID0gdFswXSAqIDAuNTtcbiAgb3V0WzVdID0gdFsxXSAqIDAuNTtcbiAgb3V0WzZdID0gdFsyXSAqIDAuNTtcbiAgb3V0WzddID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGR1YWwgcXVhdCBmcm9tIGEgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSB0aGUgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCBxKSB7XG4gIG91dFswXSA9IHFbMF07XG4gIG91dFsxXSA9IHFbMV07XG4gIG91dFsyXSA9IHFbMl07XG4gIG91dFszXSA9IHFbM107XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZHVhbCBxdWF0IGZyb20gYSBtYXRyaXggKDR4NClcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeFxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0NChvdXQsIGEpIHtcbiAgLy9UT0RPIE9wdGltaXplIHRoaXNcbiAgdmFyIG91dGVyID0gcXVhdC5jcmVhdGUoKTtcbiAgbWF0NC5nZXRSb3RhdGlvbihvdXRlciwgYSk7XG4gIHZhciB0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG1hdDQuZ2V0VHJhbnNsYXRpb24odCwgYSk7XG4gIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgb3V0ZXIsIHQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgZHVhbCBxdWF0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgc291cmNlIGR1YWwgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBkdWFsIHF1YXQgdG8gdGhlIGlkZW50aXR5IGR1YWwgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBkdWFsIHF1YXQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7TnVtYmVyfSB4MSBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkxIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejEgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MSBXIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHgyIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTIgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcyIFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgxLCB5MSwgejEsIHcxLCB4MiwgeTIsIHoyLCB3Mikge1xuICBvdXRbMF0gPSB4MTtcbiAgb3V0WzFdID0geTE7XG4gIG91dFsyXSA9IHoxO1xuICBvdXRbM10gPSB3MTtcbiAgb3V0WzRdID0geDI7XG4gIG91dFs1XSA9IHkyO1xuICBvdXRbNl0gPSB6MjtcbiAgb3V0WzddID0gdzI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldHMgdGhlIHJlYWwgcGFydCBvZiBhIGR1YWwgcXVhdFxuICogQHBhcmFtICB7cXVhdH0gb3V0IHJlYWwgcGFydFxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm4ge3F1YXR9IHJlYWwgcGFydFxuICovXG5cbmV4cG9ydCB2YXIgZ2V0UmVhbCA9IHF1YXQuY29weTtcbi8qKlxuICogR2V0cyB0aGUgZHVhbCBwYXJ0IG9mIGEgZHVhbCBxdWF0XG4gKiBAcGFyYW0gIHtxdWF0fSBvdXQgZHVhbCBwYXJ0XG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXQyfSBhIER1YWwgUXVhdGVybmlvblxuICogQHJldHVybiB7cXVhdH0gZHVhbCBwYXJ0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldER1YWwob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbNF07XG4gIG91dFsxXSA9IGFbNV07XG4gIG91dFsyXSA9IGFbNl07XG4gIG91dFszXSA9IGFbN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgcmVhbCBjb21wb25lbnQgb2YgYSBkdWFsIHF1YXQgdG8gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByZWFsIHBhcnRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNldFJlYWwgPSBxdWF0LmNvcHk7XG4vKipcbiAqIFNldCB0aGUgZHVhbCBjb21wb25lbnQgb2YgYSBkdWFsIHF1YXQgdG8gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSBkdWFsIHBhcnRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0RHVhbChvdXQsIHEpIHtcbiAgb3V0WzRdID0gcVswXTtcbiAgb3V0WzVdID0gcVsxXTtcbiAgb3V0WzZdID0gcVsyXTtcbiAgb3V0WzddID0gcVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgdHJhbnNsYXRpb24gb2YgYSBub3JtYWxpemVkIGR1YWwgcXVhdFxuICogQHBhcmFtICB7dmVjM30gb3V0IHRyYW5zbGF0aW9uXG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXQyfSBhIER1YWwgUXVhdGVybmlvbiB0byBiZSBkZWNvbXBvc2VkXG4gKiBAcmV0dXJuIHt2ZWMzfSB0cmFuc2xhdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2xhdGlvbihvdXQsIGEpIHtcbiAgdmFyIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XSxcbiAgICAgIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXTtcbiAgb3V0WzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMjtcbiAgb3V0WzFdID0gKGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnopICogMjtcbiAgb3V0WzJdID0gKGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngpICogMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNsYXRlcyBhIGR1YWwgcXVhdCBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byB0cmFuc2xhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShvdXQsIGEsIHYpIHtcbiAgdmFyIGF4MSA9IGFbMF0sXG4gICAgICBheTEgPSBhWzFdLFxuICAgICAgYXoxID0gYVsyXSxcbiAgICAgIGF3MSA9IGFbM10sXG4gICAgICBieDEgPSB2WzBdICogMC41LFxuICAgICAgYnkxID0gdlsxXSAqIDAuNSxcbiAgICAgIGJ6MSA9IHZbMl0gKiAwLjUsXG4gICAgICBheDIgPSBhWzRdLFxuICAgICAgYXkyID0gYVs1XSxcbiAgICAgIGF6MiA9IGFbNl0sXG4gICAgICBhdzIgPSBhWzddO1xuICBvdXRbMF0gPSBheDE7XG4gIG91dFsxXSA9IGF5MTtcbiAgb3V0WzJdID0gYXoxO1xuICBvdXRbM10gPSBhdzE7XG4gIG91dFs0XSA9IGF3MSAqIGJ4MSArIGF5MSAqIGJ6MSAtIGF6MSAqIGJ5MSArIGF4MjtcbiAgb3V0WzVdID0gYXcxICogYnkxICsgYXoxICogYngxIC0gYXgxICogYnoxICsgYXkyO1xuICBvdXRbNl0gPSBhdzEgKiBiejEgKyBheDEgKiBieTEgLSBheTEgKiBieDEgKyBhejI7XG4gIG91dFs3XSA9IC1heDEgKiBieDEgLSBheTEgKiBieTEgLSBhejEgKiBiejEgKyBhdzI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYXJvdW5kIHRoZSBYIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBob3cgZmFyIHNob3VsZCB0aGUgcm90YXRpb24gYmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVgob3V0LCBhLCByYWQpIHtcbiAgdmFyIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXSxcbiAgICAgIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XSxcbiAgICAgIGF4MSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnksXG4gICAgICBheTEgPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LFxuICAgICAgYXoxID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCxcbiAgICAgIGF3MSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHF1YXQucm90YXRlWChvdXQsIGEsIHJhZCk7XG4gIGJ4ID0gb3V0WzBdO1xuICBieSA9IG91dFsxXTtcbiAgYnogPSBvdXRbMl07XG4gIGJ3ID0gb3V0WzNdO1xuICBvdXRbNF0gPSBheDEgKiBidyArIGF3MSAqIGJ4ICsgYXkxICogYnogLSBhejEgKiBieTtcbiAgb3V0WzVdID0gYXkxICogYncgKyBhdzEgKiBieSArIGF6MSAqIGJ4IC0gYXgxICogYno7XG4gIG91dFs2XSA9IGF6MSAqIGJ3ICsgYXcxICogYnogKyBheDEgKiBieSAtIGF5MSAqIGJ4O1xuICBvdXRbN10gPSBhdzEgKiBidyAtIGF4MSAqIGJ4IC0gYXkxICogYnkgLSBhejEgKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGhvdyBmYXIgc2hvdWxkIHRoZSByb3RhdGlvbiBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddLFxuICAgICAgYXgxID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSxcbiAgICAgIGF5MSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnosXG4gICAgICBhejEgPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LFxuICAgICAgYXcxID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcXVhdC5yb3RhdGVZKG91dCwgYSwgcmFkKTtcbiAgYnggPSBvdXRbMF07XG4gIGJ5ID0gb3V0WzFdO1xuICBieiA9IG91dFsyXTtcbiAgYncgPSBvdXRbM107XG4gIG91dFs0XSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbNV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzZdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFs3XSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgaG93IGZhciBzaG91bGQgdGhlIHJvdGF0aW9uIGJlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBheDEgPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LFxuICAgICAgYXkxID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieixcbiAgICAgIGF6MSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngsXG4gICAgICBhdzEgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICBxdWF0LnJvdGF0ZVoob3V0LCBhLCByYWQpO1xuICBieCA9IG91dFswXTtcbiAgYnkgPSBvdXRbMV07XG4gIGJ6ID0gb3V0WzJdO1xuICBidyA9IG91dFszXTtcbiAgb3V0WzRdID0gYXgxICogYncgKyBhdzEgKiBieCArIGF5MSAqIGJ6IC0gYXoxICogYnk7XG4gIG91dFs1XSA9IGF5MSAqIGJ3ICsgYXcxICogYnkgKyBhejEgKiBieCAtIGF4MSAqIGJ6O1xuICBvdXRbNl0gPSBhejEgKiBidyArIGF3MSAqIGJ6ICsgYXgxICogYnkgLSBheTEgKiBieDtcbiAgb3V0WzddID0gYXcxICogYncgLSBheDEgKiBieCAtIGF5MSAqIGJ5IC0gYXoxICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYnkgYSBnaXZlbiBxdWF0ZXJuaW9uIChhICogcSlcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byByb3RhdGUgYnlcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUJ5UXVhdEFwcGVuZChvdXQsIGEsIHEpIHtcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXSxcbiAgICAgIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgb3V0WzBdID0gYXggKiBxdyArIGF3ICogcXggKyBheSAqIHF6IC0gYXogKiBxeTtcbiAgb3V0WzFdID0gYXkgKiBxdyArIGF3ICogcXkgKyBheiAqIHF4IC0gYXggKiBxejtcbiAgb3V0WzJdID0gYXogKiBxdyArIGF3ICogcXogKyBheCAqIHF5IC0gYXkgKiBxeDtcbiAgb3V0WzNdID0gYXcgKiBxdyAtIGF4ICogcXggLSBheSAqIHF5IC0gYXogKiBxejtcbiAgYXggPSBhWzRdO1xuICBheSA9IGFbNV07XG4gIGF6ID0gYVs2XTtcbiAgYXcgPSBhWzddO1xuICBvdXRbNF0gPSBheCAqIHF3ICsgYXcgKiBxeCArIGF5ICogcXogLSBheiAqIHF5O1xuICBvdXRbNV0gPSBheSAqIHF3ICsgYXcgKiBxeSArIGF6ICogcXggLSBheCAqIHF6O1xuICBvdXRbNl0gPSBheiAqIHF3ICsgYXcgKiBxeiArIGF4ICogcXkgLSBheSAqIHF4O1xuICBvdXRbN10gPSBhdyAqIHF3IC0gYXggKiBxeCAtIGF5ICogcXkgLSBheiAqIHF6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGJ5IGEgZ2l2ZW4gcXVhdGVybmlvbiAocSAqIGEpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieVxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVCeVF1YXRQcmVwZW5kKG91dCwgcSwgYSkge1xuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdLFxuICAgICAgYnggPSBhWzBdLFxuICAgICAgYnkgPSBhWzFdLFxuICAgICAgYnogPSBhWzJdLFxuICAgICAgYncgPSBhWzNdO1xuICBvdXRbMF0gPSBxeCAqIGJ3ICsgcXcgKiBieCArIHF5ICogYnogLSBxeiAqIGJ5O1xuICBvdXRbMV0gPSBxeSAqIGJ3ICsgcXcgKiBieSArIHF6ICogYnggLSBxeCAqIGJ6O1xuICBvdXRbMl0gPSBxeiAqIGJ3ICsgcXcgKiBieiArIHF4ICogYnkgLSBxeSAqIGJ4O1xuICBvdXRbM10gPSBxdyAqIGJ3IC0gcXggKiBieCAtIHF5ICogYnkgLSBxeiAqIGJ6O1xuICBieCA9IGFbNF07XG4gIGJ5ID0gYVs1XTtcbiAgYnogPSBhWzZdO1xuICBidyA9IGFbN107XG4gIG91dFs0XSA9IHF4ICogYncgKyBxdyAqIGJ4ICsgcXkgKiBieiAtIHF6ICogYnk7XG4gIG91dFs1XSA9IHF5ICogYncgKyBxdyAqIGJ5ICsgcXogKiBieCAtIHF4ICogYno7XG4gIG91dFs2XSA9IHF6ICogYncgKyBxdyAqIGJ6ICsgcXggKiBieSAtIHF5ICogYng7XG4gIG91dFs3XSA9IHF3ICogYncgLSBxeCAqIGJ4IC0gcXkgKiBieSAtIHF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYXJvdW5kIGEgZ2l2ZW4gYXhpcy4gRG9lcyB0aGUgbm9ybWFsaXNhdGlvbiBhdXRvbWF0aWNhbGx5XG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgaG93IGZhciB0aGUgcm90YXRpb24gc2hvdWxkIGJlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVBcm91bmRBeGlzKG91dCwgYSwgYXhpcywgcmFkKSB7XG4gIC8vU3BlY2lhbCBjYXNlIGZvciByYWQgPSAwXG4gIGlmIChNYXRoLmFicyhyYWQpIDwgZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIHJldHVybiBjb3B5KG91dCwgYSk7XG4gIH1cblxuICB2YXIgYXhpc0xlbmd0aCA9IE1hdGguaHlwb3QoYXhpc1swXSwgYXhpc1sxXSwgYXhpc1syXSk7XG4gIHJhZCA9IHJhZCAqIDAuNTtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYnggPSBzICogYXhpc1swXSAvIGF4aXNMZW5ndGg7XG4gIHZhciBieSA9IHMgKiBheGlzWzFdIC8gYXhpc0xlbmd0aDtcbiAgdmFyIGJ6ID0gcyAqIGF4aXNbMl0gLyBheGlzTGVuZ3RoO1xuICB2YXIgYncgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYXgxID0gYVswXSxcbiAgICAgIGF5MSA9IGFbMV0sXG4gICAgICBhejEgPSBhWzJdLFxuICAgICAgYXcxID0gYVszXTtcbiAgb3V0WzBdID0gYXgxICogYncgKyBhdzEgKiBieCArIGF5MSAqIGJ6IC0gYXoxICogYnk7XG4gIG91dFsxXSA9IGF5MSAqIGJ3ICsgYXcxICogYnkgKyBhejEgKiBieCAtIGF4MSAqIGJ6O1xuICBvdXRbMl0gPSBhejEgKiBidyArIGF3MSAqIGJ6ICsgYXgxICogYnkgLSBheTEgKiBieDtcbiAgb3V0WzNdID0gYXcxICogYncgLSBheDEgKiBieCAtIGF5MSAqIGJ5IC0gYXoxICogYno7XG4gIHZhciBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN107XG4gIG91dFs0XSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFs1XSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7XG4gIG91dFs2XSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gIG91dFs3XSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIGR1YWwgcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIGR1YWwgcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYXgwID0gYVswXSxcbiAgICAgIGF5MCA9IGFbMV0sXG4gICAgICBhejAgPSBhWzJdLFxuICAgICAgYXcwID0gYVszXSxcbiAgICAgIGJ4MSA9IGJbNF0sXG4gICAgICBieTEgPSBiWzVdLFxuICAgICAgYnoxID0gYls2XSxcbiAgICAgIGJ3MSA9IGJbN10sXG4gICAgICBheDEgPSBhWzRdLFxuICAgICAgYXkxID0gYVs1XSxcbiAgICAgIGF6MSA9IGFbNl0sXG4gICAgICBhdzEgPSBhWzddLFxuICAgICAgYngwID0gYlswXSxcbiAgICAgIGJ5MCA9IGJbMV0sXG4gICAgICBiejAgPSBiWzJdLFxuICAgICAgYncwID0gYlszXTtcbiAgb3V0WzBdID0gYXgwICogYncwICsgYXcwICogYngwICsgYXkwICogYnowIC0gYXowICogYnkwO1xuICBvdXRbMV0gPSBheTAgKiBidzAgKyBhdzAgKiBieTAgKyBhejAgKiBieDAgLSBheDAgKiBiejA7XG4gIG91dFsyXSA9IGF6MCAqIGJ3MCArIGF3MCAqIGJ6MCArIGF4MCAqIGJ5MCAtIGF5MCAqIGJ4MDtcbiAgb3V0WzNdID0gYXcwICogYncwIC0gYXgwICogYngwIC0gYXkwICogYnkwIC0gYXowICogYnowO1xuICBvdXRbNF0gPSBheDAgKiBidzEgKyBhdzAgKiBieDEgKyBheTAgKiBiejEgLSBhejAgKiBieTEgKyBheDEgKiBidzAgKyBhdzEgKiBieDAgKyBheTEgKiBiejAgLSBhejEgKiBieTA7XG4gIG91dFs1XSA9IGF5MCAqIGJ3MSArIGF3MCAqIGJ5MSArIGF6MCAqIGJ4MSAtIGF4MCAqIGJ6MSArIGF5MSAqIGJ3MCArIGF3MSAqIGJ5MCArIGF6MSAqIGJ4MCAtIGF4MSAqIGJ6MDtcbiAgb3V0WzZdID0gYXowICogYncxICsgYXcwICogYnoxICsgYXgwICogYnkxIC0gYXkwICogYngxICsgYXoxICogYncwICsgYXcxICogYnowICsgYXgxICogYnkwIC0gYXkxICogYngwO1xuICBvdXRbN10gPSBhdzAgKiBidzEgLSBheDAgKiBieDEgLSBheTAgKiBieTEgLSBhejAgKiBiejEgKyBhdzEgKiBidzAgLSBheDEgKiBieDAgLSBheTEgKiBieTAgLSBhejEgKiBiejA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdDIubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBTY2FsZXMgYSBkdWFsIHF1YXQgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdCB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSBkdWFsIHF1YXQgYnlcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICBvdXRbNF0gPSBhWzRdICogYjtcbiAgb3V0WzVdID0gYVs1XSAqIGI7XG4gIG91dFs2XSA9IGFbNl0gKiBiO1xuICBvdXRbN10gPSBhWzddICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIGR1YWwgcXVhdCdzIChUaGUgZG90IHByb2R1Y3Qgb2YgdGhlIHJlYWwgcGFydHMpXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRvdCA9IHF1YXQuZG90O1xuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIGR1YWwgcXVhdHMnc1xuICogTk9URTogVGhlIHJlc3VsdGluZyBkdWFsIHF1YXRlcm5pb25zIHdvbid0IGFsd2F5cyBiZSBub3JtYWxpemVkIChUaGUgZXJyb3IgaXMgbW9zdCBub3RpY2VhYmxlIHdoZW4gdCA9IDAuNSlcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgdmFyIG10ID0gMSAtIHQ7XG4gIGlmIChkb3QoYSwgYikgPCAwKSB0ID0gLXQ7XG4gIG91dFswXSA9IGFbMF0gKiBtdCArIGJbMF0gKiB0O1xuICBvdXRbMV0gPSBhWzFdICogbXQgKyBiWzFdICogdDtcbiAgb3V0WzJdID0gYVsyXSAqIG10ICsgYlsyXSAqIHQ7XG4gIG91dFszXSA9IGFbM10gKiBtdCArIGJbM10gKiB0O1xuICBvdXRbNF0gPSBhWzRdICogbXQgKyBiWzRdICogdDtcbiAgb3V0WzVdID0gYVs1XSAqIG10ICsgYls1XSAqIHQ7XG4gIG91dFs2XSA9IGFbNl0gKiBtdCArIGJbNl0gKiB0O1xuICBvdXRbN10gPSBhWzddICogbXQgKyBiWzddICogdDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgaW52ZXJzZSBvZiBhIGR1YWwgcXVhdC4gSWYgdGhleSBhcmUgbm9ybWFsaXplZCwgY29uanVnYXRlIGlzIGNoZWFwZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXQgdG8gY2FsY3VsYXRlIGludmVyc2Ugb2ZcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIHNxbGVuID0gc3F1YXJlZExlbmd0aChhKTtcbiAgb3V0WzBdID0gLWFbMF0gLyBzcWxlbjtcbiAgb3V0WzFdID0gLWFbMV0gLyBzcWxlbjtcbiAgb3V0WzJdID0gLWFbMl0gLyBzcWxlbjtcbiAgb3V0WzNdID0gYVszXSAvIHNxbGVuO1xuICBvdXRbNF0gPSAtYVs0XSAvIHNxbGVuO1xuICBvdXRbNV0gPSAtYVs1XSAvIHNxbGVuO1xuICBvdXRbNl0gPSAtYVs2XSAvIHNxbGVuO1xuICBvdXRbN10gPSBhWzddIC8gc3FsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvbmp1Z2F0ZSBvZiBhIGR1YWwgcXVhdFxuICogSWYgdGhlIGR1YWwgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQyLmludmVyc2UgYW5kIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgcXVhdCB0byBjYWxjdWxhdGUgY29uanVnYXRlIG9mXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25qdWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IC1hWzRdO1xuICBvdXRbNV0gPSAtYVs1XTtcbiAgb3V0WzZdID0gLWFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIGR1YWwgcXVhdFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXQgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuZ3RoID0gcXVhdC5sZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdDIubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgZHVhbCBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdCB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3F1YXJlZExlbmd0aCA9IHF1YXQuc3F1YXJlZExlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Mi5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBOb3JtYWxpemUgYSBkdWFsIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXRlcm5pb24gdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIG1hZ25pdHVkZSA9IHNxdWFyZWRMZW5ndGgoYSk7XG5cbiAgaWYgKG1hZ25pdHVkZSA+IDApIHtcbiAgICBtYWduaXR1ZGUgPSBNYXRoLnNxcnQobWFnbml0dWRlKTtcbiAgICB2YXIgYTAgPSBhWzBdIC8gbWFnbml0dWRlO1xuICAgIHZhciBhMSA9IGFbMV0gLyBtYWduaXR1ZGU7XG4gICAgdmFyIGEyID0gYVsyXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYTMgPSBhWzNdIC8gbWFnbml0dWRlO1xuICAgIHZhciBiMCA9IGFbNF07XG4gICAgdmFyIGIxID0gYVs1XTtcbiAgICB2YXIgYjIgPSBhWzZdO1xuICAgIHZhciBiMyA9IGFbN107XG4gICAgdmFyIGFfZG90X2IgPSBhMCAqIGIwICsgYTEgKiBiMSArIGEyICogYjIgKyBhMyAqIGIzO1xuICAgIG91dFswXSA9IGEwO1xuICAgIG91dFsxXSA9IGExO1xuICAgIG91dFsyXSA9IGEyO1xuICAgIG91dFszXSA9IGEzO1xuICAgIG91dFs0XSA9IChiMCAtIGEwICogYV9kb3RfYikgLyBtYWduaXR1ZGU7XG4gICAgb3V0WzVdID0gKGIxIC0gYTEgKiBhX2RvdF9iKSAvIG1hZ25pdHVkZTtcbiAgICBvdXRbNl0gPSAoYjIgLSBhMiAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICAgIG91dFs3XSA9IChiMyAtIGEzICogYV9kb3RfYikgLyBtYWduaXR1ZGU7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgZHVhbCBxdWF0ZW5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0ZXJuaW9uIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkdWFsIHF1YXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwicXVhdDIoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkdWFsIHF1YXRlcm5pb25zIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IGR1YWwgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIGR1YWwgcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZSBkdWFsIHF1YXRlcm5pb25zIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdICYmIGFbNF0gPT09IGJbNF0gJiYgYVs1XSA9PT0gYls1XSAmJiBhWzZdID09PSBiWzZdICYmIGFbN10gPT09IGJbN107XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGR1YWwgcXVhdGVybmlvbnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3QgZHVhbCBxdWF0LlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgZHVhbCBxdWF0LlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhlIGR1YWwgcXVhdHMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM10sXG4gICAgICBhNCA9IGFbNF0sXG4gICAgICBhNSA9IGFbNV0sXG4gICAgICBhNiA9IGFbNl0sXG4gICAgICBhNyA9IGFbN107XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM10sXG4gICAgICBiNCA9IGJbNF0sXG4gICAgICBiNSA9IGJbNV0sXG4gICAgICBiNiA9IGJbNl0sXG4gICAgICBiNyA9IGJbN107XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSkgJiYgTWF0aC5hYnMoYTQgLSBiNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTQpLCBNYXRoLmFicyhiNCkpICYmIE1hdGguYWJzKGE1IC0gYjUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE1KSwgTWF0aC5hYnMoYjUpKSAmJiBNYXRoLmFicyhhNiAtIGI2KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNiksIE1hdGguYWJzKGI2KSkgJiYgTWF0aC5hYnMoYTcgLSBiNykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTcpLCBNYXRoLmFicyhiNykpO1xufSIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0Q29tcG9uZW50IH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2FwaVwiO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanNcIjtcbmltcG9ydCB7IHZlYzMgfSBmcm9tIFwiZ2wtbWF0cml4XCI7XG5leHBvcnQgY2xhc3MgU25hcFJvdGF0ZSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gXCJzbmFwLXJvdGF0ZVwiO1xuICAgIHBsYXllcjtcbiAgICBkZWdyZWVzO1xuICAgIGlucHV0ID0gbnVsbDtcbiAgICBzbmFwcGVkID0gZmFsc2U7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoSW5wdXRDb21wb25lbnQpO1xuICAgICAgICB0aGlzLnNuYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5pbnB1dCB8fFxuICAgICAgICAgICAgIXRoaXMuaW5wdXQueHJJbnB1dFNvdXJjZSB8fFxuICAgICAgICAgICAgIXRoaXMuaW5wdXQueHJJbnB1dFNvdXJjZS5nYW1lcGFkIHx8XG4gICAgICAgICAgICAhdGhpcy5pbnB1dC54cklucHV0U291cmNlLmdhbWVwYWQuYXhlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBeGlzID0gdGhpcy5pbnB1dC54cklucHV0U291cmNlLmdhbWVwYWQuYXhlc1syXTtcbiAgICAgICAgaWYgKGN1cnJlbnRBeGlzID4gLTAuMiAmJiBjdXJyZW50QXhpcyA8IDAuMikge1xuICAgICAgICAgICAgdGhpcy5zbmFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRBeGlzKSA8IDAuOCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXN0SGVhZFBvcyA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuZ2V0UG9zaXRpb25Xb3JsZChsYXN0SGVhZFBvcyk7XG4gICAgICAgIGlmIChjdXJyZW50QXhpcyA8IC0wLjggJiYgIXRoaXMuc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIucm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoWzAsIDEsIDBdLCB0aGlzLmRlZ3JlZXMpO1xuICAgICAgICAgICAgdGhpcy5zbmFwcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudEF4aXMgPiAwLjggJiYgIXRoaXMuc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIucm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoWzAsIDEsIDBdLCAtdGhpcy5kZWdyZWVzKTtcbiAgICAgICAgICAgIHRoaXMuc25hcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRIZWFkUG9zID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgICAgICB0aGlzLnBsYXllci5nZXRQb3NpdGlvbldvcmxkKGN1cnJlbnRIZWFkUG9zKTtcbiAgICAgICAgbGV0IG5ld1BvcyA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcbiAgICAgICAgdmVjMy5zdWIobmV3UG9zLCBsYXN0SGVhZFBvcywgY3VycmVudEhlYWRQb3MpO1xuICAgICAgICB0aGlzLnBsYXllci50cmFuc2xhdGVMb2NhbChuZXdQb3MpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBTbmFwUm90YXRlLnByb3RvdHlwZSwgXCJwbGF5ZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCgzMClcbl0sIFNuYXBSb3RhdGUucHJvdG90eXBlLCBcImRlZ3JlZXNcIiwgdm9pZCAwKTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQsIE1lc2hDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanNcIjtcbmltcG9ydCB7IHF1YXQyLCB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmV4cG9ydCBjbGFzcyBTbm93UGFydGljbGVzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnc25vdy1wYXJ0aWNsZXMnO1xuICAgIG1lc2g7XG4gICAgbWF0ZXJpYWw7XG4gICAgZGVsYXk7XG4gICAgbWF4UGFydGljbGVzO1xuICAgIGluaXRpYWxTcGVlZDtcbiAgICBwYXJ0aWNsZVNjYWxlO1xuICAgIHNpemU7XG4gICAgdGltZSA9IDAuMDtcbiAgICBjb3VudCA9IDA7XG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDNEW119XG4gICAgICovXG4gICAgI29iamVjdHMgPSBbXTtcbiAgICAvKipcbiAgICAqIEB0eXBlIHtudW1iZXJbXVtdfVxuICAgICovXG4gICAgI3ZlbG9jaXRpZXMgPSBbXTtcbiAgICAjc3BlZWRzID0gW107XG4gICAgI2RpcmVjdGlvbiA9IFswLCAwLCAwXTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy4jb2JqZWN0cyA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdHModGhpcy5tYXhQYXJ0aWNsZXMsIG51bGwsIHRoaXMubWF4UGFydGljbGVzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFBhcnRpY2xlczsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLiN2ZWxvY2l0aWVzLnB1c2goW01hdGgucmFuZG9tKCkgLyA0IC0gLjEyNSwgLU1hdGgucmFuZG9tKCkgLSAuMiwgTWF0aC5yYW5kb20oKSAvIDQgLSAuMTI1XSk7XG4gICAgICAgICAgICBsZXQgb2JqID0gdGhpcy4jb2JqZWN0c1tpXTtcbiAgICAgICAgICAgIG9iai5uYW1lID0gXCJwYXJ0aWNsZVwiICsgdGhpcy5jb3VudC50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IG1lc2ggPSBvYmouYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xuICAgICAgICAgICAgbWVzaC5tZXNoID0gdGhpcy5tZXNoO1xuICAgICAgICAgICAgbWVzaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgICAgICAvKiBNb3N0IGVmZmljaWVudCB3YXkgdG8gaGlkZSB0aGUgbWVzaCAqL1xuICAgICAgICAgICAgb2JqLnNjYWxlTG9jYWwoWzAsIDAsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBUaW1lIHRvIHNwYXduIHBhcnRpY2xlcyAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4UGFydGljbGVzOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuc3Bhd24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgLyogVGFyZ2V0IGZvciByZXRyaWV2aW5nIHBhcnRpY2xlcyB3b3JsZCBsb2NhdGlvbnMgKi9cbiAgICAgICAgbGV0IG9yaWdpbiA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKHRoaXMuY291bnQsIHRoaXMuI29iamVjdHMubGVuZ3RoKTsgKytpKSB7XG4gICAgICAgICAgICAvKiBHZXQgdHJhbnNsYXRpb24gZmlyc3QsIGFzIG9iamVjdC50cmFuc2xhdGUoKSB3aWxsIG1hcmtcbiAgICAgICAgICAgICAqIHRoZSBvYmplY3QgYXMgZGlydHksIHdoaWNoIHdpbGwgY2F1c2UgaXQgdG8gcmVjYWxjdWxhdGVcbiAgICAgICAgICAgICAqIG9iai50cmFuc2Zvcm1Xb3JsZCBvbiBhY2Nlc3MuIFdlIHdhbnQgdG8gYXZvaWQgdGhpcyBhbmRcbiAgICAgICAgICAgICAqIGhhdmUgaXQgYmUgcmVjYWxjdWxhdGVkIGluIGJhdGNoIGF0IHRoZSBlbmQgb2YgZnJhbWVcbiAgICAgICAgICAgICAqIGluc3RlYWQgKi9cbiAgICAgICAgICAgIHF1YXQyLmdldFRyYW5zbGF0aW9uKG9yaWdpbiwgdGhpcy4jb2JqZWN0c1tpXS5nZXRUcmFuc2Zvcm1Xb3JsZCgpKTtcbiAgICAgICAgICAgIC8qIEFwcGx5IGdyYXZpdHkgKi9cbiAgICAgICAgICAgIGNvbnN0IHZlbCA9IHRoaXMuI3ZlbG9jaXRpZXNbaV07XG4gICAgICAgICAgICAvKiBDaGVjayBpZiBwYXJ0aWNsZSB3b3VsZCBjb2xsaWRlICovXG4gICAgICAgICAgICBpZiAoKG9yaWdpblswXSArIHZlbFswXSAqIGR0KSA+IDgpXG4gICAgICAgICAgICAgICAgb3JpZ2luWzBdIC09IDE2O1xuICAgICAgICAgICAgZWxzZSBpZiAoKG9yaWdpblswXSArIHZlbFswXSAqIGR0KSA8PSAtOClcbiAgICAgICAgICAgICAgICBvcmlnaW5bMF0gKz0gMTY7XG4gICAgICAgICAgICBpZiAoKG9yaWdpblsyXSArIHZlbFsyXSAqIGR0KSA+IDgpXG4gICAgICAgICAgICAgICAgb3JpZ2luWzJdIC09IDE2O1xuICAgICAgICAgICAgZWxzZSBpZiAoKG9yaWdpblsyXSArIHZlbFsyXSAqIGR0KSA8PSAtOClcbiAgICAgICAgICAgICAgICBvcmlnaW5bMl0gKz0gMTY7XG4gICAgICAgICAgICBpZiAoKG9yaWdpblsxXSArIHZlbFsxXSAqIGR0KSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgLyogUHNldWRvIGZyaWN0aW9uICovXG4gICAgICAgICAgICAgICAgb3JpZ2luWzFdID0gNTtcbiAgICAgICAgICAgICAgICB0aGlzLiNvYmplY3RzW2ldLnNldFBvc2l0aW9uV29ybGQob3JpZ2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKHRoaXMuY291bnQsIHRoaXMuI29iamVjdHMubGVuZ3RoKTsgKytpKSB7XG4gICAgICAgICAgICAvKiBBcHBseSB2ZWxvY2l0eSAqL1xuICAgICAgICAgICAgdmVjMy5zY2FsZShkaXN0YW5jZSwgdGhpcy4jdmVsb2NpdGllc1tpXSwgZHQpO1xuICAgICAgICAgICAgdGhpcy4jb2JqZWN0c1tpXS50cmFuc2xhdGVXb3JsZChkaXN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFNwYXduIGEgcGFydGljbGUgKi9cbiAgICBzcGF3bigpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5jb3VudCAlIHRoaXMubWF4UGFydGljbGVzO1xuICAgICAgICBsZXQgb2JqID0gdGhpcy4jb2JqZWN0c1tpbmRleF07XG4gICAgICAgIG9iai5yZXNldFRyYW5zZm9ybSgpO1xuICAgICAgICBvYmouc2NhbGVMb2NhbChbdGhpcy5wYXJ0aWNsZVNjYWxlLCB0aGlzLnBhcnRpY2xlU2NhbGUsIHRoaXMucGFydGljbGVTY2FsZV0pO1xuICAgICAgICAvKiBBY3RpdmF0ZSBjb21wb25lbnQsIG90aGVyd2lzZSBpdCB3aWxsIG5vdCBzaG93IHVwISAqL1xuICAgICAgICBvYmouZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIG9iai50cmFuc2xhdGVXb3JsZChbKE1hdGgucmFuZG9tKCkgKiB0aGlzLnNpemUpIC0gKHRoaXMuc2l6ZSAvIDIpLCAoTWF0aC5yYW5kb20oKSAqIDUpLCAoTWF0aC5yYW5kb20oKSAqIHRoaXMuc2l6ZSkgLSAodGhpcy5zaXplIC8gMildKTtcbiAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm1lc2goKVxuXSwgU25vd1BhcnRpY2xlcy5wcm90b3R5cGUsIFwibWVzaFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWF0ZXJpYWwoKVxuXSwgU25vd1BhcnRpY2xlcy5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuMSlcbl0sIFNub3dQYXJ0aWNsZXMucHJvdG90eXBlLCBcImRlbGF5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoMTUwMClcbl0sIFNub3dQYXJ0aWNsZXMucHJvdG90eXBlLCBcIm1heFBhcnRpY2xlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMTUpXG5dLCBTbm93UGFydGljbGVzLnByb3RvdHlwZSwgXCJpbml0aWFsU3BlZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuMDEpXG5dLCBTbm93UGFydGljbGVzLnByb3RvdHlwZSwgXCJwYXJ0aWNsZVNjYWxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoMTYpXG5dLCBTbm93UGFydGljbGVzLnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG47XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgVGFncyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3RhZ3MnO1xuICAgIHRhZ3M7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyB0aGUgdGFnIHRvIHRlc3RcbiAgICAgKi9cbiAgICBoYXNUYWcodGFnKSB7XG4gICAgICAgIGNvbnN0IHRhZ3MgPSB0aGlzLnRhZ3Muc3BsaXQoL1xcVysvZyk7XG4gICAgICAgIHJldHVybiAhIX50YWdzLmluZGV4T2YodGFnKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoKVxuXSwgVGFncy5wcm90b3R5cGUsIFwidGFnc1wiLCB2b2lkIDApO1xuO1xuIiwgIi8qKlxuICogVGhpcyBjb2RlIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIEFsZWEgYWxnb3JpdGhtOyAoQykgMjAxMCBKb2hhbm5lcyBCYWFnXHUwMEY4ZS5cbiAqIEFsZWEgaXMgbGljZW5zZWQgYWNjb3JkaW5nIHRvIHRoZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLlxuICovXG5jb25zdCBGUkFDID0gMi4zMjgzMDY0MzY1Mzg2OTYzZS0xMDsgLyogMl4tMzIgKi9cbmV4cG9ydCBjbGFzcyBSTkcge1xuICAgIF9zZWVkID0gMDtcbiAgICBfczAgPSAwO1xuICAgIF9zMSA9IDA7XG4gICAgX3MyID0gMDtcbiAgICBfYyA9IDA7XG4gICAgZ2V0U2VlZCgpIHsgcmV0dXJuIHRoaXMuX3NlZWQ7IH1cbiAgICAvKipcbiAgICAgKiBTZWVkIHRoZSBudW1iZXIgZ2VuZXJhdG9yXG4gICAgICogQHR5cGUge251bWJlcn0gc2VlZCAtIFNlZWQgdmFsdWVcbiAgICAgKi9cbiAgICBzZXRTZWVkKHNlZWQpIHtcbiAgICAgICAgc2VlZCA9IChzZWVkIDwgMSA/IDEgLyBzZWVkIDogc2VlZCk7XG4gICAgICAgIHRoaXMuX3NlZWQgPSBzZWVkO1xuICAgICAgICB0aGlzLl9zMCA9IChzZWVkID4+PiAwKSAqIEZSQUM7XG4gICAgICAgIHNlZWQgPSAoc2VlZCAqIDY5MDY5ICsgMSkgPj4+IDA7XG4gICAgICAgIHRoaXMuX3MxID0gc2VlZCAqIEZSQUM7XG4gICAgICAgIHNlZWQgPSAoc2VlZCAqIDY5MDY5ICsgMSkgPj4+IDA7XG4gICAgICAgIHRoaXMuX3MyID0gc2VlZCAqIEZSQUM7XG4gICAgICAgIHRoaXMuX2MgPSAxO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgUHNldWRvcmFuZG9tIHZhbHVlIFswLDEpLCB1bmlmb3JtbHkgZGlzdHJpYnV0ZWRcbiAgICAgKi9cbiAgICBnZXRVbmlmb3JtKCkge1xuICAgICAgICBsZXQgdCA9IDIwOTE2MzkgKiB0aGlzLl9zMCArIHRoaXMuX2MgKiBGUkFDO1xuICAgICAgICB0aGlzLl9zMCA9IHRoaXMuX3MxO1xuICAgICAgICB0aGlzLl9zMSA9IHRoaXMuX3MyO1xuICAgICAgICB0aGlzLl9jID0gdCB8IDA7XG4gICAgICAgIHRoaXMuX3MyID0gdCAtIHRoaXMuX2M7XG4gICAgICAgIHJldHVybiB0aGlzLl9zMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxvd2VyQm91bmQgVGhlIGxvd2VyIGVuZCBvZiB0aGUgcmFuZ2UgdG8gcmV0dXJuIGEgdmFsdWUgZnJvbSwgaW5jbHVzaXZlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVwcGVyQm91bmQgVGhlIHVwcGVyIGVuZCBvZiB0aGUgcmFuZ2UgdG8gcmV0dXJuIGEgdmFsdWUgZnJvbSwgaW5jbHVzaXZlXG4gICAgICogQHJldHVybnMgUHNldWRvcmFuZG9tIHZhbHVlIFtsb3dlckJvdW5kLCB1cHBlckJvdW5kXSwgdXNpbmcgUk9ULlJORy5nZXRVbmlmb3JtKCkgdG8gZGlzdHJpYnV0ZSB0aGUgdmFsdWVcbiAgICAgKi9cbiAgICBnZXRVbmlmb3JtSW50KGxvd2VyQm91bmQsIHVwcGVyQm91bmQpIHtcbiAgICAgICAgbGV0IG1heCA9IE1hdGgubWF4KGxvd2VyQm91bmQsIHVwcGVyQm91bmQpO1xuICAgICAgICBsZXQgbWluID0gTWF0aC5taW4obG93ZXJCb3VuZCwgdXBwZXJCb3VuZCk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZ2V0VW5pZm9ybSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG1lYW4gTWVhbiB2YWx1ZVxuICAgICAqIEBwYXJhbSBzdGRkZXYgU3RhbmRhcmQgZGV2aWF0aW9uLiB+OTUlIG9mIHRoZSBhYnNvbHV0ZSB2YWx1ZXMgd2lsbCBiZSBsb3dlciB0aGFuIDIqc3RkZGV2LlxuICAgICAqIEByZXR1cm5zIEEgbm9ybWFsbHkgZGlzdHJpYnV0ZWQgcHNldWRvcmFuZG9tIHZhbHVlXG4gICAgICovXG4gICAgZ2V0Tm9ybWFsKG1lYW4gPSAwLCBzdGRkZXYgPSAxKSB7XG4gICAgICAgIGxldCB1LCB2LCByO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB1ID0gMiAqIHRoaXMuZ2V0VW5pZm9ybSgpIC0gMTtcbiAgICAgICAgICAgIHYgPSAyICogdGhpcy5nZXRVbmlmb3JtKCkgLSAxO1xuICAgICAgICAgICAgciA9IHUgKiB1ICsgdiAqIHY7XG4gICAgICAgIH0gd2hpbGUgKHIgPiAxIHx8IHIgPT0gMCk7XG4gICAgICAgIGxldCBnYXVzcyA9IHUgKiBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhyKSAvIHIpO1xuICAgICAgICByZXR1cm4gbWVhbiArIGdhdXNzICogc3RkZGV2O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBQc2V1ZG9yYW5kb20gdmFsdWUgWzEsMTAwXSBpbmNsdXNpdmUsIHVuaWZvcm1seSBkaXN0cmlidXRlZFxuICAgICAqL1xuICAgIGdldFBlcmNlbnRhZ2UoKSB7XG4gICAgICAgIHJldHVybiAxICsgTWF0aC5mbG9vcih0aGlzLmdldFVuaWZvcm0oKSAqIDEwMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IEFycmF5IHRvIHBpY2sgYSByYW5kb20gaXRlbSBmcm9tXG4gICAgICogQHJldHVybnMgUmFuZG9tbHkgcGlja2VkIGl0ZW0sIG51bGwgd2hlbiBsZW5ndGg9MFxuICAgICAqL1xuICAgIGdldEl0ZW0oYXJyYXkpIHtcbiAgICAgICAgaWYgKCFhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtNYXRoLmZsb29yKHRoaXMuZ2V0VW5pZm9ybSgpICogYXJyYXkubGVuZ3RoKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IEFycmF5IHRvIHJhbmRvbWl6ZVxuICAgICAqIEByZXR1cm5zIE5ldyBhcnJheSB3aXRoIHJhbmRvbWl6ZWQgaXRlbXNcbiAgICAgKi9cbiAgICBzaHVmZmxlKGFycmF5KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGNsb25lID0gYXJyYXkuc2xpY2UoKTtcbiAgICAgICAgd2hpbGUgKGNsb25lLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gY2xvbmUuaW5kZXhPZih0aGlzLmdldEl0ZW0oY2xvbmUpKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNsb25lLnNwbGljZShpbmRleCwgMSlbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIGtleSA9IHdoYXRldmVyLCB2YWx1ZT13ZWlnaHQgKHJlbGF0aXZlIHByb2JhYmlsaXR5KVxuICAgICAqIEByZXR1cm5zIHdoYXRldmVyXG4gICAgICovXG4gICAgZ2V0V2VpZ2h0ZWRWYWx1ZShkYXRhKSB7XG4gICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgIGZvciAobGV0IGlkIGluIGRhdGEpIHtcbiAgICAgICAgICAgIHRvdGFsICs9IGRhdGFbaWRdO1xuICAgICAgICB9XG4gICAgICAgIGxldCByYW5kb20gPSB0aGlzLmdldFVuaWZvcm0oKSAqIHRvdGFsO1xuICAgICAgICBsZXQgaWQsIHBhcnQgPSAwO1xuICAgICAgICBmb3IgKGlkIGluIGRhdGEpIHtcbiAgICAgICAgICAgIHBhcnQgKz0gZGF0YVtpZF07XG4gICAgICAgICAgICBpZiAocmFuZG9tIDwgcGFydCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBieSBzb21lIGZsb2F0aW5nLXBvaW50IGFubm95YW5jZSB3ZSBoYXZlXG4gICAgICAgIC8vIHJhbmRvbSA+PSB0b3RhbCwganVzdCByZXR1cm4gdGhlIGxhc3QgaWQuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IFJORyBzdGF0ZS4gVXNlZnVsIGZvciBzdG9yaW5nIHRoZSBzdGF0ZSBhbmQgcmUtc2V0dGluZyBpdCB2aWEgc2V0U3RhdGUuXG4gICAgICogQHJldHVybnMgSW50ZXJuYWwgc3RhdGVcbiAgICAgKi9cbiAgICBnZXRTdGF0ZSgpIHsgcmV0dXJuIFt0aGlzLl9zMCwgdGhpcy5fczEsIHRoaXMuX3MyLCB0aGlzLl9jXTsgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIHByZXZpb3VzbHkgcmV0cmlldmVkIHN0YXRlLlxuICAgICAqL1xuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3MwID0gc3RhdGVbMF07XG4gICAgICAgIHRoaXMuX3MxID0gc3RhdGVbMV07XG4gICAgICAgIHRoaXMuX3MyID0gc3RhdGVbMl07XG4gICAgICAgIHRoaXMuX2MgPSBzdGF0ZVszXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjbG9uZWQgUk5HXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGxldCBjbG9uZSA9IG5ldyBSTkcoKTtcbiAgICAgICAgcmV0dXJuIGNsb25lLnNldFN0YXRlKHRoaXMuZ2V0U3RhdGUoKSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHJuZyA9IG5ldyBSTkcoKS5zZXRTZWVkKERhdGUubm93KCkpO1xuIiwgImV4cG9ydCBjbGFzcyBPYmplY3RDYWNoZSB7XG4gICAgI29iamVjdHM7XG4gICAgZW5naW5lO1xuICAgIG5hbWU7XG4gICAgY2FjaGVTaXplO1xuICAgIGluZGV4O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtXb25kZXJsYW5kRW5naW5lfSBlbmdpbmVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjYWNoZVNpemVcbiAgICAgKiBAcGFyYW0ge09iamVjdDNEfSBwYXJlbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29tcG9uZW50c1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgbmFtZSwgY2FjaGVTaXplLCBwYXJlbnQsIGNvbXBvbmVudHMpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGBjcmVhdGluZyBjYWNoZTogJHtuYW1lfSB3aXRoICR7Y2FjaGVTaXplfSBlbGVtZW50c2ApO1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZSA9IGNhY2hlU2l6ZTtcbiAgICAgICAgdGhpcy4jb2JqZWN0cyA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdHMoY2FjaGVTaXplLCBwYXJlbnQsIGNvbXBvbmVudHMpO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLiNvYmplY3RzLmZvckVhY2gob2JqID0+IHtcbiAgICAgICAgICAgIG9iai5nZXRDb21wb25lbnRzKCkuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgICAgICBjLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvYmoucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIG9iai5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEl0ZW0oKSB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID49IHRoaXMuY2FjaGVTaXplKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYENhY2hlICR7dGhpcy5uYW1lfSByYW4gb3V0IG9mIHNwYWNlYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9iaiA9IHRoaXMuI29iamVjdHNbdGhpcy5pbmRleF07XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgRmxpcGJvb2ssIFRhZ3MgfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcbi8qKlxuICAqIEBkZXNjcmlwdGlvbiBjbG9uZXMgdGhlIHBhc3NlZCBvYmplY3RcbiAgIEBwYXJhbSB7V29uZGVybGFuZEVuZ2luZX0gZW5naW5lIC0gdGhlIGVuZ2luZVxuICAqIEBwYXJhbSB7T2JqZWN0M0R9IG9iamVjdCAtIHRoZSBvYmplY3QgdG8gY2xvbmVcbiAgKiBAcGFyYW0ge09iamVjdENhY2hlfSBjYWNoZSBhbiBvcHRpb25hbCBjYWNoZSB0byB1c2UgZm9yIGNsb25pbmdcbiAgKiBAcmV0dXJucyB7T2JqZWN0M0R9IHRoZSBjbG9uZWQgb2JqZWN0XG4gICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVPYmplY3QoZW5naW5lLCBvYmplY3QsIGNhY2hlKSB7XG4gICAgaWYgKCFvYmplY3QgfHwgIW9iamVjdC5wYXJlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjYW4ndCBjbG9uZSB1bmRlZmluZWQgb2JqZWN0XCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3QzRH0gdGhlIG9iamVjdCB0aGF0IGlzIGNsb25lZFxuICAgICAqL1xuICAgIGxldCBjbG9uZWQ7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNsb25lZCA9IGNhY2hlLmdldEl0ZW0oKTtcbiAgICB9XG4gICAgaWYgKCFjbG9uZWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIm5vIGNhY2hlIGF2YWlsYWJsZSwgY2xvbmluZyBvYmplY3RcIik7XG4gICAgICAgIGNsb25lZCA9IGVuZ2luZS5zY2VuZS5hZGRPYmplY3Qob2JqZWN0LnBhcmVudCk7XG4gICAgfVxuICAgIGxldCBjb21wb25lbnRzID0gb2JqZWN0LmdldENvbXBvbmVudHMoKTtcbiAgICBjb25zdCBjb21wID0gY2xvbmVkLmdldENvbXBvbmVudHMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudHNbaV0udHlwZSA9PSBcIm1lc2hcIikge1xuICAgICAgICAgICAgY29uc3QgbSA9IGNvbXAuZmluZCgoYykgPT4gYy50eXBlID09IFwibWVzaFwiICYmIGMuYWN0aXZlID09IGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gY29tcG9uZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgbS5tZXNoID0gb3JpZ2luYWwubWVzaDtcbiAgICAgICAgICAgICAgICBtLm1hdGVyaWFsID0gb3JpZ2luYWwubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgbS5za2luID0gb3JpZ2luYWwuc2tpbjtcbiAgICAgICAgICAgICAgICBtLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbG9uZWQuYWRkQ29tcG9uZW50KFwibWVzaFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc2g6IG9yaWdpbmFsLm1lc2gsXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBvcmlnaW5hbC5tYXRlcmlhbCxcbiAgICAgICAgICAgICAgICAgICAgc2tpbjogb3JpZ2luYWwuc2tpbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb21wb25lbnRzW2ldLnR5cGUgPT0gXCJjb2xsaXNpb25cIikge1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXAuZmluZCgoYykgPT4gYy50eXBlID09IFwiY29sbGlzaW9uXCIgJiYgYy5hY3RpdmUgPT0gZmFsc2UpO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBjb21wb25lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICAgICAgICBjLmNvbGxpZGVyID0gb3JpZ2luYWwuY29sbGlkZXI7XG4gICAgICAgICAgICAgICAgYy5leHRlbnRzID0gb3JpZ2luYWwuZXh0ZW50cztcbiAgICAgICAgICAgICAgICBjLmdyb3VwID0gb3JpZ2luYWwuZ3JvdXA7XG4gICAgICAgICAgICAgICAgYy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xvbmVkLmFkZENvbXBvbmVudChcImNvbGxpc2lvblwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyOiBvcmlnaW5hbC5jb2xsaWRlcixcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50czogb3JpZ2luYWwuZXh0ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IG9yaWdpbmFsLmdyb3VwLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbXBvbmVudHNbaV0udHlwZSA9PSBcImFuaW1hdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBjID0gY29tcC5maW5kKChjKSA9PiBjLnR5cGUgPT0gXCJhbmltYXRpb25cIiAmJiBjLmFjdGl2ZSA9PSBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IGNvbXBvbmVudHNbaV07XG4gICAgICAgICAgICBpZiAoYykge1xuICAgICAgICAgICAgICAgIGMuYW5pbWF0aW9uID0gb3JpZ2luYWwuYW5pbWF0aW9uO1xuICAgICAgICAgICAgICAgIGMucGxheUNvdW50ID0gb3JpZ2luYWwucGxheUNvdW50O1xuICAgICAgICAgICAgICAgIGMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjbG9uZWQuYWRkQ29tcG9uZW50KFwiYW5pbWF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBvcmlnaW5hbC5hbmltYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHBsYXlDb3VudDogb3JpZ2luYWwucGxheUNvdW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbXBvbmVudHNbaV0udHlwZSA9PSBcInRhZ3NcIikge1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXAuZmluZCgoYykgPT4gYy50eXBlID09IFwidGFnc1wiICYmIGMuYWN0aXZlID09IGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gY29tcG9uZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgICAgICAgYy50YWdzID0gb3JpZ2luYWwudGFncztcbiAgICAgICAgICAgICAgICBjLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2xvbmVkLmFkZENvbXBvbmVudChUYWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IG9yaWdpbmFsLnRhZ3MsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29tcG9uZW50c1tpXS50eXBlID09IFwiZmxpcGJvb2tcIikge1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXAuZmluZCgoYykgPT4gYy50eXBlID09IFwiZmxpcGJvb2tcIiAmJiBjLmFjdGl2ZSA9PSBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IGNvbXBvbmVudHNbaV07XG4gICAgICAgICAgICBpZiAoYykge1xuICAgICAgICAgICAgICAgIGMuYmFzZSA9IG9yaWdpbmFsLmJhc2U7XG4gICAgICAgICAgICAgICAgYy51cmwgPSBvcmlnaW5hbC51cmw7XG4gICAgICAgICAgICAgICAgYy51cmxFbWlzc2l2ZSA9IG9yaWdpbmFsLnVybEVtaXNzaXZlO1xuICAgICAgICAgICAgICAgIGMuY29sdW1ucyA9IG9yaWdpbmFsLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgYy5yb3dzID0gb3JpZ2luYWwucm93cztcbiAgICAgICAgICAgICAgICBjLnNwZWVkID0gb3JpZ2luYWwuc3BlZWQ7XG4gICAgICAgICAgICAgICAgYy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNsb25lZC5hZGRDb21wb25lbnQoRmxpcGJvb2ssIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogb3JpZ2luYWwuYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvcmlnaW5hbC51cmwsXG4gICAgICAgICAgICAgICAgICAgIHVybEVtaXNzaXZlOiBvcmlnaW5hbC51cmxFbWlzc2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogb3JpZ2luYWwuY29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgcm93czogb3JpZ2luYWwucm93cyxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG9yaWdpbmFsLnNwZWVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXAuZmluZCgoYykgPT4gYy50eXBlID09IGNvbXBvbmVudHNbaV0udHlwZSAmJiBjLmFjdGl2ZSA9PSBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoYykge1xuICAgICAgICAgICAgICAgIGMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb25lZC5hZGRDb21wb25lbnQoY29tcG9uZW50c1tpXS50eXBlLCBjb21wb25lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZhciBjID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb21wb25lbnRzW2ldKSlcbiAgICAgICAgICAgIC8vIGRlbGV0ZShjLCdfaWQnKTtcbiAgICAgICAgICAgIC8vIGRlbGV0ZShjLCdfbWFuYWdlcicpO1xuICAgICAgICAgICAgLy8gZGVsZXRlKGMsJ190eXBlJyk7XG4gICAgICAgICAgICAvLyBjbG9uZWQuYWRkQ29tcG9uZW50KGNvbXBvbmVudHNbaV0udHlwZSwgYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBvcyA9IFtdO1xuICAgIGxldCByb3QgPSBbXTtcbiAgICBsZXQgc2NhbGUgPSBbXTtcbiAgICBvYmplY3QuZ2V0UG9zaXRpb25Mb2NhbChwb3MpO1xuICAgIG9iamVjdC5nZXRSb3RhdGlvbkxvY2FsKHJvdCk7XG4gICAgb2JqZWN0LmdldFNjYWxpbmdMb2NhbChzY2FsZSk7XG4gICAgY2xvbmVkLnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgIGNsb25lZC5zZXRQb3NpdGlvbkxvY2FsKHBvcyk7XG4gICAgY2xvbmVkLnNldFJvdGF0aW9uTG9jYWwocm90KTtcbiAgICBjbG9uZWQuc2V0U2NhbGluZ0xvY2FsKHNjYWxlKTtcbiAgICBjbG9uZWQubmFtZSA9IG9iamVjdC5uYW1lO1xuICAgIGlmIChvYmplY3QuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iamVjdC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkQ2xvbmUgPSBjbG9uZU9iamVjdChlbmdpbmUsIG9iamVjdC5jaGlsZHJlbltpXSwgY2FjaGUpO1xuICAgICAgICAgICAgY2hpbGRDbG9uZS5wYXJlbnQgPSBjbG9uZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvbmVkLnNldERpcnR5KCk7XG4gICAgcmV0dXJuIGNsb25lZDtcbn1cbi8qKlxuICogRmluZHMgYSBjaGlsZCBvYmplY3QgYnkgbmFtZVxuICogQHBhcmFtIHtPYmplY3QzRH0gb2JqZWN0IE9iamVjdCB0byBnZXQgdGhlIGNoaWxkIGZyb21cbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGlsZE5hbWUgVGhlIG5hbWUgb2YgdGhlIGNoaWxkIHRvIGZpbmRcbiAqIEByZXR1cm5zIHtPYmplY3QzRH0gVGhlIGNoaWxkIG9iamVjdDsgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuICovXG5mdW5jdGlvbiBmaW5kQ2hpbGQob2JqZWN0LCBjaGlsZE5hbWUpIHtcbiAgICByZXR1cm4gb2JqZWN0LmNoaWxkcmVuLmZpbHRlcigobykgPT4gby5uYW1lID09IGNoaWxkTmFtZSlbMF07XG59XG4vKipcbiAqIFJlcGxhY2VzIGEgc3RyaW5nIGluc2lkZSBhbm90aGVyIHN0cmluZyBieSBpbmRleFxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBvcmlnaW5hbCBzdHJpbmcgdG8gcmVwbGFjZSBhIGNoYXJhY3RlciBpblxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IHRoZSBwb3NpdGlvbiBvZiB0aGUgc3RhcnQgb2YgcmVwbGFjZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSByZXBsYWNlbWVudCB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nXG4gKiBAcmV0dXJuc1xuICovXG5mdW5jdGlvbiByZXBsYWNlQXQoc3RyaW5nLCBpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gKHN0cmluZy5zbGljZSgwLCBpbmRleCkgK1xuICAgICAgICByZXBsYWNlbWVudCArXG4gICAgICAgIHN0cmluZy5zbGljZShpbmRleCArIHJlcGxhY2VtZW50Lmxlbmd0aCkpO1xufVxuZXhwb3J0IGNvbnN0IHdsVXRpbHMgPSB7XG4gICAgY2xvbmVPYmplY3QsXG4gICAgZmluZENoaWxkLFxuICAgIHJlcGxhY2VBdCxcbn07XG4iLCAiaW1wb3J0IHsgcm5nIH0gZnJvbSBcIi4vcm5nLmpzXCI7XG4vKipcbiAqIFNodWZmbGVzIGFycmF5IGluIHBsYWNlLiBFUzYgdmVyc2lvblxuICogQHBhcmFtIHtbXX0gYXJyIGFycmF5IHRvIHNodWZmbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGVBcnJheShhcnIpIHtcbiAgICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgaiA9IHJuZy5nZXRVbmlmb3JtSW50KDAsIGkgKyAxKTtcbiAgICAgICAgW2FycltpXSwgYXJyW2pdXSA9IFthcnJbal0sIGFycltpXV07XG4gICAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBFYXNpbmcgPSB7XG4gICAgLyoqXG4gICAgICogTGluZWFyIGVhc2luZyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gdCBBIHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICogQHJldHVybnMgVGhlIHNhbWUgdmFsdWUgYXMgYHRgLCBwcm92aWRpbmcgYSBsaW5lYXIgcHJvZ3Jlc3Npb24uXG4gICAgICovXG4gICAgTGluZWFyOiAodCkgPT4gdCxcbiAgICAvKipcbiAgICAgKiBRdWFkcmF0aWMgZWFzZS1pbiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gdCBBIHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICogQHJldHVybnMgQSB2YWx1ZSByZXByZXNlbnRpbmcgYW4gYWNjZWxlcmF0ZWQgKHF1YWRyYXRpYykgcHJvZ3Jlc3Npb24gZnJvbSAwIHRvIDEuXG4gICAgICovXG4gICAgSW5RdWFkOiAodCkgPT4gdCAqIHQsXG4gICAgLyoqXG4gICAgICogUXVhZHJhdGljIGVhc2Utb3V0IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB0IEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIGFuaW1hdGlvbi5cbiAgICAgKiBAcmV0dXJucyBBIHZhbHVlIHJlcHJlc2VudGluZyBhIGRlY2VsZXJhdGVkIChxdWFkcmF0aWMpIHByb2dyZXNzaW9uIGZyb20gMCB0byAxLlxuICAgICAqL1xuICAgIE91dFF1YWQ6ICh0KSA9PiAxIC0gKDEgLSB0KSAqICgxIC0gdCksXG4gICAgLyoqXG4gICAgICogUXVhZHJhdGljIGVhc2UtaW4tb3V0IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB0IEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIGFuaW1hdGlvbi5cbiAgICAgKiBAcmV0dXJucyBBIHZhbHVlIHRoYXQgYWNjZWxlcmF0ZXMgaW4sIHRoZW4gZGVjZWxlcmF0ZXMgb3V0LCBwcm92aWRpbmcgYSBzbW9vdGggdHJhbnNpdGlvbiBiZXR3ZWVuIG1vdGlvbiBzdGF0ZXMuXG4gICAgICovXG4gICAgSW5PdXRRdWFkOiAodCkgPT4gdCA8IDAuNSA/IDIgKiB0ICogdCA6IDEgLSBNYXRoLnBvdygtMiAqIHQgKyAyLCAyKSAvIDIsXG4gICAgLyoqXG4gICAgICogQ3ViaWMgZWFzZS1pbiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gdCBBIHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICogQHJldHVybnMgQSB2YWx1ZSByZXByZXNlbnRpbmcgYW4gYWNjZWxlcmF0ZWQgKGN1YmljKSBwcm9ncmVzc2lvbiBmcm9tIDAgdG8gMS5cbiAgICAgKi9cbiAgICBJbkN1YmljOiAodCkgPT4gTWF0aC5wb3codCwgMyksXG4gICAgLyoqXG4gICAgICogQ3ViaWMgZWFzZS1vdXQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHQgQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxuICAgICAqIEByZXR1cm5zIEEgdmFsdWUgcmVwcmVzZW50aW5nIGFuIGRlY2VsZXJhdGVkIChjdWJpYykgcHJvZ3Jlc3Npb24gZnJvbSAwIHRvIDEuXG4gICAgICovXG4gICAgT3V0Q3ViaWM6ICh0KSA9PiBNYXRoLnBvdyh0IC0gMSwgMykgKyAxLFxuICAgIC8qKlxuICAgICAqIEN1YmljIGVhc2UtaW4tb3V0IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB0IEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIGFuaW1hdGlvbi5cbiAgICAgKiBAcmV0dXJucyBBIHZhbHVlIHRoYXQgYWNjZWxlcmF0ZXMgaW4sIHRoZW4gZGVjZWxlcmF0ZXMgb3V0LCBwcm92aWRpbmcgYSBzbW9vdGggdHJhbnNpdGlvbiBiZXR3ZWVuIG1vdGlvbiBzdGF0ZXMuXG4gICAgICovXG4gICAgSW5PdXRDdWJpYzogKHQpID0+IHtcbiAgICAgICAgaWYgKHQgPCAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygyICogdCwgMykgLyAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChNYXRoLnBvdygyICogdCAtIDIsIDMpICsgMikgLyAyO1xuICAgICAgICB9XG4gICAgfSxcbn07XG4vKipcbiAqIFBlcmZvcm1zIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdpdGggb3B0aW9uYWwgZWFzaW5nIGZ1bmN0aW9uIG9uIHR3byBudW1lcmljIHZhbHVlc1xuICogQHBhcmFtIHN0YXJ0IFN0YXJ0aW5nIG51bWVyaWMgdmFsdWVcbiAqIEBwYXJhbSBlbmQgRW5kaW5nIG51bWVyaWMgdmFsdWVcbiAqIEBwYXJhbSB0IFByb2dyZXNzIGluZGljYXRvciBiZXR3ZWVuIHN0YXJ0aW5nIGFuZCBlbmRpbmcgbnVtZXJpYyB2YWx1ZXMsIHR5cGljYWxseSByZXByZXNlbnRlZCBhcyBhIGRlY2ltYWwgd2l0aGluIHJhbmdlIFswLDFdXG4gKiBAcGFyYW0gZWFzaW5nIE9wdGlvbmFsIGVhc2luZyBmdW5jdGlvbiB0byBhcHBseS4gRGVmYXVsdHMgdG8gRWFzaW5nLkxpbmVhciBpZiBub3QgcHJvdmlkZWQgb3IgaW52YWxpZCB0eXBlIHN1cHBsaWVkXG4gKiBAcmV0dXJuIEludGVycG9sYXRlZCByZXN1bHQgYmFzZWQgb24gcHJvdmlkZWQgaW5wdXRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKHN0YXJ0LCBlbmQsIHQsIGVhc2luZyA9IEVhc2luZy5MaW5lYXIpIHtcbiAgICBpZiAodHlwZW9mIGVhc2luZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGVhc2luZyA9IGdldEVhc2luZ0Z1bmN0aW9uKGVhc2luZyk7XG4gICAgfVxuICAgIHJldHVybiBzdGFydCAqICgxIC0gZWFzaW5nKHQpKSArIGVuZCAqIGVhc2luZyh0KTtcbn1cbmZ1bmN0aW9uIGdldEVhc2luZ0Z1bmN0aW9uKHR5cGUpIHtcbiAgICAvLyBEZWZhdWx0IHRvIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSBcImZ1bmN0aW9uXCIgPyB0eXBlIDogRWFzaW5nLkxpbmVhcjtcbn1cbi8qKlxuICogQ2xhbXBzIGlucHV0IHZhbHVlIHRvIHByb3ZpZGVkIG1pbmltdW0gJiBtYXhpbXVtIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgTnVtZXJpYyBpbnB1dCBmb3IgY2xhbXBpbmcgb3BlcmF0aW9uXG4gKiBAcGFyYW0gbWluIE1pbmltdW0gYWxsb3dlZCByZXN1bHQgYWZ0ZXIgY2xhbXBpbmcgKVxuICogQHBhcmFtIG1heCBNYXhpbXVtIGFsbG93ZWQgcmVzdWx0IGFmdGVyIGNsYW1waW5nXG4gKiBAcmV0dXJuIFJlc3VsdGluZyBvdXRwdXQgd2l0aGluIHNwZWNpZmllZCBjb25zdHJhaW50IHJhbmdlIFttaW4sbWF4XVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuIiwgImV4cG9ydCBjbGFzcyBRdWV1ZSB7XG4gICAgaXRlbXMgPSBbXTtcbiAgICBlbnF1ZXVlKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICBkZXF1ZXVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5zaGlmdCgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGggPT09IDA7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IHJuZyB9IGZyb20gXCIuL3JuZy5qc1wiO1xuLyoqXG4gKiBHZXRzIGEgcmFuZG9tIGVsZW1lbnQgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgd2l0aCB0aGUgZ2l2ZW4gd2VpZ2h0cy5cbiAqIEBwYXJhbSB7W119IGFycmF5IGFycmF5IHdpdGggZWxlbWVudHNcbiAqIEBwYXJhbSB7W119IGl0ZW1zV2l0aFdlaWdodHMgYXJyYXkgb2Ygd2VpZ2h0cywgc2hvdWxkIGJlIGFzIGxvbmdzIGFzIHRoZSBhcnJheVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJuZ1dpdGhXZWlnaHQoYXJyYXksIGl0ZW1zV2l0aFdlaWdodHMpIHtcbiAgICAvLyBDYWxjdWxhdGUgdGhlIHRvdGFsIHdlaWdodCBvZiBhbGwgaXRlbXMuXG4gICAgbGV0IHRvdGFsV2VpZ2h0ID0gaXRlbXNXaXRoV2VpZ2h0cy5yZWR1Y2UoKHRvdGFsLCBpdGVtV2l0aFdlaWdodCkgPT4ge1xuICAgICAgICByZXR1cm4gdG90YWwgKyBpdGVtV2l0aFdlaWdodDtcbiAgICB9LCAwKTtcbiAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIHRoZSB0b3RhbCB3ZWlnaHQuXG4gICAgbGV0IHJhbmRvbVZhbHVlID0gcm5nLmdldFVuaWZvcm1JbnQoMCwgdG90YWxXZWlnaHQpO1xuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBpdGVtcyBhbmQgc3VidHJhY3QgdGhlaXIgd2VpZ2h0IGZyb20gdGhlIHJhbmRvbSB2YWx1ZS5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zV2l0aFdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmFuZG9tVmFsdWUgLT0gaXRlbXNXaXRoV2VpZ2h0c1tpXTtcbiAgICAgICAgLy8gV2hlbiB0aGUgdmFsdWUgYmVjb21lcyBuZWdhdGl2ZSBvciB6ZXJvLFxuICAgICAgICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgZWxlbWVudCBhcyBpdCdzIG5vdyBcInNlbGVjdGVkXCIuXG4gICAgICAgIGlmIChyYW5kb21WYWx1ZSA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuIG51bGwgaWYgbm8gZWxlbWVudHMgZm91bmQsIHRob3VnaCBpdCBzaG91bGQgbm90IGhhcHBlbiBpbiBwcmFjdGljZS5cbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICJleHBvcnQgKiBmcm9tICcuLzh0aHdhbGwtY2FtZXJhLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vYW5jaG9yLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vY3Vyc29yLXRhcmdldC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2N1cnNvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RlYnVnLW9iamVjdC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RldmljZS1vcmllbnRhdGlvbi1sb29rLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZmluZ2VyLWN1cnNvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2ZpeGVkLWZvdmVhdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hhbmQtdHJhY2tpbmcuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9oaXQtdGVzdC1sb2NhdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hvd2xlci1hdWRpby1saXN0ZW5lci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hvd2xlci1hdWRpby1zb3VyY2UuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9pbWFnZS10ZXh0dXJlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbW91c2UtbG9vay5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsYXllci1oZWlnaHQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90YXJnZXQtZnJhbWVyYXRlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdGVsZXBvcnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFpbC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3R3by1qb2ludC1pay1zb2x2ZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi92aWRlby10ZXh0dXJlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdnItbW9kZS1hY3RpdmUtc3dpdGNoLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vcGxhbmUtZGV0ZWN0aW9uLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdnJtLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vd2FzZC1jb250cm9scy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2lucHV0LXByb2ZpbGUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9vcmJpdGFsLWNhbWVyYS5qcyc7XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogOHRod2FsbCBjYW1lcmEgY29tcG9uZW50LlxuICpcbiAqIFNldHMgdXAgdGhlIDh0aHdhbGwgcGlwZWxpbmUgYW5kIHJldHJpZXZlcyB0cmFja2luZyBldmVudHMgdG8gcGxhY2UgYW5cbiAqIG9iamVjdCBhdCB0aGUgbG9jYXRpb24gb2YgdGhlIHRyYWNrZWQgQVIgY2FtZXJhIC8gbW9iaWxlIGRldmljZS5cbiAqXG4gKiBVc2UgdGhpcyBmb3IgU0xBTSB0cmFja2luZyBiYXNlZCBvbiA4dGh3YWxsLlxuICpcbiAqIE1ha2Ugc3VyZSB0byBlbmFibGUgOHRod2FsbCBpbiBcIlByb2plY3QgU2V0dGluZ3NcIiA+IFwiQVJcIi4gU2VlIGFsc28gdGhlXG4gKiBbQVIgR2V0dGluZyBTdGFydGVkIEd1aWRlXSgvZ2V0dGluZy1zdGFydGVkL3F1aWNrLXN0YXJ0LWFyKVxuICpcbiAqXG4gKiBDdXJyZW50bHkgb25seSBzdXBwb3J0cyB3b3JsZC10cmFja2luZyAoU0xBTSkgdXNpbmcgQkFDSyBjYW1lcmEuXG4gKlxuICogLSByZW1vdmUgYW55IG9jY3VycmVuY2VzIG9mIHRoZSBvbGQgOHRod2FsbC1jYW1lcmEgY29tcG9uZW50IGluIHRoZSBlZGl0b3JcbiAqIC0gQWRkIHRoaXMgY29tcG9uZW50IHRvIE5vblZyQ2FtZXJhXG4gKlxuICogSU1QT1JUQU5UIVxuICogLSB1bnRpbCBpdCBnZXQncyBmaXhlZCwgc2VsZWN0ICdjdXN0b21JbmRleEh0bWwnIGluIHRoZSBwcm9qZWN0IHNldHRpbmdzXG4gKiAtIG9wZW4gYSBnZW5lcmF0ZWQgaW5kZXguaHRtbCBhbmQgY3Jvc3NvcmlnaW49XCJhbm9ueW1vdXNcIiBhdHRyaWJ1dGUgdG8gdGhlIDxzY3JpcHQ+IHRhZyB3aGVyZSAvL2FwcHMuOHRod2FsbC5jb20veHJ3ZWIgaXMgbG9hZGVkXG4gKlxuICpcbiAqICMjIyMjIyMjIyBVc2luZyBVSSBvdmVybGF5cyAjIyMjIyMjIyMjIyMjXG4gKiBCeSBkZWZhdWx0LCB0aGlzIGNvbXBvbmVudCByZW5kZXJzIG93biBVSSB0byBnaXZlIHRoZSB1c2VyIGZlZWRiYWNrIGFib3V0IHJlamVjdGVkIHBlcm1pc3Npb25zIG9yIHRyYWNraW5nIGVycm9ycy5cbiAqIEl0IGNhbiBiZSBjaGFuZ2VkIGJ5IGVuYWJsaW5nIHVzZUN1c3RvbVVJT3ZlcmxheXMgZmxhZy5cbiAqXG4gKiBJZiB1c2VDdXN0b21VSU92ZXJsYXlzIGlzIGVuYWJsZWQsIHlvdSBhcmUgZXhwZWN0ZWQgaGFuZGxlIHRoZSBmb2xsb3dpbmcgZXZlbnRzIGRpc3BhdGNoZWQgYnkgdGhlIHdpbmRvdyBvYmplY3Q6XG4gKiAtIFwiOHRod2FsbC1yZXF1ZXN0LXVzZXItaW50ZXJhY3Rpb25cIiAtIHVzZWQgb25seSBvbiBpT1Mgc2FmYXJpLiBSZXF1ZXN0IGEgdXNlciB0byBwZXJmb3JtIGFuZCBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIHRoYXQgamF2YXNjcmlwdCBpcyBhbGxvd2VkIHRvIGFsbG93ZWQgdG8gcmVxdWVzdCBhIG1vdGlvbi9jYW1lcmEvbWljIHBlcm1pc3Npb25zLlxuICogIE1ha2Ugc3VyZSB0aGUgd2luZG93IG9iamVjdCBpcyBkaXNwYXRjaGluZyBhbiAnOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnIGV2ZW50IGFmdGVyIGludGVyYWN0aW9uIGhhcyBoYXBwZW5lZC5cbiAqIGBgYFxuICogPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPkFsbG93IFNlbnNvcnM8L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIC0gXCI4dGh3YWxsLXBlcm1pc3Npb24tZmFpbFwiIC0gdXNlciByZWplY3RlZCBhbnkgb2YgdGhlIHBlcm1pc3Npb25zXG4gKlxuICogLSBcIjh0aHdhbGwtZXJyb3JcIiAtIHJ1bnRpbWUgOHRod2FsbCBlcnJvciBvY2N1cnJlZFxuICovXG5jbGFzcyBBUkNhbWVyYTh0aHdhbGwgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICc4dGh3YWxsLWNhbWVyYSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBPdmVycmlkZSB0aGUgV0wgaHRtbCBvdmVybGF5cyBmb3IgaGFuZGxpbmcgY2FtZXJhL21vdGlvbiBwZXJtaXNzaW9ucyBhbmQgZXJyb3IgaGFuZGxpbmcgKi9cbiAgICAgICAgdXNlQ3VzdG9tVUlPdmVybGF5czogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgfTtcbiAgICAvKiA4dGh3YWxsIGNhbWVyYSBwaXBlbGluZSBtb2R1bGUgbmFtZSAqL1xuICAgIG5hbWUgPSAnd29uZGVybGFuZC1lbmdpbmUtOHRod2FsbC1jYW1lcmEnO1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB2aWV3ID0gbnVsbDsgLy8gY2FjaGUgY2FtZXJhXG4gICAgcG9zaXRpb24gPSBbMCwgMCwgMF07IC8vIGNhY2hlIDh0aHdhbGwgY2FtIHBvc2l0aW9uXG4gICAgcm90YXRpb24gPSBbMCwgMCwgMCwgLTFdOyAvLyBjYWNoZSA4dGh3YWxsIGNhbSByb3RhdGlvblxuICAgIGdsVGV4dHVyZVJlbmRlcmVyID0gbnVsbDsgLy8gY2FjaGUgWFI4LkdsVGV4dHVyZVJlbmRlcmVyLnBpcGVsaW5lTW9kdWxlXG4gICAgcHJvbXB0Rm9yRGV2aWNlTW90aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVsbCBhbnlvbmUgd2hvJ3MgaW50ZXJlc3RlZCB0aGF0IHdlIHdhbnQgdG8gZ2V0IHNvbWUgdXNlciBpbnRlcmFjdGlvblxuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXJlcXVlc3QtdXNlci1pbnRlcmFjdGlvbicpKTtcbiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgc29tZW9uZSByZXNwb25zZSB0aGF0IHVzZXIgaW50ZXJhY3Rpb24gaGFwcGVuZWRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3Rpb25FdmVudCA9IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobW90aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIC8vIGlPUyBcImZlYXR1cmVcIi4gSWYgd2Ugd2FudCB0byByZXF1ZXN0IHRoZSBEZXZpY2VNb3Rpb24gcGVybWlzc2lvbiwgdXNlciBoYXMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgcGFnZSBhdCBmaXJzdCAodG91Y2ggaXQpLlxuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gaW50ZXJhY3Rpb24gZG9uZSBzbyBmYXIsIHdlIHdpbGwgcmVuZGVyIGEgSFRNTCBvdmVybGF5IHdpdGggd291bGQgZ2V0IHRoZSB1c2VyIHRvIGludGVyYWN0IHdpdGggdGhlIHNjcmVlblxuICAgICAgICBpZiAoRGV2aWNlTW90aW9uRXZlbnQgJiYgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBtdXN0IGhhdmUgcmVqZWN0ZWQgdGhlIG1vdGlvbiBldmVudCBvbiBwcmV2aW91cyBwYWdlIGxvYWQuIChzYWZhcmkgcmVtZW1iZXJzIHRoaXMgY2hvaWNlKS5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBVc2VyIGhhZCBubyBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIGZhclxuICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb24ubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW90aW9uRXZlbnQgPSBhd2FpdCB0aGlzLnByb21wdEZvckRldmljZU1vdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW90aW9uRXZlbnQgIT09ICdncmFudGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vdGlvbkV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZ2V0IHRoZSBjYW1lcmEgc3RyZWFtXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgdmlkZW86IHRydWUsXG4gICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIElmIHdlIHN1Y2Nlc3NmdWxseSBhY3F1aXJlZCB0aGUgY2FtZXJhIHN0cmVhbSAtIHdlIGNhbiBzdG9wIGl0IGFuZCB3YWl0IHVudGlsIDh0aHdhbGwgcmVxdWVzdHMgaXQgYWdhaW5cbiAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtZXJhJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWV3Jyk7XG4gICAgICAgIHRoaXMub25VcGRhdGUgPSB0aGlzLm9uVXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25BdHRhY2ggPSB0aGlzLm9uQXR0YWNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25FeGNlcHRpb24gPSB0aGlzLm9uRXhjZXB0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DYW1lcmFTdGF0dXNDaGFuZ2UgPSB0aGlzLm9uQ2FtZXJhU3RhdHVzQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3ZpZXcnKTtcbiAgICAgICAgaWYgKCF0aGlzLnVzZUN1c3RvbVVJT3ZlcmxheXMpIHtcbiAgICAgICAgICAgIE92ZXJsYXlzSGFuZGxlci5pbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFVzZXIgZGlkIG5vdCBncmFudCB0aGUgY2FtZXJhIG9yIG1vdGlvbkV2ZW50IHBlcm1pc3Npb25zXG4gICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgeyBkZXRhaWw6IGVycm9yIH0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JYUjgoKTtcbiAgICAgICAgWFI4LlhyQ29udHJvbGxlci5jb25maWd1cmUoe1xuICAgICAgICAgICAgZGlzYWJsZVdvcmxkVHJhY2tpbmc6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nbFRleHR1cmVSZW5kZXJlciA9IFhSOC5HbFRleHR1cmVSZW5kZXJlci5waXBlbGluZU1vZHVsZSgpO1xuICAgICAgICBYUjguYWRkQ2FtZXJhUGlwZWxpbmVNb2R1bGVzKFtcbiAgICAgICAgICAgIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIsXG4gICAgICAgICAgICBYUjguWHJDb250cm9sbGVyLnBpcGVsaW5lTW9kdWxlKCksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBYUjguWHJDb25maWcuY2FtZXJhKCkuQkFDSyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW52YXM6IE1vZHVsZS5jYW52YXMsXG4gICAgICAgICAgICBhbGxvd2VkRGV2aWNlczogWFI4LlhyQ29uZmlnLmRldmljZSgpLkFOWSxcbiAgICAgICAgICAgIG93blJ1bkxvb3A6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBYUjgucnVuKGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogOHRod2FsbCBwaXBlbGluZSBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uQXR0YWNoKHBhcmFtcykge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5jb2xvckNsZWFyRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBnbCA9IE1vZHVsZS5jdHg7XG4gICAgICAgIGNvbnN0IHJvdCA9IHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQ7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQoW10pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gQXJyYXkuZnJvbShwb3MpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gQXJyYXkuZnJvbShyb3QpO1xuICAgICAgICBYUjguWHJDb250cm9sbGVyLnVwZGF0ZUNhbWVyYVByb2plY3Rpb25NYXRyaXgoe1xuICAgICAgICAgICAgb3JpZ2luOiB7IHg6IHBvc1swXSwgeTogcG9zWzFdLCB6OiBwb3NbMl0gfSxcbiAgICAgICAgICAgIGZhY2luZzogeyB4OiByb3RbMF0sIHk6IHJvdFsxXSwgejogcm90WzJdLCB3OiByb3RbM10gfSxcbiAgICAgICAgICAgIGNhbToge1xuICAgICAgICAgICAgICAgIHBpeGVsUmVjdFdpZHRoOiBNb2R1bGUuY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgICAgIHBpeGVsUmVjdEhlaWdodDogTW9kdWxlLmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgbmVhckNsaXBQbGFuZTogdGhpcy52aWV3Lm5lYXIsXG4gICAgICAgICAgICAgICAgZmFyQ2xpcFBsYW5lOiB0aGlzLnZpZXcuZmFyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUHJlUmVuZGVyLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkRSQVdfRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgWFI4LnJ1blByZVJlbmRlcihEYXRlLm5vdygpKTtcbiAgICAgICAgICAgIFhSOC5ydW5SZW5kZXIoKTsgLy8gPC0tLSB0ZWxsIDh0aHdhbGwgdG8gZG8gaXQncyB0aGluZyAoYWx0ZXJuYXRpdmVseSBjYWxsIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIub25SZW5kZXIoKSBpZiB5b3Ugb25seSBjYXJlIGFib3V0IGNhbWVyYSBmZWVkIClcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUG9zdFJlbmRlci5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIFhSOC5ydW5Qb3N0UmVuZGVyKERhdGUubm93KCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25DYW1lcmFTdGF0dXNDaGFuZ2UoZSkge1xuICAgICAgICBpZiAoZSAmJiBlLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgIHRoaXMub25FeGNlcHRpb24obmV3IEVycm9yKGBDYW1lcmEgZmFpbGVkIHdpdGggc3RhdHVzOiAke2Uuc3RhdHVzfWApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIDh0aHdhbGwgcGlwZWxpbmUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBvblVwZGF0ZShlKSB7XG4gICAgICAgIGlmICghZS5wcm9jZXNzQ3B1UmVzdWx0LnJlYWxpdHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgcm90YXRpb24sIHBvc2l0aW9uLCBpbnRyaW5zaWNzIH0gPSBlLnByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eTtcbiAgICAgICAgdGhpcy5yb3RhdGlvblswXSA9IHJvdGF0aW9uLng7XG4gICAgICAgIHRoaXMucm90YXRpb25bMV0gPSByb3RhdGlvbi55O1xuICAgICAgICB0aGlzLnJvdGF0aW9uWzJdID0gcm90YXRpb24uejtcbiAgICAgICAgdGhpcy5yb3RhdGlvblszXSA9IHJvdGF0aW9uLnc7XG4gICAgICAgIHRoaXMucG9zaXRpb25bMF0gPSBwb3NpdGlvbi54O1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzFdID0gcG9zaXRpb24ueTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblsyXSA9IHBvc2l0aW9uLno7XG4gICAgICAgIGlmIChpbnRyaW5zaWNzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gdGhpcy52aWV3LnByb2plY3Rpb25NYXRyaXg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgICAgICAvKiBTb21lIHByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eS5pbnRyaW5zaWNzIGFyZSBzZXQgdG8gSW5maW5pdHksXG4gICAgICAgICAgICAgICAgICogd2hpY2ggYnJha2VzIG91ciBwcm9qZWN0aW9uTWF0cml4LiBTbyB3ZSBqdXN0IGZpbHRlciB0aG9zZSBlbGVtZW50cyBvdXQuICovXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShpbnRyaW5zaWNzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4W2ldID0gaW50cmluc2ljc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uICYmIHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbldvcmxkID0gdGhpcy5yb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNldFRyYW5zbGF0aW9uV29ybGQodGhpcy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25FeGNlcHRpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignOHRod2FsbCBleGNlcHRpb246JywgZXJyb3IpO1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtZXJyb3InLCB7IGRldGFpbDogZXJyb3IgfSkpO1xuICAgIH1cbiAgICB3YWl0Rm9yWFI4KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF9yZWopID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuWFI4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3hybG9hZGVkJywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgQVJDYW1lcmE4dGh3YWxsIH07XG5jb25zdCBPdmVybGF5c0hhbmRsZXIgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24gPSB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCA9IHRoaXMuaGFuZGxlUGVybWlzc2lvbkZhaWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvciA9IHRoaXMuaGFuZGxlRXJyb3IuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcmVxdWVzdC11c2VyLWludGVyYWN0aW9uJywgdGhpcy5oYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLWVycm9yJywgdGhpcy5oYW5kbGVFcnJvcik7XG4gICAgfSxcbiAgICBoYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLnNob3dPdmVybGF5KHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsICgpID0+IHtcbiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlUGVybWlzc2lvbkZhaWw6IGZ1bmN0aW9uIChfcmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2hvd092ZXJsYXkoZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkpO1xuICAgIH0sXG4gICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIChfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zaG93T3ZlcmxheShydW50aW1lRXJyb3JPdmVybGF5KTtcbiAgICB9LFxuICAgIHNob3dPdmVybGF5OiBmdW5jdGlvbiAoaHRtbENvbnRlbnQpIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGh0bWxDb250ZW50O1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgICByZXR1cm4gb3ZlcmxheTtcbiAgICB9LFxufTtcbmNvbnN0IHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSA9IGBcbjxzdHlsZT5cbiAgI3JlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlIHtcbiAgICBtYXJnaW46IDMwcHg7XG4gICAgZm9udC1zaXplOiAzMnB4O1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X2J1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2U4MDA4NjtcbiAgICBmb250LXNpemU6IDIycHg7XG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICB9XG48L3N0eWxlPlxuXG48ZGl2IGlkPVwicmVxdWVzdC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cInJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlXCI+VGhpcyBhcHAgcmVxdWlyZXMgdG8gdXNlIHlvdXIgY2FtZXJhIGFuZCBtb3Rpb24gc2Vuc29yczwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJyZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b25cIiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPk9LPC9idXR0b24+XG48L2Rpdj5gO1xuY29uc3QgZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkgPSBgXG48c3R5bGU+XG4gICNmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLmZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGUge1xuICAgIG1hcmdpbjogMzBweDtcbiAgICBmb250LXNpemU6IDMycHg7XG4gIH1cblxuICAuZmFpbGVkLXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b24ge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODAwODY7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuPC9zdHlsZT5cblxuPGRpdiBpZD1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGVcIj5GYWlsZWQgdG8gZ3JhbnQgcGVybWlzc2lvbnMuIFJlc2V0IHRoZSB0aGUgcGVybWlzc2lvbnMgYW5kIHJlZnJlc2ggdGhlIHBhZ2UuPC9kaXY+XG5cbiAgPGJ1dHRvbiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlZnJlc2ggdGhlIHBhZ2U8L2J1dHRvbj5cbjwvZGl2PmA7XG5jb25zdCBydW50aW1lRXJyb3JPdmVybGF5ID0gYFxuPHN0eWxlPlxuICAjd2FsbC1lcnJvci1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZSB7XG4gICAgbWFyZ2luOiAzMHB4O1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgfVxuXG4gIC53YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTgwMDg2O1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXYgaWQ9XCJ3YWxsLWVycm9yLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cIndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZVwiPkVycm9yIGhhcyBvY2N1cnJlZC4gUGxlYXNlIHJlbG9hZCB0aGUgcGFnZTwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJ3YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlbG9hZDwvYnV0dG9uPlxuPC9kaXY+YDtcbiIsICJjb25zdCB0ZW1wVmVjID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRlbXBRdWF0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwobywgdHJhbnNmb3JtKSB7XG4gICAgY29uc3QgciA9IHRyYW5zZm9ybS5vcmllbnRhdGlvbjtcbiAgICB0ZW1wUXVhdFswXSA9IHIueDtcbiAgICB0ZW1wUXVhdFsxXSA9IHIueTtcbiAgICB0ZW1wUXVhdFsyXSA9IHIuejtcbiAgICB0ZW1wUXVhdFszXSA9IHIudztcbiAgICBjb25zdCB0ID0gdHJhbnNmb3JtLnBvc2l0aW9uO1xuICAgIHRlbXBWZWNbMF0gPSB0Lng7XG4gICAgdGVtcFZlY1sxXSA9IHQueTtcbiAgICB0ZW1wVmVjWzJdID0gdC56O1xuICAgIG8ucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgby5zZXRSb3RhdGlvbkxvY2FsKHRlbXBRdWF0KTtcbiAgICBvLnRyYW5zbGF0ZUxvY2FsKHRlbXBWZWMpO1xufVxuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xudmFyIHRlbXBWZWMzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbnZhciB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4vKipcbiAqIFNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSBvYmplY3QgdG8gdGhlIGxvY2F0aW9uIG9mIGFuIFhSQW5jaG9yXG4gKlxuICogQ3JlYXRlIGFuY2hvcnMgdXNpbmcgdGhlIGBBbmNob3IuY3JlYXRlKClgIHN0YXRpYyBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlIGZvciB1c2Ugd2l0aCBjdXJzb3I6XG4gKiBgYGBqc1xuICogY3Vyc29yVGFyZ2V0Lm9uQ2xpY2suYWRkKChvYmplY3QsIGN1cnNvciwgb3JpZ2luYWxFdmVudCkgPT4ge1xuICogICAgIC8qIE9ubHkgZXZlbnRzIGluIFhSIHdpbGwgaGF2ZSBhIGZyYW1lIGF0dGFjaGVkICpcXC9cbiAqICAgICBpZighb3JpZ2luYWxFdmVudC5mcmFtZSkgcmV0dXJuO1xuICogICAgIEFuY2hvci5jcmVhdGUoYW5jaG9yT2JqZWN0LCB7dXVpZDogaWQsIHBlcnNpc3Q6IHRydWV9LCBvcmlnaW5hbEV2ZW50LmZyYW1lKTtcbiAqIH0pO1xuICogYGBgXG4gKi9cbmNsYXNzIEFuY2hvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuY2hvcic7XG4gICAgLyogU3RhdGljIG1hbmFnZW1lbnQgb2YgYWxsIGFuY2hvcnMgKi9cbiAgICBzdGF0aWMgI2FuY2hvcnMgPSBbXTtcbiAgICBwZXJzaXN0ID0gZmFsc2U7XG4gICAgLyoqIFVuaXF1ZSBpZGVudGlmaWVyIHRvIGxvYWQgYSBwZXJzaXN0ZW50IGFuY2hvciBmcm9tLCBvciBlbXB0eS9udWxsIGlmIHVua25vd24gKi9cbiAgICB1dWlkID0gbnVsbDtcbiAgICAvKiogVGhlIHhyQW5jaG9yLCBpZiBjcmVhdGVkICovXG4gICAgeHJBbmNob3IgPSBudWxsO1xuICAgIC8qKiBFbWl0cyBldmVudHMgd2hlbiB0aGUgYW5jaG9yIGlzIGNyZWF0ZWQgZWl0aGVyIGJ5IGJlaW5nIHJlc3RvcmVkIG9yIG5ld2x5IGNyZWF0ZWQgKi9cbiAgICBvbkNyZWF0ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFdoZXRoZXIgdGhlIGFuY2hvciBpcyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZCAqL1xuICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGlzIGFuY2hvciBzdGFydHMgdHJhY2tpbmcgKi9cbiAgICBvblRyYWNraW5nRm91bmQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoaXMgYW5jaG9yIHN0b3BzIHRyYWNraW5nICovXG4gICAgb25UcmFja2luZ0xvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBYUkZyYW1lIHRvIHVzZSBmb3IgY3JlYXRpbmcgdGhlIGFuY2hvciAqL1xuICAgIHhyRnJhbWUgPSBudWxsO1xuICAgIC8qKiBYUkhpdFRlc3RSZXN1bHQgdG8gdXNlIGZvciBjcmVhdGluZyB0aGUgYW5jaG9yICovXG4gICAgeHJIaXRSZXN1bHQgPSBudWxsO1xuICAgIC8qKiBSZXRyaWV2ZSBhbGwgYW5jaG9ycyBvZiB0aGUgY3VycmVudCBzY2VuZSAqL1xuICAgIHN0YXRpYyBnZXRBbGxBbmNob3JzKCkge1xuICAgICAgICByZXR1cm4gQW5jaG9yLiNhbmNob3JzO1xuICAgIH1cbiAgICBzdGF0aWMgI2FkZEFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICB9XG4gICAgc3RhdGljICNyZW1vdmVBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gQW5jaG9yLiNhbmNob3JzLmluZGV4T2YoYW5jaG9yKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBhbmNob3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvIE9iamVjdCB0byBhdHRhY2ggdGhlIGNvbXBvbmVudCB0b1xuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyBmb3IgdGhlIGFuY2hvciBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0gZnJhbWUgWFJGcmFtZSB0byB1c2UgZm9yIGFuY2hvciBjcmF0aW9uLCBpZiBudWxsLCB3aWxsIHVzZSB0aGUgY3VycmVudCBmcmFtZSBpZiBhdmFpbGFibGVcbiAgICAgKiBAcGFyYW0gaGl0UmVzdWx0IE9wdGlvbmFsIGhpdC10ZXN0IHJlc3VsdCB0byBjcmVhdGUgdGhlIGFuY2hvciB3aXRoXG4gICAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgdGhlIG5ld2x5IGNyZWF0ZWQgYW5jaG9yIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUobywgcGFyYW1zLCBmcmFtZSwgaGl0UmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGEgPSBvLmFkZENvbXBvbmVudChBbmNob3IsIHsgLi4ucGFyYW1zLCBhY3RpdmU6IGZhbHNlIH0pO1xuICAgICAgICBpZiAoYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBhLnhySGl0UmVzdWx0ID0gaGl0UmVzdWx0ID8/IG51bGw7XG4gICAgICAgIGEueHJGcmFtZSA9IGZyYW1lID8/IG51bGw7XG4gICAgICAgIGEub25DcmVhdGUub25jZSgoKSA9PiAoKGEueHJGcmFtZSA9IG51bGwpLCAoYS54ckhpdFJlc3VsdCA9IG51bGwpKSk7XG4gICAgICAgIGEuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGEub25DcmVhdGUucHJvbWlzZSgpO1xuICAgIH1cbiAgICAjZ2V0RnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyRnJhbWUgfHwgdGhpcy5lbmdpbmUueHIuZnJhbWU7XG4gICAgfVxuICAgIGFzeW5jICNjcmVhdGVBbmNob3IoKSB7XG4gICAgICAgIGlmICghdGhpcy4jZ2V0RnJhbWUoKS5jcmVhdGVBbmNob3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgYW5jaG9yIC0gYW5jaG9ycyBub3Qgc3VwcG9ydGVkLCBkaWQgeW91IGVuYWJsZSB0aGUgJ2FuY2hvcnMnIFdlYlhSIGZlYXR1cmU/XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnhySGl0UmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWVzdGVkIGFuY2hvciBvbiBYUkhpdFRlc3RSZXN1bHQsIGJ1dCBXZWJYUiBoaXQtdGVzdCBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGVtcFZlYzMpO1xuICAgICAgICAgICAgdGVtcFF1YXQuc2V0KHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQpO1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSB0ZW1wUXVhdDtcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvclBvc2UgPSBuZXcgWFJSaWdpZFRyYW5zZm9ybSh7IHg6IHRlbXBWZWMzWzBdLCB5OiB0ZW1wVmVjM1sxXSwgejogdGVtcFZlYzNbMl0gfSwgeyB4OiByb3RhdGlvblswXSwgeTogcm90YXRpb25bMV0sIHo6IHJvdGF0aW9uWzJdLCB3OiByb3RhdGlvblszXSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiNnZXRGcmFtZSgpPy5jcmVhdGVBbmNob3IoYW5jaG9yUG9zZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjb25BZGRBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGlmICghYW5jaG9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0KSB7XG4gICAgICAgICAgICBpZiAoYW5jaG9yLnJlcXVlc3RQZXJzaXN0ZW50SGFuZGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhbmNob3IucmVxdWVzdFBlcnNpc3RlbnRIYW5kbGUoKS50aGVuKCh1dWlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXVpZCA9IHV1aWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI29uQ3JlYXRlKGFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIEFuY2hvci4jYWRkQW5jaG9yKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignYW5jaG9yOiBQZXJzaXN0ZW50IGFuY2hvcnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBjbGllbnQuIElnbm9yaW5nIHBlcnNpc3QgcHJvcGVydHkuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uUmVzdG9yZUFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uQ3JlYXRlKGFuY2hvcikge1xuICAgICAgICB0aGlzLnhyQW5jaG9yID0gYW5jaG9yO1xuICAgICAgICB0aGlzLm9uQ3JlYXRlLm5vdGlmeSh0aGlzKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnV1aWQgJiYgdGhpcy5lbmdpbmUueHIpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5yZXN0b3JlUGVyc2lzdGVudEFuY2hvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdhbmNob3I6IFBlcnNpc3RlbnQgYW5jaG9ycyBhcmUgbm90IHN1cHBvcnRlZCBieSB5b3VyIGNsaWVudC4gSWdub3JpbmcgcGVyc2lzdCBwcm9wZXJ0eS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24ucmVzdG9yZVBlcnNpc3RlbnRBbmNob3IodGhpcy51dWlkKS50aGVuKHRoaXMuI29uUmVzdG9yZUFuY2hvci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNnZXRGcmFtZSgpKSB7XG4gICAgICAgICAgICB0aGlzLiNjcmVhdGVBbmNob3IoKS50aGVuKHRoaXMuI29uQWRkQW5jaG9yLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbmNob3JzIGNhbiBvbmx5IGJlIGNyZWF0ZWQgZHVyaW5nIHRoZSBYUiBmcmFtZSBpbiBhbiBhY3RpdmUgWFIgc2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnhyQW5jaG9yIHx8ICF0aGlzLmVuZ2luZS54cilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogV2UgbmVlZCB0byB1c2UgdGhlIGFjdHVhbCBmcmFtZSBmcm9tIHRoZSBkcmF3IGNhbGxiYWNrIGhlcmUgKi9cbiAgICAgICAgY29uc3QgcG9zZSA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldFBvc2UodGhpcy54ckFuY2hvci5hbmNob3JTcGFjZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9ICEhcG9zZTtcbiAgICAgICAgaWYgKHZpc2libGUgIT0gdGhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICAgICAgKHZpc2libGUgPyB0aGlzLm9uVHJhY2tpbmdGb3VuZCA6IHRoaXMub25UcmFja2luZ0xvc3QpLm5vdGlmeSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zZSkge1xuICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICBBbmNob3IuI3JlbW92ZUFuY2hvcih0aGlzKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJwZXJzaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJ1dWlkXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBBbmNob3IgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIEVtaXR0ZXIgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBDbGljay9ob3Zlci9tb3ZlL2J1dHRvbiB0YXJnZXQgZm9yIFtjdXJzb3JdKCNjdXJzb3IpLlxuICpcbiAqIFRvIHRyaWdnZXIgY29kZSB3aGVuIGNsaWNraW5nLCBob3ZlcmluZywgdW5ob3ZlcmluZywgbW92aW5nIGN1cnNvciwgcHJlc3NpbmdcbiAqIGN1cnNvciBidXR0b24gb3IgcmVsZWFzaW5nIGN1cnNvciBidXR0b24sIHVzZSBgLmFkZENsaWNrRnVuY3Rpb24oZilgLFxuICogYC5hZGRIb3ZlckZ1bmN0aW9uKGYpYCwgYC5hZGRVbkhvdmVyRnVuY3Rpb24oZilgLFxuICogYC5hZGRNb3ZlRnVuY3Rpb24oZilgLCBgLmFkZERvd25GdW5jdGlvbihmKWAgYW5kXG4gKiBgLmFkZFVwRnVuY3Rpb24oZilgIHJlc3BlY3RpdmVseSB3aXRoIGFueSBgZnVuY3Rpb24gZigpIHt9YC5cbiAqXG4gKiBUbyBjYWxsIG1lbWJlcnMgb24gYSBkaWZmZXJlbnQgY29tcG9uZW50LCB5b3UgY2FuIHNldCB1cCBhIGN1cnNvciB0YXJnZXQgbGlrZVxuICogc286XG4gKlxuICogYGBganNcbiAqIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAqICAgbGV0IHRhcmdldCA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudCgnY3Vyc29yLXRhcmdldCcpO1xuICogICB0YXJnZXQub25DbGljay5hZGQodGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xuICogfSxcbiAqIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICBjb25zb2xlLmxvZyh0aGlzLm9iamVjdC5uYW1lLCBcIndhcyBjbGlja2VkIVwiKTtcbiAqIH1cbiAqIGBgYFxuICogKipGdW5jdGlvbnM6KipcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgdGFyZ2V0ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCk7XG4gKiBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uKG9iamVjdCwgY3Vyc29yQ29tcG9uZW50KSB7fTtcbiAqXG4gKiB0YXJnZXQub25Ib3Zlci5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uSG92ZXIucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VbkhvdmVyLmFkZChjYWxsYmFjayk7XG4gKiB0YXJnZXQub25VbkhvdmVyLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uQ2xpY2suYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkNsaWNrLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uTW92ZS5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uTW92ZS5yZW1vdmUoY2FsbGJhY2spO1xuICpcbiAqIHRhcmdldC5vbkRvd24uYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkRvd24ucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VcC5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uVXAucmVtb3ZlKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqICoqUmVxdWlyZW1lbnRzOioqXG4gKiAtIGEgYGNvbGxpc2lvbmAgY29tcG9uZW50IHRvIGJlIGF0dGFjaGVkIHRvIHRoZSBzYW1lIG9iamVjdC5cbiAqXG4gKiBTZWUgW0FuaW1hdGlvbiBFeGFtcGxlXSgvc2hvd2Nhc2UvYW5pbWF0aW9uKS5cbiAqL1xuY2xhc3MgQ3Vyc29yVGFyZ2V0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY3Vyc29yLXRhcmdldCc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7fTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBob3ZlcmVkICovXG4gICAgb25Ib3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgdW5ob3ZlcmVkICovXG4gICAgb25VbmhvdmVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBjbGlja2VkICovXG4gICAgb25DbGljayA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSBjdXJzb3IgbW92ZXMgb24gdGhlIHRhcmdldCAqL1xuICAgIG9uTW92ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uRG93biA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHVucHJlc3NlZCB0aGUgc2VsZWN0IGJ1dHRvbiBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25VcCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgICovXG4gICAgYWRkSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgdGhpcy5vblVuaG92ZXIuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVuSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25VbmhvdmVyLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25VbmhvdmVyLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVVbkhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVW5ob3Zlci5yZW1vdmUoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZENsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUNsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5hZGQoZik7XG4gICAgICovXG4gICAgYWRkTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5hZGQoZik7XG4gICAgICovXG4gICAgYWRkRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24uYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24ucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZVVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAucmVtb3ZlKGYpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEN1cnNvclRhcmdldCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xuLyoqXG4gKiBTZXRzIHVwIGEgW1dlYlhSIERldmljZSBBUEkgXCJIaXQgVGVzdFwiXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL2hpdC10ZXN0LylcbiAqIGFuZCBwbGFjZXMgdGhlIG9iamVjdCB0byB0aGUgaGl0IGxvY2F0aW9uLlxuICpcbiAqICoqUmVxdWlyZW1lbnRzOioqXG4gKiAgLSBTcGVjaWZ5IGAnaGl0LXRlc3QnYCBpbiB0aGUgcmVxdWlyZWQgb3Igb3B0aW9uYWwgZmVhdHVyZXMgb24gdGhlIEFSIGJ1dHRvbiBpbiB5b3VyIGh0bWwgZmlsZS5cbiAqICAgIFNlZSBbV2FzdGVwYXBlcmJpbiBBUl0oL3Nob3djYXNlL3dwYi1hcikgYXMgYW4gZXhhbXBsZS5cbiAqL1xuY2xhc3MgSGl0VGVzdExvY2F0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaGl0LXRlc3QtbG9jYXRpb24nO1xuICAgIHRlbXBTY2FsaW5nID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgeHJIaXRUZXN0U291cmNlID0gbnVsbDtcbiAgICAvKiogUmVmZXJlbmNlIHNwYWNlIGZvciBjcmVhdGluZyB0aGUgaGl0IHRlc3Qgd2hlbiB0aGUgc2Vzc2lvbiBzdGFydHMgKi9cbiAgICB4clJlZmVyZW5jZVNwYWNlID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBGb3IgbWFpbnRhaW5pbmcgYmFja3dhcmRzIGNvbXBhdGliaWxpdHk6IFdoZXRoZXIgdG8gc2NhbGUgdGhlIG9iamVjdCB0byAwIGFuZCBiYWNrLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBvbkhpdExvc3QgYW5kIG9uSGl0Rm91bmQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzY2FsZU9iamVjdCA9IHRydWU7XG4gICAgLyoqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIGhpdCB0ZXN0IHN3aXRjaGVzIGZyb20gdmlzaWJsZSB0byBpbnZpc2libGUgKi9cbiAgICBvbkhpdExvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoZSBoaXQgdGVzdCBzd2l0Y2hlcyBmcm9tIGludmlzaWJsZSB0byB2aXNpYmxlICovXG4gICAgb25IaXRGb3VuZCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgb25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IG51bGw7XG4gICAgb25TZXNzaW9uRW5kQ2FsbGJhY2sgPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25FbmQuYmluZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuc2NhbGVPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcFNjYWxpbmcuc2V0KHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zY2FsZShbMCwgMCwgMF0pO1xuICAgICAgICAgICAgdGhpcy5vbkhpdExvc3QuYWRkKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBTY2FsaW5nLnNldCh0aGlzLm9iamVjdC5zY2FsaW5nTG9jYWwpO1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxlKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub25IaXRGb3VuZC5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbC5zZXQodGhpcy50ZW1wU2NhbGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2V0RGlydHkoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLmFkZCh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5yZW1vdmUodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgd2FzVmlzaWJsZSA9IHRoaXMudmlzaWJsZTtcbiAgICAgICAgaWYgKHRoaXMueHJIaXRUZXN0U291cmNlKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuZW5naW5lLnhyRnJhbWU7XG4gICAgICAgICAgICBpZiAoIWZyYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBoaXRUZXN0UmVzdWx0cyA9IGZyYW1lLmdldEhpdFRlc3RSZXN1bHRzKHRoaXMueHJIaXRUZXN0U291cmNlKTtcbiAgICAgICAgICAgIGlmIChoaXRUZXN0UmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvc2UgPSBoaXRUZXN0UmVzdWx0c1swXS5nZXRQb3NlKHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gISFwb3NlO1xuICAgICAgICAgICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCh0aGlzLm9iamVjdCwgcG9zZS50cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIEVtaXQgZXZlbnRzIGZvciB2aXNpYmxlIHN0YXRlIGNoYW5nZSAqL1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlICE9IHdhc1Zpc2libGUpIHtcbiAgICAgICAgICAgICh0aGlzLnZpc2libGUgPyB0aGlzLm9uSGl0Rm91bmQgOiB0aGlzLm9uSGl0TG9zdCkubm90aWZ5KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEhpdFRlc3RSZXN1bHRzKGZyYW1lID0gdGhpcy5lbmdpbmUueHI/LmZyYW1lID8/IG51bGwpIHtcbiAgICAgICAgaWYgKCFmcmFtZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgLyogTWF5IGhhcHBlbiBpZiB0aGUgaGl0IHRlc3Qgc291cmNlIGNvdWxkbid0IGJlIGNyZWF0ZWQgKi9cbiAgICAgICAgaWYgKCF0aGlzLnhySGl0VGVzdFNvdXJjZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIGZyYW1lLmdldEhpdFRlc3RSZXN1bHRzKHRoaXMueHJIaXRUZXN0U291cmNlKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25TdGFydChzZXNzaW9uKSB7XG4gICAgICAgIGlmIChzZXNzaW9uLnJlcXVlc3RIaXRUZXN0U291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2hpdC10ZXN0LWxvY2F0aW9uOiBoaXQgdGVzdCBmZWF0dXJlIG5vdCBhdmFpbGFibGUuIERlYWN0aXZhdGluZyBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIC5yZXF1ZXN0SGl0VGVzdFNvdXJjZSh7XG4gICAgICAgICAgICBzcGFjZTogdGhpcy54clJlZmVyZW5jZVNwYWNlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUueHIucmVmZXJlbmNlU3BhY2VGb3JUeXBlKCd2aWV3ZXInKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChoaXRUZXN0U291cmNlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZSA9IGhpdFRlc3RTb3VyY2U7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICAgIG9uWFJTZXNzaW9uRW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMueHJIaXRUZXN0U291cmNlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy54ckhpdFRlc3RTb3VyY2UgPSBudWxsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIEhpdFRlc3RMb2NhdGlvbi5wcm90b3R5cGUsIFwic2NhbGVPYmplY3RcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IEhpdFRlc3RMb2NhdGlvbiB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgVmlld0NvbXBvbmVudCwgRW1pdHRlciwgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyB2ZWMzLCBtYXQ0IH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IEN1cnNvclRhcmdldCB9IGZyb20gJy4vY3Vyc29yLXRhcmdldC5qcyc7XG5pbXBvcnQgeyBIaXRUZXN0TG9jYXRpb24gfSBmcm9tICcuL2hpdC10ZXN0LWxvY2F0aW9uLmpzJztcbmNvbnN0IHRlbXBWZWMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgWkVSTyA9IFswLCAwLCAwXTtcbi8qKiBHbG9iYWwgdGFyZ2V0IGZvciB7QGxpbmsgQ3Vyc29yfSAqL1xuY2xhc3MgQ3Vyc29yVGFyZ2V0RW1pdHRlcnMge1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIGhvdmVyZWQgKi9cbiAgICBvbkhvdmVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyB1bmhvdmVyZWQgKi9cbiAgICBvblVuaG92ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIGNsaWNrZWQgKi9cbiAgICBvbkNsaWNrID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIGN1cnNvciBtb3ZlcyBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25Nb3ZlID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHVzZXIgcHJlc3NlZCB0aGUgc2VsZWN0IGJ1dHRvbiBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25Eb3duID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHVzZXIgdW5wcmVzc2VkIHRoZSBzZWxlY3QgYnV0dG9uIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvblVwID0gbmV3IEVtaXR0ZXIoKTtcbn1cbi8qKlxuICogM0QgY3Vyc29yIGZvciBkZXNrdG9wL21vYmlsZS9WUi5cbiAqXG4gKiBJbXBsZW1lbnRzIGEgcmF5LWNhc3RpbmcgY3Vyc29yIGludG8gdGhlIHNjZW5lLiBUbyByZWFjdCB0b1xuICogY2xpY2tpbmcvaG92ZXIvdW5ob3Zlci9jdXJzb3IgZG93bi9jdXJzb3IgdXAvbW92ZSB1c2UgYVxuICogW2N1cnNvci10YXJnZXRdKCNjdXJzb3ItdGFyZ2V0KS5cbiAqXG4gKiBGb3IgVlIsIHRoZSByYXkgaXMgY2FzdCBpbiBkaXJlY3Rpb24gb2ZcbiAqIFt0aGlzLm9iamVjdC5nZXRGb3J3YXJkKCldKC9qc2FwaS9vYmplY3QvI2dldGZvcndhcmQpLiBGb3IgZGVza3RvcCBhbmQgbW9iaWxlLCB0aGVcbiAqIGZvcndhcmQgdmVjdG9yIGlzIGludmVyc2UtcHJvamVjdGVkIHRvIGFjY291bnQgZm9yIHdoZXJlIG9uIHNjcmVlbiB0aGUgdXNlciBjbGlja2VkLlxuICpcbiAqIGAuZ2xvYmFsVGFyZ2V0YCBjYW4gYmUgdXNlZCB0byBjYWxsIGNhbGxiYWNrcyBmb3IgYWxsIG9iamVjdHMsIGV2ZW4gdGhvc2UgdGhhdFxuICogZG8gbm90IGhhdmUgYSBjdXJzb3IgdGFyZ2V0IGF0dGFjaGVkLCBidXQgbWF0Y2ggdGhlIGNvbGxpc2lvbiBncm91cC5cbiAqXG4gKiBgLmhpdFRlc3RUYXJnZXRgIGNhbiBiZSB1c2VkIHRvIGNhbGwgY2FsbGJhY2tzIFdlYlhSIGhpdCB0ZXN0IHJlc3VsdHMsXG4gKlxuICogU2VlIFtBbmltYXRpb24gRXhhbXBsZV0oL3Nob3djYXNlL2FuaW1hdGlvbikuXG4gKi9cbmNsYXNzIEN1cnNvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2N1cnNvcic7XG4gICAgLyogRGVwZW5kZW5jaWVzIGlzIGRlcHJlY2F0ZWQsIGJ1dCB3ZSBrZWVwIGl0IGhlcmUgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgKiB3aXRoIDEuMC4wLXJjMiB1bnRpbCAxLjAuMCBpcyByZWxlYXNlZCAqL1xuICAgIHN0YXRpYyBEZXBlbmRlbmNpZXMgPSBbSGl0VGVzdExvY2F0aW9uXTtcbiAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KEhpdFRlc3RMb2NhdGlvbik7XG4gICAgfVxuICAgIF9jb2xsaXNpb25NYXNrID0gMDtcbiAgICBfb25EZWFjdGl2YXRlQ2FsbGJhY2tzID0gW107XG4gICAgX2lucHV0ID0gbnVsbDtcbiAgICBfb3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBfY3Vyc29yT2JqU2NhbGUgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9kaXJlY3Rpb24gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9wcm9qZWN0aW9uTWF0cml4ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XG4gICAgX3ZpZXdDb21wb25lbnQgPSBudWxsO1xuICAgIF9pc0Rvd24gPSBmYWxzZTtcbiAgICBfbGFzdElzRG93biA9IGZhbHNlO1xuICAgIF9hclRvdWNoRG93biA9IGZhbHNlO1xuICAgIF9sYXN0UG9pbnRlclBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgX2xhc3RDdXJzb3JQb3NPblRhcmdldCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX2hpdFRlc3RMb2NhdGlvbiA9IG51bGw7XG4gICAgX2hpdFRlc3RPYmplY3QgPSBudWxsO1xuICAgIF9vblNlc3Npb25TdGFydENhbGxiYWNrID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBjdXJzb3IgKGFuZCBjdXJzb3JPYmplY3QpIGlzIHZpc2libGUsIGkuZS4gcG9pbnRpbmcgYXQgYW4gb2JqZWN0XG4gICAgICogdGhhdCBtYXRjaGVzIHRoZSBjb2xsaXNpb24gZ3JvdXBcbiAgICAgKi9cbiAgICB2aXNpYmxlID0gdHJ1ZTtcbiAgICAvKiogQ3VycmVudGx5IGhvdmVyZWQgb2JqZWN0ICovXG4gICAgaG92ZXJpbmdPYmplY3QgPSBudWxsO1xuICAgIC8qKiBDdXJzb3JUYXJnZXQgY29tcG9uZW50IG9mIHRoZSBjdXJyZW50bHkgaG92ZXJlZCBvYmplY3QgKi9cbiAgICBob3ZlcmluZ09iamVjdFRhcmdldCA9IG51bGw7XG4gICAgLyoqIFdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyByZWFsaXR5IHZpYSBoaXQtdGVzdCAqL1xuICAgIGhvdmVyaW5nUmVhbGl0eSA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEdsb2JhbCB0YXJnZXQgbGV0cyB5b3UgcmVjZWl2ZSBnbG9iYWwgY3Vyc29yIGV2ZW50cyBvbiBhbnkgb2JqZWN0LlxuICAgICAqL1xuICAgIGdsb2JhbFRhcmdldCA9IG5ldyBDdXJzb3JUYXJnZXRFbWl0dGVycygpO1xuICAgIC8qKlxuICAgICAqIEhpdCB0ZXN0IHRhcmdldCBsZXRzIHlvdSByZWNlaXZlIGN1cnNvciBldmVudHMgZm9yIFwicmVhbGl0eVwiLCBpZlxuICAgICAqIGB1c2VXZWJYUkhpdFRlc3RgIGlzIHNldCB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICogY3Vyc29yLmhpdFRlc3RUYXJnZXQub25DbGljay5hZGQoKGhpdCwgY3Vyc29yKSA9PiB7XG4gICAgICogICAgIC8vIFVzZXIgY2xpY2tlZCBvbiByZWFsaXR5XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgaGl0VGVzdFRhcmdldCA9IG5ldyBDdXJzb3JUYXJnZXRFbWl0dGVycygpO1xuICAgIC8qKiBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY3Vyc29yICovXG4gICAgY3Vyc29yUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAvKiogQ29sbGlzaW9uIGdyb3VwIGZvciB0aGUgcmF5IGNhc3QuIE9ubHkgb2JqZWN0cyBpbiB0aGlzIGdyb3VwIHdpbGwgYmUgYWZmZWN0ZWQgYnkgdGhpcyBjdXJzb3IuICovXG4gICAgY29sbGlzaW9uR3JvdXAgPSAxO1xuICAgIC8qKiAob3B0aW9uYWwpIE9iamVjdCB0aGF0IHZpc3VhbGl6ZXMgdGhlIGN1cnNvcidzIHJheS4gKi9cbiAgICBjdXJzb3JSYXlPYmplY3QgPSBudWxsO1xuICAgIC8qKiBBeGlzIGFsb25nIHdoaWNoIHRvIHNjYWxlIHRoZSBgY3Vyc29yUmF5T2JqZWN0YC4gKi9cbiAgICBjdXJzb3JSYXlTY2FsaW5nQXhpcyA9IDI7XG4gICAgLyoqIChvcHRpb25hbCkgT2JqZWN0IHRoYXQgdmlzdWFsaXplcyB0aGUgY3Vyc29yJ3MgaGl0IGxvY2F0aW9uLiAqL1xuICAgIGN1cnNvck9iamVjdCA9IG51bGw7XG4gICAgLyoqIEhhbmRlZG5lc3MgZm9yIFZSIGN1cnNvcnMgdG8gYWNjZXB0IHRyaWdnZXIgZXZlbnRzIG9ubHkgZnJvbSByZXNwZWN0aXZlIGNvbnRyb2xsZXIuICovXG4gICAgaGFuZGVkbmVzcyA9IDA7XG4gICAgLyoqIE1vZGUgZm9yIHJheWNhc3RpbmcsIHdoZXRoZXIgdG8gdXNlIFBoeXNYIG9yIHNpbXBsZSBjb2xsaXNpb24gY29tcG9uZW50cyAqL1xuICAgIHJheUNhc3RNb2RlID0gMDtcbiAgICAvKiogTWF4aW11bSBkaXN0YW5jZSBmb3IgdGhlIGN1cnNvcidzIHJheSBjYXN0LiAqL1xuICAgIG1heERpc3RhbmNlID0gMTAwO1xuICAgIC8qKiBXaGV0aGVyIHRvIHNldCB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBtb3VzZSBjdXJzb3Igb24gZGVza3RvcCAqL1xuICAgIHN0eWxlQ3Vyc29yID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBVc2UgV2ViWFIgaGl0LXRlc3QgaWYgYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogQXR0YWNoZXMgYSBoaXQtdGVzdC1sb2NhdGlvbiBjb21wb25lbnQgdG8gdGhlIGN1cnNvck9iamVjdCwgd2hpY2ggd2lsbCBiZSB1c2VkXG4gICAgICogYnkgdGhlIGN1cnNvciB0byBzZW5kIGV2ZW50cyB0byB0aGUgaGl0VGVzdFRhcmdldCB3aXRoIEhpdFRlc3RSZXN1bHQuXG4gICAgICovXG4gICAgdXNlV2ViWFJIaXRUZXN0ID0gZmFsc2U7XG4gICAgX29uVmlld3BvcnRSZXNpemUgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fdmlld0NvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogUHJvamVjdGlvbiBtYXRyaXggd2lsbCBjaGFuZ2UgaWYgdGhlIHZpZXdwb3J0IGlzIHJlc2l6ZWQsIHdoaWNoIHdpbGwgYWZmZWN0IHRoZVxuICAgICAgICAgKiBwcm9qZWN0aW9uIG1hdHJpeCBiZWNhdXNlIG9mIHRoZSBhc3BlY3QgcmF0aW8uICovXG4gICAgICAgIG1hdDQuaW52ZXJ0KHRoaXMuX3Byb2plY3Rpb25NYXRyaXgsIHRoaXMuX3ZpZXdDb21wb25lbnQucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5fY29sbGlzaW9uTWFzayA9IDEgPDwgdGhpcy5jb2xsaXNpb25Hcm91cDtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGVkbmVzcyA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbXAgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpZiAoIWlucHV0Q29tcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignY3Vyc29yIGNvbXBvbmVudCBvbiBvYmplY3QnLCB0aGlzLm9iamVjdC5uYW1lLCAnd2FzIGNvbmZpZ3VyZWQgd2l0aCBoYW5kZWRuZXNzIFwiaW5wdXQgY29tcG9uZW50XCIsICcgK1xuICAgICAgICAgICAgICAgICAgICAnYnV0IG9iamVjdCBoYXMgbm8gaW5wdXQgY29tcG9uZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gaW5wdXRDb21wLmhhbmRlZG5lc3MgfHwgJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXRDb21wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0JywgJ25vbmUnXVt0aGlzLmhhbmRlZG5lc3MgLSAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92aWV3Q29tcG9uZW50ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KFZpZXdDb21wb25lbnQpO1xuICAgICAgICBpZiAodGhpcy51c2VXZWJYUkhpdFRlc3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QgPSB0aGlzLmVuZ2luZS5zY2VuZS5hZGRPYmplY3QodGhpcy5vYmplY3QpO1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdExvY2F0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLl9oaXRUZXN0T2JqZWN0LmFkZENvbXBvbmVudChIaXRUZXN0TG9jYXRpb24sIHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVPYmplY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pID8/IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMuc2V0dXBWUkV2ZW50cy5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25SZXNpemUuYWRkKHRoaXMuX29uVmlld3BvcnRSZXNpemUpO1xuICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KHRydWUpO1xuICAgICAgICAvKiBJZiB0aGlzIG9iamVjdCBhbHNvIGhhcyBhIHZpZXcgY29tcG9uZW50LCB3ZSB3aWxsIGVuYWJsZSBpbnZlcnNlLXByb2plY3RlZCBtb3VzZSBjbGlja3MsXG4gICAgICAgICAqIG90aGVyd2lzZSBqdXN0IHVzZSB0aGUgb2JqZWN0cyB0cmFuc2Zvcm1hdGlvbiAqL1xuICAgICAgICBpZiAodGhpcy5fdmlld0NvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgICAgICBjb25zdCBvbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJNb3ZlID0gdGhpcy5vblBvaW50ZXJNb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJEb3duID0gdGhpcy5vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJVcCA9IHRoaXMub25Qb2ludGVyVXAuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvblBvaW50ZXJVcCk7XG4gICAgICAgICAgICB0aGlzLl9vbkRlYWN0aXZhdGVDYWxsYmFja3MucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93bik7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uVmlld3BvcnRSZXNpemUoKTtcbiAgICB9XG4gICAgX3NldEN1cnNvclJheVRyYW5zZm9ybShoaXRQb3NpdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3Vyc29yUmF5T2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5kaXN0KHRoaXMuX29yaWdpbiwgaGl0UG9zaXRpb24pO1xuICAgICAgICB0aGlzLmN1cnNvclJheU9iamVjdC5zZXRQb3NpdGlvbkxvY2FsKFswLjAsIDAuMCwgLWRpc3QgLyAyXSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvclJheVNjYWxpbmdBeGlzICE9IDQpIHtcbiAgICAgICAgICAgIC8qIFNjYWxlIG9ubHkgdGhlIHJlcXVlc3RlZCBheGlzLCByZWxhdGl2ZSB0byB0aGUgb3JpZ2luYWwgc2NhbGluZyAqL1xuICAgICAgICAgICAgdGVtcFZlYy5maWxsKDEpO1xuICAgICAgICAgICAgdGVtcFZlY1t0aGlzLmN1cnNvclJheVNjYWxpbmdBeGlzXSA9IGRpc3QgLyAyO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JSYXlPYmplY3Quc2V0U2NhbGluZ0xvY2FsKHRlbXBWZWMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXRDdXJzb3JWaXNpYmlsaXR5KHZpc2libGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSA9PSB2aXNpYmxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICBpZiAoIXRoaXMuY3Vyc29yT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3Quc2V0U2NhbGluZ1dvcmxkKHRoaXMuX2N1cnNvck9ialNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LmdldFNjYWxpbmdXb3JsZCh0aGlzLl9jdXJzb3JPYmpTY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvck9iamVjdC5zY2FsZUxvY2FsKFswLCAwLCAwXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvKiBJZiBpbiBWUiwgc2V0IHRoZSBjdXJzb3IgcmF5IGJhc2VkIG9uIG9iamVjdCB0cmFuc2Zvcm0gKi9cbiAgICAgICAgLyogU2luY2UgR29vZ2xlIENhcmRib2FyZCB0YXAgaXMgcmVnaXN0ZXJlZCBhcyBhclRvdWNoRG93biB3aXRob3V0IGEgZ2FtZXBhZCwgd2UgbmVlZCB0byBjaGVjayBmb3IgZ2FtZXBhZCBwcmVzZW5jZSAqL1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIgJiZcbiAgICAgICAgICAgIHRoaXMuX2FyVG91Y2hEb3duICYmXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCAmJlxuICAgICAgICAgICAgdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXNbMF0uaGFuZGVkbmVzcyA9PT0gJ25vbmUnICYmXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLmlucHV0U291cmNlc1swXS5nYW1lcGFkKSB7XG4gICAgICAgICAgICAvKiBXZWJYUiBBUiBpbnB1dCAqL1xuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzWzBdLmdhbWVwYWQuYXhlcztcbiAgICAgICAgICAgIC8qIFNjcmVlbnNwYWNlIFkgaXMgaW52ZXJ0ZWQgKi9cbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IHBbMF07XG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMV0gPSAtcFsxXTtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsyXSA9IC0xLjA7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtQW5kUHJvamVjdERpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZW5naW5lLnhyICYmIHRoaXMuX2lucHV0ICYmIHRoaXMuX2lucHV0LnhySW5wdXRTb3VyY2UpIHtcbiAgICAgICAgICAgIC8qIFdlYlhSIFZSIGlucHV0ICovXG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMF0gPSAwO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzFdID0gMDtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsyXSA9IC0xLjA7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtVG9EaXJlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl92aWV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAvKiBBcHBseSBwb3RlbnRpYWxseSBjaGFuZ2VkIHRyYW5zZm9ybSB0byBsYXN0IHN0b3JlZCBwb2ludGVyXG4gICAgICAgICAgICAgKiBwb3NpdGlvbiAqL1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJheUNhc3QobnVsbCwgdGhpcy5lbmdpbmUueHI/LmZyYW1lKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob3ZlcmluZ09iamVjdCAmJlxuICAgICAgICAgICAgICAgICh0aGlzLmN1cnNvclBvc1swXSAhPSAwIHx8IHRoaXMuY3Vyc29yUG9zWzFdICE9IDAgfHwgdGhpcy5jdXJzb3JQb3NbMl0gIT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LnNldFBvc2l0aW9uV29ybGQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclJheVRyYW5zZm9ybSh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBSZXR1cm5zIHRoZSBob3ZlcmVkIGN1cnNvciB0YXJnZXQsIGlmIGF2YWlsYWJsZSAqL1xuICAgIG5vdGlmeShldmVudCwgb3JpZ2luYWxFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmhvdmVyaW5nT2JqZWN0O1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBjdXJzb3JUYXJnZXQgPSB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGN1cnNvclRhcmdldClcbiAgICAgICAgICAgICAgICBjdXJzb3JUYXJnZXRbZXZlbnRdLm5vdGlmeSh0YXJnZXQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsVGFyZ2V0W2V2ZW50XS5ub3RpZnkodGFyZ2V0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaG92ZXJCZWhhdmlvdXIocmF5SGl0LCBoaXRUZXN0UmVzdWx0LCBkb0NsaWNrLCBvcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgIC8qIE9sZCBBUEkgdmVyc2lvbiBkb2VzIG5vdCByZXR1cm4gbnVsbCBmb3Igb2JqZWN0c1swXSBpZiBubyBoaXQgKi9cbiAgICAgICAgY29uc3QgaGl0ID0gIXRoaXMuaG92ZXJpbmdSZWFsaXR5ICYmIHJheUhpdC5oaXRDb3VudCA+IDAgPyByYXlIaXQub2JqZWN0c1swXSA6IG51bGw7XG4gICAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ob3ZlcmluZ09iamVjdCB8fCAhdGhpcy5ob3ZlcmluZ09iamVjdC5lcXVhbHMoaGl0KSkge1xuICAgICAgICAgICAgICAgIC8qIFVuaG92ZXIgcHJldmlvdXMsIGlmIGV4aXN0cyAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogSG92ZXIgbmV3IG9iamVjdCAqL1xuICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJpbmdPYmplY3QgPSBoaXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdFRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGVDdXJzb3IpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uSG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAvKiBQcmV2aW91c2x5IGhvdmVyaW5nIG9iamVjdCwgbm93IGhvdmVyaW5nIG5vdGhpbmcgKi9cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaG92ZXJpbmdPYmplY3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHlsZUN1cnNvcilcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAvKiBvbkRvd24vb25VcCBmb3Igb2JqZWN0ICovXG4gICAgICAgICAgICBpZiAodGhpcy5faXNEb3duICE9PSB0aGlzLl9sYXN0SXNEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5faXNEb3duID8gJ29uRG93bicgOiAnb25VcCcsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogb25DbGljayBmb3Igb2JqZWN0ICovXG4gICAgICAgICAgICBpZiAoZG9DbGljaylcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25DbGljaycsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICAvKiBvbkRvd24vb25VcCBmb3IgaGl0IHRlc3QgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rvd24gIT09IHRoaXMuX2xhc3RJc0Rvd24pIHtcbiAgICAgICAgICAgICAgICAodGhpcy5faXNEb3duID8gdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uRG93biA6IHRoaXMuaGl0VGVzdFRhcmdldC5vblVwKS5ub3RpZnkoaGl0VGVzdFJlc3VsdCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogb25DbGljayBmb3IgaGl0IHRlc3QgKi9cbiAgICAgICAgICAgIGlmIChkb0NsaWNrKVxuICAgICAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbkNsaWNrLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogb25Nb3ZlICovXG4gICAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0ZW1wVmVjLCB0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wVmVjLnNldCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldCwgdGVtcFZlYykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25Nb3ZlJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LnNldCh0ZW1wVmVjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyaW5nUmVhbGl0eSkge1xuICAgICAgICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQsIHRoaXMuY3Vyc29yUG9zKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbk1vdmUubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQuc2V0KHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldC5zZXQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xhc3RJc0Rvd24gPSB0aGlzLl9pc0Rvd247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBvbiBzZXNzaW9uIG9iamVjdFxuICAgICAqIEBwYXJhbSBzIFdlYlhSIHNlc3Npb25cbiAgICAgKlxuICAgICAqIFNldHMgdXAgJ3NlbGVjdCcgYW5kICdlbmQnIGV2ZW50cy5cbiAgICAgKi9cbiAgICBzZXR1cFZSRXZlbnRzKHMpIHtcbiAgICAgICAgaWYgKCFzKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignc2V0dXBWUkV2ZW50cyBjYWxsZWQgd2l0aG91dCBhIHZhbGlkIHNlc3Npb24nKTtcbiAgICAgICAgLyogQmVjYXVzZSB3ZSByZW1vdmUgdGhlIGNhbGxiYWNrIGluIC5hY3RpdmUgYW5kIGFub3RoZXIgY29tcG9uZW50IG1pZ2h0XG4gICAgICAgICAqIGRlYWN0aXZhdGUgdGhlIGN1cnNvciBkdXJpbmcgb25YUlNlc3Npb25TdGFydCwgd2UgbWFrZSBzdXJlIHRoZSBjdXJzb3JcbiAgICAgICAgICogcmVhbGx5IGlzIGFjdGl2ZSB3aGVuIHdlIHJ1biB0aGlzICovXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8qIElmIGluIFZSLCBvbmUtdGltZSBiaW5kIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICBjb25zdCBvblNlbGVjdCA9IHRoaXMub25TZWxlY3QuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3QnLCBvblNlbGVjdCk7XG4gICAgICAgIGNvbnN0IG9uU2VsZWN0U3RhcnQgPSB0aGlzLm9uU2VsZWN0U3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIG9uU2VsZWN0U3RhcnQpO1xuICAgICAgICBjb25zdCBvblNlbGVjdEVuZCA9IHRoaXMub25TZWxlY3RFbmQuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RlbmQnLCBvblNlbGVjdEVuZCk7XG4gICAgICAgIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3QnLCBvblNlbGVjdCk7XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0Jywgb25TZWxlY3RTdGFydCk7XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsIG9uU2VsZWN0RW5kKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIEFmdGVyIEFSIHNlc3Npb24gd2FzIGVudGVyZWQsIHRoZSBwcm9qZWN0aW9uIG1hdHJpeCBjaGFuZ2VkICovXG4gICAgICAgIHRoaXMuX29uVmlld3BvcnRSZXNpemUoKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25SZXNpemUucmVtb3ZlKHRoaXMuX29uVmlld3BvcnRSZXNpemUpO1xuICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpXG4gICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25VbmhvdmVyJywgbnVsbCk7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvclJheU9iamVjdClcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUmF5T2JqZWN0LnNldFNjYWxpbmdMb2NhbChaRVJPKTtcbiAgICAgICAgLyogRW5zdXJlIGFsbCBldmVudCBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgKi9cbiAgICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcylcbiAgICAgICAgICAgIGYoKTtcbiAgICAgICAgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIG9uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdD8uZGVzdHJveSgpO1xuICAgIH1cbiAgICAvKiogJ3NlbGVjdCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdChlKSB7XG4gICAgICAgIGlmIChlLmlucHV0U291cmNlLmhhbmRlZG5lc3MgIT0gdGhpcy5oYW5kZWRuZXNzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKiAnc2VsZWN0c3RhcnQnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25TZWxlY3RTdGFydChlKSB7XG4gICAgICAgIHRoaXMuX2FyVG91Y2hEb3duID0gdHJ1ZTtcbiAgICAgICAgaWYgKGUuaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyA9PSB0aGlzLmhhbmRlZG5lc3MpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRG93biA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqICdzZWxlY3RlbmQnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25TZWxlY3RFbmQoZSkge1xuICAgICAgICB0aGlzLl9hclRvdWNoRG93biA9IGZhbHNlO1xuICAgICAgICBpZiAoZS5pbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgdGhpcy5faXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqICdwb2ludGVybW92ZScgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblBvaW50ZXJNb3ZlKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgKi9cbiAgICAgICAgaWYgKCFlLmlzUHJpbWFyeSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVNb3VzZVBvcyhlKTtcbiAgICAgICAgdGhpcy5yYXlDYXN0KGUsIG51bGwpO1xuICAgIH1cbiAgICAvKiogJ2NsaWNrJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uQ2xpY2soZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgbnVsbCwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKiAncG9pbnRlcmRvd24nIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25Qb2ludGVyRG93bihlKSB7XG4gICAgICAgIC8qIERvbid0IGNhcmUgYWJvdXQgc2Vjb25kYXJ5IHBvaW50ZXJzIG9yIG5vbi1sZWZ0IGNsaWNrcyAqL1xuICAgICAgICBpZiAoIWUuaXNQcmltYXJ5IHx8IGUuYnV0dG9uICE9PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLl9pc0Rvd24gPSB0cnVlO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSk7XG4gICAgfVxuICAgIC8qKiAncG9pbnRlcnVwJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uUG9pbnRlclVwKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgb3Igbm9uLWxlZnQgY2xpY2tzICovXG4gICAgICAgIGlmICghZS5pc1ByaW1hcnkgfHwgZS5idXR0b24gIT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMuX2lzRG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBtb3VzZSBwb3NpdGlvbiBpbiBub24tVlIgbW9kZSBhbmQgcmF5Y2FzdCBmb3IgbmV3IHBvc2l0aW9uXG4gICAgICogQHJldHVybnMgQHJlZiBXTC5SYXlIaXQgZm9yIG5ldyBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICB1cGRhdGVNb3VzZVBvcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQb2ludGVyUG9zWzBdID0gZS5jbGllbnRYO1xuICAgICAgICB0aGlzLl9sYXN0UG9pbnRlclBvc1sxXSA9IGUuY2xpZW50WTtcbiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgdXBkYXRlRGlyZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmVuZ2luZS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIC8qIEdldCBkaXJlY3Rpb24gaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBzcGFjZSBmcm9tIG1vdXNlIHBvc2l0aW9uICovXG4gICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLl9sYXN0UG9pbnRlclBvc1swXSAvIGJvdW5kcy53aWR0aDtcbiAgICAgICAgY29uc3QgdG9wID0gdGhpcy5fbGFzdFBvaW50ZXJQb3NbMV0gLyBib3VuZHMuaGVpZ2h0O1xuICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMF0gPSBsZWZ0ICogMiAtIDE7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvblsxXSA9IC10b3AgKiAyICsgMTtcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zZm9ybUFuZFByb2plY3REaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgYXBwbHlUcmFuc2Zvcm1BbmRQcm9qZWN0RGlyZWN0aW9uKCkge1xuICAgICAgICAvKiBSZXZlcnNlLXByb2plY3QgdGhlIGRpcmVjdGlvbiBpbnRvIHZpZXcgc3BhY2UgKi9cbiAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9wcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtVG9EaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNmb3JtVmVjdG9yV29ybGQodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX29yaWdpbik7XG4gICAgfVxuICAgIHJheUNhc3Qob3JpZ2luYWxFdmVudCwgZnJhbWUgPSBudWxsLCBkb0NsaWNrID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgcmF5SGl0ID0gdGhpcy5yYXlDYXN0TW9kZSA9PSAwXG4gICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3QodGhpcy5fb3JpZ2luLCB0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2NvbGxpc2lvbk1hc2spXG4gICAgICAgICAgICA6IHRoaXMuZW5naW5lLnBoeXNpY3MucmF5Q2FzdCh0aGlzLl9vcmlnaW4sIHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fY29sbGlzaW9uTWFzaywgdGhpcy5tYXhEaXN0YW5jZSk7XG4gICAgICAgIGxldCBoaXRSZXN1bHREaXN0YW5jZSA9IEluZmluaXR5O1xuICAgICAgICBsZXQgaGl0VGVzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9oaXRUZXN0TG9jYXRpb24/LnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICBoaXRSZXN1bHREaXN0YW5jZSA9IHZlYzMuZGlzdGFuY2UodGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKSwgdGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgaGl0VGVzdFJlc3VsdCA9IHRoaXMuX2hpdFRlc3RMb2NhdGlvbj8uZ2V0SGl0VGVzdFJlc3VsdHMoZnJhbWUpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBob3ZlcmluZ1JlYWxpdHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHJheUhpdC5oaXRDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSByYXlIaXQuZGlzdGFuY2VzWzBdO1xuICAgICAgICAgICAgaWYgKGhpdFJlc3VsdERpc3RhbmNlID49IGQpIHtcbiAgICAgICAgICAgICAgICAvKiBPdmVycmlkZSBjdXJzb3JQb3Mgc2V0IGJ5IGhpdCB0ZXN0IGxvY2F0aW9uICovXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3Muc2V0KHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG92ZXJpbmdSZWFsaXR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoaXRSZXN1bHREaXN0YW5jZSA8IEluZmluaXR5KSB7XG4gICAgICAgICAgICAvKiBjdXJzb3JQb3MgYWxyZWFkeSBzZXQgKi9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUG9zLmZpbGwoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdmVyaW5nUmVhbGl0eSAmJiAhdGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbkhvdmVyLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaG92ZXJpbmdSZWFsaXR5ICYmIHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICB0aGlzLmhpdFRlc3RUYXJnZXQub25VbmhvdmVyLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvdmVyaW5nUmVhbGl0eSA9IGhvdmVyaW5nUmVhbGl0eTtcbiAgICAgICAgdGhpcy5ob3ZlckJlaGF2aW91cihyYXlIaXQsIGhpdFRlc3RSZXN1bHQsIGRvQ2xpY2ssIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICByZXR1cm4gcmF5SGl0O1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCgxKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjb2xsaXNpb25Hcm91cFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwiY3Vyc29yUmF5T2JqZWN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsneCcsICd5JywgJ3onLCAnbm9uZSddLCAneicpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImN1cnNvclJheVNjYWxpbmdBeGlzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjdXJzb3JPYmplY3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWydpbnB1dCBjb21wb25lbnQnLCAnbGVmdCcsICdyaWdodCcsICdub25lJ10sICdpbnB1dCBjb21wb25lbnQnKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnY29sbGlzaW9uJywgJ3BoeXN4J10sICdjb2xsaXNpb24nKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJyYXlDYXN0TW9kZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMTAwKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJtYXhEaXN0YW5jZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJzdHlsZUN1cnNvclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwidXNlV2ViWFJIaXRUZXN0XCIsIHZvaWQgMCk7XG5leHBvcnQgeyBDdXJzb3IgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBxdWF0MiB9IGZyb20gJ2dsLW1hdHJpeCc7XG4vKipcbiAqIFByaW50cyBzb21lIGxpbWl0ZWQgZGVidWcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9iamVjdC5cbiAqXG4gKiBJbmZvcm1hdGlvbiBjb25zaXN0cyBvZjogVGhpcyBvYmplY3QncyBuYW1lLCBhbiBvYmplY3QgcGFyYW1ldGVyJ3MgbmFtZSxcbiAqIHRoZSBvYmplY3QncyB3b3JsZCB0cmFuc2xhdGlvbiwgd29ybGQgdHJhbnNmb3JtIGFuZCBsb2NhbCB0cmFuc2Zvcm0uXG4gKlxuICogTWFpbmx5IHVzZWQgYnkgZW5naW5lIGRldmVsb3BlcnMgZm9yIGRlYnVnIHB1cnBvc2VzIG9yIGFzIGV4YW1wbGUgY29kZS5cbiAqL1xuY2xhc3MgRGVidWdPYmplY3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdkZWJ1Zy1vYmplY3QnO1xuICAgIC8qKiBBIHNlY29uZCBvYmplY3QgdG8gcHJpbnQgdGhlIG5hbWUgb2YgKi9cbiAgICBvYmogPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBsZXQgb3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgcXVhdDIuZ2V0VHJhbnNsYXRpb24ob3JpZ2luLCB0aGlzLm9iamVjdC50cmFuc2Zvcm1Xb3JsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyBvYmplY3Q6JywgdGhpcy5vYmplY3QubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPdGhlciBvYmplY3Q6JywgdGhpcy5vYmo/Lm5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZygnXFx0dHJhbnNsYXRpb24nLCBvcmlnaW4pO1xuICAgICAgICBjb25zb2xlLmxvZygnXFx0dHJhbnNmb3JtV29ybGQnLCB0aGlzLm9iamVjdC50cmFuc2Zvcm1Xb3JsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2Zvcm1Mb2NhbCcsIHRoaXMub2JqZWN0LnRyYW5zZm9ybUxvY2FsKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgRGVidWdPYmplY3QucHJvdG90eXBlLCBcIm9ialwiLCB2b2lkIDApO1xuZXhwb3J0IHsgRGVidWdPYmplY3QgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBGdW5jdGlvbiB0byBjb252ZXJ0IGEgRXVsZXIgaW4gWVhaIG9yZGVyIHRvIGEgcXVhdGVybmlvblxuICovXG5mdW5jdGlvbiBxdWF0RnJvbUV1bGVyWVhaKG91dCwgeCwgeSwgeikge1xuICAgIGNvbnN0IGMxID0gTWF0aC5jb3MoeCAvIDIpO1xuICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpO1xuICAgIGNvbnN0IGMzID0gTWF0aC5jb3MoeiAvIDIpO1xuICAgIGNvbnN0IHMxID0gTWF0aC5zaW4oeCAvIDIpO1xuICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpO1xuICAgIGNvbnN0IHMzID0gTWF0aC5zaW4oeiAvIDIpO1xuICAgIG91dFswXSA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICBvdXRbMV0gPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgb3V0WzJdID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgIG91dFszXSA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbn1cbi8qKlxuICogUmV0cmlldmUgZGV2aWNlIG9yaWVudGF0aW9uIGZyb20gYSBtb2JpbGUgZGV2aWNlIGFuZCBzZXQgdGhlIG9iamVjdCdzXG4gKiBvcmllbnRhdGlvbiBhY2NvcmRpbmdseS5cbiAqXG4gKiBVc2VmdWwgZm9yIG1hZ2ljIHdpbmRvdyBleHBlcmllbmNlcy5cbiAqL1xuY2xhc3MgRGV2aWNlT3JpZW50YXRpb25Mb29rIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnZGV2aWNlLW9yaWVudGF0aW9uLWxvb2snO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMucm90YXRpb25YID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvblkgPSAwO1xuICAgICAgICB0aGlzLmxhc3RDbGllbnRYID0gLTE7XG4gICAgICAgIHRoaXMubGFzdENsaWVudFkgPSAtMTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgLyogSW5pdGlhbGl6ZSBkZXZpY2Ugb3JpZW50YXRpb24gd2l0aCBJZGVudGl0eSBRdWF0ZXJuaW9uICovXG4gICAgICAgIHRoaXMuZGV2aWNlT3JpZW50YXRpb24gPSBbMCwgMCwgMCwgMV07XG4gICAgICAgIHRoaXMuc2NyZWVuT3JpZW50YXRpb24gPSB3aW5kb3cuaW5uZXJIZWlnaHQgPiB3aW5kb3cuaW5uZXJXaWR0aCA/IDAgOiA5MDtcbiAgICAgICAgdGhpcy5fb3JpZ2luID0gWzAsIDAsIDBdO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgbGV0IGFscGhhID0gZS5hbHBoYSB8fCAwO1xuICAgICAgICAgICAgbGV0IGJldGEgPSBlLmJldGEgfHwgMDtcbiAgICAgICAgICAgIGxldCBnYW1tYSA9IGUuZ2FtbWEgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IHRvUmFkID0gTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgICAgIHF1YXRGcm9tRXVsZXJZWFoodGhpcy5kZXZpY2VPcmllbnRhdGlvbiwgYmV0YSAqIHRvUmFkLCBhbHBoYSAqIHRvUmFkLCAtZ2FtbWEgKiB0b1JhZCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmVlbk9yaWVudGF0aW9uID0gd2luZG93Lm9yaWVudGF0aW9uIHx8IDA7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8qIERvbid0IHVzZSBkZXZpY2Ugb3JpZW50YXRpb24gaW4gVlIgKi9cbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLnhyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbkxvY2FsKHRoaXMuX29yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0VHJhbnNmb3JtKCk7XG4gICAgICAgIGlmICh0aGlzLnNjcmVlbk9yaWVudGF0aW9uICE9IDApIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZURlZyhbMCwgMCwgLTFdLCB0aGlzLnNjcmVlbk9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGUoWy1NYXRoLnNxcnQoMC41KSwgMCwgMCwgTWF0aC5zcXJ0KDAuNSldKTtcbiAgICAgICAgdGhpcy5vYmplY3Qucm90YXRlKHRoaXMuZGV2aWNlT3JpZW50YXRpb24pO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGUodGhpcy5fb3JpZ2luKTtcbiAgICB9XG59XG5leHBvcnQgeyBEZXZpY2VPcmllbnRhdGlvbkxvb2sgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBFbmFibGVzIGludGVyYWN0aW9uIHdpdGggY3Vyc29yLXRhcmdldHMgdGhyb3VnaCBjb2xsaXNpb24gb3ZlcmxhcHMsXG4gKiBlLmcuIG9uIHRoZSB0aXAgb2YgYSBmaW5nZXIgb24gYSB0cmFja2VkIGhhbmQuXG4gKlxuICogKipSZXF1aXJlbWVudHM6KipcbiAqICAtIEEgY29sbGlzaW9uIGNvbXBvbmVudCAodXN1YWxseSBhIHNwaGVyZSB3aXRoIGAwLjA1YCByYWRpdXMpIG9uIHRoZSBzYW1lIG9iamVjdFxuICpcbiAqIEBzaW5jZSAwLjguNVxuICovXG5jbGFzcyBGaW5nZXJDdXJzb3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdmaW5nZXItY3Vyc29yJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHt9O1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMubGFzdFRhcmdldCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnRpcCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnY29sbGlzaW9uJyk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxhcHMgPSB0aGlzLnRpcC5xdWVyeU92ZXJsYXBzKCk7XG4gICAgICAgIGxldCBvdmVybGFwRm91bmQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG92ZXJsYXBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBvID0gb3ZlcmxhcHNbaV0ub2JqZWN0O1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gby5nZXRDb21wb25lbnQoJ2N1cnNvci10YXJnZXQnKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5lcXVhbHModGhpcy5sYXN0VGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQub25Ib3ZlcihvLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm9uQ2xpY2sobywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG92ZXJsYXBGb3VuZCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW92ZXJsYXBGb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGFzdFRhcmdldClcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RUYXJnZXQub25VbmhvdmVyKHRoaXMubGFzdFRhcmdldC5vYmplY3QsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFRhcmdldCA9IG92ZXJsYXBGb3VuZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IEZpbmdlckN1cnNvciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEFwcGxpZXMgW2ZpeGVkIGZvdmVhdGlvbl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYnhybGF5ZXJzLTEvI2RvbS14cmNvbXBvc2l0aW9ubGF5ZXItZml4ZWRmb3ZlYXRpb24pXG4gKiBvbmNlIGEgV2ViWFIgc2Vzc2lvbiBpcyBzdGFydGVkXG4gKlxuICogRml4ZWQgZm92ZWF0aW9uIHJlZHVjZXMgc2hhZGluZyBjb3N0IGF0IHRoZSBwZXJpcGhlcnkgYnkgcmVuZGVyaW5nIGF0IGxvd2VyIHJlc29sdXRpb25zIGF0IHRoZVxuICogZWRnZXMgb2YgdGhlIHVzZXJzIHZpc2lvbi5cbiAqL1xuY2xhc3MgRml4ZWRGb3ZlYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdmaXhlZC1mb3ZlYXRpb24nO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogQW1vdW50IHRvIGFwcGx5IGZyb20gMCAobm9uZSkgdG8gMSAoZnVsbCkgKi9cbiAgICAgICAgZml4ZWRGb3ZlYXRpb246IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC41IH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXRGaXhlZEZvdmVhdGlvbi5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIHNldEZpeGVkRm92ZWF0aW9uKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS54ci5iYXNlTGF5ZXIuZml4ZWRGb3ZlYXRpb24gPSB0aGlzLmZpeGVkRm92ZWF0aW9uO1xuICAgIH1cbn1cbmV4cG9ydCB7IEZpeGVkRm92ZWF0aW9uIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBNZXNoQ29tcG9uZW50LCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMsIHF1YXQgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsIH0gZnJvbSAnLi91dGlscy93ZWJ4ci5qcyc7XG5jb25zdCBPUkRFUkVEX0pPSU5UUyA9IFtcbiAgICAnd3Jpc3QnLFxuICAgICd0aHVtYi1tZXRhY2FycGFsJyxcbiAgICAndGh1bWItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3RodW1iLXBoYWxhbngtZGlzdGFsJyxcbiAgICAndGh1bWItdGlwJyxcbiAgICAnaW5kZXgtZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdpbmRleC1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ2luZGV4LWZpbmdlci10aXAnLFxuICAgICdtaWRkbGUtZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtcHJveGltYWwnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAnbWlkZGxlLWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ21pZGRsZS1maW5nZXItdGlwJyxcbiAgICAncmluZy1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtcHJveGltYWwnLFxuICAgICdyaW5nLWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAncmluZy1maW5nZXItdGlwJyxcbiAgICAncGlua3ktZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdwaW5reS1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci10aXAnLFxuXTtcbmNvbnN0IGludlRyYW5zbGF0aW9uID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IGludlJvdGF0aW9uID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBWZWMwID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IHRlbXBWZWMxID0gdmVjMy5jcmVhdGUoKTtcbi8qKlxuICogRWFzeSBoYW5kIHRyYWNraW5nIHRocm91Z2ggdGhlIFdlYlhSIERldmljZSBBUElcbiAqIFtcIkhhbmQgSW5wdXRcIiBBUEldKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHItaGFuZC1pbnB1dC8pLlxuICpcbiAqIEFsbG93cyBkaXNwbGF5aW5nIGhhbmRzIGVpdGhlciBhcyBzcGhlcmUtam9pbnRzIG9yIHNraW5uZWQgbWVzaC5cbiAqXG4gKiBUbyByZWFjdCB0byBncmFiYmluZywgdXNlIGB0aGlzLmlzR3JhYmJpbmcoKWAuIEZvciBvdGhlciBnZXN0dXJlcywgcmVmZXJcbiAqIHRvIGB0aGlzLmpvaW50c2AgLSBhbiBhcnJheSBvZiBbV0wuT2JqZWN0XSgvanNhcGkvb2JqZWN0KSBhbmQgdXNlIHRoZSBqb2ludFxuICogaW5kaWNlcyBsaXN0ZWQgW2luIHRoZSBXZWJYUiBIYW5kIElucHV0IHNwZWNpZmljYXRpb25dKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHItaGFuZC1pbnB1dC8jc2tlbGV0b24tam9pbnRzLXNlY3Rpb24pLlxuICpcbiAqIEl0IGlzIG9mdGVuIGRlc2lyZWQgdG8gdXNlIGVpdGhlciBoYW5kIHRyYWNraW5nIG9yIGNvbnRyb2xsZXJzLCBub3QgYm90aC5cbiAqIFRoaXMgY29tcG9uZW50IHByb3ZpZGVzIGBkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZWAgdG8gaGlkZSB0aGUgaGFuZFxuICogdHJhY2tpbmcgdmlzdWFsaXphdGlvbiBpZiBubyBwb3NlIGlzIGF2YWlsYWJsZSBhbmQgYGNvbnRyb2xsZXJUb0RlYWN0aXZhdGVgXG4gKiBmb3IgZGlzYWJsaW5nIGFub3RoZXIgb2JqZWN0IG9uY2UgYSBoYW5kIHRyYWNraW5nIHBvc2UgKmlzKiBhdmFpbGFibGUuXG4gKiBPdXRzaWRlIG9mIFhSIHNlc3Npb25zLCB0cmFja2luZyBvciBjb250cm9sbGVycyBhcmUgbmVpdGhlciBlbmFibGVkIG5vciBkaXNhYmxlZFxuICogdG8gcGxheSB3ZWxsIHdpdGggdGhlIFt2ci1tb2RlLWFjdGl2ZS1zd2l0Y2hdKCN2ci1tb2RlLWFjdGl2ZS1zd2l0Y2gpIGNvbXBvbmVudC5cbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogIC0gVG8gdXNlIGhhbmQtdHJhY2tpbmcsIGVuYWJsZSBcImpvaW50IHRyYWNraW5nXCIgaW4gYGNocm9tZTovL2ZsYWdzYCBvblxuICogICAgT2N1bHVzIEJyb3dzZXIgZm9yIE9jdWx1cyBRdWVzdC9PY3VsdXMgUXVlc3QgMi5cbiAqXG4gKiBTZWUgW0hhbmQgVHJhY2tpbmcgRXhhbXBsZV0oL3Nob3djYXNlL2hhbmQtdHJhY2tpbmcpLlxuICovXG5jbGFzcyBIYW5kVHJhY2tpbmcgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoYW5kLXRyYWNraW5nJztcbiAgICAvKiogSGFuZGVkbmVzcyBkZXRlcm1pbmluZyB3aGV0aGVyIHRvIHJlY2VpdmUgdHJhY2tpbmcgaW5wdXQgZnJvbSByaWdodCBvciBsZWZ0IGhhbmQgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKiogKG9wdGlvbmFsKSBNZXNoIHRvIHVzZSB0byB2aXN1YWxpemUgam9pbnRzICovXG4gICAgam9pbnRNZXNoID0gbnVsbDtcbiAgICAvKiogTWF0ZXJpYWwgdG8gdXNlIGZvciBkaXNwbGF5LiBBcHBsaWVkIHRvIGVpdGhlciB0aGUgc3Bhd25lZCBza2lubmVkIG1lc2ggb3IgdGhlIGpvaW50IHNwaGVyZXMuICovXG4gICAgam9pbnRNYXRlcmlhbCA9IG51bGw7XG4gICAgLyoqIChvcHRpb25hbCkgU2tpbiB0byBhcHBseSB0cmFja2VkIGpvaW50IHBvc2VzIHRvLiBJZiBub3QgcHJlc2VudCxcbiAgICAgKiBqb2ludCBzcGhlcmVzIHdpbGwgYmUgdXNlZCBmb3IgZGlzcGxheSBpbnN0ZWFkLiAqL1xuICAgIGhhbmRTa2luID0gbnVsbDtcbiAgICAvKiogRGVhY3RpdmF0ZSBjaGlsZHJlbiBpZiBubyBwb3NlIHdhcyB0cmFja2VkICovXG4gICAgZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UgPSB0cnVlO1xuICAgIC8qKiBDb250cm9sbGVyIG9iamVjdHMgdG8gYWN0aXZhdGUgaW5jbHVkaW5nIGNoaWxkcmVuIGlmIG5vIHBvc2UgaXMgYXZhaWxhYmxlICovXG4gICAgY29udHJvbGxlclRvRGVhY3RpdmF0ZSA9IG51bGw7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzXTtcbiAgICB9XG4gICAgam9pbnRzID0ge307XG4gICAgc2Vzc2lvbiA9IG51bGw7XG4gICAgLyogV2hldGhlciBsYXN0IHVwZGF0ZSBoYWQgYSBoYW5kIHBvc2UgKi9cbiAgICBoYXNQb3NlID0gZmFsc2U7XG4gICAgX2NoaWxkcmVuQWN0aXZlID0gdHJ1ZTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCEoJ1hSSGFuZCcgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXZWJYUiBIYW5kIFRyYWNraW5nIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLicpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYW5kU2tpbikge1xuICAgICAgICAgICAgY29uc3Qgc2tpbiA9IHRoaXMuaGFuZFNraW47XG4gICAgICAgICAgICBjb25zdCBqb2ludElkcyA9IHNraW4uam9pbnRJZHM7XG4gICAgICAgICAgICAvKiBNYXAgdGhlIHdyaXN0ICovXG4gICAgICAgICAgICB0aGlzLmpvaW50c1tPUkRFUkVEX0pPSU5UU1swXV0gPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGpvaW50SWRzWzBdKTtcbiAgICAgICAgICAgIC8qIEluZGV4IGluIE9SREVSRURfSk9JTlRTIHRoYXQgd2UgYXJlIG1hcHBpbmcgdG8gb3VyIGpvaW50cyAqL1xuICAgICAgICAgICAgLyogU2tpcCB0aHVtYjAgam9pbnQsIHN0YXJ0IGF0IHRodW1iMSAqL1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBqb2ludElkcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50ID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChqb2ludElkc1tqXSk7XG4gICAgICAgICAgICAgICAgLyogdGlwIGpvaW50cyBhcmUgb25seSBuZWVkZWQgZm9yIGpvaW50IHJlbmRlcmluZywgc28gd2Ugc2tpcCB0aG9zZSB3aGlsZSBtYXBwaW5nICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbam9pbnQubmFtZV0gPSBqb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIElmIHdlIGhhdmUgYSBoYW5kIHNraW4sIG5vIG5lZWQgdG8gc3Bhd24gdGhlIGpvaW50cy1iYXNlZCBvbmUgKi9cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiBTcGF3biBqb2ludHMgKi9cbiAgICAgICAgY29uc3Qgam9pbnRPYmplY3RzID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0cyhPUkRFUkVEX0pPSU5UUy5sZW5ndGgsIHRoaXMub2JqZWN0LCBPUkRFUkVEX0pPSU5UUy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBjb25zdCBqb2ludCA9IGpvaW50T2JqZWN0c1tqXTtcbiAgICAgICAgICAgIGpvaW50LmFkZENvbXBvbmVudChNZXNoQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgbWVzaDogdGhpcy5qb2ludE1lc2gsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuam9pbnRNYXRlcmlhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5qb2ludHNbT1JERVJFRF9KT0lOVFNbal1dID0gam9pbnQ7XG4gICAgICAgICAgICBqb2ludC5uYW1lID0gT1JERVJFRF9KT0lOVFNbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuaGFzUG9zZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFNvdXJjZSA9IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXRTb3VyY2U/LmhhbmQgfHwgaW5wdXRTb3VyY2U/LmhhbmRlZG5lc3MgIT0gdGhpcy5oYW5kZWRuZXNzKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB3cmlzdFNwYWNlID0gaW5wdXRTb3VyY2UuaGFuZC5nZXQoJ3dyaXN0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHdyaXN0U3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldEpvaW50UG9zZSh3cmlzdFNwYWNlLCB0aGlzLmVuZ2luZS54ci5jdXJyZW50UmVmZXJlbmNlU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0Um90YXRpb25Mb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgcXVhdC5jb25qdWdhdGUoaW52Um90YXRpb24sIGludlJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbkxvY2FsKGludlRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSBpcyBhIGJvbmUgJ3dyaXN0JywgYnV0IGl0IGp1c3Qgc2l0cyBvbiB0aGUgcm9vdFxuICAgICAgICAgICAgICAgICAqIG9iamVjdC4gSXQgY291bGQgaGF2ZSBhbiBpbml0aWFsIHRyYW5zZm9ybSB3ZSB3YW50IHRvXG4gICAgICAgICAgICAgICAgICogY2xlYXIgZm9yIHNraW5uaW5nLCB0aG91Z2guICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbJ3dyaXN0J10ucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICAvKiBXcmlzdCBpcyBhbHJlYWR5IGhhbmRsZWQsIHNvIHN0YXJ0IGF0IDEgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50TmFtZSA9IE9SREVSRURfSk9JTlRTW2pdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2ludCA9IHRoaXMuam9pbnRzW2pvaW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgham9pbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpvaW50UG9zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50U3BhY2UgPSBpbnB1dFNvdXJjZS5oYW5kLmdldChqb2ludE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoam9pbnRTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlID0gdGhpcy5lbmdpbmUueHIuZnJhbWUuZ2V0Sm9pbnRQb3NlKGpvaW50U3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50UG9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNQb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQudHJhbnNsYXRlTG9jYWwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueCAtIGludlRyYW5zbGF0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueSAtIGludlRyYW5zbGF0aW9uWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueiAtIGludlRyYW5zbGF0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVMb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVPYmplY3QoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24ueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLm9yaWVudGF0aW9uLnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlLnRyYW5zZm9ybS5vcmllbnRhdGlvbi56LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24udyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRTa2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTGFzdCBqb2ludCByYWRpdXMgb2YgZWFjaCBmaW5nZXIgaXMgbnVsbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBqb2ludFBvc2UucmFkaXVzIHx8IDAuMDA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnNldFNjYWxpbmdMb2NhbChbciwgciwgcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5oYXNQb3NlICYmIHRoaXMuX2NoaWxkcmVuQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUsIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNQb3NlICYmICF0aGlzLl9jaGlsZHJlbkFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5BY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlLCB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgb2JqZWN0KSB7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdCB8fCB0aGlzLm9iamVjdDtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBvYmplY3QuY2hpbGRyZW47XG4gICAgICAgIGZvciAoY29uc3QgbyBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgby5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNHcmFiYmluZygpIHtcbiAgICAgICAgdGhpcy5qb2ludHNbJ2luZGV4LWZpbmdlci10aXAnXS5nZXRQb3NpdGlvbkxvY2FsKHRlbXBWZWMwKTtcbiAgICAgICAgdGhpcy5qb2ludHNbJ3RodW1iLXRpcCddLmdldFBvc2l0aW9uTG9jYWwodGVtcFZlYzEpO1xuICAgICAgICByZXR1cm4gdmVjMy5zcXJEaXN0KHRlbXBWZWMwLCB0ZW1wVmVjMSkgPCAwLjAwMTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnbGVmdCcsICdyaWdodCddKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tZXNoKClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiam9pbnRNZXNoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tYXRlcmlhbCgpXG5dLCBIYW5kVHJhY2tpbmcucHJvdG90eXBlLCBcImpvaW50TWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnNraW4oKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kU2tpblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiY29udHJvbGxlclRvRGVhY3RpdmF0ZVwiLCB2b2lkIDApO1xuZXhwb3J0IHsgSGFuZFRyYWNraW5nIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCAnaG93bGVyJztcbi8qKlxuICogKFNwYXRpYWwpIGF1ZGlvIGxpc3RlbmVyIGJhc2VkIG9uIFtIb3dsZXIuanNdKGh0dHBzOi8vaG93bGVyanMuY29tLykuXG4gKlxuICogUmV0cmlldmVzIHRoZSBsb2NhdGlvbiBhbmQgb3JpZW50YXRpb24gb2YgdGhlIG9iamVjdCBhbmQgcGFzc2VzIGl0XG4gKiB0byBbSG93bGVyLnBvcygpXShodHRwczovL2dpdGh1Yi5jb20vZ29sZGZpcmUvaG93bGVyLmpzI3Bvc3gteS16LWlkKVxuICogYW5kIFtIb3dsZXIub3JpZW50YXRpb24oKV0oaHR0cHM6Ly9naXRodWIuY29tL2dvbGRmaXJlL2hvd2xlci5qcyNvcmllbnRhdGlvbngteS16LWlkKS5cbiAqL1xuY2xhc3MgSG93bGVyQXVkaW9MaXN0ZW5lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2hvd2xlci1hdWRpby1saXN0ZW5lcic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBXaGV0aGVyIGF1ZGlvIHNob3VsZCBiZSBzcGF0aWFsaXplZC9wb3NpdGlvbmFsLiAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLmZ3ZCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMudXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Rm9yd2FyZCh0aGlzLmZ3ZCk7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFVwKHRoaXMudXApO1xuICAgICAgICBIb3dsZXIucG9zKHRoaXMub3JpZ2luWzBdLCB0aGlzLm9yaWdpblsxXSwgdGhpcy5vcmlnaW5bMl0pO1xuICAgICAgICBIb3dsZXIub3JpZW50YXRpb24odGhpcy5md2RbMF0sIHRoaXMuZndkWzFdLCB0aGlzLmZ3ZFsyXSwgdGhpcy51cFswXSwgdGhpcy51cFsxXSwgdGhpcy51cFsyXSk7XG4gICAgfVxufVxuZXhwb3J0IHsgSG93bGVyQXVkaW9MaXN0ZW5lciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgJ2hvd2xlcic7XG4vKipcbiAqIChTcGF0aWFsKSBhdWRpbyBzb3VyY2UgYmFzZWQgb24gW0hvd2xlci5qc10oaHR0cHM6Ly9ob3dsZXJqcy5jb20vKS5cbiAqXG4gKiBDcmVhdGVzIGEgSG93bGVyIGF1ZGlvIHNvdXJjZSwgcGxheXMgYW4gYXVkaW8gZmlsZSBvbiBpdCBhbmQgdXBkYXRlc1xuICogaXRzIHBvc2l0aW9uLlxuICpcbiAqIE9wdGltaXplcyB0aGUgcG9zaXRpb24gdXBkYXRlIHRvIG9ubHkgdXBkYXRlIGlmIHRoZSBkaWZmZXJlbmNlIHRvIGxhc3RcbiAqIHBvc2l0aW9uIGlzIGxhcmdlciB0aGFuIGhhbGYgYSBjZW50aW1ldGVyLiBUbyBmb3JjZSB1cGRhdGVzIChlLmcuIGlmXG4gKiB0aGUgc291bmQgc291cmNlIGlzIF92ZXJ5XyBjbG9zZSB0byB0aGUgbGlzdGVuZXIpLFxuICogdXNlIGAudXBkYXRlUG9zaXRpb24oKWAuXG4gKi9cbmNsYXNzIEhvd2xlckF1ZGlvU291cmNlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaG93bGVyLWF1ZGlvLXNvdXJjZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBWb2x1bWUgKi9cbiAgICAgICAgdm9sdW1lOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDEuMCB9LFxuICAgICAgICAvKiogV2hldGhlciBhdWRpbyBzaG91bGQgYmUgc3BhdGlhbGl6ZWQvcG9zaXRpb25hbCAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgICAgICAvKiogV2hldGhlciB0byBsb29wIHRoZSBzb3VuZCAqL1xuICAgICAgICBsb29wOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gc3RhcnQgcGxheWluZyBhdXRvbWF0aWNhbGx5ICovXG4gICAgICAgIGF1dG9wbGF5OiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFVSTCB0byBhIHNvdW5kIGZpbGUgdG8gcGxheSAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IG5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogW3RoaXMuc3JjXSxcbiAgICAgICAgICAgIGxvb3A6IHRoaXMubG9vcCxcbiAgICAgICAgICAgIHZvbHVtZTogdGhpcy52b2x1bWUsXG4gICAgICAgICAgICBhdXRvcGxheTogdGhpcy5hdXRvcGxheSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIGlmICh0aGlzLnNwYXRpYWwgJiYgdGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3BhdGlhbCB8fCAhdGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLm9yaWdpbik7XG4gICAgICAgIC8qIE9ubHkgY2FsbCBwb3MoKSBpZiB0aGUgcG9zaXRpb24gbW92ZWQgbW9yZSB0aGFuIGhhbGYgYSBjZW50aW1ldGVyXG4gICAgICAgICAqIG90aGVyd2lzZSB0aGlzIGdldHMgdmVyeSBwZXJmb3JtYW5jZSBoZWF2eS5cbiAgICAgICAgICogU21hbGxlciBtb3ZlbWVudCBzaG91bGQgb25seSBiZSBwZXJjZWl2YWJsZSBpZiBjbG9zZSB0byB0aGVcbiAgICAgICAgICogZWFyIGFueXdheS4gKi9cbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMubGFzdE9yaWdpblswXSAtIHRoaXMub3JpZ2luWzBdKSA+IDAuMDA1IHx8XG4gICAgICAgICAgICBNYXRoLmFicyh0aGlzLmxhc3RPcmlnaW5bMV0gLSB0aGlzLm9yaWdpblsxXSkgPiAwLjAwNSB8fFxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5sYXN0T3JpZ2luWzJdIC0gdGhpcy5vcmlnaW5bMl0pID4gMC4wMDUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5hdWRpby5wb3ModGhpcy5vcmlnaW5bMF0sIHRoaXMub3JpZ2luWzFdLCB0aGlzLm9yaWdpblsyXSwgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbi5zZXQodGhpcy5vcmlnaW4pO1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IHRoaXMuYXVkaW8ucGxheSgpO1xuICAgICAgICBpZiAodGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMubGFzdFBsYXllZEF1ZGlvSWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IG51bGw7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgLyogU3RvcCBzb3VuZCB3aGVuIGNvbXBvbmVudCBpcyBkZWFjdGl2YXRlZCBvciBkZXN0cm95ZWQsIGUuZy5cbiAgICAgICAgICogd2hlbiBzd2l0Y2hpbmcgc2NlbmVzICovXG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEhvd2xlckF1ZGlvU291cmNlIH07XG4iLCAiLyoqXG4gKiBTZXQgdGhlIGRpZmZ1c2UvZmxhdCB0ZXh0dXJlIG9mIGtub3duIHBpcGVsaW5lcy5cbiAqXG4gKiBAcGFyYW0gbWF0IE1hdGVyaWFsIHRvIHNldCB0aGUgdGV4dHVyZSBvblxuICogQHBhcmFtIHRleHR1cmUgVGV4dHVyZSB0byBzZXRcbiAqIEBwYXJhbSBjdXN0b21UZXh0dXJlUHJvcGVydHkgVGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgb3IgYCdhdXRvJ2AgdG8gYXV0b21hdGljYWxseVxuICogICAgICBkZXRlY3QgdGhlIHJpZ2h0IHRleHR1cmUgcHJvcGVydHkgYmFzZWQgb24ga25vd24gcGlwZWxpbmUuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByb3BlcnR5IHdhcyBzZXQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUobWF0LCB0ZXh0dXJlLCBjdXN0b21UZXh0dXJlUHJvcGVydHkpIHtcbiAgICBpZiAoY3VzdG9tVGV4dHVyZVByb3BlcnR5ICE9PSAnYXV0bycpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXRbY3VzdG9tVGV4dHVyZVByb3BlcnR5XSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzaGFkZXIgPSBtYXQuc2hhZGVyO1xuICAgIGlmIChzaGFkZXIgPT09ICdGbGF0IE9wYXF1ZSBUZXh0dXJlZCcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQuZmxhdFRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGhvbmcgT3BhcXVlIFRleHR1cmVkJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdGb2xpYWdlJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdQaG9uZyBOb3JtYWxtYXBwZWQnIHx8XG4gICAgICAgIHNoYWRlciA9PT0gJ1Bob25nIExpZ2h0bWFwcGVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5kaWZmdXNlVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdQYXJ0aWNsZScpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQubWFpblRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnRGlzdGFuY2VGaWVsZFZlY3RvcicpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQudmVjdG9yVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdCYWNrZ3JvdW5kJyB8fCBzaGFkZXIgPT09ICdTa3knKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0LnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5hbGJlZG9UZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWcycmFkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICogTWF0aC5QSSAvIDE4MC4wO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJhZDJkZWcodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlICogMTgwLjApIC8gTWF0aC5QSTtcbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG4vKipcbiAqIERvd25sb2FkcyBhbiBpbWFnZSBmcm9tIFVSTCBhbmQgYXBwbGllcyBpdCBhcyBgZGlmZnVzZVRleHR1cmVgIG9yIGBmbGF0VGV4dHVyZWBcbiAqIHRvIGFuIGF0dGFjaGVkIG1lc2ggY29tcG9uZW50LlxuICpcbiAqIE1hdGVyaWFscyBmcm9tIHRoZSBmb2xsb3dpbmcgc2hhZGVycyBhcmUgc3VwcG9ydGVkOlxuICogIC0gXCJQaG9uZyBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGbGF0IE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkJhY2tncm91bmRcIlxuICogIC0gXCJQaHlzaWNhbCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGb2xpYWdlXCJcbiAqL1xuY2xhc3MgSW1hZ2VUZXh0dXJlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW1hZ2UtdGV4dHVyZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBVUkwgdG8gZG93bmxvYWQgdGhlIGltYWdlIGZyb20gKi9cbiAgICAgICAgdXJsOiBQcm9wZXJ0eS5zdHJpbmcoKSxcbiAgICAgICAgLyoqIE1hdGVyaWFsIHRvIGFwcGx5IHRoZSB2aWRlbyB0ZXh0dXJlIHRvICovXG4gICAgICAgIG1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxuICAgICAgICAvKiogTmFtZSBvZiB0aGUgdGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgKi9cbiAgICAgICAgdGV4dHVyZVByb3BlcnR5OiBQcm9wZXJ0eS5zdHJpbmcoJ2F1dG8nKSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpbWFnZS10ZXh0dXJlOiBtYXRlcmlhbCBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmUudGV4dHVyZXNcbiAgICAgICAgICAgIC5sb2FkKHRoaXMudXJsLCAnYW5vbnltb3VzJylcbiAgICAgICAgICAgIC50aGVuKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKCFzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZShtYXQsIHRleHR1cmUsIHRoaXMudGV4dHVyZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlcicsIG1hdC5zaGFkZXIsICdub3Qgc3VwcG9ydGVkIGJ5IGltYWdlLXRleHR1cmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycik7XG4gICAgfVxufVxuZXhwb3J0IHsgSW1hZ2VUZXh0dXJlIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5jb25zdCBwcmV2ZW50RGVmYXVsdCA9IChlKSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgfTtcbi8qKlxuICogQ29udHJvbHMgdGhlIGNhbWVyYSBvcmllbnRhdGlvbiB0aHJvdWdoIG1vdXNlIG1vdmVtZW50LlxuICpcbiAqIEVmZmljaWVudGx5IGltcGxlbWVudGVkIHRvIGFmZmVjdCBvYmplY3Qgb3JpZW50YXRpb24gb25seVxuICogd2hlbiB0aGUgbW91c2UgbW92ZXMuXG4gKi9cbmNsYXNzIE1vdXNlTG9va0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21vdXNlLWxvb2snO1xuICAgIC8qKiBNb3VzZSBsb29rIHNlbnNpdGl2aXR5ICovXG4gICAgc2Vuc2l0aXR5ID0gMC4yNTtcbiAgICAvKiogUmVxdWlyZSBhIG1vdXNlIGJ1dHRvbiB0byBiZSBwcmVzc2VkIHRvIGNvbnRyb2wgdmlldy5cbiAgICAgKiBPdGhlcndpc2UgdmlldyB3aWxsIGFsbHdheXMgZm9sbG93IG1vdXNlIG1vdmVtZW50ICovXG4gICAgcmVxdWlyZU1vdXNlRG93biA9IHRydWU7XG4gICAgLyoqIElmIFwibW92ZU9uQ2xpY2tcIiBpcyBlbmFibGVkLCBtb3VzZSBidXR0b24gd2hpY2ggc2hvdWxkXG4gICAgICogYmUgaGVsZCBkb3duIHRvIGNvbnRyb2wgdmlldyAqL1xuICAgIG1vdXNlQnV0dG9uSW5kZXggPSAwO1xuICAgIC8qKiBFbmFibGVzIHBvaW50ZXIgbG9jayBvbiBcIm1vdXNlZG93blwiIGV2ZW50IG9uIGNhbnZhcyAqL1xuICAgIHBvaW50ZXJMb2NrT25DbGljayA9IGZhbHNlO1xuICAgIGN1cnJlbnRSb3RhdGlvblkgPSAwO1xuICAgIGN1cnJlbnRSb3RhdGlvblggPSAwO1xuICAgIG9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgcGFyZW50T3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICByb3RhdGlvblggPSAwO1xuICAgIHJvdGF0aW9uWSA9IDA7XG4gICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlckxvY2tPbkNsaWNrKSB7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVNb3VzZURvd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5lbmdpbmUuY2FudmFzO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyTG9ja09uQ2xpY2spIHtcbiAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlcXVlc3RQb2ludGVyTG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZU1vdXNlRG93bikge1xuICAgICAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0UG9pbnRlckxvY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jayA9XG4gICAgICAgICAgICBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrIHx8XG4gICAgICAgICAgICAgICAgY2FudmFzLm1velJlcXVlc3RQb2ludGVyTG9jayB8fFxuICAgICAgICAgICAgICAgIGNhbnZhcy53ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2s7XG4gICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICB9O1xuICAgIG9uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAvKiBQcmV2ZW50IHNjcm9sbGluZyAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZVVwID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdpbml0aWFsJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgKHRoaXMubW91c2VEb3duIHx8ICF0aGlzLnJlcXVpcmVNb3VzZURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWSA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WCkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWCA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WSkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggKz0gdGhpcy5yb3RhdGlvblg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblkgKz0gdGhpcy5yb3RhdGlvblk7XG4gICAgICAgICAgICAvKiAxLjUwNyA9IFBJLzIgPSA5MFx1MDBCMCAqL1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25YID0gTWF0aC5taW4oMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggPSBNYXRoLm1heCgtMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMub2JqZWN0LnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICAgICAgdmVjMy5zdWIodGhpcy5vcmlnaW4sIHRoaXMub3JpZ2luLCB0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFsxLCAwLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25YKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFswLCAxLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25ZKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKHRoaXMub3JpZ2luKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjI1KVxuXSwgTW91c2VMb29rQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5zaXRpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicmVxdWlyZU1vdXNlRG93blwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwibW91c2VCdXR0b25JbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicG9pbnRlckxvY2tPbkNsaWNrXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBNb3VzZUxvb2tDb21wb25lbnQgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG4vKipcbiAqIFNldCBwbGF5ZXIgaGVpZ2h0IGZvciBhIFktb2Zmc2V0IGFib3ZlIHRoZSBncm91bmQgZm9yXG4gKiAnbG9jYWwnIGFuZCAndmlld2VyJyByZWZlcmVuY2Ugc3BhY2VzLlxuICovXG5jbGFzcyBQbGF5ZXJIZWlnaHQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwbGF5ZXItaGVpZ2h0JztcbiAgICBoZWlnaHQgPSAxLjc1O1xuICAgIG9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2s7XG4gICAgb25TZXNzaW9uRW5kQ2FsbGJhY2s7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5hZGQodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQucmVtb3ZlKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KCkge1xuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5lbmdpbmUueHI/LmN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSAnbG9jYWwnICYmIHR5cGUgIT09ICd2aWV3ZXInKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblhSU2Vzc2lvbkVuZCgpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZW5naW5lLnhyPy5jdXJyZW50UmVmZXJlbmNlU3BhY2VUeXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2xvY2FsJyAmJiB0eXBlICE9PSAndmlld2VyJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxLjc1KVxuXSwgUGxheWVySGVpZ2h0LnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFBsYXllckhlaWdodCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIFNldHMgdGhlIHRhcmdldCBmcmFtZXJhdGVcbiAqXG4gKiBbVXBkYXRlcyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZV0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby93ZWJ4ci8jZG9tLXhyc2Vzc2lvbi11cGRhdGV0YXJnZXRmcmFtZXJhdGUpXG4gKiB0byB0aGUgY2xvc2VzdCBbc3VwcG9ydGVkIHRhcmdldCBmcmFtZXJhdGVdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHIvI2RvbS14cnNlc3Npb24tc3VwcG9ydGVkRnJhbWVSYXRlcylcbiAqIHRvIHRoZSBnaXZlbiBgZnJhbWVyYXRlYC5cbiAqXG4gKiBUaGUgdGFyZ2V0IGZyYW1lcmF0ZSBpcyB1c2VkIGZvciB0aGUgZGV2aWNlJ3MgVlIgY29tcG9zaXRvciBhcyBhbiBpbmRpY2F0aW9uIG9mIGhvdyBvZnRlbiB0byByZWZyZXNoIHRoZVxuICogc2NyZWVuIHdpdGggbmV3IGltYWdlcy4gVGhpcyBtZWFucyB0aGUgYXBwIHdpbGwgYmUgYXNrZWQgdG8gcHJvZHVjZSBmcmFtZXMgaW4gbW9yZSByZWd1bGFyIGludGVydmFscyxcbiAqIHBvdGVudGlhbGx5IHNwZW5kaW5nIGxlc3MgdGltZSBvbiBmcmFtZXMgdGhhdCBhcmUgbGlrZWx5IHRvIGJlIGRyb3BwZWQuXG4gKlxuICogRm9yIGFwcHMgd2l0aCBoZWF2eSBsb2FkLCBzZXR0aW5nIGEgd2VsbCBtYXRjaGluZyB0YXJnZXQgZnJhbWVyYXRlIGNhbiBpbXByb3ZlIHRoZSBhcHBzIHJlbmRlcmluZyBzdGFiaWxpdHlcbiAqIGFuZCByZWR1Y2Ugc3R1dHRlci5cbiAqXG4gKiBMaWtld2lzZSwgdGhlIHRhcmdldCBmcmFtZXJhdGUgY2FuIGJlIHVzZWQgdG8gZW5hYmxlIDEyMEh6IHJlZnJlc2ggcmF0ZXMgb24gT2N1bHVzIFF1ZXN0IDIgb24gc2ltcGxlciBhcHBzLlxuICovXG5jbGFzcyBUYXJnZXRGcmFtZXJhdGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0YXJnZXQtZnJhbWVyYXRlJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgZnJhbWVyYXRlOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDkwLjAgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLnNldFRhcmdldEZyYW1lcmF0ZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIHNldFRhcmdldEZyYW1lcmF0ZShzKSB7XG4gICAgICAgIGlmIChzLnN1cHBvcnRlZEZyYW1lUmF0ZXMgJiYgcy51cGRhdGVUYXJnZXRGcmFtZVJhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLnN1cHBvcnRlZEZyYW1lUmF0ZXM7XG4gICAgICAgICAgICBhLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGEgLSB0aGlzLmZyYW1lcmF0ZSkgLSBNYXRoLmFicyhiIC0gdGhpcy5mcmFtZXJhdGUpKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24udXBkYXRlVGFyZ2V0RnJhbWVSYXRlKGFbMF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVGFyZ2V0RnJhbWVyYXRlIH07XG4iLCAiaW1wb3J0IHsgdmVjMywgcXVhdDIgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogVGVsZXBvcnQgVlIgbG9jb21vdGlvbi5cbiAqXG4gKiBTZWUgW1RlbGVwb3J0IEV4YW1wbGVdKC9zaG93Y2FzZS90ZWxlcG9ydCkuXG4gKi9cbmNsYXNzIFRlbGVwb3J0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGVsZXBvcnQnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogT2JqZWN0IHRoYXQgd2lsbCBiZSBwbGFjZWQgYXMgaW5kaWNpYXRpb24gZm9yd2hlcmUgdGhlIHBsYXllciB3aWxsIHRlbGVwb3J0IHRvLiAqL1xuICAgICAgICB0ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3Q6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIFJvb3Qgb2YgdGhlIHBsYXllciwgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcG9zaXRpb25lZCBvbiB0ZWxlcG9ydGF0aW9uLiAqL1xuICAgICAgICBjYW1Sb290OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBOb24tdnIgY2FtZXJhIGZvciB1c2Ugb3V0c2lkZSBvZiBWUiAqL1xuICAgICAgICBjYW06IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIExlZnQgZXllIGZvciB1c2UgaW4gVlIqL1xuICAgICAgICBleWVMZWZ0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBSaWdodCBleWUgZm9yIHVzZSBpbiBWUiovXG4gICAgICAgIGV5ZVJpZ2h0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBIYW5kZWRuZXNzIGZvciBWUiBjdXJzb3JzIHRvIGFjY2VwdCB0cmlnZ2VyIGV2ZW50cyBvbmx5IGZyb20gcmVzcGVjdGl2ZSBjb250cm9sbGVyLiAqL1xuICAgICAgICBoYW5kZWRuZXNzOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnaW5wdXQgY29tcG9uZW50JywgJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2lucHV0IGNvbXBvbmVudCcsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBDb2xsaXNpb24gZ3JvdXAgb2YgdmFsaWQgXCJmbG9vclwiIG9iamVjdHMgdGhhdCBjYW4gYmUgdGVsZXBvcnRlZCBvbiAqL1xuICAgICAgICBmbG9vckdyb3VwOiB7IHR5cGU6IFR5cGUuSW50LCBkZWZhdWx0OiAxIH0sXG4gICAgICAgIC8qKiBIb3cgZmFyIHRoZSB0aHVtYnN0aWNrIG5lZWRzIHRvIGJlIHB1c2hlZCB0byBoYXZlIHRoZSB0ZWxlcG9ydCB0YXJnZXQgaW5kaWNhdG9yIHNob3cgdXAgKi9cbiAgICAgICAgdGh1bWJzdGlja0FjdGl2YXRpb25UaHJlc2hob2xkOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IC0wLjcgfSxcbiAgICAgICAgLyoqIEhvdyBmYXIgdGhlIHRodW1ic3RpY2sgbmVlZHMgdG8gYmUgcmVsZWFzZWQgdG8gZXhlY3V0ZSB0aGUgdGVsZXBvcnQgKi9cbiAgICAgICAgdGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4zIH0sXG4gICAgICAgIC8qKiBPZmZzZXQgdG8gYXBwbHkgdG8gdGhlIGluZGljYXRvciBvYmplY3QsIGUuZy4gdG8gYXZvaWQgaXQgZnJvbSBaLWZpZ2h0aW5nIHdpdGggdGhlIGZsb29yICovXG4gICAgICAgIGluZGljYXRvcllPZmZzZXQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4wMSB9LFxuICAgICAgICAvKiogTW9kZSBmb3IgcmF5Y2FzdGluZywgd2hldGhlciB0byB1c2UgUGh5c1ggb3Igc2ltcGxlIGNvbGxpc2lvbiBjb21wb25lbnRzICovXG4gICAgICAgIHJheUNhc3RNb2RlOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnY29sbGlzaW9uJywgJ3BoeXN4J10sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY29sbGlzaW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqIE1heCBkaXN0YW5jZSBmb3IgUGh5c1ggcmF5Y2FzdCAqL1xuICAgICAgICBtYXhEaXN0YW5jZTogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAxMDAuMCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fcHJldlRodW1ic3RpY2tBeGlzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMuX3RlbXBWZWMwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgdGhpcy5fY3VycmVudEluZGljYXRvclJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnaW5wdXQnKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogaW5wdXQgY29tcG9uZW50IGlzIHJlcXVpcmVkIG9uIHRoZSBvYmplY3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogVGVsZXBvcnQgaW5kaWNhdG9yIG1lc2ggaXMgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jYW1Sb290KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogY2FtUm9vdCBub3Qgc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmhpdFNwb3QgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLl9oYXNIaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXh0cmFSb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FtKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91c2VJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFuZGVkbmVzcyA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbXAgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpZiAoIWlucHV0Q29tcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigndGVsZXBvcnQgY29tcG9uZW50IG9uIG9iamVjdCcsIHRoaXMub2JqZWN0Lm5hbWUsICd3YXMgY29uZmlndXJlZCB3aXRoIGhhbmRlZG5lc3MgXCJpbnB1dCBjb21wb25lbnRcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdidXQgb2JqZWN0IGhhcyBubyBpbnB1dCBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBpbnB1dENvbXAuaGFuZGVkbmVzcztcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXRDb21wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXR1cFZSRXZlbnRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIC8qIEdldCBjdXJyZW50IGNhbWVyYSBZIHJvdGF0aW9uICovXG4gICAgX2dldENhbVJvdGF0aW9uKCkge1xuICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0Rm9yd2FyZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlY1sxXSA9IDA7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuX3RlbXBWZWMsIHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLl90ZW1wVmVjWzBdLCB0aGlzLl90ZW1wVmVjWzJdKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgaW5wdXRMZW5ndGggPSAwO1xuICAgICAgICBpZiAodGhpcy5nYW1lcGFkICYmIHRoaXMuZ2FtZXBhZC5heGVzKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzBdID0gdGhpcy5nYW1lcGFkLmF4ZXNbMl07XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdID0gdGhpcy5nYW1lcGFkLmF4ZXNbM107XG4gICAgICAgICAgICBpbnB1dExlbmd0aCA9XG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5fY3VycmVudFN0aWNrQXhlc1swXSkgKyBNYXRoLmFicyh0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXNbMV0gPj0gdGhpcy50aHVtYnN0aWNrQWN0aXZhdGlvblRocmVzaGhvbGQgJiZcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0gPCB0aGlzLnRodW1ic3RpY2tBY3RpdmF0aW9uVGhyZXNoaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICBpbnB1dExlbmd0aCA8IHRoaXMudGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZWxlcG9ydFBsYXllcih0aGlzLmhpdFNwb3QsIHRoaXMuX2V4dHJhUm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSW5kaWNhdGluZyAmJiB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdCAmJiB0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW4gPSB0aGlzLl90ZW1wVmVjMDtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQob3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMub2JqZWN0LmdldEZvcndhcmRXb3JsZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgICAgIGxldCByYXlIaXQgPSAodGhpcy5yYXlIaXQgPVxuICAgICAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZW5naW5lLnBoeXNpY3MucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXAsIHRoaXMubWF4RGlzdGFuY2UpKTtcbiAgICAgICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9leHRyYVJvdGF0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgTWF0aC5QSSArXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmF0YW4yKHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMF0sIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldENhbVJvdGF0aW9uKCkgKyAodGhpcy5fZXh0cmFSb3RhdGlvbiAtIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZChbMCwgMSwgMF0sIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnRyYW5zbGF0ZShbXG4gICAgICAgICAgICAgICAgICAgIDAuMCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JZT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAwLjAsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdFNwb3Quc2V0KHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5kaWNhdG9ySGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0ICYmIHRoaXMuaXNNb3VzZUluZGljYXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZVByZXNzZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXMuc2V0KHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMpO1xuICAgIH1cbiAgICBzZXR1cFZSRXZlbnRzKHMpIHtcbiAgICAgICAgLyogSWYgaW4gVlIsIG9uZS10aW1lIGJpbmQgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHM7XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLyogUmVzZXQgY2FjaGUgb25jZSB0aGUgc2Vzc2lvbiBlbmRzIHRvIHJlYmluZCBzZWxlY3QgZXRjLCBpbiBjYXNlXG4gICAgICAgICAgICAgKiBpdCBzdGFydHMgYWdhaW4gKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSBudWxsO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICBpZiAocy5pbnB1dFNvdXJjZXMgJiYgcy5pbnB1dFNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuaW5wdXRTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlucHV0U291cmNlID0gcy5pbnB1dFNvdXJjZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IGlucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFkZGVkICYmIGUuYWRkZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLmFkZGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFNvdXJjZSA9IGUuYWRkZWRbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0gaW5wdXRTb3VyY2UuZ2FtZXBhZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgb25Nb3VzZURvd24oKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBvbk1vdXNlVXAoKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbGVwb3J0UGxheWVyKHRoaXMuaGl0U3BvdCwgMC4wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk1vdXNlUHJlc3NlZCgpIHtcbiAgICAgICAgbGV0IG9yaWdpbiA9IFswLCAwLCAwXTtcbiAgICAgICAgdGhpcy5jYW0uZ2V0UG9zaXRpb25Xb3JsZChvcmlnaW4pO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmNhbS5nZXRGb3J3YXJkKHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICBsZXQgcmF5SGl0ID0gKHRoaXMucmF5SGl0ID1cbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXApXG4gICAgICAgICAgICAgICAgOiB0aGlzLmVuZ2luZS5waHlzaWNzLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwLCB0aGlzLm1heERpc3RhbmNlKSk7XG4gICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgZGlyZWN0aW9uWzFdID0gMDtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKGRpcmVjdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgLU1hdGguc2lnbihkaXJlY3Rpb25bMl0pICogTWF0aC5hY29zKGRpcmVjdGlvblswXSkgLSBNYXRoLlBJICogMC41O1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWQoWzAsIDEsIDBdLCB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGl0U3BvdCA9IHJheUhpdC5sb2NhdGlvbnNbMF07XG4gICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmluZGljYXRvckhpZGRlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9ySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF90ZWxlcG9ydFBsYXllcihuZXdQb3NpdGlvbiwgcm90YXRpb25Ub0FkZCkge1xuICAgICAgICB0aGlzLmNhbVJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkKFswLCAxLCAwXSwgcm90YXRpb25Ub0FkZCk7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLl90ZW1wVmVjO1xuICAgICAgICBjb25zdCBwMSA9IHRoaXMuX3RlbXBWZWMwO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0UG9zaXRpb25Xb3JsZChwKTtcbiAgICAgICAgICAgIHRoaXMuZXllUmlnaHQuZ2V0UG9zaXRpb25Xb3JsZChwMSk7XG4gICAgICAgICAgICB2ZWMzLmFkZChwLCBwLCBwMSk7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHAsIHAsIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbS5nZXRQb3NpdGlvbldvcmxkKHApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FtUm9vdC5nZXRQb3NpdGlvbldvcmxkKHAxKTtcbiAgICAgICAgdmVjMy5zdWIocCwgcDEsIHApO1xuICAgICAgICBwWzBdICs9IG5ld1Bvc2l0aW9uWzBdO1xuICAgICAgICBwWzFdID0gbmV3UG9zaXRpb25bMV07XG4gICAgICAgIHBbMl0gKz0gbmV3UG9zaXRpb25bMl07XG4gICAgICAgIHRoaXMuY2FtUm9vdC5zZXRQb3NpdGlvbldvcmxkKHApO1xuICAgIH1cbn1cbmV4cG9ydCB7IFRlbGVwb3J0Q29tcG9uZW50IH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBNZXNoLCBNZXNoSW5kZXhUeXBlLCBNZXNoQXR0cmlidXRlLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgZGlyZWN0aW9uID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IG9mZnNldCA9IHZlYzMuY3JlYXRlKCk7XG5jb25zdCBub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgVVAgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4vKipcbiAqIER5bmFtaWMgbWVzaC1iYXNlZCB0cmFpbFxuICpcbiAqIFRoaXMgY29tcG9uZW50IGtlZXBzIHRyYWNrIG9mIHRoZSB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0IGl0J3MgYWRkZWQgdG8uXG4gKiBBdCBhIGZpeGVkIGludGVydmFsIHRoZSB3b3JsZCBwb3NpdGlvbiBpcyBzdG9yZWQgYXMgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhlIHRyYWlsIHNlZ21lbnRzLlxuICpcbiAqIFRoZSB0cmFpbCB0YXBlcnMgb2ZmIGFsb25nIGl0cyBsZW5ndGguIFVWIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIHNldHVwIHN1Y2ggdGhhdCB0aGVcbiAqIFUtYXhpcyBjb3ZlcnMgdGhlIHdpZHRoIG9mIHRoZSB0cmFpbCBhbmQgdGhlIFYtYXhpcyBjb3ZlcnMgdGhlIGxlbmd0aCBvZiB0aGUgdHJhaWwuXG4gKiBUaGlzIGFsbG93cyB0aGUgdHJhaWwncyBhcHBlYXJhbmNlIHRvIGJlIGRlZmluZWQgdXNpbmcgYSB0ZXh0dXJlLlxuICovXG5jbGFzcyBUcmFpbCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3RyYWlsJztcbiAgICAvKiogVGhlIG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoZSB0cmFpbCBtZXNoICovXG4gICAgbWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoZSB0cmFpbCBtZXNoICovXG4gICAgc2VnbWVudHMgPSA1MDtcbiAgICAvKiogVGhlIHRpbWUgaW50ZXJ2YWwgYmVmb3JlIHJlY29yZGluZyBhIG5ldyBwb2ludCAqL1xuICAgIGludGVydmFsID0gMC4xO1xuICAgIC8qKiBUaGUgd2lkdGggb2YgdGhlIHRyYWlsIChpbiB3b3JsZCBzcGFjZSkgKi9cbiAgICB3aWR0aCA9IDEuMDtcbiAgICAvKiogV2hldGhlciBvciBub3QgdGhlIHRyYWlsIHNob3VsZCB0YXBlciBvZmYgKi9cbiAgICB0YXBlciA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzLCBhYm92ZSB3aGljaCB0aGUgdHJhaWwgcmVzZXRzLlxuICAgICAqIFRoaXMgcHJldmVudHMgdGhlIHRyYWlsIGZyb20ganVtcGluZyBhcm91bmQgd2hlbiB1cGRhdGVzIGhhcHBlblxuICAgICAqIGluZnJlcXVlbnRseSAoZS5nLiB3aGVuIHRoZSB0YWIgZG9lc24ndCBoYXZlIGZvY3VzKS5cbiAgICAgKi9cbiAgICByZXNldFRocmVzaG9sZCA9IDAuNTtcbiAgICBfY3VycmVudFBvaW50SW5kZXggPSAwO1xuICAgIF90aW1lVGlsbE5leHQgPSAwO1xuICAgIF9wb2ludHMgPSBbXTtcbiAgICBfdHJhaWxDb250YWluZXIgPSBudWxsO1xuICAgIF9tZXNoQ29tcCA9IG51bGw7XG4gICAgX21lc2ggPSBudWxsO1xuICAgIF9pbmRleERhdGEgPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9wb2ludHMgPSBuZXcgQXJyYXkodGhpcy5zZWdtZW50cyArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fcG9pbnRzW2ldID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBUaGUgcG9pbnRzIGFycmF5IGlzIGNpcmN1bGFyLCBzbyBrZWVwIHRyYWNrIG9mIGl0cyBoZWFkICovXG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCA9IHRoaXMuaW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wID0gdGhpcy5fdHJhaWxDb250YWluZXIuYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgLyogRWFjaCBwb2ludCB3aWxsIGhhdmUgdHdvIHZlcnRpY2VzOyBvbmUgb24gZWl0aGVyIHNpZGUgKi9cbiAgICAgICAgY29uc3QgdmVydGV4Q291bnQgPSAyICogdGhpcy5fcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgLyogRWFjaCBzZWdtZW50IGNvbnNpc3RzIG9mIHR3byB0cmlhbmdsZXMgKi9cbiAgICAgICAgdGhpcy5faW5kZXhEYXRhID0gbmV3IFVpbnQzMkFycmF5KDYgKiB0aGlzLnNlZ21lbnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHYgPSAwOyBpIDwgdmVydGV4Q291bnQgLSAyOyBpICs9IDIsIHYgKz0gNikge1xuICAgICAgICAgICAgdGhpcy5faW5kZXhEYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KHYsIHYgKyA2KVxuICAgICAgICAgICAgICAgIC5zZXQoW2kgKyAxLCBpICsgMCwgaSArIDIsIGkgKyAyLCBpICsgMywgaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tZXNoID0gbmV3IE1lc2godGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIHZlcnRleENvdW50OiB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgIGluZGV4RGF0YTogdGhpcy5faW5kZXhEYXRhLFxuICAgICAgICAgICAgaW5kZXhUeXBlOiBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkSW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWVzaENvbXAubWVzaCA9IHRoaXMuX21lc2g7XG4gICAgfVxuICAgIHVwZGF0ZVZlcnRpY2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21lc2gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICAgICAgICBjb25zdCB0ZXhDb29yZHMgPSB0aGlzLl9tZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlRleHR1cmVDb29yZGluYXRlKTtcbiAgICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuTm9ybWFsKTtcbiAgICAgICAgdmVjMy5zZXQoZGlyZWN0aW9uLCAwLCAwLCAwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9wb2ludHNbKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgaSArIDEpICUgdGhpcy5fcG9pbnRzLmxlbmd0aF07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fcG9pbnRzWyh0aGlzLl9jdXJyZW50UG9pbnRJbmRleCArIGkgKyAyKSAlIHRoaXMuX3BvaW50cy5sZW5ndGhdO1xuICAgICAgICAgICAgLyogVGhlIGxhc3QgcG9pbnQgaGFzIG5vIG5leHQsIHNvIHJlLXVzZSB0aGUgZGlyZWN0aW9uIG9mIHRoZSBwcmV2aW91cyBzZWdtZW50ICovXG4gICAgICAgICAgICBpZiAoaSAhPT0gdGhpcy5fcG9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihkaXJlY3Rpb24sIG5leHQsIGN1cnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVjMy5jcm9zcyhvZmZzZXQsIFVQLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUob2Zmc2V0LCBvZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGltZUZyYWN0aW9uID0gMS4wIC0gdGhpcy5fdGltZVRpbGxOZXh0IC8gdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgICAgIGNvbnN0IGZyYWN0aW9uID0gKGkgLSB0aW1lRnJhY3Rpb24pIC8gdGhpcy5zZWdtZW50cztcbiAgICAgICAgICAgIHZlYzMuc2NhbGUob2Zmc2V0LCBvZmZzZXQsICgodGhpcy50YXBlciA/IGZyYWN0aW9uIDogMS4wKSAqIHRoaXMud2lkdGgpIC8gMi4wKTtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5zZXQoaSAqIDIsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdIC0gb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gLSBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSAtIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcG9zaXRpb25zLnNldChpICogMiArIDEsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdICsgb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gKyBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSArIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLmNyb3NzKG5vcm1hbCwgZGlyZWN0aW9uLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5vcm1hbCwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiArIDEsIG5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4Q29vcmRzKSB7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiwgWzAsIGZyYWN0aW9uXSk7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiArIDEsIFsxLCBmcmFjdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIE5vdGlmeSBXTEUgdGhhdCB0aGUgbWVzaCBoYXMgY2hhbmdlZCAqL1xuICAgICAgICB0aGlzLl9tZXNoLnVwZGF0ZSgpO1xuICAgIH1cbiAgICByZXNldFRyYWlsKCkge1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1swXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2ZWMzLmNvcHkodGhpcy5fcG9pbnRzW2ldLCB0aGlzLl9wb2ludHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCAtPSBkdDtcbiAgICAgICAgaWYgKGR0ID4gdGhpcy5yZXNldFRocmVzaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFRyYWlsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3RpbWVUaWxsTmV4dCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgMSkgJSB0aGlzLl9wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gKHRoaXMuX3RpbWVUaWxsTmV4dCAlIHRoaXMuaW50ZXJ2YWwpICsgdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1t0aGlzLl9jdXJyZW50UG9pbnRJbmRleF0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVZlcnRpY2VzKCk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMucmVzZXRUcmFpbCgpO1xuICAgICAgICBpZiAodGhpcy5fbWVzaENvbXApXG4gICAgICAgICAgICB0aGlzLl9tZXNoQ29tcC5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tZXNoQ29tcClcbiAgICAgICAgICAgIHRoaXMuX21lc2hDb21wLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFpbENvbnRhaW5lcilcbiAgICAgICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuX21lc2hDb21wKVxuICAgICAgICAgICAgdGhpcy5fbWVzaENvbXAuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5fbWVzaClcbiAgICAgICAgICAgIHRoaXMuX21lc2guZGVzdHJveSgpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm1hdGVyaWFsKClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJtYXRlcmlhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KDUwKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcInNlZ21lbnRzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCg1MClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJpbnRlcnZhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS4wKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKHRydWUpXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwidGFwZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEuMClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJyZXNldFRocmVzaG9sZFwiLCB2b2lkIDApO1xuZXhwb3J0IHsgVHJhaWwgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuZnVuY3Rpb24gY2xhbXAodiwgYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChhLCBNYXRoLm1pbih2LCBiKSk7XG59XG5jb25zdCByb290U2NhbGluZyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBtaWRkbGVQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgZW5kUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRhcmdldFBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBoZWxwZXJQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3Qgcm9vdFRyYW5zZm9ybSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG5jb25zdCBtaWRkbGVUcmFuc2Zvcm0gPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuY29uc3QgZW5kVHJhbnNmb3JtID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcbi8qKlxuICogU29sdmUgaW52ZXJzZSBraW5lbWF0aWNzIGZvciBhIHR3byBqb2ludCBjaGFpbnNcbiAqXG4gKiBJbnNwaXJlZCBieSBodHRwOi8vdGhlb3JhbmdlZHVjay5jb20vcGFnZS9zaW1wbGUtdHdvLWpvaW50XG4gKi9cbmNvbnN0IHR3b0pvaW50SUsgPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBjYSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYmEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGFiID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBjYiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYXhpczAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGF4aXMxID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCB0ZW1wID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJvb3QsIG1pZGRsZSwgYiwgYywgdGFyZ2V0UG9zLCBlcHMsIGhlbHBlcikge1xuICAgICAgICAvKiBhID0gWzAsIDAsIDBdLCBzaW5jZSBldmVyeXRoaW5nIGlzIGNvbXB1dGVkIGluIHJvb3Qtc3BhY2UgKi9cbiAgICAgICAgYmEuc2V0KGIpO1xuICAgICAgICBjb25zdCBsYWIgPSB2ZWMzLmxlbmd0aChiYSk7XG4gICAgICAgIHZlYzMuc3ViKHRhLCBiLCBjKTtcbiAgICAgICAgY29uc3QgbGNiID0gdmVjMy5sZW5ndGgodGEpO1xuICAgICAgICB0YS5zZXQodGFyZ2V0UG9zKTtcbiAgICAgICAgY29uc3QgbGF0ID0gY2xhbXAodmVjMy5sZW5ndGgodGEpLCBlcHMsIGxhYiArIGxjYiAtIGVwcyk7XG4gICAgICAgIGNhLnNldChjKTtcbiAgICAgICAgdmVjMy5zY2FsZShhYiwgYiwgLTEpO1xuICAgICAgICB2ZWMzLnN1YihjYiwgYywgYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGNhLCBjYSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGJhLCBiYSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGFiLCBhYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGNiLCBjYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRhLCB0YSk7XG4gICAgICAgIC8qIFN1cHBvc2VkbHkgbnVtZXJpY2FsIGVycm9ycyBjYW4gY2F1c2UgdGhlIGRvdCB0byBnbyBvdXQgb2YgLTEsIDEgcmFuZ2UgKi9cbiAgICAgICAgY29uc3QgYWNfYWJfMCA9IE1hdGguYWNvcyhjbGFtcCh2ZWMzLmRvdChjYSwgYmEpLCAtMSwgMSkpO1xuICAgICAgICBjb25zdCBiYV9iY18wID0gTWF0aC5hY29zKGNsYW1wKHZlYzMuZG90KGFiLCBjYiksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGFjX2F0XzAgPSBNYXRoLmFjb3MoY2xhbXAodmVjMy5kb3QoY2EsIHRhKSwgLTEsIDEpKTtcbiAgICAgICAgY29uc3QgYWNfYWJfMSA9IE1hdGguYWNvcyhjbGFtcCgobGNiICogbGNiIC0gbGFiICogbGFiIC0gbGF0ICogbGF0KSAvICgtMiAqIGxhYiAqIGxhdCksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGJhX2JjXzEgPSBNYXRoLmFjb3MoY2xhbXAoKGxhdCAqIGxhdCAtIGxhYiAqIGxhYiAtIGxjYiAqIGxjYikgLyAoLTIgKiBsYWIgKiBsY2IpLCAtMSwgMSkpO1xuICAgICAgICBpZiAoaGVscGVyKSB7XG4gICAgICAgICAgICB2ZWMzLnN1YihiYSwgaGVscGVyLCBiKTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKGJhLCBiYSk7XG4gICAgICAgIH1cbiAgICAgICAgdmVjMy5jcm9zcyhheGlzMCwgY2EsIGJhKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYXhpczAsIGF4aXMwKTtcbiAgICAgICAgdmVjMy5jcm9zcyhheGlzMSwgYywgdGFyZ2V0UG9zKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYXhpczEsIGF4aXMxKTtcbiAgICAgICAgbWlkZGxlLnRyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbCh0ZW1wLCBheGlzMCk7XG4gICAgICAgIHJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkT2JqZWN0KGF4aXMxLCBhY19hdF8wKTtcbiAgICAgICAgcm9vdC5yb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYXhpczAsIGFjX2FiXzEgLSBhY19hYl8wKTtcbiAgICAgICAgbWlkZGxlLnJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChheGlzMCwgYmFfYmNfMSAtIGJhX2JjXzApO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBJbnZlcnNlIGtpbmVtYXRpY3MgZm9yIHR3by1qb2ludCBjaGFpbnMgKGUuZy4ga25lZXMgb3IgZWxib3dzKVxuICovXG5jbGFzcyBUd29Kb2ludElrU29sdmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndHdvLWpvaW50LWlrLXNvbHZlcic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBSb290IGJvbmUsIG5ldmVyIG1vdmVzICovXG4gICAgICAgIHJvb3Q6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogQm9uZSBhdHRhY2hlZCB0byB0aGUgcm9vdCAqL1xuICAgICAgICBtaWRkbGU6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogQm9uZSBhdHRhY2hlZCB0byB0aGUgbWlkZGxlICovXG4gICAgICAgIGVuZDogUHJvcGVydHkub2JqZWN0KCksXG4gICAgICAgIC8qKiBUYXJnZXQgdGhlIGpvaW5zIHNob3VsZCByZWFjaCBmb3IgKi9cbiAgICAgICAgdGFyZ2V0OiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICAgICAgLyoqIEZsYWcgZm9yIGNvcHlpbmcgcm90YXRpb24gZnJvbSB0YXJnZXQgdG8gZW5kICovXG4gICAgICAgIGNvcHlUYXJnZXRSb3RhdGlvbjogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIEhlbHBlciBvYmplY3QgdG8gdXNlIHRvIGRldGVybWluZSBqb2ludCByb3RhdGlvbiBheGlzICovXG4gICAgICAgIGhlbHBlcjogUHJvcGVydHkub2JqZWN0KCksXG4gICAgfTtcbiAgICB0aW1lID0gMDtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5yb290LmdldFRyYW5zZm9ybUxvY2FsKHJvb3RUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLm1pZGRsZS5nZXRUcmFuc2Zvcm1Mb2NhbChtaWRkbGVUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLmVuZC5nZXRUcmFuc2Zvcm1Mb2NhbChlbmRUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgdGhpcy50aW1lICs9IGR0O1xuICAgICAgICAvKiBSZXNldCB0byBvcmlnaW5hbCBwb3NlIGZvciBzdGFiaWxpdHkgKi9cbiAgICAgICAgdGhpcy5yb290LnNldFRyYW5zZm9ybUxvY2FsKHJvb3RUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLm1pZGRsZS5zZXRUcmFuc2Zvcm1Mb2NhbChtaWRkbGVUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLmVuZC5zZXRUcmFuc2Zvcm1Mb2NhbChlbmRUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLnJvb3QuZ2V0U2NhbGluZ1dvcmxkKHJvb3RTY2FsaW5nKTtcbiAgICAgICAgLyogR2V0IGpvaW50IHBvc2l0aW9ucyBpbiByb290LXNwYWNlICovXG4gICAgICAgIHRoaXMubWlkZGxlLmdldFBvc2l0aW9uTG9jYWwobWlkZGxlUG9zKTtcbiAgICAgICAgdGhpcy5lbmQuZ2V0UG9zaXRpb25Mb2NhbChlbmRQb3MpO1xuICAgICAgICB0aGlzLm1pZGRsZS50cmFuc2Zvcm1Qb2ludExvY2FsKGVuZFBvcywgZW5kUG9zKTtcbiAgICAgICAgaWYgKHRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAvKiBHZXQgaGVscGVyIHBvc2l0aW9uIGluIHJvb3Qgc3BhY2UgKi9cbiAgICAgICAgICAgIHRoaXMuaGVscGVyLmdldFBvc2l0aW9uV29ybGQoaGVscGVyUG9zKTtcbiAgICAgICAgICAgIHRoaXMucm9vdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZChoZWxwZXJQb3MsIGhlbHBlclBvcyk7XG4gICAgICAgICAgICB2ZWMzLmRpdihoZWxwZXJQb3MsIGhlbHBlclBvcywgcm9vdFNjYWxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIC8qIEdldCB0YXJnZXQgcG9zaXRpb24gaW4gcm9vdCBzcGFjZSAqL1xuICAgICAgICB0aGlzLnRhcmdldC5nZXRQb3NpdGlvbldvcmxkKHRhcmdldFBvcyk7XG4gICAgICAgIHRoaXMucm9vdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0YXJnZXRQb3MsIHRhcmdldFBvcyk7XG4gICAgICAgIHZlYzMuZGl2KHRhcmdldFBvcywgdGFyZ2V0UG9zLCByb290U2NhbGluZyk7XG4gICAgICAgIHR3b0pvaW50SUsodGhpcy5yb290LCB0aGlzLm1pZGRsZSwgbWlkZGxlUG9zLCBlbmRQb3MsIHRhcmdldFBvcywgMC4wMSwgdGhpcy5oZWxwZXIgPyBoZWxwZXJQb3MgOiBudWxsLCB0aGlzLnRpbWUpO1xuICAgICAgICBpZiAodGhpcy5jb3B5VGFyZ2V0Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZW5kLnNldFJvdGF0aW9uV29ybGQodGhpcy50YXJnZXQuZ2V0Um90YXRpb25Xb3JsZCh0ZW1wUXVhdCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVHdvSm9pbnRJa1NvbHZlciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVGV4dHVyZSwgUHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUgfSBmcm9tICcuL3V0aWxzL3V0aWxzLmpzJztcbi8qKlxuICogRG93bmxvYWRzIGEgdmlkZW8gZnJvbSBVUkwgYW5kIGFwcGxpZXMgaXQgYXMgYGRpZmZ1c2VUZXh0dXJlYCBvciBgZmxhdFRleHR1cmVgXG4gKiBvbiBnaXZlbiBtYXRlcmlhbC5cbiAqXG4gKiBWaWRlbyB0ZXh0dXJlcyBuZWVkIHRvIGJlIHVwZGF0ZWQgcmVndWxhcmx5IHdoZW5ldmVyXG4gKiBhIG5ldyBmcmFtZSBpcyBhdmFpbGFibGUuIFRoaXMgY29tcG9uZW50IGhhbmRsZXMgdGhlXG4gKiBkZXRlY3Rpb24gb2YgYSBuZXcgZnJhbWUgYW5kIHVwZGF0ZXMgdGhlIHRleHR1cmUgdG9cbiAqIHJlZmxlY3QgdGhlIHZpZGVvJ3MgY3VycmVudCBmcmFtZS5cbiAqXG4gKiBNYXRlcmlhbHMgZnJvbSB0aGUgZm9sbG93aW5nIHNoYWRlcnMgYXJlIHN1cHBvcnRlZDpcbiAqICAtIFwiUGhvbmcgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRmxhdCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJCYWNrZ3JvdW5kXCJcbiAqICAtIFwiUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRm9saWFnZVwiXG4gKlxuICogVGhlIHZpZGVvIGNhbiBiZSBhY2Nlc3NlZCB0aHJvdWdoIGB0aGlzLnZpZGVvYDpcbiAqXG4gKiBgYGBqc1xuICogICBsZXQgdmlkZW9UZXh0dXJlID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWRlby10ZXh0dXJlJyk7XG4gKiAgIHZpZGVvVGV4dHVyZS52aWRlby5wbGF5KCk7XG4gKiAgIHZpZGVvVGV4dHVyZS52aWRlby5wYXVzZSgpO1xuICogYGBgXG4gKlxuICogU2VlIFtWaWRlbyBFeGFtcGxlXSgvc2hvd2Nhc2UvdmlkZW8pLlxuICovXG5jbGFzcyBWaWRlb1RleHR1cmUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2aWRlby10ZXh0dXJlJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIFVSTCB0byBkb3dubG9hZCB2aWRlbyBmcm9tICovXG4gICAgICAgIHVybDogUHJvcGVydHkuc3RyaW5nKCksXG4gICAgICAgIC8qKiBNYXRlcmlhbCB0byBhcHBseSB0aGUgdmlkZW8gdGV4dHVyZSB0byAqL1xuICAgICAgICBtYXRlcmlhbDogUHJvcGVydHkubWF0ZXJpYWwoKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gbG9vcCB0aGUgdmlkZW8gKi9cbiAgICAgICAgbG9vcDogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gYXV0b21hdGljYWxseSBzdGFydCBwbGF5aW5nIHRoZSB2aWRlbyAqL1xuICAgICAgICBhdXRvcGxheTogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gbXV0ZSBzb3VuZCAqL1xuICAgICAgICBtdXRlZDogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIE5hbWUgb2YgdGhlIHRleHR1cmUgcHJvcGVydHkgdG8gc2V0ICovXG4gICAgICAgIHRleHR1cmVQcm9wZXJ0eTogUHJvcGVydHkuc3RyaW5nKCdhdXRvJyksXG4gICAgfTtcbiAgICBpbml0KCkge1xuICAgICAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCd2aWRlby10ZXh0dXJlOiBtYXRlcmlhbCBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgdGhpcy52aWRlby5zcmMgPSB0aGlzLnVybDtcbiAgICAgICAgdGhpcy52aWRlby5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuICAgICAgICB0aGlzLnZpZGVvLnBsYXlzSW5saW5lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWRlby5sb29wID0gdGhpcy5sb29wO1xuICAgICAgICB0aGlzLnZpZGVvLm11dGVkID0gdGhpcy5tdXRlZDtcbiAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXlBZnRlclVzZXJHZXN0dXJlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBseVRleHR1cmUoKSB7XG4gICAgICAgIGNvbnN0IG1hdCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgIGNvbnN0IHNoYWRlciA9IG1hdC5zaGFkZXI7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy50ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5lbmdpbmUsIHRoaXMudmlkZW8pKTtcbiAgICAgICAgaWYgKCFzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZShtYXQsIHRleHR1cmUsIHRoaXMudGV4dHVyZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2hhZGVyJywgc2hhZGVyLCAnbm90IHN1cHBvcnRlZCBieSB2aWRlby10ZXh0dXJlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdyZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrJyBpbiB0aGlzLnZpZGVvKSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvLnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2sodGhpcy51cGRhdGVWaWRlby5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAodGhpcy5sb2FkZWQgJiYgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qIEFwcGx5IHRleHR1cmUgb24gZmlyc3QgZnJhbWUgdXBkYXRlIHJlcXVlc3QgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVZpZGVvKCkge1xuICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWRlby5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKHRoaXMudXBkYXRlVmlkZW8uYmluZCh0aGlzKSk7XG4gICAgfVxufVxuZXhwb3J0IHsgVmlkZW9UZXh0dXJlIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogQWxsb3dzIHN3aXRjaGluZyBhbGwgb3RoZXIgY29tcG9uZW50cyBvbiBhbiBvYmplY3QgdG8gYWN0aXZlL2luYWN0aXZlXG4gKiBkZXBlbmRpbmcgb24gd2hldGhlciBhIFZSL0FSIHNlc3Npb24gaXMgYWN0aXZlLlxuICpcbiAqIFVzZWZ1bCBmb3IgaGlkaW5nIGNvbnRyb2xsZXJzIHVudGlsIHRoZSB1c2VyIGVudGVycyBWUiBmb3IgZXhhbXBsZS5cbiAqL1xuY2xhc3MgVnJNb2RlQWN0aXZlU3dpdGNoIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndnItbW9kZS1hY3RpdmUtc3dpdGNoJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIFdoZW4gY29tcG9uZW50cyBzaG91bGQgYmUgYWN0aXZlOiBJbiBWUiBvciB3aGVuIG5vdCBpbiBWUiAqL1xuICAgICAgICBhY3RpdmF0ZUNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIHR5cGU6IFR5cGUuRW51bSxcbiAgICAgICAgICAgIHZhbHVlczogWydpbiBWUicsICdpbiBub24tVlInXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdpbiBWUicsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBXaGV0aGVyIGNoaWxkIG9iamVjdCdzIGNvbXBvbmVudHMgc2hvdWxkIGJlIGFmZmVjdGVkICovXG4gICAgICAgIGFmZmVjdENoaWxkcmVuOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIH07XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmdldENvbXBvbmVudHModGhpcy5vYmplY3QpO1xuICAgICAgICAvKiBJbml0aWFsIGFjdGl2YXRpb24vZGVhY3RpdmF0aW9uICovXG4gICAgICAgIHRoaXMub25YUlNlc3Npb25FbmQoKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvblN0YXJ0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uRW5kLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLmFkZCh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5yZW1vdmUodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIGdldENvbXBvbmVudHMob2JqKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gb2JqLmdldENvbXBvbmVudHMoKS5maWx0ZXIoKGMpID0+IGMudHlwZSAhPT0gJ3ZyLW1vZGUtYWN0aXZlLXN3aXRjaCcpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB0aGlzLmNvbXBvbmVudHMuY29uY2F0KGNvbXBzKTtcbiAgICAgICAgaWYgKHRoaXMuYWZmZWN0Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IG9iai5jaGlsZHJlbjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbXBvbmVudHMoY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldENvbXBvbmVudHNBY3RpdmUoYWN0aXZlKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gdGhpcy5jb21wb25lbnRzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb21wc1tpXS5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25YUlNlc3Npb25TdGFydCgpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnRzQWN0aXZlKHRoaXMuYWN0aXZhdGVDb21wb25lbnRzID09IDApO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvbkVuZCgpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnRzQWN0aXZlKHRoaXMuYWN0aXZhdGVDb21wb25lbnRzICE9IDApO1xuICAgIH1cbn1cbmV4cG9ydCB7IFZyTW9kZUFjdGl2ZVN3aXRjaCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbGxpZGVyLCBDb2xsaXNpb25Db21wb25lbnQsIENvbXBvbmVudCwgRW1pdHRlciwgTWVzaCwgTWVzaEF0dHJpYnV0ZSwgTWVzaENvbXBvbmVudCwgTWVzaEluZGV4VHlwZSwgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwgfSBmcm9tICcuL3V0aWxzL3dlYnhyLmpzJztcbi8vIEZJWE1FOiBlYXJjdXQgb3ZlcnJpZGVzIGRlZmF1bHQgZXhwb3J0LCBicmVha2luZyBvdXIgdGVzdHNcbmltcG9ydCBlYXJjdXQgZnJvbSAnZWFyY3V0JztcbmNvbnN0IHRlbXBWZWMzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbi8qKiBDb21wdXRlIG1pbmltdW0gYW5kIG1heGl1bSBleHRlbnRzIG9mIGdpdmVuIGxpc3Qgb2YgY29udG91ciBwb2ludHMgKi9cbmZ1bmN0aW9uIGV4dGVudHNGcm9tQ29udG91cihvdXQsIHBvaW50cykge1xuICAgIGlmIChwb2ludHMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgbGV0IGFic01heFggPSBNYXRoLmFicyhwb2ludHNbMF0ueCk7XG4gICAgbGV0IGFic01heFogPSBNYXRoLmFicyhwb2ludHNbMF0ueik7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYWJzTWF4WCA9IE1hdGgubWF4KGFic01heFgsIE1hdGguYWJzKHBvaW50c1tpXS54KSk7XG4gICAgICAgIGFic01heFogPSBNYXRoLm1heChhYnNNYXhaLCBNYXRoLmFicyhwb2ludHNbaV0ueikpO1xuICAgIH1cbiAgICBvdXRbMF0gPSBhYnNNYXhYO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gYWJzTWF4Wjtcbn1cbi8qKiBDaGVjayB3aGV0aGVyIHggbGllcyBiZXR3ZWVuIGEgYW5kIGIgKi9cbmZ1bmN0aW9uIHdpdGhpbih4LCBhLCBiKSB7XG4gICAgaWYgKGEgPiBiKVxuICAgICAgICByZXR1cm4geCA8IGEgJiYgeCA+IGI7XG4gICAgcmV0dXJuIHggPiBhICYmIHggPCBiO1xufVxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGdpdmVuIHBvaW50IG9uIHBsYW5lJ3MgYm91bmRpbmcgYm94IGlzIGluc2lkZSBwbGFuZSdzIHBvbHlnb25cbiAqXG4gKiBAcGFyYW0gcCAzRCBwb2ludCBpbiBwbGFuZSdzIGxvY2FsIHNwYWNlLCBZIHZhbHVlIGlzIGlnbm9yZWQsIHNpbmNlIGl0IGlzIGFzc3VtZWRcbiAqICAgICB0aGF0IHRoZSBwb2ludCB3YXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBwbGFuZSdzIGJvdW5kaW5nIGJveC5cbiAqIEBwYXJhbSBwbGFuZSBYUlBsYW5lIHRoYXQgaGFzIGBYUlBsYW5lLnBvbHlnb25gXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBvaW50IGxpZXMgb24gdGhlIHBsYW5lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvaW50TG9jYWxPblhSUGxhbmVQb2x5Z29uKHAsIHBsYW5lKSB7XG4gICAgY29uc3QgcG9pbnRzID0gcGxhbmUucG9seWdvbjtcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA8IDMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvKiBDb3VudCByYXkgaW50ZXJzZWN0aW9uczogZXZlbiA9PSBpbnNpZGUsIG9kZCA9PSBvdXRzaWRlICovXG4gICAgY29uc3QgcFggPSBwWzBdO1xuICAgIGNvbnN0IHBaID0gcFsyXTtcbiAgICBsZXQgaW50ZXJzZWN0aW9ucyA9IDA7XG4gICAgZm9yIChsZXQgbiA9IDAsIGwgPSBwb2ludHMubGVuZ3RoIC0gMTsgbiA8IHBvaW50cy5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCBhWCA9IHBvaW50c1tsXS54O1xuICAgICAgICBjb25zdCBhWiA9IHBvaW50c1tsXS56O1xuICAgICAgICBjb25zdCBzID0gKHBvaW50c1tuXS56IC0gYVopIC8gKHBvaW50c1tuXS54IC0gYVgpO1xuICAgICAgICBjb25zdCB4ID0gTWF0aC5hYnMoKHBaIC0gYVopIC8gcyk7XG4gICAgICAgIGlmICh4ID49IDAuMCAmJiB4IDw9IDEuMCAmJiB3aXRoaW4oeCArIHBYLCBhWCwgcG9pbnRzW25dLngpKVxuICAgICAgICAgICAgKytpbnRlcnNlY3Rpb25zO1xuICAgICAgICBsID0gbjtcbiAgICB9XG4gICAgcmV0dXJuIChpbnRlcnNlY3Rpb25zICYgMSkgPT0gMDtcbn1cbi8qKlxuICogQ2hlY2sgd2hldGhlciBnaXZlbiBwb2ludCBvbiBwbGFuZSdzIGJvdW5kaW5nIGJveCBpcyBpbnNpZGUgcGxhbmUncyBwb2x5Z29uXG4gKlxuICogQHBhcmFtIHAgM0QgcG9pbnQgdG8gdGVzdC4gSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBwb2ludCB3YXMgY2hlY2tlZCBhZ2FpbnN0XG4gKiAgICAgdGhlIHBsYW5lJ3MgYm91bmRpbmcgYm94IGJlZm9yZWhhbmQuXG4gKiBAcGFyYW0gcGxhbmUgWFJQbGFuZSB0aGF0IGhhcyBgWFJQbGFuZS5wb2x5Z29uYFxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBwb2ludCBsaWVzIG9uIHRoZSBwbGFuZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQb2ludFdvcmxkT25YUlBsYW5lUG9seWdvbihvYmplY3QsIHAsIHBsYW5lKSB7XG4gICAgaWYgKHBsYW5lLnBvbHlnb24ubGVuZ3RoIDwgMylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlzUG9pbnRMb2NhbE9uWFJQbGFuZVBvbHlnb24ob2JqZWN0LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRlbXBWZWMzLCBwKSwgcGxhbmUpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBwbGFuZSBtZXNoIGZyb20gYSBsaXN0IG9mIGNvbnRvdXIgcG9pbnRzXG4gKlxuICogQHBhcmFtIGVuZ2luZSBFbmdpbmUgdG8gY3JlYXRlIHRoZSBtZXNoIHdpdGhcbiAqIEBwYXJhbSBwb2ludHMgQ29udG91ciBwb2ludHNcbiAqIEBwYXJhbSBtZXNoVG9VcGRhdGUgT3B0aW9uYWwgbWVzaCB0byB1cGRhdGUgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBvbmUuXG4gKi9cbmZ1bmN0aW9uIHBsYW5lTWVzaEZyb21Db250b3VyKGVuZ2luZSwgcG9pbnRzLCBtZXNoVG9VcGRhdGUgPSBudWxsKSB7XG4gICAgY29uc3QgdmVydGV4Q291bnQgPSBwb2ludHMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpO1xuICAgIGZvciAobGV0IGkgPSAwLCBkID0gMDsgaSA8IHZlcnRleENvdW50OyArK2ksIGQgKz0gMikge1xuICAgICAgICB2ZXJ0aWNlc1tkXSA9IHBvaW50c1tpXS54O1xuICAgICAgICB2ZXJ0aWNlc1tkICsgMV0gPSBwb2ludHNbaV0uejtcbiAgICB9XG4gICAgY29uc3QgdHJpYW5nbGVzID0gZWFyY3V0KHZlcnRpY2VzKTtcbiAgICBjb25zdCBtZXNoID0gbWVzaFRvVXBkYXRlIHx8XG4gICAgICAgIG5ldyBNZXNoKGVuZ2luZSwge1xuICAgICAgICAgICAgdmVydGV4Q291bnQsXG4gICAgICAgICAgICAvKiBBc3N1bXB0aW9uIGhlcmUgdGhhdCB3ZSB3aWxsIG5ldmVyIGhhdmUgbW9yZSB0aGFuIDI1NiBwb2ludHNcbiAgICAgICAgICAgICAqIGluIHRoZSBkZXRlY3RlZCBwbGFuZSBtZXNoZXMhICovXG4gICAgICAgICAgICBpbmRleFR5cGU6IE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlLFxuICAgICAgICAgICAgaW5kZXhEYXRhOiB0cmlhbmdsZXMsXG4gICAgICAgIH0pO1xuICAgIGlmIChtZXNoLnZlcnRleENvdW50ICE9PSB2ZXJ0ZXhDb3VudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3ZlcnRleENvdW50IG9mIG1lc2hUb1VwZGF0ZSBkaWQgbm90IG1hdGNoIHJlcXVpcmVkIHZlcnRleENvdW50Jyk7XG4gICAgICAgIHJldHVybiBtZXNoO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAgICBjb25zdCB0ZXh0dXJlQ29vcmRzID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5UZXh0dXJlQ29vcmRpbmF0ZSk7XG4gICAgY29uc3Qgbm9ybWFscyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuTm9ybWFsKTtcbiAgICB0ZW1wVmVjM1sxXSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIHMgPSAwOyBpIDwgdmVydGV4Q291bnQ7ICsraSwgcyArPSAyKSB7XG4gICAgICAgIHRlbXBWZWMzWzBdID0gdmVydGljZXNbc107XG4gICAgICAgIHRlbXBWZWMzWzJdID0gdmVydGljZXNbcyArIDFdO1xuICAgICAgICBwb3NpdGlvbnMuc2V0KGksIHRlbXBWZWMzKTtcbiAgICB9XG4gICAgdGV4dHVyZUNvb3Jkcz8uc2V0KDAsIHZlcnRpY2VzKTtcbiAgICBpZiAobm9ybWFscykge1xuICAgICAgICB0ZW1wVmVjM1swXSA9IDA7XG4gICAgICAgIHRlbXBWZWMzWzFdID0gMTtcbiAgICAgICAgdGVtcFZlYzNbMl0gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRleENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG5vcm1hbHMuc2V0KGksIHRlbXBWZWMzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobWVzaFRvVXBkYXRlKVxuICAgICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIHJldHVybiBtZXNoO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBtZXNoZXMgYW5kIGNvbGxpc2lvbnMgZm9yIFhSUGxhbmVzIHVzaW5nIFtXZWJYUiBEZXZpY2UgQVBJIC0gUGxhbmUgRGV0ZWN0aW9uXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL3JlYWwtd29ybGQtZ2VvbWV0cnkvcGxhbmUtZGV0ZWN0aW9uLmh0bWwpLlxuICovXG5jbGFzcyBQbGFuZURldGVjdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3BsYW5lLWRldGVjdGlvbic7XG4gICAgLyoqXG4gICAgICogTWF0ZXJpYWwgdG8gYXNzaWduIHRvIGNyZWF0ZWQgcGxhbmUgbWVzaGVzIG9yIGBudWxsYCBpZiBtZXNoZXMgc2hvdWxkIG5vdCBiZSBjcmVhdGVkLlxuICAgICAqL1xuICAgIHBsYW5lTWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIENvbGxpc2lvbiBtYXNrIHRvIGFzc2lnbiB0byBuZXdseSBjcmVhdGVkIGNvbGxpc2lvbiBjb21wb25lbnRzIG9yIGEgbmVnYXRpdmUgdmFsdWUgaWZcbiAgICAgKiBjb2xsaXNpb24gY29tcG9uZW50cyBzaG91bGQgbm90IGJlIGNyZWF0ZWQuXG4gICAgICovXG4gICAgY29sbGlzaW9uTWFzayA9IC0xO1xuICAgIC8qKiBNYXAgb2YgYWxsIHBsYW5lcyBhbmQgdGhlaXIgbGFzdCB1cGRhdGVkIHRpbWVzdGFtcHMgKi9cbiAgICBwbGFuZXMgPSBuZXcgTWFwKCk7XG4gICAgLyoqIE9iamVjdHMgZ2VuZXJhdGVkIGZvciBlYWNoIFhSUGxhbmUgKi9cbiAgICBwbGFuZU9iamVjdHMgPSBuZXcgTWFwKCk7XG4gICAgLyoqIENhbGxlZCB3aGVuIGEgcGxhbmUgc3RhcnRzIHRyYWNraW5nICovXG4gICAgb25QbGFuZUZvdW5kID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogQ2FsbGVkIHdoZW4gYSBwbGFuZSBzdG9wcyB0cmFja2luZyAqL1xuICAgIG9uUGxhbmVMb3N0ID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUueHI/LmZyYW1lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS54ci5mcmFtZS5kZXRlY3RlZFBsYW5lcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdwbGFuZS1kZXRlY3Rpb246IFdlYlhSIGZlYXR1cmUgbm90IGF2YWlsYWJsZS4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBkZXRlY3RlZFBsYW5lcyA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmRldGVjdGVkUGxhbmVzO1xuICAgICAgICBmb3IgKGNvbnN0IFtwbGFuZSwgX10gb2YgdGhpcy5wbGFuZXMpIHtcbiAgICAgICAgICAgIGlmICghZGV0ZWN0ZWRQbGFuZXMuaGFzKHBsYW5lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuI3BsYW5lTG9zdChwbGFuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGV0ZWN0ZWRQbGFuZXMuZm9yRWFjaCgocGxhbmUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYW5lcy5oYXMocGxhbmUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsYW5lLmxhc3RDaGFuZ2VkVGltZSA+IHRoaXMucGxhbmVzLmdldChwbGFuZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcGxhbmVVcGRhdGUocGxhbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuI3BsYW5lRm91bmQocGxhbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jcGxhbmVVcGRhdGVQb3NlKHBsYW5lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICNwbGFuZUxvc3QocGxhbmUpIHtcbiAgICAgICAgdGhpcy5wbGFuZXMuZGVsZXRlKHBsYW5lKTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucGxhbmVPYmplY3RzLmdldChwbGFuZSk7XG4gICAgICAgIHRoaXMub25QbGFuZUxvc3Qubm90aWZ5KHBsYW5lLCBvKTtcbiAgICAgICAgLyogVXNlciBtaWdodCBkZXN0cm95IHRoZSBvYmplY3QgKi9cbiAgICAgICAgaWYgKG8ub2JqZWN0SWQgPiAwKVxuICAgICAgICAgICAgby5kZXN0cm95KCk7XG4gICAgfVxuICAgICNwbGFuZUZvdW5kKHBsYW5lKSB7XG4gICAgICAgIHRoaXMucGxhbmVzLnNldChwbGFuZSwgcGxhbmUubGFzdENoYW5nZWRUaW1lKTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdCh0aGlzLm9iamVjdCk7XG4gICAgICAgIHRoaXMucGxhbmVPYmplY3RzLnNldChwbGFuZSwgbyk7XG4gICAgICAgIGlmICh0aGlzLnBsYW5lTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIG8uYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBtZXNoOiBwbGFuZU1lc2hGcm9tQ29udG91cih0aGlzLmVuZ2luZSwgcGxhbmUucG9seWdvbiksXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMucGxhbmVNYXRlcmlhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbk1hc2sgPj0gMCkge1xuICAgICAgICAgICAgZXh0ZW50c0Zyb21Db250b3VyKHRlbXBWZWMzLCBwbGFuZS5wb2x5Z29uKTtcbiAgICAgICAgICAgIHRlbXBWZWMzWzFdID0gMC4wMjU7XG4gICAgICAgICAgICBvLmFkZENvbXBvbmVudChDb2xsaXNpb25Db21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBncm91cDogdGhpcy5jb2xsaXNpb25NYXNrLFxuICAgICAgICAgICAgICAgIGNvbGxpZGVyOiBDb2xsaWRlci5Cb3gsXG4gICAgICAgICAgICAgICAgZXh0ZW50czogdGVtcFZlYzMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uUGxhbmVGb3VuZC5ub3RpZnkocGxhbmUsIG8pO1xuICAgIH1cbiAgICAjcGxhbmVVcGRhdGUocGxhbmUpIHtcbiAgICAgICAgdGhpcy5wbGFuZXMuc2V0KHBsYW5lLCBwbGFuZS5sYXN0Q2hhbmdlZFRpbWUpO1xuICAgICAgICBjb25zdCBwbGFuZU1lc2ggPSB0aGlzLnBsYW5lT2JqZWN0cy5nZXQocGxhbmUpLmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcbiAgICAgICAgaWYgKCFwbGFuZU1lc2gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBsYW5lTWVzaEZyb21Db250b3VyKHRoaXMuZW5naW5lLCBwbGFuZS5wb2x5Z29uLCBwbGFuZU1lc2gubWVzaCk7XG4gICAgfVxuICAgICNwbGFuZVVwZGF0ZVBvc2UocGxhbmUpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucGxhbmVPYmplY3RzLmdldChwbGFuZSk7XG4gICAgICAgIGNvbnN0IHBvc2UgPSB0aGlzLmVuZ2luZS54ci5mcmFtZS5nZXRQb3NlKHBsYW5lLnBsYW5lU3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgIGlmICghcG9zZSkge1xuICAgICAgICAgICAgby5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwobywgcG9zZS50cmFuc2Zvcm0pO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm1hdGVyaWFsKClcbl0sIFBsYW5lRGV0ZWN0aW9uLnByb3RvdHlwZSwgXCJwbGFuZU1hdGVyaWFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoKVxuXSwgUGxhbmVEZXRlY3Rpb24ucHJvdG90eXBlLCBcImNvbGxpc2lvbk1hc2tcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFBsYW5lRGV0ZWN0aW9uIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHZlYzMsIG1hdDQsIHF1YXQsIHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IFZSTV9ST0xMX0FYRVMgPSB7XG4gICAgWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIFk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBaOiBbMC4wLCAwLjAsIDEuMF0sXG59O1xuY29uc3QgVlJNX0FJTV9BWEVTID0ge1xuICAgIFBvc2l0aXZlWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIE5lZ2F0aXZlWDogWy0xLjAsIDAuMCwgMC4wXSxcbiAgICBQb3NpdGl2ZVk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBOZWdhdGl2ZVk6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgUG9zaXRpdmVaOiBbMC4wLCAwLjAsIDEuMF0sXG4gICAgTmVnYXRpdmVaOiBbMC4wLCAwLjAsIC0xLjBdLFxufTtcbi8qKlxuICogQ29tcG9uZW50IGZvciBsb2FkaW5nIGFuZCBoYW5kbGluZyBWUk0gMS4wIG1vZGVscy5cbiAqXG4gKiBQb3Npbmcgb2YgdGhlIG1vZGVsIHNob3VsZCBiZSBkb25lIGV4Y2x1c2l2ZWx5IGJ5IHJvdGF0aW5nIHRoZSBib25lcy4gVGhlc2UgY2FuIGJlXG4gKiBhY2Nlc3NlZCB1c2luZyB0aGUgYC5ib25lc2AgcHJvcGVydHkgYW5kIGZvbGxvdyB0aGUgVlJNIGJvbmUgbmFtaW5nLiBOb3RlIHRoYXQgbm90XG4gKiBhbGwgVlJNIG1vZGVscyB3aWxsIGhhdmUgYWxsIHBvc3NpYmxlIGJvbmVzLiBUaGUgcmVzdCBwb3NlIChULXBvc2UpIGlzIGNhcHR1cmVkIGluXG4gKiB0aGUgYC5yZXN0UG9zZWAgcHJvcGVydHkuIFJlc2V0dGluZyBhIGJvbmUgdG8gaXRzIHJlc3QgcG9zZSBjYW4gYmUgZG9uZSBhcyBmb2xsb3dzOlxuICogYGBganNcbiAqIHZybUNvbXBvbmVudC5ib25lc1t2cm1Cb25lTmFtZV0ucm90YXRpb25Mb2NhbCA9IHZybUNvbXBvbmVudC5yZXN0UG9zZVt2cm1Cb25lTmFtZV07XG4gKiBgYGBcbiAqXG4gKiBNb3ZpbmcgdGhlIG1vZGVsIHRocm91Z2ggdGhlIHdvcmxkIHNob3VsZCBiZSBkb25lIGJ5IG1vdmluZyB0aGUgb2JqZWN0IHRoaXMgY29tcG9uZW50XG4gKiBpcyBhdHRhY2hlZCB0by4gSW4gb3RoZXIgd29yZHMsIGJ5IG1vdmluZyB0aGUgcm9vdCBvZiB0aGUgVlJNIG1vZGVsLiBUaGUgYm9uZXMgYW5kIGFueVxuICogZGVzY2VuZGFudCBvYmplY3RzIHNob3VsZCAqbm90KiBiZSB1c2VkIHRvIG1vdmUgdGhlIFZSTSBtb2RlbC5cbiAqXG4gKiBUaGUgY29yZSBleHRlbnNpb24gYFZSTUNfdnJtYCBhcyB3ZWxsIGFzIHRoZWBWUk1DX3NwcmluZ0JvbmVgIGFuZCBgVlJNQ19ub2RlX2NvbnN0cmFpbnRgXG4gKiBleHRlbnNpb25zIGFyZSBzdXBwb3J0ZWQuXG4gKlxuICogKipMaW1pdGF0aW9uczoqKlxuICogLSBObyBzdXBwb3J0IGZvciBgVlJNQ19tYXRlcmlhbF9tdG9vbmBcbiAqIC0gRXhwcmVzc2lvbnMgYXJlbid0IHN1cHBvcnRlZFxuICogLSBFeHByZXNzaW9uIGJhc2VkIGxvb2tBdCBpc24ndCBzdXBwb3J0ZWRcbiAqIC0gTWVzaCBhbm5vdGF0aW9uIG1vZGUgYGF1dG9gIGlzIG5vdCBzdXBwb3J0ZWQgKGZpcnN0IHBlcnNvbiBtb2RlKVxuICovXG5jbGFzcyBWcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2cm0nO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVVJMIHRvIGEgVlJNIGZpbGUgdG8gbG9hZCAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcgfSxcbiAgICAgICAgLyoqIE9iamVjdCB0aGUgVlJNIGlzIGxvb2tpbmcgYXQgKi9cbiAgICAgICAgbG9va0F0VGFyZ2V0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgfTtcbiAgICAvKiogTWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgVlJNIG1vZGVsICovXG4gICAgbWV0YSA9IG51bGw7XG4gICAgLyoqIFRoZSBodW1hbm9pZCBib25lcyBvZiB0aGUgVlJNIG1vZGVsICovXG4gICAgYm9uZXMgPSB7XG4gICAgICAgIC8qIFRvcnNvICovXG4gICAgICAgIGhpcHM6IG51bGwsXG4gICAgICAgIHNwaW5lOiBudWxsLFxuICAgICAgICBjaGVzdDogbnVsbCxcbiAgICAgICAgdXBwZXJDaGVzdDogbnVsbCxcbiAgICAgICAgbmVjazogbnVsbCxcbiAgICAgICAgLyogSGVhZCAqL1xuICAgICAgICBoZWFkOiBudWxsLFxuICAgICAgICBsZWZ0RXllOiBudWxsLFxuICAgICAgICByaWdodEV5ZTogbnVsbCxcbiAgICAgICAgamF3OiBudWxsLFxuICAgICAgICAvKiBMZWdzICovXG4gICAgICAgIGxlZnRVcHBlckxlZzogbnVsbCxcbiAgICAgICAgbGVmdExvd2VyTGVnOiBudWxsLFxuICAgICAgICBsZWZ0Rm9vdDogbnVsbCxcbiAgICAgICAgbGVmdFRvZXM6IG51bGwsXG4gICAgICAgIHJpZ2h0VXBwZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0TG93ZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0Rm9vdDogbnVsbCxcbiAgICAgICAgcmlnaHRUb2VzOiBudWxsLFxuICAgICAgICAvKiBBcm1zICovXG4gICAgICAgIGxlZnRTaG91bGRlcjogbnVsbCxcbiAgICAgICAgbGVmdFVwcGVyQXJtOiBudWxsLFxuICAgICAgICBsZWZ0TG93ZXJBcm06IG51bGwsXG4gICAgICAgIGxlZnRIYW5kOiBudWxsLFxuICAgICAgICByaWdodFNob3VsZGVyOiBudWxsLFxuICAgICAgICByaWdodFVwcGVyQXJtOiBudWxsLFxuICAgICAgICByaWdodExvd2VyQXJtOiBudWxsLFxuICAgICAgICByaWdodEhhbmQ6IG51bGwsXG4gICAgICAgIC8qIEZpbmdlcnMgKi9cbiAgICAgICAgbGVmdFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgbGVmdFRodW1iUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRUaHVtYkRpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRJbmRleEludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4RGlzdGFsOiBudWxsLFxuICAgICAgICBsZWZ0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVEaXN0YWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0UmluZ0Rpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgcmlnaHRUaHVtYlByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICByaWdodE1pZGRsZURpc3RhbDogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0UmluZ0ludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZUludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRMaXR0bGVEaXN0YWw6IG51bGwsXG4gICAgfTtcbiAgICAvKiogUm90YXRpb25zIG9mIHRoZSBib25lcyBpbiB0aGUgcmVzdCBwb3NlIChULXBvc2UpICovXG4gICAgcmVzdFBvc2UgPSB7fTtcbiAgICAvKiBBbGwgbm9kZSBjb25zdHJhaW50cywgb3JkZXJlZCB0byBkZWFsIHdpdGggZGVwZW5kZW5jaWVzICovXG4gICAgX25vZGVDb25zdHJhaW50cyA9IFtdO1xuICAgIC8qIFZSTUNfc3ByaW5nQm9uZSBjaGFpbnMgKi9cbiAgICBfc3ByaW5nQ2hhaW5zID0gW107XG4gICAgLyogU3BoZXJpY2FsIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX3NwaGVyZUNvbGxpZGVycyA9IFtdO1xuICAgIC8qIENhcHN1bGUgc2hhcGVkIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX2NhcHN1bGVDb2xsaWRlcnMgPSBbXTtcbiAgICAvKiBJbmRpY2F0ZXMgd2hpY2ggbWVzaGVzIGFyZSByZW5kZXJlZCBpbiBmaXJzdC90aGlyZCBwZXJzb24gdmlld3MgKi9cbiAgICBfZmlyc3RQZXJzb25Bbm5vdGF0aW9ucyA9IFtdO1xuICAgIC8qIENvbnRhaW5zIGRldGFpbHMgZm9yIChib25lIHR5cGUpIGxvb2tBdCBiZWhhdmlvdXIgKi9cbiAgICBfbG9va0F0ID0gbnVsbDtcbiAgICAvKiBXaGV0aGVyIG9yIG5vdCB0aGUgVlJNIGNvbXBvbmVudCBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRoIGBpbml0aWFsaXplVnJtYCAqL1xuICAgIF9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWMyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBWM0EgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wVjNCID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGVtcFF1YXQgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEEgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEIgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wTWF0NEEgPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdDIgPSBxdWF0Mi5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGFpbFRvU2hhcGUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl9oZWFkVG9UYWlsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5faW5lcnRpYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3N0aWZmbmVzcyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX2V4dGVybmFsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fcmlnaHRWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAxLCAwLCAwKTtcbiAgICAgICAgdGhpcy5fdXBWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAwLCAxLCAwKTtcbiAgICAgICAgdGhpcy5fZm9yd2FyZFZlY3RvciA9IHZlYzMuc2V0KHZlYzMuY3JlYXRlKCksIDAsIDAsIDEpO1xuICAgICAgICB0aGlzLl9pZGVudGl0eVF1YXQgPSBxdWF0LmlkZW50aXR5KHF1YXQuY3JlYXRlKCkpO1xuICAgICAgICB0aGlzLl9yYWQyZGVnID0gMTgwLjAgLyBNYXRoLlBJO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNyYykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndnJtOiBzcmMgcHJvcGVydHkgbm90IHNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuc3JjLCB7IGxvYWRHbHRmRXh0ZW5zaW9uczogdHJ1ZSB9KVxuICAgICAgICAgICAgLnRoZW4oKHsgcm9vdCwgZXh0ZW5zaW9ucyB9KSA9PiB7XG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiAoY2hpbGQucGFyZW50ID0gdGhpcy5vYmplY3QpKTtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucyk7XG4gICAgICAgICAgICByb290LmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgVlJNIGdsVEYgZXh0ZW5zaW9ucyBhbmQgaW5pdGlhbGl6ZXMgdGhlIHZybSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtHTFRGRXh0ZW5zaW9uc30gZXh0ZW5zaW9ucyBUaGUgZ2xURiBleHRlbnNpb25zIGZvciB0aGUgVlJNIG1vZGVsXG4gICAgICovXG4gICAgX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWUk0gY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBWUk1DX3ZybSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ192cm0nXTtcbiAgICAgICAgaWYgKCFWUk1DX3ZybSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ01pc3NpbmcgVlJNIGV4dGVuc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0uc3BlY1ZlcnNpb24gIT09ICcxLjAnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVW5zdXBwb3J0ZWQgVlJNIHZlcnNpb24sIG9ubHkgMS4wIGlzIHN1cHBvcnRlZCwgYnV0IGVuY291bnRlcmVkICcke1ZSTUNfdnJtLnNwZWNWZXJzaW9ufSdgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldGEgPSBWUk1DX3ZybS5tZXRhO1xuICAgICAgICB0aGlzLl9wYXJzZUh1bWFub2lkKFZSTUNfdnJtLmh1bWFub2lkLCBleHRlbnNpb25zKTtcbiAgICAgICAgaWYgKFZSTUNfdnJtLmZpcnN0UGVyc29uKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUZpcnN0UGVyc29uKFZSTUNfdnJtLmZpcnN0UGVyc29uLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0ubG9va0F0KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUxvb2tBdChWUk1DX3ZybS5sb29rQXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbmRBbmRQYXJzZU5vZGVDb25zdHJhaW50cyhleHRlbnNpb25zKTtcbiAgICAgICAgY29uc3Qgc3ByaW5nQm9uZSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ19zcHJpbmdCb25lJ107XG4gICAgICAgIGlmIChzcHJpbmdCb25lKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFuZEluaXRpYWxpemVTcHJpbmdCb25lcyhzcHJpbmdCb25lLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZUh1bWFub2lkKGh1bWFub2lkLCBleHRlbnNpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgYm9uZU5hbWUgaW4gaHVtYW5vaWQuaHVtYW5Cb25lcykge1xuICAgICAgICAgICAgaWYgKCEoYm9uZU5hbWUgaW4gdGhpcy5ib25lcykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVucmVjb2duaXplZCBib25lICcke2JvbmVOYW1lfSdgKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBodW1hbm9pZC5odW1hbkJvbmVzW2JvbmVOYW1lXS5ub2RlO1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBleHRlbnNpb25zLmlkTWFwcGluZ1tub2RlXTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXNbYm9uZU5hbWVdID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChvYmplY3RJZCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RQb3NlW2JvbmVOYW1lXSA9IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCB0aGlzLmJvbmVzW2JvbmVOYW1lXS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcGFyc2VGaXJzdFBlcnNvbihmaXJzdFBlcnNvbiwgZXh0ZW5zaW9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IG1lc2hBbm5vdGF0aW9uIG9mIGZpcnN0UGVyc29uLm1lc2hBbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW21lc2hBbm5vdGF0aW9uLm5vZGVdKSxcbiAgICAgICAgICAgICAgICBmaXJzdFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aGlyZFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzd2l0Y2ggKG1lc2hBbm5vdGF0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJzdFBlcnNvbk9ubHknOlxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uLnRoaXJkUGVyc29uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RoaXJkUGVyc29uT25seSc6XG4gICAgICAgICAgICAgICAgICAgIGFubm90YXRpb24uZmlyc3RQZXJzb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGaXJzdCBwZXJzb24gbWVzaCBhbm5vdGF0aW9uIHR5cGUgJ2F1dG8nIGlzIG5vdCBzdXBwb3J0ZWQsIHRyZWF0aW5nIGFzICdib3RoJyFcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgbWVzaCBhbm5vdGF0aW9uIHR5cGUgJyR7bWVzaEFubm90YXRpb24udHlwZX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5wdXNoKGFubm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUxvb2tBdChsb29rQXQpIHtcbiAgICAgICAgaWYgKGxvb2tBdC50eXBlICE9PSAnYm9uZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5zdXBwb3J0ZWQgbG9va0F0IHR5cGUgJyR7bG9va0F0LnR5cGV9Jywgb25seSAnYm9uZScgaXMgc3VwcG9ydGVkYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VSYW5nZU1hcCA9IChyYW5nZU1hcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnB1dE1heFZhbHVlOiByYW5nZU1hcC5pbnB1dE1heFZhbHVlLFxuICAgICAgICAgICAgICAgIG91dHB1dFNjYWxlOiByYW5nZU1hcC5vdXRwdXRTY2FsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2xvb2tBdCA9IHtcbiAgICAgICAgICAgIG9mZnNldEZyb21IZWFkQm9uZTogbG9va0F0Lm9mZnNldEZyb21IZWFkQm9uZSB8fCBbMCwgMCwgMF0sXG4gICAgICAgICAgICBob3Jpem9udGFsSW5uZXI6IHBhcnNlUmFuZ2VNYXAobG9va0F0LnJhbmdlTWFwSG9yaXpvbnRhbElubmVyKSxcbiAgICAgICAgICAgIGhvcml6b250YWxPdXRlcjogcGFyc2VSYW5nZU1hcChsb29rQXQucmFuZ2VNYXBIb3Jpem9udGFsT3V0ZXIpLFxuICAgICAgICAgICAgdmVydGljYWxEb3duOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsRG93biksXG4gICAgICAgICAgICB2ZXJ0aWNhbFVwOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsVXApLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfZmluZEFuZFBhcnNlTm9kZUNvbnN0cmFpbnRzKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgY29uc3QgdHJhdmVyc2UgPSAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlRXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMubm9kZVtvYmplY3Qub2JqZWN0SWRdO1xuICAgICAgICAgICAgaWYgKG5vZGVFeHRlbnNpb25zICYmICdWUk1DX25vZGVfY29uc3RyYWludCcgaW4gbm9kZUV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlQ29uc3RyYWludEV4dGVuc2lvbiA9IG5vZGVFeHRlbnNpb25zWydWUk1DX25vZGVfY29uc3RyYWludCddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBub2RlQ29uc3RyYWludEV4dGVuc2lvbi5jb25zdHJhaW50O1xuICAgICAgICAgICAgICAgIGxldCB0eXBlLCBheGlzO1xuICAgICAgICAgICAgICAgIGlmICgncm9sbCcgaW4gY29uc3RyYWludCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ3JvbGwnO1xuICAgICAgICAgICAgICAgICAgICBheGlzID0gVlJNX1JPTExfQVhFU1tjb25zdHJhaW50LnJvbGwucm9sbEF4aXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWltJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnYWltJztcbiAgICAgICAgICAgICAgICAgICAgYXhpcyA9IFZSTV9BSU1fQVhFU1tjb25zdHJhaW50LmFpbS5haW1BeGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3JvdGF0aW9uJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncm90YXRpb24nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW2NvbnN0cmFpbnRbdHlwZV0uc291cmNlXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vZGVDb25zdHJhaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpczogYXhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogY29uc3RyYWludFt0eXBlXS53ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXN0IHBvc2UgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBvYmplY3Qucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VSZXN0TG9jYWxSb3RhdGlvbjogcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIHNvdXJjZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVJlc3RMb2NhbFJvdGF0aW9uSW52OiBxdWF0LmludmVydChxdWF0LmNyZWF0ZSgpLCBzb3VyY2Uucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbnJlY29nbml6ZWQgb3IgaW52YWxpZCBWUk1DX25vZGVfY29uc3RyYWludCwgaWdub3JpbmcgaXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG9iamVjdC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdHJhdmVyc2UodGhpcy5vYmplY3QpO1xuICAgIH1cbiAgICBfcGFyc2VBbmRJbml0aWFsaXplU3ByaW5nQm9uZXMoc3ByaW5nQm9uZSwgZXh0ZW5zaW9ucykge1xuICAgICAgICBjb25zdCBjb2xsaWRlcnMgPSAoc3ByaW5nQm9uZS5jb2xsaWRlcnMgfHwgW10pLm1hcCgoY29sbGlkZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlVHlwZSA9ICdjYXBzdWxlJyBpbiBjb2xsaWRlci5zaGFwZSA/ICdjYXBzdWxlJyA6ICdzcGhlcmUnO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgICAgICBvYmplY3Q6IHRoaXMuZW5naW5lLndyYXBPYmplY3QoZXh0ZW5zaW9ucy5pZE1hcHBpbmdbY29sbGlkZXIubm9kZV0pLFxuICAgICAgICAgICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlzQ2Fwc3VsZTogc2hhcGVUeXBlID09PSAnY2Fwc3VsZScsXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5yYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IGNvbGxpZGVyLnNoYXBlW3NoYXBlVHlwZV0udGFpbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhY2hlOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWQ6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMgPSBjb2xsaWRlcnMuZmlsdGVyKChjKSA9PiAhYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICB0aGlzLl9jYXBzdWxlQ29sbGlkZXJzID0gY29sbGlkZXJzLmZpbHRlcigoYykgPT4gYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICBjb25zdCBjb2xsaWRlckdyb3VwcyA9IChzcHJpbmdCb25lLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5tYXAoKGdyb3VwKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogZ3JvdXAubmFtZSxcbiAgICAgICAgICAgIGNvbGxpZGVyczogZ3JvdXAuY29sbGlkZXJzLm1hcCgoYykgPT4gY29sbGlkZXJzW2NdKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBmb3IgKGNvbnN0IHNwcmluZyBvZiBzcHJpbmdCb25lLnNwcmluZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGpvaW50cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2ludCBvZiBzcHJpbmcuam9pbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nSm9pbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFJhZGl1czogMC4wLFxuICAgICAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IDEuMCxcbiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eVBvd2VyOiAwLjAsXG4gICAgICAgICAgICAgICAgICAgIGdyYXZpdHlEaXI6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgICAgICAgICAgICAgICAgIGRyYWdGb3JjZTogMC41LFxuICAgICAgICAgICAgICAgICAgICBub2RlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3ByaW5nSm9pbnQsIGpvaW50KTtcbiAgICAgICAgICAgICAgICBzcHJpbmdKb2ludC5ub2RlID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmdKb2ludC5ub2RlXSk7XG4gICAgICAgICAgICAgICAgam9pbnRzLnB1c2goc3ByaW5nSm9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3ByaW5nQ2hhaW5Db2xsaWRlcnMgPSAoc3ByaW5nLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5mbGF0TWFwKChjZykgPT4gY29sbGlkZXJHcm91cHNbY2ddLmNvbGxpZGVycyk7XG4gICAgICAgICAgICB0aGlzLl9zcHJpbmdDaGFpbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogc3ByaW5nLm5hbWUsXG4gICAgICAgICAgICAgICAgY2VudGVyOiBzcHJpbmcuY2VudGVyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmcuY2VudGVyXSlcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGpvaW50cyxcbiAgICAgICAgICAgICAgICBzcGhlcmVDb2xsaWRlcnM6IHNwcmluZ0NoYWluQ29sbGlkZXJzLmZpbHRlcigoYykgPT4gIWMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgICAgICBjYXBzdWxlQ29sbGlkZXJzOiBzcHJpbmdDaGFpbkNvbGxpZGVycy5maWx0ZXIoKGMpID0+IGMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaXRpYWxpemUgc3ByaW5nIGJvbmUgam9pbnQgc3RhdGUgKi9cbiAgICAgICAgZm9yIChjb25zdCBzcHJpbmdDaGFpbiBvZiB0aGlzLl9zcHJpbmdDaGFpbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ByaW5nQ2hhaW4uam9pbnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nQm9uZVBvc2l0aW9uID0gc3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbiA9IGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib25lRGlyZWN0aW9uID0gdmVjMy5zdWJ0cmFjdCh0aGlzLl90ZW1wVjNBLCBzcHJpbmdCb25lUG9zaXRpb24sIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWw6IGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFpbDogdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBzcHJpbmdCb25lSm9pbnQubm9kZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsVHJhbnNmb3JtSW52ZXJ0OiBxdWF0Mi5pbnZlcnQocXVhdDIuY3JlYXRlKCksIHNwcmluZ0JvbmVKb2ludC5ub2RlLnRyYW5zZm9ybUxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgYm9uZUF4aXM6IHZlYzMubm9ybWFsaXplKHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLl90ZW1wVjMpKSxcbiAgICAgICAgICAgICAgICAgICAgLyogRW5zdXJlIGJvbmUgbGVuZ3RoIGlzIGF0IGxlYXN0IDFjbSB0byBhdm9pZCBqaXR0ZXJ5IGJlaGF2aW91ciBmcm9tIHplcm8tbGVuZ3RoIGJvbmVzICovXG4gICAgICAgICAgICAgICAgICAgIGJvbmVMZW5ndGg6IE1hdGgubWF4KDAuMDEsIHZlYzMubGVuZ3RoKGJvbmVEaXJlY3Rpb24pKSxcbiAgICAgICAgICAgICAgICAgICAgLyogVGFpbCBwb3NpdGlvbnMgaW4gY2VudGVyIHNwYWNlLCBpZiBuZWVkZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWxDZW50ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYWlsQ2VudGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHNwcmluZ0NoYWluLmNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wcmV2VGFpbENlbnRlciA9IHNwcmluZ0NoYWluLmNlbnRlci50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh2ZWMzLmNyZWF0ZSgpLCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRUYWlsQ2VudGVyID0gdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3ByaW5nQm9uZUpvaW50LnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiAxLiBSZXNvbHZlIGh1bWFub2lkIGJvbmVzIChwZXJmb3JtZWQgYnkgdXNlcikgKi9cbiAgICAgICAgLyogMi4gUmVzb2x2ZSBMb29rQXQgKGJvbmUgdHlwZSkgYXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBoZWFkIGlzIGRldGVybWluZWQgKi9cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUxvb2tBdCgpO1xuICAgICAgICAvKiAzLiBFeHByZXNzaW9uIHVwZGF0ZSAoVE9ETykgKi9cbiAgICAgICAgLyogNC4gQXBwbHkgRXhwcmVzc2lvbiAoVE9ETykgKi9cbiAgICAgICAgLyogNS4gUmVzb2x2ZSBjb25zdHJhaW50cyAqL1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ29uc3RyYWludHMoKTtcbiAgICAgICAgLyogNi4gUmVzb2x2ZSBTcHJpbmcgQm9uZSAqL1xuICAgICAgICB0aGlzLl91cGRhdGVTcHJpbmdCb25lcyhkdCk7XG4gICAgfVxuICAgIF9yYW5nZU1hcChyYW5nZU1hcCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbWF4VmFsdWUgPSByYW5nZU1hcC5pbnB1dE1heFZhbHVlO1xuICAgICAgICBjb25zdCBvdXRwdXRTY2FsZSA9IHJhbmdlTWFwLm91dHB1dFNjYWxlO1xuICAgICAgICByZXR1cm4gKE1hdGgubWluKGlucHV0LCBtYXhWYWx1ZSkgLyBtYXhWYWx1ZSkgKiBvdXRwdXRTY2FsZTtcbiAgICB9XG4gICAgX3Jlc29sdmVMb29rQXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9va0F0IHx8ICF0aGlzLmxvb2tBdFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvb2tBdFNvdXJjZSA9IHRoaXMuYm9uZXMuaGVhZC50cmFuc2Zvcm1Qb2ludFdvcmxkKHRoaXMuX3RlbXBWM0EsIHRoaXMuX2xvb2tBdC5vZmZzZXRGcm9tSGVhZEJvbmUpO1xuICAgICAgICBjb25zdCBsb29rQXRUYXJnZXQgPSB0aGlzLmxvb2tBdFRhcmdldC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0IpO1xuICAgICAgICBjb25zdCBsb29rQXREaXJlY3Rpb24gPSB2ZWMzLnN1Yih0aGlzLl90ZW1wVjNBLCBsb29rQXRUYXJnZXQsIGxvb2tBdFNvdXJjZSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGxvb2tBdERpcmVjdGlvbiwgbG9va0F0RGlyZWN0aW9uKTtcbiAgICAgICAgLyogQ29udmVydCB0aGUgZGlyZWN0aW9uIGludG8gTG9va0F0IHNwYWNlICovXG4gICAgICAgIHRoaXMuYm9uZXMuaGVhZC5wYXJlbnQudHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKGxvb2tBdERpcmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHogPSB2ZWMzLmRvdChsb29rQXREaXJlY3Rpb24sIHRoaXMuX2ZvcndhcmRWZWN0b3IpO1xuICAgICAgICBjb25zdCB4ID0gdmVjMy5kb3QobG9va0F0RGlyZWN0aW9uLCB0aGlzLl9yaWdodFZlY3Rvcik7XG4gICAgICAgIGNvbnN0IHlhdyA9IE1hdGguYXRhbjIoeCwgeikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICBjb25zdCB4eiA9IE1hdGguc3FydCh4ICogeCArIHogKiB6KTtcbiAgICAgICAgY29uc3QgeSA9IHZlYzMuZG90KGxvb2tBdERpcmVjdGlvbiwgdGhpcy5fdXBWZWN0b3IpO1xuICAgICAgICBsZXQgcGl0Y2ggPSBNYXRoLmF0YW4yKC15LCB4eikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICAvKiBMaW1pdCBwaXRjaCAqL1xuICAgICAgICBpZiAocGl0Y2ggPiAwKSB7XG4gICAgICAgICAgICBwaXRjaCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbERvd24sIHBpdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBpdGNoID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbFVwLCAtcGl0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIC8qIExlZnQgZXllIChsaW1pdCB5YXcpICovXG4gICAgICAgIGlmICh0aGlzLmJvbmVzLmxlZnRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdMZWZ0ID0geWF3O1xuICAgICAgICAgICAgaWYgKHlhd0xlZnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIHlhd0xlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IC10aGlzLl9yYW5nZU1hcCh0aGlzLl9sb29rQXQuaG9yaXpvbnRhbE91dGVyLCAteWF3TGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd0xlZnQsIDApO1xuICAgICAgICAgICAgdGhpcy5ib25lcy5sZWZ0RXllLnJvdGF0aW9uTG9jYWwgPSBxdWF0Lm11bHRpcGx5KGV5ZVJvdGF0aW9uLCB0aGlzLnJlc3RQb3NlLmxlZnRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBSaWdodCBleWUgKGxpbWl0IHlhdykgKi9cbiAgICAgICAgaWYgKHRoaXMuYm9uZXMucmlnaHRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdSaWdodCA9IHlhdztcbiAgICAgICAgICAgIGlmICh5YXdSaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB5YXdSaWdodCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsT3V0ZXIsIHlhd1JpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHlhd1JpZ2h0ID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIC15YXdSaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd1JpZ2h0LCAwKTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXMucmlnaHRFeWUucm90YXRpb25Mb2NhbCA9IHF1YXQubXVsdGlwbHkoZXllUm90YXRpb24sIHRoaXMucmVzdFBvc2UucmlnaHRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVzb2x2ZUNvbnN0cmFpbnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGVDb25zdHJhaW50IG9mIHRoaXMuX25vZGVDb25zdHJhaW50cykge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUNvbnN0cmFpbnQobm9kZUNvbnN0cmFpbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZXNvbHZlQ29uc3RyYWludChub2RlQ29uc3RyYWludCkge1xuICAgICAgICBjb25zdCBkc3RSZXN0UXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb247XG4gICAgICAgIGNvbnN0IHNyY1Jlc3RRdWF0SW52ID0gbm9kZUNvbnN0cmFpbnQuc291cmNlUmVzdExvY2FsUm90YXRpb25JbnY7XG4gICAgICAgIGNvbnN0IHRhcmdldFF1YXQgPSBxdWF0LmlkZW50aXR5KHRoaXMuX3RlbXBRdWF0QSk7XG4gICAgICAgIHN3aXRjaCAobm9kZUNvbnN0cmFpbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXQgPSBxdWF0Lm11bHRpcGx5KHRoaXMuX3RlbXBRdWF0QSwgc3JjUmVzdFF1YXRJbnYsIG5vZGVDb25zdHJhaW50LnNvdXJjZS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgLyogc291cmNlIHRvIHBhcmVudCAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJblBhcmVudCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5zb3VyY2VSZXN0TG9jYWxSb3RhdGlvbiwgZGVsdGFTcmNRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwoZGVsdGFTcmNRdWF0SW5QYXJlbnQsIGRlbHRhU3JjUXVhdEluUGFyZW50LCBzcmNSZXN0UXVhdEludik7XG4gICAgICAgICAgICAgICAgICAgIC8qIHBhcmVudCB0byBkZXN0aW5hdGlvbiAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkc3RSZXN0UXVhdEludiA9IHF1YXQuaW52ZXJ0KHRoaXMuX3RlbXBRdWF0QiwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJbkRzdCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRCLCBkc3RSZXN0UXVhdEludiwgZGVsdGFTcmNRdWF0SW5QYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bHRpcGx5KGRlbHRhU3JjUXVhdEluRHN0LCBkZWx0YVNyY1F1YXRJbkRzdCwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1ZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21Ub1F1YXQgPSBxdWF0LnJvdGF0aW9uVG8odGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5heGlzLCB0b1ZlYyk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZnJvbVRvUXVhdCkpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCB0YXJnZXRRdWF0LCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWltJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzdFBhcmVudFdvcmxkUXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uLnBhcmVudC5yb3RhdGlvbldvcmxkO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVmVjID0gYWltQXhpcy5hcHBseVF1YXRlcm5pb24oIGRzdFBhcmVudFdvcmxkUXVhdCAqIGRzdFJlc3RRdWF0ICkgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbVZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkc3RSZXN0UXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMudHJhbnNmb3JtUXVhdChmcm9tVmVjLCBmcm9tVmVjLCBkc3RQYXJlbnRXb3JsZFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICAvKiB0b1ZlYyA9ICggc3JjV29ybGRQb3MgLSBkc3RXb3JsZFBvcyApLm5vcm1hbGl6ZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9WZWMgPSBub2RlQ29uc3RyYWludC5zb3VyY2UuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIodG9WZWMsIHRvVmVjLCBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWMykpO1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0b1ZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVG9RdWF0ID0gUXVhdGVybmlvbi5mcm9tVG9Sb3RhdGlvbiggZnJvbVZlYywgdG9WZWMgKSAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9tVG9RdWF0ID0gcXVhdC5yb3RhdGlvblRvKHRoaXMuX3RlbXBRdWF0QSwgZnJvbVZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZHN0UGFyZW50V29ybGRRdWF0KSwgZnJvbVRvUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFBhcmVudFdvcmxkUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyb3RhdGlvbic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNEZWx0YVF1YXQgPSBxdWF0Lm11bCh0YXJnZXRRdWF0LCBzcmNSZXN0UXVhdEludiwgbm9kZUNvbnN0cmFpbnQuc291cmNlLnJvdGF0aW9uTG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBkc3RSZXN0UXVhdCwgc3JjRGVsdGFRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLyogQXBwbHkgY29uc3RyYWludCAqL1xuICAgICAgICBxdWF0LnNsZXJwKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCB0YXJnZXRRdWF0LCBub2RlQ29uc3RyYWludC53ZWlnaHQpO1xuICAgICAgICBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5yb3RhdGlvbkxvY2FsID0gdGFyZ2V0UXVhdDtcbiAgICB9XG4gICAgX3VwZGF0ZVNwcmluZ0JvbmVzKGR0KSB7XG4gICAgICAgIC8qIFByZS1jb21wdXRlIGNvbGxpZGVyIHBvc2l0aW9ucyAqL1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB2ZWMzLmNvcHkoY2FjaGUuaGVhZCwgc2hhcGUub2Zmc2V0KTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZChvZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgb2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzKSwgb2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NhcHN1bGVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZUNlbnRlciA9IG9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0EpO1xuICAgICAgICAgICAgY29uc3QgaGVhZE9mZnNldCA9IHZlYzMuY29weShjYWNoZS5oZWFkLCBzaGFwZS5vZmZzZXQpO1xuICAgICAgICAgICAgb2JqZWN0LnRyYW5zZm9ybVZlY3RvcldvcmxkKGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgc2hhcGVDZW50ZXIsIGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGFpbE9mZnNldCA9IHZlYzMuY29weShjYWNoZS50YWlsLCBzaGFwZS50YWlsKTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZCh0YWlsT2Zmc2V0KTtcbiAgICAgICAgICAgIHZlYzMuYWRkKGNhY2hlLnRhaWwsIHNoYXBlQ2VudGVyLCB0YWlsT2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIFVwZGF0ZSBzcHJpbmcgY2hhaW5zICovXG4gICAgICAgIHRoaXMuX3NwcmluZ0NoYWlucy5mb3JFYWNoKChzcHJpbmdDaGFpbikgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHJpbmdDaGFpbi5qb2ludHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnQgPSBzcHJpbmdDaGFpbi5qb2ludHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50V29ybGRSb3RhdGlvbiA9IGpvaW50Lm5vZGUucGFyZW50XG4gICAgICAgICAgICAgICAgICAgID8gam9pbnQubm9kZS5wYXJlbnQucm90YXRpb25Xb3JsZFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2lkZW50aXR5UXVhdDtcbiAgICAgICAgICAgICAgICAvKiAxLiBGb3JjZXMgKi9cbiAgICAgICAgICAgICAgICAvKiBpbmVydGlhID0gKGN1cnJlbnRUYWlsIC0gcHJldlRhaWwpICogKDEuMGYgLSBkcmFnRm9yY2UpOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZXJ0aWEgPSB0aGlzLl9pbmVydGlhO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIsIGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgc3ByaW5nQ2hhaW4uY2VudGVyLnRyYW5zZm9ybVZlY3RvcldvcmxkKGluZXJ0aWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwsIGpvaW50LnN0YXRlLnByZXZUYWlsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZShpbmVydGlhLCBpbmVydGlhLCAxLjAgLSBqb2ludC5kcmFnRm9yY2UpO1xuICAgICAgICAgICAgICAgIC8qIHN0aWZmbmVzcyA9IGRlbHRhVGltZSAqIHBhcmVudFdvcmxkUm90YXRpb24gKiBsb2NhbFJvdGF0aW9uICogYm9uZUF4aXMgKiBzdGlmZm5lc3NGb3JjZTsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBzdGlmZm5lc3MgPSB2ZWMzLmNvcHkodGhpcy5fc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5ib25lQXhpcyk7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBwYXJlbnRXb3JsZFJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlKHN0aWZmbmVzcywgc3RpZmZuZXNzLCBkdCAqIGpvaW50LnN0aWZmbmVzcyk7XG4gICAgICAgICAgICAgICAgLyogZXh0ZXJuYWwgPSBkZWx0YVRpbWUgKiBncmF2aXR5RGlyICogZ3Jhdml0eVBvd2VyOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsID0gdmVjMy5zY2FsZSh0aGlzLl9leHRlcm5hbCwgam9pbnQuZ3Jhdml0eURpciwgZHQgKiBqb2ludC5ncmF2aXR5UG93ZXIpO1xuICAgICAgICAgICAgICAgIC8qIG5leHRUYWlsID0gY3VycmVudFRhaWwgKyBpbmVydGlhICsgc3RpZmZuZXNzICsgZXh0ZXJuYWw7ICovXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRhaWwgPSB2ZWMzLmNvcHkodGhpcy5fdGVtcFYzQSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgaW5lcnRpYSk7XG4gICAgICAgICAgICAgICAgdmVjMy5hZGQobmV4dFRhaWwsIG5leHRUYWlsLCBzdGlmZm5lc3MpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgZXh0ZXJuYWwpO1xuICAgICAgICAgICAgICAgIC8qIGNvbnN0cmFpbiB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgLyogbmV4dFRhaWwgPSB3b3JsZFBvc2l0aW9uICsgKG5leHRUYWlsIC0gd29ybGRQb3NpdGlvbikubm9ybWFsaXplZCAqIGJvbmVMZW5ndGg7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRQb3NpdGlvbiA9IGpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgd29ybGRQb3NpdGlvbiwgbmV4dFRhaWwsIGpvaW50LnN0YXRlLmJvbmVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIC8qIDIuIENvbGxpc2lvbiB3aXRoIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIC8qIFNwaGVyZSBjb2xsaWRlcnMgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgc2hhcGUsIGNhY2hlIH0gb2Ygc3ByaW5nQ2hhaW4uc3BoZXJlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGhlcmVDZW50ZXIgPSBjYWNoZS5oZWFkO1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgc3BoZXJlQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBDYXBzdWxlIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgY2FjaGUgfSBvZiBzcHJpbmdDaGFpbi5jYXBzdWxlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkID0gY2FjaGUuaGVhZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFpbCA9IGNhY2hlLnRhaWw7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5haXZlbHkgc3RhcnQgd2l0aCBkaXN0YW5jZSB0byB0aGUgaGVhZCAqL1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRUb1RhaWwgPSB2ZWMzLnN1Yih0aGlzLl9oZWFkVG9UYWlsLCB0YWlsLCBoZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90ID0gdmVjMy5kb3QoaGVhZFRvVGFpbCwgdGFpbFRvU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpIDw9IGRvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byB0YWlsICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1Yih0YWlsVG9TaGFwZSwgbmV4dFRhaWwsIHRhaWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdCA+IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byBtaWRkbGUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGUoaGVhZFRvVGFpbCwgaGVhZFRvVGFpbCwgZG90IC8gdmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKHRhaWxUb1NoYXBlLCB0YWlsVG9TaGFwZSwgaGVhZFRvVGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiAzLiBBcHBseWluZyByb3RhdGlvbiAqL1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5wcmV2VGFpbCwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlciwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICBzcHJpbmdDaGFpbi5jZW50ZXIudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQoam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiB0byA9IChuZXh0VGFpbCAqIChub2RlLnBhcmVudC53b3JsZE1hdHJpeCAqIGluaXRpYWxMb2NhbE1hdHJpeCkuaW52ZXJzZSkubm9ybWFsaXplZCAqL1xuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUucGFyZW50LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFpbER1YWxRdWF0ID0gcXVhdDIuZnJvbVRyYW5zbGF0aW9uKHRoaXMuX3RlbXBRdWF0MiwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIHF1YXQyLm11bHRpcGx5KG5leHRUYWlsRHVhbFF1YXQsIGpvaW50LnN0YXRlLmluaXRpYWxMb2NhbFRyYW5zZm9ybUludmVydCwgbmV4dFRhaWxEdWFsUXVhdCk7XG4gICAgICAgICAgICAgICAgcXVhdDIuZ2V0VHJhbnNsYXRpb24obmV4dFRhaWwsIG5leHRUYWlsRHVhbFF1YXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgLyogbm9kZS5yb3RhdGlvbiA9IGluaXRpYWxMb2NhbFJvdGF0aW9uICogUXVhdGVybmlvbi5mcm9tVG9RdWF0ZXJuaW9uKGJvbmVBeGlzLCB0byk7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnRSb3RhdGlvbiA9IHF1YXQucm90YXRpb25Ubyh0aGlzLl90ZW1wUXVhdEEsIGpvaW50LnN0YXRlLmJvbmVBeGlzLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5yb3RhdGlvbkxvY2FsID0gcXVhdC5tdWwodGhpcy5fdGVtcFF1YXRBLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbiwgam9pbnRSb3RhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpcnN0UGVyc29uIFdoZXRoZXIgdGhlIG1vZGVsIHNob3VsZCByZW5kZXIgZm9yIGZpcnN0IHBlcnNvbiBvciB0aGlyZCBwZXJzb24gdmlld3NcbiAgICAgKi9cbiAgICBzZXQgZmlyc3RQZXJzb24oZmlyc3RQZXJzb24pIHtcbiAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5mb3JFYWNoKChhbm5vdGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gZmlyc3RQZXJzb24gPT0gYW5ub3RhdGlvbi5maXJzdFBlcnNvbiB8fFxuICAgICAgICAgICAgICAgIGZpcnN0UGVyc29uICE9IGFubm90YXRpb24udGhpcmRQZXJzb247XG4gICAgICAgICAgICBhbm5vdGF0aW9uLm5vZGUuZ2V0Q29tcG9uZW50cygnbWVzaCcpLmZvckVhY2goKG1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBtZXNoLmFjdGl2ZSA9IHZpc2libGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgVnJtIH07XG4iLCAiaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuY29uc3QgX2RpcmVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4vKipcbiAqIEJhc2ljIG1vdmVtZW50IHdpdGggVy9BL1MvRCBrZXlzLlxuICovXG5jbGFzcyBXYXNkQ29udHJvbHNDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd3YXNkLWNvbnRyb2xzJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIE1vdmVtZW50IHNwZWVkIGluIG0vcy4gKi9cbiAgICAgICAgc3BlZWQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4xIH0sXG4gICAgICAgIC8qKiBGbGFnIGZvciBvbmx5IG1vdmluZyB0aGUgb2JqZWN0IG9uIHRoZSBnbG9iYWwgeCAmIHogcGxhbmVzICovXG4gICAgICAgIGxvY2tZOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIE9iamVjdCBvZiB3aGljaCB0aGUgb3JpZW50YXRpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgZm9yd2FyZCBkaXJlY3Rpb24gKi9cbiAgICAgICAgaGVhZE9iamVjdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy51cCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXNzLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnJlbGVhc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmhlYWRPYmplY3QgPSB0aGlzLmhlYWRPYmplY3QgfHwgdGhpcy5vYmplY3Q7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdmVjMy56ZXJvKF9kaXJlY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy51cClcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMl0gLT0gMS4wO1xuICAgICAgICBpZiAodGhpcy5kb3duKVxuICAgICAgICAgICAgX2RpcmVjdGlvblsyXSArPSAxLjA7XG4gICAgICAgIGlmICh0aGlzLmxlZnQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdIC09IDEuMDtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdICs9IDEuMDtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgIF9kaXJlY3Rpb25bMF0gKj0gdGhpcy5zcGVlZDtcbiAgICAgICAgX2RpcmVjdGlvblsyXSAqPSB0aGlzLnNwZWVkO1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbiwgdGhpcy5oZWFkT2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgaWYgKHRoaXMubG9ja1kpIHtcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMV0gPSAwO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKF9kaXJlY3Rpb24sIF9kaXJlY3Rpb24sIHRoaXMuc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKF9kaXJlY3Rpb24pO1xuICAgIH1cbiAgICBwcmVzcyhlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IC8qIHVwICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDg3IC8qIHcgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gOTAgLyogeiAqLykge1xuICAgICAgICAgICAgdGhpcy51cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDAgLyogZG93biAqLyB8fCBlLmtleUNvZGUgPT09IDgzIC8qIHMgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNyAvKiBsZWZ0ICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDY1IC8qIGEgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODEgLyogcSAqLykge1xuICAgICAgICAgICAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWxlYXNlKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzggLyogdXAgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA5MCAvKiB6ICovKSB7XG4gICAgICAgICAgICB0aGlzLnVwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwIC8qIGRvd24gKi8gfHwgZS5rZXlDb2RlID09PSA4MyAvKiBzICovKSB7XG4gICAgICAgICAgICB0aGlzLmRvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3IC8qIGxlZnQgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gNjUgLyogYSAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFdhc2RDb250cm9sc0NvbXBvbmVudCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBIYW5kVHJhY2tpbmcgfSBmcm9tICcuL2hhbmQtdHJhY2tpbmcuanMnO1xuaW1wb3J0IHsgdmVjMywgcXVhdCB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IFZyTW9kZUFjdGl2ZVN3aXRjaCB9IGZyb20gJy4vdnItbW9kZS1hY3RpdmUtc3dpdGNoLmpzJztcbmNvbnN0IF90ZW1wVmVjID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IF90ZW1wUXVhdCA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMiA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBtaW5UZW1wID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IG1heFRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgaGFuZHMgPSBbJ2xlZnQnLCAncmlnaHQnXTtcbi8qKlxuICogRHluYW1pY2FsbHkgbG9hZCBhbmQgbWFwIGlucHV0IHByb2ZpbGVzIGZvciBYUiBjb250cm9sbGVycy5cbiAqL1xuY2xhc3MgSW5wdXRQcm9maWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW5wdXQtcHJvZmlsZSc7XG4gICAgLyoqXG4gICAgICogQSBjYWNoZSB0byBzdG9yZSBsb2FkZWQgcHJvZmlsZXMgZm9yIHJldXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICBfZ2FtZXBhZE9iamVjdHMgPSB7fTtcbiAgICBfY29udHJvbGxlck1vZGVsID0gbnVsbDtcbiAgICBfZGVmYXVsdENvbnRyb2xsZXJDb21wb25lbnRzO1xuICAgIF9oYW5kZWRuZXNzO1xuICAgIF9wcm9maWxlSlNPTiA9IG51bGw7XG4gICAgX2J1dHRvbnMgPSBbXTtcbiAgICBfYXhlcyA9IFtdO1xuICAgIC8qKlxuICAgICAqIFRoZSBYUiBnYW1lcGFkIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBpbnB1dCBzb3VyY2UuXG4gICAgICovXG4gICAgZ2FtZXBhZDtcbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgZW1pdHRlciB3aGljaCB0cmlnZ2VyZWQgb24gbW9kZWwgbG9kYWVkIGV2ZW50LlxuICAgICAqL1xuICAgIG9uTW9kZWxMb2FkZWQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdXJsIG9mIGlucHV0IHByb2ZpbGUganNvbiBmaWxlXG4gICAgICovXG4gICAgdXJsO1xuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIGNvbXBvbmVudHMgdG8gZmlsdGVyIGR1cmluZyBjb21wb25lbnQgcmV0cmlldmFsLlxuICAgICAqL1xuICAgIHRvRmlsdGVyID0gbmV3IFNldChbJ3ZyLW1vZGUtYWN0aXZlLW1vZGUtc3dpdGNoJ10pO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCByZXByZXNlbnRpbmcgdGhlIGhhbmRlZG5lc3Mgb2YgdGhlIGNvbnRyb2xsZXIgKDAgZm9yIGxlZnQsIDEgZm9yIHJpZ2h0KS5cbiAgICAgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBwYXRoIHdoZXJlIFhSIGlucHV0IHByb2ZpbGVzIGFyZSBzdG9yZWQuXG4gICAgICovXG4gICAgZGVmYXVsdEJhc2VQYXRoO1xuICAgIC8qKlxuICAgICAqIEFuIG9wdGlvbmFsIGZvbGRlciBwYXRoIGZvciBsb2FkaW5nIGN1c3RvbSBYUiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKi9cbiAgICBjdXN0b21CYXNlUGF0aDtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCAzRCBjb250cm9sbGVyIG1vZGVsIHVzZWQgd2hlbiBhIGN1c3RvbSBtb2RlbCBmYWlscyB0byBsb2FkLlxuICAgICAqL1xuICAgIGRlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3Qgd2hpY2ggaGFzIEhhbmRUcmFja2luZyBjb21wb25lbnQgYWRkZWQgdG8gaXQuXG4gICAgICovXG4gICAgdHJhY2tlZEhhbmQ7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIGlucHV0IHByb2ZpbGUgd2lsbCBiZSBtYXBwZWQgdG8gdGhlIGRlZmF1bHQgY29udHJvbGxlciwgYW5kIG5vIGR5bmFtaWMgM0QgbW9kZWwgb2YgY29udHJvbGxlciB3aWxsIGJlIGxvYWRlZC5cbiAgICAgKi9cbiAgICBtYXBUb0RlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIElmIHRydWUsIGFkZHMgYSBWUiBtb2RlIHN3aXRjaCBjb21wb25lbnQgdG8gdGhlIGxvYWRlZCBjb250cm9sbGVyIG1vZGVsLlxuICAgICAqL1xuICAgIGFkZFZyTW9kZVN3aXRjaDtcbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLl9oYW5kZWRuZXNzID0gaGFuZHNbdGhpcy5oYW5kZWRuZXNzXTtcbiAgICAgICAgY29uc3QgZGVmYXVsdEhhbmROYW1lID0gJ0hhbmQnICsgdGhpcy5faGFuZGVkbmVzcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuX2hhbmRlZG5lc3Muc2xpY2UoMSk7XG4gICAgICAgIHRoaXMudHJhY2tlZEhhbmQgPVxuICAgICAgICAgICAgdGhpcy50cmFja2VkSGFuZCA/PyB0aGlzLm9iamVjdC5wYXJlbnQ/LmZpbmRCeU5hbWVSZWN1cnNpdmUoZGVmYXVsdEhhbmROYW1lKVswXTtcbiAgICAgICAgdGhpcy5kZWZhdWx0Q29udHJvbGxlciA9IHRoaXMuZGVmYXVsdENvbnRyb2xsZXIgfHwgdGhpcy5vYmplY3QuY2hpbGRyZW5bMF07XG4gICAgICAgIHRoaXMuX2RlZmF1bHRDb250cm9sbGVyQ29tcG9uZW50cyA9IHRoaXMuX2dldENvbXBvbmVudHModGhpcy5kZWZhdWx0Q29udHJvbGxlcik7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyPy5zZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0c291cmNlc2NoYW5nZScsIHRoaXMuX29uSW5wdXRTb3VyY2VzQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS54cj8uc2Vzc2lvbj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgdGhpcy5fb25JbnB1dFNvdXJjZXNDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgbmV3bHkgbG9hZGVkIGNvbnRyb2xsZXJzIGZvciB0aGUgSGFuZFRyYWNraW5nIGNvbXBvbmVudCB0byBwcm9wZXIgc3dpdGNoaW5nLlxuICAgICAqIEBwYXJhbSBjb250cm9sbGVyT2JqZWN0IFRoZSBjb250cm9sbGVyIG9iamVjdC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3NldEhhbmRUcmFja2luZ0NvbnRyb2xsZXJzKGNvbnRyb2xsZXJPYmplY3QpIHtcbiAgICAgICAgY29uc3QgaGFuZHRyYWNraW5nQ29tcG9uZW50ID0gdGhpcy50cmFja2VkSGFuZC5nZXRDb21wb25lbnQoSGFuZFRyYWNraW5nKTtcbiAgICAgICAgaWYgKCFoYW5kdHJhY2tpbmdDb21wb25lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGhhbmR0cmFja2luZ0NvbXBvbmVudC5jb250cm9sbGVyVG9EZWFjdGl2YXRlID0gY29udHJvbGxlck9iamVjdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBjb21wb25lbnRzIGZyb20gdGhlIHNwZWNpZmllZCBvYmplY3QgYW5kIGl0cyBjaGlsZHJlbi5cbiAgICAgKiBAcGFyYW0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgY29tcG9uZW50cyBmcm9tLlxuICAgICAqIEByZXR1cm4gQW4gYXJyYXkgb2YgY29tcG9uZW50cy5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2dldENvbXBvbmVudHMob2JqKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW29ial07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50T2JqID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBjb25zdCBjb21wcyA9IGN1cnJlbnRPYmpcbiAgICAgICAgICAgICAgICAuZ2V0Q29tcG9uZW50cygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gIXRoaXMudG9GaWx0ZXIuaGFzKGMudHlwZSkpO1xuICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKC4uLmNvbXBzKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gY3VycmVudE9iai5jaGlsZHJlbjtcbiAgICAgICAgICAgIC8vIFB1c2ggY2hpbGRyZW4gb250byB0aGUgc3RhY2sgaW4gcmV2ZXJzZSBvcmRlciB0byBtYWludGFpbiB0aGUgY29ycmVjdCBvcmRlclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBjb21wb25lbnRzIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgYm9vbGVhbiB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gYWN0aXZlIElmIHRydWUsIGNvbXBvbmVudHMgYXJlIHNldCB0byBhY3RpdmU7IG90aGVyd2lzZSwgdGhleSBhcmUgc2V0IHRvIGluYWN0aXZlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2V0Q29tcG9uZW50c0FjdGl2ZShhY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLl9kZWZhdWx0Q29udHJvbGxlckNvbXBvbmVudHM7XG4gICAgICAgIGlmIChjb21wcyA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbXBzW2ldLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIFhSIGlucHV0IHNvdXJjZXMgY2hhbmdlLlxuICAgICAqIERldGVjdHMgbmV3IFhSIGlucHV0IHNvdXJjZXMgYW5kIGluaXRpYXRlcyB0aGUgbG9hZGluZyBvZiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIFhSIGlucHV0IHNvdXJjZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9vbklucHV0U291cmNlc0NoYW5nZShldmVudCkge1xuICAgICAgICBpZiAodGhpcy5faXNNb2RlbExvYWRlZCgpICYmICF0aGlzLm1hcFRvRGVmYXVsdENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENvbXBvbmVudHNBY3RpdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmFkZGVkLmZvckVhY2goKHhySW5wdXRTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICh4cklucHV0U291cmNlLmhhbmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5faGFuZGVkbmVzcyAhPSB4cklucHV0U291cmNlLmhhbmRlZG5lc3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0geHJJbnB1dFNvdXJjZS5nYW1lcGFkO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMuY3VzdG9tQmFzZVBhdGggIT09ICcnXG4gICAgICAgICAgICAgICAgPyB0aGlzLmN1c3RvbUJhc2VQYXRoXG4gICAgICAgICAgICAgICAgOiB0aGlzLmRlZmF1bHRCYXNlUGF0aCArIHhySW5wdXRTb3VyY2UucHJvZmlsZXNbMF07XG4gICAgICAgICAgICB0aGlzLnVybCA9IHByb2ZpbGUgKyAnL3Byb2ZpbGUuanNvbic7XG4gICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IElucHV0UHJvZmlsZS5DYWNoZS5nZXQodGhpcy51cmwpID8/IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvZmlsZUpTT04gIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBmZXRjaCh0aGlzLnVybClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChvdXQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IG91dDtcbiAgICAgICAgICAgICAgICBJbnB1dFByb2ZpbGUuQ2FjaGUuc2V0KHRoaXMudXJsLCB0aGlzLl9wcm9maWxlSlNPTik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc01vZGVsTG9hZGVkKCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRBbmRNYXBHYW1lcGFkKHByb2ZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBwcm9maWxlIGZyb20gJHt0aGlzLnVybH0uIFJlYXNvbjpgLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGlzIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG1vZGVsIGlzIGxvYWRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2lzTW9kZWxMb2FkZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sbGVyTW9kZWwgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGFuZCBjYWNoZXMgdGhlIG1hcHBpbmcgdG8gdGhlIGdhbWVwYWQuXG4gICAgICogQHBhcmFtIHByb2ZpbGUgVGhlIHBhdGggdG8gdGhlIGlucHV0IHByb2ZpbGUuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFzeW5jIF9sb2FkQW5kTWFwR2FtZXBhZChwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0UGF0aCA9IHByb2ZpbGUgKyAnLycgKyB0aGlzLl9oYW5kZWRuZXNzICsgJy5nbGInO1xuICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSB0aGlzLmRlZmF1bHRDb250cm9sbGVyO1xuICAgICAgICBpZiAoIXRoaXMubWFwVG9EZWZhdWx0Q29udHJvbGxlcikge1xuICAgICAgICAgICAgLyoqIGxvYWQgM2QgbW9kZWwgaW4gdGhlIHJ1bnRpbWUgd2l0aCBwcm9maWxlIHVybCAqL1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSAoYXdhaXQgdGhpcy5lbmdpbmUuc2NlbmUuYXBwZW5kKGFzc2V0UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBpLXAgY29udHJvbGxlciBtb2RlbC4gUmVhc29uOmAsIGUsIGBDb250aW51aW5nIHdpdGggJHt0aGlzLl9oYW5kZWRuZXNzfSBkZWZhdWx0IGNvbnRyb2xsZXIuYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q29tcG9uZW50c0FjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5wYXJlbnQgPSB0aGlzLm9iamVjdDtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5zZXRQb3NpdGlvbkxvY2FsKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLl9zZXRDb21wb25lbnRzQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkZFZyTW9kZVN3aXRjaClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwuYWRkQ29tcG9uZW50KFZyTW9kZUFjdGl2ZVN3aXRjaCk7XG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxMb2FkZWQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGVHYW1lcGFkT2JqZWN0c0Zyb21Qcm9maWxlKHRoaXMuX3Byb2ZpbGVKU09OLCB0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLl9zZXRIYW5kVHJhY2tpbmdDb250cm9sbGVycyh0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHRoaXMuX21hcEdhbWVwYWRJbnB1dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWNoZXMgZ2FtZXBhZCBvYmplY3RzIChidXR0b25zLCBheGVzKSBmcm9tIHRoZSBsb2FkZWQgaW5wdXQgcHJvZmlsZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NhY2hlR2FtZXBhZE9iamVjdHNGcm9tUHJvZmlsZShwcm9maWxlLCBvYmopIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHByb2ZpbGUubGF5b3V0c1t0aGlzLl9oYW5kZWRuZXNzXS5jb21wb25lbnRzO1xuICAgICAgICBpZiAoIWNvbXBvbmVudHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2J1dHRvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5fYXhlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2VzID0gY29tcG9uZW50c1tpXS52aXN1YWxSZXNwb25zZXM7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGogaW4gdmlzdWFsUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGJ1dHRvbnMgd2l0aCBuZXcgaW50ZXJmYWNlIG9mIGN1cnJlbnQgdmlzdWFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2UgPSB2aXN1YWxSZXNwb25zZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOb2RlID0gdmlzdWFsUmVzcG9uc2UudmFsdWVOb2RlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5Ob2RlID0gdmlzdWFsUmVzcG9uc2UubWluTm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4Tm9kZSA9IHZpc3VhbFJlc3BvbnNlLm1heE5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW3ZhbHVlTm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZSh2YWx1ZU5vZGUpWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW21pbk5vZGVdID0gb2JqLmZpbmRCeU5hbWVSZWN1cnNpdmUobWluTm9kZSlbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZE9iamVjdHNbbWF4Tm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZShtYXhOb2RlKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2UgPSB2aXN1YWxSZXNwb25zZXNbal0uY29tcG9uZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5fZ2FtZXBhZE9iamVjdHNbdmFsdWVOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWluOiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttaW5Ob2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttYXhOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbXBvbmVudHNbaV0uZ2FtZXBhZEluZGljZXNbaW5kaWNlXSwgLy8gQXNzaWduIGEgdW5pcXVlIElEXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGluZGljZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnV0dG9ucy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd4QXhpcyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3lBeGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F4ZXMucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBhIHRyYW5zZm9ybWVkIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byB0aGUgdGFyZ2V0IGJhc2VkIG9uIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWVzIGFuZCBhIG5vcm1hbGl6ZWQgaW5wdXQgdmFsdWUuXG4gICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIG9iamVjdCBwcm92aWRpbmcgdHJhbnNmb3JtYXRpb24gbGltaXRzLlxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gb2JqZWN0IHByb3ZpZGluZyB0cmFuc2Zvcm1hdGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBub3JtYWxpemVkIGlucHV0IHZhbHVlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfYXNzaWduVHJhbnNmb3JtKHRhcmdldCwgbWluLCBtYXgsIHZhbHVlKSB7XG4gICAgICAgIHZlYzMubGVycChfdGVtcFZlYywgbWluLmdldFBvc2l0aW9uV29ybGQobWluVGVtcCksIG1heC5nZXRQb3NpdGlvbldvcmxkKG1heFRlbXApLCB2YWx1ZSk7XG4gICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbldvcmxkKF90ZW1wVmVjKTtcbiAgICAgICAgcXVhdC5sZXJwKF90ZW1wUXVhdCwgbWluLmdldFJvdGF0aW9uV29ybGQoX3RlbXBSb3RhdGlvbjEpLCBtYXguZ2V0Um90YXRpb25Xb3JsZChfdGVtcFJvdGF0aW9uMiksIHZhbHVlKTtcbiAgICAgICAgcXVhdC5ub3JtYWxpemUoX3RlbXBRdWF0LCBfdGVtcFF1YXQpO1xuICAgICAgICB0YXJnZXQuc2V0Um90YXRpb25Xb3JsZChfdGVtcFF1YXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXBzIGlucHV0IHZhbHVlcyAoYnV0dG9ucywgYXhlcykgdG8gdGhlIDNEIGNvbnRyb2xsZXIgbW9kZWwuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9tYXBHYW1lcGFkSW5wdXQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRoaXMuX2J1dHRvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvblZhbHVlID0gdGhpcy5nYW1lcGFkLmJ1dHRvbnNbYnV0dG9uLmlkXS52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblRyYW5zZm9ybShidXR0b24udGFyZ2V0LCBidXR0b24ubWluLCBidXR0b24ubWF4LCBidXR0b25WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBheGlzIG9mIHRoaXMuX2F4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGF4aXNWYWx1ZSA9IHRoaXMuZ2FtZXBhZC5heGVzW2F4aXMuaWRdO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEF4aXNWYWx1ZSA9IChheGlzVmFsdWUgKyAxKSAvIDI7XG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25UcmFuc2Zvcm0oYXhpcy50YXJnZXQsIGF4aXMubWluLCBheGlzLm1heCwgbm9ybWFsaXplZEF4aXNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKGhhbmRzLCAwKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHdlYnhyLWlucHV0LXByb2ZpbGVzL2Fzc2V0c0BsYXRlc3QvZGlzdC9wcm9maWxlcy8nKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0QmFzZVBhdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZygpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImN1c3RvbUJhc2VQYXRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0Q29udHJvbGxlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwidHJhY2tlZEhhbmRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2woZmFsc2UpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcIm1hcFRvRGVmYXVsdENvbnRyb2xsZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwiYWRkVnJNb2RlU3dpdGNoXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBJbnB1dFByb2ZpbGUgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBkZWcycmFkLCByYWQyZGVnIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG5pbXBvcnQgeyBxdWF0LCB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IHByZXZlbnREZWZhdWx0ID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59O1xuY29uc3QgdGVtcFZlYyA9IFswLCAwLCAwXTtcbmNvbnN0IHRlbXBxdWF0ID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBxdWF0MiA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCB0ZW1wVmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4vKipcbiAqIE9yYml0YWxDYW1lcmEgY29tcG9uZW50IGFsbG93cyB0aGUgdXNlciB0byBvcmJpdCBhcm91bmQgYSB0YXJnZXQgcG9pbnQsIHdoaWNoXG4gKiBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdCBpdHNlbGYuIEl0IHJvdGF0ZXMgYXQgdGhlIHNwZWNpZmllZCBkaXN0YW5jZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIGNvbXBvbmVudCB3b3JrcyB1c2luZyBtb3VzZSBvciB0b3VjaC4gVGhlcmVmb3IgaXQgZG9lcyBub3Qgd29yayBpbiBWUi5cbiAqL1xuY2xhc3MgT3JiaXRhbENhbWVyYSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ29yYml0YWwtY2FtZXJhJztcbiAgICBtb3VzZUJ1dHRvbkluZGV4ID0gMDtcbiAgICByYWRpYWwgPSA1O1xuICAgIG1pbkVsZXZhdGlvbiA9IDAuMDtcbiAgICBtYXhFbGV2YXRpb24gPSA4OS45OTtcbiAgICBtaW5ab29tID0gMC4wMTtcbiAgICBtYXhab29tID0gMTAuMDtcbiAgICB4U2Vuc2l0aXZpdHkgPSAwLjU7XG4gICAgeVNlbnNpdGl2aXR5ID0gMC41O1xuICAgIHpvb21TZW5zaXRpdml0eSA9IDAuMDI7XG4gICAgZGFtcGluZyA9IDAuOTtcbiAgICBfbW91c2VEb3duID0gZmFsc2U7XG4gICAgX29yaWdpbiA9IFswLCAwLCAwXTtcbiAgICBfYXppbXV0aCA9IDA7XG4gICAgX3BvbGFyID0gNDU7XG4gICAgX2luaXRpYWxQaW5jaERpc3RhbmNlID0gMDtcbiAgICBfdG91Y2hTdGFydFggPSAwO1xuICAgIF90b3VjaFN0YXJ0WSA9IDA7XG4gICAgX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgX3BvbGFyU3BlZWQgPSAwO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaFN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHJldmVudERlZmF1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwpO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgICAgICAvKiBSZXNldCBzdGF0ZSB0byBtYWtlIHN1cmUgbm90aGluZyBnZXRzIHN0dWNrICovXG4gICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pbml0aWFsUGluY2hEaXN0YW5jZSA9IDA7XG4gICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gMDtcbiAgICAgICAgdGhpcy5fdG91Y2hTdGFydFkgPSAwO1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgPSAwO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvKiBBbHdheXMgYXBwbHkgZGFtcGluZywgYmVjYXVzZSB0aGVyZSdzIG5vIGV2ZW50IGZvciBzdG9wIG1vdmluZyAqL1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgKj0gdGhpcy5kYW1waW5nO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkICo9IHRoaXMuZGFtcGluZztcbiAgICAgICAgLyogU3RvcCBjb21wbGV0ZWx5IGlmIHRoZSBzcGVlZCBpcyB2ZXJ5IGxvdyB0byBhdm9pZCBlbmRsZXNzIHRpbnkgbW92ZW1lbnRzICovXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9hemltdXRoU3BlZWQpIDwgMC4wMSlcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9wb2xhclNwZWVkKSA8IDAuMDEpXG4gICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICAgICAgLyogQXBwbHkgdGhlIHNwZWVkIHRvIHRoZSBjYW1lcmEgYW5nbGVzICovXG4gICAgICAgIHRoaXMuX2F6aW11dGggKz0gdGhpcy5fYXppbXV0aFNwZWVkO1xuICAgICAgICB0aGlzLl9wb2xhciArPSB0aGlzLl9wb2xhclNwZWVkO1xuICAgICAgICAvKiBDbGFtcCB0aGUgcG9sYXIgYW5nbGUgKi9cbiAgICAgICAgdGhpcy5fcG9sYXIgPSBNYXRoLm1pbih0aGlzLm1heEVsZXZhdGlvbiwgTWF0aC5tYXgodGhpcy5taW5FbGV2YXRpb24sIHRoaXMuX3BvbGFyKSk7XG4gICAgICAgIC8qIFVwZGF0ZSB0aGUgY2FtZXJhIGlmIHRoZXJlJ3MgYW55IHNwZWVkICovXG4gICAgICAgIGlmICh0aGlzLl9hemltdXRoU3BlZWQgIT09IDAgfHwgdGhpcy5fcG9sYXJTcGVlZCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2FtZXJhKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjbG9zZXN0IHBvc2l0aW9uIHRvIHRoZSBnaXZlbiBwb3NpdGlvbiBvbiB0aGUgb3JiaXQgc3BoZXJlIG9mIHRoZSBjYW1lcmEuXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBnZXQgYSBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKlxuICAgICAqIFlvdSBwYXNzIHRoaXMgYSBwb3NpdGlvbiBvYmplY3QuIFRoZSBtZXRob2QgY2FsY3VsYXRlcyB0aGUgY2xvc2VzdCBwb3NpdGl0aW9uIGFuZCB1cGRhdGVzIHRoZSBwb3NpdGlvbiBwYXJhbWV0ZXIuXG4gICAgICogSXQgYWxzbyBzZXRzIHRoZSByb3RhdGlvbiBwYXJhbWV0ZXIgdG8gcmVmbGVjdCB0aGUgcm90YXRlIHRoZSBjYW1lcmEgd2lsbCBoYXZlIHdoZW4gaXQgaXMgb24gdGhlIG9yYml0IHNwaGVyZSxcbiAgICAgKiBwb2ludGluZyB0b3dhcmRzIHRoZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIHRoZSBwb3NpdGlvbiB0byBnZXQgdGhlIGNsb3Nlc3QgcG9zaXRpb24gdG9cbiAgICAgKiBAcGFyYW0gcm90YXRpb24gdGhlIHJvdGF0aW9uIHRvIGdldCB0aGUgY2xvc2VzdCBwb3NpdGlvbiB0b1xuICAgICAqL1xuICAgIGdldENsb3Nlc3RQb3NpdGlvbihwb3NpdGlvbiwgcm90YXRpb24pIHtcbiAgICAgICAgLyogSXQncyBhIGJpdCBoYWNreSwgYnV0IHRoZSBlYXNpZXN0IHdheSB0byBnZXQgdGhlIHJvdGF0aW9uIG9mIHRoZSBjYW1lcmEgaXMganVzdCBicmllZmx5XG4gICAgICAgICBjaGFuZ2UgdGhlIHJvdGF0aW9uIHRvIGxvb2sgYXQgdGhlIGNlbnRlciBhbmQgdGhlbiBnZXQgdGhlIHJvdGF0aW9uLiAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFJvdGF0aW9uV29ybGQodGVtcHF1YXQyKTtcbiAgICAgICAgaWYgKHF1YXQuZG90KHRlbXBxdWF0LCB0ZW1wcXVhdDIpIDwgMCkge1xuICAgICAgICAgICAgcXVhdC5zY2FsZSh0ZW1wcXVhdDIsIHRlbXBxdWF0MiwgLTEpOyAvKiBOZWdhdGUgdG8gZW5zdXJlIHNob3J0ZXN0IHBhdGggKi9cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5zZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgLyogQ2FsY3VsYXRlIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgY2VudGVyIG9mIG9yYml0IHRvIHRoZSBjdXJyZW50IGNhbWVyYSBwb3NpdGlvbiAqL1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25Ub0NhbWVyYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZlYzMuc3VidHJhY3QoZGlyZWN0aW9uVG9DYW1lcmEsIHBvc2l0aW9uLCB0aGlzLl9vcmlnaW4pO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShkaXJlY3Rpb25Ub0NhbWVyYSwgZGlyZWN0aW9uVG9DYW1lcmEpO1xuICAgICAgICAvKiBTY2FsZSB0aGlzIGRpcmVjdGlvbiBieSB0aGUgcmFkaXVzIG9mIHlvdXIgb3JiaXRhbCBzcGhlcmUgdG8gZ2V0IHRoZSBuZWFyZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUgKi9cbiAgICAgICAgY29uc3QgbmVhcmVzdFBvaW50T25TcGhlcmUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2ZWMzLnNjYWxlKG5lYXJlc3RQb2ludE9uU3BoZXJlLCBkaXJlY3Rpb25Ub0NhbWVyYSwgdGhpcy5yYWRpYWwpO1xuICAgICAgICB2ZWMzLmFkZChuZWFyZXN0UG9pbnRPblNwaGVyZSwgbmVhcmVzdFBvaW50T25TcGhlcmUsIHRoaXMuX29yaWdpbik7XG4gICAgICAgIHZlYzMuY29weShwb3NpdGlvbiwgbmVhcmVzdFBvaW50T25TcGhlcmUpO1xuICAgICAgICBxdWF0LmNvcHkocm90YXRpb24sIHRlbXBxdWF0Mik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FtZXJhIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgY2FsY3VsYXRlIHRoZSByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0gY2FtZXJhUG9zaXRpb24gdGhlIHBvc2l0aW9uIHRvIHNldCB0aGUgY2FtZXJhIHRvXG4gICAgICovXG4gICAgc2V0UG9zaXRpb24oY2FtZXJhUG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgY2VudGVyT2ZPcmJpdCA9IHRoaXMuX29yaWdpbjtcbiAgICAgICAgLyogQ29tcHV0ZSB0aGUgZGlyZWN0aW9uIHZlY3RvciAqL1xuICAgICAgICB2ZWMzLnN1YnRyYWN0KHRlbXBWZWMzLCBjYW1lcmFQb3NpdGlvbiwgY2VudGVyT2ZPcmJpdCk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRlbXBWZWMzLCB0ZW1wVmVjMyk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIGF6aW11dGggYW5nbGUgKGluIHJhZGlhbnMpICovXG4gICAgICAgIGNvbnN0IGF6aW11dGggPSBNYXRoLmF0YW4yKHRlbXBWZWMzWzBdLCB0ZW1wVmVjM1syXSk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIHBvbGFyIGFuZ2xlIChpbiByYWRpYW5zKSAqL1xuICAgICAgICBjb25zdCBwb2xhciA9IE1hdGguYWNvcyh0ZW1wVmVjM1sxXSk7XG4gICAgICAgIGNvbnN0IGF6aW11dGhEZWcgPSByYWQyZGVnKGF6aW11dGgpO1xuICAgICAgICAvKiBQb2xhciBpcyBpbnZlcnRlZCB0byBtYXRjaCB0aGUgb3JiaXRhbCBjYW1lcmEgKi9cbiAgICAgICAgY29uc3QgcG9sYXJEZWcgPSA5MCAtIHJhZDJkZWcocG9sYXIpO1xuICAgICAgICB0aGlzLl9hemltdXRoID0gYXppbXV0aERlZztcbiAgICAgICAgdGhpcy5fcG9sYXIgPSBwb2xhckRlZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBjYW1lcmEgcG9zaXRpb24gYmFzZWQgb24gdGhlIGN1cnJlbnQgYXppbXV0aCxcbiAgICAgKiBwb2xhciBhbmQgcmFkaWFsIHZhbHVlc1xuICAgICAqL1xuICAgIF91cGRhdGVDYW1lcmEoKSB7XG4gICAgICAgIGNvbnN0IGF6aW11dGhJblJhZGlhbnMgPSBkZWcycmFkKHRoaXMuX2F6aW11dGgpO1xuICAgICAgICBjb25zdCBwb2xhckluUmFkaWFucyA9IGRlZzJyYWQodGhpcy5fcG9sYXIpO1xuICAgICAgICB0ZW1wVmVjWzBdID0gdGhpcy5yYWRpYWwgKiBNYXRoLnNpbihhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGVtcFZlY1sxXSA9IHRoaXMucmFkaWFsICogTWF0aC5zaW4ocG9sYXJJblJhZGlhbnMpO1xuICAgICAgICB0ZW1wVmVjWzJdID0gdGhpcy5yYWRpYWwgKiBNYXRoLmNvcyhhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgfVxuICAgIC8qIE1vdXNlIEV2ZW50IEhhbmRsZXJzICovXG4gICAgX29uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXApO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmUpO1xuICAgICAgICBpZiAoZS5idXR0b24gPT09IHRoaXMubW91c2VCdXR0b25JbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLyogdG8gcHJldmVudCBzY3JvbGxpbmcgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9vbk1vdXNlVXAgPSAoZSkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2luaXRpYWwnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXppbXV0aFNwZWVkID0gLShlLm1vdmVtZW50WCAqIHRoaXMueFNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gZS5tb3ZlbWVudFkgKiB0aGlzLnlTZW5zaXRpdml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uTW91c2VTY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgc2Nyb2xsaW5nICovXG4gICAgICAgIHRoaXMucmFkaWFsICo9IDEgLSBlLmRlbHRhWSAqIHRoaXMuem9vbVNlbnNpdGl2aXR5ICogLTAuMDAxO1xuICAgICAgICB0aGlzLnJhZGlhbCA9IE1hdGgubWluKHRoaXMubWF4Wm9vbSwgTWF0aC5tYXgodGhpcy5taW5ab29tLCB0aGlzLnJhZGlhbCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVDYW1lcmEoKTtcbiAgICB9O1xuICAgIC8qIFRvdWNoIGV2ZW50IGhhbmRsZXJzICovXG4gICAgX29uVG91Y2hTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiB0byBwcmV2ZW50IHNjcm9sbGluZyBhbmQgYWxsb3cgdXMgdG8gdHJhY2sgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTsgLyogVHJlYXQgdG91Y2ggbGlrZSBtb3VzZSBkb3duICovXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogQ2FsY3VsYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgKi9cbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvKiBQcmV2ZW50IGRlZmF1bHQgcGluY2ggYWN0aW9ucyAqL1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Ub3VjaE1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlIHx8ICF0aGlzLl9tb3VzZURvd24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgbW92aW5nIHRoZSBwYWdlICovXG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVggPSBlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMuX3RvdWNoU3RhcnRYO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFZID0gZS50b3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLl90b3VjaFN0YXJ0WTtcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IC0oZGVsdGFYICogdGhpcy54U2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgdGhpcy5fcG9sYXJTcGVlZCA9IGRlbHRhWSAqIHRoaXMueVNlbnNpdGl2aXR5O1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogSGFuZGxlIHBpbmNoIHpvb20gKi9cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgY29uc3QgcGluY2hTY2FsZSA9IHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlIC8gY3VycmVudFBpbmNoRGlzdGFuY2U7XG4gICAgICAgICAgICB0aGlzLnJhZGlhbCAqPSBwaW5jaFNjYWxlO1xuICAgICAgICAgICAgdGhpcy5yYWRpYWwgPSBNYXRoLm1pbih0aGlzLm1heFpvb20sIE1hdGgubWF4KHRoaXMubWluWm9vbSwgdGhpcy5yYWRpYWwpKTtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgICAgICAgICAgLyogVXBkYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgZm9yIG5leHQgbW92ZSAqL1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbFBpbmNoRGlzdGFuY2UgPSBjdXJyZW50UGluY2hEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uVG91Y2hFbmQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlOyAvKiBUcmVhdCB0b3VjaCBlbmQgbGlrZSBtb3VzZSB1cCAqL1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiBQcmVwYXJlIGZvciBwb3NzaWJsZSBzaW5nbGUgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKiBAcGFyYW0gdG91Y2hlcyBsaXN0IG9mIHRvdWNoIHBvaW50c1xuICAgICAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKi9cbiAgICBfZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyh0b3VjaGVzKSB7XG4gICAgICAgIGNvbnN0IGR4ID0gdG91Y2hlc1swXS5jbGllbnRYIC0gdG91Y2hlc1sxXS5jbGllbnRYO1xuICAgICAgICBjb25zdCBkeSA9IHRvdWNoZXNbMF0uY2xpZW50WSAtIHRvdWNoZXNbMV0uY2xpZW50WTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1vdXNlQnV0dG9uSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJyYWRpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pbkVsZXZhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoODkuOTkpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhFbGV2YXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pblpvb21cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEwLjApXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhab29tXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJ4U2Vuc2l0aXZpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuNSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInlTZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC4wMilcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInpvb21TZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC45KVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwiZGFtcGluZ1wiLCB2b2lkIDApO1xuZXhwb3J0IHsgT3JiaXRhbENhbWVyYSB9O1xuIiwgImV4cG9ydCB7IEF1ZGlvU291cmNlIH0gZnJvbSAnLi9hdWRpby1zb3VyY2UuanMnO1xuZXhwb3J0IHsgQXVkaW9MaXN0ZW5lciB9IGZyb20gJy4vYXVkaW8tbGlzdGVuZXIuanMnO1xuZXhwb3J0IHsgQXVkaW9NYW5hZ2VyLCBnbG9iYWxBdWRpb01hbmFnZXIgfSBmcm9tICcuL2F1ZGlvLW1hbmFnZXIuanMnO1xuIiwgIi8qKlxuICogQ29tcG9uZW50IHByb3BlcnR5IHR5cGUuXG4gKi9cbmV4cG9ydCB2YXIgVHlwZTtcbihmdW5jdGlvbiAoVHlwZSkge1xuICAgIC8qKlxuICAgICAqICoqTmF0aXZlKipcbiAgICAgKlxuICAgICAqIFByb3BlcnR5IG9mIGEgbmF0aXZlIGNvbXBvbmVudC4gTXVzdCBub3QgYmUgdXNlZCBpbiBjdXN0b20gY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJOYXRpdmVcIl0gPSAxXSA9IFwiTmF0aXZlXCI7XG4gICAgLyoqXG4gICAgICogKipCb29sKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBjaGVja2JveC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYGZhbHNlYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJCb29sXCJdID0gMl0gPSBcIkJvb2xcIjtcbiAgICAvKipcbiAgICAgKiAqKkludCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGludGVnZXIgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJJbnRcIl0gPSA0XSA9IFwiSW50XCI7XG4gICAgLyoqXG4gICAgICogKipGbG9hdCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZmxvYXRpbmcgcG9pbnQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwLjBgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkZsb2F0XCJdID0gOF0gPSBcIkZsb2F0XCI7XG4gICAgLyoqXG4gICAgICogKipTdHJpbmcgLyBUZXh0Kio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBzaW5nbGUtbGluZSB0ZXh0IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBhbiBlbXB0eSBzdHJpbmcsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZSBgZGVmYXVsdGBcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJTdHJpbmdcIl0gPSAxNl0gPSBcIlN0cmluZ1wiO1xuICAgIC8qKlxuICAgICAqICoqRW51bWVyYXRpb24qKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGRyb3Bkb3duIHdpdGggZ2l2ZW4gdmFsdWVzLiBUaGUgYWRkaXRpb25hbFxuICAgICAqIGB2YWx1ZXNgIHBhcmFtZXRlciB3aXRoIHNlbGVjdGlvbiBvcHRpb25zIGlzIG1hbmRhdG9yeS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyByZXNvbHZlZCB0byBhbiAqKmluZGV4KiogaW50byB0aGUgYHZhbHVlc2AgYXJyYXkuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIGB2YWx1ZXNgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieVxuICAgICAqIHRoZSBgZGVmYXVsdGAgcHJvcGVydHkuIFRoZSBgZGVmYXVsdGAgdmFsdWUgY2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4XG4gICAgICogaW50byBgdmFsdWVzYC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgICBjYW1lcmE6IHt0eXBlOiBUeXBlLkVudW0sIHZhbHVlczogWydhdXRvJywgJ2JhY2snLCAnZnJvbnQnXSwgZGVmYXVsdDogJ2F1dG8nfSxcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJFbnVtXCJdID0gMzJdID0gXCJFbnVtXCI7XG4gICAgLyoqXG4gICAgICogKipPYmplY3QgcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYW4gb2JqZWN0IHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93blxuICAgICAqIHdpdGggb2JqZWN0IHBpY2tlci5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIk9iamVjdFwiXSA9IDY0XSA9IFwiT2JqZWN0XCI7XG4gICAgLyoqXG4gICAgICogKipNZXNoIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgbWVzaCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJNZXNoXCJdID0gMTI4XSA9IFwiTWVzaFwiO1xuICAgIC8qKlxuICAgICAqICoqVGV4dHVyZSByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHRleHR1cmUgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiVGV4dHVyZVwiXSA9IDI1Nl0gPSBcIlRleHR1cmVcIjtcbiAgICAvKipcbiAgICAgKiAqKk1hdGVyaWFsIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgbWF0ZXJpYWwgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiTWF0ZXJpYWxcIl0gPSA1MTJdID0gXCJNYXRlcmlhbFwiO1xuICAgIC8qKlxuICAgICAqICoqQW5pbWF0aW9uIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGFuaW1hdGlvbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJBbmltYXRpb25cIl0gPSAxMDI0XSA9IFwiQW5pbWF0aW9uXCI7XG4gICAgLyoqXG4gICAgICogKipTa2luIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgc2tpbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJTa2luXCJdID0gMjA0OF0gPSBcIlNraW5cIjtcbiAgICAvKipcbiAgICAgKiAqKkNvbG9yKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBjb2xvciB3aWRnZXQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBbMC4wLCAwLjAsIDAuMCwgMS4wXWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZVxuICAgICAqIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJDb2xvclwiXSA9IDQwOTZdID0gXCJDb2xvclwiO1xufSkoVHlwZSB8fCAoVHlwZSA9IHt9KSk7XG4vKipcbiAqIENvbXBvbmVudCBwcm9wZXJ0eSBuYW1lc3BhY2UuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7Q29tcG9uZW50LCBQcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gKiAgICAgICAgIG15Qm9vbDogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAqICAgICAgICAgbXlJbnQ6IFByb3BlcnR5LmludCg0MiksXG4gKiAgICAgICAgIG15U3RyaW5nOiBQcm9wZXJ0eS5zdHJpbmcoJ0hlbGxvIFdvcmxkIScpLFxuICogICAgICAgICBteU1lc2g6IFByb3BlcnR5Lm1lc2goKSxcbiAqICAgICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBGb3IgVHlwZVNjcmlwdCB1c2VycywgeW91IGNhbiB1c2UgdGhlIGRlY29yYXRvcnMgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFByb3BlcnR5ID0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBib29sZWFuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgZmFsc2VgLlxuICAgICAqL1xuICAgIGJvb2woZGVmYXVsdFZhbHVlID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5Cb29sLCBkZWZhdWx0OiBkZWZhdWx0VmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnRlZ2VyIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgMGAuXG4gICAgICovXG4gICAgaW50KGRlZmF1bHRWYWx1ZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5JbnQsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGZsb2F0IHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgMC4wYC5cbiAgICAgKi9cbiAgICBmbG9hdChkZWZhdWx0VmFsdWUgPSAwLjApIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogZGVmYXVsdFZhbHVlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gc3RyaW5nIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgJydgLlxuICAgICAqL1xuICAgIHN0cmluZyhkZWZhdWx0VmFsdWUgPSAnJykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLlN0cmluZywgZGVmYXVsdDogZGVmYXVsdFZhbHVlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZW51bWVyYXRpb24gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBDYW4gYmUgYSBzdHJpbmcgb3IgYW4gaW5kZXggaW50b1xuICAgICAqICAgICBgdmFsdWVzYC4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICAgKi9cbiAgICBlbnVtKHZhbHVlcywgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuRW51bSwgdmFsdWVzLCBkZWZhdWx0OiBkZWZhdWx0VmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYW4ge0BsaW5rIE9iamVjdDNEfSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgb2JqZWN0KG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5PYmplY3QsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBNZXNofSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgbWVzaChvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuTWVzaCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGEge0BsaW5rIFRleHR1cmV9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICB0ZXh0dXJlKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5UZXh0dXJlLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgTWF0ZXJpYWx9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBtYXRlcmlhbChvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuTWF0ZXJpYWwsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhbiB7QGxpbmsgQW5pbWF0aW9ufSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgYW5pbWF0aW9uKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5BbmltYXRpb24sIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBTa2lufSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgc2tpbihvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuU2tpbiwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb2xvciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIFRoZSByZWQgY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqIEBwYXJhbSBnIFRoZSBncmVlbiBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGIgVGhlIGJsdWUgY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqIEBwYXJhbSBhIFRoZSBhbHBoYSBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICovXG4gICAgY29sb3IociA9IDAuMCwgZyA9IDAuMCwgYiA9IDAuMCwgYSA9IDEuMCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkNvbG9yLCBkZWZhdWx0OiBbciwgZywgYiwgYV0gfTtcbiAgICB9LFxufTtcbiIsICJpbXBvcnQgeyBQcm9wZXJ0eSwgVHlwZSB9IGZyb20gJy4vcHJvcGVydHkuanMnO1xuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIEpTIGNvbXBvbmVudCBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSBkYXRhIFRoZSBwcm9wZXJ0eSBkZXNjcmlwdGlvbiBhcyBhbiBvYmplY3QgbGl0ZXJhbFxuICogQHJldHVybnMgQSBkZWNvcmF0b3IgZnVuY3Rpb24gbW9kaWZ5aW5nIHRoZSBgUHJvcGVydGllc2Agc3RhdGljXG4gKiAgICAgYXR0cmlidXRlXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5RGVjb3JhdG9yKGRhdGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRhcmdldC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY3Rvci5Qcm9wZXJ0aWVzID0gY3Rvci5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpID8gY3Rvci5Qcm9wZXJ0aWVzIDoge307XG4gICAgICAgIGN0b3IuUHJvcGVydGllc1twcm9wZXJ0eUtleV0gPSBkYXRhO1xuICAgIH07XG59XG4vKipcbiAqIERlY29yYXRvciBmb3IgbWFraW5nIGEgZ2V0dGVyIGVudW1lcmFibGUuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIE15Q2xhc3Mge1xuICogICAgIEBlbnVtZXJhYmxlKClcbiAqICAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpOiBGbG9hdDMyQXJyYXkgeyAuLi4gfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnVtZXJhYmxlKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXywgX18sIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIG5hdGl2ZSBwcm9wZXJ0aWVzLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYHRzXG4gKiBjbGFzcyBNeUNsYXNzIHtcbiAqICAgICBAbmF0aXZlUHJvcGVydHkoKVxuICogICAgIGdldCBwcm9qZWN0aW9uTWF0cml4KCk6IEZsb2F0MzJBcnJheSB7IC4uLiB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hdGl2ZVByb3BlcnR5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgICAgICBlbnVtZXJhYmxlKCkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgIHByb3BlcnR5RGVjb3JhdG9yKHsgdHlwZTogVHlwZS5OYXRpdmUgfSkodGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn1cbi8qKlxuICogUHJvcGVydHkgZGVjb3JhdG9ycyBuYW1lc3BhY2UuXG4gKlxuICogWW91IGNhbiB1c2UgdGhlIGRlY29yYXRvcnMgdG8gbWFyayBhIGNsYXNzIGF0dHJpYnV0ZSBhc1xuICogYSBXb25kZXJsYW5kIEVuZ2luZSBwcm9wZXJ0eS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHtNZXNofSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICogaW1wb3J0IHtwcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuICpcbiAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBAcHJvcGVydHkuYm9vbCh0cnVlKVxuICogICAgIG15Qm9vbCE6IGJvb2xlYW47XG4gKlxuICogICAgIEBwcm9wZXJ0eS5pbnQoNDIpXG4gKiAgICAgbXlJbnQhOiBudW1iZXI7XG4gKlxuICogICAgIEBwcm9wZXJ0eS5zdHJpbmcoJ0hlbGxvIFdvcmxkIScpXG4gKiAgICAgbXlTdHJpbmchOiBzdHJpbmc7XG4gKlxuICogICAgIEBwcm9wZXJ0eS5tZXNoKClcbiAqICAgICBteU1lc2ghOiBNZXNoO1xuICogfVxuICogYGBgXG4gKlxuICogRm9yIEphdmFTY3JpcHQgdXNlcnMsIHBsZWFzZSBkZWNsYXJlIHRoZSBwcm9wZXJ0aWVzIHN0YXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9wZXJ0eSA9IHt9O1xuZm9yIChjb25zdCBuYW1lIGluIFByb3BlcnR5KSB7XG4gICAgLyogQXNzaWduIGVhY2ggcHJvcGVydHkgZnVuY3RvciB0byBhIFR5cGVTY3JpcHQgZGVjb3JhdG9yLlxuICAgICAqIFRoaXMgY29kZSBleHRyYWN0cyBwYXJhbWV0ZXJzIGFuZCByZXR1cm4gdHlwZSB0byBwcm92aWRlIHByb3BlclxuICAgICAqIHR5cGluZ3MgdG8gdGhlIHVzZXIuICovXG4gICAgcHJvcGVydHlbbmFtZV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25zdCBmdW5jdG9yID0gUHJvcGVydHlbbmFtZV07XG4gICAgICAgIHJldHVybiBwcm9wZXJ0eURlY29yYXRvcihmdW5jdG9yKC4uLmFyZ3MpKTtcbiAgICB9O1xufVxuIiwgIi8qKlxuICogQ2hlY2sgaWYgYSBnaXZlbiB2YWx1ZSBpcyBhIG5hdGl2ZSBzdHJpbmcgb3IgYSBgU3RyaW5nYCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGhhcyB0eXBlIHN0cmluZyBsaXRlcmFsIG9yIGBTdHJpbmdgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSAnJylcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHZhbHVlLmNvbnN0cnVjdG9yID09PSBTdHJpbmcpO1xufVxuLyoqXG4gKiBDaGVjayBpZiBhIGdpdmVuIHZhbHVlIGlzIGEgbmF0aXZlIG51bWJlciBvciBhIGBOdW1iZXJgIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaGFzIHR5cGUgbnVtYmVyIGxpdGVyYWwgb3IgYE51bWJlcmAsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHZhbHVlLmNvbnN0cnVjdG9yID09PSBOdW1iZXI7XG59XG4iLCAiLyoqXG4gKiBFdmVudCBlbWl0dGVyLlxuICpcbiAqIFRoaXMgY2xhc3MgYWxsb3dzIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyB0aGF0IHdpbGwgZ2V0IG5vdGlmaWVkIGJ5IHRoZSBlbWl0dGVyLlxuICpcbiAqIFVzYWdlIGV4YW1wbGVcbiAqXG4gKiBgYGBqc1xuICogLy8gYG9uUHJlUmVuZGVyYCBpcyBhbiBgRW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBzY2VuZS5vblByZVJlbmRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ2JlZm9yZSByZW5kZXJpbmcnKSk7XG4gKiAvLyBgb25Qb3N0UmVuZGVyYCBpcyBhbiBgRW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBzY2VuZS5vblBvc3RSZW5kZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdhZnRlciByZW5kZXJpbmcnKSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGNyZWF0ZSB5b3VyIG93biBlbWl0dGVyczpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IGVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICogYGBgXG4gKlxuICogWW91IGNhbiBub3RpZnkgbGlzdGVuZXJzIGluIHRvIHlvdXIgZW1pdHRlciB1c2luZyB7QGxpbmsgRW1pdHRlci5ub3RpZnl9OlxuICpcbiAqIGBgYGpzXG4gKiAvLyBOb3RpZmllcyBhbGwgdGhlIGxpc3RlbmVycy5cbiAqIGVtaXR0ZXIubm90aWZ5KCk7XG4gKiAvLyBOb3RpZmllcyBhbGwgdGhlIGxpc3RlbmVycyB3aXRoIHNvbWUgZGF0YS5cbiAqIGVtaXR0ZXIubm90aWZ5KHsgbXlJbnQ6IDQyLCBteVN0cjogJ0hlbGxvIFdvcmxkIScgfSk7XG4gKiBgYGBcbiAqXG4gKiBAY2F0ZWdvcnkgZXZlbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgbGlzdGVuZXJzIHRvIHRyaWdnZXIgd2hlbiBgbm90aWZ5YCBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2xpc3RlbmVycyA9IFtdO1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbmV3IGxpc3RlbmVyIHRvIGJlIHRyaWdnZXJlZCBvbiB7QGxpbmsgRW1pdHRlci5ub3RpZnl9LlxuICAgICAqXG4gICAgICogQmFzaWMgdXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdldmVudCByZWNlaXZlZCEnKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHJlbW92ZSB0aGUgbGlzdGVuZXIgd2hlbiBhbiBldmVudCBpcyByZWNlaXZlZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ2V2ZW50IHJlY2VpdmVkIScpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgKiB9LCB7b25jZTogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byByZWdpc3Rlci5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbGlzdGVuZXIgb3B0aW9ucy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9va1xuICAgICAqICAgICBhdCB0aGUge0BsaW5rIExpc3RlbmVyT3B0aW9uc30gaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpXG4gICAgICovXG4gICAgYWRkKGxpc3RlbmVyLCBvcHRzID0ge30pIHtcbiAgICAgICAgY29uc3QgeyBvbmNlID0gZmFsc2UsIGlkID0gdW5kZWZpbmVkIH0gPSBvcHRzO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaCh7IGlkLCBvbmNlLCBjYWxsYmFjazogbGlzdGVuZXIgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBFbWl0dGVyLmFkZH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJzIFRoZSBjYWxsYmFjayhzKSB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLmFkZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBwdXNoKC4uLmxpc3RlbmVycykge1xuICAgICAgICBmb3IgKGNvbnN0IGNiIG9mIGxpc3RlbmVycylcbiAgICAgICAgICAgIHRoaXMuYWRkKGNiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbmV3IGxpc3RlbmVyIHRvIGJlIHRyaWdnZXJlZCBvbiB7QGxpbmsgRW1pdHRlci5ub3RpZnl9LlxuICAgICAqXG4gICAgICogT25jZSBub3RpZmllZCwgdGhlIGxpc3RlbmVyIHdpbGwgYmUgYXV0b21hdGljYWxseSByZW1vdmVkLlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIEVtaXR0ZXIuYWRkfSB3aXRoOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZChsaXN0ZW5lciwge29uY2U6IHRydWV9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gcmVnaXN0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgb25jZShsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGQobGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcmVnaXN0ZXJlZCBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqIFVzYWdlIHdpdGggYSBjYWxsYmFjazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbGlzdGVuZXIgPSAoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICogZW1pdHRlci5hZGQobGlzdGVuZXIpO1xuICAgICAqXG4gICAgICogLy8gUmVtb3ZlIHVzaW5nIHRoZSBjYWxsYmFjayByZWZlcmVuY2U6XG4gICAgICogZW1pdHRlci5yZW1vdmUobGlzdGVuZXIpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVXNhZ2Ugd2l0aCBhbiBpZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpLCB7aWQ6ICdteS1jYWxsYmFjayd9KTtcbiAgICAgKlxuICAgICAqIC8vIFJlbW92ZSB1c2luZyB0aGUgaWQ6XG4gICAgICogZW1pdHRlci5yZW1vdmUoJ215LWNhbGxiYWNrJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBVc2luZyBpZGVudGlmaWVycywgeW91IHdpbGwgbmVlZCB0byBlbnN1cmUgeW91ciB2YWx1ZSBpcyB1bmlxdWUgdG8gYXZvaWRcbiAgICAgKiByZW1vdmluZyBsaXN0ZW5lcnMgZnJvbSBvdGhlciBsaWJyYXJpZXMsIGUuZy4sOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSksIHtpZDogJ25vbi11bmlxdWUnfSk7XG4gICAgICogLy8gVGhpcyBzZWNvbmQgbGlzdGVuZXIgY291bGQgYmUgYWRkZWQgYnkgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5LlxuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZygnSGVsbG8gRnJvbSBMaWJyYXJ5IScpLCB7aWQ6ICdub24tdW5pcXVlJ30pO1xuICAgICAqXG4gICAgICogLy8gSG8gU25hcCEgVGhpcyBhbHNvIHJlbW92ZWQgdGhlIGxpYnJhcnkgbGlzdGVuZXIhXG4gICAgICogZW1pdHRlci5yZW1vdmUoJ25vbi11bmlxdWUnKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSBpZGVudGlmaWVyIGNhbiBiZSBhbnkgdHlwZS4gSG93ZXZlciwgcmVtZW1iZXIgdGhhdCB0aGUgY29tcGFyaXNvbiB3aWxsIGJlXG4gICAgICogYnktdmFsdWUgZm9yIHByaW1pdGl2ZSB0eXBlcyAoc3RyaW5nLCBudW1iZXIpLCBidXQgYnkgcmVmZXJlbmNlIGZvciBvYmplY3RzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ0hlbGxvJyksIHtpZDoge3ZhbHVlOiA0Mn19KTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnV29ybGQhJyksIHtpZDoge3ZhbHVlOiA0Mn19KTtcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSh7dmFsdWU6IDQyfSk7IC8vIE5vbmUgb2YgdGhlIGFib3ZlIGxpc3RlbmVycyBtYXRjaCFcbiAgICAgKiBlbWl0dGVyLm5vdGlmeSgpOyAvLyBQcmludHMgJ0hlbGxvJyBhbmQgJ1dvcmxkIScuXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBIZXJlLCBib3RoIGVtaXR0ZXJzIGhhdmUgaWQgYHt2YWx1ZTogNDJ9YCwgYnV0IHRoZSBjb21wYXJpc29uIGlzIG1hZGUgYnkgcmVmZXJlbmNlLiBUaHVzLFxuICAgICAqIHRoZSBgcmVtb3ZlKClgIGNhbGwgaGFzIG5vIGVmZmVjdC4gV2UgY2FuIG1ha2UgaXQgd29yayBieSBkb2luZzpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaWQgPSB7dmFsdWU6IDQyfTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnSGVsbG8nKSwge2lkfSk7XG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ1dvcmxkIScpLCB7aWR9KTtcbiAgICAgKiBlbWl0dGVyLnJlbW92ZShpZCk7IC8vIFNhbWUgcmVmZXJlbmNlLCBpdCB3b3JrcyFcbiAgICAgKiBlbWl0dGVyLm5vdGlmeSgpOyAvLyBEb2Vzbid0IHByaW50LlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSByZWdpc3RlcmVkIGNhbGxiYWNrIG9yIGEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBgaWRgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpXG4gICAgICovXG4gICAgcmVtb3ZlKGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2FsbGJhY2sgPT09IGxpc3RlbmVyIHx8IHRhcmdldC5pZCA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGxpc3RlbmVyIGlzIHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBwZXJmb3JtcyBhIGxpbmVhciBzZWFyY2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgb3IgYSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGBpZGAuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBoYW5kbGUgaXMgZm91bmQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGhhcyhsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNhbGxiYWNrID09PSBsaXN0ZW5lciB8fCB0YXJnZXQuaWQgPT09IGxpc3RlbmVyKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZ5IGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGVuc3VyZXMgYWxsIGxpc3RlbmVycyBhcmUgY2FsbGVkIGV2ZW4gaWZcbiAgICAgKiBhbiBleGNlcHRpb24gaXMgdGhyb3duLiBGb3IgKHBvc3NpYmx5KSBmYXN0ZXIgbm90aWZpY2F0aW9uLFxuICAgICAqIHBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5VW5zYWZlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeSguLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsYmFjayguLi5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgbGlzdGVuZXJzIHdpdGggdGhlIGdpdmVuIGRhdGEgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQmVjYXVzZSB0aGlzIG1ldGhvZCBkb2Vzbid0IGNhdGNoIGV4Y2VwdGlvbnMsIHNvbWUgbGlzdGVuZXJzXG4gICAgICogd2lsbCBiZSBza2lwcGVkIG9uIGEgdGhyb3cuIFBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5fSBmb3Igc2FmZVxuICAgICAqIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeVVuc2FmZSguLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgbGlzdGVuZXIuY2FsbGJhY2soLi4uZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbiB0aGUgbmV4dCBldmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBwcm9taXNlIG1pZ2h0IG5ldmVyIHJlc29sdmUgaWYgbm8gZXZlbnQgaXMgc2VudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRhdGEgcGFzc2VkIHRvXG4gICAgICogICAgIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICovXG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIF8pID0+IHtcbiAgICAgICAgICAgIHRoaXMub25jZSgoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBsaXN0ZW5lcnMuICovXG4gICAgZ2V0IGxpc3RlbmVyQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogYHRydWVgIGlmIGl0IGhhcyBubyBsaXN0ZW5lcnMsIGBmYWxzZWAgb3RoZXJ3aXNlLiAqL1xuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lckNvdW50ID09PSAwO1xuICAgIH1cbn1cbi8qIER1bW15IHZhbHVlIHVzZWQgd2l0aCBSZXRhaW5FbWl0dGVyLiAqL1xuY29uc3QgUmV0YWluRW1pdHRlclVuZGVmaW5lZCA9IHt9O1xuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgcmV0YWlucyBldmVudCBkYXRhIHdoZW4gbm90aWZpZWQuXG4gKlxuICogQWZ0ZXIgYSBub3RpZmljYXRpb24gaGFwcGVucywgc3Vic2VxdWVudCBjYWxscyB0byB7QGxpbmsgUmV0YWluRW1pdHRlci5hZGR9IHdpbGwgZ2V0XG4gKiBhdXRvbWF0aWNhbGx5IG5vdGlmaWVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIGFub3RoZXIgZW1pdHRlciBpbiBvcmRlciB0byBjYW5jZWwgdGhlIGxhc3QgcmV0YWluZWQgZXZlbnQ6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlciwgUmV0YWluZWRFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IG9uU3RhcnQgPSBuZXcgUmV0YWluZWRFbWl0dGVyKCk7XG4gKlxuICogb25TdGFydC5ub3RpZnkoNDIpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBQcmludHMgJzQyJy5cbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gcmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLCBpLmUuLCBtYWtpbmcgaXQgZm9yZ2V0IGFib3V0IHRoZVxuICogbGFzdCBldmVudCB1c2luZzpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtFbWl0dGVyLCBSZXRhaW5lZEVtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3Qgb25TdGFydCA9IG5ldyBSZXRhaW5lZEVtaXR0ZXIoKTtcbiAqIG9uU3RhcnQubm90aWZ5KDQyKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gUHJpbnRzICc0MicuXG4gKlxuICogLy8gUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLlxuICogb25TdGFydC5yZXNldCgpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBEb2Vzbid0IHByaW50IGFueXRoaW5nLlxuICogYGBgXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZW1pdHRlcnMsIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB0aGUgYmFzZSB7QGxpbmsgRW1pdHRlcn0gY2xhc3MuXG4gKlxuICogQGNhdGVnb3J5IGV2ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXRhaW5FbWl0dGVyIGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqIFByZS1yZXNvbHZlZCBkYXRhLiBAaGlkZGVuICovXG4gICAgX2V2ZW50ID0gUmV0YWluRW1pdHRlclVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIHRhcmdldCB1c2VkIHRvIHJlc2V0IHRoZSBzdGF0ZSBvZiB0aGlzIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3Jlc2V0O1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBhZGQobGlzdGVuZXIsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgaW1tZWRpYXRlID0gb3B0cz8uaW1tZWRpYXRlID8/IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9ldmVudCAhPT0gUmV0YWluRW1pdHRlclVuZGVmaW5lZCAmJiBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLnRoaXMuX2V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5hZGQobGlzdGVuZXIsIG9wdHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHJlZ2lzdGVyLlxuICAgICAqIEBwYXJhbSBpbW1lZGlhdGUgSWYgYHRydWVgLCBkaXJlY3RseSByZXNvbHZlcyBpZiB0aGUgZW1pdHRlciByZXRhaW5zIGEgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgb25jZShsaXN0ZW5lciwgaW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChsaXN0ZW5lciwgeyBvbmNlOiB0cnVlLCBpbW1lZGlhdGUgfSk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBub3RpZnkoLi4uZGF0YSkge1xuICAgICAgICB0aGlzLl9ldmVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm5vdGlmeSguLi5kYXRhKTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIG5vdGlmeVVuc2FmZSguLi5kYXRhKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50ID0gZGF0YTtcbiAgICAgICAgc3VwZXIubm90aWZ5VW5zYWZlKC4uLmRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc3RhdGUgb2YgdGhlIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBGdXJ0aGVyIGNhbGwgdG8ge0BsaW5rIEVtaXR0ZXIuYWRkfSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHJlc29sdmUsXG4gICAgICogdW50aWwgYSBuZXcgY2FsbCB0byB7QGxpbmsgRW1pdHRlci5ub3RpZnl9IGlzIHBlcmZvcm1lZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLl9ldmVudCA9IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgcmV0YWluZWQgZGF0YSwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gZGF0YSB3YXMgcmV0YWluZWQuICovXG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGF0YVJldGFpbmVkID8gdGhpcy5fZXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBgdHJ1ZWAgaWYgZGF0YSBpcyByZXRhaW5lZCBmcm9tIHRoZSBsYXN0IGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS4gKi9cbiAgICBnZXQgaXNEYXRhUmV0YWluZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmVudCAhPT0gUmV0YWluRW1pdHRlclVuZGVmaW5lZDtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBUeXBlc1xuICovXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBuYXRpdmVQcm9wZXJ0eSwgZW51bWVyYWJsZSB9IGZyb20gJy4vZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBpc051bWJlciwgaXNTdHJpbmcgfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG4vKipcbiAqIFdvbmRlcmxhbmQgRW5naW5lIEFQSVxuICogQG5hbWVzcGFjZSBXTFxuICovXG4vKipcbiAqIENvbGxpZGVyIHR5cGUgZW51bSBmb3Ige0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgQ29sbGlkZXI7XG4oZnVuY3Rpb24gKENvbGxpZGVyKSB7XG4gICAgLyoqXG4gICAgICogKipTcGhlcmUgQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIFNpbXBsZXN0IGFuZCBtb3N0IHBlcmZvcm1hbnQgY29sbGlzaW9uIHNoYXBlLiBJZiB0aGlzIHR5cGUgaXMgc2V0IG9uIGFcbiAgICAgKiB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50fSwgb25seSB0aGUgZmlyc3QgY29tcG9uZW50IG9mXG4gICAgICoge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudCNleHRlbnRzfSB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSByYWRpdXMuXG4gICAgICovXG4gICAgQ29sbGlkZXJbQ29sbGlkZXJbXCJTcGhlcmVcIl0gPSAwXSA9IFwiU3BoZXJlXCI7XG4gICAgLyoqXG4gICAgICogKipBeGlzIEFsaWduZWQgQm91bmRpbmcgQm94IENvbGxpZGVyKio6XG4gICAgICpcbiAgICAgKiBCb3ggdGhhdCBpcyBhbHdheXMgYWxpZ25lZCB0byBYWVogYXhpcy4gSXQgY2Fubm90IGJlIHJvdGF0ZWQgYnV0IGlzIG1vcmVcbiAgICAgKiBlZmZpY2llbnQgdGhhbiB7QGxpbmsgQ29sbGlkZXIuQm94fS5cbiAgICAgKi9cbiAgICBDb2xsaWRlcltDb2xsaWRlcltcIkF4aXNBbGlnbmVkQm94XCJdID0gMV0gPSBcIkF4aXNBbGlnbmVkQm94XCI7XG4gICAgLyoqXG4gICAgICogKipBbGlnbmVkIEJvdW5kaW5nIEJveCBDb2xsaWRlcioqOlxuICAgICAqXG4gICAgICogQm94IHRoYXQgbWF0Y2hlcyB0aGUgb2JqZWN0J3Mgcm90YXRpb24gYW5kIHRyYW5zbGF0aW9uIGNvcnJlY3RseS4gVGhpc1xuICAgICAqIGlzIHRoZSBsZWFzdCBlZmZpY2llbnQgY29sbGlkZXIgYW5kIHNob3VsZCBvbmx5IGJlIGNob3NlbiBvdmVyXG4gICAgICoge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0gYW5kIHtAbGluayBDb2xsaWRlci5BeGlzQWxpZ25lZEJveH0gaWYgcmVhbGx5XG4gICAgICogbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIENvbGxpZGVyW0NvbGxpZGVyW1wiQm94XCJdID0gMl0gPSBcIkJveFwiO1xufSkoQ29sbGlkZXIgfHwgKENvbGxpZGVyID0ge30pKTtcbi8qKlxuICogQWxpZ25tZW50IHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIEFsaWdubWVudDtcbihmdW5jdGlvbiAoQWxpZ25tZW50KSB7XG4gICAgLyoqIFRleHQgc3RhcnQgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIEFsaWdubWVudFtBbGlnbm1lbnRbXCJMZWZ0XCJdID0gMF0gPSBcIkxlZnRcIjtcbiAgICAvKiogVGV4dCBjZW50ZXIgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIEFsaWdubWVudFtBbGlnbm1lbnRbXCJDZW50ZXJcIl0gPSAxXSA9IFwiQ2VudGVyXCI7XG4gICAgLyoqIFRleHQgZW5kIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBBbGlnbm1lbnRbQWxpZ25tZW50W1wiUmlnaHRcIl0gPSAyXSA9IFwiUmlnaHRcIjtcbn0pKEFsaWdubWVudCB8fCAoQWxpZ25tZW50ID0ge30pKTtcbi8qKlxuICogSnVzdGlmaWNhdGlvbiB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBKdXN0aWZpY2F0aW9uO1xuKGZ1bmN0aW9uIChKdXN0aWZpY2F0aW9uKSB7XG4gICAgLyoqIFRleHQgbGluZSBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgSnVzdGlmaWNhdGlvbltKdXN0aWZpY2F0aW9uW1wiTGluZVwiXSA9IDBdID0gXCJMaW5lXCI7XG4gICAgLyoqIFRleHQgbWlkZGxlIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBKdXN0aWZpY2F0aW9uW0p1c3RpZmljYXRpb25bXCJNaWRkbGVcIl0gPSAxXSA9IFwiTWlkZGxlXCI7XG4gICAgLyoqIFRleHQgdG9wIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBKdXN0aWZpY2F0aW9uW0p1c3RpZmljYXRpb25bXCJUb3BcIl0gPSAyXSA9IFwiVG9wXCI7XG4gICAgLyoqIFRleHQgYm90dG9tIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBKdXN0aWZpY2F0aW9uW0p1c3RpZmljYXRpb25bXCJCb3R0b21cIl0gPSAzXSA9IFwiQm90dG9tXCI7XG59KShKdXN0aWZpY2F0aW9uIHx8IChKdXN0aWZpY2F0aW9uID0ge30pKTtcbi8qKlxuICogRWZmZWN0IHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIFRleHRFZmZlY3Q7XG4oZnVuY3Rpb24gKFRleHRFZmZlY3QpIHtcbiAgICAvKiogVGV4dCBpcyByZW5kZXJlZCBub3JtYWxseSAqL1xuICAgIFRleHRFZmZlY3RbVGV4dEVmZmVjdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKiBUZXh0IGlzIHJlbmRlcmVkIHdpdGggYW4gb3V0bGluZSAqL1xuICAgIFRleHRFZmZlY3RbVGV4dEVmZmVjdFtcIk91dGxpbmVcIl0gPSAxXSA9IFwiT3V0bGluZVwiO1xufSkoVGV4dEVmZmVjdCB8fCAoVGV4dEVmZmVjdCA9IHt9KSk7XG4vKipcbiAqIElucHV0IHR5cGUgZW51bSBmb3Ige0BsaW5rIElucHV0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBJbnB1dFR5cGU7XG4oZnVuY3Rpb24gKElucHV0VHlwZSkge1xuICAgIC8qKiBIZWFkIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkhlYWRcIl0gPSAwXSA9IFwiSGVhZFwiO1xuICAgIC8qKiBMZWZ0IGV5ZSBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJFeWVMZWZ0XCJdID0gMV0gPSBcIkV5ZUxlZnRcIjtcbiAgICAvKiogUmlnaHQgZXllIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkV5ZVJpZ2h0XCJdID0gMl0gPSBcIkV5ZVJpZ2h0XCI7XG4gICAgLyoqIExlZnQgY29udHJvbGxlciBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJDb250cm9sbGVyTGVmdFwiXSA9IDNdID0gXCJDb250cm9sbGVyTGVmdFwiO1xuICAgIC8qKiBSaWdodCBjb250cm9sbGVyIGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIkNvbnRyb2xsZXJSaWdodFwiXSA9IDRdID0gXCJDb250cm9sbGVyUmlnaHRcIjtcbiAgICAvKiogTGVmdCByYXkgaW5wdXQgKi9cbiAgICBJbnB1dFR5cGVbSW5wdXRUeXBlW1wiUmF5TGVmdFwiXSA9IDVdID0gXCJSYXlMZWZ0XCI7XG4gICAgLyoqIFJpZ2h0IHJheSBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJSYXlSaWdodFwiXSA9IDZdID0gXCJSYXlSaWdodFwiO1xufSkoSW5wdXRUeXBlIHx8IChJbnB1dFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBMaWdodCB0eXBlIGVudW0gZm9yIHtAbGluayBMaWdodENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgTGlnaHRUeXBlO1xuKGZ1bmN0aW9uIChMaWdodFR5cGUpIHtcbiAgICAvKiogUG9pbnQgbGlnaHQgKi9cbiAgICBMaWdodFR5cGVbTGlnaHRUeXBlW1wiUG9pbnRcIl0gPSAwXSA9IFwiUG9pbnRcIjtcbiAgICAvKiogU3BvdCBsaWdodCAqL1xuICAgIExpZ2h0VHlwZVtMaWdodFR5cGVbXCJTcG90XCJdID0gMV0gPSBcIlNwb3RcIjtcbiAgICAvKiogU3VuIGxpZ2h0IC8gRGlyZWN0aW9uYWwgbGlnaHQgKi9cbiAgICBMaWdodFR5cGVbTGlnaHRUeXBlW1wiU3VuXCJdID0gMl0gPSBcIlN1blwiO1xufSkoTGlnaHRUeXBlIHx8IChMaWdodFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBBbmltYXRpb24gc3RhdGUgb2Yge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgQW5pbWF0aW9uU3RhdGU7XG4oZnVuY3Rpb24gKEFuaW1hdGlvblN0YXRlKSB7XG4gICAgLyoqIEFuaW1hdGlvbiBpcyBjdXJyZW50bHkgcGxheWluZyAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiUGxheWluZ1wiXSA9IDBdID0gXCJQbGF5aW5nXCI7XG4gICAgLyoqIEFuaW1hdGlvbiBpcyBwYXVzZWQgYW5kIHdpbGwgY29udGludWUgYXQgY3VycmVudCBwbGF5YmFja1xuICAgICAqIHRpbWUgb24ge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNwbGF5fSAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiUGF1c2VkXCJdID0gMV0gPSBcIlBhdXNlZFwiO1xuICAgIC8qKiBBbmltYXRpb24gaXMgc3RvcHBlZCAqL1xuICAgIEFuaW1hdGlvblN0YXRlW0FuaW1hdGlvblN0YXRlW1wiU3RvcHBlZFwiXSA9IDJdID0gXCJTdG9wcGVkXCI7XG59KShBbmltYXRpb25TdGF0ZSB8fCAoQW5pbWF0aW9uU3RhdGUgPSB7fSkpO1xuLyoqXG4gKiBSaWdpZCBib2R5IGZvcmNlIG1vZGUgZm9yIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRGb3JjZX0gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRUb3JxdWV9LlxuICpcbiAqIFtQaHlzWCBBUEkgUmVmZXJlbmNlXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGFwaS9maWxlcy9zdHJ1Y3RQeEZvcmNlTW9kZS5odG1sKVxuICovXG5leHBvcnQgdmFyIEZvcmNlTW9kZTtcbihmdW5jdGlvbiAoRm9yY2VNb2RlKSB7XG4gICAgLyoqIEFwcGx5IGFzIGZvcmNlICovXG4gICAgRm9yY2VNb2RlW0ZvcmNlTW9kZVtcIkZvcmNlXCJdID0gMF0gPSBcIkZvcmNlXCI7XG4gICAgLyoqIEFwcGx5IGFzIGltcHVsc2UgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiSW1wdWxzZVwiXSA9IDFdID0gXCJJbXB1bHNlXCI7XG4gICAgLyoqIEFwcGx5IGFzIHZlbG9jaXR5IGNoYW5nZSwgbWFzcyBkZXBlbmRlbnQgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiVmVsb2NpdHlDaGFuZ2VcIl0gPSAyXSA9IFwiVmVsb2NpdHlDaGFuZ2VcIjtcbiAgICAvKiogQXBwbHkgYXMgbWFzcyBkZXBlbmRlbnQgZm9yY2UgKi9cbiAgICBGb3JjZU1vZGVbRm9yY2VNb2RlW1wiQWNjZWxlcmF0aW9uXCJdID0gM10gPSBcIkFjY2VsZXJhdGlvblwiO1xufSkoRm9yY2VNb2RlIHx8IChGb3JjZU1vZGUgPSB7fSkpO1xuLyoqXG4gKiBDb2xsaXNpb24gY2FsbGJhY2sgZXZlbnQgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBDb2xsaXNpb25FdmVudFR5cGU7XG4oZnVuY3Rpb24gKENvbGxpc2lvbkV2ZW50VHlwZSkge1xuICAgIC8qKiBUb3VjaC9jb250YWN0IGRldGVjdGVkLCBjb2xsaXNpb24gKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVG91Y2hcIl0gPSAwXSA9IFwiVG91Y2hcIjtcbiAgICAvKiogVG91Y2gvY29udGFjdCBsb3N0LCB1bmNvbGxpZGUgKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVG91Y2hMb3N0XCJdID0gMV0gPSBcIlRvdWNoTG9zdFwiO1xuICAgIC8qKiBUb3VjaC9jb250YWN0IHdpdGggdHJpZ2dlciBkZXRlY3RlZCAqL1xuICAgIENvbGxpc2lvbkV2ZW50VHlwZVtDb2xsaXNpb25FdmVudFR5cGVbXCJUcmlnZ2VyVG91Y2hcIl0gPSAyXSA9IFwiVHJpZ2dlclRvdWNoXCI7XG4gICAgLyoqIFRvdWNoL2NvbnRhY3Qgd2l0aCB0cmlnZ2VyIGxvc3QgKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVHJpZ2dlclRvdWNoTG9zdFwiXSA9IDNdID0gXCJUcmlnZ2VyVG91Y2hMb3N0XCI7XG59KShDb2xsaXNpb25FdmVudFR5cGUgfHwgKENvbGxpc2lvbkV2ZW50VHlwZSA9IHt9KSk7XG4vKipcbiAqIFJpZ2lkIGJvZHkge0BsaW5rIFBoeXNYQ29tcG9uZW50I3NoYXBlfS5cbiAqXG4gKiBbUGh5c1ggU0RLIEd1aWRlXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9HZW9tZXRyeS5odG1sI2dlb21ldHJ5LXR5cGVzKS5cbiAqL1xuZXhwb3J0IHZhciBTaGFwZTtcbihmdW5jdGlvbiAoU2hhcGUpIHtcbiAgICAvKiogTm8gc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICAvKiogU3BoZXJlIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiU3BoZXJlXCJdID0gMV0gPSBcIlNwaGVyZVwiO1xuICAgIC8qKiBDYXBzdWxlIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiQ2Fwc3VsZVwiXSA9IDJdID0gXCJDYXBzdWxlXCI7XG4gICAgLyoqIEJveCBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIkJveFwiXSA9IDNdID0gXCJCb3hcIjtcbiAgICAvKiogUGxhbmUgc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJQbGFuZVwiXSA9IDRdID0gXCJQbGFuZVwiO1xuICAgIC8qKiBDb252ZXggbWVzaCBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIkNvbnZleE1lc2hcIl0gPSA1XSA9IFwiQ29udmV4TWVzaFwiO1xuICAgIC8qKiBUcmlhbmdsZSBtZXNoIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiVHJpYW5nbGVNZXNoXCJdID0gNl0gPSBcIlRyaWFuZ2xlTWVzaFwiO1xufSkoU2hhcGUgfHwgKFNoYXBlID0ge30pKTtcbi8qKlxuICogTWVzaCBhdHRyaWJ1dGUgZW51bS5cbiAqIEBzaW5jZSAwLjkuMFxuICovXG5leHBvcnQgdmFyIE1lc2hBdHRyaWJ1dGU7XG4oZnVuY3Rpb24gKE1lc2hBdHRyaWJ1dGUpIHtcbiAgICAvKiogUG9zaXRpb24gYXR0cmlidXRlLCAzIGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIlBvc2l0aW9uXCJdID0gMF0gPSBcIlBvc2l0aW9uXCI7XG4gICAgLyoqIFRhbmdlbnQgYXR0cmlidXRlLCA0IGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIlRhbmdlbnRcIl0gPSAxXSA9IFwiVGFuZ2VudFwiO1xuICAgIC8qKiBOb3JtYWwgYXR0cmlidXRlLCAzIGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIk5vcm1hbFwiXSA9IDJdID0gXCJOb3JtYWxcIjtcbiAgICAvKiogVGV4dHVyZSBjb29yZGluYXRlIGF0dHJpYnV0ZSwgMiBmbG9hdHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJUZXh0dXJlQ29vcmRpbmF0ZVwiXSA9IDNdID0gXCJUZXh0dXJlQ29vcmRpbmF0ZVwiO1xuICAgIC8qKiBDb2xvciBhdHRyaWJ1dGUsIDQgZmxvYXRzLCBSR0JBLCByYW5nZSBgMGAgdG8gYDFgICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiQ29sb3JcIl0gPSA0XSA9IFwiQ29sb3JcIjtcbiAgICAvKiogSm9pbnQgaWQgYXR0cmlidXRlLCA4IHVuc2lnbmVkIGludHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJKb2ludElkXCJdID0gNV0gPSBcIkpvaW50SWRcIjtcbiAgICAvKiogSm9pbnQgd2VpZ2h0cyBhdHRyaWJ1dGUsIDggZmxvYXRzICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiSm9pbnRXZWlnaHRcIl0gPSA2XSA9IFwiSm9pbnRXZWlnaHRcIjtcbn0pKE1lc2hBdHRyaWJ1dGUgfHwgKE1lc2hBdHRyaWJ1dGUgPSB7fSkpO1xuLyoqXG4gKiBNYXRlcmlhbCBwYXJhbWV0ZXIgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBNYXRlcmlhbFBhcmFtVHlwZTtcbihmdW5jdGlvbiAoTWF0ZXJpYWxQYXJhbVR5cGUpIHtcbiAgICAvKiogVW5zaWduZWQgaW50ZWdlciBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIlVuc2lnbmVkSW50XCJdID0gMF0gPSBcIlVuc2lnbmVkSW50XCI7XG4gICAgLyoqIEludGVnZXIgcGFyYW1ldGVyIHR5cGUuICovXG4gICAgTWF0ZXJpYWxQYXJhbVR5cGVbTWF0ZXJpYWxQYXJhbVR5cGVbXCJJbnRcIl0gPSAxXSA9IFwiSW50XCI7XG4gICAgLyoqIEZsb2F0IHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIE1hdGVyaWFsUGFyYW1UeXBlW01hdGVyaWFsUGFyYW1UeXBlW1wiRmxvYXRcIl0gPSAyXSA9IFwiRmxvYXRcIjtcbiAgICAvKiogU2FtcGxlciByZXNvdXJjZSBwYXJhbWV0ZXIgdHlwZSwgaS5lLiwgYSB7QGxpbmsgVGV4dHVyZX0uICovXG4gICAgTWF0ZXJpYWxQYXJhbVR5cGVbTWF0ZXJpYWxQYXJhbVR5cGVbXCJTYW1wbGVyXCJdID0gM10gPSBcIlNhbXBsZXJcIjtcbiAgICAvKipcbiAgICAgKiBGb250IHJlc291cmNlIHBhcmFtZXRlciB0eXBlLlxuICAgICAqXG4gICAgICogKipOb3RlKio6IENoYW5naW5nIGZvbnQgaXNuJ3QgZXhwb3NlZCB5ZXQgYW5kIHdpbGwgcmFpc2UgYW4gZXJyb3IuXG4gICAgICovXG4gICAgTWF0ZXJpYWxQYXJhbVR5cGVbTWF0ZXJpYWxQYXJhbVR5cGVbXCJGb250XCJdID0gNF0gPSBcIkZvbnRcIjtcbn0pKE1hdGVyaWFsUGFyYW1UeXBlIHx8IChNYXRlcmlhbFBhcmFtVHlwZSA9IHt9KSk7XG4vKipcbiAqIENyZWF0ZSBhIHByb3h5IHRocm93aW5nIGRlc3Ryb3llZCBlcnJvcnMgdXBvbiBhY2Nlc3MuXG4gKlxuICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgdG8gZGlzcGxheSB1cG9uIGVycm9yXG4gKiBAcmV0dXJucyBUaGUgcHJveHkgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGVzdHJveWVkUHJveHkodHlwZSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHBhcmFtKSB7XG4gICAgICAgICAgICBpZiAocGFyYW0gPT09ICdpc0Rlc3Ryb3llZCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vJ3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAke3R5cGV9YCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwYXJhbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ubyd0IHdyaXRlICcke3BhcmFtfScgb2YgZGVzdHJveWVkICR7dHlwZX1gKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIG9iamVjdHMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkT2JqZWN0SW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnb2JqZWN0Jyk7XG4vKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGNvbnN0IERlc3Ryb3llZENvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ2NvbXBvbmVudCcpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgdGV4dHVyZXMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkVGV4dHVyZUluc3RhbmNlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ3RleHR1cmUnKTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHNoYXBlIGlzIGEgbWVzaCBvciBub3QuXG4gKlxuICogQHBhcmFtIHNoYXBlIFRoZSBzaGFwZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2hhcGUgaXMgYSBtZXNoLCBgZmFsc2VgIGlmIGl0J3MgYSBwcmltaXRpdmUuXG4gKi9cbmZ1bmN0aW9uIGlzTWVzaFNoYXBlKHNoYXBlKSB7XG4gICAgcmV0dXJuIHNoYXBlID09PSBTaGFwZS5Db252ZXhNZXNoIHx8IHNoYXBlID09PSBTaGFwZS5UcmlhbmdsZU1lc2g7XG59XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gb2JqZWN0IGlzIHRoZSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcyBvciBub3QsXG4gKlxuICogQG5vdGUgVGhpcyBtZXRob2QgaWYgZm9vbHByb29mIHRvIGRldmVsb3BlcnMgaW5hZHZlcnRlbnRseSB1c2luZ1xuICogbXVsdGlwbGUgV29uZGVybGFuZCBFbmdpbmUgQVBJIGluIGEgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgYSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcywgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzQmFzZUNvbXBvbmVudENsYXNzKHZhbHVlKSB7XG4gICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KCdfaXNCYXNlQ29tcG9uZW50JykgJiZcbiAgICAgICAgdmFsdWUuX2lzQmFzZUNvbXBvbmVudCk7XG59XG4vKipcbiAqIENvbnN0YW50cy5cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IHdvcmxkIHVwIHZlY3Rvci5cbiAqL1xuY29uc3QgVVBfVkVDVE9SID0gWzAsIDEsIDBdO1xuY29uc3QgU1FSVF8zID0gTWF0aC5zcXJ0KDMpO1xuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBjb21wb25lbnQgaW5zdGFuY2Ugb2YgYSBzcGVjaWZpZWQgY29tcG9uZW50IHR5cGUuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGlzIGlzIGhvdyB5b3UgaW1wbGVtZW50IGV4dGVuZCB0aGlzIGNsYXNzIHRvIGNyZWF0ZSB5b3VyIG93biBjdXN0b21cbiAqIGNvbXBvbmVudDpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdteS1jb21wb25lbnQnO1xuICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICogICAgICAgICBteUJvb2xlYW46IHsgdHlwZTogVHlwZS5Cb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICogICAgIH07XG4gKiAgICAgc3RhcnQoKSB7fVxuICogICAgIG9uQWN0aXZhdGUoKSB7fVxuICogICAgIG9uRGVhY3RpdmF0ZSgpIHt9XG4gKiAgICAgdXBkYXRlKGR0KSB7fVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqIGB0cnVlYCBmb3IgZXZlcnkgY2xhc3MgaW5oZXJpdGluZyBmcm9tIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgYGluc3RhbmNlb2ZgIHRvIHByZXZlbnQgaXNzdWVzXG4gICAgICogdGhhdCBjb3VsZCBhcmlzZSB3aGVuIGFuIGFwcGxpY2F0aW9uIGVuZHMgdXAgdXNpbmcgbXVsdGlwbGUgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaXNCYXNlQ29tcG9uZW50ID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBjb21wb25lbnQgY2xhc3MuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gcmVnaXN0ZXIsIGFkZCwgYW5kIHJldHJpZXZlIGNvbXBvbmVudHMgb2YgYSBnaXZlbiB0eXBlLlxuICAgICAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZTtcbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIHRoaXMgY29tcG9uZW50IGNsYXNzLlxuICAgICAqXG4gICAgICogUHJvcGVydGllcyBhcmUgcHVibGljIGF0dHJpYnV0ZXMgdGhhdCBjYW4gYmUgY29uZmlndXJlZCB2aWEgdGhlXG4gICAgICogV29uZGVybGFuZCBFZGl0b3IuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAqICAgICAgICAgbXlCb29sZWFuOiB7IHR5cGU6IFR5cGUuQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgKiAgICAgICAgIG15RmxvYXQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgKiAgICAgICAgIG15VGV4dHVyZTogeyB0eXBlOiBUeXBlLlRleHR1cmUsIGRlZmF1bHQ6IG51bGwgfSxcbiAgICAgKiAgICAgfTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0aWVzIGFyZSBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIGVhY2ggY29tcG9uZW50IGluc3RhbmNlLCBhbmQgYXJlXG4gICAgICogYWNjZXNzaWJsZSBsaWtlIGFueSBKUyBhdHRyaWJ1dGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIENyZWF0ZXMgYSBuZXcgY29tcG9uZW50IGFuZCBzZXQgZWFjaCBwcm9wZXJ0aWVzIHZhbHVlOlxuICAgICAqIGNvbnN0IG15Q29tcG9uZW50ID0gb2JqZWN0LmFkZENvbXBvbmVudChNeUNvbXBvbmVudCwge1xuICAgICAqICAgICBteUJvb2xlYW46IHRydWUsXG4gICAgICogICAgIG15RmxvYXQ6IDQyLjAsXG4gICAgICogICAgIG15VGV4dHVyZTogbnVsbFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gWW91IGNhbiBhbHNvIG92ZXJyaWRlIHRoZSBwcm9wZXJ0aWVzIG9uIHRoZSBpbnN0YW5jZTpcbiAgICAgKiBteUNvbXBvbmVudC5teUJvb2xlYW4gPSBmYWxzZTtcbiAgICAgKiBteUNvbXBvbmVudC5teUZsb2F0ID0gLTQyLjA7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIFJlZmVyZW5jZXNcbiAgICAgKlxuICAgICAqIFJlZmVyZW5jZSB0eXBlcyAoaS5lLiwgbWVzaCwgb2JqZWN0LCBldGMuLi4pIGNhbiBhbHNvIGJlIGxpc3RlZCBhcyAqKnJlcXVpcmVkKio6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7Q29tcG9uZW50LCBQcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKlxuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICogICAgICAgICBteU9iamVjdDogUHJvcGVydHkub2JqZWN0KHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlBbmltYXRpb246IFByb3BlcnR5LmFuaW1hdGlvbih7cmVxdWlyZWQ6IHRydWV9KSxcbiAgICAgKiAgICAgICAgIG15VGV4dHVyZTogUHJvcGVydHkudGV4dHVyZSh7cmVxdWlyZWQ6IHRydWV9KSxcbiAgICAgKiAgICAgICAgIG15TWVzaDogUHJvcGVydHkubWVzaCh7cmVxdWlyZWQ6IHRydWV9KSxcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFBsZWFzZSBub3RlIHRoYXQgcmVmZXJlbmNlcyBhcmUgdmFsaWRhdGVkICoqb25jZSoqIGJlZm9yZSB0aGUgY2FsbCB0byB7QGxpbmsgQ29tcG9uZW50LnN0YXJ0fSBvbmx5LFxuICAgICAqIHZpYSB0aGUge0BsaW5rIENvbXBvbmVudC52YWxpZGF0ZVByb3BlcnRpZXN9IG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgUHJvcGVydGllcztcbiAgICAvKipcbiAgICAgKiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRoZSBjaGlsZCBjbGFzcyBpbmhlcml0cyBmcm9tIHRoZSBwYXJlbnRcbiAgICAgKiBwcm9wZXJ0aWVzLCBhcyBzaG93biBpbiB0aGUgZm9sbG93aW5nIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7Q29tcG9uZW50LCBQcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKlxuICAgICAqIGNsYXNzIFBhcmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwYXJlbnQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtwYXJlbnROYW1lOiBQcm9wZXJ0eS5zdHJpbmcoJ3BhcmVudCcpfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGNsYXNzIENoaWxkIGV4dGVuZHMgUGFyZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ2NoaWxkJztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7bmFtZTogUHJvcGVydHkuc3RyaW5nKCdjaGlsZCcpfVxuICAgICAqICAgICBzdGF0aWMgSW5oZXJpdFByb3BlcnRpZXMgPSB0cnVlO1xuICAgICAqXG4gICAgICogICAgIHN0YXJ0KCkge1xuICAgICAqICAgICAgICAgLy8gV29ya3MgYmVjYXVzZSBgSW5oZXJpdFByb3BlcnRpZXNgIGlzIGB0cnVlYC5cbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKGAke3RoaXMubmFtZX0gaW5oZXJpdHMgZnJvbSAke3RoaXMucGFyZW50TmFtZX1gKTtcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFByb3BlcnRpZXMgZGVmaW5lZCBpbiBkZXNjZW5kYW50IGNsYXNzZXMgd2lsbCBvdmVycmlkZSBwcm9wZXJ0aWVzXG4gICAgICogd2l0aCB0aGUgc2FtZSBuYW1lIGRlZmluZWQgaW4gYW5jZXN0b3IgY2xhc3Nlcy5cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBzdGF0aWMgSW5oZXJpdFByb3BlcnRpZXM7XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhpcyBjb21wb25lbnQgY2xhc3MgaXMgcmVnaXN0ZXJlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbGxiYWNrIGNhbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGRlcGVuZGVuY2llcyBvZiBhIGNvbXBvbmVudCxcbiAgICAgKiBlLmcuLCBjb21wb25lbnQgY2xhc3NlcyB0aGF0IG5lZWQgdG8gYmUgcmVnaXN0ZXJlZCBpbiBvcmRlciB0byBhZGRcbiAgICAgKiB0aGVtIGF0IHJ1bnRpbWUgd2l0aCB7QGxpbmsgT2JqZWN0M0QuYWRkQ29tcG9uZW50fSwgaW5kZXBlbmRlbnQgb2Ygd2hldGhlclxuICAgICAqIHRoZXkgYXJlIHVzZWQgaW4gdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY2xhc3MgU3Bhd25lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdzcGF3bmVyJztcbiAgICAgKlxuICAgICAqICAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgKiAgICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChTcGF3bmVkQ29tcG9uZW50KTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIC8vIFlvdSBjYW4gbm93IHVzZSBhZGRDb21wb25lbnQgd2l0aCBTcGF3bmVkQ29tcG9uZW50XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoaXMgY2FsbGJhY2sgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgZGlmZmVyZW50IGltcGxlbWVudGF0aW9ucyBvZiBhXG4gICAgICogY29tcG9uZW50IGRlcGVuZGluZyBvbiBjbGllbnQgZmVhdHVyZXMgb3IgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBQcm9wZXJ0aWVzIG5lZWQgdG8gYmUgdGhlIHNhbWUgZm9yIGFsbCBpbXBsZW1lbnRhdGlvbnMhXG4gICAgICogY29uc3QgU2hhcmVkUHJvcGVydGllcyA9IHt9O1xuICAgICAqXG4gICAgICogY2xhc3MgQW5jaG9yIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3NwYXduZXInO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IFNoYXJlZFByb3BlcnRpZXM7XG4gICAgICpcbiAgICAgKiAgICAgc3RhdGljIG9uUmVnaXN0ZXIoZW5naW5lKSB7XG4gICAgICogICAgICAgICBpZihuYXZpZ2F0b3IueHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAqICAgICAgICAgICAgIC8qIFdlYlhSIHVuc3VwcG9ydGVkLCBrZWVwIHRoaXMgZHVtbXkgY29tcG9uZW50ICpcXC9cbiAgICAgKiAgICAgICAgICAgICByZXR1cm47XG4gICAgICogICAgICAgICB9XG4gICAgICogICAgICAgICAvKiBXZWJYUiBzdXBwb3J0ZWQhIE92ZXJyaWRlIGFscmVhZHkgcmVnaXN0ZXJlZCBkdW1teSBpbXBsZW1lbnRhdGlvblxuICAgICAqICAgICAgICAgICogd2l0aCBvbmUgZGVwZW5kaW5nIG9uIGhpdC10ZXN0IEFQSSBzdXBwb3J0ICpcXC9cbiAgICAgKiAgICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudCh3aW5kb3cuSGl0VGVzdFNvdXJjZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgKiAgICAgICAgICAgICBBbmNob3JXaXRob3V0SGl0VGVzdCA6IEFuY2hvcldpdGhIaXRUZXN0KTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIC8vIFRoaXMgb25lIGltcGxlbWVudHMgbm8gZnVuY3Rpb25zXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBvblJlZ2lzdGVyO1xuICAgIC8qKlxuICAgICAqIEFsbG93cyB0byBpbmhlcml0IHByb3BlcnRpZXMgZGlyZWN0bHkgaW5zaWRlIHRoZSBlZGl0b3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIGRpcmVjdGx5LCBwcmVmZXIgdXNpbmcge0BsaW5rIGluaGVyaXRQcm9wZXJ0aWVzfS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX2luaGVyaXRQcm9wZXJ0aWVzKCkge1xuICAgICAgICBpbmhlcml0UHJvcGVydGllcyh0aGlzKTtcbiAgICB9XG4gICAgLyoqIE1hbmFnZXIgaW5kZXguIEBoaWRkZW4gKi9cbiAgICBfbWFuYWdlcjtcbiAgICAvKiogSW5zdGFuY2UgaW5kZXguIEBoaWRkZW4gKi9cbiAgICBfaWQ7XG4gICAgLyoqXG4gICAgICogT2JqZWN0IGNvbnRhaW5pbmcgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBjYWNoZWQgZm9yIGZhc3RlciByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29iamVjdDtcbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIGVuZ2luZSBUaGUgZW5naW5lIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBtYW5hZ2VyIEluZGV4IG9mIHRoZSBtYW5hZ2VyLlxuICAgICAqIEBwYXJhbSBpZCBXQVNNIGNvbXBvbmVudCBpbnN0YW5jZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIG1hbmFnZXIgPSAtMSwgaWQgPSAtMSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX21hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgICB0aGlzLl9vYmplY3QgPSBudWxsO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgY29tcG9uZW50J3MgdHlwZSAqL1xuICAgIGdldCB0eXBlKCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIGN0b3IuVHlwZU5hbWUgPz8gdGhpcy5fZW5naW5lLndhc20uX3R5cGVOYW1lRm9yKHRoaXMuX21hbmFnZXIpO1xuICAgIH1cbiAgICAvKiogVGhlIG9iamVjdCB0aGlzIGNvbXBvbmVudCBpcyBhdHRhY2hlZCB0by4gKi9cbiAgICBnZXQgb2JqZWN0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX29iamVjdCkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSB0aGlzLl9lbmdpbmUud2FzbS5fd2xfY29tcG9uZW50X2dldF9vYmplY3QodGhpcy5fbWFuYWdlciwgdGhpcy5faWQpO1xuICAgICAgICAgICAgdGhpcy5fb2JqZWN0ID0gdGhpcy5fZW5naW5lLndyYXBPYmplY3Qob2JqZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEFjdGl2YXRpbmcvZGVhY3RpdmF0aW5nIGEgY29tcG9uZW50IGNvbWVzIGF0IGEgc21hbGwgY29zdCBvZiByZW9yZGVyaW5nXG4gICAgICogY29tcG9uZW50cyBpbiB0aGUgcmVzcGVjdGl2ZSBjb21wb25lbnQgbWFuYWdlci4gVGhpcyBmdW5jdGlvbiB0aGVyZWZvcmVcbiAgICAgKiBpcyBub3QgYSB0cml2aWFsIGFzc2lnbm1lbnQuXG4gICAgICpcbiAgICAgKiBEb2VzIG5vdGhpbmcgaWYgdGhlIGNvbXBvbmVudCBpcyBhbHJlYWR5IGFjdGl2YXRlZC9kZWFjdGl2YXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmUgTmV3IGFjdGl2ZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGFjdGl2ZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfY29tcG9uZW50X3NldEFjdGl2ZSh0aGlzLl9tYW5hZ2VyLCB0aGlzLl9pZCwgYWN0aXZlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIGNvbXBvbmVudCBpcyBhY3RpdmVcbiAgICAgKi9cbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9pc0FjdGl2ZSh0aGlzLl9tYW5hZ2VyLCB0aGlzLl9pZCkgIT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSBhbGwgdGhlIHByb3BlcnRpZXMgZnJvbSBgc3JjYCBpbnRvIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBPbmx5IHByb3BlcnRpZXMgYXJlIGNvcGllZC4gSWYgYSBjb21wb25lbnQgbmVlZHMgdG9cbiAgICAgKiBjb3B5IGV4dHJhIGRhdGEsIGl0IG5lZWRzIHRvIG92ZXJyaWRlIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgbm9uUHJvcGVydHlEYXRhID0gJ0hlbGxvIFdvcmxkJztcbiAgICAgKlxuICAgICAqICAgICBjb3B5KHNyYykge1xuICAgICAqICAgICAgICAgc3VwZXIuY29weShzcmMpO1xuICAgICAqICAgICAgICAgdGhpcy5ub25Qcm9wZXJ0eURhdGEgPSBzcmMubm9uUHJvcGVydHlEYXRhO1xuICAgICAqICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkge0BsaW5rIE9iamVjdDNELmNsb25lfS4gRG8gbm90IGF0dGVtcHQgdG86XG4gICAgICogICAgIC0gQ3JlYXRlIG5ldyBjb21wb25lbnRcbiAgICAgKiAgICAgLSBSZWFkIHJlZmVyZW5jZXMgdG8gb3RoZXIgb2JqZWN0c1xuICAgICAqXG4gICAgICogV2hlbiBjbG9uaW5nIHZpYSB7QGxpbmsgT2JqZWN0M0QuY2xvbmV9LCB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50LnN0YXJ0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIEphdmFTY3JpcHQgY29tcG9uZW50IHByb3BlcnRpZXMgYXJlbid0IHJldGFyZ2V0ZWQuIFRodXMsIHJlZmVyZW5jZXNcbiAgICAgKiBpbnNpZGUgdGhlIHNvdXJjZSBvYmplY3Qgd2lsbCBub3QgYmUgcmV0YXJnZXRlZCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LFxuICAgICAqIGF0IHRoZSBleGNlcHRpb24gb2YgdGhlIHNraW4gZGF0YSBvbiB7QGxpbmsgTWVzaENvbXBvbmVudH0gYW5kIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNyYyBUaGUgc291cmNlIGNvbXBvbmVudCB0byBjb3B5IGZyb20uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgY29weShzcmMpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBjdG9yLlByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc3JjW25hbWVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGNvbXBvbmVudCBmcm9tIGl0cyBvYmplY3RzIGFuZCBkZXN0cm95IGl0LlxuICAgICAqXG4gICAgICogSXQgaXMgYmVzdCBwcmFjdGljZSB0byBzZXQgdGhlIGNvbXBvbmVudCB0byBgbnVsbGAgYWZ0ZXIsXG4gICAgICogdG8gZW5zdXJlIGl0IGRvZXMgbm90IGdldCB1c2VkIGxhdGVyLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgICBjLmRlc3Ryb3koKTtcbiAgICAgKiAgICBjID0gbnVsbDtcbiAgICAgKiBgYGBcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gdGhpcy5fbWFuYWdlcjtcbiAgICAgICAgaWYgKG1hbmFnZXIgPCAwIHx8IHRoaXMuX2lkIDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogTXVzdCBiZSBzdG9yZWQgYmVmb3JlIGRlc3RydWN0aW9uLiAqL1xuICAgICAgICBjb25zdCBqc01hbmFnZXIgPSB0aGlzLmVuZ2luZS53YXNtLl9qc01hbmFnZXJJbmRleDtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9yZW1vdmUobWFuYWdlciwgdGhpcy5faWQpO1xuICAgICAgICAvKiogQHRvZG86IFJlbW92ZSBhdCAxLjIuMCB3aGVuIGEgZ2VuZXJpYyBkZXN0cm95IGlzIGltcGxlbWVudGVkXG4gICAgICAgICAqIGZvciBldmVyeSBtYW5hZ2VyLiAqL1xuICAgICAgICBpZiAobWFuYWdlciAhPT0ganNNYW5hZ2VyKVxuICAgICAgICAgICAgdGhpcy5fdHJpZ2dlck9uRGVzdHJveSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIHdoZXRoZXIgdGhlIHdyYXBwZWQgbmF0aXZlIGNvbXBvbmVudCBpZHNcbiAgICAgKiBhbmQgY29tcG9uZW50IG1hbmFnZXIgdHlwZXMgYXJlIGVxdWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyQ29tcG9uZW50IENvbXBvbmVudCB0byBjaGVjayBlcXVhbGl0eSB3aXRoLlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBjb21wb25lbnQgZXF1YWxzIHRoZSBnaXZlbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyQ29tcG9uZW50KSB7XG4gICAgICAgIGlmICghb3RoZXJDb21wb25lbnQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYW5hZ2VyID09IG90aGVyQ29tcG9uZW50Ll9tYW5hZ2VyICYmIHRoaXMuX2lkID09IG90aGVyQ29tcG9uZW50Ll9pZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGNvbXBvbmVudCBwcm9wZXJ0aWVzIHRvIGRlZmF1bHQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGR1cmluZyB0aGUgY29tcG9uZW50IGluc3RhbnRpYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRQcm9wZXJ0aWVzKCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGN0b3IuUHJvcGVydGllcztcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gcHJvcGVydGllc1tuYW1lXS5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBDb21wb25lbnQucmVzZXRQcm9wZXJ0aWVzfSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFByb3BlcnRpZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIHByb3BlcnRpZXMgb24gdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEB0aHJvd3MgSWYgYW55IG9mIHRoZSByZXF1aXJlZCBwcm9wZXJ0aWVzIGlzbid0IGluaXRpYWxpemVkXG4gICAgICogb24gdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICB2YWxpZGF0ZVByb3BlcnRpZXMoKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoIWN0b3IuUHJvcGVydGllcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGN0b3IuUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKCFjdG9yLlByb3BlcnRpZXNbbmFtZV0ucmVxdWlyZWQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIXRoaXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3BlcnR5ICcke25hbWV9JyBpcyByZXF1aXJlZCBidXQgd2FzIG5vdCBpbml0aWFsaXplZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjdXN0b20gcHJvcGVydHkgd2lsbCBub3Qgd29yazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IGNvbXAgPSBvYmouYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29tcC5jdXN0b21QYXJhbSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coY29tcC5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgZmFsc2VgXG4gICAgICogY29tcC5kZXN0cm95KCk7XG4gICAgICogY29uc29sZS5sb2coY29tcC5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wLmN1c3RvbVBhcmFtKTsgLy8gVGhyb3dzIGFuIGVycm9yXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50LmluaXR9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFVzZSB0aGlzIG1ldGhvZCBpbnN0ZWFkIG9mIGRpcmVjdGx5IGNhbGxpbmcge0BsaW5rIENvbXBvbmVudC5pbml0fSxcbiAgICAgKiBiZWNhdXNlIHRoaXMgbWV0aG9kIGNyZWF0ZXMgYW4gaGFuZGxlciBmb3IgdGhlIHtAbGluayBDb21wb25lbnQuc3RhcnR9LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VySW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gaW5pdCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBBcm0gb25BY3RpdmF0ZSgpIHdpdGggdGhlIGluaXRpYWwgc3RhcnQoKSBjYWxsICovXG4gICAgICAgIGNvbnN0IG9sZEFjdGl2YXRlID0gdGhpcy5vbkFjdGl2YXRlO1xuICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBvbGRBY3RpdmF0ZTtcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gdmFsaWRhdGVQcm9wZXJ0aWVzKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQ/LigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBzdGFydCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZhaWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLm9uQWN0aXZhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gb25BY3RpdmF0ZSgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQudXBkYXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJVcGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVwZGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGR0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gdXBkYXRlKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZW5naW5lLndhc20uX2RlYWN0aXZhdGVfY29tcG9uZW50X29uX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkFjdGl2YXRlKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQub25EZWFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5vbkRlYWN0aXZhdGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm9uRGVhY3RpdmF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlYWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkRlc3Ryb3l9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfdHJpZ2dlck9uRGVzdHJveSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGVzdHJveSlcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlc3Ryb3koKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbmdpbmUuX2Rlc3Ryb3lDb21wb25lbnQodGhpcyk7XG4gICAgfVxufVxuLyoqXG4gKiBDb21wb25lbnRzIG11c3QgYmUgcmVnaXN0ZXJlZCBiZWZvcmUgbG9hZGluZyAvIGFwcGVuZGluZyBhIHNjZW5lLlxuICpcbiAqIEl0J3MgcG9zc2libGUgdG8gZW5kIHVwIHdpdGggYSBicm9rZW4gY29tcG9uZW50IGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG4gKlxuICogLSBDb21wb25lbnQgd2Fzbid0IHJlZ2lzdGVyZWQgd2hlbiB0aGUgc2NlbmUgd2FzIGxvYWRlZFxuICogLSBDb21wb25lbnQgaW5zdGFudGlhdGlvbiBmYWlsZWRcbiAqXG4gKiBUaGlzIGR1bW15IGNvbXBvbmVudCBpcyB0aHVzIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBieSB0aGUgZW5naW5lLlxuICovXG5leHBvcnQgY2xhc3MgQnJva2VuQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnX19icm9rZW4tY29tcG9uZW50X18nO1xufVxuLyoqXG4gKiBNZXJnZSB0aGUgYXNjZW5kYW50IHByb3BlcnRpZXMgb2YgY2xhc3NcbiAqXG4gKiBUaGlzIG1ldGhvZCB3YWxrcyB0aGUgcHJvdG90eXBlIGNoYWluLCBhbmQgbWVyZ2VzXG4gKiBhbGwgdGhlIHByb3BlcnRpZXMgZm91bmQgaW4gcGFyZW50IGNvbXBvbmVudHMuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtQcm9wZXJ0eSwgaW5oZXJpdFByb3BlcnRpZXN9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY2xhc3MgUGFyZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHsgcGFyZW50UHJvcDogUHJvcGVydHkuc3RyaW5nKCdwYXJlbnQnKSB9O1xuICogfVxuICpcbiAqIGNsYXNzIENoaWxkIGV4dGVuZHMgUGFyZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHsgY2hpbGRQcm9wOiBQcm9wZXJ0eS5zdHJpbmcoJ2NoaWxkJykgfTtcbiAqIH1cbiAqIGluaGVyaXRQcm9wZXJ0aWVzKENoaWxkKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB0YXJnZXQgVGhlIGNsYXNzIGluIHdoaWNoIHByb3BlcnRpZXMgc2hvdWxkIGJlIG1lcmdlZFxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXRQcm9wZXJ0aWVzKHRhcmdldCkge1xuICAgIGlmICghdGFyZ2V0LlR5cGVOYW1lKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgY2hhaW4gPSBbXTtcbiAgICBsZXQgY3VyciA9IHRhcmdldDtcbiAgICB3aGlsZSAoY3VyciAmJiAhaXNCYXNlQ29tcG9uZW50Q2xhc3MoY3VycikpIHtcbiAgICAgICAgY29uc3QgY29tcCA9IGN1cnI7XG4gICAgICAgIC8qIFN0b3AgYXQgdGhlIGZpcnN0IGNsYXNzIHRoYXQgZG9lc24ndCByZXF1aXJlIHByb3BlcnRpZXMgbWVyZ2luZyAqL1xuICAgICAgICBjb25zdCBuZWVkc01lcmdlID0gY29tcC5oYXNPd25Qcm9wZXJ0eSgnSW5oZXJpdFByb3BlcnRpZXMnKVxuICAgICAgICAgICAgPyBjb21wLkluaGVyaXRQcm9wZXJ0aWVzXG4gICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIGlmICghbmVlZHNNZXJnZSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoY29tcC5UeXBlTmFtZSAmJiBjb21wLmhhc093blByb3BlcnR5KCdQcm9wZXJ0aWVzJykpIHtcbiAgICAgICAgICAgIGNoYWluLnB1c2goY29tcC5Qcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN1cnIpO1xuICAgIH1cbiAgICAvKiBObyBwcm90b3R5cGUgbWVyZ2UgaXMgbmVlZGVkLiAqL1xuICAgIGlmIChjaGFpbi5sZW5ndGggPD0gMSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IG1lcmdlZCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSBjaGFpbi5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZCwgY2hhaW5baV0pO1xuICAgIH1cbiAgICB0YXJnZXQuUHJvcGVydGllcyA9IG1lcmdlZDtcbn1cbi8qKlxuICogTmF0aXZlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGNvbGxpc2lvbiBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2xsaXNpb25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY29sbGlzaW9uJztcbiAgICAvKiogQ29sbGlzaW9uIGNvbXBvbmVudCBjb2xsaWRlciAqL1xuICAgIGdldCBjb2xsaWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9jb2xsaWRlcih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVyIENvbGxpZGVyIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBjb2xsaWRlcihjb2xsaWRlcikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfY29sbGlkZXIodGhpcy5faWQsIGNvbGxpZGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGlzaW9uIGNvbXBvbmVudCBleHRlbnRzLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIGNvbGxpZGVyfSByZXR1cm5zIHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCBvbmx5IHRoZSBmaXJzdFxuICAgICAqIGNvbXBvbmVudCBvZiB0aGUgcmV0dXJuZWQgdmVjdG9yIGlzIHVzZWQuXG4gICAgICovXG4gICAgZ2V0IGV4dGVudHMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCBleHRlbnRzLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIGNvbGxpZGVyfSByZXR1cm5zIHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCBvbmx5IHRoZSBmaXJzdFxuICAgICAqIGNvbXBvbmVudCBvZiB0aGUgcGFzc2VkIHZlY3RvciBpcyB1c2VkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gU3BhbnMgMSB1bml0IG9uIHRoZSB4LWF4aXMsIDIgb24gdGhlIHktYXhpcywgMyBvbiB0aGUgei1heGlzLlxuICAgICAqIGNvbGxpc2lvbi5leHRlbnQgPSBbMSwgMiwgM107XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXh0ZW50cyBFeHRlbnRzIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LCBleHBlY3RzIGFcbiAgICAgKiAgICAgIDMgY29tcG9uZW50IGFycmF5LlxuICAgICAqL1xuICAgIHNldCBleHRlbnRzKGV4dGVudHMpIHtcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChleHRlbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIGNvbGxpZGVyfSBpcyBub3Qge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSByYWRpdXMgb2YgYSBzcGhlcmUgZW5jbG9zaW5nIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzcGhlcmUucmFkaXVzID0gMy4wO1xuICAgICAqIGNvbnNvbGUubG9nKHNwaGVyZS5yYWRpdXMpOyAvLyAzLjBcbiAgICAgKlxuICAgICAqIGJveC5leHRlbnRzID0gWzIuMCwgMi4wLCAyLjBdO1xuICAgICAqIGNvbnNvbGUubG9nKGJveC5yYWRpdXMpOyAvLyAxLjczMi4uLlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgZ2V0IHJhZGl1cygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBpZiAodGhpcy5jb2xsaWRlciA9PT0gQ29sbGlkZXIuU3BoZXJlKVxuICAgICAgICAgICAgcmV0dXJuIHdhc20uSEVBUEYzMlt3YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSA+PiAyXTtcbiAgICAgICAgY29uc3QgZXh0ZW50cyA9IG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCksIDMpO1xuICAgICAgICBjb25zdCB4MiA9IGV4dGVudHNbMF0gKiBleHRlbnRzWzBdO1xuICAgICAgICBjb25zdCB5MiA9IGV4dGVudHNbMV0gKiBleHRlbnRzWzFdO1xuICAgICAgICBjb25zdCB6MiA9IGV4dGVudHNbMl0gKiBleHRlbnRzWzJdO1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHgyICsgeTIgKyB6MikgLyAyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCByYWRpdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmFkaXVzIFJhZGl1cyBvZiB0aGUgY29sbGlzaW9uIGNvbXBvbmVudFxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIGNvbGxpZGVyfSBpcyBub3Qge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sXG4gICAgICogdGhlIGV4dGVudHMgYXJlIHNldCB0byBmb3JtIGEgc3F1YXJlIHRoYXQgZml0cyBhIHNwaGVyZSB3aXRoIHRoZSBwcm92aWRlZCByYWRpdXMuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogYWFiYkNvbGxpc2lvbi5yYWRpdXMgPSAyLjA7IC8vIEFBQkIgZml0cyBhIHNwaGVyZSBvZiByYWRpdXMgMi4wXG4gICAgICogYm94Q29sbGlzaW9uLnJhZGl1cyA9IDMuMDsgLy8gQm94IG5vdyBmaXRzIGEgc3BoZXJlIG9mIHJhZGl1cyAzLjAsIGtlZXBpbmcgb3JpZW50YXRpb25cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCByYWRpdXMocmFkaXVzKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSA/IHJhZGl1cyA6ICgyICogcmFkaXVzKSAvIFNRUlRfMztcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChbbGVuZ3RoLCBsZW5ndGgsIGxlbmd0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsaXNpb24gY29tcG9uZW50IGdyb3VwLlxuICAgICAqXG4gICAgICogVGhlIGdyb3VwcyBpcyBhIGJpdG1hc2sgdGhhdCBpcyBjb21wYXJlZCB0byBvdGhlciBjb21wb25lbnRzIGluIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQjcXVlcnlPdmVybGFwc31cbiAgICAgKiBvciB0aGUgZ3JvdXAgaW4ge0BsaW5rIFNjZW5lI3JheUNhc3R9LlxuICAgICAqXG4gICAgICogQ29sbGlkZXJzIHRoYXQgaGF2ZSBubyBjb21tb24gZ3JvdXBzIHdpbGwgbm90IG92ZXJsYXAgd2l0aCBlYWNoIG90aGVyLiBJZiBhIGNvbGxpZGVyXG4gICAgICogaGFzIG5vbmUgb2YgdGhlIGdyb3VwcyBzZXQgZm9yIHtAbGluayBTY2VuZSNyYXlDYXN0fSwgdGhlIHJheSB3aWxsIG5vdCBoaXQgaXQuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIGJlbG9uZ2luZyB0byBhIGdyb3VwLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgLy8gYyBiZWxvbmdzIHRvIGdyb3VwIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAgICAvLyBjIGJlbG9uZ3MgdG8gZ3JvdXAgMFxuICAgICAqICAgIGMuZ3JvdXAgPSAoMSA8PCAwKTtcbiAgICAgKlxuICAgICAqICAgIC8vIGMgYmVsb25ncyB0byBncm91cCAwICphbmQqIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqICAgIChjLmdyb3VwICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAgICAoYy5ncm91cCAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBncm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9ncm91cCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IGdyb3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIGdyb3VwIEdyb3VwIG1hc2sgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGdyb3VwKGdyb3VwKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X3NldF9ncm91cCh0aGlzLl9pZCwgZ3JvdXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWVyeSBvdmVybGFwcGluZyBvYmplY3RzLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGNvbGxpc2lvbiA9IG9iamVjdC5nZXRDb21wb25lbnQoJ2NvbGxpc2lvbicpO1xuICAgICAqIGNvbnN0IG92ZXJsYXBzID0gY29sbGlzaW9uLnF1ZXJ5T3ZlcmxhcHMoKTtcbiAgICAgKiBmb3IoY29uc3Qgb3RoZXJDb2xsaXNpb24gb2Ygb3ZlcmxhcHMpIHtcbiAgICAgKiAgICAgY29uc3Qgb3RoZXJPYmplY3QgPSBvdGhlckNvbGxpc2lvbi5vYmplY3Q7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBDb2xsaXNpb24gd2l0aCBvYmplY3QgJHtvdGhlck9iamVjdC5vYmplY3RJZH1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBDb2xsaXNpb24gY29tcG9uZW50cyBvdmVybGFwcGluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIHF1ZXJ5T3ZlcmxhcHMoKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5fZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfcXVlcnlfb3ZlcmxhcHModGhpcy5faWQsIHRoaXMuX2VuZ2luZS53YXNtLl90ZW1wTWVtLCB0aGlzLl9lbmdpbmUud2FzbS5fdGVtcE1lbVNpemUgPj4gMSk7XG4gICAgICAgIGNvbnN0IG92ZXJsYXBzID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBvdmVybGFwc1tpXSA9IG5ldyBDb2xsaXNpb25Db21wb25lbnQodGhpcy5fZW5naW5lLCB0aGlzLl9tYW5hZ2VyLCB0aGlzLl9lbmdpbmUud2FzbS5fdGVtcE1lbVVpbnQxNltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG92ZXJsYXBzO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sbGlkZXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBDb2xsaXNpb25Db21wb25lbnQucHJvdG90eXBlLCBcImV4dGVudHNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBDb2xsaXNpb25Db21wb25lbnQucHJvdG90eXBlLCBcImdyb3VwXCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgdGV4dCBjb21wb25lbnRcbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgdGV4dCBjb21wb25lbnQgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGV4dCc7XG4gICAgLyoqIFRleHQgY29tcG9uZW50IGFsaWdubWVudC4gKi9cbiAgICBnZXQgYWxpZ25tZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9ob3Jpem9udGFsX2FsaWdubWVudCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBhbGlnbm1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWxpZ25tZW50IEFsaWdubWVudCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBhbGlnbm1lbnQoYWxpZ25tZW50KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQsIGFsaWdubWVudCk7XG4gICAgfVxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCBqdXN0aWZpY2F0aW9uLiAqL1xuICAgIGdldCBqdXN0aWZpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF92ZXJ0aWNhbF9hbGlnbm1lbnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQganVzdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqdXN0aWZpY2F0aW9uIEp1c3RpZmljYXRpb24gZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQganVzdGlmaWNhdGlvbihqdXN0aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkLCBqdXN0aWZpY2F0aW9uKTtcbiAgICB9XG4gICAgLyoqIFRleHQgY29tcG9uZW50IGNoYXJhY3RlciBzcGFjaW5nLiAqL1xuICAgIGdldCBjaGFyYWN0ZXJTcGFjaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9jaGFyYWN0ZXJfc3BhY2luZyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBjaGFyYWN0ZXIgc3BhY2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFjaW5nIENoYXJhY3RlciBzcGFjaW5nIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNoYXJhY3RlclNwYWNpbmcoc3BhY2luZykge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2NoYXJhY3Rlcl9zcGFjaW5nKHRoaXMuX2lkLCBzcGFjaW5nKTtcbiAgICB9XG4gICAgLyoqIFRleHQgY29tcG9uZW50IGxpbmUgc3BhY2luZy4gKi9cbiAgICBnZXQgbGluZVNwYWNpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X2xpbmVfc3BhY2luZyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBsaW5lIHNwYWNpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFjaW5nIExpbmUgc3BhY2luZyBmb3IgdGhlIHRleHQgY29tcG9uZW50XG4gICAgICovXG4gICAgc2V0IGxpbmVTcGFjaW5nKHNwYWNpbmcpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9saW5lX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cbiAgICAvKiogVGV4dCBjb21wb25lbnQgZWZmZWN0LiAqL1xuICAgIGdldCBlZmZlY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X2VmZmVjdCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBlZmZlY3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlZmZlY3QgRWZmZWN0IGZvciB0aGUgdGV4dCBjb21wb25lbnRcbiAgICAgKi9cbiAgICBzZXQgZWZmZWN0KGVmZmVjdCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2VmZmVjdCh0aGlzLl9pZCwgZWZmZWN0KTtcbiAgICB9XG4gICAgLyoqIFRleHQgY29tcG9uZW50IHRleHQuICovXG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3RleHQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IG9mIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGV4dCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X3RleHQodGhpcy5faWQsIHdhc20udGVtcFVURjgodGV4dC50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBtYXRlcmlhbCB0byByZW5kZXIgdGhlIHRleHQgd2l0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBOZXcgbWF0ZXJpYWwuXG4gICAgICovXG4gICAgc2V0IG1hdGVyaWFsKG1hdGVyaWFsKSB7XG4gICAgICAgIGNvbnN0IG1hdEluZGV4ID0gbWF0ZXJpYWwgPyBtYXRlcmlhbC5faW5kZXggOiAwO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X21hdGVyaWFsKHRoaXMuX2lkLCBtYXRJbmRleCk7XG4gICAgfVxuICAgIC8qKiBNYXRlcmlhbCB1c2VkIHRvIHJlbmRlciB0aGUgdGV4dC4gKi9cbiAgICBnZXQgbWF0ZXJpYWwoKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5fZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBpZCA+IDAgPyBuZXcgTWF0ZXJpYWwodGhpcy5fZW5naW5lLCBpZCkgOiBudWxsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcImFsaWdubWVudFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcImp1c3RpZmljYXRpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGFyYWN0ZXJTcGFjaW5nXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwibGluZVNwYWNpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZXh0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSB2aWV3IGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgdmlldyBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3ZpZXcnO1xuICAgIC8qKiBQcm9qZWN0aW9uIG1hdHJpeC4gKi9cbiAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXgodGhpcy5faWQpLCAxNik7XG4gICAgfVxuICAgIC8qKiBWaWV3Q29tcG9uZW50IG5lYXIgY2xpcHBpbmcgcGxhbmUgdmFsdWUuICovXG4gICAgZ2V0IG5lYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X25lYXIodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbmVhciBjbGlwcGluZyBwbGFuZSBkaXN0YW5jZSBmb3IgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGNoYW5nZSB3aWxsIGFwcGx5IGluIHRoZVxuICAgICAqIGZvbGxvd2luZyBmcmFtZSwgb3RoZXJ3aXNlIHRoZSBjaGFuZ2UgaXMgaW1tZWRpYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5lYXIgTmVhciBkZXB0aCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgbmVhcihuZWFyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfbmVhcih0aGlzLl9pZCwgbmVhcik7XG4gICAgfVxuICAgIC8qKiBGYXIgY2xpcHBpbmcgcGxhbmUgdmFsdWUuICovXG4gICAgZ2V0IGZhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZmFyKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGZhciBjbGlwcGluZyBwbGFuZSBkaXN0YW5jZSBmb3IgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGNoYW5nZSB3aWxsIGFwcGx5IGluIHRoZVxuICAgICAqIGZvbGxvd2luZyBmcmFtZSwgb3RoZXJ3aXNlIHRoZSBjaGFuZ2UgaXMgaW1tZWRpYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZhciBOZWFyIGRlcHRoIHZhbHVlLlxuICAgICAqL1xuICAgIHNldCBmYXIoZmFyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZmFyKHRoaXMuX2lkLCBmYXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhvcml6b250YWwgZmllbGQgb2YgdmlldyBmb3IgdGhlIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUsIHRoaXMgcmV0dXJucyB0aGUgZmllbGQgb2YgdmlldyByZXBvcnRlZCBieVxuICAgICAqIHRoZSBkZXZpY2UsIHJlZ2FyZGxlc3Mgb2YgdGhlIGZvdiB0aGF0IHdhcyBzZXQuXG4gICAgICovXG4gICAgZ2V0IGZvdigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZm92KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBob3Jpem9udGFsIGZpZWxkIG9mIHZpZXcgZm9yIHRoZSB2aWV3LCAqKmluIGRlZ3JlZXMqKi5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlLCB0aGUgZmllbGQgb2YgdmlldyByZXBvcnRlZCBieSB0aGUgZGV2aWNlIGlzXG4gICAgICogdXNlZCBhbmQgdGhpcyB2YWx1ZSBpcyBpZ25vcmVkLiBBZnRlciB0aGUgWFIgc2Vzc2lvbiBlbmRzLCB0aGUgbmV3IHZhbHVlXG4gICAgICogaXMgYXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmb3YgSG9yaXpvbnRhbCBmaWVsZCBvZiB2aWV3LCAqKmluIGRlZ3JlZXMqKi5cbiAgICAgKi9cbiAgICBzZXQgZm92KGZvdikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfc2V0X2Zvdih0aGlzLl9pZCwgZm92KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBlbnVtZXJhYmxlKClcbl0sIFZpZXdDb21wb25lbnQucHJvdG90eXBlLCBcInByb2plY3Rpb25NYXRyaXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBWaWV3Q29tcG9uZW50LnByb3RvdHlwZSwgXCJuZWFyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVmlld0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZmFyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVmlld0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZm92XCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgaW5wdXQgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBpbnB1dCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdpbnB1dCc7XG4gICAgLyoqIElucHV0IGNvbXBvbmVudCB0eXBlICovXG4gICAgZ2V0IGlucHV0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9pbnB1dF9jb21wb25lbnRfZ2V0X3R5cGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgaW5wdXQgY29tcG9uZW50IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW1zIE5ldyBpbnB1dCBjb21wb25lbnQgdHlwZS5cbiAgICAgKi9cbiAgICBzZXQgaW5wdXRUeXBlKHR5cGUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2lucHV0X2NvbXBvbmVudF9zZXRfdHlwZSh0aGlzLl9pZCwgdHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdlYlhSIERldmljZSBBUEkgaW5wdXQgc291cmNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlucHV0IGNvbXBvbmVudCxcbiAgICAgKiBpZiB0eXBlIHtAbGluayBJbnB1dFR5cGUuQ29udHJvbGxlckxlZnR9IG9yIHtAbGluayBJbnB1dFR5cGUuQ29udHJvbGxlclJpZ2h0fS5cbiAgICAgKi9cbiAgICBnZXQgeHJJbnB1dFNvdXJjZSgpIHtcbiAgICAgICAgY29uc3QgeHJTZXNzaW9uID0gdGhpcy5fZW5naW5lLnhyU2Vzc2lvbjtcbiAgICAgICAgaWYgKHhyU2Vzc2lvbikge1xuICAgICAgICAgICAgZm9yIChsZXQgaW5wdXRTb3VyY2Ugb2YgeHJTZXNzaW9uLmlucHV0U291cmNlcykge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRTb3VyY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAnbGVmdCcsICdyaWdodCcgb3IgYG51bGxgIGRlcGVuZGluZyBvbiB0aGUge0BsaW5rIElucHV0Q29tcG9uZW50I2lucHV0VHlwZX0uXG4gICAgICovXG4gICAgZ2V0IGhhbmRlZG5lc3MoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VHlwZSA9IHRoaXMuaW5wdXRUeXBlO1xuICAgICAgICBpZiAoaW5wdXRUeXBlID09IElucHV0VHlwZS5Db250cm9sbGVyUmlnaHQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuUmF5UmlnaHQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuRXllUmlnaHQpXG4gICAgICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICAgICAgaWYgKGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuQ29udHJvbGxlckxlZnQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuUmF5TGVmdCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5FeWVMZWZ0KVxuICAgICAgICAgICAgcmV0dXJuICdsZWZ0JztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgSW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcImlucHV0VHlwZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIGVudW1lcmFibGUoKVxuXSwgSW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcInhySW5wdXRTb3VyY2VcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBlbnVtZXJhYmxlKClcbl0sIElucHV0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgbGlnaHQgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBsaWdodCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaWdodENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdsaWdodCc7XG4gICAgZ2V0Q29sb3Iob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGMgTmV3IGNvbG9yIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldENvbG9yKGMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyXSA9IGNbMF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAxXSA9IGNbMV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAyXSA9IGNbMl07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZpZXcgb24gdGhlIGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgZ2V0Q29sb3J9IGluIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNvZGUuXG4gICAgICovXG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGMgQ29sb3Igb2YgdGhlIGxpZ2h0IGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIHNldENvbG9yfSBpbiBwZXJmb3JtYW5jZS1jcml0aWNhbCBjb2RlLlxuICAgICAqL1xuICAgIHNldCBjb2xvcihjKSB7XG4gICAgICAgIHRoaXMuY29sb3Iuc2V0KGMpO1xuICAgIH1cbiAgICAvKiogTGlnaHQgdHlwZS4gKi9cbiAgICBnZXQgbGlnaHRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfdHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpZ2h0VHlwZSBUeXBlIG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGxpZ2h0VHlwZSh0KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3R5cGUodGhpcy5faWQsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaWdodCBpbnRlbnNpdHkuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IGludGVuc2l0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2ludGVuc2l0eSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCBpbnRlbnNpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW50ZW5zaXR5IEludGVuc2l0eSBvZiB0aGUgbGlnaHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBpbnRlbnNpdHkoaW50ZW5zaXR5KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X2ludGVuc2l0eSh0aGlzLl9pZCwgaW50ZW5zaXR5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3V0ZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBvdXRlckFuZ2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfb3V0ZXJBbmdsZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBvdXRlciBhbmdsZSBmb3Igc3BvdCBsaWdodHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5nbGUgT3V0ZXIgYW5nbGUsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IG91dGVyQW5nbGUoYW5nbGUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfb3V0ZXJBbmdsZSh0aGlzLl9pZCwgYW5nbGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbm5lciBhbmdsZSBmb3Igc3BvdCBsaWdodHMsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IGlubmVyQW5nbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9pbm5lckFuZ2xlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGlubmVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSBJbm5lciBhbmdsZSwgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgaW5uZXJBbmdsZShhbmdsZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbm5lckFuZ2xlKHRoaXMuX2lkLCBhbmdsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd3MoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd3ModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd3MoYikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dzKHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd1JhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93UmFuZ2UodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgcmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmFuZ2UgUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd1JhbmdlKHJhbmdlKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd1JhbmdlKHRoaXMuX2lkLCByYW5nZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd0JpYXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dCaWFzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmlhcyBCaWFzIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dCaWFzKGJpYXMpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Qmlhcyh0aGlzLl9pZCwgYmlhcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbCBiaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBzaGFkb3dOb3JtYWxCaWFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93Tm9ybWFsQmlhcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBub3JtYWwgYmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaWFzIE5vcm1hbCBiaWFzIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dOb3JtYWxCaWFzKGJpYXMpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Tm9ybWFsQmlhcyh0aGlzLl9pZCwgYmlhcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleGVsIHNpemUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd1RleGVsU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1RleGVsU2l6ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgVGV4ZWwgc2l6ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93VGV4ZWxTaXplKHNpemUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93VGV4ZWxTaXplKHRoaXMuX2lkLCBzaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FzY2FkZSBjb3VudCBmb3Ige0BsaW5rIExpZ2h0VHlwZS5TdW59IHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IGNhc2NhZGVDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2Nhc2NhZGVDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjYXNjYWRlIGNvdW50IGZvciB7QGxpbmsgTGlnaHRUeXBlLlN1bn0gc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBDYXNjYWRlIGNvdW50LlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBjYXNjYWRlQ291bnQoY291bnQpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfY2FzY2FkZUNvdW50KHRoaXMuX2lkLCBjb3VudCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbG9yXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImxpZ2h0VHlwZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnRlbnNpdHlcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwib3V0ZXJBbmdsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbm5lckFuZ2xlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcInNoYWRvd3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93UmFuZ2VcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93Qmlhc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaGFkb3dOb3JtYWxCaWFzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcInNoYWRvd1RleGVsU2l6ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjYXNjYWRlQ291bnRcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuaW1hdGlvbic7XG4gICAgLyoqXG4gICAgICogU2V0IGFuaW1hdGlvbiB0byBwbGF5LlxuICAgICAqXG4gICAgICogTWFrZSBzdXJlIHRvIHtAbGluayBBbmltYXRpb24jcmV0YXJnZXR9IHRoZSBhbmltYXRpb24gdG8gYWZmZWN0IHRoZVxuICAgICAqIHJpZ2h0IG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5pbSBBbmltYXRpb24gdG8gcGxheS5cbiAgICAgKi9cbiAgICBzZXQgYW5pbWF0aW9uKGFuaW0pIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X2FuaW1hdGlvbih0aGlzLl9pZCwgYW5pbSA/IGFuaW0uX2luZGV4IDogMCk7XG4gICAgfVxuICAgIC8qKiBBbmltYXRpb24gc2V0IGZvciB0aGlzIGNvbXBvbmVudCAqL1xuICAgIGdldCBhbmltYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5fZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2FuaW1hdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBpZCA+IDAgPyBuZXcgQW5pbWF0aW9uKHRoaXMuX2VuZ2luZSwgaWQpIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHBsYXkgY291bnQuIFNldCB0byBgMGAgdG8gbG9vcCBpbmRlZmluaXRlbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGxheUNvdW50IE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICBzZXQgcGxheUNvdW50KHBsYXlDb3VudCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcGxheUNvdW50KHRoaXMuX2lkLCBwbGF5Q291bnQpO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIHRpbWVzIHRoZSBhbmltYXRpb24gaXMgcGxheWVkLiAqL1xuICAgIGdldCBwbGF5Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcGxheUNvdW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHNwZWVkLiBTZXQgdG8gbmVnYXRpdmUgdmFsdWVzIHRvIHJ1biB0aGUgYW5pbWF0aW9uIGJhY2t3YXJkcy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgc3BlZWQgaGFzIGFuIGltbWVkaWF0ZSBlZmZlY3QgZm9yIHRoZSBjdXJyZW50IGZyYW1lJ3MgdXBkYXRlXG4gICAgICogYW5kIHdpbGwgY29udGludWUgd2l0aCB0aGUgc3BlZWQgZnJvbSB0aGUgY3VycmVudCBwb2ludCBpbiB0aGUgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNwZWVkIE5ldyBzcGVlZCBhdCB3aGljaCB0byBwbGF5IHRoZSBhbmltYXRpb24uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHNldCBzcGVlZChzcGVlZCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfc3BlZWQodGhpcy5faWQsIHNwZWVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlZWQgZmFjdG9yIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gaXMgcGxheWVkLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIGdldCBzcGVlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9zcGVlZCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IHBsYXlpbmcgc3RhdGUgb2YgdGhlIGFuaW1hdGlvbiAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3N0YXRlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYW5pbWF0aW9uIGlzIGN1cnJlbnRseSBwYXVzZWQsIHJlc3VtZXMgZnJvbSB0aGF0IHBvc2l0aW9uLiBJZiB0aGVcbiAgICAgKiBhbmltYXRpb24gaXMgYWxyZWFkeSBwbGF5aW5nLCBkb2VzIG5vdGhpbmcuXG4gICAgICpcbiAgICAgKiBUbyByZXN0YXJ0IHRoZSBhbmltYXRpb24sIHtAbGluayBBbmltYXRpb25Db21wb25lbnQjc3RvcH0gaXQgZmlyc3QuXG4gICAgICovXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGxheSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBTdG9wIGFuaW1hdGlvbi4gKi9cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zdG9wKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIFBhdXNlIGFuaW1hdGlvbi4gKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGF1c2UodGhpcy5faWQpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIEFuaW1hdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5pbWF0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgQW5pbWF0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwbGF5Q291bnRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBBbmltYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInNwZWVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgZW51bWVyYWJsZSgpXG5dLCBBbmltYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInN0YXRlXCIsIG51bGwpO1xuLyoqXG4gKiBOYXRpdmUgbWVzaCBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIG1lc2ggY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgTWVzaENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdtZXNoJztcbiAgICAvKipcbiAgICAgKiBTZXQgbWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBtZXNoIHdpdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWwgTWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBtZXNoIHdpdGguXG4gICAgICovXG4gICAgc2V0IG1hdGVyaWFsKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWF0ZXJpYWwodGhpcy5faWQsIG1hdGVyaWFsID8gbWF0ZXJpYWwuX2luZGV4IDogMCk7XG4gICAgfVxuICAgIC8qKiBNYXRlcmlhbCB1c2VkIHRvIHJlbmRlciB0aGUgbWVzaC4gKi9cbiAgICBnZXQgbWF0ZXJpYWwoKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5fZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBpZCA+IDAgPyBuZXcgTWF0ZXJpYWwodGhpcy5fZW5naW5lLCBpZCkgOiBudWxsO1xuICAgIH1cbiAgICAvKiogTWVzaCByZW5kZXJlZCBieSB0aGlzIGNvbXBvbmVudC4gKi9cbiAgICBnZXQgbWVzaCgpIHtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21lc2godGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gaWQgPiAwID8gbmV3IE1lc2godGhpcy5fZW5naW5lLCBpZCkgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbWVzaCB0byByZW5kZXJlZCB3aXRoIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc2ggTWVzaCByZW5kZXJlZCBieSB0aGlzIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgbWVzaChtZXNoKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWVzaCh0aGlzLl9pZCwgbWVzaCA/IG1lc2guX2luZGV4IDogMCk7XG4gICAgfVxuICAgIC8qKiBTa2luIGZvciB0aGlzIG1lc2ggY29tcG9uZW50LiAqL1xuICAgIGdldCBza2luKCkge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfc2tpbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBpZCA+IDAgPyBuZXcgU2tpbih0aGlzLl9lbmdpbmUsIGlkKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBza2luIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNraW4gU2tpbiB0byB1c2UgZm9yIHJlbmRlcmluZyBza2lubmVkIG1lc2hlcy5cbiAgICAgKi9cbiAgICBzZXQgc2tpbihza2luKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfc2tpbih0aGlzLl9pZCwgc2tpbiA/IHNraW4uX2luZGV4IDogMCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBNZXNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZXNoXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwic2tpblwiLCBudWxsKTtcbi8qKlxuICogRW51bSBmb3IgUGh5c2ljcyBheGVzIGxvY2tpbmdcbiAqXG4gKiBTZWUge0BsaW5rIFBoeXNYQ29tcG9uZW50LmFuZ3VsYXJMb2NrQXhpc30gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudC5saW5lYXJMb2NrQXhpc30uXG4gKi9cbmV4cG9ydCB2YXIgTG9ja0F4aXM7XG4oZnVuY3Rpb24gKExvY2tBeGlzKSB7XG4gICAgLyoqXG4gICAgICogTm8gYXhpcyBzZWxlY3RlZC5cbiAgICAgKi9cbiAgICBMb2NrQXhpc1tMb2NrQXhpc1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKlxuICAgICAqICoqWCBheGlzKio6XG4gICAgICovXG4gICAgTG9ja0F4aXNbTG9ja0F4aXNbXCJYXCJdID0gMV0gPSBcIlhcIjtcbiAgICAvKipcbiAgICAgKiAqKlkgYXhpcyoqOlxuICAgICAqL1xuICAgIExvY2tBeGlzW0xvY2tBeGlzW1wiWVwiXSA9IDJdID0gXCJZXCI7XG4gICAgLyoqXG4gICAgICogKipaIGF4aXMqKjpcbiAgICAgKi9cbiAgICBMb2NrQXhpc1tMb2NrQXhpc1tcIlpcIl0gPSA0XSA9IFwiWlwiO1xufSkoTG9ja0F4aXMgfHwgKExvY2tBeGlzID0ge30pKTtcbi8qKlxuICogTmF0aXZlIHBoeXN4IHJpZ2lkIGJvZHkgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBtZXNoIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gdXNpbmcgcGh5c3ggZW5hYmxlZCBydW50aW1lLCBzZWUgXCJQcm9qZWN0IFNldHRpbmdzID4gUnVudGltZVwiLlxuICovXG5leHBvcnQgY2xhc3MgUGh5c1hDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAncGh5c3gnO1xuICAgIGdldFRyYW5zbGF0aW9uT2Zmc2V0KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X29mZnNldFRyYW5zbGF0aW9uKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZ2V0Um90YXRpb25PZmZzZXQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfb2Zmc2V0VHJhbnNmb3JtKHRoaXMuX2lkKSA+PiAyOyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBzdGF0aWMuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHRoaXMgcHJvcGVydHkgb25seSB0YWtlcyBlZmZlY3Qgb25jZSB0aGUgY29tcG9uZW50XG4gICAgICogc3dpdGNoZXMgZnJvbSBpbmFjdGl2ZSB0byBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5IHNob3VsZCBiZSBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IHN0YXRpYyhiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3N0YXRpYyh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIHN0YXRpYy5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcGVydHkgcmV0dXJucyB3aGV0aGVyIHRoZSByaWdpZCBib2R5IGlzICplZmZlY3RpdmVseSpcbiAgICAgKiBzdGF0aWMuIElmIHN0YXRpYyBwcm9wZXJ0eSB3YXMgc2V0IHdoaWxlIHRoZSByaWdpZCBib2R5IHdhc1xuICAgICAqIGFjdGl2ZSwgaXQgd2lsbCBub3QgdGFrZSBlZmZlY3QgdW50aWwgdGhlIHJpZ2lkIGJvZHkgaXMgc2V0XG4gICAgICogaW5hY3RpdmUgYW5kIGFjdGl2ZSBhZ2Fpbi4gVW50aWwgdGhlIGNvbXBvbmVudCBpcyBzZXQgaW5hY3RpdmUsXG4gICAgICogdGhpcyBnZXR0ZXIgd2lsbCByZXR1cm4gd2hldGhlciB0aGUgcmlnaWQgYm9keSBpcyBhY3R1YWxseVxuICAgICAqIHN0YXRpYy5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGljKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zdGF0aWModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRUcmFuc2xhdGlvbk9mZnNldH0uXG4gICAgICpcbiAgICAgKiBHaXZlcyBhIHF1aWNrIHZpZXcgb2YgdGhlIG9mZnNldCBpbiBhIGRlYnVnZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0VHJhbnNsYXRpb25PZmZzZXR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCB0cmFuc2xhdGlvbk9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhbnNsYXRpb25PZmZzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYXJyYXkgbXVzdCBiZSBhIHZlY3RvciBvZiBhdCBsZWFzdCAqKjMqKiBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBjb21wb25lbnQgbXVzdCBiZSByZS1hY3RpdmF0ZWQgdG8gYXBwbHkgdGhlIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIHNldCB0cmFuc2xhdGlvbk9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X29mZnNldFRyYW5zbGF0aW9uKHRoaXMuX2lkLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgb2Zmc2V0WzJdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0Um90YXRpb25PZmZzZXR9LlxuICAgICAqXG4gICAgICogR2l2ZXMgYSBxdWljayB2aWV3IG9mIHRoZSBvZmZzZXQgaW4gYSBkZWJ1Z2dlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldFJvdGF0aW9uT2Zmc2V0fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb25PZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJvdGF0aW9uT2Zmc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2Zmc2V0IHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGFycmF5IG11c3QgYmUgYSBxdWF0ZXJuaW9uIG9mIGF0IGxlYXN0ICoqNCoqIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGNvbXBvbmVudCBtdXN0IGJlIHJlLWFjdGl2YXRlZCB0byBhcHBseSB0aGUgY2hhbmdlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgc2V0IHJvdGF0aW9uT2Zmc2V0KG9mZnNldCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0Um90YXRpb24odGhpcy5faWQsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCBvZmZzZXRbMl0sIG9mZnNldFszXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBraW5lbWF0aWMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5IHNob3VsZCBiZSBraW5lbWF0aWMuXG4gICAgICovXG4gICAgc2V0IGtpbmVtYXRpYyhiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2tpbmVtYXRpYyh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYy5cbiAgICAgKi9cbiAgICBnZXQga2luZW1hdGljKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9raW5lbWF0aWModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBncmF2aXR5IGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5J3MgZ3Jhdml0eSBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzZXQgZ3Jhdml0eShiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyYXZpdHkodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIGdyYXZpdHkgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIGdldCBncmF2aXR5KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ncmF2aXR5KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSdzIHNpbXVsYXRlIGZsYWcgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2V0IHNpbXVsYXRlKGIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2ltdWxhdGUodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIHNpbXVsYXRlIGZsYWcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBnZXQgc2ltdWxhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NpbXVsYXRlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBhbmQge0BsaW5rIHRyaWdnZXJ9IGNhbiBub3QgYmUgZW5hYmxlZCBhdCB0aGVcbiAgICAgKiBzYW1lIHRpbWUuIEVuYWJsaW5nIHtAbGluayBhbGxvd1NpbXVsYXRpb259IHdoaWxlIHtAbGluayB0cmlnZ2VyfSBpcyBlbmFibGVkXG4gICAgICogd2lsbCBkaXNhYmxlIHtAbGluayB0cmlnZ2VyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgc2V0IGFsbG93U2ltdWxhdGlvbihiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93U2ltdWxhdGlvbih0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgZ2V0IGFsbG93U2ltdWxhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYWxsb3dTaW11bGF0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5IG1heSBiZSBxdWVyaWVkIGluIHJheSBjYXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IG1heSBiZSBxdWVyaWVkIGluIHJheSBjYXN0cy5cbiAgICAgKi9cbiAgICBzZXQgYWxsb3dRdWVyeShiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93UXVlcnkodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICovXG4gICAgZ2V0IGFsbG93UXVlcnkoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93UXVlcnkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHBoeXNpY3MgYm9keSBpcyBhIHRyaWdnZXIuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBhbmQge0BsaW5rIHRyaWdnZXJ9IGNhbiBub3QgYmUgZW5hYmxlZCBhdCB0aGVcbiAgICAgKiBzYW1lIHRpbWUuIEVuYWJsaW5nIHRyaWdnZXIgd2hpbGUge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0gaXMgZW5hYmxlZCxcbiAgICAgKiB3aWxsIGRpc2FibGUge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKi9cbiAgICBzZXQgdHJpZ2dlcihiKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3RyaWdnZXIodGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKi9cbiAgICBnZXQgdHJpZ2dlcigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfdHJpZ2dlcih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2hhcGUgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcyBOZXcgc2hhcGUuXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IHNoYXBlKHMpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGUodGhpcy5faWQsIHMpO1xuICAgIH1cbiAgICAvKiogVGhlIHNoYXBlIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLiAqL1xuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGFkZGl0aW9uYWwgZGF0YSBmb3IgdGhlIHNoYXBlLlxuICAgICAqXG4gICAgICogUmV0cmlldmVkIG9ubHkgZnJvbSB7QGxpbmsgUGh5c1hDb21wb25lbnQjc2hhcGVEYXRhfS5cbiAgICAgKiBAc2luY2UgMC44LjEwXG4gICAgICovXG4gICAgc2V0IHNoYXBlRGF0YShkKSB7XG4gICAgICAgIGlmIChkID09IG51bGwgfHwgIWlzTWVzaFNoYXBlKHRoaXMuc2hhcGUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaGFwZV9kYXRhKHRoaXMuX2lkLCBkLmluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBgbnVsbGAgZm9yIHtAbGluayBTaGFwZX0gdmFsdWVzOiBgTm9uZWAsIGBTcGhlcmVgLCBgQ2Fwc3VsZWAsIGBCb3hgLCBgUGxhbmVgLlxuICAgICAqIGB7aW5kZXg6IG59YCBmb3IgYFRyaWFuZ2xlTWVzaGAgYW5kIGBDb252ZXhIdWxsYC5cbiAgICAgKlxuICAgICAqIFRoaXMgZGF0YSBpcyBjdXJyZW50bHkgb25seSBmb3IgcGFzc2luZyBvbnRvIG9yIGNyZWF0aW5nIG90aGVyIHtAbGluayBQaHlzWENvbXBvbmVudH0uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIGdldCBzaGFwZURhdGEoKSB7XG4gICAgICAgIGlmICghaXNNZXNoU2hhcGUodGhpcy5zaGFwZSkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZGV4OiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaGFwZV9kYXRhKHRoaXMuX2lkKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaGFwZSBleHRlbnRzIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgTmV3IGV4dGVudHMgZm9yIHRoZSBzaGFwZS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgZXh0ZW50cyhlKSB7XG4gICAgICAgIHRoaXMuZXh0ZW50cy5zZXQoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzaGFwZSBleHRlbnRzIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBleHRlbnRzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHB0ciwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBzdGF0aWNGcmljdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGljRnJpY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zdGF0aWNGcmljdGlvbih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBzdGF0aWNGcmljdGlvbi5cbiAgICAgKiBAcGFyYW0gdiBOZXcgc3RhdGljRnJpY3Rpb24uXG4gICAgICovXG4gICAgc2V0IHN0YXRpY0ZyaWN0aW9uKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc3RhdGljRnJpY3Rpb24odGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZHluYW1pY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBkeW5hbWljRnJpY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9keW5hbWljRnJpY3Rpb24odGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgZHluYW1pY0ZyaWN0aW9uXG4gICAgICogQHBhcmFtIHYgTmV3IGR5bmFtaWNEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBkeW5hbWljRnJpY3Rpb24odikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9keW5hbWljRnJpY3Rpb24odGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYm91bmNpbmVzcy5cbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBnZXQgYm91bmNpbmVzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2JvdW5jaW5lc3ModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYm91bmNpbmVzcy5cbiAgICAgKiBAcGFyYW0gdiBOZXcgYm91bmNpbmVzcy5cbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBzZXQgYm91bmNpbmVzcyh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2JvdW5jaW5lc3ModGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgbGluZWFyRGFtcGluZy9cbiAgICAgKi9cbiAgICBnZXQgbGluZWFyRGFtcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhckRhbXBpbmcodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbGluZWFyRGFtcGluZy5cbiAgICAgKiBAcGFyYW0gdiBOZXcgbGluZWFyRGFtcGluZy5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyRGFtcGluZyh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckRhbXBpbmcodGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKiogR2V0IGFuZ3VsYXJEYW1waW5nLiAqL1xuICAgIGdldCBhbmd1bGFyRGFtcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJEYW1waW5nKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGFuZ3VsYXJEYW1waW5nLlxuICAgICAqIEBwYXJhbSB2IE5ldyBhbmd1bGFyRGFtcGluZy5cbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhckRhbXBpbmcodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyRGFtcGluZyh0aGlzLl9pZCwgdik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJWZWxvY2l0eVwiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI3ZlbG9jaXR5KVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxpbmVhciB2ZWxvY2l0eS5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyVmVsb2NpdHkodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJWZWxvY2l0eSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgfVxuICAgIC8qKiBMaW5lYXIgdmVsb2NpdHkgb3IgYFswLCAwLCAwXWAgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLiAqL1xuICAgIGdldCBsaW5lYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhclZlbG9jaXR5KHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fdGVtcE1lbSwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhbmd1bGFyIHZlbG9jaXR5XG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJWZWxvY2l0eVwiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI3ZlbG9jaXR5KVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGFuZ3VsYXIgdmVsb2NpdHlcbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhclZlbG9jaXR5KHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhclZlbG9jaXR5KHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICB9XG4gICAgLyoqIEFuZ3VsYXIgdmVsb2NpdHkgb3IgYFswLCAwLCAwXWAgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLiAqL1xuICAgIGdldCBhbmd1bGFyVmVsb2NpdHkoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl90ZW1wTWVtLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb21wb25lbnRzIGdyb3VwcyBtYXNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZsYWdzIE5ldyBmbGFncyB0aGF0IG5lZWQgdG8gYmUgc2V0LlxuICAgICAqL1xuICAgIHNldCBncm91cHNNYXNrKGZsYWdzKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyb3Vwc01hc2sodGhpcy5faWQsIGZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb21wb25lbnRzIGdyb3VwcyBtYXNrIGZsYWdzLlxuICAgICAqXG4gICAgICogRWFjaCBiaXQgcmVwcmVzZW50cyBtZW1iZXJzaGlwIHRvIGdyb3VwLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQXNzaWduIGMgdG8gZ3JvdXAgMlxuICAgICAqIGMuZ3JvdXBzTWFzayA9ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogLy8gQXNzaWduIGMgdG8gZ3JvdXAgMFxuICAgICAqIGMuZ3JvdXBzTWFzayAgPSAoMSA8PCAwKTtcbiAgICAgKlxuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDAgYW5kIDJcbiAgICAgKiBjLmdyb3Vwc01hc2sgPSAoMSA8PCAwKSB8ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogKGMuZ3JvdXBzTWFzayAmICgxIDw8IDIpKSAhPSAwOyAvLyB0cnVlXG4gICAgICogKGMuZ3JvdXBzTWFzayAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBncm91cHNNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZ3JvdXBzTWFzayh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29tcG9uZW50cyBibG9ja3MgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFncyBOZXcgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHNldC5cbiAgICAgKi9cbiAgICBzZXQgYmxvY2tzTWFzayhmbGFncykge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9ibG9ja3NNYXNrKHRoaXMuX2lkLCBmbGFncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcG9uZW50cyBibG9ja3MgbWFzayBmbGFncy5cbiAgICAgKlxuICAgICAqIEVhY2ggYml0IHJlcHJlc2VudHMgbWVtYmVyc2hpcCB0byB0aGUgYmxvY2ssIHNlZSBleGFtcGxlLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBCbG9jayBvdmVybGFwIHdpdGggYW55IG9iamVjdHMgaW4gZ3JvdXAgMlxuICAgICAqIGMuYmxvY2tzTWFzayA9ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogLy8gQmxvY2sgb3ZlcmxhcCB3aXRoIGFueSBvYmplY3RzIGluIGdyb3VwIDBcbiAgICAgKiBjLmJsb2Nrc01hc2sgID0gKDEgPDwgMClcbiAgICAgKlxuICAgICAqIC8vIEJsb2NrIG92ZXJsYXAgd2l0aCBhbnkgb2JqZWN0cyBpbiBncm91cCAwIGFuZCAyXG4gICAgICogYy5ibG9ja3NNYXNrID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIChjLmJsb2Nrc01hc2sgJiAoMSA8PCAyKSkgIT0gMDsgLy8gdHJ1ZVxuICAgICAqIChjLmJsb2Nrc01hc2sgJiAoMSA8PCA3KSkgIT0gMDsgLy8gZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgYmxvY2tzTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2Jsb2Nrc01hc2sodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYXhlcyB0byBsb2NrIGZvciBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jayBUaGUgQXhpcyB0aGF0IG5lZWRzIHRvIGJlIHNldC5cbiAgICAgKlxuICAgICAqIENvbWJpbmUgZmxhZ3Mgd2l0aCBCaXR3aXNlIE9SLlxuICAgICAqIGBgYGpzXG4gICAgICogYm9keS5saW5lYXJMb2NrQXhpcyA9IExvY2tBeGlzLlggfCBMb2NrQXhpcy5ZOyAvLyB4IGFuZCB5IHNldFxuICAgICAqIGJvZHkubGluZWFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YOyAvLyB5IHVuc2V0XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGhhcyBubyBlZmZlY3QgaWYgdGhlIGNvbXBvbmVudCBpcyBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IGxpbmVhckxvY2tBeGlzKGxvY2spIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyTG9ja0F4aXModGhpcy5faWQsIGxvY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpbmVhciBsb2NrIGF4ZXMgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBUbyBnZXQgdGhlIHN0YXRlIG9mIGEgc3BlY2lmaWMgZmxhZywgQml0d2lzZSBBTkQgd2l0aCB0aGUgTG9ja0F4aXMgbmVlZGVkLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpZihib2R5LmxpbmVhckxvY2tBeGlzICYgTG9ja0F4aXMuWSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlRoZSBZIGZsYWcgd2FzIHNldCFcIik7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybiBheGVzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2NrZWQgZm9yIGxpbmVhciBtb3ZlbWVudC5cbiAgICAgKi9cbiAgICBnZXQgbGluZWFyTG9ja0F4aXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJMb2NrQXhpcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBheGVzIHRvIGxvY2sgZm9yIGFuZ3VsYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jayBUaGUgQXhpcyB0aGF0IG5lZWRzIHRvIGJlIHNldC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYm9keS5hbmd1bGFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YIHwgTG9ja0F4aXMuWTsgLy8geCBhbmQgeSBzZXRcbiAgICAgKiBib2R5LmFuZ3VsYXJMb2NrQXhpcyA9IExvY2tBeGlzLlg7IC8vIHkgdW5zZXRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY29tcG9uZW50IGlzIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhckxvY2tBeGlzKGxvY2spIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckxvY2tBeGlzKHRoaXMuX2lkLCBsb2NrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmd1bGFyIGxvY2sgYXhlcyBmbGFncy5cbiAgICAgKlxuICAgICAqIFRvIGdldCB0aGUgc3RhdGUgb2YgYSBzcGVjaWZpYyBmbGFnLCBCaXR3aXNlIEFORCB3aXRoIHRoZSBMb2NrQXhpcyBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGlmKGJvZHkuYW5ndWxhckxvY2tBeGlzICYgTG9ja0F4aXMuWSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlRoZSBZIGZsYWcgd2FzIHNldCFcIik7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybiBheGVzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2NrZWQgZm9yIGFuZ3VsYXIgbW92ZW1lbnQuXG4gICAgICovXG4gICAgZ2V0IGFuZ3VsYXJMb2NrQXhpcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJMb2NrQXhpcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBtYXNzLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiTWFzcyBQcm9wZXJ0aWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjbWFzcy1wcm9wZXJ0aWVzKVxuICAgICAqXG4gICAgICogQHBhcmFtIG0gTmV3IG1hc3MuXG4gICAgICovXG4gICAgc2V0IG1hc3MobSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzKHRoaXMuX2lkLCBtKTtcbiAgICB9XG4gICAgLyoqIE1hc3MgKi9cbiAgICBnZXQgbWFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X21hc3ModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbWFzcyBzcGFjZSBpbnRlcmlhIHRlbnNvci5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIk1hc3MgUHJvcGVydGllc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI21hc3MtcHJvcGVydGllcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBtYXNzIHNwYWNlIGludGVyYXRpYSB0ZW5zb3IuXG4gICAgICovXG4gICAgc2V0IG1hc3NTcGFjZUludGVyaWFUZW5zb3Iodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzU3BhY2VJbmVydGlhVGVuc29yKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSBmb3JjZS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIkFwcGx5aW5nIEZvcmNlcyBhbmQgVG9ycXVlc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI2FwcGx5aW5nLWZvcmNlcy1hbmQtdG9ycXVlcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIEZvcmNlIHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gbSBGb3JjZSBtb2RlLCBzZWUge0BsaW5rIEZvcmNlTW9kZX0sIGRlZmF1bHQgYEZvcmNlYC5cbiAgICAgKiBAcGFyYW0gbG9jYWxGb3JjZSBXaGV0aGVyIHRoZSBmb3JjZSB2ZWN0b3IgaXMgaW4gbG9jYWwgc3BhY2UsIGRlZmF1bHQgYGZhbHNlYC5cbiAgICAgKiBAcGFyYW0gcCBQb3NpdGlvbiB0byBhcHBseSBmb3JjZSBhdCwgZGVmYXVsdCBpcyBjZW50ZXIgb2YgbWFzcy5cbiAgICAgKiBAcGFyYW0gbG9jYWwgV2hldGhlciBwb3NpdGlvbiBpcyBpbiBsb2NhbCBzcGFjZSwgZGVmYXVsdCBgZmFsc2VgLlxuICAgICAqL1xuICAgIGFkZEZvcmNlKGYsIG0gPSBGb3JjZU1vZGUuRm9yY2UsIGxvY2FsRm9yY2UgPSBmYWxzZSwgcCwgbG9jYWwgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZEZvcmNlKHRoaXMuX2lkLCBmWzBdLCBmWzFdLCBmWzJdLCBtLCBsb2NhbEZvcmNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2VBdCh0aGlzLl9pZCwgZlswXSwgZlsxXSwgZlsyXSwgbSwgbG9jYWxGb3JjZSwgcFswXSwgcFsxXSwgcFsyXSwgbG9jYWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSB0b3JxdWUuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJBcHBseWluZyBGb3JjZXMgYW5kIFRvcnF1ZXNcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCNhcHBseWluZy1mb3JjZXMtYW5kLXRvcnF1ZXMpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZiBGb3JjZSB2ZWN0b3IuXG4gICAgICogQHBhcmFtIG0gRm9yY2UgbW9kZSwgc2VlIHtAbGluayBGb3JjZU1vZGV9LCBkZWZhdWx0IGBGb3JjZWAuXG4gICAgICovXG4gICAgYWRkVG9ycXVlKGYsIG0gPSBGb3JjZU1vZGUuRm9yY2UpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRUb3JxdWUodGhpcy5faWQsIGZbMF0sIGZbMV0sIGZbMl0sIG0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgb24gY29sbGlzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHkgKHVuKWNvbGxpZGVzIHdpdGggYW55IG90aGVyLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgbGV0IHJpZ2lkQm9keSA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgncGh5c3gnKTtcbiAgICAgKiAgcmlnaWRCb2R5Lm9uQ29sbGlzaW9uKGZ1bmN0aW9uKHR5cGUsIG90aGVyKSB7XG4gICAgICogICAgICAvLyBJZ25vcmUgdW5jb2xsaWRlc1xuICAgICAqICAgICAgaWYodHlwZSA9PSBDb2xsaXNpb25FdmVudFR5cGUuVG91Y2hMb3N0KSByZXR1cm47XG4gICAgICpcbiAgICAgKiAgICAgIC8vIFRha2UgZGFtYWdlIG9uIGNvbGxpc2lvbiB3aXRoIGVuZW1pZXNcbiAgICAgKiAgICAgIGlmKG90aGVyLm9iamVjdC5uYW1lLnN0YXJ0c1dpdGgoXCJlbmVteS1cIikpIHtcbiAgICAgKiAgICAgICAgICB0aGlzLmFwcGx5RGFtYWdlKDEwKTtcbiAgICAgKiAgICAgIH1cbiAgICAgKiAgfS5iaW5kKHRoaXMpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIElkIG9mIHRoZSBuZXcgY2FsbGJhY2sgZm9yIHVzZSB3aXRoIHtAbGluayBQaHlzWENvbXBvbmVudCNyZW1vdmVDb2xsaXNpb25DYWxsYmFja30uXG4gICAgICovXG4gICAgb25Db2xsaXNpb24oY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25Db2xsaXNpb25XaXRoKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGZpbHRlcmVkIG9uIGNvbGxpc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlckNvbXAgQ29tcG9uZW50IGZvciB3aGljaCBjYWxsYmFja3Mgd2lsbFxuICAgICAqICAgICAgICBiZSB0cmlnZ2VyZWQuIElmIHlvdSBwYXNzIHRoaXMgY29tcG9uZW50LCB0aGUgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8uXG4gICAgICogICAgICAgIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHlcbiAgICAgKiAgICAgICAgKHVuKWNvbGxpZGVzIHdpdGggYG90aGVyQ29tcGAuXG4gICAgICogQHJldHVybnMgSWQgb2YgdGhlIG5ldyBjYWxsYmFjayBmb3IgdXNlIHdpdGgge0BsaW5rIFBoeXNYQ29tcG9uZW50I3JlbW92ZUNvbGxpc2lvbkNhbGxiYWNrfS5cbiAgICAgKi9cbiAgICBvbkNvbGxpc2lvbldpdGgob3RoZXJDb21wLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBwaHlzaWNzID0gdGhpcy5fZW5naW5lLnBoeXNpY3M7XG4gICAgICAgIHBoeXNpY3MuX2NhbGxiYWNrc1t0aGlzLl9pZF0gPSBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdIHx8IFtdO1xuICAgICAgICBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRDYWxsYmFjayh0aGlzLl9pZCwgb3RoZXJDb21wLl9pZCB8fCB0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGNvbGxpc2lvbiBjYWxsYmFjayBhZGRlZCB3aXRoIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0gb3Ige0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9uV2l0aH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tJZCBDYWxsYmFjayBpZCBhcyByZXR1cm5lZCBieSB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb259IG9yIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbldpdGh9LlxuICAgICAqIEB0aHJvd3MgV2hlbiB0aGUgY2FsbGJhY2sgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBjb21wb25lbnQuXG4gICAgICogQHRocm93cyBXaGVuIHRoZSBjYWxsYmFjayBkb2VzIG5vdCBleGlzdC5cbiAgICAgKi9cbiAgICByZW1vdmVDb2xsaXNpb25DYWxsYmFjayhjYWxsYmFja0lkKSB7XG4gICAgICAgIGNvbnN0IHBoeXNpY3MgPSB0aGlzLl9lbmdpbmUucGh5c2ljcztcbiAgICAgICAgY29uc3QgciA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfcmVtb3ZlQ2FsbGJhY2sodGhpcy5faWQsIGNhbGxiYWNrSWQpO1xuICAgICAgICAvKiByIGlzIHRoZSBhbW91bnQgb2Ygb2JqZWN0IHRvIHJlbW92ZSBmcm9tIHRoZSBlbmQgb2YgdGhlXG4gICAgICAgICAqIGNhbGxiYWNrcyBhcnJheSBmb3IgdGhpcyBvYmplY3QgKi9cbiAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdLnNwbGljZSgtcik7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXRpY1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmFuc2xhdGlvbk9mZnNldFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3RhdGlvbk9mZnNldFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJraW5lbWF0aWNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3Jhdml0eVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaW11bGF0ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGxvd1NpbXVsYXRpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYWxsb3dRdWVyeVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmlnZ2VyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlRGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJleHRlbnRzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXRpY0ZyaWN0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImR5bmFtaWNGcmljdGlvblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJib3VuY2luZXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVhckRhbXBpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5ndWxhckRhbXBpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwibGluZWFyVmVsb2NpdHlcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5ndWxhclZlbG9jaXR5XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3Vwc01hc2tcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmxvY2tzTWFza1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsaW5lYXJMb2NrQXhpc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbmd1bGFyTG9ja0F4aXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwibWFzc1wiLCBudWxsKTtcbi8qKlxuICogQWNjZXNzIHRvIHRoZSBwaHlzaWNzIHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzaWNzIHtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBwdWJsaWMgdG8gZW11bGF0ZSBhIGBmcmllbmRgIGFjY2Vzc29yLlxuICAgICAqL1xuICAgIF9jYWxsYmFja3M7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlICovXG4gICAgX2VuZ2luZTtcbiAgICAvKiogUmF5IEhpdCAqL1xuICAgIF9yYXlIaXQ7XG4gICAgLyoqIEhpdC4gKi9cbiAgICBfaGl0O1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX3JheUhpdCA9IGVuZ2luZS53YXNtLl9tYWxsb2MoNCAqICgzICogNCArIDMgKiA0ICsgNCArIDIpICsgNCk7XG4gICAgICAgIHRoaXMuX2hpdCA9IG5ldyBSYXlIaXQodGhpcy5fZW5naW5lLCB0aGlzLl9yYXlIaXQpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FzdCBhIHJheSB0aHJvdWdoIHRoZSBwaHlzaWNzIHNjZW5lIGFuZCBmaW5kIGludGVyc2VjdGluZyBvYmplY3RzLlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdGluZyByYXkgaGl0IHdpbGwgY29udGFpbiAqKnVwIHRvIDQqKiBjbG9zZXN0IHJheSBoaXRzLFxuICAgICAqIHNvcnRlZCBieSBpbmNyZWFzaW5nIGRpc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG8gUmF5IG9yaWdpbi5cbiAgICAgKiBAcGFyYW0gZCBSYXkgZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSBncm91cCBDb2xsaXNpb24gZ3JvdXAgdG8gZmlsdGVyIGJ5OiBvbmx5IG9iamVjdHMgdGhhdCBhcmVcbiAgICAgKiAgICAgICAgcGFydCBvZiBnaXZlbiBncm91cCBhcmUgY29uc2lkZXJlZCBmb3IgcmF5Y2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4RGlzdGFuY2UgTWF4aW11bSByYXkgZGlzdGFuY2UsIGRlZmF1bHQgYDEwMC4wYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBSYXlIaXQgaW5zdGFuY2UsIGJlbG9uZ2luZyB0byB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHtAbGluayBSYXlIaXR9IG9iamVjdCBpcyBvd25lZCBieSB0aGUgUGh5c2ljcyBpbnN0YW5jZSBhbmRcbiAgICAgKiAgICAgICB3aWxsIGJlIHJldXNlZCB3aXRoIHRoZSBuZXh0IHtAbGluayBQaHlzaWNzI3JheUNhc3R9IGNhbGwuXG4gICAgICovXG4gICAgcmF5Q2FzdChvLCBkLCBncm91cCwgbWF4RGlzdGFuY2UgPSAxMDAuMCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcGh5c3hfcmF5X2Nhc3Qob1swXSwgb1sxXSwgb1syXSwgZFswXSwgZFsxXSwgZFsyXSwgZ3JvdXAsIG1heERpc3RhbmNlLCB0aGlzLl9yYXlIaXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5faGl0O1xuICAgIH1cbn1cbi8qKlxuICogTWVzaCBpbmRleCB0eXBlLlxuICovXG5leHBvcnQgdmFyIE1lc2hJbmRleFR5cGU7XG4oZnVuY3Rpb24gKE1lc2hJbmRleFR5cGUpIHtcbiAgICAvKiogU2luZ2xlIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC0yNTUgKi9cbiAgICBNZXNoSW5kZXhUeXBlW01lc2hJbmRleFR5cGVbXCJVbnNpZ25lZEJ5dGVcIl0gPSAxXSA9IFwiVW5zaWduZWRCeXRlXCI7XG4gICAgLyoqIFR3byBieXRlIG1lc2ggaW5kZXgsIHJhbmdlIDAtNjU1MzUgKi9cbiAgICBNZXNoSW5kZXhUeXBlW01lc2hJbmRleFR5cGVbXCJVbnNpZ25lZFNob3J0XCJdID0gMl0gPSBcIlVuc2lnbmVkU2hvcnRcIjtcbiAgICAvKiogRm91ciBieXRlIG1lc2ggaW5kZXgsIHJhbmdlIDAtNDI5NDk2NzI5NSAqL1xuICAgIE1lc2hJbmRleFR5cGVbTWVzaEluZGV4VHlwZVtcIlVuc2lnbmVkSW50XCJdID0gNF0gPSBcIlVuc2lnbmVkSW50XCI7XG59KShNZXNoSW5kZXhUeXBlIHx8IChNZXNoSW5kZXhUeXBlID0ge30pKTtcbi8qKlxuICogTWVzaCBza2lubmluZyB0eXBlLlxuICovXG5leHBvcnQgdmFyIE1lc2hTa2lubmluZ1R5cGU7XG4oZnVuY3Rpb24gKE1lc2hTa2lubmluZ1R5cGUpIHtcbiAgICAvKiogTm90IHNraW5uZWQgKi9cbiAgICBNZXNoU2tpbm5pbmdUeXBlW01lc2hTa2lubmluZ1R5cGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICAvKiogU2tpbm5lZCwgNCBqb2ludHMvd2VpZ2h0IHBlciB2ZXJ0ZXggKi9cbiAgICBNZXNoU2tpbm5pbmdUeXBlW01lc2hTa2lubmluZ1R5cGVbXCJGb3VySm9pbnRzXCJdID0gMV0gPSBcIkZvdXJKb2ludHNcIjtcbiAgICAvKiogU2tpbm5lZCwgOCBqb2ludHMvd2VpZ2h0IHBlciB2ZXJ0ZXggKi9cbiAgICBNZXNoU2tpbm5pbmdUeXBlW01lc2hTa2lubmluZ1R5cGVbXCJFaWdodEpvaW50c1wiXSA9IDJdID0gXCJFaWdodEpvaW50c1wiO1xufSkoTWVzaFNraW5uaW5nVHlwZSB8fCAoTWVzaFNraW5uaW5nVHlwZSA9IHt9KSk7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIG1lc2ggZGF0YS5cbiAqXG4gKiBUbyBtb2RpZnkgYSBtZXNoLCB5b3UgZ2V0IGFjY2VzcyB0byBhIHtAbGluayBNZXNoQXR0cmlidXRlQWNjZXNzb3J9IHRoYXQgYWxsb3dzIHlvdSB0byBtb2RpZnlcbiAqIHRoZSBjb250ZW50IG9mIHRoZSBidWZmZXJzOlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gbmV3IE1lc2goZW5naW5lLCB7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdIH0pO1xuICogY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gKiAuLi5cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWVzaCB7XG4gICAgLyoqXG4gICAgICogSW5kZXggb2YgdGhlIG1lc2ggaW4gdGhlIG1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2luZGV4ID0gLTE7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIEVpdGhlciBhIG1lc2ggaW5kZXggdG8gd3JhcCBvciBzZXQgb2YgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBuZXcgbWVzaC5cbiAgICAgKiAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgTWVzaFBhcmFtZXRlcnN9IGludGVyZmFjZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIHBhcmFtcykge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmUgPz8gV0w7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gLTE7XG4gICAgICAgIGlmIChpc051bWJlcihwYXJhbXMpKSB7XG4gICAgICAgICAgICB0aGlzLl9pbmRleCA9IHBhcmFtcztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmFtcy52ZXJ0ZXhDb3VudClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcGFyYW1ldGVyICd2ZXJ0ZXhDb3VudCdcIik7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgbGV0IGluZGV4RGF0YSA9IDA7XG4gICAgICAgIGxldCBpbmRleFR5cGUgPSAwO1xuICAgICAgICBsZXQgaW5kZXhEYXRhU2l6ZSA9IDA7XG4gICAgICAgIGlmIChwYXJhbXMuaW5kZXhEYXRhKSB7XG4gICAgICAgICAgICBpbmRleFR5cGUgPSBwYXJhbXMuaW5kZXhUeXBlIHx8IE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDtcbiAgICAgICAgICAgIGluZGV4RGF0YVNpemUgPSBwYXJhbXMuaW5kZXhEYXRhLmxlbmd0aCAqIGluZGV4VHlwZTtcbiAgICAgICAgICAgIGluZGV4RGF0YSA9IHdhc20uX21hbGxvYyhpbmRleERhdGFTaXplKTtcbiAgICAgICAgICAgIC8qIENvcHkgdGhlIGluZGV4IGRhdGEgaW50byB3YXNtIG1lbW9yeSAqL1xuICAgICAgICAgICAgc3dpdGNoIChpbmRleFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlOlxuICAgICAgICAgICAgICAgICAgICB3YXNtLkhFQVBVOC5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkU2hvcnQ6XG4gICAgICAgICAgICAgICAgICAgIHdhc20uSEVBUFUxNi5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhID4+IDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIHdhc20uSEVBUFUzMi5zZXQocGFyYW1zLmluZGV4RGF0YSwgaW5kZXhEYXRhID4+IDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHNraW5uaW5nVHlwZSA9IE1lc2hTa2lubmluZ1R5cGUuTm9uZSB9ID0gcGFyYW1zO1xuICAgICAgICB0aGlzLl9pbmRleCA9IHdhc20uX3dsX21lc2hfY3JlYXRlKGluZGV4RGF0YSwgaW5kZXhEYXRhU2l6ZSwgaW5kZXhUeXBlLCBwYXJhbXMudmVydGV4Q291bnQsIHNraW5uaW5nVHlwZSk7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgdmVydGljZXMgaW4gdGhpcyBtZXNoLiAqL1xuICAgIGdldCB2ZXJ0ZXhDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9tZXNoX2dldF92ZXJ0ZXhDb3VudCh0aGlzLl9pbmRleCk7XG4gICAgfVxuICAgIC8qKiBJbmRleCBkYXRhIChyZWFkLW9ubHkpIG9yIGBudWxsYCBpZiB0aGUgbWVzaCBpcyBub3QgaW5kZXhlZC4gKi9cbiAgICBnZXQgaW5kZXhEYXRhKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW0gPSB3YXNtLl90ZW1wTWVtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9tZXNoX2dldF9pbmRleERhdGEodGhpcy5faW5kZXgsIHRlbXBNZW0sIHRlbXBNZW0gKyA0KTtcbiAgICAgICAgaWYgKHB0ciA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBpbmRleENvdW50ID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0XTtcbiAgICAgICAgY29uc3QgaW5kZXhTaXplID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0ICsgMV07XG4gICAgICAgIHN3aXRjaCAoaW5kZXhTaXplKSB7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh3YXNtLkhFQVBVOC5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHdhc20uSEVBUFUxNi5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSh3YXNtLkhFQVBVMzIuYnVmZmVyLCBwdHIsIGluZGV4Q291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgY2hhbmdlcyB0byB7QGxpbmsgYXR0cmlidXRlIHwgdmVydGV4IGF0dHJpYnV0ZXN9LlxuICAgICAqXG4gICAgICogVXBsb2FkcyB0aGUgdXBkYXRlZCB2ZXJ0ZXggYXR0cmlidXRlcyB0byB0aGUgR1BVIGFuZCB1cGRhdGVzIHRoZSBib3VuZGluZ1xuICAgICAqIHNwaGVyZSB0byBtYXRjaCB0aGUgbmV3IHZlcnRleCBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBTaW5jZSB0aGlzIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb24sIGNhbGwgaXQgb25seSBvbmNlIHlvdSBoYXZlIHBlcmZvcm1lZFxuICAgICAqIGFsbCBtb2RpZmljYXRpb25zIG9uIGEgbWVzaCBhbmQgYXZvaWQgY2FsbGluZyBpZiB5b3UgZGlkIG5vdCBwZXJmb3JtIGFueVxuICAgICAqIG1vZGlmaWNhdGlvbnMgYXQgYWxsLlxuICAgICAqL1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX21lc2hfdXBkYXRlKHRoaXMuX2luZGV4KTtcbiAgICB9XG4gICAgZ2V0Qm91bmRpbmdTcGhlcmUob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB0ZW1wTWVtRmxvYXQgPSB0aGlzLl9lbmdpbmUud2FzbS5fdGVtcE1lbUZsb2F0O1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfYm91bmRpbmdTcGhlcmUodGhpcy5faW5kZXgsIHRoaXMuX2VuZ2luZS53YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB0ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHRlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBhdHRyaWJ1dGUoYXR0cikge1xuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT0gJ251bWJlcicpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBudW1iZXIsIGJ1dCBnb3QgJyArIHR5cGVvZiBhdHRyKTtcbiAgICAgICAgY29uc3QgdGVtcE1lbVVpbnQzMiA9IHRoaXMuX2VuZ2luZS53YXNtLl90ZW1wTWVtVWludDMyO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfYXR0cmlidXRlKHRoaXMuX2luZGV4LCBhdHRyLCB0aGlzLl9lbmdpbmUud2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGlmICh0ZW1wTWVtVWludDMyWzBdID09IDI1NSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBhcnJheVNpemUgPSB0ZW1wTWVtVWludDMyWzVdO1xuICAgICAgICByZXR1cm4gbmV3IE1lc2hBdHRyaWJ1dGVBY2Nlc3Nvcih0aGlzLl9lbmdpbmUsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogdGVtcE1lbVVpbnQzMlswXSxcbiAgICAgICAgICAgIG9mZnNldDogdGVtcE1lbVVpbnQzMlsxXSxcbiAgICAgICAgICAgIHN0cmlkZTogdGVtcE1lbVVpbnQzMlsyXSxcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IHRlbXBNZW1VaW50MzJbM10sXG4gICAgICAgICAgICBjb21wb25lbnRDb3VudDogdGVtcE1lbVVpbnQzMls0XSxcbiAgICAgICAgICAgIC8qIFRoZSBXQVNNIEFQSSByZXR1cm5zIGAwYCBmb3IgYSBzY2FsYXIgdmFsdWUuIFdlIGNsYW1wIGl0IHRvIDEgYXMgd2Ugc3RyaWN0bHkgdXNlIGl0IGFzIGEgbXVsdGlwbGllciBmb3IgZ2V0L3NldCBvcGVyYXRpb25zICovXG4gICAgICAgICAgICBhcnJheVNpemU6IGFycmF5U2l6ZSA/IGFycmF5U2l6ZSA6IDEsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMudmVydGV4Q291bnQsXG4gICAgICAgICAgICBidWZmZXJUeXBlOiAoYXR0ciAhPT0gTWVzaEF0dHJpYnV0ZS5Kb2ludElkXG4gICAgICAgICAgICAgICAgPyBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgICAgICA6IFVpbnQxNkFycmF5KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIG1lc2hlcyBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgbWVzaCB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICBtZXNoLmRlc3Ryb3koKTtcbiAgICAgKiAgIG1lc2ggPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQWNjZXNzaW5nIHRoZSBtZXNoIGFmdGVyIGRlc3RydWN0aW9uIGJlaGF2ZXMgbGlrZSBhY2Nlc3NpbmcgYW4gZW1wdHlcbiAgICAgKiBtZXNoLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX21lc2hfZGVzdHJveSh0aGlzLl9pbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgd2hldGhlciB0aGUgd3JhcHBlZCBuYXRpdmUgbWVzaCBpZHMgYXJlXG4gICAgICogZXF1YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXJNZXNoIE1lc2ggdG8gY2hlY2sgZXF1YWxpdHkgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoaXMgbWVzaCBlcXVhbHMgdGhlIGdpdmVuIG1lc2guXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJNZXNoKSB7XG4gICAgICAgIGlmICghb3RoZXJNZXNoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPT09IG90aGVyTWVzaC5faW5kZXg7XG4gICAgfVxufVxuLyoqXG4gKiBBbiBpdGVyYXRvciBvdmVyIGEgbWVzaCB2ZXJ0ZXggYXR0cmlidXRlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJykubWVzaDtcbiAqIGNvbnN0IHBvc2l0aW9ucyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICpcbiAqIC8vIEVxdWl2YWxlbnQgdG8gYG5ldyBGbG9hdDMyQXJyYXkoMylgLlxuICogY29uc3QgdGVtcCA9IHBvc2l0aW9ucy5jcmVhdGVBcnJheSgpO1xuICpcbiAqIGZvcihsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAqICAgICAvLyBgcG9zYCB3aWxsIHJlZmVyZW5jZSBgdGVtcGAgYW5kIHRoZXJlYnkgbm90IGFsbG9jYXRlIGFkZGl0aW9uYWxcbiAqICAgICAvLyBtZW1vcnksIHdoaWNoIHdvdWxkIGNhdXNlIGEgcGVyZiBzcGlrZSB3aGVuIGNvbGxlY3RlZC5cbiAqICAgICBjb25zdCBwb3MgPSBwb3NpdGlvbnMuZ2V0KGksIHRlbXApO1xuICogICAgIC8vIFNjYWxlIHBvc2l0aW9uIGJ5IDIgb24geC1heGlzIG9ubHkuXG4gKiAgICAgcG9zWzBdICo9IDIuMDtcbiAqICAgICBwb3NpdGlvbnMuc2V0KGksIHBvcyk7XG4gKiB9XG4gKiAvLyBXZSdyZSBkb25lIG1vZGlmeWluZywgdGVsbCB0aGUgZW5naW5lIHRvIG1vdmUgdmVydGV4IGRhdGEgdG8gdGhlIEdQVS5cbiAqIG1lc2gudXBkYXRlKCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2hBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgLyoqIE1heCBudW1iZXIgb2YgZWxlbWVudHMuICovXG4gICAgbGVuZ3RoID0gMDtcbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKiBBdHRyaWJ1dGUgaW5kZXguIEBoaWRkZW4gKi9cbiAgICBfYXR0cmlidXRlID0gLTE7XG4gICAgLyoqIEF0dHJpYnV0ZSBvZmZzZXQuIEBoaWRkZW4gKi9cbiAgICBfb2Zmc2V0ID0gMDtcbiAgICAvKiogQXR0cmlidXRlIHN0cmlkZS4gQGhpZGRlbiAqL1xuICAgIF9zdHJpZGUgPSAwO1xuICAgIC8qKiBGb3JtYXQgc2l6ZSBuYXRpdmUgZW51bS4gQGhpZGRlbiAqL1xuICAgIF9mb3JtYXRTaXplID0gMDtcbiAgICAvKiogTnVtYmVyIG9mIGNvbXBvbmVudHMgcGVyIHZlcnRleC4gQGhpZGRlbiAqL1xuICAgIF9jb21wb25lbnRDb3VudCA9IDA7XG4gICAgLyoqIE51bWJlciBvZiB2YWx1ZXMgcGVyIHZlcnRleC4gQGhpZGRlbiAqL1xuICAgIF9hcnJheVNpemUgPSAxO1xuICAgIC8qKlxuICAgICAqIENsYXNzIHRvIGluc3RhbnRpYXRlIGFuIEFycmF5QnVmZmVyIHRvIGdldC9zZXQgdmFsdWVzLlxuICAgICAqL1xuICAgIF9idWZmZXJUeXBlO1xuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGFsbG9jYXRlIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS4gSXQgaXMgY2FjaGVkIGluIHRoZSBhY2Nlc3NvciB0byBhdm9pZFxuICAgICAqIGNvbmRpdGlvbmFscyBkdXJpbmcgZ2V0L3NldC5cbiAgICAgKi9cbiAgICBfdGVtcEJ1ZmZlckdldHRlcjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQbGVhc2UgdXNlIHtAbGluayBNZXNoLmF0dHJpYnV0ZX0gdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRvIHJlYWQgdGhlIGRhdGEuXG4gICAgICogQG5vdGUgRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yLiBJbnN0ZWFkLCBwbGVhc2UgdXNlIHRoZSB7QGxpbmsgTWVzaC5hdHRyaWJ1dGV9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZSA9IG9wdGlvbnMuYXR0cmlidXRlO1xuICAgICAgICB0aGlzLl9vZmZzZXQgPSBvcHRpb25zLm9mZnNldDtcbiAgICAgICAgdGhpcy5fc3RyaWRlID0gb3B0aW9ucy5zdHJpZGU7XG4gICAgICAgIHRoaXMuX2Zvcm1hdFNpemUgPSBvcHRpb25zLmZvcm1hdFNpemU7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudENvdW50ID0gb3B0aW9ucy5jb21wb25lbnRDb3VudDtcbiAgICAgICAgdGhpcy5fYXJyYXlTaXplID0gb3B0aW9ucy5hcnJheVNpemU7XG4gICAgICAgIHRoaXMuX2J1ZmZlclR5cGUgPSBvcHRpb25zLmJ1ZmZlclR5cGU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIgPSAodGhpcy5fYnVmZmVyVHlwZSA9PT0gRmxvYXQzMkFycmF5XG4gICAgICAgICAgICA/IHdhc20uZ2V0VGVtcEJ1ZmZlckYzMi5iaW5kKHdhc20pXG4gICAgICAgICAgICA6IHdhc20uZ2V0VGVtcEJ1ZmZlclUxNi5iaW5kKHdhc20pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFR5cGVkQXJyYXkgdG8gaG9sZCB0aGlzIGF0dHJpYnV0ZSdzIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWZ1bCB0byBjcmVhdGUgYSB2aWV3IHRvIGhvbGQgdGhlIGRhdGEgdG9cbiAgICAgKiBwYXNzIHRvIHtAbGluayBnZXR9IGFuZCB7QGxpbmsgc2V0fVxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgdmVydGV4Q291bnQgPSA0O1xuICAgICAqIGNvbnN0IHBvc2l0aW9uQXR0cmlidXRlID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gICAgICpcbiAgICAgKiAvLyBBIHBvc2l0aW9uIGhhcyAzIGZsb2F0cyBwZXIgdmVydGV4LiBUaHVzLCBwb3NpdGlvbnMgaGFzIGxlbmd0aCAzICogNC5cbiAgICAgKiBjb25zdCBwb3NpdGlvbnMgPSBwb3NpdGlvbkF0dHJpYnV0ZS5jcmVhdGVBcnJheSh2ZXJ0ZXhDb3VudCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKnZlcnRpY2VzKiogZXhwZWN0ZWQuXG4gICAgICogQHJldHVybnMgQSBUeXBlZEFycmF5IHdpdGggdGhlIGFwcHJvcHJpYXRlIGZvcm1hdCB0byBhY2Nlc3MgdGhlIGRhdGFcbiAgICAgKi9cbiAgICBjcmVhdGVBcnJheShjb3VudCA9IDEpIHtcbiAgICAgICAgY291bnQgPSBjb3VudCA+IHRoaXMubGVuZ3RoID8gdGhpcy5sZW5ndGggOiBjb3VudDtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9idWZmZXJUeXBlKGNvdW50ICogdGhpcy5fY29tcG9uZW50Q291bnQgKiB0aGlzLl9hcnJheVNpemUpO1xuICAgIH1cbiAgICBnZXQoaW5kZXgsIG91dCA9IHRoaXMuY3JlYXRlQXJyYXkoKSkge1xuICAgICAgICBpZiAob3V0Lmxlbmd0aCAlIHRoaXMuX2NvbXBvbmVudENvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG91dC5sZW5ndGgsICR7b3V0Lmxlbmd0aH0gaXMgbm90IGEgbXVsdGlwbGUgb2YgdGhlIGF0dHJpYnV0ZSB2ZWN0b3IgY29tcG9uZW50cywgJHt0aGlzLl9jb21wb25lbnRDb3VudH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXN0ID0gdGhpcy5fdGVtcEJ1ZmZlckdldHRlcihvdXQubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLl9idWZmZXJUeXBlLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICBjb25zdCBkZXN0U2l6ZSA9IGVsZW1lbnRTaXplICogb3V0Lmxlbmd0aDtcbiAgICAgICAgY29uc3Qgc3JjRm9ybWF0U2l6ZSA9IHRoaXMuX2Zvcm1hdFNpemUgKiB0aGlzLl9hcnJheVNpemU7XG4gICAgICAgIGNvbnN0IGRlc3RGb3JtYXRTaXplID0gdGhpcy5fY29tcG9uZW50Q291bnQgKiBlbGVtZW50U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX21lc2hfZ2V0X2F0dHJpYnV0ZV92YWx1ZXModGhpcy5fYXR0cmlidXRlLCBzcmNGb3JtYXRTaXplLCB0aGlzLl9vZmZzZXQgKyBpbmRleCAqIHRoaXMuX3N0cmlkZSwgdGhpcy5fc3RyaWRlLCBkZXN0Rm9ybWF0U2l6ZSwgZGVzdC5ieXRlT2Zmc2V0LCBkZXN0U2l6ZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgb3V0W2ldID0gZGVzdFtpXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGF0dHJpYnV0ZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGkgSW5kZXhcbiAgICAgKiBAcGFyYW0gdiBWYWx1ZSB0byBzZXQgdGhlIGVsZW1lbnQgdG9cbiAgICAgKlxuICAgICAqIGB2Lmxlbmd0aGAgbmVlZHMgdG8gYmUgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlcyBjb21wb25lbnQgY291bnQsIHNlZVxuICAgICAqIHtAbGluayBNZXNoQXR0cmlidXRlfS4gSWYgYHYubGVuZ3RoYCBpcyBtb3JlIHRoYW4gb25lIG11bHRpcGxlLCBpdCB3aWxsIGJlXG4gICAgICogZmlsbGVkIHdpdGggdGhlIG5leHQgbiBhdHRyaWJ1dGUgZWxlbWVudHMsIHdoaWNoIGNhbiByZWR1Y2Ugb3ZlcmhlYWRcbiAgICAgKiBvZiB0aGlzIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICBzZXQoaSwgdikge1xuICAgICAgICBpZiAodi5sZW5ndGggJSB0aGlzLl9jb21wb25lbnRDb3VudCAhPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb3V0Lmxlbmd0aCwgJHt2Lmxlbmd0aH0gaXMgbm90IGEgbXVsdGlwbGUgb2YgdGhlIGF0dHJpYnV0ZSB2ZWN0b3IgY29tcG9uZW50cywgJHt0aGlzLl9jb21wb25lbnRDb3VudH1gKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLl9idWZmZXJUeXBlLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICBjb25zdCBzcmNTaXplID0gZWxlbWVudFNpemUgKiB2Lmxlbmd0aDtcbiAgICAgICAgY29uc3Qgc3JjRm9ybWF0U2l6ZSA9IHRoaXMuX2NvbXBvbmVudENvdW50ICogZWxlbWVudFNpemUgKiB0aGlzLl9hcnJheVNpemU7XG4gICAgICAgIGNvbnN0IGRlc3RGb3JtYXRTaXplID0gdGhpcy5fZm9ybWF0U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICAvKiBVbmxlc3Mgd2UgYXJlIGFscmVhZHkgd29ya2luZyB3aXRoIGRhdGEgZnJvbSBXQVNNIGhlYXAsIHdlXG4gICAgICAgICAqIG5lZWQgdG8gY29weSBpbnRvIHRlbXBvcmFyeSBtZW1vcnkuICovXG4gICAgICAgIGlmICh2LmJ1ZmZlciAhPSB3YXNtLkhFQVBVOC5idWZmZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLl90ZW1wQnVmZmVyR2V0dGVyKHYubGVuZ3RoKTtcbiAgICAgICAgICAgIGRlc3Quc2V0KHYpO1xuICAgICAgICAgICAgdiA9IGRlc3Q7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfbWVzaF9zZXRfYXR0cmlidXRlX3ZhbHVlcyh0aGlzLl9hdHRyaWJ1dGUsIHNyY0Zvcm1hdFNpemUsIHYuYnl0ZU9mZnNldCwgc3JjU2l6ZSwgZGVzdEZvcm1hdFNpemUsIHRoaXMuX29mZnNldCArIGkgKiB0aGlzLl9zdHJpZGUsIHRoaXMuX3N0cmlkZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgbWF0ZXJpYWwuXG4gKlxuICogRWFjaCBtYXRlcmlhbCBpbnN0YW5jZSB3aWxsIGhhdmUgcHJvcGVydGllcyBhc3NvY2lhdGVkIHRvIHRoZSBwaXBlbGluZSBpdCB1c2VzLlxuICogVGhlIG1hdGVyaWFsIHByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCBtYXRlcmlhbCBpbnN0YW5jZSwgZXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsOyAvLyBNYXRlcmlhbCB3aXRoIGEgYFBob25nIE9wYXF1ZSBUZXh0dXJlZGAgcGlwZWxpbmVcbiAqIC8vIFlvdSBjYW4gYWNjZXNzIGFsbCB0aGUgbWF0ZXJpYWwgcHJvcGVydGllcyBmcm9tIHRoZSBlZGl0b3IgdXNpbmc6XG4gKiBtYXRlcmlhbC5kaWZmdXNlVGV4dHVyZSA9IG51bGw7XG4gKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBbMS4wLCAwLjAsIDAuMCwgMS4wXTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuICAgIC8qKlxuICAgICAqIEluZGV4IG9mIHRoaXMgbWF0ZXJpYWwgaW4gdGhlIG1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2luZGV4O1xuICAgIC8qKlxuICAgICAqIE1hdGVyaWFsIGRlZmluaXRpb24gaW5kZXggaW4gdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZWZpbml0aW9uO1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IE1hdGVyaWFsLlxuICAgICAqXG4gICAgICogQG5vdGUgQ3JlYXRpbmcgbWF0ZXJpYWwgaXMgZXhwZW5zaXZlLiBQbGVhc2UgdXNlIHtAbGluayBNYXRlcmlhbCNjbG9uZX0gdG8gY2xvbmUgYSBtYXRlcmlhbC5cbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkgd2l0aCBhbiBpbmRleCwgdGhpcyBpcyByZXNlcnZlZCBmb3IgaW50ZXJuYWwgcHVycG9zZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zPy5waXBlbGluZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAncGlwZWxpbmUnXCIpO1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBwYXJhbXMucGlwZWxpbmU7XG4gICAgICAgICAgICB0aGlzLl9pbmRleCA9IHdhc20uX3dsX21hdGVyaWFsX2NyZWF0ZSh3YXNtLnRlbXBVVEY4KHBpcGVsaW5lKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5faW5kZXggPCAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBwaXBlbGluZSAnJHtwaXBlbGluZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbmRleCA9IHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kZWZpbml0aW9uID0gdGhpcy5fZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2dldF9kZWZpbml0aW9uKHRoaXMuX2luZGV4KTtcbiAgICAgICAgaWYgKCF0aGlzLl9lbmdpbmUud2FzbS5fbWF0ZXJpYWxEZWZpbml0aW9uc1t0aGlzLl9kZWZpbml0aW9uXSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWF0ZXJpYWwgRGVmaW5pdGlvbiAke3RoaXMuX2RlZmluaXRpb259IG5vdCBmb3VuZCBmb3IgbWF0ZXJpYWwgd2l0aCBpbmRleCAke3RoaXMuX2luZGV4fWApO1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHRoaXMsIHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3YXNtID0gZW5naW5lLndhc207XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHdhc20uX21hdGVyaWFsRGVmaW5pdGlvbnNbdGFyZ2V0Ll9kZWZpbml0aW9uXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IGRlZmluaXRpb24uZ2V0KHByb3ApO1xuICAgICAgICAgICAgICAgIGlmICghcGFyYW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0YXJnZXQuX2luZGV4LCBwYXJhbS5pbmRleCwgd2FzbS5fdGVtcE1lbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHBhcmFtLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlVuc2lnbmVkSW50OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlLmNvbXBvbmVudENvdW50ID09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB3YXNtLl90ZW1wTWVtVWludDMyWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IFVpbnQzMkFycmF5KHdhc20uSEVBUFUzMi5idWZmZXIsIHdhc20uX3RlbXBNZW0sIHR5cGUuY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5JbnQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGUuY29tcG9uZW50Q291bnQgPT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHdhc20uX3RlbXBNZW1JbnRbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgSW50MzJBcnJheSh3YXNtLkhFQVAzMi5idWZmZXIsIHdhc20uX3RlbXBNZW0sIHR5cGUuY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5GbG9hdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZS5jb21wb25lbnRDb3VudCA9PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gd2FzbS5fdGVtcE1lbUZsb2F0WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl90ZW1wTWVtLCB0eXBlLmNvbXBvbmVudENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuU2FtcGxlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5naW5lLnRleHR1cmVzLndyYXAod2FzbS5fdGVtcE1lbUludFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0eXBlICR7dHlwZS50eXBlfSBvbiBwYXJhbWV0ZXIgJHtwYXJhbS5pbmRleH0gZm9yIG1hdGVyaWFsICR7dGFyZ2V0Ll9pbmRleH1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdhc20gPSBlbmdpbmUud2FzbTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gd2FzbS5fbWF0ZXJpYWxEZWZpbml0aW9uc1t0YXJnZXQuX2RlZmluaXRpb25dO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gZGVmaW5pdGlvbi5nZXQocHJvcCk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBwYXJhbS50eXBlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuSW50OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlNhbXBsZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gdmFsdWUuaWQgPz8gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfdWludCh0YXJnZXQuX2luZGV4LCBwYXJhbS5pbmRleCwgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5GbG9hdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbaV0gPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV9mbG9hdCh0YXJnZXQuX2luZGV4LCBwYXJhbS5pbmRleCwgd2FzbS5fdGVtcE1lbSwgY291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRm9udDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2V0dGluZyBmb250IHByb3BlcnRpZXMgaXMgY3VycmVudGx5IHVuc3VwcG9ydGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjcGlwZWxpbmV9IGluc3RlYWQuICovXG4gICAgZ2V0IHNoYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZWxpbmU7XG4gICAgfVxuICAgIC8qKiBOYW1lIG9mIHRoZSBwaXBlbGluZSB1c2VkIGJ5IHRoaXMgbWF0ZXJpYWwuICovXG4gICAgZ2V0IHBpcGVsaW5lKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGlwZWxpbmUodGhpcy5faW5kZXgpKTtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvcHkgb2YgdGhlIHVuZGVybHlpbmcgbmF0aXZlIG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTWF0ZXJpYWwgY2xvbmUuXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5fZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2Nsb25lKHRoaXMuX2luZGV4KTtcbiAgICAgICAgcmV0dXJuIGlkID4gMCA/IG5ldyBNYXRlcmlhbCh0aGlzLl9lbmdpbmUsIGlkKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgd2hldGhlciB0aGUgd3JhcHBlZCBuYXRpdmUgbWF0ZXJpYWwgaWRzIGFyZVxuICAgICAqIGVxdWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyTWF0ZXJpYWwgTWF0ZXJpYWwgdG8gY2hlY2sgZXF1YWxpdHkgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoaXMgbWF0ZXJpYWwgZXF1YWxzIHRoZSBnaXZlbiBtYXRlcmlhbC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlck1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghb3RoZXJNYXRlcmlhbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4ID09PSBvdGhlck1hdGVyaWFsLl9pbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JhcCBhIG5hdGl2ZSBtYXRlcmlhbCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmdpbmUgRW5naW5lIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXguXG4gICAgICogQHJldHVybnMgTWF0ZXJpYWwgaW5zdGFuY2Ugb3IgYG51bGxgIGlmIGluZGV4IDw9IDAuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXcgTWF0ZXJpYWwoKWAgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgd3JhcChlbmdpbmUsIGluZGV4KSB7XG4gICAgICAgIC8qKiBAdG9kbzogdGhpcyBwcm9wYWdhdGUgbnVsbGFibGUgaW4gdGhlIGVudGlyZSBjb2RlYmFzZS4gUmVtb3ZlLiAqL1xuICAgICAgICByZXR1cm4gaW5kZXggPiAwID8gbmV3IE1hdGVyaWFsKGVuZ2luZSwgaW5kZXgpIDogbnVsbDtcbiAgICB9XG59XG4vKiogVGVtcG9yYXJ5IGNhbnZhcyAqL1xubGV0IHRlbXAyZCA9IG51bGw7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIHRleHR1cmUgZGF0YS5cbiAqL1xuZXhwb3J0IGNsYXNzIFRleHR1cmUge1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqIEluZGV4IGluIHRoZSBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgX2lkID0gMDtcbiAgICAvKiogSFRNTCBpbWFnZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9pbWFnZUluZGV4ID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gcGFyYW0gSFRNTCBtZWRpYSBlbGVtZW50IHRvIGNyZWF0ZSB0ZXh0dXJlIGZyb20gb3IgdGV4dHVyZSBpZCB0byB3cmFwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgcGFyYW0pIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lID8/IFdMO1xuICAgICAgICBjb25zdCB3YXNtID0gZW5naW5lLndhc207XG4gICAgICAgIGlmIChwYXJhbSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgfHxcbiAgICAgICAgICAgIHBhcmFtIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCB8fFxuICAgICAgICAgICAgcGFyYW0gaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl9pbWFnZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2FzbS5faW1hZ2VzLnB1c2gocGFyYW0pO1xuICAgICAgICAgICAgdGhpcy5faW1hZ2VJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5faWQgPSB0aGlzLl9lbmdpbmUud2FzbS5fd2xfcmVuZGVyZXJfYWRkSW1hZ2UoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faWQgPSBwYXJhbTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbmdpbmUudGV4dHVyZXMuX3NldCh0aGlzKTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0ZXh0dXJlIGlzIHZhbGlkLiAqL1xuICAgIGdldCB2YWxpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkID49IDA7XG4gICAgfVxuICAgIC8qKiBJbmRleCBpbiB0aGlzIG1hbmFnZXIuICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfVxuICAgIC8qKiBVcGRhdGUgdGhlIHRleHR1cmUgdG8gbWF0Y2ggdGhlIEhUTUwgZWxlbWVudCAoZS5nLiByZWZsZWN0IHRoZSBjdXJyZW50IGZyYW1lIG9mIGEgdmlkZW8pLiAqL1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkIHx8IHRoaXMuX2ltYWdlSW5kZXggPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9yZW5kZXJlcl91cGRhdGVJbWFnZSh0aGlzLl9pZCwgdGhpcy5faW1hZ2VJbmRleCk7XG4gICAgfVxuICAgIC8qKiBXaWR0aCBvZiB0aGUgdGV4dHVyZS4gKi9cbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfdGV4dHVyZV93aWR0aCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBIZWlnaHQgb2YgdGhlIHRleHR1cmUuICovXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF90ZXh0dXJlX2hlaWdodCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSBzdWJyYW5nZSBvbiB0aGUgdGV4dHVyZSB0byBtYXRjaCB0aGUgSFRNTCBlbGVtZW50IChlLmcuIHJlZmxlY3QgdGhlIGN1cnJlbnQgZnJhbWUgb2YgYSB2aWRlbykuXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ29waWVzIHJlY3RhbmdsZSBvZiBwaXhlbCBzdGFydGluZyBmcm9tICgxMCwgMjApXG4gICAgICogdGV4dHVyZS51cGRhdGVTdWJJbWFnZSgxMCwgMjAsIDYwMCwgNDAwKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IHggb2Zmc2V0XG4gICAgICogQHBhcmFtIHkgeSBvZmZzZXRcbiAgICAgKiBAcGFyYW0gdyB3aWR0aFxuICAgICAqIEBwYXJhbSBoIGhlaWdodFxuICAgICAqL1xuICAgIHVwZGF0ZVN1YkltYWdlKHgsIHksIHcsIGgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkIHx8IHRoaXMuX2ltYWdlSW5kZXggPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8qIExhenkgaW5pdGlhbGl6ZSB0ZW1wIGNhbnZhcyAqL1xuICAgICAgICBpZiAoIXRlbXAyZCkge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXh0dXJlLnVwZGF0ZVN1YkltYWdlKCk6IEZhaWxlZCB0byBvYnRhaW4gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGVtcDJkID0ge1xuICAgICAgICAgICAgICAgIGNhbnZhcyxcbiAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW1nID0gd2FzbS5faW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdO1xuICAgICAgICBpZiAoIWltZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGVtcDJkLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgICAgIHRlbXAyZC5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICAgICAgdGVtcDJkLmN0eC5kcmF3SW1hZ2UoaW1nLCB4LCB5LCB3LCBoLCAwLCAwLCB3LCBoKTtcbiAgICAgICAgY29uc3QgeU9mZnNldCA9IChpbWcudmlkZW9IZWlnaHQgPz8gaW1nLmhlaWdodCkgLSB5IC0gaDtcbiAgICAgICAgd2FzbS5faW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdID0gdGVtcDJkLmNhbnZhcztcbiAgICAgICAgd2FzbS5fd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2UodGhpcy5faWQsIHRoaXMuX2ltYWdlSW5kZXgsIHgsIHlPZmZzZXQpO1xuICAgICAgICB3YXNtLl9pbWFnZXNbdGhpcy5faW1hZ2VJbmRleF0gPSBpbWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIHRleHR1cmUncyB0ZXh0dXJlIGFsdGFzIHNwYWNlIGFuZCBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgdGV4dHVyZSB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZSBvZiB0aGUgaW52YWxpZCB0ZXh0dXJlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIHRleHR1cmUuZGVzdHJveSgpO1xuICAgICAqICAgdGV4dHVyZSA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5fZGVzdHJveVRleHR1cmUodGhpcyk7XG4gICAgICAgIHRoaXMuX2lkID0gLTE7XG4gICAgICAgIHRoaXMuX2ltYWdlSW5kZXggPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIHdoZXRoZXIgdGhlIHdyYXBwZWQgbmF0aXZlIHRleHR1cmUgaWRzIGFyZVxuICAgICAqIGVxdWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyVGV4dHVyZSBUZXh0dXJlIHRvIGNoZWNrIGVxdWFsaXR5IHdpdGguXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGlzIHRleHR1cmUgZXF1YWxzIHRoZSBnaXZlbiB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyVGV4dHVyZSkge1xuICAgICAgICBpZiAoIW90aGVyVGV4dHVyZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkID09PSBvdGhlclRleHR1cmUuX2lkO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgYW5pbWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uIHtcbiAgICAvKiogSW5kZXggb2YgdGhlIG1lc2ggaW4gdGhlIG1hbmFnZXIuIEBoaWRkZW4gKi9cbiAgICBfaW5kZXg7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggaW4gdGhlIG1hbmFnZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUgPSBXTCwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICAgIH1cbiAgICAvKiogRHVyYXRpb24gb2YgdGhpcyBhbmltYXRpb24uICovXG4gICAgZ2V0IGR1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9nZXRfZHVyYXRpb24odGhpcy5faW5kZXgpO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIHRyYWNrcyBpbiB0aGlzIGFuaW1hdGlvbi4gKi9cbiAgICBnZXQgdHJhY2tDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9hbmltYXRpb25fZ2V0X3RyYWNrQ291bnQodGhpcy5faW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIGFuaW1hdGlvbiByZXRhcmdldGVkIHRvIGEgbmV3IHNldCBvZiBvYmplY3RzLlxuICAgICAqXG4gICAgICogVGhlIGNsb25lIHNoYXJlcyBtb3N0IG9mIHRoZSBkYXRhIHdpdGggdGhlIG9yaWdpbmFsIGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgKiBsaWdodC13ZWlnaHQuXG4gICAgICpcbiAgICAgKiAqKkV4cGVyaW1lbnRhbDoqKiBUaGlzIEFQSSBtaWdodCBjaGFuZ2UgaW4gdXBjb21pbmcgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBJZiByZXRhcmdldGluZyB0byB7QGxpbmsgU2tpbn0sIHRoZSBqb2luIG5hbWVzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgYSBtYXBwaW5nXG4gICAgICogZnJvbSB0aGUgcHJldmlvdXMgc2tpbiB0byB0aGUgbmV3IHNraW4uIFRoZSBzb3VyY2Ugc2tpbiB3aWxsIGJlIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIGZpcnN0IHRyYWNrIGluIHRoZSBhbmltYXRpb24gdGhhdCB0YXJnZXRzIGEgam9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3VGFyZ2V0cyBOZXcgdGFyZ2V0cyBwZXIgdHJhY2suIEV4cGVjdGVkIHRvIGhhdmVcbiAgICAgKiAgICAgIHtAbGluayBBbmltYXRpb24jdHJhY2tDb3VudH0gZWxlbWVudHMgb3IgdG8gYmUgYSB7QGxpbmsgU2tpbn0uXG4gICAgICogQHJldHVybnMgVGhlIHJldGFyZ2V0ZWQgY2xvbmUgb2YgdGhpcyBhbmltYXRpb24uXG4gICAgICovXG4gICAgcmV0YXJnZXQobmV3VGFyZ2V0cykge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGlmIChuZXdUYXJnZXRzIGluc3RhbmNlb2YgU2tpbikge1xuICAgICAgICAgICAgY29uc3QgYW5pbUlkID0gd2FzbS5fd2xfYW5pbWF0aW9uX3JldGFyZ2V0VG9Ta2luKHRoaXMuX2luZGV4LCBuZXdUYXJnZXRzLl9pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFuaW1hdGlvbih0aGlzLl9lbmdpbmUsIGFuaW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1RhcmdldHMubGVuZ3RoICE9IHRoaXMudHJhY2tDb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0V4cGVjdGVkICcgK1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tDb3VudC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAnIHRhcmdldHMsIGJ1dCBnb3QgJyArXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0cy5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fbWFsbG9jKDIgKiBuZXdUYXJnZXRzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3VGFyZ2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgd2FzbS5IRUFQVTE2W3B0ciA+PiAoMSArIGkpXSA9IG5ld1RhcmdldHNbaV0ub2JqZWN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5pbUlkID0gd2FzbS5fd2xfYW5pbWF0aW9uX3JldGFyZ2V0KHRoaXMuX2luZGV4LCBwdHIpO1xuICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgIHJldHVybiBuZXcgQW5pbWF0aW9uKHRoaXMuX2VuZ2luZSwgYW5pbUlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyB3aGV0aGVyIHRoZSB3cmFwcGVkIG5hdGl2ZSBhbmltYXRpb24gaWRzXG4gICAgICogYXJlIGVxdWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyQW5pbWF0aW9uIEFuaW1hdGlvbiB0byBjaGVjayBlcXVhbGl0eSB3aXRoLlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBhbmltYXRpb24gZXF1YWxzIHRoZSBnaXZlbiBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJBbmltYXRpb24pIHtcbiAgICAgICAgaWYgKCFvdGhlckFuaW1hdGlvbilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4ID09PSBvdGhlckFuaW1hdGlvbi5faW5kZXg7XG4gICAgfVxufVxuLyoqXG4gKiBTY2VuZSBncmFwaCBvYmplY3QuXG4gKlxuICogTm9kZSBpbiB0aGUgc2NlbmUgZ3JhcGggb3IgXCJlbnRpdHlcIi4gQ29uc2lzdHMgb2YgdHJhbnNmb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlXG4gKiB0byBpdHMgcGFyZW50IG9iamVjdC4gVXN1YWxseSBob2xkcyBjb21wb25lbnRzIGFuZCBpcyBhY2Nlc3NpYmxlIGJ5IGNvbXBvbmVudHNcbiAqIHRocm91Z2gge0BsaW5rIENvbXBvbmVudCNvYmplY3R9LlxuICpcbiAqIE9iamVjdHMgYXJlIHN0b3JlZCBpbiBhIGRhdGEgb3JpZW50ZWQgbWFubmVyIGluc2lkZSBXZWJBc3NlbWJseSBtZW1vcnkuIFRoaXMgY2xhc3NcbiAqIGlzIGEgSmF2YVNjcmlwdCBBUEkgd3JhcHBlciBhcm91bmQgdGhpcyBtZW1vcnkgZm9yIG1vcmUgY29udmVuaWVudCB1c2UgaW5cbiAqIGNvbXBvbmVudHMuXG4gKlxuICogT2JqZWN0cyBjYW4gYmUgY3JlYXRlZCBhbmQgYWRkZWQgdG8gYSBzY2VuZSB0aHJvdWdoXG4gKiB7QGxpbmsgU2NlbmUjYWRkT2JqZWN0fSBvbiB0aGUge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc2NlbmV9LlxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0M0Qge1xuICAgIC8qKlxuICAgICAqIE9iamVjdCBpbmRleCBpbiB0aGUgbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfb2JqZWN0SWQgPSAtMTtcbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBvIE9iamVjdCBpZCB0byB3cmFwXG4gICAgICpcbiAgICAgKiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgcGxlYXNlIHVzZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS53cmFwT2JqZWN0fVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgbykge1xuICAgICAgICB0aGlzLl9vYmplY3RJZCA9IG87XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogVXNlZnVsIGZvciBpZGVudGlmeWluZyBvYmplY3RzIGR1cmluZyBkZWJ1Z2dpbmcuXG4gICAgICovXG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX29iamVjdF9uYW1lKHRoaXMub2JqZWN0SWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvYmplY3QncyBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld05hbWUgVGhlIG5ldyBuYW1lIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXQgbmFtZShuZXdOYW1lKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3NldF9uYW1lKHRoaXMub2JqZWN0SWQsIHdhc20udGVtcFVURjgobmV3TmFtZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJlbnQgb2YgdGhpcyBvYmplY3Qgb3IgYG51bGxgIGlmIHBhcmVudGVkIHRvIHJvb3QuXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcGFyZW50KHRoaXMub2JqZWN0SWQpO1xuICAgICAgICByZXR1cm4gcCA9PT0gMCA/IG51bGwgOiB0aGlzLl9lbmdpbmUud3JhcE9iamVjdChwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hpbGRyZW4gb2YgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBDaGlsZCBvcmRlciBpcyAqKnVuZGVmaW5lZCoqLiBObyBhc3N1bXB0aW9ucyBzaG91bGQgYmUgbWFkZVxuICAgICAqIGFib3V0IHRoZSBpbmRleCBvZiBhIHNwZWNpZmljIG9iamVjdC5cbiAgICAgKlxuICAgICAqIElmIHlvdSBuZWVkIHRvIGFjY2VzcyBhIHNwZWNpZmljIGNoaWxkIG9mIHRoaXMgb2JqZWN0LCB5b3UgY2FuXG4gICAgICogdXNlIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lfS5cbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIG9iamVjdCBleGlzdHMgaW4gdGhlIHNjZW5lIGF0IGVkaXRvciB0aW1lLCBwcmVmZXIgcGFzc2luZyBpdCBhc1xuICAgICAqIGEgY29tcG9uZW50IHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBjaGlsZHJlbigpIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW5Db3VudCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfZ2V0X2NoaWxkcmVuX2NvdW50KHRoaXMub2JqZWN0SWQpO1xuICAgICAgICBpZiAoY2hpbGRyZW5Db3VudCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLnJlcXVpcmVUZW1wTWVtKGNoaWxkcmVuQ291bnQgKiAyKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW4odGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSwgd2FzbS5fdGVtcE1lbVNpemUgPj4gMSk7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbmV3IEFycmF5KGNoaWxkcmVuQ291bnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgY2hpbGRyZW5baV0gPSB0aGlzLl9lbmdpbmUud3JhcE9iamVjdCh3YXNtLl90ZW1wTWVtVWludDE2W2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGFyZW50IG9iamVjdCB0byBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBSZXBhcmVudGluZyBpcyBub3QgdHJpdmlhbCBhbmQgbWlnaHQgaGF2ZSBhIG5vdGljZWFibGUgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld1BhcmVudCBOZXcgcGFyZW50IG9yIGBudWxsYCB0byBwYXJlbnQgdG8gcm9vdFxuICAgICAqL1xuICAgIHNldCBwYXJlbnQobmV3UGFyZW50KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3BhcmVudCh0aGlzLm9iamVjdElkLCBuZXdQYXJlbnQgPT0gbnVsbCA/IDAgOiBuZXdQYXJlbnQub2JqZWN0SWQpO1xuICAgIH1cbiAgICAvKiogT2JqZWN0IGluZGV4IGluIHRoZSBtYW5hZ2VyLiAqL1xuICAgIGdldCBvYmplY3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29iamVjdElkO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmUgdGhpcyBoaWVyYXJjaHkgaW50byBhIG5ldyBvbmUuXG4gICAgICpcbiAgICAgKiBDbG9uaW5nIGNvcGllcyB0aGUgaGllcmFyY2h5IHN0cnVjdHVyZSwgb2JqZWN0IG5hbWVzLFxuICAgICAqIGFzIHdlbGwgYXMgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEphdmFTY3JpcHQgY29tcG9uZW50cyBhcmUgY2xvbmVkIHVzaW5nIHtAbGluayBDb21wb25lbnQuY29weX0uIFlvdSBjYW5cbiAgICAgKiBvdmVycmlkZSB0aGlzIG1ldGhvZCBpbiB5b3VyIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgZm9yIHRoZSBjbG9uZWQgaGllcmFyY2h5LiBEZWZhdWx0c1xuICAgICAqICAgICB0byB0aGUgc2NlbmUgcm9vdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjbG9uZSBvZiB0aGlzIG9iamVjdC5cbiAgICAgKi9cbiAgICBjbG9uZShwYXJlbnQpIHtcbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fZW5naW5lO1xuICAgICAgICBjb25zdCBpZCA9IGVuZ2luZS53YXNtLl93bF9vYmplY3RfY2xvbmUodGhpcy5fb2JqZWN0SWQsIHBhcmVudD8uX29iamVjdElkID8/IDApO1xuICAgICAgICByZXR1cm4gZW5naW5lLndyYXBPYmplY3QoaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCB0cmFuc2Zvcm1hdGlvbiAodHJhbnNsYXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nKSB0byBpZGVudGl0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFRyYW5zZm9ybSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbl9yb3RhdGlvbih0aGlzLm9iamVjdElkKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9zY2FsaW5nKHRoaXMub2JqZWN0SWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIGlkZW50aXR5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UG9zaXRpb25Sb3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbl9yb3RhdGlvbih0aGlzLm9iamVjdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yZXNldFBvc2l0aW9uUm90YXRpb259IGluc3RlYWQuICovXG4gICAgcmVzZXRUcmFuc2xhdGlvblJvdGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgcm90YXRpb24sIGtlZXAgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUbyByZXNldCBib3RoIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiwgcHJlZmVyXG4gICAgICogICAgICAge0BsaW5rIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRSb3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9yb3RhdGlvbih0aGlzLm9iamVjdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHRyYW5zbGF0aW9uLCBrZWVwIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgVG8gcmVzZXQgYm90aCByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIHByZWZlclxuICAgICAqICAgICAgIHtAbGluayByZXNldFRyYW5zbGF0aW9uUm90YXRpb259LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UG9zaXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb24odGhpcy5vYmplY3RJZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QucmVzZXRQb3NpdGlvbn0gaW5zdGVhZC4gKi9cbiAgICByZXNldFRyYW5zbGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFBvc2l0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHNjYWxpbmcgdG8gaWRlbnRpdHkgKGBgWzEuMCwgMS4wLCAxLjBdYGApLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0U2NhbGluZygpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9zY2FsaW5nKHRoaXMub2JqZWN0SWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnRyYW5zbGF0ZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHRyYW5zbGF0ZSh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZUxvY2FsKHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIHRoZSBwYXJlbnQncyBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2xhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgdHJhbnNsYXRlTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zbGF0ZSh0aGlzLm9iamVjdElkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBvYmplY3QgYnkgYSB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zbGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB0cmFuc2xhdGVPYmplY3Qodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zbGF0ZV9vYmoodGhpcy5vYmplY3RJZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIHdvcmxkIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zbGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB0cmFuc2xhdGVXb3JsZCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlX3dvcmxkKHRoaXMub2JqZWN0SWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUF4aXNBbmdsZURlZ0xvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZURlZyhhLCBkKSB7XG4gICAgICAgIHRoaXMucm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoYSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlIG9iamVjdCBpcyB0cmFuc2xhdGVkIHRoZSByb3RhdGlvbiB3aWxsIGJlIGFyb3VuZFxuICAgICAqICAgICB0aGUgcGFyZW50LiBUbyByb3RhdGUgYXJvdW5kIHRoZSBvYmplY3Qgb3JpZ2luLCB1c2VcbiAgICAgKiAgICAge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZVJhZH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWdMb2NhbChhLCBkKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGUodGhpcy5vYmplY3RJZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Qucm90YXRlQXhpc0FuZ2xlUmFkTG9jYWx9IGluc3RlYWQuICovXG4gICAgcm90YXRlQXhpc0FuZ2xlUmFkKGEsIGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRlQXhpc0FuZ2xlUmFkTG9jYWwoYSwgZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBhcm91bmQgZ2l2ZW4gYXhpcyBieSBnaXZlbiBhbmdsZSAocmFkaWFucykgaW4gbG9jYWwgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSBWZWN0b3IgcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbiBheGlzLlxuICAgICAqIEBwYXJhbSBkIEFuZ2xlIGluIHJhZGlhbnMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBJZiB0aGUgb2JqZWN0IGlzIHRyYW5zbGF0ZWQgdGhlIHJvdGF0aW9uIHdpbGwgYmUgYXJvdW5kXG4gICAgICogICAgIHRoZSBwYXJlbnQuIFRvIHJvdGF0ZSBhcm91bmQgdGhlIG9iamVjdCBvcmlnaW4sIHVzZVxuICAgICAqICAgICB7QGxpbmsgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0fVxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgcm90YXRlQXhpc0FuZ2xlRGVnfVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKGEsIGQpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9yYWQodGhpcy5vYmplY3RJZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVSYWRPYmplY3R9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0KGEsIGQpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9vYmoodGhpcy5vYmplY3RJZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKHJhZGlhbnMpIGluIG9iamVjdCBzcGFjZVxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSBWZWN0b3IgcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbiBheGlzXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlc1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0fVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChhLCBkKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfcmFkX29iaih0aGlzLm9iamVjdElkLCBhWzBdLCBhWzFdLCBhWzJdLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGUocSkge1xuICAgICAgICB0aGlzLnJvdGF0ZUxvY2FsKHEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm90YXRlIGJ5IGEgcXVhdGVybmlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxIHRoZSBRdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVMb2NhbChxKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX3F1YXQodGhpcy5vYmplY3RJZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYnkgYSBxdWF0ZXJuaW9uIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcSB0aGUgUXVhdGVybmlvbiB0byByb3RhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlT2JqZWN0KHEpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfcXVhdF9vYmoodGhpcy5vYmplY3RJZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2NhbGVMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICBzY2FsZSh2KSB7XG4gICAgICAgIHRoaXMuc2NhbGVMb2NhbCh2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjYWxlIG9iamVjdCBieSBhIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gc2NhbGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2NhbGVMb2NhbCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2NhbGUodGhpcy5vYmplY3RJZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRQb3NpdGlvbkxvY2FsKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICAvKiBUcmFuc2xhdGlvbiBpcyBkaWZmZXJlbnQgdGhhbiByb3RhdGlvbiAmIHNjYWxpbmcuXG4gICAgICAgICAqIFdlIGNhbid0IHNpbXBseSByZWFkIHRoZSBtZW1vcnkuICovXG4gICAgICAgIHdhc20uX3dsX29iamVjdF9nZXRfdHJhbnNsYXRpb25fbG9jYWwodGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldFRyYW5zbGF0aW9uTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbkxvY2FsKG91dCk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFRyYW5zbGF0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHJvdGF0aW9uICYgc2NhbGluZy5cbiAgICAgICAgICogV2UgY2FuJ3Qgc2ltcGx5IHJlYWQgdGhlIG1lbW9yeS4gKi9cbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl93b3JsZCh0aGlzLm9iamVjdElkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZ2V0VHJhbnNsYXRpb25Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uV29ybGQob3V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIC8gb2JqZWN0IHNwYWNlIHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQ29uY2F0ZW5hdGVzIGEgbmV3IHRyYW5zbGF0aW9uIGR1YWwgcXVhdGVybmlvbiBvbnRvIHRoZSBleGlzdGluZyByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBsb2NhbCBwb3NpdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbkxvY2FsKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfdHJhbnNsYXRpb25fbG9jYWwodGhpcy5vYmplY3RJZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0UG9zaXRpb25Mb2NhbH0gaW5zdGVhZC4gKi9cbiAgICBzZXRUcmFuc2xhdGlvbkxvY2FsKHYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0UG9zaXRpb25Mb2NhbCh2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQXBwbGllcyB0aGUgaW52ZXJzZSBwYXJlbnQgdHJhbnNmb3JtIHdpdGggYSBuZXcgdHJhbnNsYXRpb24gZHVhbCBxdWF0ZXJuaW9uXG4gICAgICogd2hpY2ggaXMgY29uY2F0ZW5hdGVkIG9udG8gdGhlIGV4aXN0aW5nIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHBvc2l0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFBvc2l0aW9uV29ybGQodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF90cmFuc2xhdGlvbl93b3JsZCh0aGlzLm9iamVjdElkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRQb3NpdGlvbldvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIHNldFRyYW5zbGF0aW9uV29ybGQodikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQb3NpdGlvbldvcmxkKHYpO1xuICAgIH1cbiAgICBnZXRTY2FsaW5nTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsKHRoaXMub2JqZWN0SWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIC8gb2JqZWN0IHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbG9jYWwgc2NhbGluZyBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRTY2FsaW5nTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9zY2FsaW5nX2xvY2FsKHRoaXMub2JqZWN0SWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0U2NhbGluZ1dvcmxkKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ193b3JsZCh0aGlzLm9iamVjdElkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHNjYWxpbmcgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0U2NhbGluZ1dvcmxkKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfc2NhbGluZ193b3JsZCh0aGlzLm9iamVjdElkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFJvdGF0aW9uTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLm9iamVjdElkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICAvKiBUaGUgZmlyc3QgNCBmbG9hdHMgcmVwcmVzZW50IHRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uLiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHJvdGF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFJvdGF0aW9uTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9yb3RhdGlvbl9sb2NhbCh0aGlzLm9iamVjdElkLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFJvdGF0aW9uV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLm9iamVjdElkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICAvKiBUaGUgZmlyc3QgNCBmbG9hdHMgcmVwcmVzZW50IHRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uLiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHJvdGF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFJvdGF0aW9uV29ybGQodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9yb3RhdGlvbl93b3JsZCh0aGlzLm9iamVjdElkLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFRyYW5zZm9ybUxvY2FsKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoOCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5vYmplY3RJZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIG91dFs0XSA9IHdhc20uSEVBUEYzMltwdHIgKyA0XTtcbiAgICAgICAgb3V0WzVdID0gd2FzbS5IRUFQRjMyW3B0ciArIDVdO1xuICAgICAgICBvdXRbNl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNl07XG4gICAgICAgIG91dFs3XSA9IHdhc20uSEVBUEYzMltwdHIgKyA3XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHRyYW5zZm9ybSBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybUxvY2FsKHYpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5vYmplY3RJZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSB2WzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgM10gPSB2WzNdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNF0gPSB2WzRdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNV0gPSB2WzVdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNl0gPSB2WzZdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgN10gPSB2WzddO1xuICAgICAgICB0aGlzLnNldERpcnR5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRUcmFuc2Zvcm1Xb3JsZChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDgpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMub2JqZWN0SWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICBvdXRbNF0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uSEVBUEYzMltwdHIgKyA1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5IRUFQRjMyW3B0ciArIDZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLkhFQVBGMzJbcHRyICsgN107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCB0cmFuc2Zvcm0gYXJyYXksIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgOCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRUcmFuc2Zvcm1Xb3JsZCh2KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMub2JqZWN0SWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gdlswXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDNdID0gdlszXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDRdID0gdls0XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDVdID0gdls1XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDZdID0gdls2XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDddID0gdls3XTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc193b3JsZF90b19sb2NhbCh0aGlzLm9iamVjdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNmb3JtTG9jYWwoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMub2JqZWN0SWQpLCA4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybUxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCB0cmFuc2Zvcm1Mb2NhbCh0KSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtTG9jYWwuc2V0KHQpO1xuICAgICAgICB0aGlzLnNldERpcnR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogTWF5IHJlY29tcHV0ZSB0cmFuc2Zvcm1hdGlvbnMgb2YgdGhlIGhpZXJhcmNoeSBvZiB0aGlzIG9iamVjdCxcbiAgICAgKiBpZiB0aGV5IHdlcmUgY2hhbmdlZCBieSBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhpcyBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybVdvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHRyYW5zZm9ybVdvcmxkKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLm9iamVjdElkKSwgOCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBHbG9iYWwgLyB3b3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgdHJhbnNmb3JtV29ybGQodCkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVdvcmxkLnNldCh0KTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc193b3JsZF90b19sb2NhbCh0aGlzLm9iamVjdElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9jYWwgLyBvYmplY3Qgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdMb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdMb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgc2NhbGluZ0xvY2FsKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsKHRoaXMub2JqZWN0SWQpLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcyBMb2NhbCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHNjYWxpbmdMb2NhbChzKSB7XG4gICAgICAgIHRoaXMuc2NhbGluZ0xvY2FsLnNldChzKTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogTWF5IHJlY29tcHV0ZSB0cmFuc2Zvcm1hdGlvbnMgb2YgdGhlIGhpZXJhcmNoeSBvZiB0aGlzIG9iamVjdCxcbiAgICAgKiBpZiB0aGV5IHdlcmUgY2hhbmdlZCBieSBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhpcyBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdXb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdXb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgc2NhbGluZ1dvcmxkKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkKHRoaXMub2JqZWN0SWQpLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHNjYWxpbmdXb3JsZChzKSB7XG4gICAgICAgIHRoaXMuc2NhbGluZ1dvcmxkLnNldChzKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkX3RvX2xvY2FsKHRoaXMub2JqZWN0SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uTG9jYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUxvY2FsLnN1YmFycmF5KDAsIDQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSByb3RhdGlvblxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbldvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb25Xb3JsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtV29ybGQuc3ViYXJyYXkoMCwgNCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIExvY2FsIHNwYWNlIHJvdGF0aW9uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFJvdGF0aW9uTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5zZXRSb3RhdGlvbkxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCByb3RhdGlvbkxvY2FsKHIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWwodGhpcy5vYmplY3RJZCwgclswXSwgclsxXSwgclsyXSwgclszXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbldvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25Xb3JsZChyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX3dvcmxkKHRoaXMub2JqZWN0SWQsIHJbMF0sIHJbMV0sIHJbMl0sIHJbM10pO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Rm9yd2FyZFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldEZvcndhcmQob3V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZvcndhcmRXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyBmb3J3YXJkIGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBUaGUgZm9yd2FyZCB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlIGlzIGFsb25nIHRoZSBuZWdhdGl2ZSB6LWF4aXMsIGkuZS4sXG4gICAgICogYFswLCAwLCAtMV1gLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0Rm9yd2FyZFdvcmxkKG91dCkge1xuICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICBvdXRbMV0gPSAwO1xuICAgICAgICBvdXRbMl0gPSAtMTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0VXBXb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBnZXRVcChvdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXBXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyB1cCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0VXBXb3JsZChvdXQpIHtcbiAgICAgICAgb3V0WzBdID0gMDtcbiAgICAgICAgb3V0WzFdID0gMTtcbiAgICAgICAgb3V0WzJdID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0UmlnaHRXb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBnZXRSaWdodChvdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmlnaHRXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyByaWdodCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0UmlnaHRXb3JsZChvdXQpIHtcbiAgICAgICAgb3V0WzBdID0gMTtcbiAgICAgICAgb3V0WzFdID0gMDtcbiAgICAgICAgb3V0WzJdID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yV29ybGQob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvcldvcmxkKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yTG9jYWwob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckxvY2FsKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludFdvcmxkKG91dCwgcCA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludFdvcmxkKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludExvY2FsKG91dCwgcCA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludExvY2FsKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckludmVyc2VXb3JsZChvdXQsIHYgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3RvclxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JJbnZlcnNlTG9jYWwob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbCh0aGlzLm9iamVjdElkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgcG9pbnQgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZChvdXQsIHAgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSBwWzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSBwWzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSBwWzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQodGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRJbnZlcnNlTG9jYWwob3V0LCBwID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChwKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYW4gb2JqZWN0IHNwYWNlIGR1YWwgcXVhdGVybmlvbiBpbnRvIHdvcmxkIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHEgTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdG9Xb3JsZFNwYWNlVHJhbnNmb3JtKG91dCwgcSA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQocSk7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90b1dvcmxkU3BhY2VUcmFuc2Zvcm0odGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uXG4gICAgICogQHBhcmFtIHEgV29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0b0xvY2FsU3BhY2VUcmFuc2Zvcm0ob3V0LCBxID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIHAudG9PYmplY3RTcGFjZVRyYW5zZm9ybShvdXQsIHEpO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0ICE9PSBxKSB7XG4gICAgICAgICAgICBvdXRbMF0gPSBxWzBdO1xuICAgICAgICAgICAgb3V0WzFdID0gcVsxXTtcbiAgICAgICAgICAgIG91dFsyXSA9IHFbMl07XG4gICAgICAgICAgICBvdXRbM10gPSBxWzNdO1xuICAgICAgICAgICAgb3V0WzRdID0gcVs0XTtcbiAgICAgICAgICAgIG91dFs1XSA9IHFbNV07XG4gICAgICAgICAgICBvdXRbNl0gPSBxWzZdO1xuICAgICAgICAgICAgb3V0WzddID0gcVs3XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0gcSBXb3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRvT2JqZWN0U3BhY2VUcmFuc2Zvcm0ob3V0LCBxID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChxKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RvT2JqZWN0U3BhY2VUcmFuc2Zvcm0odGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJuIHRvd2FyZHMgLyBsb29rIGF0IHRhcmdldC5cbiAgICAgKlxuICAgICAqIFJvdGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGl0cyBmb3J3YXJkIHZlY3RvciBmYWNlcyB0b3dhcmRzIHRoZSB0YXJnZXRcbiAgICAgKiBwb3NpdGlvbi4gVGhlIGB1cGAgdmVjdG9yIGFjdHMgYXMgYSBoaW50IHRvIHVuaXF1ZWx5IG9yaWVudCB0aGUgb2JqZWN0J3NcbiAgICAgKiB1cCBkaXJlY3Rpb24uIFdoZW4gb3JpZW50aW5nIGEgdmlldyBjb21wb25lbnQsIHRoZSBwcm9qZWN0ZWQgYHVwYCB2ZWN0b3JcbiAgICAgKiBmYWNlcyB1cHdhcmRzIG9uIHRoZSB2aWV3aW5nIHBsYW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHAgVGFyZ2V0IHBvc2l0aW9uIHRvIHR1cm4gdG93YXJkcywgaW4gd29ybGQgc3BhY2UuXG4gICAgICogQHBhcmFtIHVwIFVwIHZlY3RvciB0byBhbGlnbiBvYmplY3Qgd2l0aCwgaW4gd29ybGQgc3BhY2UuIERlZmF1bHQgaXMgYFswLCAxLCAwXWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgbG9va0F0KHAsIHVwID0gVVBfVkVDVE9SKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfbG9va0F0KHRoaXMub2JqZWN0SWQsIHBbMF0sIHBbMV0sIHBbMl0sIHVwWzBdLCB1cFsxXSwgdXBbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIERlc3Ryb3kgdGhlIG9iamVjdCB3aXRoIGFsbCBvZiBpdHMgY29tcG9uZW50cyBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIHNjZW5lICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX29iamVjdElkIDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfcmVtb3ZlX29iamVjdCh0aGlzLl9vYmplY3RJZCk7XG4gICAgICAgIHRoaXMuZW5naW5lLl9kZXN0cm95T2JqZWN0KHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrIHRyYW5zZm9ybWF0aW9uIGRpcnR5LlxuICAgICAqXG4gICAgICogQ2F1c2VzIGFuIGV2ZW50dWFsIHJlY2FsY3VsYXRpb24gb2Yge0BsaW5rIHRyYW5zZm9ybVdvcmxkfSwgZWl0aGVyXG4gICAgICogb24gbmV4dCB7QGxpbmsgZ2V0VHJhbnNsYXRpb25Xb3JsZH0sIHtAbGluayB0cmFuc2Zvcm1Xb3JsZH0gb3JcbiAgICAgKiB7QGxpbmsgc2NhbGluZ1dvcmxkfSBvciB0aGUgYmVnaW5uaW5nIG9mIG5leHQgZnJhbWUsIHdoaWNoZXZlclxuICAgICAqIGhhcHBlbnMgZmlyc3QuXG4gICAgICovXG4gICAgc2V0RGlydHkoKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X2RpcnR5KHRoaXMub2JqZWN0SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlL2VuYWJsZSBhbGwgY29tcG9uZW50cyBvZiB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIE5ldyBzdGF0ZSBmb3IgdGhlIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGIpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLmdldENvbXBvbmVudHMoKTtcbiAgICAgICAgZm9yIChsZXQgYyBvZiBjb21wcykge1xuICAgICAgICAgICAgYy5hY3RpdmUgPSBiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbXBvbmVudCh0eXBlT3JDbGFzcywgaW5kZXggPSAwKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSB3YXNtLl93bF9nZXRfY29tcG9uZW50X21hbmFnZXJfaW5kZXgod2FzbS50ZW1wVVRGOCh0eXBlKSk7XG4gICAgICAgIGlmIChjb21wb25lbnRUeXBlIDwgMCkge1xuICAgICAgICAgICAgLyogTm90IGEgbmF0aXZlIGNvbXBvbmVudCwgdHJ5IGpzOiAqL1xuICAgICAgICAgICAgY29uc3QgdHlwZUluZGV4ID0gd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXNbdHlwZV07XG4gICAgICAgICAgICBpZiAodHlwZUluZGV4ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBqc0luZGV4ID0gd2FzbS5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleCh0aGlzLm9iamVjdElkLCB0eXBlSW5kZXgsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChqc0luZGV4IDwgMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX2VuZ2luZS53YXNtLl9jb21wb25lbnRzW2pzSW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5jb25zdHJ1Y3RvciAhPT0gQnJva2VuQ29tcG9uZW50ID8gY29tcG9uZW50IDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9nZXRfY29tcG9uZW50X2lkKHRoaXMub2JqZWN0SWQsIGNvbXBvbmVudFR5cGUsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS5fd3JhcENvbXBvbmVudCh0eXBlLCBjb21wb25lbnRUeXBlLCBjb21wb25lbnRJZCk7XG4gICAgfVxuICAgIGdldENvbXBvbmVudHModHlwZU9yQ2xhc3MpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBsZXQgY29tcG9uZW50VHlwZSA9IG51bGw7XG4gICAgICAgIGxldCB0eXBlID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVPckNsYXNzKSB7XG4gICAgICAgICAgICB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgICAgIGNvbXBvbmVudFR5cGUgPSB3YXNtLl90eXBlSW5kZXhGb3IodHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuICAgICAgICBjb25zdCBtYXhDb21wcyA9IE1hdGguZmxvb3IoKHdhc20uX3RlbXBNZW1TaXplIC8gMykgKiAyKTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50c0NvdW50ID0gd2FzbS5fd2xfb2JqZWN0X2dldF9jb21wb25lbnRzKHRoaXMub2JqZWN0SWQsIHdhc20uX3RlbXBNZW0sIG1heENvbXBzKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gMiAqIGNvbXBvbmVudHNDb3VudDtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF9jb21wb25lbnRfdHlwZXModGhpcy5vYmplY3RJZCwgd2FzbS5fdGVtcE1lbSArIG9mZnNldCwgbWF4Q29tcHMpO1xuICAgICAgICBjb25zdCBqc01hbmFnZXJJbmRleCA9IHdhc20uX2pzTWFuYWdlckluZGV4O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHNDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gd2FzbS5fdGVtcE1lbVVpbnQ4W2kgKyBvZmZzZXRdO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50SWQgPSB3YXNtLl90ZW1wTWVtVWludDE2W2ldO1xuICAgICAgICAgICAgLyogSGFuZGxlIEpTIHR5cGVzIHNlcGFyYXRlbHkgKi9cbiAgICAgICAgICAgIGlmICh0ID09IGpzTWFuYWdlckluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUluZGV4ID0gd2FzbS5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleF9mb3JfaWQoY29tcG9uZW50SWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXAgPSB3YXNtLl9jb21wb25lbnRzW3R5cGVJbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGNvbXBvbmVudFR5cGUgPT09IG51bGwgfHwgY29tcC50eXBlID09IHR5cGU7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXAuY29uc3RydWN0b3IgIT09IEJyb2tlbkNvbXBvbmVudCAmJiBtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50VHlwZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXJOYW1lID0gd2FzbS5fdHlwZU5hbWVGb3IodCk7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKHRoaXMuX2VuZ2luZS5fd3JhcENvbXBvbmVudChtYW5hZ2VyTmFtZSwgdCwgY29tcG9uZW50SWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHQgPT0gY29tcG9uZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIC8qIE9wdGltaXplZCBtYW5hZ2VyIG5hbWUgcmV0cmlldmFsLCBhbHJlYWR5IGhhdmUgdHlwZSAqL1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaCh0aGlzLl9lbmdpbmUuX3dyYXBDb21wb25lbnQodHlwZSwgY29tcG9uZW50VHlwZSwgY29tcG9uZW50SWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50cztcbiAgICB9XG4gICAgYWRkQ29tcG9uZW50KHR5cGVPckNsYXNzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50VHlwZSA9IHdhc20uX3R5cGVJbmRleEZvcih0eXBlKTtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IG51bGw7XG4gICAgICAgIGxldCBjb21wb25lbnRJbmRleCA9IG51bGw7XG4gICAgICAgIGlmIChjb21wb25lbnRUeXBlIDwgMCkge1xuICAgICAgICAgICAgLyogSmF2YVNjcmlwdCBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGlmICghKHR5cGUgaW4gd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gY29tcG9uZW50IHR5cGUgJ1wiICsgdHlwZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9qc19jb21wb25lbnQodGhpcy5vYmplY3RJZCwgd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXNbdHlwZV0pO1xuICAgICAgICAgICAgY29tcG9uZW50SW5kZXggPSB3YXNtLl93bF9nZXRfanNfY29tcG9uZW50X2luZGV4X2Zvcl9pZChjb21wb25lbnRJZCk7XG4gICAgICAgICAgICBjb21wb25lbnQgPSB3YXNtLl9jb21wb25lbnRzW2NvbXBvbmVudEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIG5hdGl2ZSBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9jb21wb25lbnQodGhpcy5vYmplY3RJZCwgY29tcG9uZW50VHlwZSk7XG4gICAgICAgICAgICBjb21wb25lbnQgPSB0aGlzLl9lbmdpbmUuX3dyYXBDb21wb25lbnQodHlwZSwgY29tcG9uZW50VHlwZSwgY29tcG9uZW50SWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGNvbXBvbmVudC5jb3B5KHBhcmFtcyk7XG4gICAgICAgIC8qIEV4cGxpY2l0bHkgaW5pdGlhbGl6ZSBuYXRpdmUgY29tcG9uZW50cyAqL1xuICAgICAgICBpZiAoY29tcG9uZW50VHlwZSA8IDApIHtcbiAgICAgICAgICAgIC8qIEB0b2RvOiBgY29tcG9uZW50SW5kZXhgIGNhbiBiZSBudWxsIGhlcmUsIHRoYXQncyBhbiBlcnJvciAqL1xuICAgICAgICAgICAgd2FzbS5fd2xqc19jb21wb25lbnRfaW5pdChjb21wb25lbnRJbmRleCk7XG4gICAgICAgICAgICAvKiBzdGFydCgpIGlzIGNhbGxlZCB0aHJvdWdoIG9uQWN0aXZhdGUoKSAqL1xuICAgICAgICB9XG4gICAgICAgIC8qIElmIGl0IHdhcyBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQgYnkgdGhlIHVzZXIgdG8gbGVhdmUgdGhlIGNvbXBvbmVudCBpbmFjdGl2ZSxcbiAgICAgICAgICogd2UgYWN0aXZhdGUgaXQgYXMgYSBmaW5hbCBzdGVwLiBUaGlzIGludmFsaWRhdGVzIGNvbXBvbmVudEluZGV4ISAqL1xuICAgICAgICBpZiAoIXBhcmFtcyB8fCAhKCdhY3RpdmUnIGluIHBhcmFtcyAmJiAhcGFyYW1zLmFjdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgZGVzY2VuZGFudHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lRGlyZWN0fSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZVJlY3Vyc2l2ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqICAgICBJZiBgZmFsc2VgLCB0aGlzIG1ldGhvZCB3aWxsIG9ubHkgcGVyZm9ybSB0aGUgc2VhcmNoIGluIGRpcmVjdCBjaGlsZHJlbi5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZShuYW1lLCByZWN1cnNpdmUgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gcmVjdXJzaXZlID8gdGhpcy5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpIDogdGhpcy5maW5kQnlOYW1lRGlyZWN0KG5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFsbCAqKmRpcmVjdCoqIGNoaWxkcmVuIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgRXZlbiB0aG91Z2ggdGhpcyBtZXRob2QgaXMgaGVhdmlseSBvcHRpbWl6ZWQsIGl0IGRvZXMgcGVyZm9ybVxuICAgICAqIGEgbGluZWFyIHNlYXJjaCB0byBmaW5kIHRoZSBvYmplY3RzLiBEbyBub3QgdXNlIGluIGEgaG90IHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjBcbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lRGlyZWN0KG5hbWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuX29iamVjdElkO1xuICAgICAgICAvKiBEaXZpZGUgYnkgNCB0byBnZXQgaGFsZiBhcyBtYW55IHVzaG9ydCBhcyBwb3NzaWJsZSAqL1xuICAgICAgICBjb25zdCB0ZW1wU2l6ZVUxNiA9IHdhc20uX3RlbXBNZW1TaXplID4+IDI7XG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gdGVtcFNpemVVMTYgLSAyOyAvKiBSZXNlcnZlIHR3byB1c2hvcnQgKi9cbiAgICAgICAgY29uc3QgYnVmZmVyID0gd2FzbS5fdGVtcE1lbVVpbnQxNjtcbiAgICAgICAgYnVmZmVyW21heENvdW50XSA9IDA7IC8qIEluZGV4IG9mZnNldCAqL1xuICAgICAgICBidWZmZXJbbWF4Q291bnQgKyAxXSA9IDA7IC8qIGNoaWxkIGNvdW50ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBjaGlsZENvdW50UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyICsgMjtcbiAgICAgICAgY29uc3QgbmFtZVB0ciA9IHdhc20udGVtcFVURjgobmFtZSwgKG1heENvdW50ICsgMikgKiAyKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgd2hpbGUgKChyZWFkID0gd2FzbS5fd2xfb2JqZWN0X2ZpbmRCeU5hbWUoaWQsIG5hbWVQdHIsIGluZGV4UHRyLCBjaGlsZENvdW50UHRyLCBidWZmZXJQdHIsIG1heENvdW50KSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZDsgKytpKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuZW5naW5lLndyYXBPYmplY3QoYnVmZmVyW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciAqKmFsbCBkZXNjZW5kYW50cyoqIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgRXZlbiB0aG91Z2ggdGhpcyBtZXRob2QgaXMgaGVhdmlseSBvcHRpbWl6ZWQsIGl0IGRvZXMgcGVyZm9ybVxuICAgICAqIGEgbGluZWFyIHNlYXJjaCB0byBmaW5kIHRoZSBvYmplY3RzLiBEbyBub3QgdXNlIGluIGEgaG90IHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICovXG4gICAgZmluZEJ5TmFtZVJlY3Vyc2l2ZShuYW1lKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9vYmplY3RJZDtcbiAgICAgICAgLyogRGl2aWRlIGJ5IDQgdG8gZ2V0IGhhbGYgYXMgbWFueSB1c2hvcnQgYXMgcG9zc2libGUgKi9cbiAgICAgICAgY29uc3QgdGVtcFNpemVVMTYgPSB3YXNtLl90ZW1wTWVtU2l6ZSA+PiAyO1xuICAgICAgICBjb25zdCBtYXhDb3VudCA9IHRlbXBTaXplVTE2IC0gMTsgLyogUmVzZXJ2ZSBvbmUgdXNob3J0ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHdhc20uX3RlbXBNZW1VaW50MTY7XG4gICAgICAgIGJ1ZmZlclttYXhDb3VudF0gPSAwOyAvKiBJbmRleCBvZmZzZXQgKi9cbiAgICAgICAgY29uc3QgYnVmZmVyUHRyID0gd2FzbS5fdGVtcE1lbTtcbiAgICAgICAgY29uc3QgaW5kZXhQdHIgPSBidWZmZXJQdHIgKyBtYXhDb3VudCAqIDI7XG4gICAgICAgIGNvbnN0IG5hbWVQdHIgPSB3YXNtLnRlbXBVVEY4KG5hbWUsIChtYXhDb3VudCArIDEpICogMik7XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlICgocmVhZCA9IHdhc20uX3dsX29iamVjdF9maW5kQnlOYW1lUmVjdXJzaXZlKGlkLCBuYW1lUHRyLCBpbmRleFB0ciwgYnVmZmVyUHRyLCBtYXhDb3VudCkpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlYWQ7ICsraSlcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGJ1ZmZlcltpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgZ2l2ZW4gb2JqZWN0J3MgdHJhbnNmb3JtYXRpb24gaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgZ2V0IGNoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfaXNfY2hhbmdlZCh0aGlzLm9iamVjdElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAsXG4gICAgICogcmVhZGluZyBhIGN1c3RvbSBwcm9wZXJ0eSB3aWxsIG5vdCB3b3JrOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgPSB0cnVlO1xuICAgICAqXG4gICAgICogY29uc3Qgb2JqID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICogb2JqLmN1c3RvbVBhcmFtID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhvYmouaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYGZhbHNlYFxuICAgICAqIG9iai5kZXN0cm95KCk7XG4gICAgICogY29uc29sZS5sb2cob2JqLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGB0cnVlYFxuICAgICAqIGNvbnNvbGUubG9nKG9iai5jdXN0b21QYXJhbSk7IC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0SWQgPCAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIHdoZXRoZXIgdGhlIHdyYXBwZWQgbmF0aXZlIG9iamVjdCBpZHMgYXJlXG4gICAgICogZXF1YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXJPYmplY3QgT2JqZWN0IHRvIGNoZWNrIGVxdWFsaXR5IHdpdGguXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGlzIG9iamVjdCBlcXVhbHMgdGhlIGdpdmVuIG9iamVjdC5cbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJPYmplY3QpIHtcbiAgICAgICAgaWYgKCFvdGhlck9iamVjdClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0SWQgPT0gb3RoZXJPYmplY3Qub2JqZWN0SWQ7XG4gICAgfVxufVxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBza2luIGRhdGEuXG4gKi9cbmV4cG9ydCBjbGFzcyBTa2luIHtcbiAgICAvKipcbiAgICAgKiBJbmRleCBvZiB0aGUgc2tpbiBpbiB0aGUgbWFuYWdlci5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2luZGV4O1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgY29uc3RydWN0b3IoZW5naW5lLCBpbmRleCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgfVxuICAgIC8qKiBBbW91bnQgb2Ygam9pbnRzIGluIHRoaXMgc2tpbi4gKi9cbiAgICBnZXQgam9pbnRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9za2luX2dldF9qb2ludF9jb3VudCh0aGlzLl9pbmRleCk7XG4gICAgfVxuICAgIC8qKiBKb2ludHMgb2JqZWN0IGlkcyBmb3IgdGhpcyBza2luICovXG4gICAgZ2V0IGpvaW50SWRzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkod2FzbS5IRUFQVTE2LmJ1ZmZlciwgd2FzbS5fd2xfc2tpbl9qb2ludF9pZHModGhpcy5faW5kZXgpLCB0aGlzLmpvaW50Q291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEdWFsIHF1YXRlcm5pb25zIGluIGEgZmxhdCBhcnJheSBvZiBzaXplIDggdGltZXMge0BsaW5rIGpvaW50Q291bnR9LlxuICAgICAqXG4gICAgICogSW52ZXJzZSBiaW5kIHRyYW5zZm9ybXMgb2YgdGhlIHNraW4uXG4gICAgICovXG4gICAgZ2V0IGludmVyc2VCaW5kVHJhbnNmb3JtcygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9za2luX2ludmVyc2VfYmluZF90cmFuc2Zvcm1zKHRoaXMuX2luZGV4KSwgOCAqIHRoaXMuam9pbnRDb3VudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlY3RvcnMgaW4gYSBmbGF0IGFycmF5IG9mIHNpemUgMyB0aW1lcyB7QGxpbmsgam9pbnRDb3VudH0uXG4gICAgICpcbiAgICAgKiBJbnZlcnNlIGJpbmQgc2NhbGluZ3Mgb2YgdGhlIHNraW4uXG4gICAgICovXG4gICAgZ2V0IGludmVyc2VCaW5kU2NhbGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfc2tpbl9pbnZlcnNlX2JpbmRfc2NhbGluZ3ModGhpcy5faW5kZXgpLCAzICogdGhpcy5qb2ludENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyB3aGV0aGVyIHRoZSB3cmFwcGVkIG5hdGl2ZSBza2luIGlkcyBhcmVcbiAgICAgKiBlcXVhbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlclNraW4gU2tpbiB0byBjaGVjayBlcXVhbGl0eSB3aXRoLlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhpcyBza2luIGVxdWFscyB0aGUgZ2l2ZW4gc2tpbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlclNraW4pIHtcbiAgICAgICAgaWYgKCFvdGhlclNraW4pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleCA9PT0gb3RoZXJTa2luLl9pbmRleDtcbiAgICB9XG59XG4vKiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIDwgMS4wLjAuICovXG5leHBvcnQgeyBPYmplY3QzRCBhcyBPYmplY3QgfTtcbi8qKlxuICogUmF5IGhpdC5cbiAqXG4gKiBSZXN1bHQgb2YgYSB7QGxpbmsgU2NlbmUucmF5Q2FzdH0uXG4gKlxuICogQG5vdGUgdGhpcyBjbGFzcyB3cmFwcyBpbnRlcm5hbCBlbmdpbmUgZGF0YSBhbmQgc2hvdWxkIG9ubHkgYmUgY3JlYXRlZCBpbnRlcm5hbGx5LlxuICovXG5leHBvcnQgY2xhc3MgUmF5SGl0IHtcbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKiBQb2ludGVyIHRvIHRoZSBtZW1vcnkgaGVhcC4gKi9cbiAgICBfcHRyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdHIgUG9pbnRlciB0byB0aGUgcmF5IGhpdHMgbWVtb3J5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgcHRyKSB7XG4gICAgICAgIGlmICgocHRyICYgMykgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzYWxpZ25lZCBwb2ludGVyOiBwbGVhc2UgcmVwb3J0IGEgYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9wdHIgPSBwdHI7XG4gICAgfVxuICAgIC8qKiBBcnJheSBvZiByYXkgaGl0IGxvY2F0aW9ucy4gKi9cbiAgICBnZXQgbG9jYXRpb25zKCkge1xuICAgICAgICBsZXQgcCA9IHRoaXMuX3B0cjtcbiAgICAgICAgbGV0IGwgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGwucHVzaChuZXcgRmxvYXQzMkFycmF5KHRoaXMuX2VuZ2luZS53YXNtLkhFQVBGMzIuYnVmZmVyLCBwICsgMTIgKiBpLCAzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICAgIC8qKiBBcnJheSBvZiByYXkgaGl0IG5vcm1hbHMgKG9ubHkgd2hlbiB1c2luZyB7QGxpbmsgUGh5c2ljcyNyYXlDYXN0fS4gKi9cbiAgICBnZXQgbm9ybWFscygpIHtcbiAgICAgICAgbGV0IHAgPSB0aGlzLl9wdHIgKyA0ODtcbiAgICAgICAgbGV0IGwgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGwucHVzaChuZXcgRmxvYXQzMkFycmF5KHRoaXMuX2VuZ2luZS53YXNtLkhFQVBGMzIuYnVmZmVyLCBwICsgMTIgKiBpLCAzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZWZlciB0aGVzZSB0byByZWNhbGN1bGF0aW5nIHRoZSBkaXN0YW5jZSBmcm9tIGxvY2F0aW9ucy5cbiAgICAgKlxuICAgICAqIERpc3RhbmNlcyBvZiBhcnJheSBoaXRzIHRvIHJheSBvcmlnaW4uXG4gICAgICovXG4gICAgZ2V0IGRpc3RhbmNlcygpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX3B0ciArIDQ4ICogMjtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fZW5naW5lLndhc20uSEVBUEYzMi5idWZmZXIsIHAsIHRoaXMuaGl0Q291bnQpO1xuICAgIH1cbiAgICAvKiogSGl0IG9iamVjdHMgKi9cbiAgICBnZXQgb2JqZWN0cygpIHtcbiAgICAgICAgY29uc3QgSEVBUFUxNiA9IHRoaXMuX2VuZ2luZS53YXNtLkhFQVBVMTY7XG4gICAgICAgIGNvbnN0IG9iamVjdHMgPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG4gICAgICAgIGxldCBwID0gKHRoaXMuX3B0ciArICg0OCAqIDIgKyAxNikpID4+IDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBvYmplY3RzW2ldID0gdGhpcy5fZW5naW5lLndyYXBPYmplY3QoSEVBUFUxNltwICsgaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGhpdHMgKG1heCA0KSAqL1xuICAgIGdldCBoaXRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuX2VuZ2luZS53YXNtLkhFQVBVMzJbdGhpcy5fcHRyIC8gNCArIDMwXSwgNCk7XG4gICAgfVxufVxuY2xhc3MgbWF0aCB7XG4gICAgLyoqIChFeHBlcmltZW50YWwhKSBDdWJpYyBIZXJtaXRlIHNwbGluZSBpbnRlcnBvbGF0aW9uIGZvciB2ZWN0b3IzIGFuZCBxdWF0ZXJuaW9ucy5cbiAgICAgKlxuICAgICAqIFdpdGggYGYgPT0gMGAsIGBvdXRgIHdpbGwgYmUgYGJgLCBpZiBgZiA9PSAxYCwgYG91dGAgd2lsbCBiZSBjLlxuICAgICAqXG4gICAgICogV2hldGhlciBhIHF1YXRlcm5pb24gb3IgdmVjdG9yMyBpbnRlcnBvbGF0aW9uIGlzIGludGVuZGVkIGlzIGRldGVybWluZWQgYnlcbiAgICAgKiBsZW5ndGggb2YgYGFgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBBcnJheSB0byB3cml0ZSByZXN1bHQgdG8uXG4gICAgICogQHBhcmFtIGEgRmlyc3QgdGFuZ2VudC9oYW5kbGUuXG4gICAgICogQHBhcmFtIGIgRmlyc3QgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gYyBTZWNvbmQgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gZCBTZWNvbmQgaGFuZGxlLlxuICAgICAqIEBwYXJhbSBmIEludGVycG9sYXRpb24gZmFjdG9yIGluIFswOyAxXS5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC42XG4gICAgICovXG4gICAgc3RhdGljIGN1YmljSGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIGYsIGVuZ2luZSA9IFdMKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSBlbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDApLnNldChhKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDQpLnNldChiKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDgpLnNldChjKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDEyKS5zZXQoZCk7XG4gICAgICAgIGNvbnN0IGlzUXVhdCA9IGEubGVuZ3RoID09IDQ7XG4gICAgICAgIHdhc20uX3dsX21hdGhfY3ViaWNIZXJtaXRlKHdhc20uX3RlbXBNZW0gKyA0ICogMTYsIHdhc20uX3RlbXBNZW0gKyA0ICogMCwgd2FzbS5fdGVtcE1lbSArIDQgKiA0LCB3YXNtLl90ZW1wTWVtICsgNCAqIDgsIHdhc20uX3RlbXBNZW0gKyA0ICogMTIsIGYsIGlzUXVhdCk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxNl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxN107XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxOF07XG4gICAgICAgIGlmIChpc1F1YXQpXG4gICAgICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMTldO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbn1cbmV4cG9ydCB7IG1hdGggfTtcbi8qKlxuICogQ2xhc3MgZm9yIGFjY2Vzc2luZyBpbnRlcm5hdGlvbmFsaXphdGlvbiAoaTE4bikgZmVhdHVyZXMuXG4gKlxuICogQWxsb3dzIHtAbGluayBJMThOLm9uTGFuZ3VhZ2VDaGFuZ2VkIFwiZGV0ZWN0aW5nIGxhbmd1YWdlIGNoYW5nZVwifSxcbiAqIHtAbGluayBJMThOLmxhbmd1YWdlIFwic2V0dGluZyB0aGUgY3VycmVudCBsYW5ndWFnZVwifSBvciB0cmFuc2xhdGluZ1xuICoge0BsaW5rIEkxOE4udHJhbnNsYXRlIFwiaW5kaXZpZHVhbCB0ZXJtc1wifS5cbiAqXG4gKiBJbnRlcm5hdGlvbmFsaXphdGlvbiB3b3JrcyB3aXRoIHRlcm1zLFxuICogYSBzdHJpbmcgdHlwZSBrZXl3b3JkIHRoYXQgaXMgbGlua2VkIHRvIGEgZGlmZmVyZW50IHRleHQgZm9yIGVhY2ggbGFuZ3VhZ2UuXG4gKlxuICogSW50ZXJuYWxseSwgc3RyaW5nIHBhcmFtZXRlcnMgZm9yIHRleHQgYW5kIGpzIGNvbXBvbmVudHMgYXJlXG4gKiBhdXRvbWF0aWNhbGx5IHN3YXBwZWQgZHVyaW5nIGxhbmd1YWdlIGNoYW5nZSwgZ2l2ZW4gdGhleSBhcmUgbGlua2VkIHRvIGEgdGVybS5cbiAqIElmIG1hbnVhbCB0ZXh0IHN3YXBwaW5nIGlzIGRlc2lyZWQsIHtAbGluayBJMThOLnRyYW5zbGF0ZX1cbiAqIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBjdXJyZW50IHRyYW5zbGF0aW9uIGZvciBhbnkgdGVybS5cbiAqXG4gKiBZb3UgY2FuIGFsc28gdXNlIHRoZSB7QGxpbmsgSTE4Ti5vbkxhbmd1YWdlQ2hhbmdlZH0gdG8gbWFudWFsbHkgdXBkYXRlIHRleHRcbiAqIHdoZW4gYSBsYW5ndWFnZSBpcyBjaGFuZ2VkIHRvIGZvciBleGFtcGxlIHVwZGF0ZSBhIG51bWJlciBpbiBhIHN0cmluZy5cbiAqXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuZXhwb3J0IGNsYXNzIEkxOE4ge1xuICAgIC8qKlxuICAgICAqIHtAbGluayBFbWl0dGVyfSBmb3IgbGFuZ3VhZ2UgY2hhbmdlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEZpcnN0IHBhcmFtZXRlciB0byBhIGxpc3RlbmVyIGlzIHRoZSBvbGQgbGFuZ3VhZ2UgaW5kZXgsXG4gICAgICogc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgbmV3IGxhbmd1YWdlIGluZGV4LlxuICAgICAqXG4gICAgICogVXNhZ2UgZnJvbSBhIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRoaXMuZW5naW5lLmkxOG4ub25MYW5ndWFnZUNoYW5nZWQuYWRkKChvbGRMYW5ndWFnZUluZGV4LCBuZXdMYW5ndWFnZUluZGV4KSA9PiB7XG4gICAgICogICAgIGNvbnN0IG9sZExhbmd1YWdlID0gdGhpcy5lbmdpbmUuaTE4bi5sYW5ndWFnZU5hbWUob2xkTGFuZ3VhZ2VJbmRleCk7XG4gICAgICogICAgIGNvbnN0IG5ld0xhbmd1YWdlID0gdGhpcy5lbmdpbmUuaTE4bi5sYW5ndWFnZU5hbWUobmV3TGFuZ3VhZ2VJbmRleCk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiU3dpdGNoZWQgZnJvbVwiLCBvbGRMYW5ndWFnZSwgXCJ0b1wiLCBuZXdMYW5ndWFnZSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgb25MYW5ndWFnZUNoYW5nZWQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqIFByZXZpb3VzbHkgc2V0IGxhbmd1YWdlIGluZGV4LiBAaGlkZGVuICovXG4gICAgX3ByZXZMYW5ndWFnZUluZGV4ID0gLTE7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCBsYW5ndWFnZSBhbmQgYXBwbHkgdHJhbnNsYXRpb25zIHRvIGxpbmtlZCB0ZXh0IHBhcmFtZXRlcnMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGVxdWl2YWxlbnQgdG8ge0BsaW5rIEkxOE4uc2V0TGFuZ3VhZ2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvZGUgTGFuZ3VhZ2UgY29kZSB0byBzd2l0Y2ggdG9cbiAgICAgKi9cbiAgICBzZXQgbGFuZ3VhZ2UoY29kZSkge1xuICAgICAgICB0aGlzLnNldExhbmd1YWdlKGNvZGUpO1xuICAgIH1cbiAgICAvKiogR2V0IGN1cnJlbnQgbGFuZ3VhZ2UgY29kZS4gKi9cbiAgICBnZXQgbGFuZ3VhZ2UoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY29kZSA9IHdhc20uX3dsX2kxOG5fY3VycmVudExhbmd1YWdlKCk7XG4gICAgICAgIGlmIChjb2RlID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhjb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IGxhbmd1YWdlIGluZGV4LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBpdHMgZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaW5kZXggPSBpMThuLmxhbmd1YWdlSW5kZXgoaTE4bi5sYW5ndWFnZSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZS53YXNtLl93bF9pMThuX2N1cnJlbnRMYW5ndWFnZUluZGV4KCk7XG4gICAgfVxuICAgIC8qKiBQcmV2aW91cyBsYW5ndWFnZSBpbmRleC4gKi9cbiAgICBnZXQgcHJldmlvdXNJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCBsYW5ndWFnZSBhbmQgYXBwbHkgdHJhbnNsYXRpb25zIHRvIGxpbmtlZCB0ZXh0IHBhcmFtZXRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29kZSBUaGUgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBjdXJyZW50IGluZGV4IGNvZGUgd2hlbiB0aGVcbiAgICAgKiAgICAgbGFuZ3VhZ2UgaXMgbG9hZGVkLlxuICAgICAqL1xuICAgIHNldExhbmd1YWdlKGNvZGUpIHtcbiAgICAgICAgaWYgKGNvZGUgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jdXJyZW50SW5kZXgpO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXg7XG4gICAgICAgIHdhc20uX3dsX2kxOG5fc2V0TGFuZ3VhZ2Uod2FzbS50ZW1wVVRGOChjb2RlKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUuc2NlbmVcbiAgICAgICAgICAgIC5fZmx1c2hBcHBlbmQodGhpcy5fZW5naW5lLnNjZW5lLmJhc2VVUkwpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0cmFuc2xhdGVkIHN0cmluZyBmb3IgYSB0ZXJtIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBsYW5ndWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXJtIFRlcm0gdG8gdHJhbnNsYXRlXG4gICAgICovXG4gICAgdHJhbnNsYXRlKHRlcm0pIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHdhc20uX3dsX2kxOG5fdHJhbnNsYXRlKHdhc20udGVtcFVURjgodGVybSkpO1xuICAgICAgICBpZiAodHJhbnNsYXRpb24gPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHRyYW5zbGF0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXIgb2YgbGFuZ3VhZ2VzIGluIHRoZSBwcm9qZWN0LlxuICAgICAqXG4gICAgICovXG4gICAgbGFuZ3VhZ2VDb3VudCgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZUNvdW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgY29kZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VJbmRleChjb2RlKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VJbmRleCh3YXNtLnRlbXBVVEY4KGNvZGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgbGFuZ3VhZ2UgdG8gZ2V0IHRoZSBjb2RlIGZyb21cbiAgICAgKi9cbiAgICBsYW5ndWFnZUNvZGUoaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb2RlID0gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZUNvZGUoaW5kZXgpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcoY29kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgbmFtZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VOYW1lKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VOYW1lKGluZGV4KTtcbiAgICAgICAgaWYgKG5hbWUgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKG5hbWUpO1xuICAgIH1cbn1cbi8qKiBQcm9wZXJ0aWVzIG9mIGEgV2ViWFIgc2Vzc2lvbiAqL1xuZXhwb3J0IGNsYXNzIFhSIHtcbiAgICAvKiogV29uZGVybGFuZCBXQVNNIGJyaWRnZS4gQGhpZGRlbiAqL1xuICAgICN3YXNtO1xuICAgICNtb2RlO1xuICAgIGNvbnN0cnVjdG9yKHdhc20sIG1vZGUpIHtcbiAgICAgICAgdGhpcy4jd2FzbSA9IHdhc207XG4gICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiBzZXNzaW9uIG1vZGUgKi9cbiAgICBnZXQgc2Vzc2lvbk1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiBzZXNzaW9uICovXG4gICAgZ2V0IHNlc3Npb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3Nlc3Npb247XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGZyYW1lICovXG4gICAgZ2V0IGZyYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9mcmFtZTtcbiAgICB9XG4gICAgcmVmZXJlbmNlU3BhY2VGb3JUeXBlKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VzW3R5cGVdID8/IG51bGw7XG4gICAgfVxuICAgIC8qKiBTZXQgY3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZSB1c2VkIGZvciByZXRyaWV2aW5nIGV5ZSwgaGVhZCwgaGFuZCBhbmQgam9pbnQgcG9zZXMgKi9cbiAgICBzZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlKHJlZlNwYWNlKSB7XG4gICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2UgPSByZWZTcGFjZTtcbiAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZVR5cGUgPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LmtleXModGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXNbdHlwZV0gPT09IHJlZlNwYWNlKSB7XG4gICAgICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiByZWZlcmVuY2Ugc3BhY2UgdHlwZSAqL1xuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VUeXBlID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQ3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZSB1c2VkIGZvciByZXRyaWV2aW5nIGV5ZSwgaGVhZCwgaGFuZCBhbmQgam9pbnQgcG9zZXMgKi9cbiAgICBnZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZTtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgcmVmZXJlbmNlIHNwYWNlIHR5cGUgb3IgYG51bGxgIGlmIG5vdCBhIGRlZmF1bHQgcmVmZXJlbmNlIHNwYWNlICovXG4gICAgZ2V0IGN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZTtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgYmFzZSBsYXllciAgKi9cbiAgICBnZXQgYmFzZUxheWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9iYXNlTGF5ZXI7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGZyYW1lYnVmZmVyICovXG4gICAgZ2V0IGZyYW1lYnVmZmVycygpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuI3dhc20ud2VieHJfZmJvKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1t0aGlzLiN3YXNtLndlYnhyX2Zib11dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2Ziby5tYXAoKGlkKSA9PiB0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1tpZF0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBUeXBlIH0gZnJvbSAnLi9wcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBSZXRhaW5FbWl0dGVyIH0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG5pbXBvcnQgeyBpbmhlcml0UHJvcGVydGllcywgQW5pbWF0aW9uLCBDb21wb25lbnQsIE1hdGVyaWFsLCBNZXNoLCBCcm9rZW5Db21wb25lbnQsIFNraW4sIFhSLCB9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG4vKipcbiAqIERlZmF1bHQgY29tcG9uZW50IHBhcmFtZXRlciB2YWx1ZSBwZXIgdHlwZS5cbiAqL1xuY29uc3QgX2NvbXBvbmVudERlZmF1bHRzID0gbmV3IE1hcChbXG4gICAgW1R5cGUuQm9vbCwgZmFsc2VdLFxuICAgIFtUeXBlLkludCwgMF0sXG4gICAgW1R5cGUuRmxvYXQsIDAuMF0sXG4gICAgW1R5cGUuU3RyaW5nLCAnJ10sXG4gICAgW1R5cGUuRW51bSwgdW5kZWZpbmVkXSxcbiAgICBbVHlwZS5PYmplY3QsIG51bGxdLFxuICAgIFtUeXBlLk1lc2gsIG51bGxdLFxuICAgIFtUeXBlLlRleHR1cmUsIG51bGxdLFxuICAgIFtUeXBlLk1hdGVyaWFsLCBudWxsXSxcbiAgICBbVHlwZS5BbmltYXRpb24sIG51bGxdLFxuICAgIFtUeXBlLlNraW4sIG51bGxdLFxuICAgIFtUeXBlLkNvbG9yLCBbMC4wLCAwLjAsIDAuMCwgMS4wXV0sXG5dKTtcbi8qKlxuICogU2V0dXAgdGhlIGRlZmF1bHRzIHZhbHVlIG9mIHRoZSBwcm9wZXJ0aWVzIG9uIGEgZ2l2ZW5cbiAqIGNvbXBvbmVudCBjbGFzcy5cbiAqXG4gKiBAcGFyYW0gY3RvciBUaGUgY29tcG9uZW50IGNsYXNzXG4gKi9cbmZ1bmN0aW9uIF9zZXR1cERlZmF1bHRzKGN0b3IpIHtcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHAgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgIGlmIChwLnR5cGUgPT09IFR5cGUuRW51bSkge1xuICAgICAgICAgICAgLyogRW51bSBkZWZhdWx0IGNhbiBiZSBhIHN0cmluZyBvciBhbiBpbmRleC4gQ29udmVydCB0byBhbmQvb3JcbiAgICAgICAgICAgICAqIHNhbml0eS1jaGVjayB0aGUgaW5kZXguICovXG4gICAgICAgICAgICBpZiAocC52YWx1ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8qIERvbid0IHRyeSB0byBsb29rIHVwIHRoZSBkZWZhdWx0IGlmIHRoZSB1c2VyIHNwZWNpZmllZCBhXG4gICAgICAgICAgICAgICAgICogbnVtYmVyIG9yIHdlIGFscmVhZHkgY29udmVydGVkIHRvIG9uZS4gKi9cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHAuZGVmYXVsdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdW5kZWZpbmVkLCBtaXNzaW5nIGVsZW1lbnQgb3Igd3JvbmcgdHlwZSB0aGlzIHJldHVybnNcbiAgICAgICAgICAgICAgICAgICAgICogLTEgd2hpY2ggYmVjb21lcyAwIGJlbG93LiBUaGlzIG1hdGNoZXMgZWRpdG9yIGJlaGF2aW9yLiAqL1xuICAgICAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSBwLnZhbHVlcy5pbmRleE9mKHAuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwLmRlZmF1bHQgPCAwIHx8IHAuZGVmYXVsdCA+PSBwLnZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZhdWx0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSdzIG5vIGluZGV4IHZhbHVlIHRoYXQgbWFrZXMgc2Vuc2UgKi9cbiAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwLmRlZmF1bHQgPSBwLmRlZmF1bHQgPz8gX2NvbXBvbmVudERlZmF1bHRzLmdldChwLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGN0b3IucHJvdG90eXBlW25hbWVdID0gcC5kZWZhdWx0O1xuICAgIH1cbn1cbi8qKlxuICogTG93LWxldmVsIHdyYXBwZXIgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgV2ViQXNzZW1ibHkgY29kZS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBXQVNNIHtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdvcmtlciBmaWVsZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3b3JrZXIgPSAnJztcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdhc20gZmllbGQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2FzbSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBjYW52YXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgY2FudmFzID0gbnVsbDtcbiAgICAvKiogQ3VycmVudCBXZWJYUiAgKi9cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfc2Vzc2lvbiA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiByZXF1ZXN0IHNlc3Npb24gY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVxdWVzdFNlc3Npb24gPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfZnJhbWUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gY3VycmVudCBXZWJYUiByZWZlcmVuY2Ugc3BhY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVmU3BhY2UgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgcmVmZXJlbmNlIHNwYWNlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZXMgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgY3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZVR5cGUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgR0wgcHJvamVjdGlvbiBsYXllci5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9iYXNlTGF5ZXIgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWVidWZmZXIgc2NhbGUgZmFjdG9yLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3IgPSAxLjA7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZWJ1ZmZlcihzKS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICAvKiB3ZWJ4cl9mYm8gd2lsbCBub3QgZ2V0IG92ZXJ3cml0dGVuIGlmIHdlIGFyZSByZW5kZXJpbmcgdG8gdGhlXG4gICAgICogZGVmYXVsdCBmcmFtZWJ1ZmZlciwgZS5nLiwgd2hlbiB1c2luZyBXZWJYUiBlbXVsYXRvci4gKi9cbiAgICB3ZWJ4cl9mYm8gPSAwO1xuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBXQVNNIG1lbW9yeSB2aWV3IHRvIGEgSmF2YVNjcmlwdCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHRyIFBvaW50ZXIgc3RhcnRcbiAgICAgKiBAcGFyYW0gcHRyRW5kIFBvaW50ZXIgZW5kXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBzdHJpbmdcbiAgICAgKi9cbiAgICBVVEY4Vmlld1RvU3RyaW5nO1xuICAgIC8qKiBJZiBgdHJ1ZWAsIGxvZ3Mgd2lsbCBub3Qgc3BhbSB0aGUgY29uc29sZSBvbiBlcnJvci4gKi9cbiAgICBfZGVhY3RpdmF0ZV9jb21wb25lbnRfb25fZXJyb3IgPSBmYWxzZTtcbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBwb2ludGVyLiAqL1xuICAgIF90ZW1wTWVtID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBzaXplLiAqL1xuICAgIF90ZW1wTWVtU2l6ZSA9IDA7XG4gICAgLyoqIFRlbXBvcmFyeSBmbG9hdCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbUZsb2F0ID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IGludCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbUludCA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50OCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQ4ID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IHVpbnQzMiBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQzMiA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50MTYgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50MTYgPSBudWxsO1xuICAgIC8qKiBMb2FkaW5nIHNjcmVlbiAuYmluIGZpbGUgZGF0YSAqL1xuICAgIF9sb2FkaW5nU2NyZWVuID0gbnVsbDtcbiAgICAvKiogTGlzdCBvZiBjYWxsYmFja3MgdHJpZ2dlcmVkIHdoZW4gdGhlIHNjZW5lIGlzIGxvYWRlZC4gKi9cbiAgICBfc2NlbmVMb2FkZWRDYWxsYmFjayA9IFtdO1xuICAgIC8qKlxuICAgICAqIE1hdGVyaWFsIGRlZmluaXRpb24gY2FjaGUuIEVhY2ggcGlwZWxpbmUgaGFzIGl0cyBvd25cbiAgICAgKiBhc3NvY2lhdGVkIG1hdGVyaWFsIGRlZmluaXRpb24uXG4gICAgICovXG4gICAgX21hdGVyaWFsRGVmaW5pdGlvbnMgPSBbXTtcbiAgICAvKiogSW1hZ2UgY2FjaGUuICovXG4gICAgX2ltYWdlcyA9IFtdO1xuICAgIC8qKiBDb21wb25lbnQgaW5zdGFuY2VzLiAqL1xuICAgIF9jb21wb25lbnRzID0gW107XG4gICAgLyoqIENvbXBvbmVudCBUeXBlIGluZm8uICovXG4gICAgX2NvbXBvbmVudFR5cGVzID0gW107XG4gICAgLyoqIEluZGV4IHBlciBjb21wb25lbnQgdHlwZSBuYW1lLiAqL1xuICAgIF9jb21wb25lbnRUeXBlSW5kaWNlcyA9IHt9O1xuICAgIC8qKiBXb25kZXJsYW5kIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBfZW5naW5lID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhpcyBydW50aW1lIGlzIHVzaW5nIHBoeXN4LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIF93aXRoUGh5c1ggPSBmYWxzZTtcbiAgICAvKiogRGVjb2RlciBmb3IgVVRGOCBgQXJyYXlCdWZmZXJgIHRvIEphdmFTY3JpcHQgc3RyaW5nLiAqL1xuICAgIF91dGY4RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpO1xuICAgIC8qKiBKYXZhU2NyaXB0IG1hbmFnZXIgaW5kZXguICovXG4gICAgX2pzTWFuYWdlckluZGV4Q2FjaGVkID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RyYXRpb24gaW5kZXggb2Yge0BsaW5rIEJyb2tlbkNvbXBvbmVudH0uXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gcmV0dXJuIGR1bW15IGluc3RhbmNlcyB3aGVuIGEgY29tcG9uZW50XG4gICAgICogaXNuJ3QgcmVnaXN0ZXJlZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfYnJva2VuQ29tcG9uZW50SW5kZXggPSAwO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgV2ViQXNzZW1ibHkgPD4gQVBJIGJyaWRnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aHJlYWRzIGB0cnVlYCBpZiB0aGUgcnVudGltZSB1c2VkIGhhcyB0aHJlYWRzIHN1cHBvcnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0aHJlYWRzKSB7XG4gICAgICAgIGlmICh0aHJlYWRzKSB7XG4gICAgICAgICAgICB0aGlzLlVURjhWaWV3VG9TdHJpbmcgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUodGhpcy5IRUFQVTguc2xpY2UocywgZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLlVURjhWaWV3VG9TdHJpbmcgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzKVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUodGhpcy5IRUFQVTguc3ViYXJyYXkocywgZSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleCA9IHRoaXMuX3JlZ2lzdGVyQ29tcG9uZW50KEJyb2tlbkNvbXBvbmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBjYWNoZSBvZiB0aGUgbGlicmFyeS5cbiAgICAgKlxuICAgICAqIEBub3RlIFNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRlYXJpbmcgZG93biB0aGUgcnVudGltZS5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG4gICAgICAgIHRoaXMuX21hdGVyaWFsRGVmaW5pdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5faW1hZ2VzID0gW107XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fanNNYW5hZ2VySW5kZXhDYWNoZWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleCA9IHRoaXMuX3JlZ2lzdGVyQ29tcG9uZW50KEJyb2tlbkNvbXBvbmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3RvciAgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQgdHlwZW5hbWUgKGUuZy4sIGAnY3Vyc29yLWNvbXBvbmVudCdgKS5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc1JlZ2lzdGVyZWQodHlwZSkge1xuICAgICAgICByZXR1cm4gdHlwZSBpbiB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBsZWdhY3kgY29tcG9uZW50IGluIHRoaXMgRW1zY3JpcHRlbiBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlTmFtZSBUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHBhcmFtZXRlcnMgKHByb3BlcnRpZXMpLlxuICAgICAqIEBwYXJhbSBvYmplY3QgVGhlIG9iamVjdCdzIHByb3RvdHlwZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVnaXN0cmF0aW9uIGluZGV4XG4gICAgICovXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50TGVnYWN5KHR5cGVOYW1lLCBwYXJhbXMsIG9iamVjdCkge1xuICAgICAgICBjb25zdCBjdG9yID0gY2xhc3MgQ3VzdG9tQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgICAgfTtcbiAgICAgICAgY3Rvci5UeXBlTmFtZSA9IHR5cGVOYW1lO1xuICAgICAgICBjdG9yLlByb3BlcnRpZXMgPSBwYXJhbXM7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY3Rvci5wcm90b3R5cGUsIG9iamVjdCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWdpc3RlckNvbXBvbmVudChjdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBjbGFzcyBjb21wb25lbnQgaW4gdGhpcyBFbXNjcmlwdGVuIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGN0b3IgVGhlIGNsYXNzIHRvIHJlZ2lzdGVyLlxuICAgICAqIEByZXR1cm5zIFRoZSByZWdpc3RyYXRpb24gaW5kZXguXG4gICAgICovXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KGN0b3IpIHtcbiAgICAgICAgaWYgKCFjdG9yLlR5cGVOYW1lKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBuYW1lIHByb3ZpZGVkIGZvciBjb21wb25lbnQuJyk7XG4gICAgICAgIGlmICghY3Rvci5wcm90b3R5cGUuX3RyaWdnZXJJbml0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHJlZ2lzdGVyQ29tcG9uZW50KCk6IENvbXBvbmVudCAke2N0b3IuVHlwZU5hbWV9IG11c3QgZXh0ZW5kIENvbXBvbmVudGApO1xuICAgICAgICB9XG4gICAgICAgIGluaGVyaXRQcm9wZXJ0aWVzKGN0b3IpO1xuICAgICAgICBfc2V0dXBEZWZhdWx0cyhjdG9yKTtcbiAgICAgICAgY29uc3QgdHlwZUluZGV4ID0gY3Rvci5UeXBlTmFtZSBpbiB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1xuICAgICAgICAgICAgPyB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXVxuICAgICAgICAgICAgOiB0aGlzLl9jb21wb25lbnRUeXBlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVzW3R5cGVJbmRleF0gPSBjdG9yO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXSA9IHR5cGVJbmRleDtcbiAgICAgICAgaWYgKGN0b3IgPT09IEJyb2tlbkNvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybiB0eXBlSW5kZXg7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RlcmVkIGNvbXBvbmVudCcsIGN0b3IuVHlwZU5hbWUsIGAoY2xhc3MgJHtjdG9yLm5hbWV9KWAsICd3aXRoIGluZGV4JywgdHlwZUluZGV4KTtcbiAgICAgICAgaWYgKGN0b3Iub25SZWdpc3RlcilcbiAgICAgICAgICAgIGN0b3Iub25SZWdpc3Rlcih0aGlzLl9lbmdpbmUpO1xuICAgICAgICByZXR1cm4gdHlwZUluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSB0aGUgcmVxdWVzdGVkIGFtb3VudCBvZiB0ZW1wb3JhcnkgbWVtb3J5XG4gICAgICogaW4gdGhpcyBXQVNNIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgVGhlIG51bWJlciBvZiBieXRlcyB0byBhbGxvY2F0ZVxuICAgICAqL1xuICAgIGFsbG9jYXRlVGVtcE1lbW9yeShzaXplKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBbGxvY2F0aW5nIHRlbXAgbWVtOicsIHNpemUpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtU2l6ZSA9IHNpemU7XG4gICAgICAgIGlmICh0aGlzLl90ZW1wTWVtKVxuICAgICAgICAgICAgdGhpcy5fZnJlZSh0aGlzLl90ZW1wTWVtKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbSA9IHRoaXMuX21hbGxvYyh0aGlzLl90ZW1wTWVtU2l6ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVtcE1lbW9yeSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAdG9kbzogRGVsZXRlIHRoaXMgYW5kIG9ubHkga2VlcCBgYWxsb2NhdGVUZW1wTWVtb3J5YFxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgTnVtYmVyIG9mIGJ5dGVzIHRvIGFsbG9jYXRlXG4gICAgICovXG4gICAgcmVxdWlyZVRlbXBNZW0oc2l6ZSkge1xuICAgICAgICBpZiAodGhpcy5fdGVtcE1lbVNpemUgPj0gc2l6ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogR3JvdyBpbiAxa2IgaW5jcmVtZW50cyAqL1xuICAgICAgICB0aGlzLmFsbG9jYXRlVGVtcE1lbW9yeShNYXRoLmNlaWwoc2l6ZSAvIDEwMjQpICogMTAyNCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdGVtcG9yYXJ5IG1lbW9yeSB2aWV3cy4gVGhpcyBtdXN0IGJlIGNhbGxlZCB3aGVuZXZlciB0aGVcbiAgICAgKiB0ZW1wb3JhcnkgbWVtb3J5IGFkZHJlc3MgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB1cGRhdGVUZW1wTWVtb3J5KCkge1xuICAgICAgICB0aGlzLl90ZW1wTWVtRmxvYXQgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbUludCA9IG5ldyBJbnQzMkFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheSh0aGlzLkhFQVA4LmJ1ZmZlciwgdGhpcy5fdGVtcE1lbSwgdGhpcy5fdGVtcE1lbVNpemUgPj4gMik7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1VaW50MTYgPSBuZXcgVWludDE2QXJyYXkodGhpcy5IRUFQOC5idWZmZXIsIHRoaXMuX3RlbXBNZW0sIHRoaXMuX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDggPSBuZXcgVWludDhBcnJheSh0aGlzLkhFQVA4LmJ1ZmZlciwgdGhpcy5fdGVtcE1lbSwgdGhpcy5fdGVtcE1lbVNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDggYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWRcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeVxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJVOChjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50ODtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVpbnQxNiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclUxNihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogMik7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDE2O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJVMzIoY291bnQpIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbVVpbnQzMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGludDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJJMzIoY291bnQpIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbUludDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZsb2F0MzIgYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWQuXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnkuXG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlckYzMihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtRmxvYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcHkgdGhlIHN0cmluZyBpbnRvIHRlbXBvcmFyeSBXQVNNIG1lbW9yeSBhbmQgcmV0cmlldmUgdGhlIHBvaW50ZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCB3aWxsIGNvbXB1dGUgdGhlIHN0cmxlbiBhbmQgYXBwZW5kIGEgYFxcMGAuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcmVzdWx0IHNob3VsZCBiZSB1c2VkICoqZGlyZWN0bHkqKiBvdGhlcndpc2UgaXQgbWlnaHQgZ2V0XG4gICAgICogb3ZlcnJpZGRlbiBieSBhbnkgbmV4dCBjYWxsIG1vZGlmeWluZyB0aGUgdGVtcG9yYXJ5IG1lbW9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB0byB3cml0ZSB0byB0ZW1wb3JhcnkgbWVtb3J5XG4gICAgICogQHBhcmFtIGJ5dGVPZmZzZXQgVGhlIHN0YXJ0aW5nIGJ5dGUgb2Zmc2V0IGluIHRoZSB0ZW1wb3JhcnkgbWVtb3J5IGF0IHdoaWNoXG4gICAgICogICAgIHRoZSBzdHJpbmcgc2hvdWxkIGJlIHdyaXR0ZW4uIFRoaXMgaXMgdXNlZnVsIHdoZW4gdXNpbmcgbXVsdGlwbGUgdGVtcG9yYXJpZXMuXG4gICAgICogQHJldHVybiBUaGUgdGVtcG9yYXJ5IHBvaW50ZXIgb250byB0aGUgV0FTTSBtZW1vcnlcbiAgICAgKi9cbiAgICB0ZW1wVVRGOChzdHIsIGJ5dGVPZmZzZXQgPSAwKSB7XG4gICAgICAgIGNvbnN0IHN0ckxlbiA9IHRoaXMubGVuZ3RoQnl0ZXNVVEY4KHN0cikgKyAxO1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKHN0ckxlbiArIGJ5dGVPZmZzZXQpO1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl90ZW1wTWVtICsgYnl0ZU9mZnNldDtcbiAgICAgICAgdGhpcy5zdHJpbmdUb1VURjgoc3RyLCBwdHIsIHN0ckxlbik7XG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgaW5kZXggb2YgdGhlIGNvbXBvbmVudCB0eXBlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgdXNlcyBtYWxsb2MgYW5kIGNvcGllcyB0aGUgc3RyaW5nXG4gICAgICogdG8gYXZvaWQgb3ZlcndyaXRpbmcgY2FsbGVyJ3MgdGVtcG9yYXJ5IGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZVxuICAgICAqIEByZXR1cm4gVGhlIGNvbXBvbmVudCB0eXBlIGluZGV4XG4gICAgICovXG4gICAgX3R5cGVJbmRleEZvcih0eXBlKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aEJ5dGVzID0gdGhpcy5sZW5ndGhCeXRlc1VURjgodHlwZSkgKyAxO1xuICAgICAgICBjb25zdCBtZW0gPSB0aGlzLl9tYWxsb2MobGVuZ3RoQnl0ZXMpO1xuICAgICAgICB0aGlzLnN0cmluZ1RvVVRGOCh0eXBlLCBtZW0sIGxlbmd0aEJ5dGVzKTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50VHlwZSA9IHRoaXMuX3dsX2dldF9jb21wb25lbnRfbWFuYWdlcl9pbmRleChtZW0pO1xuICAgICAgICB0aGlzLl9mcmVlKG1lbSk7XG4gICAgICAgIHJldHVybiBjb21wb25lbnRUeXBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG5hbWUgb2YgY29tcG9uZW50IHR5cGUgc3RvcmVkIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlSW5kZXggVGhlIHR5cGUgaW5kZXhcbiAgICAgKiBAcmV0dXJuIFRoZSBuYW1lIGFzIGEgc3RyaW5nXG4gICAgICovXG4gICAgX3R5cGVOYW1lRm9yKHR5cGVJbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VVEY4VG9TdHJpbmcodGhpcy5fd2xfY29tcG9uZW50X21hbmFnZXJfbmFtZSh0eXBlSW5kZXgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHJ1bnRpbWUgc3VwcG9ydHMgcGh5c3ggb3Igbm90LlxuICAgICAqL1xuICAgIGdldCB3aXRoUGh5c1goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGh5c1g7XG4gICAgfVxuICAgIC8qKiBKYXZhU2NyaXB0IG1hbmFnZXIgaW5kZXguICovXG4gICAgZ2V0IF9qc01hbmFnZXJJbmRleCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2pzTWFuYWdlckluZGV4Q2FjaGVkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9qc01hbmFnZXJJbmRleENhY2hlZCA9IHRoaXMuX3R5cGVJbmRleEZvcignanMnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fanNNYW5hZ2VySW5kZXhDYWNoZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZW5naW5lIGluc3RhbmNlIGhvbGRpbmcgdGhpcyBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgX3NldEVuZ2luZShlbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgIH1cbiAgICAvKiBXZWJBc3NlbWJseSB0byBKUyBjYWxsIGJyaWRnZS4gKi9cbiAgICBfd2xqc194cl9zZXNzaW9uX3N0YXJ0KG1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VuZ2luZS54ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lLnhyID0gbmV3IFhSKHRoaXMsIG1vZGUpO1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQubm90aWZ5KHRoaXMud2VieHJfc2Vzc2lvbiwgbW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3dsanNfeHJfc2Vzc2lvbl9lbmQoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RW1pdHRlciA9IHRoaXMuX2VuZ2luZS5vblhSU2Vzc2lvblN0YXJ0O1xuICAgICAgICBpZiAoc3RhcnRFbWl0dGVyIGluc3RhbmNlb2YgUmV0YWluRW1pdHRlcilcbiAgICAgICAgICAgIHN0YXJ0RW1pdHRlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25FbmQubm90aWZ5KCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS54ciA9IG51bGw7XG4gICAgfVxuICAgIF93bGpzX3hyX2Rpc2FibGUoKSB7XG4gICAgICAgIC8qIEB0b2RvIFRoaXMgY291bGQgZGlyZWN0bHkgYmUgZnVsbHkgaGFuZGxlZCBpbiBKUy4gKi9cbiAgICAgICAgdGhpcy5fZW5naW5lLmFyU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2VuZ2luZS52clN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBfd2xqc19hbGxvY2F0ZShudW1Db21wb25lbnRzKSB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBuZXcgQXJyYXkobnVtQ29tcG9uZW50cyk7XG4gICAgfVxuICAgIF93bGpzX2luaXQod2l0aFBoeXNYKSB7XG4gICAgICAgIHRoaXMuX3dpdGhQaHlzWCA9IHdpdGhQaHlzWDtcbiAgICAgICAgLyogVGFyZ2V0IG1lbW9yeSBmb3IgSlMgQVBJIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhcnJheXMgKi9cbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG4gICAgfVxuICAgIF93bGpzX3JlYWxsb2NhdGUobnVtQ29tcG9uZW50cykge1xuICAgICAgICBpZiAobnVtQ29tcG9uZW50cyA+IHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb25lbnRzLmxlbmd0aCA9IG51bUNvbXBvbmVudHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3dsanNfc2NlbmVfYWRkX21hdGVyaWFsX2RlZmluaXRpb24oZGVmaW5pdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qIENhY2hlIG1hdGVyaWFsIGRlZmluaXRpb24gZm9yIGZhc3RlciByZWFkL3dyaXRlICovXG4gICAgICAgIGNvbnN0IG5iUGFyYW1zID0gdGhpcy5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfY291bnQoZGVmaW5pdGlvbklkKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYlBhcmFtczsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5VVEY4VG9TdHJpbmcodGhpcy5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fbmFtZShkZWZpbml0aW9uSWQsIGkpKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV90eXBlKGRlZmluaXRpb25JZCwgaSk7XG4gICAgICAgICAgICBkZWZpbml0aW9uLnNldChuYW1lLCB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0ICYgMHhmZixcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50Q291bnQ6ICh0ID4+IDgpICYgMHhmZixcbiAgICAgICAgICAgICAgICAgICAgbWV0YVR5cGU6ICh0ID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hdGVyaWFsRGVmaW5pdGlvbnNbZGVmaW5pdGlvbklkXSA9IGRlZmluaXRpb247XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fYm9vbChjLCBwLCBwZSwgdikge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhwLCBwZSk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNbY11bcGFyYW1dID0gdiAhPT0gMDtcbiAgICB9XG4gICAgX3dsanNfc2V0X2NvbXBvbmVudF9wYXJhbV9pbnQoYywgcCwgcGUsIHYpIHtcbiAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcocCwgcGUpO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzW2NdW3BhcmFtXSA9IHY7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fZmxvYXQoYywgcCwgcGUsIHYpIHtcbiAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcocCwgcGUpO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzW2NdW3BhcmFtXSA9IHY7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fc3RyaW5nKGMsIHAsIHBlLCB2LCB2ZSkge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhwLCBwZSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHYsIHZlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c1tjXVtwYXJhbV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgX3dsanNfc2V0X2NvbXBvbmVudF9wYXJhbV9jb2xvcihjLCBwLCBwZSwgdikge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhwLCBwZSk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNbY11bcGFyYW1dID0gbmV3IEZsb2F0MzJBcnJheShbMCwgOCwgMTYsIDI0XS5tYXAoKHMpID0+ICgodiA+Pj4gcykgJiAweGZmKSAvIDI1NS4wKSk7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fb2JqZWN0KGMsIHAsIHBlLCB2KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHAsIHBlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c1tjXVtwYXJhbV0gPVxuICAgICAgICAgICAgdiA+IDAgPyB0aGlzLl9lbmdpbmUud3JhcE9iamVjdCh2KSA6IG51bGw7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fbWVzaChjLCBwLCBwZSwgdikge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhwLCBwZSk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNbY11bcGFyYW1dID1cbiAgICAgICAgICAgIHYgPiAwID8gbmV3IE1lc2godGhpcy5fZW5naW5lLCB2KSA6IG51bGw7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fdGV4dHVyZShjLCBwLCBwZSwgdikge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhwLCBwZSk7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNbY11bcGFyYW1dID1cbiAgICAgICAgICAgIHYgPiAwID8gdGhpcy5fZW5naW5lLnRleHR1cmVzLndyYXAodikgOiBudWxsO1xuICAgIH1cbiAgICBfd2xqc19zZXRfY29tcG9uZW50X3BhcmFtX21hdGVyaWFsKGMsIHAsIHBlLCB2KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHAsIHBlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c1tjXVtwYXJhbV0gPVxuICAgICAgICAgICAgdiA+IDAgPyBuZXcgTWF0ZXJpYWwodGhpcy5fZW5naW5lLCB2KSA6IG51bGw7XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fYW5pbWF0aW9uKGMsIHAsIHBlLCB2KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHAsIHBlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c1tjXVtwYXJhbV0gPVxuICAgICAgICAgICAgdiA+IDAgPyBuZXcgQW5pbWF0aW9uKHRoaXMuX2VuZ2luZSwgdikgOiBudWxsO1xuICAgIH1cbiAgICBfd2xqc19zZXRfY29tcG9uZW50X3BhcmFtX3NraW4oYywgcCwgcGUsIHYpIHtcbiAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcocCwgcGUpO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzW2NdW3BhcmFtXSA9XG4gICAgICAgICAgICB2ID4gMCA/IG5ldyBTa2luKHRoaXMuX2VuZ2luZSwgdikgOiBudWxsO1xuICAgIH1cbiAgICBfd2xqc19nZXRfY29tcG9uZW50X3R5cGVfaW5kZXgobmFtZVB0ciwgbmFtZUVuZFB0cikge1xuICAgICAgICBjb25zdCB0eXBlbmFtZSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhuYW1lUHRyLCBuYW1lRW5kUHRyKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1t0eXBlbmFtZV07XG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYnJva2VuQ29tcG9uZW50SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfY3JlYXRlKGpzTWFuYWdlckluZGV4LCBpbmRleCwgaWQsIHR5cGUsIG9iamVjdCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5fY29tcG9uZW50VHlwZXNbdHlwZV07XG4gICAgICAgIGlmICghY3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIGluZGV4ICR7dHlwZX0gaXNuJ3QgcmVnaXN0ZXJlZGApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21wb25lbnQgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29tcG9uZW50ID0gbmV3IGN0b3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGR1cmluZyBpbnN0YW50aWF0aW9uIG9mIGNvbXBvbmVudCAke2N0b3IuVHlwZU5hbWV9YCk7XG4gICAgICAgICAgICBjb21wb25lbnQgPSBuZXcgQnJva2VuQ29tcG9uZW50KHRoaXMuX2VuZ2luZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyogU2V0cyB0aGUgbWFuYWdlciBhbmQgaWRlbnRpZmllciBmcm9tIHRoZSBvdXRzaWRlLCB0byBzaW1wbGlmeSB0aGUgdXNlcidzIGNvbnN0cnVjdG9yLiAqL1xuICAgICAgICAvKiBAdHMtaWdub3JlICovXG4gICAgICAgIGNvbXBvbmVudC5fZW5naW5lID0gdGhpcy5fZW5naW5lO1xuICAgICAgICBjb21wb25lbnQuX21hbmFnZXIgPSBqc01hbmFnZXJJbmRleDtcbiAgICAgICAgY29tcG9uZW50Ll9pZCA9IGlkO1xuICAgICAgICBjb21wb25lbnQuX29iamVjdCA9IHRoaXMuX2VuZ2luZS53cmFwT2JqZWN0KG9iamVjdCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnQucmVzZXRQcm9wZXJ0aWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBkdXJpbmcgJHtjb21wb25lbnQudHlwZX0gcmVzZXRQcm9wZXJ0aWVzKCkgb24gb2JqZWN0ICR7Y29tcG9uZW50Lm9iamVjdC5uYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNbaW5kZXhdID0gY29tcG9uZW50O1xuICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfaW5pdChjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlckluaXQoKTtcbiAgICB9XG4gICAgX3dsanNfY29tcG9uZW50X3VwZGF0ZShjb21wb25lbnQsIGR0KSB7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLl9jb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGMuX3RyaWdnZXJVcGRhdGUoZHQpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfb25BY3RpdmF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgaWYgKGMpXG4gICAgICAgICAgICBjLl90cmlnZ2VyT25BY3RpdmF0ZSgpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfb25EZWFjdGl2YXRlKGNvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyT25EZWFjdGl2YXRlKCk7XG4gICAgfVxuICAgIF93bGpzX2NvbXBvbmVudF9vbkRlc3Ryb3koY29tcG9uZW50KSB7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLl9jb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGMuX3RyaWdnZXJPbkRlc3Ryb3koKTtcbiAgICB9XG4gICAgX3dsanNfc3dhcChhLCBiKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEEgPSB0aGlzLl9jb21wb25lbnRzW2FdO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzW2FdID0gdGhpcy5fY29tcG9uZW50c1tiXTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c1tiXSA9IGNvbXBvbmVudEE7XG4gICAgfVxuICAgIF93bGpzX2NvcHkoc3JjLCBkc3QpIHtcbiAgICAgICAgY29uc3QgZGVzdENvbXAgPSB0aGlzLl9jb21wb25lbnRzW2RzdF07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZXN0Q29tcC5jb3B5KHRoaXMuX2NvbXBvbmVudHNbc3JjXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBkdXJpbmcgJHtkZXN0Q29tcC50eXBlfSBjb3B5KCkgb24gb2JqZWN0ICR7ZGVzdENvbXAub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKlxuICogQXBpIDw+IFJ1bnRpbWUgY29tcGF0aWJpbGl0eS5cbiAqXG4gKiBTb21lIGZlYXR1cmVzIGV4cG9zZWQgaW4gdGhlIEFQSSBhcmUgb25seSBhdmFpbGFibGUgZnJvbSBhIHNwZWNpZmljXG4gKiBydW50aW1lIHZlcnNpb24uXG4gKlxuICogRXZlcnkgYWRkZWQgZmVhdHVyZSBtdXN0IHRocm93IGJ5IGRlZmF1bHQuIElmIHRoZSBydW50aW1lIGxvYWRlZFxuICogaGFzIHRoZSBzcGVjaWZpYyBmZWF0dXJlLCB0aGUgbWV0aG9kIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgRW1zY3JpcHRlblxuICogdXBvbiBsb2FkaW5nLlxuICovXG5mdW5jdGlvbiB0aHJvd0ludmFsaWRSdW50aW1lKHZlcnNpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZlYXR1cmUgYWRkZWQgaW4gdmVyc2lvbiAke3ZlcnNpb259LmAgK1xuICAgICAgICAgICAgYFxcblxcdFx1MjE5MiBQbGVhc2UgdXNlIGEgV29uZGVybGFuZCBFbmdpbmUgZWRpdG9yIHZlcnNpb24gPj0gJHt2ZXJzaW9ufWApO1xuICAgIH07XG59XG5jb25zdCByZXF1aXJlUnVudGltZTFfMV8xID0gdGhyb3dJbnZhbGlkUnVudGltZSgnMS4xLjEnKTtcbi8qKiBAdG9kbzogUmVtb3ZlIGF0IDEuMi4wICovXG5XQVNNLnByb3RvdHlwZS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2xhdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8xXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRUcmFuc2xhdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8xXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2Zvcm0gPSByZXF1aXJlUnVudGltZTFfMV8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0Um90YXRpb24gPSByZXF1aXJlUnVudGltZTFfMV8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX29iamVjdF9jbG9uZSA9IHJlcXVpcmVSdW50aW1lMV8xXzE7XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmNvbnN0IFNBTVBMRV9SQVRFID0gNDgwMDA7XG4vKiA1bXMgZm9yIG5vdywgc28gaXQgZGVmaW5pdGVseSB0YWtlcyBsZXNzIHRoYW4gb25lIGZyYW1lICovXG5jb25zdCBGQURFX0RVUkFUSU9OID0gNSAvIDEwMDA7XG5jb25zdCB0ZW1wVmVjID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRlbXBWZWMyID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbi8qKlxuICogVmFyaWFibGVzXG4gKi9cbmxldCBfYXVkaW9Db250ZXh0ID0gbnVsbDtcbmlmICh3aW5kb3cuQXVkaW9Db250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBfYXVkaW9Db250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCh7XG4gICAgICAgIGxhdGVuY3lIaW50OiAnaW50ZXJhY3RpdmUnLFxuICAgICAgICBzYW1wbGVSYXRlOiBTQU1QTEVfUkFURSxcbiAgICB9KTtcbn1cbmV4cG9ydCB7IF9hdWRpb0NvbnRleHQgfTtcbi8qKlxuICogVW5sb2NrcyB0aGUgV2ViQXVkaW8gQXVkaW9Db250ZXh0LlxuICpcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdoZW4gdGhlIGF1ZGlvQ29udGV4dCByZXN1bWVzLlxuICogQG5vdGUgV2ViQXVkaW8gQXVkaW9Db250ZXh0IG9ubHkgcmVzdW1lcyBvbiB1c2VyIGludGVyYWN0aW9uLlxuICogQHdhcm5pbmcgVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHksIHVzZSBhdCBvd24gcmlzayFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIF91bmxvY2tBdWRpb0NvbnRleHQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVubG9ja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBfYXVkaW9Db250ZXh0LnJlc3VtZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9ja0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaCcsIHVubG9ja0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHVubG9ja0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2tIYW5kbGVyKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoJywgdW5sb2NrSGFuZGxlcik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrSGFuZGxlcik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB1bmxvY2tIYW5kbGVyKTtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIFdvbmRlcmxhbmQgYXVkaW8gbGlzdGVuZXIgY29tcG9uZW50LlxuICogVXBkYXRlcyB0aGUgcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uIG9mIGEgV2ViQXVkaW8gbGlzdGVuZXIgaW5zdGFuY2UuXG4gKlxuICogQG5vdGUgT25seSBvbmUgbGlzdGVuZXIgc2hvdWxkIGJlIGFjdGl2ZSBhdCBhIHRpbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb0xpc3RlbmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnYXVkaW8tbGlzdGVuZXInO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgLyoqXG4gICAgICogVGhlIFdlYkF1ZGlvIGxpc3RlbmVyIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBsaXN0ZW5lciA9IF9hdWRpb0NvbnRleHQubGlzdGVuZXI7XG4gICAgLyoqXG4gICAgICogVGhlIHRpbWUgaW4gd2hpY2ggdGhlIGxhc3QgcG9zaXRpb24gdXBkYXRlIHdpbGwgYmUgZG9uZS5cbiAgICAgKi9cbiAgICB0aW1lID0gMDtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgLyogQ2hlY2sgaWYgcmVjb21tZW5kZWQgZnVuY3Rpb25zIGFyZSBzdXBwb3J0ZWQgKi9cbiAgICAgICAgaWYgKCdwb3NpdGlvblgnIGluIHRoaXMubGlzdGVuZXIpIHtcbiAgICAgICAgICAgIC8qIHN1cHBvcnRlZCAqL1xuICAgICAgICAgICAgdGhpcy51cGRhdGUgPSB0aGlzLl91cGRhdGVSZWNvbW1lbmRlZC5iaW5kKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogdW5zdXBwb3J0ZWQgKi9cbiAgICAgICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy5fdXBkYXRlRGVwcmVjYXRlZC5iaW5kKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF91cGRhdGVEZXByZWNhdGVkKCkge1xuICAgICAgICAvKiBTZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRlbXBWZWMpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLnNldFBvc2l0aW9uKHRlbXBWZWNbMF0sIHRlbXBWZWNbMl0sIC10ZW1wVmVjWzFdKTtcbiAgICAgICAgLyogU2V0IHRoZSBvcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIgKi9cbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Rm9yd2FyZFdvcmxkKHRlbXBWZWMpO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRVcFdvcmxkKHRlbXBWZWMyKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih0ZW1wVmVjWzBdLCB0ZW1wVmVjWzJdLCAtdGVtcFZlY1sxXSwgdGVtcFZlYzJbMF0sIHRlbXBWZWMyWzJdLCAtdGVtcFZlYzJbMV0pO1xuICAgIH1cbiAgICBfdXBkYXRlUmVjb21tZW5kZWQoKSB7XG4gICAgICAgIHRoaXMudGltZSA9IF9hdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyBGQURFX0RVUkFUSU9OO1xuICAgICAgICAvKiBTZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRlbXBWZWMpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLnBvc2l0aW9uWC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0ZW1wVmVjWzBdLCB0aGlzLnRpbWUpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLnBvc2l0aW9uWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0ZW1wVmVjWzJdLCB0aGlzLnRpbWUpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLnBvc2l0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgtdGVtcFZlY1sxXSwgdGhpcy50aW1lKTtcbiAgICAgICAgLyogU2V0IHRoZSBmYWNpbmcgZGlyZWN0aW9uIG9mIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRGb3J3YXJkV29ybGQodGVtcFZlYyk7XG4gICAgICAgIHRoaXMubGlzdGVuZXIuZm9yd2FyZFgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodGVtcFZlY1swXSwgdGhpcy50aW1lKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lci5mb3J3YXJkWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0ZW1wVmVjWzJdLCB0aGlzLnRpbWUpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLmZvcndhcmRaLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKC10ZW1wVmVjWzFdLCB0aGlzLnRpbWUpO1xuICAgICAgICAvKiBTZXQgdGhlIGhlYWQgb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIHRoaXMub2JqZWN0LmdldFVwV29ybGQodGVtcFZlYyk7XG4gICAgICAgIHRoaXMubGlzdGVuZXIudXBYLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRlbXBWZWNbMF0sIHRoaXMudGltZSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXIudXBZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRlbXBWZWNbMl0sIHRoaXMudGltZSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXIudXBaLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKC10ZW1wVmVjWzFdLCB0aGlzLnRpbWUpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBfYXVkaW9Db250ZXh0IH0gZnJvbSAnLi9hdWRpby1saXN0ZW5lci5qcyc7XG5pbXBvcnQgeyBBdWRpb0NoYW5uZWwsIFBsYXlTdGF0ZSB9IGZyb20gJy4vYXVkaW8tbWFuYWdlci5qcyc7XG4vKiBSYW1wIHRpbWVzIG9mIDAgY2F1c2UgYSBjbGljaywgNSBtcyBzaG91bGQgYmUgc3VmZmljaWVudCAqL1xuZXhwb3J0IGNvbnN0IE1JTl9SQU1QX1RJTUUgPSA1IC8gMTAwMDtcbi8qIE5lZWRlZCBiZWNhdXNlIFdlYkF1ZGlvIHJhbXAgZnVuY3Rpb24gZG9lc24ndCBhY2NlcHQgMCBhcyB2YWxpZCB2b2x1bWUgKi9cbmV4cG9ydCBjb25zdCBNSU5fVk9MVU1FID0gMC4wMDE7XG5leHBvcnQgY29uc3QgREVGX1ZPTCA9IDEuMDtcbmNvbnN0IERFRkFVTFRfUEFOTkVSX0NPTkZJRyA9IHtcbiAgICBjb25lSW5uZXJBbmdsZTogMzYwLFxuICAgIGNvbmVPdXRlckFuZ2xlOiAwLFxuICAgIGNvbmVPdXRlckdhaW46IDAsXG4gICAgZGlzdGFuY2VNb2RlbDogJ2V4cG9uZW50aWFsJyxcbiAgICBtYXhEaXN0YW5jZTogMTAwMDAsXG4gICAgcmVmRGlzdGFuY2U6IDEuMCxcbiAgICByb2xsb2ZmRmFjdG9yOiAxLjAsXG4gICAgcGFubmluZ01vZGVsOiAnSFJURicsXG4gICAgcG9zaXRpb25YOiAwLFxuICAgIHBvc2l0aW9uWTogMCxcbiAgICBwb3NpdGlvblo6IDEsXG4gICAgb3JpZW50YXRpb25YOiAwLFxuICAgIG9yaWVudGF0aW9uWTogMCxcbiAgICBvcmllbnRhdGlvblo6IDEsXG59O1xuY2xhc3MgUGxheWFibGVOb2RlIHtcbiAgICBfZ2Fpbk5vZGUgPSBuZXcgR2Fpbk5vZGUoX2F1ZGlvQ29udGV4dCk7XG4gICAgX3Bhbm5lck5vZGUgPSBuZXcgUGFubmVyTm9kZShfYXVkaW9Db250ZXh0LCBERUZBVUxUX1BBTk5FUl9DT05GSUcpO1xuICAgIF9hdWRpb05vZGUgPSBuZXcgQXVkaW9CdWZmZXJTb3VyY2VOb2RlKF9hdWRpb0NvbnRleHQpO1xuICAgIF9wYW5uZXJPcHRpb25zID0gREVGQVVMVF9QQU5ORVJfQ09ORklHO1xuICAgIF9pc1BsYXlpbmcgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIF9yZXNldCgpIHtcbiAgICAgICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2F1ZGlvTm9kZS5vbmVuZGVkID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLnN0b3AoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5fcGFubmVyTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuX2F1ZGlvTm9kZSA9IG5ldyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUoX2F1ZGlvQ29udGV4dCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJ1ZmZlclBsYXllciBleHRlbmRzIFBsYXlhYmxlTm9kZSB7XG4gICAgYnVmZmVySWQgPSAtMTtcbiAgICBwcmlvcml0eSA9IGZhbHNlO1xuICAgIF9hdWRpb01hbmFnZXI7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIEJ1ZmZlclBsYXllci5cbiAgICAgKlxuICAgICAqIEB3YXJuaW5nIFRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LiBCdWZmZXJQbGF5ZXIncyBzaG91bGQgb25seSBiZSBjcmVhdGVkIGFuZCB1c2VkIGluc2lkZSB0aGUgQXVkaW9NYW5hZ2VyLlxuICAgICAqIEBwYXJhbSBhdWRpb01hbmFnZXIgTWFuYWdlciB0aGF0IG1hbmFnZXMgdGhpcyBwbGF5ZXIuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXVkaW9NYW5hZ2VyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2F1ZGlvTWFuYWdlciA9IGF1ZGlvTWFuYWdlcjtcbiAgICB9XG4gICAgcGxheShhdWRpb0J1ZmZlcnMsIGlkLCBjb25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUGxheWluZykge1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWZmZXJJZCA9IGlkO1xuICAgICAgICBzd2l0Y2ggKGNvbmZpZz8uY2hhbm5lbCkge1xuICAgICAgICAgICAgY2FzZSBBdWRpb0NoYW5uZWwuTVVTSUM6XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLl9hdWRpb01hbmFnZXJbJ19tdXNpY0dhaW4nXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvQ2hhbm5lbC5NQVNURVI6XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLl9hdWRpb01hbmFnZXJbJ19tYXN0ZXJHYWluJ10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLl9nYWluTm9kZS5jb25uZWN0KHRoaXMuX2F1ZGlvTWFuYWdlclsnX3NmeEdhaW4nXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IGNvbmZpZz8udm9sdW1lIHx8IERFRl9WT0w7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXVkaW9CdWZmZXJzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuX2F1ZGlvTm9kZS5idWZmZXIgPSBhdWRpb0J1ZmZlcnNbcmFuZG9tSW5kZXhdO1xuICAgICAgICB0aGlzLl9hdWRpb05vZGUubG9vcCA9IGNvbmZpZz8ubG9vcCB8fCBmYWxzZTtcbiAgICAgICAgaWYgKGNvbmZpZz8ucG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gY29uZmlnLnBvc2l0aW9uO1xuICAgICAgICAgICAgdGhpcy5fcGFubmVyT3B0aW9ucy5wb3NpdGlvblggPSBwb3NpdGlvblswXTtcbiAgICAgICAgICAgIHRoaXMuX3Bhbm5lck9wdGlvbnMucG9zaXRpb25ZID0gcG9zaXRpb25bMl07XG4gICAgICAgICAgICB0aGlzLl9wYW5uZXJPcHRpb25zLnBvc2l0aW9uWiA9IC1wb3NpdGlvblsxXTtcbiAgICAgICAgICAgIC8qIFRoaXMgaXMgYSB3b3JrYXJvdW5kISBXZSBjYW50IHJlLXVzZSBwYW5uZXIgbm9kZXMgYmVjYXVzZSB0aGV5IGRvbid0IHVwZGF0ZSBmYXN0IGVub3VnaCB3aGVuXG4gICAgICAgICAgICAgcmVjb25uZWN0aW5nICovXG4gICAgICAgICAgICB0aGlzLl9wYW5uZXJOb2RlID0gbmV3IFBhbm5lck5vZGUoX2F1ZGlvQ29udGV4dCwgdGhpcy5fcGFubmVyT3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb05vZGUuY29ubmVjdCh0aGlzLl9wYW5uZXJOb2RlKS5jb25uZWN0KHRoaXMuX2dhaW5Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvTm9kZS5jb25uZWN0KHRoaXMuX2dhaW5Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hdWRpb05vZGUuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLm9uZW5kZWQgPSAoKSA9PiB0aGlzLnN0b3BBbmRGcmVlKCk7XG4gICAgICAgIHRoaXMuX2lzUGxheWluZyA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMgc3RvcCgpIGJ1dCBhZGRpdGlvbmFsbHkgY2FsbHMgZnJlZSBvbiB0aGUgYXVkaW8gbWFuYWdlciwgc28gdGhhdCBpdCBpcyBhdmFpbGFibGUgYWdhaW4uXG4gICAgICovXG4gICAgc3RvcEFuZEZyZWUoKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLl9hdWRpb01hbmFnZXIuX2ZyZWVVcEJ1c3lQbGF5ZXIodGhpcy5idWZmZXJJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGN1cnJlbnQgcGxheWJhY2sgYW5kIHNlbmRzIG5vdGlmaWNhdGlvbiBvbiB0aGUgYXVkaW8gbWFuYWdlcnMgZW1pdHRlci5cbiAgICAgKi9cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzUGxheWluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLl9hdWRpb01hbmFnZXIuZW1pdHRlci5ub3RpZnkoeyBpZDogdGhpcy5idWZmZXJJZCwgc3RhdGU6IFBsYXlTdGF0ZS5TVE9QUEVEIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPbmVTaG90UGxheWVyIGV4dGVuZHMgUGxheWFibGVOb2RlIHtcbiAgICBfYXVkaW9NYW5hZ2VyO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBPbmVTaG90UGxheWVyLlxuICAgICAqXG4gICAgICogQHdhcm5pbmcgVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuIE9uZVNob3RQbGF5ZXJzJ3Mgc2hvdWxkIG9ubHkgYmUgY3JlYXRlZCBhbmQgdXNlZCBpbnNpZGUgdGhlIEF1ZGlvTWFuYWdlci5cbiAgICAgKiBAcGFyYW0gYXVkaW9NYW5hZ2VyIE1hbmFnZXIgdGhhdCBtYW5hZ2VzIHRoaXMgcGxheWVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvTWFuYWdlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9hdWRpb01hbmFnZXIgPSBhdWRpb01hbmFnZXI7XG4gICAgICAgIHRoaXMuX2dhaW5Ob2RlLmNvbm5lY3QodGhpcy5fYXVkaW9NYW5hZ2VyWydfc2Z4R2FpbiddKTtcbiAgICB9XG4gICAgYXN5bmMgcGxheShhdWRpb0J1ZmZlciwgdm9sLCBwb3NpdGlvbikge1xuICAgICAgICBpZiAodGhpcy5faXNQbGF5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9nYWluTm9kZS5nYWluLnZhbHVlID0gTWF0aC5tYXgoTUlOX1ZPTFVNRSwgdm9sKTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLmJ1ZmZlciA9IGF1ZGlvQnVmZmVyO1xuICAgICAgICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb05vZGUuY29ubmVjdCh0aGlzLl9nYWluTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wYW5uZXJPcHRpb25zLnBvc2l0aW9uWCA9IHBvc2l0aW9uWzBdO1xuICAgICAgICAgICAgdGhpcy5fcGFubmVyT3B0aW9ucy5wb3NpdGlvblkgPSBwb3NpdGlvblsyXTtcbiAgICAgICAgICAgIHRoaXMuX3Bhbm5lck9wdGlvbnMucG9zaXRpb25aID0gLXBvc2l0aW9uWzFdO1xuICAgICAgICAgICAgLyogVGhpcyBpcyBhIHdvcmthcm91bmQhLiBXZSBjYW50IHJlLXVzZSBwYW5uZXIgbm9kZXMgYmVjYXVzZSB0aGV5IGRvbid0IHVwZGF0ZSBmYXN0IGVub3VnaCB3aGVuXG4gICAgICAgICAgICAgcmVjb25uZWN0aW5nICovXG4gICAgICAgICAgICB0aGlzLl9wYW5uZXJOb2RlID0gbmV3IFBhbm5lck5vZGUoX2F1ZGlvQ29udGV4dCwgdGhpcy5fcGFubmVyT3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb05vZGUuY29ubmVjdCh0aGlzLl9wYW5uZXJOb2RlKS5jb25uZWN0KHRoaXMuX2dhaW5Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hdWRpb05vZGUub25lbmRlZCA9ICgpID0+IHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLl9hdWRpb05vZGUuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1BsYXlpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IF9hdWRpb0NvbnRleHQsIF91bmxvY2tBdWRpb0NvbnRleHQgfSBmcm9tICcuL2F1ZGlvLWxpc3RlbmVyLmpzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgQnVmZmVyUGxheWVyLCBERUZfVk9MLCBNSU5fUkFNUF9USU1FLCBNSU5fVk9MVU1FLCBPbmVTaG90UGxheWVyLCB9IGZyb20gJy4vYXVkaW8tcGxheWVycy5qcyc7XG4vKipcbiAqIEVudW1lcmF0ZXMgdGhlIGF2YWlsYWJsZSBjaGFubmVscyB3aXRoaW4gdGhlIEF1ZGlvTWFuYWdlci5cbiAqIFRoZXNlIGNoYW5uZWxzIGNhbiBiZSB1dGlsaXplZCB0byByZWd1bGF0ZSBnbG9iYWwgdm9sdW1lIG9mIGF1ZGlvLlxuICovXG5leHBvcnQgdmFyIEF1ZGlvQ2hhbm5lbDtcbihmdW5jdGlvbiAoQXVkaW9DaGFubmVsKSB7XG4gICAgLyoqIEludGVuZGVkIGZvciBzb3VuZCBlZmZlY3RzLiBDb25uZWN0cyB0byBNYXN0ZXIgQXVkaW9DaGFubmVsLiAqL1xuICAgIEF1ZGlvQ2hhbm5lbFtBdWRpb0NoYW5uZWxbXCJTRlhcIl0gPSAwXSA9IFwiU0ZYXCI7XG4gICAgLyoqIEludGVuZGVkIGZvciBtdXNpYy4gQ29ubmVjdHMgdG8gTWFzdGVyIEF1ZGlvQ2hhbm5lbC4gKi9cbiAgICBBdWRpb0NoYW5uZWxbQXVkaW9DaGFubmVsW1wiTVVTSUNcIl0gPSAxXSA9IFwiTVVTSUNcIjtcbiAgICAvKiogQ29ubmVjdHMgZGlyZWN0bHkgdG8gb3V0cHV0LiAqL1xuICAgIEF1ZGlvQ2hhbm5lbFtBdWRpb0NoYW5uZWxbXCJNQVNURVJcIl0gPSAyXSA9IFwiTUFTVEVSXCI7XG59KShBdWRpb0NoYW5uZWwgfHwgKEF1ZGlvQ2hhbm5lbCA9IHt9KSk7XG4vKipcbiAqIEVudW1lcmF0ZXMgdGhlIHBvc3NpYmxlIHN0YXRlcyBvZiBwbGF5YmFjayBmb3IgYXVkaW8gc291cmNlcy5cbiAqL1xuZXhwb3J0IHZhciBQbGF5U3RhdGU7XG4oZnVuY3Rpb24gKFBsYXlTdGF0ZSkge1xuICAgIC8qKiBUaGUgc291cmNlIGhhcyBsb2FkZWQgYW5kIGlzIHJlYWR5IHRvIGJlIHBsYXllZCAqL1xuICAgIFBsYXlTdGF0ZVtQbGF5U3RhdGVbXCJSRUFEWVwiXSA9IDBdID0gXCJSRUFEWVwiO1xuICAgIC8qKiBUaGUgc291cmNlIGhhcyBzdGFydGVkIHBsYXlpbmcgKi9cbiAgICBQbGF5U3RhdGVbUGxheVN0YXRlW1wiUExBWUlOR1wiXSA9IDFdID0gXCJQTEFZSU5HXCI7XG4gICAgLyoqIFRoZSBzb3VyY2UgaGFzIHN0b3BwZWQgKi9cbiAgICBQbGF5U3RhdGVbUGxheVN0YXRlW1wiU1RPUFBFRFwiXSA9IDJdID0gXCJTVE9QUEVEXCI7XG59KShQbGF5U3RhdGUgfHwgKFBsYXlTdGF0ZSA9IHt9KSk7XG4vKipcbiAqIERlZmF1bHQgbnVtYmVyIG9mIG9uZS1zaG90IHBsYXllcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZfT05FU0hUX1BMUl9DT1VOVCA9IDE2O1xuLyoqXG4gKiBEZWZhdWx0IG51bWJlciBvZiByZWd1bGFyIHBsYXllcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZfUExSX0NPVU5UID0gMTY7XG5jb25zdCBTSElGVF9BTU9VTlQgPSAxNjtcbmNvbnN0IE1BWF9OVU1CRVJfT0ZfSU5TVEFOQ0VTID0gKDEgPDwgU0hJRlRfQU1PVU5UKSAtIDE7XG4vKipcbiAqIE1hbmFnZXMgYXVkaW8gZmlsZXMgYW5kIHBsYXllcnMsIHByb3ZpZGluZyBjb250cm9sIG92ZXIgcGxheWJhY2sgb24gdGhyZWUgYXVkaW8gY2hhbm5lbHMuXG4gKlxuICogQGNsYXNzZGVzY1xuICogVGhlIEF1ZGlvTWFuYWdlciBoYW5kbGVzIGF1ZGlvIGZpbGVzIGFuZCBwbGF5ZXJzLCBvZmZlcmluZyBjb250cm9sIG92ZXIgcGxheWJhY2sgb24gdGhyZWUgZGlzdGluY3QgY2hhbm5lbHMuXG4gKiBJdCBzdXBwb3J0cyB0d28gdHlwZXMgb2YgcGxheWVyczogT25lU2hvdCBwbGF5ZXJzLCB3aGljaCBwbGF5IGF1ZGlvIG9uY2UgYW5kIHJldHVybiwgYW5kIHJlZ3VsYXIgcGxheWVycy5cbiAqIE9uZVNob3QgcGxheWVycyBhcmUgbGVzcyBjb25maWd1cmFibGUgYnV0IG1vcmUgcGVyZm9ybWFudCB0aGFuIHJlZ3VsYXIgcGxheWVycy5cbiAqIEBzZWUgQXVkaW9DaGFubmVsXG4gKlxuICogQG5vdGUgVGhlIEF1ZGlvTWFuYWdlciBpcyBhYmxlIHRvIHBsYXkgYXVkaW8gd2l0aCBzcGF0aWFsIHBvc2l0aW9uaW5nLiBLZWVwIGluIG1pbmQgdGhhdCBmb3IgdGhpcyB0byB3b3JrXG4gKiBjb3JyZWN0bHksIHlvdSB3aWxsIG5lZWQgdG8gc2V0IHVwIHRoZSBgYXVkaW8tbGlzdGVuZXJgIGNvbXBvbmVudCFcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIGVudW0gU291bmRzIHtcbiAqICAgICAgQ2xpY2ssXG4gKiAgICAgIEd1blNob3QsXG4gKiB9XG4gKlxuICogLy8gQXVkaW9NYW5hZ2VyIGNhbid0IGJlIGNvbnN0cnVjdGVkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQhXG4gKiBleHBvcnQgY29uc3QgYW0gPSB3aW5kb3cuQXVkaW9Db250ZXh0ID8gbmV3IEF1ZGlvTWFuYWdlcigpIDogbnVsbDtcbiAqXG4gKiBzdGFydCgpIHtcbiAqICAgICAgYW0ubG9hZCgncGF0aC90by9jbGljay53YXYnLCBTb3VuZHMuQ2xpY2spO1xuICogICAgICBhbS5sb2FkKCdwYXRoL3RvL2d1bnNob3Qud2F2JywgU291bmRzLkd1blNob3QpO1xuICogfVxuICpcbiAqIG9uUHJlc3MoKSB7XG4gKiAgICAgIGFtLnBsYXkoU291bmRzLkNsaWNrLCB7dm9sdW1lOiAwLjgsIHBvc2l0aW9uOiBbMCwgNSwgMV19KTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvTWFuYWdlciB7XG4gICAgLyoqIFRoZSBlbWl0dGVyIHdpbGwgbm90aWZ5IGFsbCBsaXN0ZW5lcnMgYWJvdXQgdGhlIFBsYXlTdGF0ZSBvZiBhIHVuaXF1ZSBJRC5cbiAgICAgKlxuICAgICAqIEBub3RlXG4gICAgICogLSBSRUFEWSB3aWxsIGJlIGVtaXR0ZWQgaWYgYWxsIHNvdXJjZXMgb2YgYSBnaXZlbiBzb3VyY2UgSUQgaGF2ZSBsb2FkZWQuXG4gICAgICogLSBQTEFZSU5HIC8gU1RPUFBFRCBhcmUgb25seSBlbWl0dGVkIGZvciBwbGF5IElEcyB0aGF0IGFyZSByZXR1cm5lZCBieSB0aGUgcGxheSgpIG1ldGhvZC5cbiAgICAgKiAtIElmIHlvdSB3YW50IHRvIGNoZWNrIHRoZSBzdGF0dXMgZm9yIGEgc291cmNlIElELCBjb252ZXJ0IHRoZSBwbGF5IElEIG9mIHRoZSBtZXNzYWdlIHVzaW5nIHRoZVxuICAgICAqICAgZ2V0U291cmNlSWRGcm9tUGxheUlkKCkgbWV0aG9kLlxuICAgICAqIC0gT25lU2hvdHMgd29uJ3QgZ2l2ZSBzdGF0dXMgdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIEBzZWUgZ2V0U291cmNlSWRGcm9tUGxheUlkXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG11c2ljID0gYXVkaW9NYW5hZ2VyLnBsYXkoU291bmRzLk11c2ljKTtcbiAgICAgKiBhdWRpb01hbmFnZXIuZW1pdHRlci5hZGQoKG1zZykgPT4ge1xuICAgICAqICAgIGlmIChtc2cuaWQgPT09IG11c2ljKSB7XG4gICAgICogICAgICAgICAgY29uc29sZS5sb2cobXNnLnN0YXRlKTtcbiAgICAgKiAgICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyogQ2FjaGUgZm9yIGRlY29kZWQgYXVkaW8gYnVmZmVycyAqL1xuICAgIF9idWZmZXJDYWNoZSA9IFtdO1xuICAgIC8qIFNpbXBsZSwgZmFzdCBjYWNoZSBmb3Igb25lLXNob3Qgbm9kZXMgKi9cbiAgICBfb25lU2hvdENhY2hlO1xuICAgIF9vbmVTaG90SW5kZXggPSAwO1xuICAgIC8qIENhY2hlIGZvciByZWd1bGFyIG5vZGVzICovXG4gICAgX2ZyZWVQbGF5ZXJzID0gW107XG4gICAgX2J1c3lQbGF5ZXJzID0gbmV3IE1hcCgpO1xuICAgIC8qIENvdW50cyBob3cgbWFueSB0aW1lcyBhIHNvdXJjZUlkIGhhcyBwbGF5ZWQuIFJlc2V0cyB0byAwIGFmdGVyIHtAbGluayBNQVhfTlVNQkVSX09GX0lOU1RBTkNFUyB9LiAqL1xuICAgIF9pbnN0YW5jZUNvdW50ZXIgPSBbXTtcbiAgICBfbWFzdGVyR2FpbiA9IG5ldyBHYWluTm9kZShfYXVkaW9Db250ZXh0KTtcbiAgICBfbXVzaWNHYWluID0gbmV3IEdhaW5Ob2RlKF9hdWRpb0NvbnRleHQpO1xuICAgIF9zZnhHYWluID0gbmV3IEdhaW5Ob2RlKF9hdWRpb0NvbnRleHQpO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBBdWRpb01hbmFnZXIuXG4gICAgICpcbiAgICAgKiBVc2VzIHRoZSBkZWZhdWx0IGFtb3VudCBvZiBvbmUtc2hvdCBhbmQgcmVndWxhciBwbGF5ZXJzLlxuICAgICAqIEBzZWUgREVGX09ORVNIVF9QTFJfQ09VTlRcbiAgICAgKiBAc2VlIERFRl9QTFJfQ09VTlRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQXVkaW9NYW5hZ2VyIGNhbid0IGJlIGNvbnN0cnVjdGVkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQhXG4gICAgICogZXhwb3J0IGNvbnN0IGFtID0gd2luZG93LkF1ZGlvQ29udGV4dCA/IG5ldyBBdWRpb01hbmFnZXIoKSA6IG51bGwhO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9zZnhHYWluLmNvbm5lY3QodGhpcy5fbWFzdGVyR2Fpbik7XG4gICAgICAgIHRoaXMuX211c2ljR2Fpbi5jb25uZWN0KHRoaXMuX21hc3RlckdhaW4pO1xuICAgICAgICB0aGlzLl9tYXN0ZXJHYWluLmNvbm5lY3QoX2F1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuX29uZVNob3RDYWNoZSA9IHRoaXMuX2luaXRPbmVTaG90Q2FjaGUoREVGX09ORVNIVF9QTFJfQ09VTlQpO1xuICAgICAgICAvKiBJbml0aWFsaXplIGJ1ZmZlciBwbGF5ZXIgY2FjaGUgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBERUZfUExSX0NPVU5UOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2ZyZWVQbGF5ZXJzW2ldID0gbmV3IEJ1ZmZlclBsYXllcih0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfaW5pdE9uZVNob3RDYWNoZShzaXplKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBjYWNoZVtpXSA9IG5ldyBPbmVTaG90UGxheWVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhbmQgc3RvcmVzIHRoZSBnaXZlbiBhdWRpbyBmaWxlcyBhbmQgYXNzb2NpYXRlcyB0aGVtIHdpdGggdGhlIGdpdmVuIElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggUGF0aCB0byB0aGUgYXVkaW8gZmlsZXMuIENhbiBlaXRoZXIgYmUgYSBzaW5nbGUgc3RyaW5nIG9yIGEgbGlzdCBvZiBzdHJpbmdzLlxuICAgICAqIEBwYXJhbSBpZCBJZGVudGlmaWVyIGZvciB0aGUgZ2l2ZW4gYXVkaW8gZmlsZXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBJcyB0aGVyZSBtb3JlIHRoYW4gb25lLWF1ZGlvIGZpbGUgYXZhaWxhYmxlIHBlciBpZCwgb24gcGxheWJhY2ssIHRoZXkgd2lsbCBiZSBzZWxlY3RlZCBhdCByYW5kb20uXG4gICAgICogVGhpcyBlbmFibGVzIGVhc3kgdmFyaWF0aW9uIG9mIHRoZSBzYW1lIHNvdW5kcyFcbiAgICAgKlxuICAgICAqIEB0aHJvd3MgSWYgbmVnYXRpdmUgSUQgd2FzIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgZmlsZXMgYXJlIHN1Y2Nlc3NmdWxseSBsb2FkZWQuXG4gICAgICovXG4gICAgYXN5bmMgbG9hZChwYXRoLCBpZCkge1xuICAgICAgICBpZiAoaWQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyAnYXVkaW8tbWFuYWdlcjogTmVnYXRpdmUgSURzIGFyZSBub3QgdmFsaWQhIFNraXBwaW5nICR7cGF0aH0nO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGhzID0gQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGggOiBbcGF0aF07XG4gICAgICAgIGlmICghdGhpcy5fYnVmZmVyQ2FjaGVbaWRdKSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJDYWNoZVtpZF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHBhdGhzW2ldKTtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYXdhaXQgX2F1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5fYnVmZmVyQ2FjaGVbaWRdLnB1c2goYXVkaW9CdWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaXQgdGhlIGluc3RhbmNlQ291bnRlciAqL1xuICAgICAgICB0aGlzLl9pbnN0YW5jZUNvdW50ZXJbaWRdID0gMDtcbiAgICAgICAgdGhpcy5lbWl0dGVyLm5vdGlmeSh7IGlkOiBpZCwgc3RhdGU6IFBsYXlTdGF0ZS5SRUFEWSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW5hbG9nb3VzIHRvIGxvYWQoKSwgYnV0IGxldHMgeW91IGVhc2lseSBsb2FkIGEgYnVuY2ggb2YgZmlsZXMgd2l0aG91dCBuZWVkaW5nIHRvIGNhbGwgdGhlIG1hbmFnZXIgZXZlcnl0aW1lLlxuICAgICAqXG4gICAgICogQHNlZSBsb2FkXG4gICAgICpcbiAgICAgKiBAbm90ZSBMb2dzIGFuIGVycm9yIG1lc3NhZ2UgdG8gdGhlIGNvbnNvbGUgaWYgb25lIHBhaXIgZmFpbGVkIHRvIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFpciBQYWlyIG9mIHNvdXJjZSBmaWxlcyBhbmQgYXNzb2NpYXRpbmcgaWRlbnRpZmllci5cbiAgICAgKiBNdWx0aXBsZSBwYWlycyBjYW4gYmUgcHJvdmlkZWQgYXMgc2VwYXJhdGUgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgZmlsZXMgYXJlIHN1Y2Nlc3NmdWxseSBsb2FkZWQuXG4gICAgICovXG4gICAgYXN5bmMgbG9hZEJhdGNoKC4uLnBhaXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBhaXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkKHBbMF0sIHBbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYXlzIHRoZSBhdWRpbyBmaWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSUQgb2YgdGhlIGZpbGUgdGhhdCBzaG91bGQgYmUgcGxheWVkLlxuICAgICAqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgd2lsbCBjb25maWd1cmUgaG93IHRoZSBhdWRpbyBpcyBwbGF5ZWQuIElzIG5vIGNvbmZpZ3VyYXRpb24gcHJvdmlkZWQsXG4gICAgICogdGhlIGF1ZGlvIHdpbGwgcGxheSBhdCB2b2x1bWUgMS4wLCB3aXRob3V0IHBhbm5pbmcgYW5kIG9uIHRoZSBTRlggY2hhbm5lbCwgcHJpb3JpdHkgc2V0IHRvIGZhbHNlLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlICdwcmlvcml0eScgcGFyYW1ldGVyIGlzIHNldCB0byB0cnVlLCB0aGUgYXVkaW8gcGxheWJhY2sgd2lsbCBub3QgYmUgaW50ZXJydXB0ZWRcbiAgICAgKiB0byBhbGxvY2F0ZSBhIHBsYXllciBpbiBjYXNlIGFsbCBwbGF5ZXJzIGFyZSBjdXJyZW50bHkgb2NjdXBpZWQuIElmICdwcmlvcml0eScgaXMgc2V0IHRvIGZhbHNlIChkZWZhdWx0KSxcbiAgICAgKiBwbGF5YmFjayBtYXkgYmUgaW50ZXJydXB0ZWQgdG8gYWxsb2NhdGUgYSBwbGF5ZXIgZm9yIGEgbmV3ICdwbGF5KCknIGNhbGwuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIElmIHRoZSBnaXZlbiBJRCBkb2VzIG5vdCBoYXZlIGEgYnVmZmVyIGFzc29jaWF0ZWQgd2l0aCBpdCBvciB0aGVyZSBhcmUgbm8gYXZhaWxhYmxlIHBsYXllcnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgcGxheUlkIHdoZW4gdGhlIGF1ZGlvIGhhcyBzdGFydGVkIHBsYXlpbmcuXG4gICAgICovXG4gICAgYXN5bmMgcGxheShpZCwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlckNhY2hlW2lkXTtcbiAgICAgICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgICAgIHRocm93IGBhdWRpby1tYW5hZ2VyOiBObyBhdWRpbyBzb3VyY2UgaXMgYXNzb2NpYXRlZCB3aXRoIGlkZW50aWZpZXI6ICR7aWR9ICFgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMuX2ZyZWVQbGF5ZXJzLnBvcCgpIHx8IHRoaXMuX2ZyZWVQbGF5ZXJXaXRoTG93UHJpb3JpdHkoKTtcbiAgICAgICAgaWYgKCFwbGF5ZXIpIHtcbiAgICAgICAgICAgIHRocm93IGBhdWRpby1tYW5hZ2VyOiBBbGwgcGxheWVycyBhcmUgYnVzeSBhbmQgbm8gbG93IHByaW9yaXR5IHBsYXllciBjb3VsZCBiZSBmb3VuZCB0byBmcmVlIHVwIWA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5zdGFuY2VDb3VudCA9IHRoaXMuX2luc3RhbmNlQ291bnRlcltpZF07XG4gICAgICAgIGNvbnN0IHVuaXF1ZV9pZCA9IChpZCA8PCBTSElGVF9BTU9VTlQpICsgaW5zdGFuY2VDb3VudDtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VDb3VudGVyW2lkXSA9IChpbnN0YW5jZUNvdW50ICsgMSkgJSBNQVhfTlVNQkVSX09GX0lOU1RBTkNFUztcbiAgICAgICAgdGhpcy5fYnVzeVBsYXllcnMuc2V0KHVuaXF1ZV9pZCwgcGxheWVyKTtcbiAgICAgICAgaWYgKF9hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCBfdW5sb2NrQXVkaW9Db250ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcGxheWVyLnByaW9yaXR5ID0gY29uZmlnPy5wcmlvcml0eSB8fCBmYWxzZTtcbiAgICAgICAgcGxheWVyLnBsYXkoYnVmZmVyLCB1bmlxdWVfaWQsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5ub3RpZnkoeyBpZDogdW5pcXVlX2lkLCBzdGF0ZTogUGxheVN0YXRlLlBMQVlJTkcgfSk7XG4gICAgICAgIHJldHVybiB1bmlxdWVfaWQ7XG4gICAgfVxuICAgIF9mcmVlUGxheWVyV2l0aExvd1ByaW9yaXR5KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHBsYXllciBvZiB0aGlzLl9idXN5UGxheWVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgaWYgKHBsYXllci5wcmlvcml0eSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHBsYXllci5zdG9wQW5kRnJlZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZyZWVQbGF5ZXJzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYXlzIHRoZSBhdWRpbyBmaWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gSUQgdW50aWwgaXQgbmF0dXJhbGx5IGVuZHMuXG4gICAgICpcbiAgICAgKiBAbm90ZVxuICAgICAqIC0gSURzIGNhbiBiZSB0cmlnZ2VyZWQgYXMgb2Z0ZW4gYXMgdGhlcmUgYXJlIG9uZS1zaG90IHBsYXllcnMgaW4gdGhlIEF1ZGlvTWFuYWdlci5cbiAgICAgKiAtIE9uZSBzaG90cyB3b3JrIHdpdGggRmlyc3QtSW4tRmlyc3QtT3V0IHByaW5jaXBsZS4gSWYgYWxsIHBsYXllcnMgYXJlIG9jY3VwaWVkLCB0aGUgbWFuYWdlciB3aWxsIHN0b3AgdGhlXG4gICAgICogICBvbmUgdGhhdCBzdGFydGVkIHBsYXlpbmcgZmlyc3QsIHRvIGZyZWUgdXAgYSBwbGF5ZXIgZm9yIHRoZSBuZXcgSUQuXG4gICAgICogLSBPbmUtc2hvdHMgYXJlIGFsd2F5cyBjb25uZWN0IHRvIHRoZSBTRlggY2hhbm5lbC5cbiAgICAgKiAtIE9uZS1zaG90cyBjYW50IGxvb3AuXG4gICAgICogLSBPbmUtc2hvdHMgY2FuIG9ubHkgYmUgc3RvcHBlZCBhbGwgYXQgb25jZSB3aXRoIHN0b3BPbmVTaG90cygpLlxuICAgICAqIC0gT25lLXNob3RzIGNhbid0IGJlIGFzc2lnbmVkIGEgcHJpb3JpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSUQgb2YgdGhlIGZpbGUgdGhhdCBzaG91bGQgYmUgcGxheWVkLlxuICAgICAqIEBwYXJhbSBjb25maWcgIE9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IHdpbGwgY29uZmlndXJlIGhvdyB0aGUgYXVkaW8gaXMgcGxheWVkLiBOb3RlIHRoYXQgb25seSB0aGUgcG9zaXRpb25cbiAgICAgKiBhbmQgdm9sdW1lIHNldHRpbmdzIHdpbGwgYWZmZWN0IHRoZSBwbGF5YmFjay5cbiAgICAgKiBAdGhyb3dzIElmIHRoZSBnaXZlbiBJRCBkb2VzIG5vdCBoYXZlIGEgYnVmZmVyIGFzc29jaWF0ZWQgd2l0aCBpdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGF1ZGlvIGhhcyBzdGFydGVkIHBsYXlpbmcuXG4gICAgICovXG4gICAgYXN5bmMgcGxheU9uZVNob3QoaWQsIGNvbmZpZykge1xuICAgICAgICBjb25zdCBidWZmZXJzID0gdGhpcy5fYnVmZmVyQ2FjaGVbaWRdO1xuICAgICAgICBpZiAoIWJ1ZmZlcnMpIHtcbiAgICAgICAgICAgIHRocm93IGBhdWRpby1tYW5hZ2VyOiBObyBhdWRpbyBzb3VyY2UgaXMgYXNzb2NpYXRlZCB3aXRoIGlkZW50aWZpZXI6ICR7aWR9ICFgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYnVmZmVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBidWZmZXJzLmxlbmd0aCldO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLl9vbmVTaG90Q2FjaGVbdGhpcy5fb25lU2hvdEluZGV4XTtcbiAgICAgICAgYXdhaXQgcGxheWVyLnBsYXkoYXVkaW9CdWZmZXIsIGNvbmZpZz8udm9sdW1lIHx8IERFRl9WT0wsIGNvbmZpZz8ucG9zaXRpb24pO1xuICAgICAgICAvKiBBZHZhbmNlIGNhY2hlIHBvaW50ZXIgKi9cbiAgICAgICAgdGhpcy5fb25lU2hvdEluZGV4ID0gKHRoaXMuX29uZVNob3RJbmRleCArIDEpICUgREVGX09ORVNIVF9QTFJfQ09VTlQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBhdWRpbyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIElELlxuICAgICAqXG4gICAgICogQHdhcm5pbmcgVGhpcyBkb2VzIG5vdCB3b3JrIGZvciBvbmUtc2hvdHMhXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc291cmNlSWQgSWRlbnRpZmllciBvZiB0aGUgYXVkaW8gc291cmNlIHRoYXQgc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIHBsYXlJZCBPcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBzcGVjaWZpZXMgdGhlIGV4YWN0IGF1ZGlvIHRoYXQgc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAgICogSWYgbm90IHByb3ZpZGVkLCBhbGwgYXVkaW8gb2YgdGhlIGdpdmVuIHNvdXJjZUlkIHdpbGwgYmUgc3RvcHBlZC5cbiAgICAgKlxuICAgICAqIEBub3RlIE9idGFpbiB0aGUgcGxheUlkIGZyb20gdGhlIHBsYXkoKSBtZXRob2QuXG4gICAgICogQHNlZSBwbGF5XG4gICAgICovXG4gICAgc3RvcChzb3VyY2VJZCwgcGxheUlkKSB7XG4gICAgICAgIGlmIChwbGF5SWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1c3lQbGF5ZXJzLmdldChwbGF5SWQpPy5zdG9wQW5kRnJlZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J1c3lQbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4ge1xuICAgICAgICAgICAgaWYgKHBsYXllci5idWZmZXJJZCA+PiBTSElGVF9BTU9VTlQgPT09IHNvdXJjZUlkKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnN0b3BBbmRGcmVlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBwbGF5YmFjayBvZiBhbGwgb25lLXNob3QgcGxheWVycy5cbiAgICAgKi9cbiAgICBzdG9wT25lU2hvdHMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLl9vbmVTaG90Q2FjaGUpIHtcbiAgICAgICAgICAgIG5vZGUuc3RvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGFsbCBhdWRpby5cbiAgICAgKi9cbiAgICBzdG9wQWxsKCkge1xuICAgICAgICB0aGlzLnN0b3BPbmVTaG90cygpO1xuICAgICAgICB0aGlzLl9idXN5UGxheWVycy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdmFsdWUuc3RvcEFuZEZyZWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZvbHVtZSBvZiB0aGUgZ2l2ZW4gYXVkaW8gY2hhbm5lbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGFubmVsIFNwZWNpZmllcyB0aGUgYXVkaW8gY2hhbm5lbCB0eXBlIHRoYXQgc2hvdWxkIGJlIG1vZGlmaWVkLlxuICAgICAqIEBwYXJhbSB2b2x1bWUgVm9sdW1lIHRoYXQgdGhlIGNoYW5uZWwgc2hvdWxkIGJlIHNldCB0by5cbiAgICAgKiBAcGFyYW0gdGltZSBPcHRpb25hbCB0aW1lIHBhcmFtZXRlciB0aGF0IHNwZWNpZmllcyB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIGNoYW5uZWwgdG8gcmVhY2ggdGhlIHNwZWNpZmllZFxuICAgICAqIHZvbHVtZSBpbiBzZWNvbmRzIChEZWZhdWx0IGlzIDApLlxuICAgICAqL1xuICAgIHNldEdsb2JhbFZvbHVtZShjaGFubmVsLCB2b2x1bWUsIHRpbWUgPSAwKSB7XG4gICAgICAgIHZvbHVtZSA9IE1hdGgubWF4KE1JTl9WT0xVTUUsIHZvbHVtZSk7XG4gICAgICAgIHRpbWUgPSBfYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgTWF0aC5tYXgoTUlOX1JBTVBfVElNRSwgdGltZSk7XG4gICAgICAgIHN3aXRjaCAoY2hhbm5lbCkge1xuICAgICAgICAgICAgY2FzZSBBdWRpb0NoYW5uZWwuTVVTSUM6XG4gICAgICAgICAgICAgICAgdGhpcy5fbXVzaWNHYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lLCB0aW1lKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXVkaW9DaGFubmVsLlNGWDpcbiAgICAgICAgICAgICAgICB0aGlzLl9zZnhHYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lLCB0aW1lKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXVkaW9DaGFubmVsLk1BU1RFUjpcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXN0ZXJHYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lLCB0aW1lKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGRlY29kZWQgYXVkaW8gZnJvbSB0aGUgbWFuYWdlciB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gICAgICpcbiAgICAgKiBAd2FybmluZyBUaGlzIHdpbGwgc3RvcCBwbGF5YmFjayBvZiB0aGUgZ2l2ZW4gSUQuXG4gICAgICogQHBhcmFtIGlkIElkZW50aWZpZXIgb2YgdGhlIGF1ZGlvIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQuXG4gICAgICovXG4gICAgcmVtb3ZlKGlkKSB7XG4gICAgICAgIGlmIChpZCA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc3RvcChpZCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlckNhY2hlW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VDb3VudGVyW2lkXSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGRlY29kZWQgYXVkaW8gZnJvbSB0aGUgbWFuYWdlciwgZWZmZWN0aXZlbHkgcmVzZXR0aW5nIGl0LlxuICAgICAqXG4gICAgICogQHdhcm5pbmcgVGhpcyB3aWxsIHN0b3AgcGxheWJhY2sgZW50aXJlbHkuXG4gICAgICovXG4gICAgcmVtb3ZlQWxsKCkge1xuICAgICAgICB0aGlzLnN0b3BBbGwoKTtcbiAgICAgICAgdGhpcy5fYnVmZmVyQ2FjaGUubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VDb3VudGVyLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNvdXJjZUlkIG9mIGEgcGxheUlkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBsYXlJZCBvZiB3aGljaCB0byBnZXQgdGhlIHNvdXJjZUlkIGZyb20uXG4gICAgICovXG4gICAgZ2V0U291cmNlSWRGcm9tUGxheUlkKHBsYXlJZCkge1xuICAgICAgICByZXR1cm4gcGxheUlkID4+IFNISUZUX0FNT1VOVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnJlZXMgYSBwbGF5ZXIgdGhhdCB3YXMgY3VycmVudGx5IHBsYXlpbmcgdGhlIGdpdmVuIElELlxuICAgICAqXG4gICAgICogQHdhcm5pbmcgVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHksIHVzZSBhdCB5b3VyIG93biByaXNrIVxuICAgICAqIEBwYXJhbSBwbGF5SWQgSWRlbnRpZmllciBvZiBwcmV2aW91c2x5IHBsYXlpbmcgYXVkaW8uXG4gICAgICovXG4gICAgX2ZyZWVVcEJ1c3lQbGF5ZXIocGxheUlkKSB7XG4gICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMuX2J1c3lQbGF5ZXJzLmdldChwbGF5SWQpO1xuICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICB0aGlzLl9idXN5UGxheWVycy5kZWxldGUocGxheUlkKTtcbiAgICAgICAgICAgIHRoaXMuX2ZyZWVQbGF5ZXJzLnB1c2gocGxheWVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjdXJyZW50IGFtb3VudCBvZiBmcmVlIHJlZ3VsYXIgcGxheWVycyBpbiB0aGUgYXVkaW8gbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFVzZSB0aGlzIHRvIGNoZWNrIGhvdyBtYW55IHJlc291cmNlcyB5b3VyIGN1cnJlbnQgcHJvamVjdCBpcyB1c2luZy5cbiAgICAgKi9cbiAgICBnZXQgYW1vdW50T2ZGcmVlUGxheWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyZWVQbGF5ZXJzLmxlbmd0aDtcbiAgICB9XG59XG4vKipcbiAqIEdsb2JhbCBpbnN0YW5jZSBvZiBhIEF1ZGlvTWFuYWdlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGdsb2JhbEF1ZGlvTWFuYWdlciA9IHdpbmRvdy5BdWRpb0NvbnRleHQgPyBuZXcgQXVkaW9NYW5hZ2VyKCkgOiBudWxsO1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IF9hdWRpb0NvbnRleHQsIEF1ZGlvTGlzdGVuZXIsIF91bmxvY2tBdWRpb0NvbnRleHQgfSBmcm9tICcuL2F1ZGlvLWxpc3RlbmVyLmpzJztcbmltcG9ydCB7IEF1ZGlvQ2hhbm5lbCwgUGxheVN0YXRlIH0gZnJvbSAnLi9hdWRpby1tYW5hZ2VyLmpzJztcbmltcG9ydCB7IE1JTl9SQU1QX1RJTUUsIE1JTl9WT0xVTUUgfSBmcm9tICcuL2F1ZGlvLXBsYXllcnMuanMnO1xuZXhwb3J0IHZhciBQYW5uaW5nVHlwZTtcbihmdW5jdGlvbiAoUGFubmluZ1R5cGUpIHtcbiAgICBQYW5uaW5nVHlwZVtQYW5uaW5nVHlwZVtcIk5PTkVcIl0gPSAwXSA9IFwiTk9ORVwiO1xuICAgIFBhbm5pbmdUeXBlW1Bhbm5pbmdUeXBlW1wiUkVHVUxBUlwiXSA9IDFdID0gXCJSRUdVTEFSXCI7XG4gICAgUGFubmluZ1R5cGVbUGFubmluZ1R5cGVbXCJIUlRGXCJdID0gMl0gPSBcIkhSVEZcIjtcbn0pKFBhbm5pbmdUeXBlIHx8IChQYW5uaW5nVHlwZSA9IHt9KSk7XG4vKipcbiAqIENvbnN0YW50c1xuICovXG5jb25zdCBwb3NWZWMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3Qgb3JpVmVjID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IGRpc3RhbmNlTW9kZWxzID0gWydsaW5lYXInLCAnZXhwb25lbnRpYWwnLCAnaW52ZXJzZSddO1xuY29uc3QgYnVmZmVyQ2FjaGUgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEFkZHMgdGhlIHNwZWNpZmllZCBmaWxlIHRvIGNhY2hlLlxuICogQHBhcmFtIHNvdXJjZSBQYXRoIHRvIHRoZSBmaWxlIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIGNhY2hlLlxuICogQHdhcm5pbmcgVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHksIHVzZSBhdCBvd24gcmlzayFcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYWRkQnVmZmVyVG9DYWNoZShzb3VyY2UpIHtcbiAgICBpZiAoYnVmZmVyQ2FjaGUuaGFzKHNvdXJjZSkpIHtcbiAgICAgICAgY29uc3QgW2F1ZGlvQnVmZmVyLCByZWZlcmVuY2VDb3VudF0gPSBidWZmZXJDYWNoZS5nZXQoc291cmNlKTtcbiAgICAgICAgYnVmZmVyQ2FjaGUuc2V0KHNvdXJjZSwgW2F1ZGlvQnVmZmVyLCByZWZlcmVuY2VDb3VudCArIDFdKTtcbiAgICAgICAgcmV0dXJuIGF1ZGlvQnVmZmVyO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNvdXJjZSk7XG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYXdhaXQgX2F1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpO1xuICAgIGJ1ZmZlckNhY2hlLnNldChzb3VyY2UsIFthdWRpb0J1ZmZlciwgMV0pO1xuICAgIHJldHVybiBhdWRpb0J1ZmZlcjtcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGZpbGUgZnJvbSBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gc291cmNlIFBhdGggdG8gdGhlIGZpbGUgdGhhdCBzaG91bGQgYmUgZXZpY3RlZCBmcm9tIGNhY2hlLlxuICogQHdhcm5pbmcgVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHksIHVzZSBhdCBvd24gcmlzayFcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQnVmZmVyRnJvbUNhY2hlKHNvdXJjZSkge1xuICAgIGlmICghYnVmZmVyQ2FjaGUuaGFzKHNvdXJjZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBbLCByZWZlcmVuY2VDb3VudF0gPSBidWZmZXJDYWNoZS5nZXQoc291cmNlKTtcbiAgICBpZiAocmVmZXJlbmNlQ291bnQgPiAxKSB7XG4gICAgICAgIGNvbnN0IFthdWRpb0J1ZmZlciwgcmVmZXJlbmNlQ291bnRdID0gYnVmZmVyQ2FjaGUuZ2V0KHNvdXJjZSk7XG4gICAgICAgIGJ1ZmZlckNhY2hlLnNldChzb3VyY2UsIFthdWRpb0J1ZmZlciwgcmVmZXJlbmNlQ291bnQgLSAxXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBidWZmZXJDYWNoZS5kZWxldGUoc291cmNlKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYXVkaW8gc3JjIGluIHRoZSBXb25kZXJsYW5kIEVuZ2luZSwgYWxsb3dpbmcgcGxheWJhY2sgb2YgYXVkaW8gZmlsZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgbmFtZSBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAgICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2F1ZGlvLXNvdXJjZSc7XG4gICAgc3RhdGljIG9uUmVnaXN0ZXIoZW5naW5lKSB7XG4gICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChBdWRpb0xpc3RlbmVyKTtcbiAgICB9XG4gICAgLyoqIFBhdGggdG8gdGhlIGF1ZGlvIGZpbGUgdGhhdCBzaG91bGQgYmUgcGxheWVkLiAqL1xuICAgIHNyYztcbiAgICAvKipcbiAgICAgKiBWb2x1bWUgb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgd2lsbCBvbmx5IHRha2UgZWZmZWN0IGF1ZGlvIHRoYXQgaGFzIG5vdCBzdGFydGVkIHBsYXlpbmcgeWV0LiBJcyB0aGUgYXVkaW8gYWxyZWFkeSBwbGF5aW5nLCB1c2VcbiAgICAgKiBzZXRWb2x1bWVEdXJpbmdQbGF5YmFjaygpXG4gICAgICogQHNlZSBzZXRWb2x1bWVEdXJpbmdQbGF5YmFja1xuICAgICAqL1xuICAgIHZvbHVtZTtcbiAgICAvKiogV2hldGhlciB0byBsb29wIHRoZSBzb3VuZC4gKi9cbiAgICBsb29wO1xuICAgIC8qKiBXaGV0aGVyIHRvIGF1dG9wbGF5IHRoZSBzb3VuZC4gKi9cbiAgICBhdXRvcGxheTtcbiAgICAvKiogU2VsZWN0IHRoZSBwYW5uaW5nIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFdoZW4gc2V0dGluZyB0aGlzIGluIGNvZGUsIHVzZSBudW1iZXJzIG9yIGJvb2xlYW4gdmFsdWVzIVxuICAgICAqIC0gMCAvIGZhbHNlLCBmb3Igbm8gcGFubmluZy5cbiAgICAgKiAtIDEgLyB0cnVlLCBmb3IgcmVndWxhciBwYW5uaW5nLlxuICAgICAqIC0gMiBmb3IgSFJURiBzcGF0aWFsIGF1ZGlvLlxuICAgICAqIEB3YXJuaW5nIEVuYWJsaW5nIEhSVEYgKEhlYWQtUmVsYXRlZCBUcmFuc2ZlciBGdW5jdGlvbikgaXMgY29tcHV0YXRpb25hbGx5IG1vcmUgaW50ZW5zaXZlIHRoYW4gcmVndWxhciBwYW5uaW5nIVxuICAgICAqL1xuICAgIHNwYXRpYWw7XG4gICAgLyoqXG4gICAgICogU2V0IHRoaXMgcHJvcGVydHkgaWYgdGhlIG9iamVjdCB3aWxsIG5ldmVyIG1vdmUuXG4gICAgICogRGlzYWJsaW5nIHBvc2l0aW9uIHVwZGF0ZXMgZWFjaCBmcmFtZSBzYXZlcyBDUFUgdGltZS5cbiAgICAgKi9cbiAgICBpc1N0YXRpb25hcnk7XG4gICAgLyoqIFRoZSBkaXN0YW5jZSBtb2RlbCB1c2VkIGZvciBzcGF0aWFsIGF1ZGlvLiAqL1xuICAgIGRpc3RhbmNlTW9kZWw7XG4gICAgLyoqIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGZvciBhdWRpbyBmYWxsb2ZmLiAqL1xuICAgIG1heERpc3RhbmNlO1xuICAgIC8qKiBUaGUgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciBhdWRpbyBmYWxsb2ZmLiAqL1xuICAgIHJlZkRpc3RhbmNlO1xuICAgIC8qKiBUaGUgcm9sbG9mZiBmYWN0b3IgZm9yIGF1ZGlvIGZhbGxvZmYuICovXG4gICAgcm9sbG9mZkZhY3RvcjtcbiAgICAvKiogVGhlIGlubmVyIGFuZ2xlIG9mIHRoZSBhdWRpbyBjb25lLiAqL1xuICAgIGNvbmVJbm5lckFuZ2xlO1xuICAgIC8qKiBUaGUgb3V0ZXIgYW5nbGUgb2YgdGhlIGF1ZGlvIGNvbmUuICovXG4gICAgY29uZU91dGVyQW5nbGU7XG4gICAgLyoqIFRoZSBvdXRlciBnYWluIG9mIHRoZSBhdWRpbyBjb25lLiAqL1xuICAgIGNvbmVPdXRlckdhaW47XG4gICAgLyoqXG4gICAgICogVGhlIGVtaXR0ZXIgd2lsbCBub3RpZnkgYWxsIHN1YnNjcmliZXJzIHdoZW4gYSBzdGF0ZSBjaGFuZ2Ugb2NjdXJzLlxuICAgICAqIEBzZWUgUGxheVN0YXRlXG4gICAgICovXG4gICAgZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgX3Bhbm5lck9wdGlvbnMgPSB7fTtcbiAgICBfYnVmZmVyO1xuICAgIF9wYW5uZXJOb2RlID0gbmV3IFBhbm5lck5vZGUoX2F1ZGlvQ29udGV4dCk7XG4gICAgX2F1ZGlvTm9kZSA9IG5ldyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUoX2F1ZGlvQ29udGV4dCk7XG4gICAgX2lzUGxheWluZyA9IGZhbHNlO1xuICAgIF90aW1lID0gMDtcbiAgICBfZ2Fpbk5vZGUgPSBuZXcgR2Fpbk5vZGUoX2F1ZGlvQ29udGV4dCk7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGF1ZGlvIHNyYyBjb21wb25lbnQuXG4gICAgICogSWYgYGF1dG9wbGF5YCBpcyBlbmFibGVkLCB0aGUgYXVkaW8gd2lsbCBzdGFydCBwbGF5aW5nIGFzIHNvb24gYXMgdGhlIGZpbGUgaXMgbG9hZGVkLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBubyBhdWRpbyBzb3VyY2UgcGF0aCB3YXMgcHJvdmlkZWQuXG4gICAgICovXG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNyYyA9PT0gJycpIHtcbiAgICAgICAgICAgIHRocm93ICdhdWRpby1zb3VyY2U6IE5vIGF1ZGlvIHNvdXJjZSBwYXRoIHByb3ZpZGVkISc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuY29ubmVjdChfYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYXdhaXQgYWRkQnVmZmVyVG9DYWNoZSh0aGlzLnNyYyk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5ub3RpZnkoUGxheVN0YXRlLlJFQURZKTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEF1ZGlvQ2hhbm5lbChhbSwgY2hhbm5lbCkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgc3dpdGNoIChjaGFubmVsKSB7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvQ2hhbm5lbC5NVVNJQzpcbiAgICAgICAgICAgICAgICB0aGlzLl9nYWluTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuY29ubmVjdChhbVsnX211c2ljR2FpbiddKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXVkaW9DaGFubmVsLlNGWDpcbiAgICAgICAgICAgICAgICB0aGlzLl9nYWluTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuY29ubmVjdChhbVsnX3NmeEdhaW4nXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvQ2hhbm5lbC5NQVNURVI6XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhaW5Ob2RlLmNvbm5lY3QoYW1bJ19tYXN0ZXJHYWluJ10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheXMgdGhlIGF1ZGlvIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGF1ZGlvIHNyYy5cbiAgICAgKlxuICAgICAqIEBub3RlIElzIHRoaXMgYXVkaW8tc291cmNlIGN1cnJlbnRseSBwbGF5aW5nLCBwbGF5YmFjayB3aWxsIGJlIHJlc3RhcnRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5faXNQbGF5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfYXVkaW9Db250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgICAgICAgYXdhaXQgX3VubG9ja0F1ZGlvQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dhaW5Ob2RlLmdhaW4udmFsdWUgPSB0aGlzLnZvbHVtZTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLmJ1ZmZlciA9IHRoaXMuX2J1ZmZlcjtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLmxvb3AgPSB0aGlzLmxvb3A7XG4gICAgICAgIGlmICghdGhpcy5zcGF0aWFsKSB7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb05vZGUuY29ubmVjdCh0aGlzLl9nYWluTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTZXR0aW5ncygpO1xuICAgICAgICAgICAgLyogUGFubmVyTm9kZXMgY2FuJ3QgYmUgcmV1c2VkLCBhcyB0aGV5IHdpbGwgcGxheSBhdCB0aGVpciBsYXN0IHBvc2l0aW9uIGZvciBhIHNob3J0IHBlcmlvZCAqL1xuICAgICAgICAgICAgdGhpcy5fcGFubmVyTm9kZSA9IG5ldyBQYW5uZXJOb2RlKF9hdWRpb0NvbnRleHQsIHRoaXMuX3Bhbm5lck9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLmNvbm5lY3QodGhpcy5fcGFubmVyTm9kZSkuY29ubmVjdCh0aGlzLl9nYWluTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLm9uZW5kZWQgPSAoKSA9PiB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMuX2lzUGxheWluZyA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5pc1N0YXRpb25hcnkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy5fdXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0dGVyLm5vdGlmeShQbGF5U3RhdGUuUExBWUlORyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBhdWRpbyBhc3NvY2lhdGVkIHdpdGggdGhpcyBhdWRpbyBzcmMuXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1BsYXlpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hdWRpb05vZGUub25lbmRlZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2F1ZGlvTm9kZS5zdG9wKCk7XG4gICAgICAgIHRoaXMudXBkYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb05vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLl9wYW5uZXJOb2RlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9Ob2RlID0gbmV3IEF1ZGlvQnVmZmVyU291cmNlTm9kZShfYXVkaW9Db250ZXh0KTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLm5vdGlmeShQbGF5U3RhdGUuU1RPUFBFRCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgYXVkaW8gc3JjIGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgICAqL1xuICAgIGdldCBpc1BsYXlpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1BsYXlpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIHZvbHVtZSBkdXJpbmcgcGxheWJhY2suXG4gICAgICogQHBhcmFtIHYgVm9sdW1lIHRoYXQgc291cmNlIHNob3VsZCBoYXZlLlxuICAgICAqIEBwYXJhbSB0IE9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IHNwZWNpZmllcyB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIHZvbHVtZSB0byByZWFjaCBpdHMgc3BlY2lmaWVkIHZhbHVlIGluXG4gICAgICogc2Vjb25kcyAoRGVmYXVsdCBpcyAwKS5cbiAgICAgKi9cbiAgICBzZXRWb2x1bWVEdXJpbmdQbGF5YmFjayh2LCB0ID0gMCkge1xuICAgICAgICBjb25zdCB2b2x1bWUgPSBNYXRoLm1heChNSU5fVk9MVU1FLCB2KTtcbiAgICAgICAgY29uc3QgdGltZSA9IF9hdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyBNYXRoLm1heChNSU5fUkFNUF9USU1FLCB0KTtcbiAgICAgICAgdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh2b2x1bWUsIHRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2Ugb3V0IHRoZSBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCBQYXRoIHRvIHRoZSBhdWRpbyBmaWxlLlxuICAgICAqL1xuICAgIGFzeW5jIGNoYW5nZUF1ZGlvU291cmNlKHBhdGgpIHtcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYXdhaXQgYWRkQnVmZmVyVG9DYWNoZShwYXRoKTtcbiAgICAgICAgcmVtb3ZlQnVmZmVyRnJvbUNhY2hlKHRoaXMuc3JjKTtcbiAgICAgICAgdGhpcy5zcmMgPSBwYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGRlYWN0aXZhdGVkLlxuICAgICAqIFN0b3BzIHRoZSBhdWRpbyBwbGF5YmFjay5cbiAgICAgKi9cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGRlc3Ryb3llZC5cbiAgICAgKiBTdG9wcyB0aGUgYXVkaW8gcGxheWJhY2sgYW5kIHJlbW92ZXMgdGhlIHNyYyBmcm9tIGNhY2hlLlxuICAgICAqL1xuICAgIG9uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHRoaXMuX2dhaW5Ob2RlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgcmVtb3ZlQnVmZmVyRnJvbUNhY2hlKHRoaXMuc3JjKTtcbiAgICB9XG4gICAgX3VwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHBvc1ZlYyk7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldEZvcndhcmRXb3JsZChvcmlWZWMpO1xuICAgICAgICB0aGlzLl90aW1lID0gX2F1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArIGR0O1xuICAgICAgICB0aGlzLl9wYW5uZXJOb2RlLnBvc2l0aW9uWC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShwb3NWZWNbMF0sIHRoaXMuX3RpbWUpO1xuICAgICAgICB0aGlzLl9wYW5uZXJOb2RlLnBvc2l0aW9uWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShwb3NWZWNbMl0sIHRoaXMuX3RpbWUpO1xuICAgICAgICB0aGlzLl9wYW5uZXJOb2RlLnBvc2l0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgtcG9zVmVjWzFdLCB0aGlzLl90aW1lKTtcbiAgICAgICAgdGhpcy5fcGFubmVyTm9kZS5vcmllbnRhdGlvblgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob3JpVmVjWzBdLCB0aGlzLl90aW1lKTtcbiAgICAgICAgdGhpcy5fcGFubmVyTm9kZS5vcmllbnRhdGlvblkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob3JpVmVjWzJdLCB0aGlzLl90aW1lKTtcbiAgICAgICAgdGhpcy5fcGFubmVyTm9kZS5vcmllbnRhdGlvbloubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoLW9yaVZlY1sxXSwgdGhpcy5fdGltZSk7XG4gICAgfVxuICAgIF91cGRhdGVTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZChwb3NWZWMpO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRGb3J3YXJkV29ybGQob3JpVmVjKTtcbiAgICAgICAgdGhpcy5fcGFubmVyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0aGlzLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHRoaXMuY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0aGlzLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0aGlzLl9kaXN0YW5jZU1vZGVsU2VsZWN0b3IoKSxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0aGlzLm1heERpc3RhbmNlLFxuICAgICAgICAgICAgcmVmRGlzdGFuY2U6IHRoaXMucmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0aGlzLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHRoaXMuc3BhdGlhbCA9PT0gMiA/ICdIUlRGJyA6ICdlcXVhbHBvd2VyJyxcbiAgICAgICAgICAgIHBvc2l0aW9uWDogcG9zVmVjWzBdLFxuICAgICAgICAgICAgcG9zaXRpb25ZOiBwb3NWZWNbMl0sXG4gICAgICAgICAgICBwb3NpdGlvblo6IC1wb3NWZWNbMV0sXG4gICAgICAgICAgICBvcmllbnRhdGlvblg6IG9yaVZlY1swXSxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uWTogb3JpVmVjWzJdLFxuICAgICAgICAgICAgb3JpZW50YXRpb25aOiAtb3JpVmVjWzFdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfZGlzdGFuY2VNb2RlbFNlbGVjdG9yKCkge1xuICAgICAgICBpZiAoZGlzdGFuY2VNb2RlbHMuaW5jbHVkZXModGhpcy5kaXN0YW5jZU1vZGVsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VNb2RlbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2V4cG9uZW50aWFsJztcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoKVxuXSwgQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcInNyY1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS4wKVxuXSwgQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcInZvbHVtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJsb29wXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcImF1dG9wbGF5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnbm9uZScsICdwYW5uaW5nJywgJ2hydGYnXSwgMSlcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJzcGF0aWFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcImlzU3RhdGlvbmFyeVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZW51bShbJ2xpbmVhcicsICdpbnZlcnNlJywgJ2V4cG9uZW50aWFsJ10sICdleHBvbmVudGlhbCcpXG5dLCBBdWRpb1NvdXJjZS5wcm90b3R5cGUsIFwiZGlzdGFuY2VNb2RlbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMTAwMDApXG5dLCBBdWRpb1NvdXJjZS5wcm90b3R5cGUsIFwibWF4RGlzdGFuY2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEuMClcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJyZWZEaXN0YW5jZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS4wKVxuXSwgQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcInJvbGxvZmZGYWN0b3JcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDM2MClcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJjb25lSW5uZXJBbmdsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMClcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJjb25lT3V0ZXJBbmdsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMClcbl0sIEF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJjb25lT3V0ZXJHYWluXCIsIHZvaWQgMCk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xudmFyIGtpbmRPZiA9IChmdW5jdGlvbihjYWNoZSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gZnVuY3Rpb24odGhpbmcpIHtcbiAgICB2YXIgc3RyID0gdG9TdHJpbmcuY2FsbCh0aGluZyk7XG4gICAgcmV0dXJuIGNhY2hlW3N0cl0gfHwgKGNhY2hlW3N0cl0gPSBzdHIuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkpO1xuICB9O1xufSkoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cbmZ1bmN0aW9uIGtpbmRPZlRlc3QodHlwZSkge1xuICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gaXNLaW5kT2YodGhpbmcpIHtcbiAgICByZXR1cm4ga2luZE9mKHRoaW5nKSA9PT0gdHlwZTtcbiAgfTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG52YXIgaXNBcnJheUJ1ZmZlciA9IGtpbmRPZlRlc3QoJ0FycmF5QnVmZmVyJyk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAoaXNBcnJheUJ1ZmZlcih2YWwuYnVmZmVyKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuICBpZiAoa2luZE9mKHZhbCkgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpO1xuICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbnZhciBpc0RhdGUgPSBraW5kT2ZUZXN0KCdEYXRlJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG52YXIgaXNGaWxlID0ga2luZE9mVGVzdCgnRmlsZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xudmFyIGlzQmxvYiA9IGtpbmRPZlRlc3QoJ0Jsb2InKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVMaXN0XG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG52YXIgaXNGaWxlTGlzdCA9IGtpbmRPZlRlc3QoJ0ZpbGVMaXN0Jyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHRoaW5nKSB7XG4gIHZhciBwYXR0ZXJuID0gJ1tvYmplY3QgRm9ybURhdGFdJztcbiAgcmV0dXJuIHRoaW5nICYmIChcbiAgICAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIHRoaW5nIGluc3RhbmNlb2YgRm9ybURhdGEpIHx8XG4gICAgdG9TdHJpbmcuY2FsbCh0aGluZykgPT09IHBhdHRlcm4gfHxcbiAgICAoaXNGdW5jdGlvbih0aGluZy50b1N0cmluZykgJiYgdGhpbmcudG9TdHJpbmcoKSA9PT0gcGF0dGVybilcbiAgKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xudmFyIGlzVVJMU2VhcmNoUGFyYW1zID0ga2luZE9mVGVzdCgnVVJMU2VhcmNoUGFyYW1zJyk7XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFtrZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYnl0ZSBvcmRlciBtYXJrZXIuIFRoaXMgY2F0Y2hlcyBFRiBCQiBCRiAodGhlIFVURi04IEJPTSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCB3aXRoIEJPTVxuICogQHJldHVybiB7c3RyaW5nfSBjb250ZW50IHZhbHVlIHdpdGhvdXQgQk9NXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQk9NKGNvbnRlbnQpIHtcbiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IFtwcm9wc11cbiAqIEBwYXJhbSB7b2JqZWN0fSBbZGVzY3JpcHRvcnNdXG4gKi9cblxuZnVuY3Rpb24gaW5oZXJpdHMoY29uc3RydWN0b3IsIHN1cGVyQ29uc3RydWN0b3IsIHByb3BzLCBkZXNjcmlwdG9ycykge1xuICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ29uc3RydWN0b3IucHJvdG90eXBlLCBkZXNjcmlwdG9ycyk7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xuICBwcm9wcyAmJiBPYmplY3QuYXNzaWduKGNvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvcHMpO1xufVxuXG4vKipcbiAqIFJlc29sdmUgb2JqZWN0IHdpdGggZGVlcCBwcm90b3R5cGUgY2hhaW4gdG8gYSBmbGF0IG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZU9iaiBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gW2Rlc3RPYmpdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZmlsdGVyXVxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiB0b0ZsYXRPYmplY3Qoc291cmNlT2JqLCBkZXN0T2JqLCBmaWx0ZXIpIHtcbiAgdmFyIHByb3BzO1xuICB2YXIgaTtcbiAgdmFyIHByb3A7XG4gIHZhciBtZXJnZWQgPSB7fTtcblxuICBkZXN0T2JqID0gZGVzdE9iaiB8fCB7fTtcblxuICBkbyB7XG4gICAgcHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2VPYmopO1xuICAgIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgIGlmICghbWVyZ2VkW3Byb3BdKSB7XG4gICAgICAgIGRlc3RPYmpbcHJvcF0gPSBzb3VyY2VPYmpbcHJvcF07XG4gICAgICAgIG1lcmdlZFtwcm9wXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvdXJjZU9iaiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzb3VyY2VPYmopO1xuICB9IHdoaWxlIChzb3VyY2VPYmogJiYgKCFmaWx0ZXIgfHwgZmlsdGVyKHNvdXJjZU9iaiwgZGVzdE9iaikpICYmIHNvdXJjZU9iaiAhPT0gT2JqZWN0LnByb3RvdHlwZSk7XG5cbiAgcmV0dXJuIGRlc3RPYmo7XG59XG5cbi8qXG4gKiBkZXRlcm1pbmVzIHdoZXRoZXIgYSBzdHJpbmcgZW5kcyB3aXRoIHRoZSBjaGFyYWN0ZXJzIG9mIGEgc3BlY2lmaWVkIHN0cmluZ1xuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFN0cmluZ1xuICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbj0gMF1cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBlbmRzV2l0aChzdHIsIHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID4gc3RyLmxlbmd0aCkge1xuICAgIHBvc2l0aW9uID0gc3RyLmxlbmd0aDtcbiAgfVxuICBwb3NpdGlvbiAtPSBzZWFyY2hTdHJpbmcubGVuZ3RoO1xuICB2YXIgbGFzdEluZGV4ID0gc3RyLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gIHJldHVybiBsYXN0SW5kZXggIT09IC0xICYmIGxhc3RJbmRleCA9PT0gcG9zaXRpb247XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIG5ldyBhcnJheSBmcm9tIGFycmF5IGxpa2Ugb2JqZWN0XG4gKiBAcGFyYW0geyp9IFt0aGluZ11cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheSh0aGluZykge1xuICBpZiAoIXRoaW5nKSByZXR1cm4gbnVsbDtcbiAgdmFyIGkgPSB0aGluZy5sZW5ndGg7XG4gIGlmIChpc1VuZGVmaW5lZChpKSkgcmV0dXJuIG51bGw7XG4gIHZhciBhcnIgPSBuZXcgQXJyYXkoaSk7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgYXJyW2ldID0gdGhpbmdbaV07XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbnZhciBpc1R5cGVkQXJyYXkgPSAoZnVuY3Rpb24oVHlwZWRBcnJheSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gVHlwZWRBcnJheSAmJiB0aGluZyBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7XG4gIH07XG59KSh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVpbnQ4QXJyYXkpKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG4gIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW0sXG4gIHN0cmlwQk9NOiBzdHJpcEJPTSxcbiAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICB0b0ZsYXRPYmplY3Q6IHRvRmxhdE9iamVjdCxcbiAga2luZE9mOiBraW5kT2YsXG4gIGtpbmRPZlRlc3Q6IGtpbmRPZlRlc3QsXG4gIGVuZHNXaXRoOiBlbmRzV2l0aCxcbiAgdG9BcnJheTogdG9BcnJheSxcbiAgaXNUeXBlZEFycmF5OiBpc1R5cGVkQXJyYXksXG4gIGlzRmlsZUxpc3Q6IGlzRmlsZUxpc3Rcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG5cbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkLCBvcHRpb25zKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkLFxuICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbmZ1bmN0aW9uIEF4aW9zRXJyb3IobWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICBFcnJvci5jYWxsKHRoaXMpO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLm5hbWUgPSAnQXhpb3NFcnJvcic7XG4gIGNvZGUgJiYgKHRoaXMuY29kZSA9IGNvZGUpO1xuICBjb25maWcgJiYgKHRoaXMuY29uZmlnID0gY29uZmlnKTtcbiAgcmVxdWVzdCAmJiAodGhpcy5yZXF1ZXN0ID0gcmVxdWVzdCk7XG4gIHJlc3BvbnNlICYmICh0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2UpO1xufVxuXG51dGlscy5pbmhlcml0cyhBeGlvc0Vycm9yLCBFcnJvciwge1xuICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gU3RhbmRhcmRcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIC8vIE1pY3Jvc29mdFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICBudW1iZXI6IHRoaXMubnVtYmVyLFxuICAgICAgLy8gTW96aWxsYVxuICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUsXG4gICAgICBsaW5lTnVtYmVyOiB0aGlzLmxpbmVOdW1iZXIsXG4gICAgICBjb2x1bW5OdW1iZXI6IHRoaXMuY29sdW1uTnVtYmVyLFxuICAgICAgc3RhY2s6IHRoaXMuc3RhY2ssXG4gICAgICAvLyBBeGlvc1xuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1czogdGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnN0YXR1cyA/IHRoaXMucmVzcG9uc2Uuc3RhdHVzIDogbnVsbFxuICAgIH07XG4gIH1cbn0pO1xuXG52YXIgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7XG52YXIgZGVzY3JpcHRvcnMgPSB7fTtcblxuW1xuICAnRVJSX0JBRF9PUFRJT05fVkFMVUUnLFxuICAnRVJSX0JBRF9PUFRJT04nLFxuICAnRUNPTk5BQk9SVEVEJyxcbiAgJ0VUSU1FRE9VVCcsXG4gICdFUlJfTkVUV09SSycsXG4gICdFUlJfRlJfVE9PX01BTllfUkVESVJFQ1RTJyxcbiAgJ0VSUl9ERVBSRUNBVEVEJyxcbiAgJ0VSUl9CQURfUkVTUE9OU0UnLFxuICAnRVJSX0JBRF9SRVFVRVNUJyxcbiAgJ0VSUl9DQU5DRUxFRCdcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5dLmZvckVhY2goZnVuY3Rpb24oY29kZSkge1xuICBkZXNjcmlwdG9yc1tjb2RlXSA9IHt2YWx1ZTogY29kZX07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXhpb3NFcnJvciwgZGVzY3JpcHRvcnMpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ2lzQXhpb3NFcnJvcicsIHt2YWx1ZTogdHJ1ZX0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuQXhpb3NFcnJvci5mcm9tID0gZnVuY3Rpb24oZXJyb3IsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UsIGN1c3RvbVByb3BzKSB7XG4gIHZhciBheGlvc0Vycm9yID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXG4gIHV0aWxzLnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTtcbiAgfSk7XG5cbiAgQXhpb3NFcnJvci5jYWxsKGF4aW9zRXJyb3IsIGVycm9yLm1lc3NhZ2UsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UpO1xuXG4gIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yLm5hbWU7XG5cbiAgY3VzdG9tUHJvcHMgJiYgT2JqZWN0LmFzc2lnbihheGlvc0Vycm9yLCBjdXN0b21Qcm9wcyk7XG5cbiAgcmV0dXJuIGF4aW9zRXJyb3I7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF4aW9zRXJyb3I7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gIGZvcmNlZEpTT05QYXJzaW5nOiB0cnVlLFxuICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbi8qKlxuICogQ29udmVydCBhIGRhdGEgb2JqZWN0IHRvIEZvcm1EYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0gez9PYmplY3R9IFtmb3JtRGF0YV1cbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiovXG5cbmZ1bmN0aW9uIHRvRm9ybURhdGEob2JqLCBmb3JtRGF0YSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgZm9ybURhdGEgPSBmb3JtRGF0YSB8fCBuZXcgRm9ybURhdGEoKTtcblxuICB2YXIgc3RhY2sgPSBbXTtcblxuICBmdW5jdGlvbiBjb252ZXJ0VmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnJztcblxuICAgIGlmICh1dGlscy5pc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlcih2YWx1ZSkgfHwgdXRpbHMuaXNUeXBlZEFycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBCbG9iID09PSAnZnVuY3Rpb24nID8gbmV3IEJsb2IoW3ZhbHVlXSkgOiBCdWZmZXIuZnJvbSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGQoZGF0YSwgcGFyZW50S2V5KSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QoZGF0YSkgfHwgdXRpbHMuaXNBcnJheShkYXRhKSkge1xuICAgICAgaWYgKHN0YWNrLmluZGV4T2YoZGF0YSkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQgaW4gJyArIHBhcmVudEtleSk7XG4gICAgICB9XG5cbiAgICAgIHN0YWNrLnB1c2goZGF0YSk7XG5cbiAgICAgIHV0aWxzLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gZWFjaCh2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICh1dGlscy5pc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgdmFyIGZ1bGxLZXkgPSBwYXJlbnRLZXkgPyBwYXJlbnRLZXkgKyAnLicgKyBrZXkgOiBrZXk7XG4gICAgICAgIHZhciBhcnI7XG5cbiAgICAgICAgaWYgKHZhbHVlICYmICFwYXJlbnRLZXkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGlmICh1dGlscy5lbmRzV2l0aChrZXksICd7fScpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSAmJiAoYXJyID0gdXRpbHMudG9BcnJheSh2YWx1ZSkpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgIXV0aWxzLmlzVW5kZWZpbmVkKGVsKSAmJiBmb3JtRGF0YS5hcHBlbmQoZnVsbEtleSwgY29udmVydFZhbHVlKGVsKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBidWlsZCh2YWx1ZSwgZnVsbEtleSk7XG4gICAgICB9KTtcblxuICAgICAgc3RhY2sucG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChwYXJlbnRLZXksIGNvbnZlcnRWYWx1ZShkYXRhKSk7XG4gICAgfVxuICB9XG5cbiAgYnVpbGQob2JqKTtcblxuICByZXR1cm4gZm9ybURhdGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9Gb3JtRGF0YTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBBeGlvc0Vycm9yID0gcmVxdWlyZSgnLi9BeGlvc0Vycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICBbQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRV1bTWF0aC5mbG9vcihyZXNwb25zZS5zdGF0dXMgLyAxMDApIC0gNF0sXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICAgICAgdmFyIGNvb2tpZSA9IFtdO1xuICAgICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xcXFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpO1xuICAgICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSxcbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICAgIH07XG4gICAgfSkoKVxuKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZCtcXC0uXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBiYXNlVVJMIHdpdGggdGhlIHJlcXVlc3RlZFVSTCxcbiAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC5cbiAqIElmIHRoZSByZXF1ZXN0VVJMIGlzIGFic29sdXRlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHJlcXVlc3RlZFVSTCB1bnRvdWNoZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdGVkVVJMIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCB0byBjb21iaW5lXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHtcbiAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgICB9XG5cbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgfSkoKVxuKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBBeGlvc0Vycm9yID0gcmVxdWlyZSgnLi4vY29yZS9BeGlvc0Vycm9yJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIEEgYENhbmNlbGVkRXJyb3JgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsZWRFcnJvcihtZXNzYWdlKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICBBeGlvc0Vycm9yLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gJ2NhbmNlbGVkJyA6IG1lc3NhZ2UsIEF4aW9zRXJyb3IuRVJSX0NBTkNFTEVEKTtcbiAgdGhpcy5uYW1lID0gJ0NhbmNlbGVkRXJyb3InO1xufVxuXG51dGlscy5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yLCB7XG4gIF9fQ0FOQ0VMX186IHRydWVcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbGVkRXJyb3I7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlUHJvdG9jb2wodXJsKSB7XG4gIHZhciBtYXRjaCA9IC9eKFstK1xcd117MSwyNX0pKDo/XFwvXFwvfDopLy5leGVjKHVybCk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXSB8fCAnJztcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgYnVpbGRGdWxsUGF0aCA9IHJlcXVpcmUoJy4uL2NvcmUvYnVpbGRGdWxsUGF0aCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgdHJhbnNpdGlvbmFsRGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cy90cmFuc2l0aW9uYWwnKTtcbnZhciBBeGlvc0Vycm9yID0gcmVxdWlyZSgnLi4vY29yZS9BeGlvc0Vycm9yJyk7XG52YXIgQ2FuY2VsZWRFcnJvciA9IHJlcXVpcmUoJy4uL2NhbmNlbC9DYW5jZWxlZEVycm9yJyk7XG52YXIgcGFyc2VQcm90b2NvbCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VQcm90b2NvbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG4gICAgdmFyIHJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgdmFyIG9uQ2FuY2VsZWQ7XG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICBjb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpICYmIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpIDogJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHZhciBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgZnVuY3Rpb24gb25sb2FkZW5kKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG4gICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7XG4gICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIXJlc3BvbnNlVHlwZSB8fCByZXNwb25zZVR5cGUgPT09ICd0ZXh0JyB8fCAgcmVzcG9uc2VUeXBlID09PSAnanNvbicgP1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUoZnVuY3Rpb24gX3Jlc29sdmUodmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIF9yZWplY3QoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICgnb25sb2FkZW5kJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBVc2Ugb25sb2FkZW5kIGlmIGF2YWlsYWJsZVxuICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUgdG8gZW11bGF0ZSBvbmxvYWRlbmRcbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCBjYWxsIG9ubG9hZGVuZCBvbiB0aGUgbmV4dCAndGljaydcbiAgICAgICAgc2V0VGltZW91dChvbmxvYWRlbmQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG4gICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIEF4aW9zRXJyb3IuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgdmFyIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBjb25maWcudGltZW91dCA/ICd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcgOiAndGltZW91dCBleGNlZWRlZCc7XG4gICAgICB2YXIgdHJhbnNpdGlvbmFsID0gY29uZmlnLnRyYW5zaXRpb25hbCB8fCB0cmFuc2l0aW9uYWxEZWZhdWx0cztcbiAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoXG4gICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIHRyYW5zaXRpb25hbC5jbGFyaWZ5VGltZW91dEVycm9yID8gQXhpb3NFcnJvci5FVElNRURPVVQgOiBBeGlvc0Vycm9yLkVDT05OQUJPUlRFRCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oZnVsbFBhdGgpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhY29uZmlnLndpdGhDcmVkZW50aWFscztcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKHJlc3BvbnNlVHlwZSAmJiByZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4gfHwgY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBmdW5jdGlvbihjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdCghY2FuY2VsIHx8IChjYW5jZWwgJiYgY2FuY2VsLnR5cGUpID8gbmV3IENhbmNlbGVkRXJyb3IoKSA6IGNhbmNlbCk7XG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4gJiYgY29uZmlnLmNhbmNlbFRva2VuLnN1YnNjcmliZShvbkNhbmNlbGVkKTtcbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IGNvbmZpZy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlcXVlc3REYXRhKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHByb3RvY29sID0gcGFyc2VQcm90b2NvbChmdWxsUGF0aCk7XG5cbiAgICBpZiAocHJvdG9jb2wgJiYgWyAnaHR0cCcsICdodHRwcycsICdmaWxlJyBdLmluZGV4T2YocHJvdG9jb2wpID09PSAtMSkge1xuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdVbnN1cHBvcnRlZCBwcm90b2NvbCAnICsgcHJvdG9jb2wgKyAnOicsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVFVRVNULCBjb25maWcpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCAiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHN0cmljdFxubW9kdWxlLmV4cG9ydHMgPSBudWxsO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7XG52YXIgQXhpb3NFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvQXhpb3NFcnJvcicpO1xudmFyIHRyYW5zaXRpb25hbERlZmF1bHRzID0gcmVxdWlyZSgnLi90cmFuc2l0aW9uYWwnKTtcbnZhciB0b0Zvcm1EYXRhID0gcmVxdWlyZSgnLi4vaGVscGVycy90b0Zvcm1EYXRhJyk7XG5cbnZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG5mdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcbiAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuICB2YXIgYWRhcHRlcjtcbiAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4uL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlTYWZlbHkocmF3VmFsdWUsIHBhcnNlciwgZW5jb2Rlcikge1xuICBpZiAodXRpbHMuaXNTdHJpbmcocmF3VmFsdWUpKSB7XG4gICAgdHJ5IHtcbiAgICAgIChwYXJzZXIgfHwgSlNPTi5wYXJzZSkocmF3VmFsdWUpO1xuICAgICAgcmV0dXJuIHV0aWxzLnRyaW0ocmF3VmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlLm5hbWUgIT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gKGVuY29kZXIgfHwgSlNPTi5zdHJpbmdpZnkpKHJhd1ZhbHVlKTtcbn1cblxudmFyIGRlZmF1bHRzID0ge1xuXG4gIHRyYW5zaXRpb25hbDogdHJhbnNpdGlvbmFsRGVmYXVsdHMsXG5cbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQWNjZXB0Jyk7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgdmFyIGlzT2JqZWN0UGF5bG9hZCA9IHV0aWxzLmlzT2JqZWN0KGRhdGEpO1xuICAgIHZhciBjb250ZW50VHlwZSA9IGhlYWRlcnMgJiYgaGVhZGVyc1snQ29udGVudC1UeXBlJ107XG5cbiAgICB2YXIgaXNGaWxlTGlzdDtcblxuICAgIGlmICgoaXNGaWxlTGlzdCA9IHV0aWxzLmlzRmlsZUxpc3QoZGF0YSkpIHx8IChpc09iamVjdFBheWxvYWQgJiYgY29udGVudFR5cGUgPT09ICdtdWx0aXBhcnQvZm9ybS1kYXRhJykpIHtcbiAgICAgIHZhciBfRm9ybURhdGEgPSB0aGlzLmVudiAmJiB0aGlzLmVudi5Gb3JtRGF0YTtcbiAgICAgIHJldHVybiB0b0Zvcm1EYXRhKGlzRmlsZUxpc3QgPyB7J2ZpbGVzW10nOiBkYXRhfSA6IGRhdGEsIF9Gb3JtRGF0YSAmJiBuZXcgX0Zvcm1EYXRhKCkpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3RQYXlsb2FkIHx8IGNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vanNvbicpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmV0dXJuIHN0cmluZ2lmeVNhZmVseShkYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgdmFyIHRyYW5zaXRpb25hbCA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICB2YXIgc2lsZW50SlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLnNpbGVudEpTT05QYXJzaW5nO1xuICAgIHZhciBmb3JjZWRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuZm9yY2VkSlNPTlBhcnNpbmc7XG4gICAgdmFyIHN0cmljdEpTT05QYXJzaW5nID0gIXNpbGVudEpTT05QYXJzaW5nICYmIHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7XG5cbiAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcgfHwgKGZvcmNlZEpTT05QYXJzaW5nICYmIHV0aWxzLmlzU3RyaW5nKGRhdGEpICYmIGRhdGEubGVuZ3RoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChzdHJpY3RKU09OUGFyc2luZykge1xuICAgICAgICAgIGlmIChlLm5hbWUgPT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IEF4aW9zRXJyb3IuZnJvbShlLCBBeGlvc0Vycm9yLkVSUl9CQURfUkVTUE9OU0UsIHRoaXMsIG51bGwsIHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuICBtYXhCb2R5TGVuZ3RoOiAtMSxcblxuICBlbnY6IHtcbiAgICBGb3JtRGF0YTogcmVxdWlyZSgnLi9lbnYvRm9ybURhdGEnKVxuICB9LFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH0sXG5cbiAgaGVhZGVyczoge1xuICAgIGNvbW1vbjoge1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb250ZXh0LCBkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBDYW5jZWxlZEVycm9yID0gcmVxdWlyZSgnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3InKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsZWRFcnJvcmAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcigpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNcbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgIGNvbmZpZyxcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh0YXJnZXQsIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh7fSwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7XG4gICAgaWYgKHByb3AgaW4gY29uZmlnMikge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbWVyZ2VNYXAgPSB7XG4gICAgJ3VybCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ21ldGhvZCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLFxuICAgICdiYXNlVVJMJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVxdWVzdCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAncGFyYW1zU2VyaWFsaXplcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3dpdGhDcmVkZW50aWFscyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2FkYXB0ZXInOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd4c3JmQ29va2llTmFtZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ29uRG93bmxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2RlY29tcHJlc3MnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnbWF4Qm9keUxlbmd0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2JlZm9yZVJlZGlyZWN0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNwb3J0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cEFnZW50JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cHNBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2NhbmNlbFRva2VuJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnc29ja2V0UGF0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlRW5jb2RpbmcnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd2YWxpZGF0ZVN0YXR1cyc6IG1lcmdlRGlyZWN0S2V5c1xuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoY29uZmlnMSkuY29uY2F0KE9iamVjdC5rZXlzKGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHtcbiAgICB2YXIgbWVyZ2UgPSBtZXJnZU1hcFtwcm9wXSB8fCBtZXJnZURlZXBQcm9wZXJ0aWVzO1xuICAgIHZhciBjb25maWdWYWx1ZSA9IG1lcmdlKHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG4iLCAibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwidmVyc2lvblwiOiBcIjAuMjcuMlwiXG59OyIsICIndXNlIHN0cmljdCc7XG5cbnZhciBWRVJTSU9OID0gcmVxdWlyZSgnLi4vZW52L2RhdGEnKS52ZXJzaW9uO1xudmFyIEF4aW9zRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL0F4aW9zRXJyb3InKTtcblxudmFyIHZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblsnb2JqZWN0JywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ2Z1bmN0aW9uJywgJ3N0cmluZycsICdzeW1ib2wnXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUsIGkpIHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbnZhciBkZXByZWNhdGVkV2FybmluZ3MgPSB7fTtcblxuLyoqXG4gKiBUcmFuc2l0aW9uYWwgb3B0aW9uIHZhbGlkYXRvclxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gKi9cbnZhbGlkYXRvcnMudHJhbnNpdGlvbmFsID0gZnVuY3Rpb24gdHJhbnNpdGlvbmFsKHZhbGlkYXRvciwgdmVyc2lvbiwgbWVzc2FnZSkge1xuICBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlKG9wdCwgZGVzYykge1xuICAgIHJldHVybiAnW0F4aW9zIHYnICsgVkVSU0lPTiArICddIFRyYW5zaXRpb25hbCBvcHRpb24gXFwnJyArIG9wdCArICdcXCcnICsgZGVzYyArIChtZXNzYWdlID8gJy4gJyArIG1lc3NhZ2UgOiAnJyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG9wdCwgb3B0cykge1xuICAgIGlmICh2YWxpZGF0b3IgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihcbiAgICAgICAgZm9ybWF0TWVzc2FnZShvcHQsICcgaGFzIGJlZW4gcmVtb3ZlZCcgKyAodmVyc2lvbiA/ICcgaW4gJyArIHZlcnNpb24gOiAnJykpLFxuICAgICAgICBBeGlvc0Vycm9yLkVSUl9ERVBSRUNBVEVEXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uICYmICFkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSkge1xuICAgICAgZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0gPSB0cnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgZm9ybWF0TWVzc2FnZShcbiAgICAgICAgICBvcHQsXG4gICAgICAgICAgJyBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYnICsgdmVyc2lvbiArICcgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmVhciBmdXR1cmUnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRvciA/IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRzKSA6IHRydWU7XG4gIH07XG59O1xuXG4vKipcbiAqIEFzc2VydCBvYmplY3QncyBwcm9wZXJ0aWVzIHR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge29iamVjdH0gc2NoZW1hXG4gKiBAcGFyYW0ge2Jvb2xlYW4/fSBhbGxvd1Vua25vd25cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRPcHRpb25zKG9wdGlvbnMsIHNjaGVtYSwgYWxsb3dVbmtub3duKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCcsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT05fVkFMVUUpO1xuICB9XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgdmFyIG9wdCA9IGtleXNbaV07XG4gICAgdmFyIHZhbGlkYXRvciA9IHNjaGVtYVtvcHRdO1xuICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIHZhciByZXN1bHQgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbiAnICsgb3B0ICsgJyBtdXN0IGJlICcgKyByZXN1bHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT05fVkFMVUUpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChhbGxvd1Vua25vd24gIT09IHRydWUpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdVbmtub3duIG9wdGlvbiAnICsgb3B0LCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFzc2VydE9wdGlvbnM6IGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnM6IHZhbGlkYXRvcnNcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gcmVxdWlyZSgnLi9JbnRlcmNlcHRvck1hbmFnZXInKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSByZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO1xudmFyIG1lcmdlQ29uZmlnID0gcmVxdWlyZSgnLi9tZXJnZUNvbmZpZycpO1xudmFyIGJ1aWxkRnVsbFBhdGggPSByZXF1aXJlKCcuL2J1aWxkRnVsbFBhdGgnKTtcbnZhciB2YWxpZGF0b3IgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3ZhbGlkYXRvcicpO1xuXG52YXIgdmFsaWRhdG9ycyA9IHZhbGlkYXRvci52YWxpZGF0b3JzO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnT3JVcmwsIGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZ09yVXJsID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICBjb25maWcudXJsID0gY29uZmlnT3JVcmw7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXG4gIC8vIFNldCBjb25maWcubWV0aG9kXG4gIGlmIChjb25maWcubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JztcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsO1xuXG4gIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwge1xuICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbilcbiAgICB9LCBmYWxzZSk7XG4gIH1cblxuICAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzXG4gIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB2YXIgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gdHJ1ZTtcbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluID0gW107XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHZhciBwcm9taXNlO1xuXG4gIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7XG4gICAgY2hhaW4gPSBjaGFpbi5jb25jYXQocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcblxuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcbiAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cblxuICB2YXIgbmV3Q29uZmlnID0gY29uZmlnO1xuICB3aGlsZSAocmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTtcbiAgICB2YXIgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0KG5ld0NvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIHdoaWxlIChyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgcmV0dXJuIGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcik7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVIVFRQTWV0aG9kKGlzRm9ybSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBodHRwTWV0aG9kKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogaXNGb3JtID8ge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgfSA6IHt9LFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCgpO1xuXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2QgKyAnRm9ybSddID0gZ2VuZXJhdGVIVFRQTWV0aG9kKHRydWUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FuY2VsZWRFcnJvciA9IHJlcXVpcmUoJy4vQ2FuY2VsZWRFcnJvcicpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG5cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4oZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgaWYgKCF0b2tlbi5fbGlzdGVuZXJzKSByZXR1cm47XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4uX2xpc3RlbmVyc1tpXShjYW5jZWwpO1xuICAgIH1cbiAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4gPSBmdW5jdGlvbihvbmZ1bGZpbGxlZCkge1xuICAgIHZhciBfcmVzb2x2ZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpO1xuICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiByZWplY3QoKSB7XG4gICAgICB0b2tlbi51bnN1YnNjcmliZShfcmVzb2x2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbGVkRXJyb3IobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICBsaXN0ZW5lcih0aGlzLnJlYXNvbik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbbGlzdGVuZXJdO1xuICB9XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAqL1xuXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zXG4gKlxuICogQHBhcmFtIHsqfSBwYXlsb2FkIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3MsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQXhpb3NFcnJvcihwYXlsb2FkKSB7XG4gIHJldHVybiB1dGlscy5pc09iamVjdChwYXlsb2FkKSAmJiAocGF5bG9hZC5pc0F4aW9zRXJyb3IgPT09IHRydWUpO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIG1lcmdlQ29uZmlnID0gcmVxdWlyZSgnLi9jb3JlL21lcmdlQ29uZmlnJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsZWRFcnJvciA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbGVkRXJyb3InKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcbmF4aW9zLlZFUlNJT04gPSByZXF1aXJlKCcuL2Vudi9kYXRhJykudmVyc2lvbjtcbmF4aW9zLnRvRm9ybURhdGEgPSByZXF1aXJlKCcuL2hlbHBlcnMvdG9Gb3JtRGF0YScpO1xuXG4vLyBFeHBvc2UgQXhpb3NFcnJvciBjbGFzc1xuYXhpb3MuQXhpb3NFcnJvciA9IHJlcXVpcmUoJy4uL2xpYi9jb3JlL0F4aW9zRXJyb3InKTtcblxuLy8gYWxpYXMgZm9yIENhbmNlbGVkRXJyb3IgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmF4aW9zLkNhbmNlbCA9IGF4aW9zLkNhbmNlbGVkRXJyb3I7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbi8vIEV4cG9zZSBpc0F4aW9zRXJyb3JcbmF4aW9zLmlzQXhpb3NFcnJvciA9IHJlcXVpcmUoJy4vaGVscGVycy9pc0F4aW9zRXJyb3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG4iLCAibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpOyIsICJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBmb3JtYXRzIH0gZnJvbSAnLi4vdXRpbHMvZm9ybWF0cy5qcyc7XHJcbmltcG9ydCB7IGNoZWNrVXNlclBsYXRmb3JtIH0gZnJvbSAnLi4vdXRpbHMvaGVscGVycy5qcyc7XHJcbi8vaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCdcclxuXHJcbmNvbnN0IEJFQUNPTl9BUElfQkFTRSA9ICdodHRwczovL2JlYWNvbi56ZXN0eS5tYXJrZXQnXHJcbmNvbnN0IEJFQUNPTl9HUkFQSFFMX1VSSSA9ICdodHRwczovL2JlYWNvbjIuemVzdHkubWFya2V0L3pncmFwaHFsJ1xyXG5cclxuY29uc3QgREJfRU5EUE9JTlQgPSAnaHR0cHM6Ly9hcGkuemVzdHkubWFya2V0L2FwaSc7XHJcbi8vIFRPRE86IERldGVybWluZSBiZXN0IHdheSB0byBlbmFibGUgc3dpdGNoaW5nIHRvIHN0YWdpbmdcclxuY29uc3QgU1RBR0lOR19EQl9FTkRQT0lOVCA9ICdodHRwczovL2FwaS1zdGFnaW5nLnplc3R5Lm1hcmtldC9hcGknO1xyXG5cclxuLy9jb25zdCBzZXNzaW9uSWQgPSB1dWlkdjQoKTtcclxuXHJcbmNvbnN0IGZldGNoQ2FtcGFpZ25BZCA9IGFzeW5jIChhZFVuaXRJZCwgZm9ybWF0ID0gJ3RhbGwnLCBzdHlsZSA9ICdzdGFuZGFyZCcpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXJsID0gZW5jb2RlVVJJKHdpbmRvdy50b3AubG9jYXRpb24uaHJlZikucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8gSWYgVVJMIGVuZHMgd2l0aCBhIHNsYXNoLCByZW1vdmUgaXRcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChgJHtEQl9FTkRQT0lOVH0vYWQ/YWRfdW5pdF9pZD0ke2FkVW5pdElkfSZ1cmw9JHt1cmx9YCk7XHJcbiAgICBpZiAocmVzLmRhdGEpXHJcbiAgICAgIHJldHVybiByZXMuZGF0YTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBObyBhY3RpdmUgY2FtcGFpZ24sIGp1c3QgZGlzcGxheSBkZWZhdWx0IGJhbm5lclxyXG4gICAgICByZXR1cm4geyBBZHM6IFt7IGFzc2V0X3VybDogZm9ybWF0c1tmb3JtYXRdLnN0eWxlW3N0eWxlXSwgY3RhX3VybDogJ2h0dHBzOi8vd3d3Lnplc3R5Lm1hcmtldCcgfV0sIENhbXBhaWduSWQ6ICdUZXN0Q2FtcGFpZ24nfTtcclxuICAgIH1cclxuICB9IGNhdGNoIHtcclxuICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IHJldHJpZXZlIGFuIGFjdGl2ZSBjYW1wYWlnbiBiYW5uZXIuIFJldHJpZXZpbmcgZGVmYXVsdCBiYW5uZXIuJylcclxuICAgIHJldHVybiB7IEFkczogW3sgYXNzZXRfdXJsOiBmb3JtYXRzW2Zvcm1hdF0uc3R5bGVbc3R5bGVdLCBjdGFfdXJsOiAnaHR0cHM6Ly93d3cuemVzdHkubWFya2V0JyB9XSwgQ2FtcGFpZ25JZDogJ1Rlc3RDYW1wYWlnbid9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluY3JlbWVudCB0aGUgb24tbG9hZCBldmVudCBjb3VudCBmb3IgdGhlIHNwYWNlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcGFjZUlkIFRoZSBzcGFjZSBJRFxyXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVwcmVzZW50aW5nIHRoZSBQT1NUIHJlcXVlc3RcclxuICovXHJcbmNvbnN0IHNlbmRPbkxvYWRNZXRyaWMgPSBhc3luYyAoc3BhY2VJZCwgY2FtcGFpZ25JZCA9IG51bGwpID0+IHtcclxuICBjb25zdCB7IHBsYXRmb3JtLCBjb25maWRlbmNlIH0gPSBhd2FpdCBjaGVja1VzZXJQbGF0Zm9ybSgpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgICBCRUFDT05fR1JBUEhRTF9VUkksXHJcbiAgICAgIHsgcXVlcnk6IGBtdXRhdGlvbiB7IGluY3JlbWVudChldmVudFR5cGU6IHZpc2l0cywgc3BhY2VJZDogXFxcIiR7c3BhY2VJZH1cXFwiLCBjYW1wYWlnbklkOiBcXFwiJHtjYW1wYWlnbklkfVxcXCIsIHBsYXRmb3JtOiB7IG5hbWU6ICR7cGxhdGZvcm19LCBjb25maWRlbmNlOiAke2NvbmZpZGVuY2V9IH0pIHsgbWVzc2FnZSB9IH1gIH0sXHJcbiAgICAgIHsgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH19XHJcbiAgICApXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gZW1pdCBvbmxvYWQgZXZlbnRcIiwgZS5tZXNzYWdlKVxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNlbmRPbkNsaWNrTWV0cmljID0gYXN5bmMgKHNwYWNlSWQsIGNhbXBhaWduSWQgPSBudWxsKSA9PiB7XHJcbiAgY29uc3QgeyBwbGF0Zm9ybSwgY29uZmlkZW5jZSB9ID0gYXdhaXQgY2hlY2tVc2VyUGxhdGZvcm0oKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGF4aW9zLnBvc3QoXHJcbiAgICAgIEJFQUNPTl9HUkFQSFFMX1VSSSxcclxuICAgICAgeyBxdWVyeTogYG11dGF0aW9uIHsgaW5jcmVtZW50KGV2ZW50VHlwZTogY2xpY2tzLCBzcGFjZUlkOiBcXFwiJHtzcGFjZUlkfVxcXCIsIGNhbXBhaWduSWQ6IFxcXCIke2NhbXBhaWduSWR9XFxcIiwgcGxhdGZvcm06IHsgbmFtZTogJHtwbGF0Zm9ybX0sIGNvbmZpZGVuY2U6ICR7Y29uZmlkZW5jZX0gfSkgeyBtZXNzYWdlIH0gfWAgfSxcclxuICAgICAgeyBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfX1cclxuICAgIClcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBlbWl0IG9uY2xpY2sgZXZlbnRcIiwgZS5tZXNzYWdlKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYW5hbHl0aWNzU2Vzc2lvbiA9IGFzeW5jIChzcGFjZUlkLCBjYW1wYWlnbklkKSA9PiB7XHJcbiAgY29uc3QgeyBwbGF0Zm9ybSwgY29uZmlkZW5jZSB9ID0gYXdhaXQgY2hlY2tVc2VyUGxhdGZvcm0oKTtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgQkVBQ09OX0dSQVBIUUxfVVJJLFxyXG4gICAgICB7IHF1ZXJ5OiBgbXV0YXRpb24geyBpbmNyZW1lbnQoZXZlbnRUeXBlOiBzZXNzaW9uLCBzcGFjZUlkOiBcXFwiJHtzcGFjZUlkfVxcXCIsIGNhbXBhaWduSWQ6IFxcXCIke2NhbXBhaWduSWR9XFxcIiwgcGxhdGZvcm06IHsgbmFtZTogJHtwbGF0Zm9ybX0sIGNvbmZpZGVuY2U6ICR7Y29uZmlkZW5jZX0gfSkgeyBtZXNzYWdlIH0gfWAgfSxcclxuICAgICAgeyBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfX1cclxuICAgIClcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRmFpbGVkIHRvIGVtaXQgc2Vzc2lvbiBhbmFseXRpY3NgLCBlLm1lc3NhZ2UpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBmZXRjaENhbXBhaWduQWQsIHNlbmRPbkxvYWRNZXRyaWMsIHNlbmRPbkNsaWNrTWV0cmljLCBhbmFseXRpY3NTZXNzaW9uIH07XHJcbiIsICJjb25zdCBhc3NldHNVUkwgPSAnaHR0cHM6Ly96ZXN0eS1zdG9yYWdlLXByb2QuczMuYW1hem9uYXdzLmNvbS9pbWFnZXMvemVzdHknO1xyXG5cclxuY29uc3QgZm9ybWF0cyA9IHtcclxuICAgICd0YWxsJzoge1xyXG4gICAgICAgIHdpZHRoOiAwLjc1LFxyXG4gICAgICAgIGhlaWdodDogMSxcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAnc3RhbmRhcmQnOiBgJHthc3NldHNVUkx9L3plc3R5LWJhbm5lci10YWxsLnBuZ2AsXHJcbiAgICAgICAgICAgICdtaW5pbWFsJzogYCR7YXNzZXRzVVJMfS96ZXN0eS1iYW5uZXItdGFsbC1taW5pbWFsLnBuZ2AsXHJcbiAgICAgICAgICAgICd0cmFuc3BhcmVudCc6IGAke2Fzc2V0c1VSTH0vemVzdHktYmFubmVyLXRhbGwtdHJhbnNwYXJlbnQucG5nYFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAnd2lkZSc6IHtcclxuICAgICAgICB3aWR0aDogNCxcclxuICAgICAgICBoZWlnaHQ6IDEsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgJ3N0YW5kYXJkJzogYCR7YXNzZXRzVVJMfS96ZXN0eS1iYW5uZXItd2lkZS5wbmdgLFxyXG4gICAgICAgICAgICAnbWluaW1hbCc6IGAke2Fzc2V0c1VSTH0vemVzdHktYmFubmVyLXdpZGUtbWluaW1hbC5wbmdgLFxyXG4gICAgICAgICAgICAndHJhbnNwYXJlbnQnOiBgJHthc3NldHNVUkx9L3plc3R5LWJhbm5lci13aWRlLXRyYW5zcGFyZW50LnBuZ2BcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgJ3NxdWFyZSc6IHtcclxuICAgICAgICB3aWR0aDogMSxcclxuICAgICAgICBoZWlnaHQ6IDEsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgJ3N0YW5kYXJkJzogYCR7YXNzZXRzVVJMfS96ZXN0eS1iYW5uZXItc3F1YXJlLnBuZ2AsXHJcbiAgICAgICAgICAgICdtaW5pbWFsJzogYCR7YXNzZXRzVVJMfS96ZXN0eS1iYW5uZXItc3F1YXJlLW1pbmltYWwucG5nYCxcclxuICAgICAgICAgICAgJ3RyYW5zcGFyZW50JzogYCR7YXNzZXRzVVJMfS96ZXN0eS1iYW5uZXItc3F1YXJlLXRyYW5zcGFyZW50LnBuZ2BcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRGb3JtYXQgPSAnc3F1YXJlJztcclxuY29uc3QgZGVmYXVsdFN0eWxlID0gJ3N0YW5kYXJkJztcclxuXHJcbmV4cG9ydCB7IGZvcm1hdHMsIGRlZmF1bHRGb3JtYXQsIGRlZmF1bHRTdHlsZSB9OyIsICJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBpcGZzOi8vIGFuZCBhcjovLyBsaW5rcyBhbmQgSVBGUyBoYXNoZXMgdG8gVVJMcy5cclxuICogQHBhcmFtIHtTdHJpbmd9IHVyaSBUaGUgaXBmczovLyBsaW5rIG9yIElQRlMgaGFzaC5cclxuICogQHJldHVybnMgQSBmb3JtYXR0ZWQgVVJMIHRvIHRoZSBJUEZTIHJlc291cmNlLlxyXG4gKi9cclxuY29uc3QgcGFyc2VQcm90b2NvbCA9IHVyaSA9PiB7XHJcbiAgaWYgKHVyaS5zdWJzdHJpbmcoMCw0KSA9PT0gXCJpcGZzXCIpIHtcclxuICAgIHJldHVybiBgaHR0cHM6Ly9pcGZzLnplc3R5Lm1hcmtldC9pcGZzLyR7dXJpLnN1YnN0cmluZyg3KX1gO1xyXG4gIH0gZWxzZSBpZiAodXJpLnN1YnN0cmluZygwLDQpID09PSBcImh0dHBcIikge1xyXG4gICAgcmV0dXJuIHVyaTtcclxuICB9IGVsc2UgaWYgKHVyaS5zdWJzdHJpbmcoMCw1KSA9PT0gXCJodHRwc1wiKSB7XHJcbiAgICByZXR1cm4gdXJpO1xyXG4gIH0gZWxzZSBpZiAodXJpLnN1YnN0cmluZygwLDIpID09PSBcImFyXCIpIHtcclxuICAgIC8vIGdldCByZWRpcmVjdGVkIHVybFxyXG4gICAgYXhpb3MuZ2V0KGBodHRwczovL2Fyd2VhdmUubmV0LyR7dXJpLnN1YnN0cmluZyg1KX1gKVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMudXJsO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcblxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBkZWZhdWx0IHRvIGlwZnNcclxuICAgIHJldHVybiBgaHR0cHM6Ly9pcGZzLnplc3R5Lm1hcmtldC9pcGZzLyR7dXJpfWA7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0cmlldmVzIGFuIElQRlMgZ2F0ZXdheSB0byBhbGxldmlhdGUgcmF0ZS10aHJvdHRsaW5nIGZyb20gdXNpbmcgb25seSBhIHNpbmdsZSBnYXRld2F5LlxyXG4gKiBTZWxlY3Rpb24gaXMgd2VpZ2h0ZWQgcmFuZG9tIGJhc2VkIG9uIGF2ZXJhZ2UgbGF0ZW5jeS5cclxuICogQHJldHVybnMgQSB3ZWlnaHRlZCByYW5kb20gcHVibGljIElQRlMgZ2F0ZXdheVxyXG4gKi9cclxuY29uc3QgZ2V0SVBGU0dhdGV3YXkgPSAoKSA9PiB7XHJcbiAgLy8gVGVtcG9yYXJpbHkgcmUtd2VpZ2h0aW5nIGZvciBlYXNlIG9mIHRlc3RpbmcgZHVyaW5nIFYyIG1pZ3JhdGlvblxyXG4gIGNvbnN0IGdhdGV3YXlzID0gW1xyXG4gICAgeyBnYXRld2F5OiAnaHR0cHM6Ly9pcGZzLmZpbGViYXNlLmlvJywgd2VpZ2h0OiAzNCB9LFxyXG4gICAgeyBnYXRld2F5OiAnaHR0cHM6Ly9jbG91ZGZsYXJlLWlwZnMuY29tJywgd2VpZ2h0OiAzMyB9LFxyXG4gICAgeyBnYXRld2F5OiAnaHR0cHM6Ly9nYXRld2F5LnBpbmF0YS5jbG91ZCcsIHdlaWdodDogMzMgfSxcclxuICBdO1xyXG5cclxuICBjb25zdCB3ZWlnaHRzID0gW107XHJcbiAgbGV0IGk7XHJcbiAgZm9yIChpID0gMDsgaSA8IGdhdGV3YXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICB3ZWlnaHRzW2ldID0gZ2F0ZXdheXNbaV0ud2VpZ2h0ICsgKHdlaWdodHNbaSAtIDFdIHx8IDApO1xyXG4gIH1cclxuICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpICogd2VpZ2h0c1t3ZWlnaHRzLmxlbmd0aCAtIDFdO1xyXG4gIGZvciAoaSA9IDA7IGkgPCB3ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAod2VpZ2h0c1tpXSA+IHJhbmRvbSkgYnJlYWs7XHJcbiAgfVxyXG4gIHJldHVybiBnYXRld2F5c1tpXS5nYXRld2F5O1xyXG59XHJcblxyXG4vKipcclxuICogRm9yIGVhY2ggb2YgdGhlIGZvbGxvd2luZyBicm93c2VyIGNoZWNraW5nIGZ1bmN0aW9ucywgd2UgaGF2ZSBhIG1hdGNoIHdpdGggYVxyXG4gKiBjb25maWRlbmNlIG9mIFwiRnVsbFwiIGlmIGJvdGggdGhlIGZlYXR1cmUgZGV0ZWN0aW9uIGNoZWNrIGFuZCB1c2VyIGFnZW50IGNoZWNrXHJcbiAqIGNvbWUgYmFjayB0cnVlLiBJZiBvbmx5IG9uZSBvZiB0aGVtIGNvbWVzIGJhY2sgdHJ1ZSwgd2UgaGF2ZSBhIG1hdGNoIHdpdGggYSBjb25maWRlbmNlXHJcbiAqIG9mIFwiUGFydGlhbFwiLiBJZiBuZWl0aGVyIGFyZSB0cnVlLCBtYXRjaCBpcyBmYWxzZSBhbmQgb3VyIGNvbmZpZGVuY2UgaXMgXCJOb25lXCIuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFBlcmZvcm1zIGZlYXR1cmUgZGV0ZWN0aW9uIGFuZCBhIFVBIGNoZWNrIHRvIGRldGVybWluZSBpZiB1c2VyIGlzIHVzaW5nIE9jdWx1cyBCcm93c2VyLlxyXG4gKiBAcmV0dXJucyBhbiBvYmplY3QgaW5kaWNhdGluZyB3aGV0aGVyIHRoZXJlIGlzIGEgbWF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGNvbmZpZGVuY2UgbGV2ZWwuXHJcbiAqL1xyXG5jb25zdCBjaGVja09jdWx1c0Jyb3dzZXIgPSAoKSA9PiB7XHJcbiAgLy8gQXMgb2YgNS8yNi8yMiwgb25seSBPY3VsdXMgQnJvd3NlciBoYXMgaW1wbGVtZW50ZWQgdGhlIFdlYlhSIEhhbmQgSW5wdXQgTW9kdWxlIGFuZCBXZWJYUiBMYXllcnMgQVBJLlxyXG4gIGNvbnN0IGZlYXR1cmVEZXRlY3QgPSAod2luZG93LlhSSGFuZCAhPSBudWxsICYmIHdpbmRvdy5YUk1lZGlhQmluZGluZyAhPSBudWxsKTtcclxuICBjb25zdCB1YUNoZWNrID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnT2N1bHVzQnJvd3NlcicpO1xyXG4gIGNvbnN0IGNvbmZpZGVuY2UgPSBmZWF0dXJlRGV0ZWN0ICYmIHVhQ2hlY2sgPyAnRnVsbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICBmZWF0dXJlRGV0ZWN0IHx8IHVhQ2hlY2sgPyAnUGFydGlhbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICAnTm9uZSc7XHJcbiAgcmV0dXJuIHsgbWF0Y2g6IGNvbmZpZGVuY2UgIT09ICdOb25lJywgY29uZmlkZW5jZTogY29uZmlkZW5jZSB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQZXJmb3JtcyBmZWF0dXJlIGRldGVjdGlvbiBhbmQgYSBVQSBjaGVjayB0byBkZXRlcm1pbmUgaWYgdXNlciBpcyB1c2luZyBXb2x2aWMuXHJcbiAqIEByZXR1cm5zIGFuIG9iamVjdCBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlcmUgaXMgYSBtYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgY29uZmlkZW5jZSBsZXZlbC5cclxuICovXHJcbmNvbnN0IGNoZWNrV29sdmljQnJvd3NlciA9ICgpID0+IHtcclxuICAvLyBXaGlsZSBXb2x2aWMgaXMgc3RpbGwgc2hpcHBpbmcgd2l0aCBhIEdlY2tvVmlldyBiYWNrZW5kLCB0aGlzIGZlYXR1cmUgZGV0ZWN0IHNob3VsZCBob2xkIHRydWUuXHJcbiAgLy8gT25jZSB2ZXJzaW9ucyB3aXRoIGRpZmZlcmVudCBiYWNrZW5kcyBzdGFydCBzaG93aW5nIHVwIGluIHRoZSB3aWxkLCB0aGlzIHdpbGwgbmVlZCByZXZpc2l0aW5nLlxyXG4gIGNvbnN0IGZlYXR1cmVEZXRlY3QgPSAod2luZG93Lm1veklubmVyU2NyZWVuWCAhPSBudWxsICYmIHdpbmRvdy5zcGVlY2hTeW50aGVzaXMgPT0gbnVsbCk7XHJcbiAgY29uc3QgdWFDaGVjayA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ01vYmlsZSBWUicpICYmICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdPY3VsdXNCcm93c2VyJyk7XHJcbiAgY29uc3QgY29uZmlkZW5jZSA9IGZlYXR1cmVEZXRlY3QgJiYgdWFDaGVjayA/ICdGdWxsJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVEZXRlY3QgfHwgdWFDaGVjayA/ICdQYXJ0aWFsJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICdOb25lJztcclxuICByZXR1cm4geyBtYXRjaDogY29uZmlkZW5jZSAhPT0gJ05vbmUnLCBjb25maWRlbmNlOiBjb25maWRlbmNlIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBlcmZvcm1zIGZlYXR1cmUgZGV0ZWN0aW9uIGFuZCBhIFVBIGNoZWNrIHRvIGRldGVybWluZSBpZiB1c2VyIGlzIHVzaW5nIFBpY28ncyBicm93c2VyLlxyXG4gKiBAcmV0dXJucyBhbiBvYmplY3QgaW5kaWNhdGluZyB3aGV0aGVyIHRoZXJlIGlzIGEgbWF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGNvbmZpZGVuY2UgbGV2ZWwuXHJcbiAqL1xyXG4gY29uc3QgY2hlY2tQaWNvQnJvd3NlciA9IGFzeW5jICgpID0+IHtcclxuICAvLyBQaWNvJ3MgaW50ZXJuYWwgYnJvd3NlciBpcyBhIENocm9taXVtIGZvcmsgYW5kIHNlZW1zIHRvIGV4cG9zZSBzb21lIFdlYlhSIEFSIG1vZHVsZXMsXHJcbiAgLy8gc28gcGVyZm9ybSBhbiBpc1Nlc3Npb25TdXBwb3J0ZWQoKSBjaGVjayBmb3IgaW1tZXJzaXZlLXZyIGFuZCBpbW1lcnNpdmUtYXIuXHJcbiAgY29uc3QgZmVhdHVyZURldGVjdCA9IG5hdmlnYXRvci54ciAmJiBcclxuICAgIChhd2FpdCBuYXZpZ2F0b3IueHIuaXNTZXNzaW9uU3VwcG9ydGVkKCdpbW1lcnNpdmUtdnInKSAmJiBhd2FpdCBuYXZpZ2F0b3IueHIuaXNTZXNzaW9uU3VwcG9ydGVkKCdpbW1lcnNpdmUtYXInKSk7XHJcbiAgY29uc3QgdWFDaGVjayA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1BpY28gTmVvIDMgTGluaycpO1xyXG4gIGNvbnN0IGNvbmZpZGVuY2UgPSBmZWF0dXJlRGV0ZWN0ICYmIHVhQ2hlY2sgPyAnRnVsbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICBmZWF0dXJlRGV0ZWN0IHx8IHVhQ2hlY2sgPyAnUGFydGlhbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICAnTm9uZSc7XHJcbiAgcmV0dXJuIHsgbWF0Y2g6IGNvbmZpZGVuY2UgIT09ICdOb25lJywgY29uZmlkZW5jZTogY29uZmlkZW5jZSB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQZXJmb3JtcyBmZWF0dXJlIGRldGVjdGlvbiBhbmQgYSBVQSBjaGVjayB0byBkZXRlcm1pbmUgaWYgdXNlciBpcyB1c2luZyBhIGJyb3dzZXIgb24gdGhlaXIgZGVza3RvcC5cclxuICogQHJldHVybnMgYW4gb2JqZWN0IGluZGljYXRpbmcgd2hldGhlciB0aGVyZSBpcyBhIG1hdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBjb25maWRlbmNlIGxldmVsLlxyXG4gKi9cclxuIGNvbnN0IGNoZWNrRGVza3RvcEJyb3dzZXIgPSAoKSA9PiB7XHJcbiAgLy8gV2UgYXJlIGRvaW5nIGEgY29hcnNlIGNoZWNrIGhlcmUgZm9yIGxhY2sgb2YgdG91Y2gtY2FwYWJpbGl0eSBhbmQgbm8gQW5kcm9pZC9Nb2JpbGUgc3RyaW5nIGluIHRoZSBVQS5cclxuICBjb25zdCBmZWF0dXJlRGV0ZWN0ID0gKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA9PT0gMCB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA9PT0gMCk7XHJcbiAgY29uc3QgdWFDaGVjayA9ICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdBbmRyb2lkJykgJiYgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ01vYmlsZScpO1xyXG4gIGNvbnN0IGNvbmZpZGVuY2UgPSBmZWF0dXJlRGV0ZWN0ICYmIHVhQ2hlY2sgPyAnRnVsbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICBmZWF0dXJlRGV0ZWN0IHx8IHVhQ2hlY2sgPyAnUGFydGlhbCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICAnTm9uZSc7XHJcbiAgcmV0dXJuIHsgbWF0Y2g6IGNvbmZpZGVuY2UgIT09ICdOb25lJywgY29uZmlkZW5jZTogY29uZmlkZW5jZSB9XHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrVXNlclBsYXRmb3JtID0gYXN5bmMgKCkgPT4ge1xyXG4gIGxldCBjdXJyZW50TWF0Y2ggPSB7XHJcbiAgICBwbGF0Zm9ybTogJycsXHJcbiAgICBjb25maWRlbmNlOiAnJ1xyXG4gIH07XHJcblxyXG4gIGlmIChjaGVja09jdWx1c0Jyb3dzZXIoKS5tYXRjaCkge1xyXG4gICAgY3VycmVudE1hdGNoID0geyBwbGF0Zm9ybTogJ09jdWx1cycsIGNvbmZpZGVuY2U6IGNoZWNrT2N1bHVzQnJvd3NlcigpLmNvbmZpZGVuY2UgfTtcclxuICB9IGVsc2UgaWYgKGNoZWNrV29sdmljQnJvd3NlcigpLm1hdGNoKSB7XHJcbiAgICBjdXJyZW50TWF0Y2ggPSB7IHBsYXRmb3JtOiAnV29sdmljJywgY29uZmlkZW5jZTogY2hlY2tXb2x2aWNCcm93c2VyKCkuY29uZmlkZW5jZSB9O1xyXG4gIH0gZWxzZSBpZiAoYXdhaXQgY2hlY2tQaWNvQnJvd3NlcigpLm1hdGNoKSB7XHJcbiAgICBjdXJyZW50TWF0Y2ggPSB7IHBsYXRmb3JtOiAnUGljbycsIGNvbmZpZGVuY2U6IGF3YWl0IGNoZWNrUGljb0Jyb3dzZXIoKS5jb25maWRlbmNlIH07XHJcbiAgfSBlbHNlIGlmIChjaGVja0Rlc2t0b3BCcm93c2VyKCkubWF0Y2gpIHtcclxuICAgIGN1cnJlbnRNYXRjaCA9IHsgcGxhdGZvcm06ICdEZXNrdG9wJywgY29uZmlkZW5jZTogY2hlY2tEZXNrdG9wQnJvd3NlcigpLmNvbmZpZGVuY2UgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gQ2Fubm90IGRldGVybWluZSBwbGF0Zm9ybSwgcmV0dXJuIGEgZGVmYXVsdCBvYmplY3RcclxuICAgIGN1cnJlbnRNYXRjaCA9IHsgcGxhdGZvcm06ICdVbmtub3duJywgY29uZmlkZW5jZTogJ05vbmUnIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY3VycmVudE1hdGNoO1xyXG59XHJcblxyXG5jb25zdCBvcGVuVVJMID0gdXJsID0+IHtcclxuICBpZiAoIXVybCkgcmV0dXJuO1xyXG5cclxuICAvLyBBcmUgd2Ugb24gYSBkZXZpY2UgdGhhdCB3aWxsIGRlZXBsaW5rP1xyXG4gIC8vIFRoaXMgbWF5IG5lZWQgdG8gYmUgZXhwYW5kZWQgaW4gdGhlIGZ1dHVyZS5cclxuICBpZiAoY2hlY2tPY3VsdXNCcm93c2VyKCkubWF0Y2gpIHtcclxuICAgIGlmICh1cmwuaW5jbHVkZXMoJ2h0dHBzOi8vd3d3Lm9jdWx1cy5jb20vZXhwZXJpZW5jZXMvcXVlc3QvJykpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGNoZWNrV29sdmljQnJvd3NlcigpLm1hdGNoKSB7XHJcbiAgICAvLyBXb2x2aWMncyBwb3AtdXAgYmxvY2tpbmcgaXMgbW9yZSBhZ2dyZXNzaXZlIHRoYW4gb3RoZXJcclxuICAgIC8vIENocm9taXVtLWJhc2VkIFhSIGJyb3dzZXJzLCBwcm9iYWJseSBkdWUgdG8gaXRzIEZpcmVmb3hcclxuICAgIC8vIGxpbmVhZ2UuIEluIG9yZGVyIHRvIHByZXZlbnQgY2xpY2tzIGJlaW5nIGNhdWdodCBieSBpdCxcclxuICAgIC8vIGNvbnN0cnVjdCBvdXIgb3duIG1vZGFsIHdpbmRvdyBhbmQgZGlyZWN0bHkgbGluayB0aGVcclxuICAgIC8vIHllcyBidXR0b24gdG8gdGhlIHdpbmRvdy5vcGVuIGNhbGwuXHJcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGNvbnN0IHllcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgY29uc3Qgbm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHJcbiAgICBtb2RhbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKDAsIDAsIDAsIDAuNzUpJ1xyXG4gICAgbW9kYWwuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xyXG4gICAgbW9kYWwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICBtb2RhbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgICBtb2RhbC5zdHlsZS50b3AgPSAnNTAlJztcclxuICAgIG1vZGFsLnN0eWxlLmxlZnQgPSAnNTAlJztcclxuICAgIG1vZGFsLnN0eWxlLnBhZGRpbmcgPSAnNSUnO1xyXG4gICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUlJztcclxuICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknO1xyXG5cclxuICAgIG1lc3NhZ2UuaW5uZXJIVE1MID0gYDxiPlRoaXMgYmlsbGJvYXJkIGxlYWRzIHRvICR7dXJsfS4gQ29udGludWU/PC9iPmA7XHJcblxyXG4gICAgeWVzLmlubmVyVGV4dCA9ICdNb3ZlIGN1cnNvciBiYWNrIGludG8gd2luZG93Lic7XHJcbiAgICB5ZXMuc3R5bGUud2lkdGggPSAnMTAwdncnO1xyXG4gICAgeWVzLnN0eWxlLmhlaWdodCA9ICcxMDB2aCc7XHJcbiAgICB5ZXMub25tb3VzZWVudGVyID0gKCkgPT4ge1xyXG4gICAgICB5ZXMuc3R5bGUud2lkdGggPSAnYXV0byc7XHJcbiAgICAgIHllcy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgIHllcy5pbm5lclRleHQgPSAnWWVzJztcclxuICAgIH1cclxuICAgIHllcy5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKTtcclxuICAgICAgbW9kYWwucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbm8uaW5uZXJUZXh0ID0gJ05vJztcclxuICAgIG5vLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgIG1vZGFsLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGFsLmFwcGVuZChjb250ZW50KTtcclxuICAgIGNvbnRlbnQuYXBwZW5kKG1lc3NhZ2UpO1xyXG4gICAgY29udGVudC5hcHBlbmQoeWVzKTtcclxuICAgIGNvbnRlbnQuYXBwZW5kKG5vKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKG1vZGFsKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7XHJcbn1cclxuXHJcbmNvbnN0IHVybENvbnRhaW5zVVRNUGFyYW1zID0gKHVybCkgPT4ge1xyXG4gIHJldHVybiB1cmwuaW5kZXhPZigndXRtX3NvdXJjZT0nKSAhPT0gLTEgfHwgdXJsLmluZGV4T2YoJ3V0bV9jYW1wYWlnbj0nKSAhPT0gLTEgfHwgdXJsLmluZGV4T2YoJ3V0bV9jaGFubmVsPScpICE9PSAtMTtcclxufVxyXG5cclxuY29uc3QgYXBwZW5kVVRNUGFyYW1zID0gKHVybCwgc3BhY2VJZCkgPT4ge1xyXG4gIGxldCBuZXdfdXJsID0gbmV3IFVSTCh1cmwpXHJcbiAgbmV3X3VybC5zZWFyY2hQYXJhbXMuc2V0KCd1dG1fc291cmNlJywgJ1plc3R5TWFya2V0Jyk7XHJcbiAgbmV3X3VybC5zZWFyY2hQYXJhbXMuc2V0KCd1dG1fY2FtcGFpZ24nLCAnWmVzdHlDYW1wYWlnbicpO1xyXG4gIG5ld191cmwuc2VhcmNoUGFyYW1zLnNldCgndXRtX2NoYW5uZWwnLCBgU3BhY2VJZF8ke3NwYWNlSWR9YCk7XHJcbiAgcmV0dXJuIG5ld191cmwuaHJlZjtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBwYXJzZVByb3RvY29sLFxyXG4gIGdldElQRlNHYXRld2F5LFxyXG4gIGNoZWNrT2N1bHVzQnJvd3NlcixcclxuICBjaGVja1dvbHZpY0Jyb3dzZXIsXHJcbiAgY2hlY2tQaWNvQnJvd3NlcixcclxuICBjaGVja0Rlc2t0b3BCcm93c2VyLFxyXG4gIGNoZWNrVXNlclBsYXRmb3JtLFxyXG4gIG9wZW5VUkwsXHJcbiAgdXJsQ29udGFpbnNVVE1QYXJhbXMsXHJcbiAgYXBwZW5kVVRNUGFyYW1zXHJcbn07IiwgIntcclxuICBcIm5hbWVcIjogXCJAemVzdHltYXJrZXQvd29uZGVybGFuZC1zZGtcIixcclxuICBcInZlcnNpb25cIjogXCIyLjIuMFwiLFxyXG4gIFwiZGVzY3JpcHRpb25cIjogXCJXb25kZXJsYW5kIEVuZ2luZSBTREsgZm9yIFplc3R5IEJhbm5lciBpbnRlZ3JhdGlvbi5cIixcclxuICBcIm1haW5cIjogXCJkaXN0L3plc3R5LXdvbmRlcmxhbmQtc2RrLmpzXCIsXHJcbiAgXCJleHBvcnRzXCI6IHtcclxuICAgIFwiLlwiOiBcIi4vZGlzdC96ZXN0eS13b25kZXJsYW5kLXNkay5qc1wiLFxyXG4gICAgXCIuL2NvbXBhdFwiOiBcIi4vZGlzdC96ZXN0eS13b25kZXJsYW5kLXNkay1jb21wYXQuanNcIlxyXG4gIH0sXHJcbiAgXCJ0eXBlXCI6IFwibW9kdWxlXCIsXHJcbiAgXCJzY3JpcHRzXCI6IHtcclxuICAgIFwiYnVpbGRcIjogXCJlc2J1aWxkIHNyYy9pbmRleC5qcyAtLW1pbmlmeSAtLXNvdXJjZW1hcCAtLWZvcm1hdD1lc20gLS1idW5kbGUgLS1vdXRmaWxlPWRpc3QvemVzdHktd29uZGVybGFuZC1zZGsuanMgLS1leHRlcm5hbDpAd29uZGVybGFuZGVuZ2luZS8qXCIsXHJcbiAgICBcImJ1aWxkLWNvbXBhdFwiOiBcImVzYnVpbGQgc3JjL29sZFdMRS5qcyAtLW1pbmlmeSAtLXNvdXJjZW1hcCAtLWJ1bmRsZSAtLW91dGZpbGU9ZGlzdC96ZXN0eS13b25kZXJsYW5kLXNkay1jb21wYXQuanNcIixcclxuICAgIFwiYnVpbGQtZGV2XCI6IFwiZXNidWlsZCBzcmMvaW5kZXguanMgLS1zb3VyY2VtYXAgLS1mb3JtYXQ9ZXNtIC0tYnVuZGxlIC0tb3V0ZmlsZT1kaXN0L3plc3R5LXdvbmRlcmxhbmQtc2RrLmpzIC0tZXh0ZXJuYWw6QHdvbmRlcmxhbmRlbmdpbmUvKlwiXHJcbiAgfSxcclxuICBcIndvbmRlcmxhbmRlbmdpbmVcIjoge30sXHJcbiAgXCJhdXRob3JcIjogXCJcIixcclxuICBcImxpY2Vuc2VcIjogXCJNSVRcIixcclxuICBcInBlZXJEZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgXCJAd29uZGVybGFuZGVuZ2luZS9hcGlcIjogXCJeMS4wLjAgfHwgXjEuMC4wLXJjLjVcIixcclxuICAgIFwiQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50c1wiOiBcIl4xLjAuMCB8fCBeMS4wLjAtcmMuNlwiXHJcbiAgfSxcclxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XHJcbiAgICBcImVzYnVpbGRcIjogXCJeMC4xNy4xOFwiXHJcbiAgfVxyXG59XHJcbiIsICIvKiBnbG9iYWwgV0wgKi9cclxuXHJcbmltcG9ydCB7IGZldGNoQ2FtcGFpZ25BZCwgc2VuZE9uTG9hZE1ldHJpYywgc2VuZE9uQ2xpY2tNZXRyaWMgfSBmcm9tICcuLi8uLi91dGlscy9uZXR3b3JraW5nJztcclxuaW1wb3J0IHsgZm9ybWF0cywgZGVmYXVsdEZvcm1hdCB9IGZyb20gJy4uLy4uL3V0aWxzL2Zvcm1hdHMnO1xyXG5pbXBvcnQgeyBvcGVuVVJMIH0gZnJvbSAnLi4vLi4vdXRpbHMvaGVscGVycyc7XHJcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi9wYWNrYWdlLmpzb24nO1xyXG5pbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBDb2xsaWRlcixcclxuICBNZXNoQ29tcG9uZW50LFxyXG4gIENvbGxpc2lvbkNvbXBvbmVudCxcclxuICBQcm9wZXJ0eVxyXG59IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XHJcbmltcG9ydCB7IEN1cnNvclRhcmdldCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMnO1xyXG5cclxuY29uc29sZS5sb2coJ1plc3R5IFNESyBWZXJzaW9uOiAnLCB2ZXJzaW9uKTtcclxuXHJcbmNvbnN0IGZvcm1hdHNMaW5rID0gJ2h0dHBzOi8vY2RuLnplc3R5Lnh5ei9zZGsvemVzdHktZm9ybWF0cy5qcyc7XHJcbmNvbnN0IG5ldHdvcmtpbmdMaW5rID0gJ2h0dHBzOi8vY2RuLnplc3R5Lnh5ei9zZGsvemVzdHktbmV0d29ya2luZy5qcyc7XHJcblxyXG4vKipcclxuICogW1plc3R5IE1hcmtldF0oaHR0cHM6Ly96ZXN0eS5tYXJrZXQpIGJhbm5lciBhZCB1bml0XHJcbiAqXHJcbiAqIEZldGNoZXMgYSBiYW5uZXIgYW5kIGFwcGxpZXMgaXQgdG8gYSB0ZXh0dXJlLiBJZiBubyBgY3Vyc29yLXRhcmdldGAgYW5kIGBjb2xsaXNpb25gXHJcbiAqIGlzIGZvdW5kIG9uIHRoZSBvYmplY3QsIHRoZXkgd2lsbCBiZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgKHdpdGggYm94IHNoYXBlIGluIGdyb3VwIDEpLlxyXG4gKlxyXG4gKiBNYWtlIHN1cmUgdGhhdCB5b3Ugc2V0IHVwIGEgY3Vyc29yIHRvIGVuYWJsZSBjbGlja2luZy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBaZXN0eUJhbm5lciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgc3RhdGljIFR5cGVOYW1lID0gJ3plc3R5LWJhbm5lcic7XHJcbiAgc3RhdGljIFByb3BlcnRpZXMgPSB7XHJcbiAgICAvKiBZb3VyIGJhbm5lciBhZCB1bml0IElEICovXHJcbiAgICBhZFVuaXQ6IFByb3BlcnR5LnN0cmluZygnJyksXHJcbiAgICAvKiBUaGUgZGVmYXVsdCBiYW5uZXIgZm9ybWF0LCBkZXRlcm1pbmVzIGFzcGVjdCByYXRpbyAqL1xyXG4gICAgZm9ybWF0OiBQcm9wZXJ0eS5lbnVtKFsndGFsbCcsICd3aWRlJywgJ3NxdWFyZSddLCAnc3F1YXJlJyksXHJcbiAgICAvKiBUaGUgZGVmYXVsdCBiYW5uZXIgdmlzdWFsIHN0eWxlICovXHJcbiAgICBzdHlsZTogUHJvcGVydHkuZW51bShbJ3N0YW5kYXJkJywgJ21pbmltYWwnLCAndHJhbnNwYXJlbnQnXSwgJ3RyYW5zcGFyZW50JyksXHJcbiAgICAvKiBTY2FsZSB3aWR0aCBvZiB0aGUgb2JqZWN0IHRvIGJhbm5lciByYXRpbyAoc2VlIGZvcm1hdCkgYW5kIHNldCB0aGUgY29sbGlkZXIgKi9cclxuICAgIHNjYWxlVG9SYXRpbzogUHJvcGVydHkuYm9vbCh0cnVlKSxcclxuICAgIC8qIFRleHR1cmUgcHJvcGVydHkgdG8gc2V0IGFmdGVyIGJhbm5lciBpcyBsb2FkZWQuIExlYXZlIFwiYXV0b1wiIHRvIGRldGVjdCBmcm9tXHJcbiAgICAqIGtub3duIHBpcGVsaW5lcyAoUGhvbmcgT3BhcXVlIFRleHR1cmVkLCBGbGF0IE9wYXF1ZSBUZXh0dXJlZCkgKi9cclxuICAgIHRleHR1cmVQcm9wZXJ0eTogUHJvcGVydHkuc3RyaW5nKCdhdXRvJyksXHJcbiAgICAvKiBXaGV0aGVyIHRvIGFzc2lnbiB0aGUgYmFubmVyIHRvIHRoZSBhbHBoYU1hc2tUZXh0dXJlIHByb3BlcnR5IG9mIHRoZSBtYXRlcmlhbCAqL1xyXG4gICAgYXNzaWduQWxwaGFNYXNrVGV4dHVyZTogUHJvcGVydHkuYm9vbCh0cnVlKSxcclxuICAgIGJlYWNvbjogUHJvcGVydHkuYm9vbCh0cnVlKSxcclxuICAgIC8qIExvYWQgSVBGUyBnYXRld2F5cyBhbmQgZGVmYXVsdCBpbWFnZSB1cmlzIGF0IHJ1bnRpbWUsIGlmIGZhbHNlIGF0IGJ1aWxkIHRpbWUgKi9cclxuICAgIGR5bmFtaWNGb3JtYXRzOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxyXG4gICAgLyogQXV0b21hdGljYWxseSBjcmVhdGVzIGEgY29sbGlzaW9uIGFuZCBjdXJzb3ItdGFyZ2V0IGNvbXBvbmVudHMsIGlmIHRoZXJlIGlzbid0IG9uZSAqL1xyXG4gICAgY3JlYXRlQXV0b21hdGljQ29sbGlzaW9uOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxyXG4gICAgLyogTG9hZCBuZXR3b3JraW5nIGxvZ2ljIGF0IHJ1bnRpbWUsIGlmIGZhbHNlIGF0IGJ1aWxkIHRpbWUgKi9cclxuICAgIGR5bmFtaWNOZXR3b3JraW5nOiBQcm9wZXJ0eS5ib29sKGZhbHNlKSxcclxuICB9O1xyXG4gIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xyXG4gICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KEN1cnNvclRhcmdldCk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5mb3JtYXRzID0gT2JqZWN0LnZhbHVlcyhmb3JtYXRzKTtcclxuICAgIHRoaXMuZm9ybWF0S2V5cyA9IE9iamVjdC5rZXlzKGZvcm1hdHMpO1xyXG4gICAgdGhpcy5zdHlsZUtleXMgPSBbJ3N0YW5kYXJkJywgJ21pbmltYWwnLCAndHJhbnNwYXJlbnQnXTtcclxuICB9XHJcblxyXG4gIHN0YXJ0KCkge1xyXG4gICAgdGhpcy5tZXNoID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xyXG4gICAgaWYgKCF0aGlzLm1lc2gpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3plc3R5LWJhbm5lciAnIG1pc3NpbmcgbWVzaCBjb21wb25lbnRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuY3JlYXRlQXV0b21hdGljQ29sbGlzaW9uKSB7XHJcbiAgICAgIHRoaXMuY29sbGlzaW9uID1cclxuICAgICAgICB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoQ29sbGlzaW9uQ29tcG9uZW50KSB8fFxyXG4gICAgICAgIHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChDb2xsaXNpb25Db21wb25lbnQsIHtcclxuICAgICAgICAgIGNvbGxpZGVyOiBDb2xsaWRlci5Cb3gsXHJcbiAgICAgICAgICBncm91cDogMHgyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmN1cnNvclRhcmdldCA9XHJcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCkgfHwgdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KEN1cnNvclRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5jdXJzb3JUYXJnZXQub25DbGljay5hZGQodGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmR5bmFtaWNGb3JtYXRzKSB7XHJcbiAgICAgIGxldCBmb3JtYXRzU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgICBmb3JtYXRzU2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmZvcm1hdHNPdmVycmlkZSA9IHplc3R5Rm9ybWF0cy5mb3JtYXRzO1xyXG4gICAgICB9O1xyXG4gICAgICBmb3JtYXRzU2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgZm9ybWF0c0xpbmspO1xyXG4gICAgICBmb3JtYXRzU2NyaXB0LnNldEF0dHJpYnV0ZSgnY3Jvc3NvcmlnaW4nLCAnYW5vbnltb3VzJyk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybWF0c1NjcmlwdCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZHluYW1pY05ldHdvcmtpbmcpIHtcclxuICAgICAgaW1wb3J0KG5ldHdvcmtpbmdMaW5rKVxyXG4gICAgICAgIC50aGVuKHZhbHVlID0+IHtcclxuICAgICAgICAgIHRoaXMuemVzdHlOZXR3b3JraW5nID0gT2JqZWN0LmFzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgdGhpcy5zdGFydExvYWRpbmcoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgbmV0d29ya2luZyBjb2RlLCBmYWxsaW5nIGJhY2sgdG8gYnVuZGxlZCB2ZXJzaW9uLicpO1xyXG4gICAgICAgICAgdGhpcy5keW5hbWljTmV0d29ya2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5zdGFydExvYWRpbmcoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3RhcnRMb2FkaW5nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGFydExvYWRpbmcoKSB7XHJcbiAgICB0aGlzLmxvYWRCYW5uZXIoXHJcbiAgICAgIHRoaXMuYWRVbml0LFxyXG4gICAgICB0aGlzLmZvcm1hdEtleXNbdGhpcy5mb3JtYXRdLFxyXG4gICAgICB0aGlzLnN0eWxlS2V5c1t0aGlzLnN0eWxlXVxyXG4gICAgKS50aGVuKGJhbm5lciA9PiB7XHJcbiAgICAgIHRoaXMuYmFubmVyID0gYmFubmVyO1xyXG4gICAgICBpZiAodGhpcy5zY2FsZVRvUmF0aW8pIHtcclxuICAgICAgICAvKiBNYWtlIGJhbm5lciBhbHdheXMgMSBtZXRlciBoZWlnaHQsIGFkanVzdCB3aWR0aCBhY2NvcmRpbmcgdG8gYmFubmVyIGFzcGVjdCByYXRpbyAqL1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5vYmplY3Quc2NhbGluZ0xvY2FsWzFdO1xyXG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0U2NhbGluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLmNyZWF0ZUF1dG9tYXRpY0NvbGxpc2lvbikge1xyXG4gICAgICAgICAgdGhpcy5jb2xsaXNpb24uZXh0ZW50cyA9IFtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRzW3RoaXMuZm9ybWF0XS53aWR0aCAqIHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgMC4xXHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9iamVjdC5zY2FsZShbdGhpcy5mb3JtYXRzW3RoaXMuZm9ybWF0XS53aWR0aCAqIHRoaXMuaGVpZ2h0LCB0aGlzLmhlaWdodCwgMS4wXSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbSA9IHRoaXMubWVzaC5tYXRlcmlhbC5jbG9uZSgpO1xyXG4gICAgICBpZiAodGhpcy50ZXh0dXJlUHJvcGVydHkgPT09ICdhdXRvJykge1xyXG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gbS5zaGFkZXI7XHJcbiAgICAgICAgaWYgKHBpcGVsaW5lID09PSAnUGhvbmcgT3BhcXVlIFRleHR1cmVkJykge1xyXG4gICAgICAgICAgbS5kaWZmdXNlVGV4dHVyZSA9IGJhbm5lci50ZXh0dXJlO1xyXG4gICAgICAgICAgbS5hbHBoYU1hc2tUaHJlc2hvbGQgPSAwLjM7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwaXBlbGluZSA9PT0gJ0ZsYXQgT3BhcXVlIFRleHR1cmVkJykge1xyXG4gICAgICAgICAgbS5mbGF0VGV4dHVyZSA9IGJhbm5lci50ZXh0dXJlO1xyXG4gICAgICAgICAgbS5hbHBoYU1hc2tUaHJlc2hvbGQgPSAwLjg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IEVycm9yKFxyXG4gICAgICAgICAgICBcIid6ZXN0eS1iYW5uZXInIHVuYWJsZSB0byBhcHBseSBiYW5uZXIgdGV4dHVyZTogdW5zdXBwb3J0ZWQgcGlwZWxpbmUgXCIgKyBwaXBlbGluZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tZXNoLm1hdGVyaWFsID0gbTtcclxuICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwuYWxwaGFNYXNrVGV4dHVyZSA9IGJhbm5lci50ZXh0dXJlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubWVzaC5tYXRlcmlhbFt0aGlzLnRleHR1cmVQcm9wZXJ0eV0gPSBiYW5uZXIudGV4dHVyZTtcclxuICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwuYWxwaGFNYXNrVGV4dHVyZSA9IGJhbm5lci50ZXh0dXJlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmJlYWNvbikge1xyXG4gICAgICAgIHRoaXMuZHluYW1pY05ldHdvcmtpbmcgP1xyXG4gICAgICAgICAgdGhpcy56ZXN0eU5ldHdvcmtpbmcuc2VuZE9uTG9hZE1ldHJpYyh0aGlzLmFkVW5pdCwgdGhpcy5iYW5uZXIuY2FtcGFpZ25JZCkgOlxyXG4gICAgICAgICAgc2VuZE9uTG9hZE1ldHJpYyh0aGlzLmFkVW5pdCwgdGhpcy5iYW5uZXIuY2FtcGFpZ25JZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25DbGljaygpIHtcclxuICAgIGlmICh0aGlzLmJhbm5lcj8udXJsKSB7XHJcbiAgICAgIGlmICh0aGlzLmVuZ2luZS54cikge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24uZW5kKCkudGhlbih0aGlzLmV4ZWN1dGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmVuZ2luZS54clNlc3Npb24pIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS54clNlc3Npb24uZW5kKCkudGhlbih0aGlzLmV4ZWN1dGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmV4ZWN1dGVDbGljaygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBleGVjdXRlQ2xpY2soKSB7XHJcbiAgICBvcGVuVVJMKHRoaXMuYmFubmVyLnVybCk7XHJcbiAgICBpZiAodGhpcy5iZWFjb24pIHtcclxuICAgICAgdGhpcy5keW5hbWljTmV0d29ya2luZyA/XHJcbiAgICAgICAgdGhpcy56ZXN0eU5ldHdvcmtpbmcuc2VuZE9uQ2xpY2tNZXRyaWModGhpcy5hZFVuaXQsIHRoaXMuYmFubmVyLmNhbXBhaWduSWQpIDpcclxuICAgICAgICBzZW5kT25DbGlja01ldHJpYyh0aGlzLmFkVW5pdCwgdGhpcy5iYW5uZXIuY2FtcGFpZ25JZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkQmFubmVyKGFkVW5pdCwgZm9ybWF0LCBzdHlsZSkge1xyXG4gICAgY29uc3QgYWN0aXZlQ2FtcGFpZ24gPSB0aGlzLmR5bmFtaWNOZXR3b3JraW5nID9cclxuICAgICAgYXdhaXQgdGhpcy56ZXN0eU5ldHdvcmtpbmcuZmV0Y2hDYW1wYWlnbkFkKGFkVW5pdCwgZm9ybWF0LCBzdHlsZSkgOlxyXG4gICAgICBhd2FpdCBmZXRjaENhbXBhaWduQWQoYWRVbml0LCBmb3JtYXQsIHN0eWxlKTtcclxuXHJcbiAgICBjb25zdCB7IGFzc2V0X3VybDogaW1hZ2UsIGN0YV91cmw6IHVybCB9ID0gYWN0aXZlQ2FtcGFpZ24uQWRzWzBdO1xyXG4gICAgdGhpcy5jYW1wYWlnbklkID0gYWN0aXZlQ2FtcGFpZ24uQ2FtcGFpZ25JZDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbmdpbmUudGV4dHVyZXMubG9hZChpbWFnZSwgJycpLnRoZW4odGV4dHVyZSA9PiB7XHJcbiAgICAgIHJldHVybiB7IHRleHR1cmUsIGltYWdlU3JjOiBpbWFnZSwgdXJsLCBjYW1wYWlnbklkOiBhY3RpdmVDYW1wYWlnbi5DYW1wYWlnbklkIH07XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwgImltcG9ydCB7Q29tcG9uZW50LCBPYmplY3QzRH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcclxuaW1wb3J0IHtnYW1lU3RhdGUsIFN0YXRlfSBmcm9tICcuLi9jbGFzc2VzL2dhbWUtc3RhdGUuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFjdGl2ZUFkIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdhY3RpdmUtYWQnO1xyXG5cclxuICAgIGNvbXBvbmVudHMhOiBDb21wb25lbnRbXTtcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICB0aGlzLmdldENvbXBvbmVudHModGhpcy5vYmplY3QpO1xyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShnYW1lU3RhdGUuc3RhdGUpO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5zdGF0ZVN1YmplY3Quc3Vic2NyaWJlKHRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXRlQ2hhbmdlKG5ld1N0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gU3RhdGUuZ2FtZU92ZXIgfHwgbmV3U3RhdGUgPT09IFN0YXRlLndlbGNvbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goKGMpID0+IChjLmFjdGl2ZSA9IHRydWUpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaCgoYykgPT4gKGMuYWN0aXZlID0gZmFsc2UpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29tcG9uZW50cyhvYmo6IE9iamVjdDNEKSB7XHJcbiAgICAgICAgY29uc3QgY29tcHMgPSBvYmouZ2V0Q29tcG9uZW50cygpLmZpbHRlcigoYykgPT4gYy50eXBlICE9PSBBY3RpdmVBZC5UeXBlTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRzLmNvbmNhdChjb21wcyk7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xuXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcbiAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn1cblxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xuICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xuICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgIHRbcF0gPSBzW3BdO1xuICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgIH1cbiAgcmV0dXJuIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xuICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cbiAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcbiAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XG4gIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xuICB2YXIgXywgZG9uZSA9IGZhbHNlO1xuICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGNvbnRleHQgPSB7fTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xuICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XG4gICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xuICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XG4gICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcbiAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcbiAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XG4gICAgICB9XG4gIH1cbiAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xuICBkb25lID0gdHJ1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XG4gIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xuICB9XG4gIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcbiAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XG4gIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICB9XG59XG5cbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICBvW2syXSA9IG1ba107XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XG4gIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcbiAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XG4gIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcbiAgICAgIH1cbiAgfTtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcbiAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xuICBpZiAoIW0pIHJldHVybiBvO1xuICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcbiAgdHJ5IHtcbiAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xuICB9XG4gIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxuICBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XG4gICAgICB9XG4gICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cbiAgfVxuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xuICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcbiAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcbiAgcmV0dXJuIGFyO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcbiAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcbiAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxuICAgICAgICAgIHJba10gPSBhW2pdO1xuICByZXR1cm4gcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcbiAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xuICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XG4gIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG4gIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcbiAgdmFyIGksIHA7XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XG4gIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcbiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XG4gIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XG4gIHJldHVybiBjb29rZWQ7XG59O1xuXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xuICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcbiAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XG4gIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xuICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcbiAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudiwgdmFsdWUsIGFzeW5jKSB7XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XG4gICAgdmFyIGRpc3Bvc2U7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XG4gICAgfVxuICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIHdoaWxlIChlbnYuc3RhY2subGVuZ3RoKSB7XG4gICAgICB2YXIgcmVjID0gZW52LnN0YWNrLnBvcCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlYy5kaXNwb3NlICYmIHJlYy5kaXNwb3NlLmNhbGwocmVjLnZhbHVlKTtcbiAgICAgICAgaWYgKHJlYy5hc3luYykgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgZmFpbChlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xuICB9XG4gIHJldHVybiBuZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX19leHRlbmRzLFxuICBfX2Fzc2lnbixcbiAgX19yZXN0LFxuICBfX2RlY29yYXRlLFxuICBfX3BhcmFtLFxuICBfX21ldGFkYXRhLFxuICBfX2F3YWl0ZXIsXG4gIF9fZ2VuZXJhdG9yLFxuICBfX2NyZWF0ZUJpbmRpbmcsXG4gIF9fZXhwb3J0U3RhcixcbiAgX192YWx1ZXMsXG4gIF9fcmVhZCxcbiAgX19zcHJlYWQsXG4gIF9fc3ByZWFkQXJyYXlzLFxuICBfX3NwcmVhZEFycmF5LFxuICBfX2F3YWl0LFxuICBfX2FzeW5jR2VuZXJhdG9yLFxuICBfX2FzeW5jRGVsZWdhdG9yLFxuICBfX2FzeW5jVmFsdWVzLFxuICBfX21ha2VUZW1wbGF0ZU9iamVjdCxcbiAgX19pbXBvcnRTdGFyLFxuICBfX2ltcG9ydERlZmF1bHQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRJbixcbiAgX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXG4gIF9fZGlzcG9zZVJlc291cmNlcyxcbn07XG4iLCAiLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIGZ1bmN0aW9uLlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVja1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuIiwgIi8qKlxuICogVXNlZCB0byBjcmVhdGUgRXJyb3Igc3ViY2xhc3NlcyB1bnRpbCB0aGUgY29tbXVuaXR5IG1vdmVzIGF3YXkgZnJvbSBFUzUuXG4gKlxuICogVGhpcyBpcyBiZWNhdXNlIGNvbXBpbGluZyBmcm9tIFR5cGVTY3JpcHQgZG93biB0byBFUzUgaGFzIGlzc3VlcyB3aXRoIHN1YmNsYXNzaW5nIEVycm9yc1xuICogYXMgd2VsbCBhcyBvdGhlciBidWlsdC1pbiB0eXBlczogaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMjEyM1xuICpcbiAqIEBwYXJhbSBjcmVhdGVJbXBsIEEgZmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGFjdHVhbCBjb25zdHJ1Y3RvciBpbXBsZW1lbnRhdGlvbi4gVGhlIHJldHVybmVkXG4gKiBmdW5jdGlvbiBzaG91bGQgYmUgYSBuYW1lZCBmdW5jdGlvbiB0aGF0IGNhbGxzIGBfc3VwZXJgIGludGVybmFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFcnJvckNsYXNzPFQ+KGNyZWF0ZUltcGw6IChfc3VwZXI6IGFueSkgPT4gYW55KTogVCB7XG4gIGNvbnN0IF9zdXBlciA9IChpbnN0YW5jZTogYW55KSA9PiB7XG4gICAgRXJyb3IuY2FsbChpbnN0YW5jZSk7XG4gICAgaW5zdGFuY2Uuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfTtcblxuICBjb25zdCBjdG9yRnVuYyA9IGNyZWF0ZUltcGwoX3N1cGVyKTtcbiAgY3RvckZ1bmMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBjdG9yRnVuYy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yRnVuYztcbiAgcmV0dXJuIGN0b3JGdW5jO1xufVxuIiwgImltcG9ydCB7IGNyZWF0ZUVycm9yQ2xhc3MgfSBmcm9tICcuL2NyZWF0ZUVycm9yQ2xhc3MnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVuc3Vic2NyaXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IGVycm9yczogYW55W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5zdWJzY3JpcHRpb25FcnJvckN0b3Ige1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLiBEbyBub3QgY29uc3RydWN0IGVycm9yIGluc3RhbmNlcy5cbiAgICogQ2Fubm90IGJlIHRhZ2dlZCBhcyBpbnRlcm5hbDogaHR0cHM6Ly9naXRodWIuY29tL1JlYWN0aXZlWC9yeGpzL2lzc3Vlcy82MjY5XG4gICAqL1xuICBuZXcgKGVycm9yczogYW55W10pOiBVbnN1YnNjcmlwdGlvbkVycm9yO1xufVxuXG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIG9uZSBvciBtb3JlIGVycm9ycyBoYXZlIG9jY3VycmVkIGR1cmluZyB0aGVcbiAqIGB1bnN1YnNjcmliZWAgb2YgYSB7QGxpbmsgU3Vic2NyaXB0aW9ufS5cbiAqL1xuZXhwb3J0IGNvbnN0IFVuc3Vic2NyaXB0aW9uRXJyb3I6IFVuc3Vic2NyaXB0aW9uRXJyb3JDdG9yID0gY3JlYXRlRXJyb3JDbGFzcyhcbiAgKF9zdXBlcikgPT5cbiAgICBmdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCh0aGlzOiBhbnksIGVycm9yczogKEVycm9yIHwgc3RyaW5nKVtdKSB7XG4gICAgICBfc3VwZXIodGhpcyk7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcnNcbiAgICAgICAgPyBgJHtlcnJvcnMubGVuZ3RofSBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxuJHtlcnJvcnMubWFwKChlcnIsIGkpID0+IGAke2kgKyAxfSkgJHtlcnIudG9TdHJpbmcoKX1gKS5qb2luKCdcXG4gICcpfWBcbiAgICAgICAgOiAnJztcbiAgICAgIHRoaXMubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgIH1cbik7XG4iLCAiLyoqXG4gKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSBhbiBhcnJheSwgbXV0YXRpbmcgaXQuXG4gKiBAcGFyYW0gYXJyIFRoZSBhcnJheSB0byByZW1vdmUgdGhlIGl0ZW0gZnJvbVxuICogQHBhcmFtIGl0ZW0gVGhlIGl0ZW0gdG8gcmVtb3ZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJSZW1vdmU8VD4oYXJyOiBUW10gfCB1bmRlZmluZWQgfCBudWxsLCBpdGVtOiBUKSB7XG4gIGlmIChhcnIpIHtcbiAgICBjb25zdCBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuICAgIDAgPD0gaW5kZXggJiYgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgVW5zdWJzY3JpcHRpb25FcnJvciB9IGZyb20gJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbkxpa2UsIFRlYXJkb3duTG9naWMsIFVuc3Vic2NyaWJhYmxlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhcnJSZW1vdmUgfSBmcm9tICcuL3V0aWwvYXJyUmVtb3ZlJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgZGlzcG9zYWJsZSByZXNvdXJjZSwgc3VjaCBhcyB0aGUgZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUuIEFcbiAqIFN1YnNjcmlwdGlvbiBoYXMgb25lIGltcG9ydGFudCBtZXRob2QsIGB1bnN1YnNjcmliZWAsIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRcbiAqIGFuZCBqdXN0IGRpc3Bvc2VzIHRoZSByZXNvdXJjZSBoZWxkIGJ5IHRoZSBzdWJzY3JpcHRpb24uXG4gKlxuICogQWRkaXRpb25hbGx5LCBzdWJzY3JpcHRpb25zIG1heSBiZSBncm91cGVkIHRvZ2V0aGVyIHRocm91Z2ggdGhlIGBhZGQoKWBcbiAqIG1ldGhvZCwgd2hpY2ggd2lsbCBhdHRhY2ggYSBjaGlsZCBTdWJzY3JpcHRpb24gdG8gdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uLlxuICogV2hlbiBhIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQsIGFsbCBpdHMgY2hpbGRyZW4gKGFuZCBpdHMgZ3JhbmRjaGlsZHJlbilcbiAqIHdpbGwgYmUgdW5zdWJzY3JpYmVkIGFzIHdlbGwuXG4gKlxuICogQGNsYXNzIFN1YnNjcmlwdGlvblxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uIGltcGxlbWVudHMgU3Vic2NyaXB0aW9uTGlrZSB7XG4gIC8qKiBAbm9jb2xsYXBzZSAqL1xuICBwdWJsaWMgc3RhdGljIEVNUFRZID0gKCgpID0+IHtcbiAgICBjb25zdCBlbXB0eSA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgIHJldHVybiBlbXB0eTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogQSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgdGhpcyBTdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiB1bnN1YnNjcmliZWQuXG4gICAqL1xuICBwdWJsaWMgY2xvc2VkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfcGFyZW50YWdlOiBTdWJzY3JpcHRpb25bXSB8IFN1YnNjcmlwdGlvbiB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiByZWdpc3RlcmVkIGZpbmFsaXplcnMgdG8gZXhlY3V0ZSB1cG9uIHVuc3Vic2NyaXB0aW9uLiBBZGRpbmcgYW5kIHJlbW92aW5nIGZyb20gdGhpc1xuICAgKiBsaXN0IG9jY3VycyBpbiB0aGUge0BsaW5rICNhZGR9IGFuZCB7QGxpbmsgI3JlbW92ZX0gbWV0aG9kcy5cbiAgICovXG4gIHByaXZhdGUgX2ZpbmFsaXplcnM6IEV4Y2x1ZGU8VGVhcmRvd25Mb2dpYywgdm9pZD5bXSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gaW5pdGlhbFRlYXJkb3duIEEgZnVuY3Rpb24gZXhlY3V0ZWQgZmlyc3QgYXMgcGFydCBvZiB0aGUgZmluYWxpemF0aW9uXG4gICAqIHByb2Nlc3MgdGhhdCBpcyBraWNrZWQgb2ZmIHdoZW4ge0BsaW5rICN1bnN1YnNjcmliZX0gaXMgY2FsbGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbml0aWFsVGVhcmRvd24/OiAoKSA9PiB2b2lkKSB7fVxuXG4gIC8qKlxuICAgKiBEaXNwb3NlcyB0aGUgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIHN1YnNjcmlwdGlvbi4gTWF5LCBmb3IgaW5zdGFuY2UsIGNhbmNlbFxuICAgKiBhbiBvbmdvaW5nIE9ic2VydmFibGUgZXhlY3V0aW9uIG9yIGNhbmNlbCBhbnkgb3RoZXIgdHlwZSBvZiB3b3JrIHRoYXRcbiAgICogc3RhcnRlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB1bnN1YnNjcmliZSgpOiB2b2lkIHtcbiAgICBsZXQgZXJyb3JzOiBhbnlbXSB8IHVuZGVmaW5lZDtcblxuICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcblxuICAgICAgLy8gUmVtb3ZlIHRoaXMgZnJvbSBpdCdzIHBhcmVudHMuXG4gICAgICBjb25zdCB7IF9wYXJlbnRhZ2UgfSA9IHRoaXM7XG4gICAgICBpZiAoX3BhcmVudGFnZSkge1xuICAgICAgICB0aGlzLl9wYXJlbnRhZ2UgPSBudWxsO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShfcGFyZW50YWdlKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyZW50IG9mIF9wYXJlbnRhZ2UpIHtcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9wYXJlbnRhZ2UucmVtb3ZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgaW5pdGlhbFRlYXJkb3duOiBpbml0aWFsRmluYWxpemVyIH0gPSB0aGlzO1xuICAgICAgaWYgKGlzRnVuY3Rpb24oaW5pdGlhbEZpbmFsaXplcikpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbml0aWFsRmluYWxpemVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBlcnJvcnMgPSBlIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvciA/IGUuZXJyb3JzIDogW2VdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgX2ZpbmFsaXplcnMgfSA9IHRoaXM7XG4gICAgICBpZiAoX2ZpbmFsaXplcnMpIHtcbiAgICAgICAgdGhpcy5fZmluYWxpemVycyA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgZmluYWxpemVyIG9mIF9maW5hbGl6ZXJzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4ZWNGaW5hbGl6ZXIoZmluYWxpemVyKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyA/PyBbXTtcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsIC4uLmVyci5lcnJvcnNdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9ycykge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdWJzY3JpcHRpb25FcnJvcihlcnJvcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgZmluYWxpemVyIHRvIHRoaXMgc3Vic2NyaXB0aW9uLCBzbyB0aGF0IGZpbmFsaXphdGlvbiB3aWxsIGJlIHVuc3Vic2NyaWJlZC9jYWxsZWRcbiAgICogd2hlbiB0aGlzIHN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQuIElmIHRoaXMgc3Vic2NyaXB0aW9uIGlzIGFscmVhZHkge0BsaW5rICNjbG9zZWR9LFxuICAgKiBiZWNhdXNlIGl0IGhhcyBhbHJlYWR5IGJlZW4gdW5zdWJzY3JpYmVkLCB0aGVuIHdoYXRldmVyIGZpbmFsaXplciBpcyBwYXNzZWQgdG8gaXRcbiAgICogd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGV4ZWN1dGVkICh1bmxlc3MgdGhlIGZpbmFsaXplciBpdHNlbGYgaXMgYWxzbyBhIGNsb3NlZCBzdWJzY3JpcHRpb24pLlxuICAgKlxuICAgKiBDbG9zZWQgU3Vic2NyaXB0aW9ucyBjYW5ub3QgYmUgYWRkZWQgYXMgZmluYWxpemVycyB0byBhbnkgc3Vic2NyaXB0aW9uLiBBZGRpbmcgYSBjbG9zZWRcbiAgICogc3Vic2NyaXB0aW9uIHRvIGEgYW55IHN1YnNjcmlwdGlvbiB3aWxsIHJlc3VsdCBpbiBubyBvcGVyYXRpb24uIChBIG5vb3ApLlxuICAgKlxuICAgKiBBZGRpbmcgYSBzdWJzY3JpcHRpb24gdG8gaXRzZWxmLCBvciBhZGRpbmcgYG51bGxgIG9yIGB1bmRlZmluZWRgIHdpbGwgbm90IHBlcmZvcm0gYW55XG4gICAqIG9wZXJhdGlvbiBhdCBhbGwuIChBIG5vb3ApLlxuICAgKlxuICAgKiBgU3Vic2NyaXB0aW9uYCBpbnN0YW5jZXMgdGhhdCBhcmUgYWRkZWQgdG8gdGhpcyBpbnN0YW5jZSB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZW1zZWx2ZXNcbiAgICogaWYgdGhleSBhcmUgdW5zdWJzY3JpYmVkLiBGdW5jdGlvbnMgYW5kIHtAbGluayBVbnN1YnNjcmliYWJsZX0gb2JqZWN0cyB0aGF0IHlvdSB3aXNoIHRvIHJlbW92ZVxuICAgKiB3aWxsIG5lZWQgdG8gYmUgcmVtb3ZlZCBtYW51YWxseSB3aXRoIHtAbGluayAjcmVtb3ZlfVxuICAgKlxuICAgKiBAcGFyYW0gdGVhcmRvd24gVGhlIGZpbmFsaXphdGlvbiBsb2dpYyB0byBhZGQgdG8gdGhpcyBzdWJzY3JpcHRpb24uXG4gICAqL1xuICBhZGQodGVhcmRvd246IFRlYXJkb3duTG9naWMpOiB2b2lkIHtcbiAgICAvLyBPbmx5IGFkZCB0aGUgZmluYWxpemVyIGlmIGl0J3Mgbm90IHVuZGVmaW5lZFxuICAgIC8vIGFuZCBkb24ndCBhZGQgYSBzdWJzY3JpcHRpb24gdG8gaXRzZWxmLlxuICAgIGlmICh0ZWFyZG93biAmJiB0ZWFyZG93biAhPT0gdGhpcykge1xuICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgIC8vIElmIHRoaXMgc3Vic2NyaXB0aW9uIGlzIGFscmVhZHkgY2xvc2VkLFxuICAgICAgICAvLyBleGVjdXRlIHdoYXRldmVyIGZpbmFsaXplciBpcyBoYW5kZWQgdG8gaXQgYXV0b21hdGljYWxseS5cbiAgICAgICAgZXhlY0ZpbmFsaXplcih0ZWFyZG93bik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGVhcmRvd24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAvLyBXZSBkb24ndCBhZGQgY2xvc2VkIHN1YnNjcmlwdGlvbnMsIGFuZCB3ZSBkb24ndCBhZGQgdGhlIHNhbWUgc3Vic2NyaXB0aW9uXG4gICAgICAgICAgLy8gdHdpY2UuIFN1YnNjcmlwdGlvbiB1bnN1YnNjcmliZSBpcyBpZGVtcG90ZW50LlxuICAgICAgICAgIGlmICh0ZWFyZG93bi5jbG9zZWQgfHwgdGVhcmRvd24uX2hhc1BhcmVudCh0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZWFyZG93bi5fYWRkUGFyZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgICh0aGlzLl9maW5hbGl6ZXJzID0gdGhpcy5fZmluYWxpemVycyA/PyBbXSkucHVzaCh0ZWFyZG93bik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0byBzZWUgaWYgYSB0aGlzIHN1YnNjcmlwdGlvbiBhbHJlYWR5IGhhcyBhIHBhcnRpY3VsYXIgcGFyZW50LlxuICAgKiBUaGlzIHdpbGwgc2lnbmFsIHRoYXQgdGhpcyBzdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiBhZGRlZCB0byB0aGUgcGFyZW50IGluIHF1ZXN0aW9uLlxuICAgKiBAcGFyYW0gcGFyZW50IHRoZSBwYXJlbnQgdG8gY2hlY2sgZm9yXG4gICAqL1xuICBwcml2YXRlIF9oYXNQYXJlbnQocGFyZW50OiBTdWJzY3JpcHRpb24pIHtcbiAgICBjb25zdCB7IF9wYXJlbnRhZ2UgfSA9IHRoaXM7XG4gICAgcmV0dXJuIF9wYXJlbnRhZ2UgPT09IHBhcmVudCB8fCAoQXJyYXkuaXNBcnJheShfcGFyZW50YWdlKSAmJiBfcGFyZW50YWdlLmluY2x1ZGVzKHBhcmVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBwYXJlbnQgdG8gdGhpcyBzdWJzY3JpcHRpb24gc28gaXQgY2FuIGJlIHJlbW92ZWQgZnJvbSB0aGUgcGFyZW50IGlmIGl0XG4gICAqIHVuc3Vic2NyaWJlcyBvbiBpdCdzIG93bi5cbiAgICpcbiAgICogTk9URTogVEhJUyBBU1NVTUVTIFRIQVQge0BsaW5rIF9oYXNQYXJlbnR9IEhBUyBBTFJFQURZIEJFRU4gQ0hFQ0tFRC5cbiAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IHN1YnNjcmlwdGlvbiB0byBhZGRcbiAgICovXG4gIHByaXZhdGUgX2FkZFBhcmVudChwYXJlbnQ6IFN1YnNjcmlwdGlvbikge1xuICAgIGNvbnN0IHsgX3BhcmVudGFnZSB9ID0gdGhpcztcbiAgICB0aGlzLl9wYXJlbnRhZ2UgPSBBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpID8gKF9wYXJlbnRhZ2UucHVzaChwYXJlbnQpLCBfcGFyZW50YWdlKSA6IF9wYXJlbnRhZ2UgPyBbX3BhcmVudGFnZSwgcGFyZW50XSA6IHBhcmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb24gYSBjaGlsZCB3aGVuIGl0IGlzIHJlbW92ZWQgdmlhIHtAbGluayAjcmVtb3ZlfS5cbiAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IHRvIHJlbW92ZVxuICAgKi9cbiAgcHJpdmF0ZSBfcmVtb3ZlUGFyZW50KHBhcmVudDogU3Vic2NyaXB0aW9uKSB7XG4gICAgY29uc3QgeyBfcGFyZW50YWdlIH0gPSB0aGlzO1xuICAgIGlmIChfcGFyZW50YWdlID09PSBwYXJlbnQpIHtcbiAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpKSB7XG4gICAgICBhcnJSZW1vdmUoX3BhcmVudGFnZSwgcGFyZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGZpbmFsaXplciBmcm9tIHRoaXMgc3Vic2NyaXB0aW9uIHRoYXQgd2FzIHByZXZpb3VzbHkgYWRkZWQgd2l0aCB0aGUge0BsaW5rICNhZGR9IG1ldGhvZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGBTdWJzY3JpcHRpb25gIGluc3RhbmNlcywgd2hlbiB1bnN1YnNjcmliZWQsIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlbXNlbHZlc1xuICAgKiBmcm9tIGV2ZXJ5IG90aGVyIGBTdWJzY3JpcHRpb25gIHRoZXkgaGF2ZSBiZWVuIGFkZGVkIHRvLiBUaGlzIG1lYW5zIHRoYXQgdXNpbmcgdGhlIGByZW1vdmVgIG1ldGhvZFxuICAgKiBpcyBub3QgYSBjb21tb24gdGhpbmcgYW5kIHNob3VsZCBiZSB1c2VkIHRob3VnaHRmdWxseS5cbiAgICpcbiAgICogSWYgeW91IGFkZCB0aGUgc2FtZSBmaW5hbGl6ZXIgaW5zdGFuY2Ugb2YgYSBmdW5jdGlvbiBvciBhbiB1bnN1YnNjcmliYWJsZSBvYmplY3QgdG8gYSBgU3Vic2NyaXB0aW9uYCBpbnN0YW5jZVxuICAgKiBtb3JlIHRoYW4gb25jZSwgeW91IHdpbGwgbmVlZCB0byBjYWxsIGByZW1vdmVgIHRoZSBzYW1lIG51bWJlciBvZiB0aW1lcyB0byByZW1vdmUgYWxsIGluc3RhbmNlcy5cbiAgICpcbiAgICogQWxsIGZpbmFsaXplciBpbnN0YW5jZXMgYXJlIHJlbW92ZWQgdG8gZnJlZSB1cCBtZW1vcnkgdXBvbiB1bnN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHRlYXJkb3duIFRoZSBmaW5hbGl6ZXIgdG8gcmVtb3ZlIGZyb20gdGhpcyBzdWJzY3JpcHRpb25cbiAgICovXG4gIHJlbW92ZSh0ZWFyZG93bjogRXhjbHVkZTxUZWFyZG93bkxvZ2ljLCB2b2lkPik6IHZvaWQge1xuICAgIGNvbnN0IHsgX2ZpbmFsaXplcnMgfSA9IHRoaXM7XG4gICAgX2ZpbmFsaXplcnMgJiYgYXJyUmVtb3ZlKF9maW5hbGl6ZXJzLCB0ZWFyZG93bik7XG5cbiAgICBpZiAodGVhcmRvd24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRlYXJkb3duLl9yZW1vdmVQYXJlbnQodGhpcyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBFTVBUWV9TVUJTQ1JJUFRJT04gPSBTdWJzY3JpcHRpb24uRU1QVFk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N1YnNjcmlwdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgU3Vic2NyaXB0aW9uIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIFN1YnNjcmlwdGlvbiB8fFxuICAgICh2YWx1ZSAmJiAnY2xvc2VkJyBpbiB2YWx1ZSAmJiBpc0Z1bmN0aW9uKHZhbHVlLnJlbW92ZSkgJiYgaXNGdW5jdGlvbih2YWx1ZS5hZGQpICYmIGlzRnVuY3Rpb24odmFsdWUudW5zdWJzY3JpYmUpKVxuICApO1xufVxuXG5mdW5jdGlvbiBleGVjRmluYWxpemVyKGZpbmFsaXplcjogVW5zdWJzY3JpYmFibGUgfCAoKCkgPT4gdm9pZCkpIHtcbiAgaWYgKGlzRnVuY3Rpb24oZmluYWxpemVyKSkge1xuICAgIGZpbmFsaXplcigpO1xuICB9IGVsc2Uge1xuICAgIGZpbmFsaXplci51bnN1YnNjcmliZSgpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlTm90aWZpY2F0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVGhlIHtAbGluayBHbG9iYWxDb25maWd9IG9iamVjdCBmb3IgUnhKUy4gSXQgaXMgdXNlZCB0byBjb25maWd1cmUgdGhpbmdzXG4gKiBsaWtlIGhvdyB0byByZWFjdCBvbiB1bmhhbmRsZWQgZXJyb3JzLlxuICovXG5leHBvcnQgY29uc3QgY29uZmlnOiBHbG9iYWxDb25maWcgPSB7XG4gIG9uVW5oYW5kbGVkRXJyb3I6IG51bGwsXG4gIG9uU3RvcHBlZE5vdGlmaWNhdGlvbjogbnVsbCxcbiAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nOiBmYWxzZSxcbiAgdXNlRGVwcmVjYXRlZE5leHRDb250ZXh0OiBmYWxzZSxcbn07XG5cbi8qKlxuICogVGhlIGdsb2JhbCBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgUnhKUywgdXNlZCB0byBjb25maWd1cmUgdGhpbmdzXG4gKiBsaWtlIGhvdyB0byByZWFjdCBvbiB1bmhhbmRsZWQgZXJyb3JzLiBBY2Nlc3NpYmxlIHZpYSB7QGxpbmsgY29uZmlnfVxuICogb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdsb2JhbENvbmZpZyB7XG4gIC8qKlxuICAgKiBBIHJlZ2lzdHJhdGlvbiBwb2ludCBmb3IgdW5oYW5kbGVkIGVycm9ycyBmcm9tIFJ4SlMuIFRoZXNlIGFyZSBlcnJvcnMgdGhhdFxuICAgKiBjYW5ub3Qgd2VyZSBub3QgaGFuZGxlZCBieSBjb25zdW1pbmcgY29kZSBpbiB0aGUgdXN1YWwgc3Vic2NyaXB0aW9uIHBhdGguIEZvclxuICAgKiBleGFtcGxlLCBpZiB5b3UgaGF2ZSB0aGlzIGNvbmZpZ3VyZWQsIGFuZCB5b3Ugc3Vic2NyaWJlIHRvIGFuIG9ic2VydmFibGUgd2l0aG91dFxuICAgKiBwcm92aWRpbmcgYW4gZXJyb3IgaGFuZGxlciwgZXJyb3JzIGZyb20gdGhhdCBzdWJzY3JpcHRpb24gd2lsbCBlbmQgdXAgaGVyZS4gVGhpc1xuICAgKiB3aWxsIF9hbHdheXNfIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSBvbiBhbm90aGVyIGpvYiBpbiB0aGUgcnVudGltZS4gVGhpcyBpcyBiZWNhdXNlXG4gICAqIHdlIGRvIG5vdCB3YW50IGVycm9ycyB0aHJvd24gaW4gdGhpcyB1c2VyLWNvbmZpZ3VyZWQgaGFuZGxlciB0byBpbnRlcmZlcmUgd2l0aCB0aGVcbiAgICogYmVoYXZpb3Igb2YgdGhlIGxpYnJhcnkuXG4gICAqL1xuICBvblVuaGFuZGxlZEVycm9yOiAoKGVycjogYW55KSA9PiB2b2lkKSB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgcmVnaXN0cmF0aW9uIHBvaW50IGZvciBub3RpZmljYXRpb25zIHRoYXQgY2Fubm90IGJlIHNlbnQgdG8gc3Vic2NyaWJlcnMgYmVjYXVzZSB0aGV5XG4gICAqIGhhdmUgY29tcGxldGVkLCBlcnJvcmVkIG9yIGhhdmUgYmVlbiBleHBsaWNpdGx5IHVuc3Vic2NyaWJlZC4gQnkgZGVmYXVsdCwgbmV4dCwgY29tcGxldGVcbiAgICogYW5kIGVycm9yIG5vdGlmaWNhdGlvbnMgc2VudCB0byBzdG9wcGVkIHN1YnNjcmliZXJzIGFyZSBub29wcy4gSG93ZXZlciwgc29tZXRpbWVzIGNhbGxlcnNcbiAgICogbWlnaHQgd2FudCBhIGRpZmZlcmVudCBiZWhhdmlvci4gRm9yIGV4YW1wbGUsIHdpdGggc291cmNlcyB0aGF0IGF0dGVtcHQgdG8gcmVwb3J0IGVycm9yc1xuICAgKiB0byBzdG9wcGVkIHN1YnNjcmliZXJzLCBhIGNhbGxlciBjYW4gY29uZmlndXJlIFJ4SlMgdG8gdGhyb3cgYW4gdW5oYW5kbGVkIGVycm9yIGluc3RlYWQuXG4gICAqIFRoaXMgd2lsbCBfYWx3YXlzXyBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkgb24gYW5vdGhlciBqb2IgaW4gdGhlIHJ1bnRpbWUuIFRoaXMgaXMgYmVjYXVzZVxuICAgKiB3ZSBkbyBub3Qgd2FudCBlcnJvcnMgdGhyb3duIGluIHRoaXMgdXNlci1jb25maWd1cmVkIGhhbmRsZXIgdG8gaW50ZXJmZXJlIHdpdGggdGhlXG4gICAqIGJlaGF2aW9yIG9mIHRoZSBsaWJyYXJ5LlxuICAgKi9cbiAgb25TdG9wcGVkTm90aWZpY2F0aW9uOiAoKG5vdGlmaWNhdGlvbjogT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbjxhbnk+LCBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pID0+IHZvaWQpIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHByb21pc2UgY29uc3RydWN0b3IgdXNlZCBieSBkZWZhdWx0IGZvciB7QGxpbmsgT2JzZXJ2YWJsZSN0b1Byb21pc2UgdG9Qcm9taXNlfSBhbmQge0BsaW5rIE9ic2VydmFibGUjZm9yRWFjaCBmb3JFYWNofVxuICAgKiBtZXRob2RzLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBBcyBvZiB2ZXJzaW9uIDgsIFJ4SlMgd2lsbCBubyBsb25nZXIgc3VwcG9ydCB0aGlzIHNvcnQgb2YgaW5qZWN0aW9uIG9mIGFcbiAgICogUHJvbWlzZSBjb25zdHJ1Y3Rvci4gSWYgeW91IG5lZWQgYSBQcm9taXNlIGltcGxlbWVudGF0aW9uIG90aGVyIHRoYW4gbmF0aXZlIHByb21pc2VzLFxuICAgKiBwbGVhc2UgcG9seWZpbGwvcGF0Y2ggUHJvbWlzZSBhcyB5b3Ugc2VlIGFwcHJvcHJpYXRlLiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gICAqL1xuICBQcm9taXNlPzogUHJvbWlzZUNvbnN0cnVjdG9yTGlrZTtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgdHVybnMgb24gc3luY2hyb25vdXMgZXJyb3IgcmV0aHJvd2luZywgd2hpY2ggaXMgYSBkZXByZWNhdGVkIGJlaGF2aW9yXG4gICAqIGluIHY2IGFuZCBoaWdoZXIuIFRoaXMgYmVoYXZpb3IgZW5hYmxlcyBiYWQgcGF0dGVybnMgbGlrZSB3cmFwcGluZyBhIHN1YnNjcmliZVxuICAgKiBjYWxsIGluIGEgdHJ5L2NhdGNoIGJsb2NrLiBJdCBhbHNvIGVuYWJsZXMgcHJvZHVjZXIgaW50ZXJmZXJlbmNlLCBhIG5hc3R5IGJ1Z1xuICAgKiB3aGVyZSBhIG11bHRpY2FzdCBjYW4gYmUgYnJva2VuIGZvciBhbGwgb2JzZXJ2ZXJzIGJ5IGEgZG93bnN0cmVhbSBjb25zdW1lciB3aXRoXG4gICAqIGFuIHVuaGFuZGxlZCBlcnJvci4gRE8gTk9UIFVTRSBUSElTIEZMQUcgVU5MRVNTIElUJ1MgTkVFREVEIFRPIEJVWSBUSU1FXG4gICAqIEZPUiBNSUdSQVRJT04gUkVBU09OUy5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgQXMgb2YgdmVyc2lvbiA4LCBSeEpTIHdpbGwgbm8gbG9uZ2VyIHN1cHBvcnQgc3luY2hyb25vdXMgdGhyb3dpbmdcbiAgICogb2YgdW5oYW5kbGVkIGVycm9ycy4gQWxsIGVycm9ycyB3aWxsIGJlIHRocm93biBvbiBhIHNlcGFyYXRlIGNhbGwgc3RhY2sgdG8gcHJldmVudCBiYWRcbiAgICogYmVoYXZpb3JzIGRlc2NyaWJlZCBhYm92ZS4gV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgZW5hYmxlcyBhbiBhcy1vZi15ZXQgdW5kb2N1bWVudGVkIGZlYXR1cmUgZnJvbSB2NTogVGhlIGFiaWxpdHkgdG8gYWNjZXNzXG4gICAqIGB1bnN1YnNjcmliZSgpYCB2aWEgYHRoaXNgIGNvbnRleHQgaW4gYG5leHRgIGZ1bmN0aW9ucyBjcmVhdGVkIGluIG9ic2VydmVycyBwYXNzZWRcbiAgICogdG8gYHN1YnNjcmliZWAuXG4gICAqXG4gICAqIFRoaXMgaXMgYmVpbmcgcmVtb3ZlZCBiZWNhdXNlIHRoZSBwZXJmb3JtYW5jZSB3YXMgc2V2ZXJlbHkgcHJvYmxlbWF0aWMsIGFuZCBpdCBjb3VsZCBhbHNvIGNhdXNlXG4gICAqIGlzc3VlcyB3aGVuIHR5cGVzIG90aGVyIHRoYW4gUE9KT3MgYXJlIHBhc3NlZCB0byBzdWJzY3JpYmUgYXMgc3Vic2NyaWJlcnMsIGFzIHRoZXkgd2lsbCBsaWtlbHkgaGF2ZVxuICAgKiB0aGVpciBgdGhpc2AgY29udGV4dCBvdmVyd3JpdHRlbi5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgQXMgb2YgdmVyc2lvbiA4LCBSeEpTIHdpbGwgbm8gbG9uZ2VyIHN1cHBvcnQgYWx0ZXJpbmcgdGhlXG4gICAqIGNvbnRleHQgb2YgbmV4dCBmdW5jdGlvbnMgcHJvdmlkZWQgYXMgcGFydCBvZiBhbiBvYnNlcnZlciB0byBTdWJzY3JpYmUuIEluc3RlYWQsXG4gICAqIHlvdSB3aWxsIGhhdmUgYWNjZXNzIHRvIGEgc3Vic2NyaXB0aW9uIG9yIGEgc2lnbmFsIG9yIHRva2VuIHRoYXQgd2lsbCBhbGxvdyB5b3UgdG8gZG8gdGhpbmdzIGxpa2VcbiAgICogdW5zdWJzY3JpYmUgYW5kIHRlc3QgY2xvc2VkIHN0YXR1cy4gV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgdXNlRGVwcmVjYXRlZE5leHRDb250ZXh0OiBib29sZWFuO1xufVxuIiwgImltcG9ydCB0eXBlIHsgVGltZXJIYW5kbGUgfSBmcm9tICcuL3RpbWVySGFuZGxlJztcbnR5cGUgU2V0VGltZW91dEZ1bmN0aW9uID0gKGhhbmRsZXI6ICgpID0+IHZvaWQsIHRpbWVvdXQ/OiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKSA9PiBUaW1lckhhbmRsZTtcbnR5cGUgQ2xlYXJUaW1lb3V0RnVuY3Rpb24gPSAoaGFuZGxlOiBUaW1lckhhbmRsZSkgPT4gdm9pZDtcblxuaW50ZXJmYWNlIFRpbWVvdXRQcm92aWRlciB7XG4gIHNldFRpbWVvdXQ6IFNldFRpbWVvdXRGdW5jdGlvbjtcbiAgY2xlYXJUaW1lb3V0OiBDbGVhclRpbWVvdXRGdW5jdGlvbjtcbiAgZGVsZWdhdGU6XG4gICAgfCB7XG4gICAgICAgIHNldFRpbWVvdXQ6IFNldFRpbWVvdXRGdW5jdGlvbjtcbiAgICAgICAgY2xlYXJUaW1lb3V0OiBDbGVhclRpbWVvdXRGdW5jdGlvbjtcbiAgICAgIH1cbiAgICB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGNvbnN0IHRpbWVvdXRQcm92aWRlcjogVGltZW91dFByb3ZpZGVyID0ge1xuICAvLyBXaGVuIGFjY2Vzc2luZyB0aGUgZGVsZWdhdGUsIHVzZSB0aGUgdmFyaWFibGUgcmF0aGVyIHRoYW4gYHRoaXNgIHNvIHRoYXRcbiAgLy8gdGhlIGZ1bmN0aW9ucyBjYW4gYmUgY2FsbGVkIHdpdGhvdXQgYmVpbmcgYm91bmQgdG8gdGhlIHByb3ZpZGVyLlxuICBzZXRUaW1lb3V0KGhhbmRsZXI6ICgpID0+IHZvaWQsIHRpbWVvdXQ/OiBudW1iZXIsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7IGRlbGVnYXRlIH0gPSB0aW1lb3V0UHJvdmlkZXI7XG4gICAgaWYgKGRlbGVnYXRlPy5zZXRUaW1lb3V0KSB7XG4gICAgICByZXR1cm4gZGVsZWdhdGUuc2V0VGltZW91dChoYW5kbGVyLCB0aW1lb3V0LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoaGFuZGxlciwgdGltZW91dCwgLi4uYXJncyk7XG4gIH0sXG4gIGNsZWFyVGltZW91dChoYW5kbGUpIHtcbiAgICBjb25zdCB7IGRlbGVnYXRlIH0gPSB0aW1lb3V0UHJvdmlkZXI7XG4gICAgcmV0dXJuIChkZWxlZ2F0ZT8uY2xlYXJUaW1lb3V0IHx8IGNsZWFyVGltZW91dCkoaGFuZGxlIGFzIGFueSk7XG4gIH0sXG4gIGRlbGVnYXRlOiB1bmRlZmluZWQsXG59O1xuIiwgImltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgeyB0aW1lb3V0UHJvdmlkZXIgfSBmcm9tICcuLi9zY2hlZHVsZXIvdGltZW91dFByb3ZpZGVyJztcblxuLyoqXG4gKiBIYW5kbGVzIGFuIGVycm9yIG9uIGFub3RoZXIgam9iIGVpdGhlciB3aXRoIHRoZSB1c2VyLWNvbmZpZ3VyZWQge0BsaW5rIG9uVW5oYW5kbGVkRXJyb3J9LFxuICogb3IgYnkgdGhyb3dpbmcgaXQgb24gdGhhdCBuZXcgam9iIHNvIGl0IGNhbiBiZSBwaWNrZWQgdXAgYnkgYHdpbmRvdy5vbmVycm9yYCwgYHByb2Nlc3Mub24oJ2Vycm9yJylgLCBldGMuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZXJlIGlzIGFuIGVycm9yIHRoYXQgaXMgb3V0LW9mLWJhbmQgd2l0aCB0aGUgc3Vic2NyaXB0aW9uXG4gKiBvciB3aGVuIGFuIGVycm9yIGhpdHMgYSB0ZXJtaW5hbCBib3VuZGFyeSBvZiB0aGUgc3Vic2NyaXB0aW9uIGFuZCBubyBlcnJvciBoYW5kbGVyIHdhcyBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZXJyIHRoZSBlcnJvciB0byByZXBvcnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydFVuaGFuZGxlZEVycm9yKGVycjogYW55KSB7XG4gIHRpbWVvdXRQcm92aWRlci5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCB7IG9uVW5oYW5kbGVkRXJyb3IgfSA9IGNvbmZpZztcbiAgICBpZiAob25VbmhhbmRsZWRFcnJvcikge1xuICAgICAgLy8gRXhlY3V0ZSB0aGUgdXNlci1jb25maWd1cmVkIGVycm9yIGhhbmRsZXIuXG4gICAgICBvblVuaGFuZGxlZEVycm9yKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRocm93IHNvIGl0IGlzIHBpY2tlZCB1cCBieSB0aGUgcnVudGltZSdzIHVuY2F1Z2h0IGVycm9yIG1lY2hhbmlzbS5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH0pO1xufVxuIiwgIi8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuIiwgImltcG9ydCB7IENvbXBsZXRlTm90aWZpY2F0aW9uLCBOZXh0Tm90aWZpY2F0aW9uLCBFcnJvck5vdGlmaWNhdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIEEgY29tcGxldGlvbiBvYmplY3Qgb3B0aW1pemVkIGZvciBtZW1vcnkgdXNlIGFuZCBjcmVhdGVkIHRvIGJlIHRoZVxuICogc2FtZSBcInNoYXBlXCIgYXMgb3RoZXIgbm90aWZpY2F0aW9ucyBpbiB2OC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgQ09NUExFVEVfTk9USUZJQ0FUSU9OID0gKCgpID0+IGNyZWF0ZU5vdGlmaWNhdGlvbignQycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSBhcyBDb21wbGV0ZU5vdGlmaWNhdGlvbikoKTtcblxuLyoqXG4gKiBJbnRlcm5hbCB1c2Ugb25seS4gQ3JlYXRlcyBhbiBvcHRpbWl6ZWQgZXJyb3Igbm90aWZpY2F0aW9uIHRoYXQgaXMgdGhlIHNhbWUgXCJzaGFwZVwiXG4gKiBhcyBvdGhlciBub3RpZmljYXRpb25zLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcnJvck5vdGlmaWNhdGlvbihlcnJvcjogYW55KTogRXJyb3JOb3RpZmljYXRpb24ge1xuICByZXR1cm4gY3JlYXRlTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnJvcikgYXMgYW55O1xufVxuXG4vKipcbiAqIEludGVybmFsIHVzZSBvbmx5LiBDcmVhdGVzIGFuIG9wdGltaXplZCBuZXh0IG5vdGlmaWNhdGlvbiB0aGF0IGlzIHRoZSBzYW1lIFwic2hhcGVcIlxuICogYXMgb3RoZXIgbm90aWZpY2F0aW9ucy5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV4dE5vdGlmaWNhdGlvbjxUPih2YWx1ZTogVCkge1xuICByZXR1cm4gY3JlYXRlTm90aWZpY2F0aW9uKCdOJywgdmFsdWUsIHVuZGVmaW5lZCkgYXMgTmV4dE5vdGlmaWNhdGlvbjxUPjtcbn1cblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgYWxsIG5vdGlmaWNhdGlvbnMgY3JlYXRlZCBpbnRlcm5hbGx5IGhhdmUgdGhlIHNhbWUgXCJzaGFwZVwiIGluIHY4LlxuICpcbiAqIFRPRE86IFRoaXMgaXMgb25seSBleHBvcnRlZCB0byBzdXBwb3J0IGEgY3JhenkgbGVnYWN5IHRlc3QgaW4gYGdyb3VwQnlgLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb24oa2luZDogJ04nIHwgJ0UnIHwgJ0MnLCB2YWx1ZTogYW55LCBlcnJvcjogYW55KSB7XG4gIHJldHVybiB7XG4gICAga2luZCxcbiAgICB2YWx1ZSxcbiAgICBlcnJvcixcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi9jb25maWcnO1xuXG5sZXQgY29udGV4dDogeyBlcnJvclRocm93bjogYm9vbGVhbjsgZXJyb3I6IGFueSB9IHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogSGFuZGxlcyBkZWFsaW5nIHdpdGggZXJyb3JzIGZvciBzdXBlci1ncm9zcyBtb2RlLiBDcmVhdGVzIGEgY29udGV4dCwgaW4gd2hpY2hcbiAqIGFueSBzeW5jaHJvbm91c2x5IHRocm93biBlcnJvcnMgd2lsbCBiZSBwYXNzZWQgdG8ge0BsaW5rIGNhcHR1cmVFcnJvcn0uIFdoaWNoXG4gKiB3aWxsIHJlY29yZCB0aGUgZXJyb3Igc3VjaCB0aGF0IGl0IHdpbGwgYmUgcmV0aHJvd24gYWZ0ZXIgdGhlIGNhbGwgYmFjayBpcyBjb21wbGV0ZS5cbiAqIFRPRE86IFJlbW92ZSBpbiB2OFxuICogQHBhcmFtIGNiIEFuIGltbWVkaWF0ZWx5IGV4ZWN1dGVkIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JDb250ZXh0KGNiOiAoKSA9PiB2b2lkKSB7XG4gIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgIGNvbnN0IGlzUm9vdCA9ICFjb250ZXh0O1xuICAgIGlmIChpc1Jvb3QpIHtcbiAgICAgIGNvbnRleHQgPSB7IGVycm9yVGhyb3duOiBmYWxzZSwgZXJyb3I6IG51bGwgfTtcbiAgICB9XG4gICAgY2IoKTtcbiAgICBpZiAoaXNSb290KSB7XG4gICAgICBjb25zdCB7IGVycm9yVGhyb3duLCBlcnJvciB9ID0gY29udGV4dCE7XG4gICAgICBjb250ZXh0ID0gbnVsbDtcbiAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgZ2VuZXJhbCBub24tZGVwcmVjYXRlZCBwYXRoIGZvciBldmVyeW9uZSB0aGF0XG4gICAgLy8gaXNuJ3QgY3JhenkgZW5vdWdoIHRvIHVzZSBzdXBlci1ncm9zcyBtb2RlICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKVxuICAgIGNiKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYXB0dXJlcyBlcnJvcnMgb25seSBpbiBzdXBlci1ncm9zcyBtb2RlLlxuICogQHBhcmFtIGVyciB0aGUgZXJyb3IgdG8gY2FwdHVyZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FwdHVyZUVycm9yKGVycjogYW55KSB7XG4gIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyAmJiBjb250ZXh0KSB7XG4gICAgY29udGV4dC5lcnJvclRocm93biA9IHRydWU7XG4gICAgY29udGV4dC5lcnJvciA9IGVycjtcbiAgfVxufVxuIiwgImltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBPYnNlcnZlciwgT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgaXNTdWJzY3JpcHRpb24sIFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IHJlcG9ydFVuaGFuZGxlZEVycm9yIH0gZnJvbSAnLi91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuL3V0aWwvbm9vcCc7XG5pbXBvcnQgeyBuZXh0Tm90aWZpY2F0aW9uLCBlcnJvck5vdGlmaWNhdGlvbiwgQ09NUExFVEVfTk9USUZJQ0FUSU9OIH0gZnJvbSAnLi9Ob3RpZmljYXRpb25GYWN0b3JpZXMnO1xuaW1wb3J0IHsgdGltZW91dFByb3ZpZGVyIH0gZnJvbSAnLi9zY2hlZHVsZXIvdGltZW91dFByb3ZpZGVyJztcbmltcG9ydCB7IGNhcHR1cmVFcnJvciB9IGZyb20gJy4vdXRpbC9lcnJvckNvbnRleHQnO1xuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBPYnNlcnZlcn0gaW50ZXJmYWNlIGFuZCBleHRlbmRzIHRoZVxuICoge0BsaW5rIFN1YnNjcmlwdGlvbn0gY2xhc3MuIFdoaWxlIHRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGlzIHRoZSBwdWJsaWMgQVBJIGZvclxuICogY29uc3VtaW5nIHRoZSB2YWx1ZXMgb2YgYW4ge0BsaW5rIE9ic2VydmFibGV9LCBhbGwgT2JzZXJ2ZXJzIGdldCBjb252ZXJ0ZWQgdG9cbiAqIGEgU3Vic2NyaWJlciwgaW4gb3JkZXIgdG8gcHJvdmlkZSBTdWJzY3JpcHRpb24tbGlrZSBjYXBhYmlsaXRpZXMgc3VjaCBhc1xuICogYHVuc3Vic2NyaWJlYC4gU3Vic2NyaWJlciBpcyBhIGNvbW1vbiB0eXBlIGluIFJ4SlMsIGFuZCBjcnVjaWFsIGZvclxuICogaW1wbGVtZW50aW5nIG9wZXJhdG9ycywgYnV0IGl0IGlzIHJhcmVseSB1c2VkIGFzIGEgcHVibGljIEFQSS5cbiAqXG4gKiBAY2xhc3MgU3Vic2NyaWJlcjxUPlxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaWJlcjxUPiBleHRlbmRzIFN1YnNjcmlwdGlvbiBpbXBsZW1lbnRzIE9ic2VydmVyPFQ+IHtcbiAgLyoqXG4gICAqIEEgc3RhdGljIGZhY3RvcnkgZm9yIGEgU3Vic2NyaWJlciwgZ2l2ZW4gYSAocG90ZW50aWFsbHkgcGFydGlhbCkgZGVmaW5pdGlvblxuICAgKiBvZiBhbiBPYnNlcnZlci5cbiAgICogQHBhcmFtIG5leHQgVGhlIGBuZXh0YCBjYWxsYmFjayBvZiBhbiBPYnNlcnZlci5cbiAgICogQHBhcmFtIGVycm9yIFRoZSBgZXJyb3JgIGNhbGxiYWNrIG9mIGFuXG4gICAqIE9ic2VydmVyLlxuICAgKiBAcGFyYW0gY29tcGxldGUgVGhlIGBjb21wbGV0ZWAgY2FsbGJhY2sgb2YgYW5cbiAgICogT2JzZXJ2ZXIuXG4gICAqIEByZXR1cm4gQSBTdWJzY3JpYmVyIHdyYXBwaW5nIHRoZSAocGFydGlhbGx5IGRlZmluZWQpXG4gICAqIE9ic2VydmVyIHJlcHJlc2VudGVkIGJ5IHRoZSBnaXZlbiBhcmd1bWVudHMuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBkZXByZWNhdGVkIERvIG5vdCB1c2UuIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4gVGhlcmUgaXMgbm8gcmVwbGFjZW1lbnQgZm9yIHRoaXNcbiAgICogbWV0aG9kLCBhbmQgdGhlcmUgaXMgbm8gcmVhc29uIHRvIGJlIGNyZWF0aW5nIGluc3RhbmNlcyBvZiBgU3Vic2NyaWJlcmAgZGlyZWN0bHkuXG4gICAqIElmIHlvdSBoYXZlIGEgc3BlY2lmaWMgdXNlIGNhc2UsIHBsZWFzZSBmaWxlIGFuIGlzc3VlLlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZTxUPihuZXh0PzogKHg/OiBUKSA9PiB2b2lkLCBlcnJvcj86IChlPzogYW55KSA9PiB2b2lkLCBjb21wbGV0ZT86ICgpID0+IHZvaWQpOiBTdWJzY3JpYmVyPFQ+IHtcbiAgICByZXR1cm4gbmV3IFNhZmVTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gIH1cblxuICAvKiogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlIGRpcmVjdGx5LiBXaWxsIGJlIG1hZGUgaW50ZXJuYWwgaW4gdjguICovXG4gIHByb3RlY3RlZCBpc1N0b3BwZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqIEBkZXByZWNhdGVkIEludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZSBkaXJlY3RseS4gV2lsbCBiZSBtYWRlIGludGVybmFsIGluIHY4LiAqL1xuICBwcm90ZWN0ZWQgZGVzdGluYXRpb246IFN1YnNjcmliZXI8YW55PiB8IE9ic2VydmVyPGFueT47IC8vIHRoaXMgYGFueWAgaXMgdGhlIGVzY2FwZSBoYXRjaCB0byBlcmFzZSBleHRyYSB0eXBlIHBhcmFtIChlLmcuIFIpXG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIEludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZSBkaXJlY3RseS4gV2lsbCBiZSBtYWRlIGludGVybmFsIGluIHY4LlxuICAgKiBUaGVyZSBpcyBubyByZWFzb24gdG8gZGlyZWN0bHkgY3JlYXRlIGFuIGluc3RhbmNlIG9mIFN1YnNjcmliZXIuIFRoaXMgdHlwZSBpcyBleHBvcnRlZCBmb3IgdHlwaW5ncyByZWFzb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZGVzdGluYXRpb24/OiBTdWJzY3JpYmVyPGFueT4gfCBPYnNlcnZlcjxhbnk+KSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAoZGVzdGluYXRpb24pIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2hhaW4gc3Vic2NyaXB0aW9ucyB0b2dldGhlciBoZXJlLlxuICAgICAgLy8gaWYgZGVzdGluYXRpb24gaXMgYSBTdWJzY3JpcHRpb24sIHRoZW4gaXQgaXMgYSBTdWJzY3JpYmVyLlxuICAgICAgaWYgKGlzU3Vic2NyaXB0aW9uKGRlc3RpbmF0aW9uKSkge1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQodGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBFTVBUWV9PQlNFUlZFUjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9mIHR5cGUgYG5leHRgIGZyb21cbiAgICogdGhlIE9ic2VydmFibGUsIHdpdGggYSB2YWx1ZS4gVGhlIE9ic2VydmFibGUgbWF5IGNhbGwgdGhpcyBtZXRob2QgMCBvciBtb3JlXG4gICAqIHRpbWVzLlxuICAgKiBAcGFyYW0ge1R9IFt2YWx1ZV0gVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIG5leHQodmFsdWU/OiBUKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICBoYW5kbGVTdG9wcGVkTm90aWZpY2F0aW9uKG5leHROb3RpZmljYXRpb24odmFsdWUpLCB0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbmV4dCh2YWx1ZSEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb2YgdHlwZSBgZXJyb3JgIGZyb21cbiAgICogdGhlIE9ic2VydmFibGUsIHdpdGggYW4gYXR0YWNoZWQgYEVycm9yYC4gTm90aWZpZXMgdGhlIE9ic2VydmVyIHRoYXRcbiAgICogdGhlIE9ic2VydmFibGUgaGFzIGV4cGVyaWVuY2VkIGFuIGVycm9yIGNvbmRpdGlvbi5cbiAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGVycm9yKGVycj86IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihlcnJvck5vdGlmaWNhdGlvbihlcnIpLCB0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBhIHZhbHVlbGVzcyBub3RpZmljYXRpb24gb2YgdHlwZVxuICAgKiBgY29tcGxldGVgIGZyb20gdGhlIE9ic2VydmFibGUuIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0IHRoZSBPYnNlcnZhYmxlXG4gICAqIGhhcyBmaW5pc2hlZCBzZW5kaW5nIHB1c2gtYmFzZWQgbm90aWZpY2F0aW9ucy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbXBsZXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihDT01QTEVURV9OT1RJRklDQVRJT04sIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHVuc3Vic2NyaWJlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHN1cGVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbnVsbCE7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9uZXh0KHZhbHVlOiBUKTogdm9pZCB7XG4gICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfZXJyb3IoZXJyOiBhbnkpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9jb21wbGV0ZSgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBiaW5kIGlzIGNhcHR1cmVkIGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRvIGJlIGFibGUgdG8gaGF2ZVxuICogY29tcGF0aWJpbGl0eSB3aXRoIG1vbm9pZCBsaWJyYXJpZXMgdGhhdCB0ZW5kIHRvIHVzZSBhIG1ldGhvZCBuYW1lZFxuICogYGJpbmRgLiBJbiBwYXJ0aWN1bGFyLCBhIGxpYnJhcnkgY2FsbGVkIE1vbmlvIHJlcXVpcmVzIHRoaXMuXG4gKi9cbmNvbnN0IF9iaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7XG5cbmZ1bmN0aW9uIGJpbmQ8Rm4gZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4oZm46IEZuLCB0aGlzQXJnOiBhbnkpOiBGbiB7XG4gIHJldHVybiBfYmluZC5jYWxsKGZuLCB0aGlzQXJnKTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBvcHRpbWl6YXRpb24gb25seSwgRE8gTk9UIEVYUE9TRS5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBDb25zdW1lck9ic2VydmVyPFQ+IGltcGxlbWVudHMgT2JzZXJ2ZXI8VD4ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBhcnRpYWxPYnNlcnZlcjogUGFydGlhbDxPYnNlcnZlcjxUPj4pIHt9XG5cbiAgbmV4dCh2YWx1ZTogVCk6IHZvaWQge1xuICAgIGNvbnN0IHsgcGFydGlhbE9ic2VydmVyIH0gPSB0aGlzO1xuICAgIGlmIChwYXJ0aWFsT2JzZXJ2ZXIubmV4dCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFydGlhbE9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVycm9yKGVycjogYW55KTogdm9pZCB7XG4gICAgY29uc3QgeyBwYXJ0aWFsT2JzZXJ2ZXIgfSA9IHRoaXM7XG4gICAgaWYgKHBhcnRpYWxPYnNlcnZlci5lcnJvcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFydGlhbE9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZVVuaGFuZGxlZEVycm9yKGVycik7XG4gICAgfVxuICB9XG5cbiAgY29tcGxldGUoKTogdm9pZCB7XG4gICAgY29uc3QgeyBwYXJ0aWFsT2JzZXJ2ZXIgfSA9IHRoaXM7XG4gICAgaWYgKHBhcnRpYWxPYnNlcnZlci5jb21wbGV0ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFydGlhbE9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTYWZlU3Vic2NyaWJlcjxUPiBleHRlbmRzIFN1YnNjcmliZXI8VD4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBvYnNlcnZlck9yTmV4dD86IFBhcnRpYWw8T2JzZXJ2ZXI8VD4+IHwgKCh2YWx1ZTogVCkgPT4gdm9pZCkgfCBudWxsLFxuICAgIGVycm9yPzogKChlPzogYW55KSA9PiB2b2lkKSB8IG51bGwsXG4gICAgY29tcGxldGU/OiAoKCkgPT4gdm9pZCkgfCBudWxsXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBsZXQgcGFydGlhbE9ic2VydmVyOiBQYXJ0aWFsPE9ic2VydmVyPFQ+PjtcbiAgICBpZiAoaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkgfHwgIW9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAvLyBUaGUgZmlyc3QgYXJndW1lbnQgaXMgYSBmdW5jdGlvbiwgbm90IGFuIG9ic2VydmVyLiBUaGUgbmV4dFxuICAgICAgLy8gdHdvIGFyZ3VtZW50cyAqY291bGQqIGJlIG9ic2VydmVycywgb3IgdGhleSBjb3VsZCBiZSBlbXB0eS5cbiAgICAgIHBhcnRpYWxPYnNlcnZlciA9IHtcbiAgICAgICAgbmV4dDogKG9ic2VydmVyT3JOZXh0ID8/IHVuZGVmaW5lZCkgYXMgKCgodmFsdWU6IFQpID0+IHZvaWQpIHwgdW5kZWZpbmVkKSxcbiAgICAgICAgZXJyb3I6IGVycm9yID8/IHVuZGVmaW5lZCxcbiAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlID8/IHVuZGVmaW5lZCxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZSBmaXJzdCBhcmd1bWVudCBpcyBhIHBhcnRpYWwgb2JzZXJ2ZXIuXG4gICAgICBsZXQgY29udGV4dDogYW55O1xuICAgICAgaWYgKHRoaXMgJiYgY29uZmlnLnVzZURlcHJlY2F0ZWROZXh0Q29udGV4dCkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgZGVwcmVjYXRlZCBwYXRoIHRoYXQgbWFkZSBgdGhpcy51bnN1YnNjcmliZSgpYCBhdmFpbGFibGUgaW5cbiAgICAgICAgLy8gbmV4dCBoYW5kbGVyIGZ1bmN0aW9ucyBwYXNzZWQgdG8gc3Vic2NyaWJlLiBUaGlzIG9ubHkgZXhpc3RzIGJlaGluZCBhIGZsYWdcbiAgICAgICAgLy8gbm93LCBhcyBpdCBpcyAqdmVyeSogc2xvdy5cbiAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gKCkgPT4gdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICBwYXJ0aWFsT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgbmV4dDogb2JzZXJ2ZXJPck5leHQubmV4dCAmJiBiaW5kKG9ic2VydmVyT3JOZXh0Lm5leHQsIGNvbnRleHQpLFxuICAgICAgICAgIGVycm9yOiBvYnNlcnZlck9yTmV4dC5lcnJvciAmJiBiaW5kKG9ic2VydmVyT3JOZXh0LmVycm9yLCBjb250ZXh0KSxcbiAgICAgICAgICBjb21wbGV0ZTogb2JzZXJ2ZXJPck5leHQuY29tcGxldGUgJiYgYmluZChvYnNlcnZlck9yTmV4dC5jb21wbGV0ZSwgY29udGV4dCksXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGUgXCJub3JtYWxcIiBwYXRoLiBKdXN0IHVzZSB0aGUgcGFydGlhbCBvYnNlcnZlciBkaXJlY3RseS5cbiAgICAgICAgcGFydGlhbE9ic2VydmVyID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV3JhcCB0aGUgcGFydGlhbCBvYnNlcnZlciB0byBlbnN1cmUgaXQncyBhIGZ1bGwgb2JzZXJ2ZXIsIGFuZFxuICAgIC8vIG1ha2Ugc3VyZSBwcm9wZXIgZXJyb3IgaGFuZGxpbmcgaXMgYWNjb3VudGVkIGZvci5cbiAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IENvbnN1bWVyT2JzZXJ2ZXIocGFydGlhbE9ic2VydmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcjogYW55KSB7XG4gIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgIGNhcHR1cmVFcnJvcihlcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWRlYWwgcGF0aCwgd2UgcmVwb3J0IHRoaXMgYXMgYW4gdW5oYW5kbGVkIGVycm9yLFxuICAgIC8vIHdoaWNoIGlzIHRocm93biBvbiBhIG5ldyBjYWxsIHN0YWNrLlxuICAgIHJlcG9ydFVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIEFuIGVycm9yIGhhbmRsZXIgdXNlZCB3aGVuIG5vIGVycm9yIGhhbmRsZXIgd2FzIHN1cHBsaWVkXG4gKiB0byB0aGUgU2FmZVN1YnNjcmliZXIgLS0gbWVhbmluZyBubyBlcnJvciBoYW5kbGVyIHdhcyBzdXBwbGllZFxuICogZG8gdGhlIGBzdWJzY3JpYmVgIGNhbGwgb24gb3VyIG9ic2VydmFibGUuXG4gKiBAcGFyYW0gZXJyIFRoZSBlcnJvciB0byBoYW5kbGVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEVycm9ySGFuZGxlcihlcnI6IGFueSkge1xuICB0aHJvdyBlcnI7XG59XG5cbi8qKlxuICogQSBoYW5kbGVyIGZvciBub3RpZmljYXRpb25zIHRoYXQgY2Fubm90IGJlIHNlbnQgdG8gYSBzdG9wcGVkIHN1YnNjcmliZXIuXG4gKiBAcGFyYW0gbm90aWZpY2F0aW9uIFRoZSBub3RpZmljYXRpb24gYmVpbmcgc2VudFxuICogQHBhcmFtIHN1YnNjcmliZXIgVGhlIHN0b3BwZWQgc3Vic2NyaWJlclxuICovXG5mdW5jdGlvbiBoYW5kbGVTdG9wcGVkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbjogT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbjxhbnk+LCBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pIHtcbiAgY29uc3QgeyBvblN0b3BwZWROb3RpZmljYXRpb24gfSA9IGNvbmZpZztcbiAgb25TdG9wcGVkTm90aWZpY2F0aW9uICYmIHRpbWVvdXRQcm92aWRlci5zZXRUaW1lb3V0KCgpID0+IG9uU3RvcHBlZE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24sIHN1YnNjcmliZXIpKTtcbn1cblxuLyoqXG4gKiBUaGUgb2JzZXJ2ZXIgdXNlZCBhcyBhIHN0dWIgZm9yIHN1YnNjcmlwdGlvbnMgd2hlcmUgdGhlIHVzZXIgZGlkIG5vdFxuICogcGFzcyBhbnkgYXJndW1lbnRzIHRvIGBzdWJzY3JpYmVgLiBDb21lcyB3aXRoIHRoZSBkZWZhdWx0IGVycm9yIGhhbmRsaW5nXG4gKiBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGNvbnN0IEVNUFRZX09CU0VSVkVSOiBSZWFkb25seTxPYnNlcnZlcjxhbnk+PiAmIHsgY2xvc2VkOiB0cnVlIH0gPSB7XG4gIGNsb3NlZDogdHJ1ZSxcbiAgbmV4dDogbm9vcCxcbiAgZXJyb3I6IGRlZmF1bHRFcnJvckhhbmRsZXIsXG4gIGNvbXBsZXRlOiBub29wLFxufTtcbiIsICIvKipcbiAqIFN5bWJvbC5vYnNlcnZhYmxlIG9yIGEgc3RyaW5nIFwiQEBvYnNlcnZhYmxlXCIuIFVzZWQgZm9yIGludGVyb3BcbiAqXG4gKiBAZGVwcmVjYXRlZCBXZSB3aWxsIG5vIGxvbmdlciBiZSBleHBvcnRpbmcgdGhpcyBzeW1ib2wgaW4gdXBjb21pbmcgdmVyc2lvbnMgb2YgUnhKUy5cbiAqIEluc3RlYWQgcG9seWZpbGwgYW5kIHVzZSBTeW1ib2wub2JzZXJ2YWJsZSBkaXJlY3RseSAqb3IqIHVzZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9zeW1ib2wtb2JzZXJ2YWJsZVxuICovXG5leHBvcnQgY29uc3Qgb2JzZXJ2YWJsZTogc3RyaW5nIHwgc3ltYm9sID0gKCgpID0+ICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlKSB8fCAnQEBvYnNlcnZhYmxlJykoKTtcbiIsICIvKipcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgb25lIHBhcmFtZXRlciBhbmQganVzdCByZXR1cm5zIGl0LiBTaW1wbHkgcHV0LFxuICogdGhpcyBpcyBsaWtlIGA8VD4oeDogVCk6IFQgPT4geGAuXG4gKlxuICogIyMgRXhhbXBsZXNcbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBpbiBzb21lIGNhc2VzIHdoZW4gdXNpbmcgdGhpbmdzIGxpa2UgYG1lcmdlTWFwYFxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpbnRlcnZhbCwgdGFrZSwgbWFwLCByYW5nZSwgbWVyZ2VNYXAsIGlkZW50aXR5IH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3Qgc291cmNlJCA9IGludGVydmFsKDEwMDApLnBpcGUodGFrZSg1KSk7XG4gKlxuICogY29uc3QgcmVzdWx0JCA9IHNvdXJjZSQucGlwZShcbiAqICAgbWFwKGkgPT4gcmFuZ2UoaSkpLFxuICogICBtZXJnZU1hcChpZGVudGl0eSkgLy8gc2FtZSBhcyBtZXJnZU1hcCh4ID0+IHgpXG4gKiApO1xuICpcbiAqIHJlc3VsdCQuc3Vic2NyaWJlKHtcbiAqICAgbmV4dDogY29uc29sZS5sb2dcbiAqIH0pO1xuICogYGBgXG4gKlxuICogT3Igd2hlbiB5b3Ugd2FudCB0byBzZWxlY3RpdmVseSBhcHBseSBhbiBvcGVyYXRvclxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpbnRlcnZhbCwgdGFrZSwgaWRlbnRpdHkgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBzaG91bGRMaW1pdCA9ICgpID0+IE1hdGgucmFuZG9tKCkgPCAwLjU7XG4gKlxuICogY29uc3Qgc291cmNlJCA9IGludGVydmFsKDEwMDApO1xuICpcbiAqIGNvbnN0IHJlc3VsdCQgPSBzb3VyY2UkLnBpcGUoc2hvdWxkTGltaXQoKSA/IHRha2UoNSkgOiBpZGVudGl0eSk7XG4gKlxuICogcmVzdWx0JC5zdWJzY3JpYmUoe1xuICogICBuZXh0OiBjb25zb2xlLmxvZ1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0geCBBbnkgdmFsdWUgdGhhdCBpcyByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBUaGUgdmFsdWUgcGFzc2VkIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgdG8gdGhpcyBmdW5jdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHk8VD4oeDogVCk6IFQge1xuICByZXR1cm4geDtcbn1cbiIsICJpbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4vaWRlbnRpdHknO1xuaW1wb3J0IHsgVW5hcnlGdW5jdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHBpcGUoKTogdHlwZW9mIGlkZW50aXR5O1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGU8VCwgQT4oZm4xOiBVbmFyeUZ1bmN0aW9uPFQsIEE+KTogVW5hcnlGdW5jdGlvbjxULCBBPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEI+KGZuMTogVW5hcnlGdW5jdGlvbjxULCBBPiwgZm4yOiBVbmFyeUZ1bmN0aW9uPEEsIEI+KTogVW5hcnlGdW5jdGlvbjxULCBCPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEIsIEM+KGZuMTogVW5hcnlGdW5jdGlvbjxULCBBPiwgZm4yOiBVbmFyeUZ1bmN0aW9uPEEsIEI+LCBmbjM6IFVuYXJ5RnVuY3Rpb248QiwgQz4pOiBVbmFyeUZ1bmN0aW9uPFQsIEM+O1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGU8VCwgQSwgQiwgQywgRD4oXG4gIGZuMTogVW5hcnlGdW5jdGlvbjxULCBBPixcbiAgZm4yOiBVbmFyeUZ1bmN0aW9uPEEsIEI+LFxuICBmbjM6IFVuYXJ5RnVuY3Rpb248QiwgQz4sXG4gIGZuNDogVW5hcnlGdW5jdGlvbjxDLCBEPlxuKTogVW5hcnlGdW5jdGlvbjxULCBEPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEIsIEMsIEQsIEU+KFxuICBmbjE6IFVuYXJ5RnVuY3Rpb248VCwgQT4sXG4gIGZuMjogVW5hcnlGdW5jdGlvbjxBLCBCPixcbiAgZm4zOiBVbmFyeUZ1bmN0aW9uPEIsIEM+LFxuICBmbjQ6IFVuYXJ5RnVuY3Rpb248QywgRD4sXG4gIGZuNTogVW5hcnlGdW5jdGlvbjxELCBFPlxuKTogVW5hcnlGdW5jdGlvbjxULCBFPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEIsIEMsIEQsIEUsIEY+KFxuICBmbjE6IFVuYXJ5RnVuY3Rpb248VCwgQT4sXG4gIGZuMjogVW5hcnlGdW5jdGlvbjxBLCBCPixcbiAgZm4zOiBVbmFyeUZ1bmN0aW9uPEIsIEM+LFxuICBmbjQ6IFVuYXJ5RnVuY3Rpb248QywgRD4sXG4gIGZuNTogVW5hcnlGdW5jdGlvbjxELCBFPixcbiAgZm42OiBVbmFyeUZ1bmN0aW9uPEUsIEY+XG4pOiBVbmFyeUZ1bmN0aW9uPFQsIEY+O1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGU8VCwgQSwgQiwgQywgRCwgRSwgRiwgRz4oXG4gIGZuMTogVW5hcnlGdW5jdGlvbjxULCBBPixcbiAgZm4yOiBVbmFyeUZ1bmN0aW9uPEEsIEI+LFxuICBmbjM6IFVuYXJ5RnVuY3Rpb248QiwgQz4sXG4gIGZuNDogVW5hcnlGdW5jdGlvbjxDLCBEPixcbiAgZm41OiBVbmFyeUZ1bmN0aW9uPEQsIEU+LFxuICBmbjY6IFVuYXJ5RnVuY3Rpb248RSwgRj4sXG4gIGZuNzogVW5hcnlGdW5jdGlvbjxGLCBHPlxuKTogVW5hcnlGdW5jdGlvbjxULCBHPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEIsIEMsIEQsIEUsIEYsIEcsIEg+KFxuICBmbjE6IFVuYXJ5RnVuY3Rpb248VCwgQT4sXG4gIGZuMjogVW5hcnlGdW5jdGlvbjxBLCBCPixcbiAgZm4zOiBVbmFyeUZ1bmN0aW9uPEIsIEM+LFxuICBmbjQ6IFVuYXJ5RnVuY3Rpb248QywgRD4sXG4gIGZuNTogVW5hcnlGdW5jdGlvbjxELCBFPixcbiAgZm42OiBVbmFyeUZ1bmN0aW9uPEUsIEY+LFxuICBmbjc6IFVuYXJ5RnVuY3Rpb248RiwgRz4sXG4gIGZuODogVW5hcnlGdW5jdGlvbjxHLCBIPlxuKTogVW5hcnlGdW5jdGlvbjxULCBIPjtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlPFQsIEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgsIEk+KFxuICBmbjE6IFVuYXJ5RnVuY3Rpb248VCwgQT4sXG4gIGZuMjogVW5hcnlGdW5jdGlvbjxBLCBCPixcbiAgZm4zOiBVbmFyeUZ1bmN0aW9uPEIsIEM+LFxuICBmbjQ6IFVuYXJ5RnVuY3Rpb248QywgRD4sXG4gIGZuNTogVW5hcnlGdW5jdGlvbjxELCBFPixcbiAgZm42OiBVbmFyeUZ1bmN0aW9uPEUsIEY+LFxuICBmbjc6IFVuYXJ5RnVuY3Rpb248RiwgRz4sXG4gIGZuODogVW5hcnlGdW5jdGlvbjxHLCBIPixcbiAgZm45OiBVbmFyeUZ1bmN0aW9uPEgsIEk+XG4pOiBVbmFyeUZ1bmN0aW9uPFQsIEk+O1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGU8VCwgQSwgQiwgQywgRCwgRSwgRiwgRywgSCwgST4oXG4gIGZuMTogVW5hcnlGdW5jdGlvbjxULCBBPixcbiAgZm4yOiBVbmFyeUZ1bmN0aW9uPEEsIEI+LFxuICBmbjM6IFVuYXJ5RnVuY3Rpb248QiwgQz4sXG4gIGZuNDogVW5hcnlGdW5jdGlvbjxDLCBEPixcbiAgZm41OiBVbmFyeUZ1bmN0aW9uPEQsIEU+LFxuICBmbjY6IFVuYXJ5RnVuY3Rpb248RSwgRj4sXG4gIGZuNzogVW5hcnlGdW5jdGlvbjxGLCBHPixcbiAgZm44OiBVbmFyeUZ1bmN0aW9uPEcsIEg+LFxuICBmbjk6IFVuYXJ5RnVuY3Rpb248SCwgST4sXG4gIC4uLmZuczogVW5hcnlGdW5jdGlvbjxhbnksIGFueT5bXVxuKTogVW5hcnlGdW5jdGlvbjxULCB1bmtub3duPjtcblxuLyoqXG4gKiBwaXBlKCkgY2FuIGJlIGNhbGxlZCBvbiBvbmUgb3IgbW9yZSBmdW5jdGlvbnMsIGVhY2ggb2Ygd2hpY2ggY2FuIHRha2Ugb25lIGFyZ3VtZW50IChcIlVuYXJ5RnVuY3Rpb25cIilcbiAqIGFuZCB1c2VzIGl0IHRvIHJldHVybiBhIHZhbHVlLlxuICogSXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgb25lIGFyZ3VtZW50LCBwYXNzZXMgaXQgdG8gdGhlIGZpcnN0IFVuYXJ5RnVuY3Rpb24sIGFuZCB0aGVuXG4gKiBwYXNzZXMgdGhlIHJlc3VsdCB0byB0aGUgbmV4dCBvbmUsIHBhc3NlcyB0aGF0IHJlc3VsdCB0byB0aGUgbmV4dCBvbmUsIGFuZCBzbyBvbi4gIFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGlwZSguLi5mbnM6IEFycmF5PFVuYXJ5RnVuY3Rpb248YW55LCBhbnk+Pik6IFVuYXJ5RnVuY3Rpb248YW55LCBhbnk+IHtcbiAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGVGcm9tQXJyYXk8VCwgUj4oZm5zOiBBcnJheTxVbmFyeUZ1bmN0aW9uPFQsIFI+Pik6IFVuYXJ5RnVuY3Rpb248VCwgUj4ge1xuICBpZiAoZm5zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBpZGVudGl0eSBhcyBVbmFyeUZ1bmN0aW9uPGFueSwgYW55PjtcbiAgfVxuXG4gIGlmIChmbnMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGZuc1swXTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiBwaXBlZChpbnB1dDogVCk6IFIge1xuICAgIHJldHVybiBmbnMucmVkdWNlKChwcmV2OiBhbnksIGZuOiBVbmFyeUZ1bmN0aW9uPFQsIFI+KSA9PiBmbihwcmV2KSwgaW5wdXQgYXMgYW55KTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBPcGVyYXRvciB9IGZyb20gJy4vT3BlcmF0b3InO1xuaW1wb3J0IHsgU2FmZVN1YnNjcmliZXIsIFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgaXNTdWJzY3JpcHRpb24sIFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IFRlYXJkb3duTG9naWMsIE9wZXJhdG9yRnVuY3Rpb24sIFN1YnNjcmliYWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuL3N5bWJvbC9vYnNlcnZhYmxlJztcbmltcG9ydCB7IHBpcGVGcm9tQXJyYXkgfSBmcm9tICcuL3V0aWwvcGlwZSc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgZXJyb3JDb250ZXh0IH0gZnJvbSAnLi91dGlsL2Vycm9yQ29udGV4dCc7XG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhbnkgc2V0IG9mIHZhbHVlcyBvdmVyIGFueSBhbW91bnQgb2YgdGltZS4gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBidWlsZGluZyBibG9ja1xuICogb2YgUnhKUy5cbiAqXG4gKiBAY2xhc3MgT2JzZXJ2YWJsZTxUPlxuICovXG5leHBvcnQgY2xhc3MgT2JzZXJ2YWJsZTxUPiBpbXBsZW1lbnRzIFN1YnNjcmliYWJsZTxUPiB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC5cbiAgICovXG4gIHNvdXJjZTogT2JzZXJ2YWJsZTxhbnk+IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC5cbiAgICovXG4gIG9wZXJhdG9yOiBPcGVyYXRvcjxhbnksIFQ+IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBPYnNlcnZhYmxlIGlzXG4gICAqIGluaXRpYWxseSBzdWJzY3JpYmVkIHRvLiBUaGlzIGZ1bmN0aW9uIGlzIGdpdmVuIGEgU3Vic2NyaWJlciwgdG8gd2hpY2ggbmV3IHZhbHVlc1xuICAgKiBjYW4gYmUgYG5leHRgZWQsIG9yIGFuIGBlcnJvcmAgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmFpc2UgYW4gZXJyb3IsIG9yXG4gICAqIGBjb21wbGV0ZWAgY2FuIGJlIGNhbGxlZCB0byBub3RpZnkgb2YgYSBzdWNjZXNzZnVsIGNvbXBsZXRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihzdWJzY3JpYmU/OiAodGhpczogT2JzZXJ2YWJsZTxUPiwgc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikgPT4gVGVhcmRvd25Mb2dpYykge1xuICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICB9XG4gIH1cblxuICAvLyBIQUNLOiBTaW5jZSBUeXBlU2NyaXB0IGluaGVyaXRzIHN0YXRpYyBwcm9wZXJ0aWVzIHRvbywgd2UgaGF2ZSB0b1xuICAvLyBmaWdodCBhZ2FpbnN0IFR5cGVTY3JpcHQgaGVyZSBzbyBTdWJqZWN0IGNhbiBoYXZlIGEgZGlmZmVyZW50IHN0YXRpYyBjcmVhdGUgc2lnbmF0dXJlXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgYnkgY2FsbGluZyB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgKiBAbWV0aG9kIGNyZWF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmU/IHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uIHRvIGJlIHBhc3NlZCB0byB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhIG5ldyBvYnNlcnZhYmxlXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgbmV3IE9ic2VydmFibGUoKWAgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZTogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkgPSA8VD4oc3Vic2NyaWJlPzogKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pID0+IFRlYXJkb3duTG9naWMpID0+IHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8VD4oc3Vic2NyaWJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlLCB3aXRoIHRoaXMgT2JzZXJ2YWJsZSBpbnN0YW5jZSBhcyB0aGUgc291cmNlLCBhbmQgdGhlIHBhc3NlZFxuICAgKiBvcGVyYXRvciBkZWZpbmVkIGFzIHRoZSBuZXcgb2JzZXJ2YWJsZSdzIG9wZXJhdG9yLlxuICAgKiBAbWV0aG9kIGxpZnRcbiAgICogQHBhcmFtIG9wZXJhdG9yIHRoZSBvcGVyYXRvciBkZWZpbmluZyB0aGUgb3BlcmF0aW9uIHRvIHRha2Ugb24gdGhlIG9ic2VydmFibGVcbiAgICogQHJldHVybiBhIG5ldyBvYnNlcnZhYmxlIHdpdGggdGhlIE9wZXJhdG9yIGFwcGxpZWRcbiAgICogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlIGRpcmVjdGx5LiBXaWxsIGJlIG1hZGUgaW50ZXJuYWwgaW4gdjguXG4gICAqIElmIHlvdSBoYXZlIGltcGxlbWVudGVkIGFuIG9wZXJhdG9yIHVzaW5nIGBsaWZ0YCwgaXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3UgY3JlYXRlIGFuXG4gICAqIG9wZXJhdG9yIGJ5IHNpbXBseSByZXR1cm5pbmcgYG5ldyBPYnNlcnZhYmxlKClgIGRpcmVjdGx5LiBTZWUgXCJDcmVhdGluZyBuZXcgb3BlcmF0b3JzIGZyb21cbiAgICogc2NyYXRjaFwiIHNlY3Rpb24gaGVyZTogaHR0cHM6Ly9yeGpzLmRldi9ndWlkZS9vcGVyYXRvcnNcbiAgICovXG4gIGxpZnQ8Uj4ob3BlcmF0b3I/OiBPcGVyYXRvcjxULCBSPik6IE9ic2VydmFibGU8Uj4ge1xuICAgIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxSPigpO1xuICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgcmV0dXJuIG9ic2VydmFibGU7XG4gIH1cblxuICBzdWJzY3JpYmUob2JzZXJ2ZXJPck5leHQ/OiBQYXJ0aWFsPE9ic2VydmVyPFQ+PiB8ICgodmFsdWU6IFQpID0+IHZvaWQpKTogU3Vic2NyaXB0aW9uO1xuICAvKiogQGRlcHJlY2F0ZWQgSW5zdGVhZCBvZiBwYXNzaW5nIHNlcGFyYXRlIGNhbGxiYWNrIGFyZ3VtZW50cywgdXNlIGFuIG9ic2VydmVyIGFyZ3VtZW50LiBTaWduYXR1cmVzIHRha2luZyBzZXBhcmF0ZSBjYWxsYmFjayBhcmd1bWVudHMgd2lsbCBiZSByZW1vdmVkIGluIHY4LiBEZXRhaWxzOiBodHRwczovL3J4anMuZGV2L2RlcHJlY2F0aW9ucy9zdWJzY3JpYmUtYXJndW1lbnRzICovXG4gIHN1YnNjcmliZShuZXh0PzogKCh2YWx1ZTogVCkgPT4gdm9pZCkgfCBudWxsLCBlcnJvcj86ICgoZXJyb3I6IGFueSkgPT4gdm9pZCkgfCBudWxsLCBjb21wbGV0ZT86ICgoKSA9PiB2b2lkKSB8IG51bGwpOiBTdWJzY3JpcHRpb247XG4gIC8qKlxuICAgKiBJbnZva2VzIGFuIGV4ZWN1dGlvbiBvZiBhbiBPYnNlcnZhYmxlIGFuZCByZWdpc3RlcnMgT2JzZXJ2ZXIgaGFuZGxlcnMgZm9yIG5vdGlmaWNhdGlvbnMgaXQgd2lsbCBlbWl0LlxuICAgKlxuICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VXNlIGl0IHdoZW4geW91IGhhdmUgYWxsIHRoZXNlIE9ic2VydmFibGVzLCBidXQgc3RpbGwgbm90aGluZyBpcyBoYXBwZW5pbmcuPC9zcGFuPlxuICAgKlxuICAgKiBgc3Vic2NyaWJlYCBpcyBub3QgYSByZWd1bGFyIG9wZXJhdG9yLCBidXQgYSBtZXRob2QgdGhhdCBjYWxscyBPYnNlcnZhYmxlJ3MgaW50ZXJuYWwgYHN1YnNjcmliZWAgZnVuY3Rpb24uIEl0XG4gICAqIG1pZ2h0IGJlIGZvciBleGFtcGxlIGEgZnVuY3Rpb24gdGhhdCB5b3UgcGFzc2VkIHRvIE9ic2VydmFibGUncyBjb25zdHJ1Y3RvciwgYnV0IG1vc3Qgb2YgdGhlIHRpbWUgaXQgaXNcbiAgICogYSBsaWJyYXJ5IGltcGxlbWVudGF0aW9uLCB3aGljaCBkZWZpbmVzIHdoYXQgd2lsbCBiZSBlbWl0dGVkIGJ5IGFuIE9ic2VydmFibGUsIGFuZCB3aGVuIGl0IGJlIHdpbGwgZW1pdHRlZC4gVGhpcyBtZWFuc1xuICAgKiB0aGF0IGNhbGxpbmcgYHN1YnNjcmliZWAgaXMgYWN0dWFsbHkgdGhlIG1vbWVudCB3aGVuIE9ic2VydmFibGUgc3RhcnRzIGl0cyB3b3JrLCBub3Qgd2hlbiBpdCBpcyBjcmVhdGVkLCBhcyBpdCBpcyBvZnRlblxuICAgKiB0aGUgdGhvdWdodC5cbiAgICpcbiAgICogQXBhcnQgZnJvbSBzdGFydGluZyB0aGUgZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUsIHRoaXMgbWV0aG9kIGFsbG93cyB5b3UgdG8gbGlzdGVuIGZvciB2YWx1ZXNcbiAgICogdGhhdCBhbiBPYnNlcnZhYmxlIGVtaXRzLCBhcyB3ZWxsIGFzIGZvciB3aGVuIGl0IGNvbXBsZXRlcyBvciBlcnJvcnMuIFlvdSBjYW4gYWNoaWV2ZSB0aGlzIGluIHR3b1xuICAgKiBvZiB0aGUgZm9sbG93aW5nIHdheXMuXG4gICAqXG4gICAqIFRoZSBmaXJzdCB3YXkgaXMgY3JlYXRpbmcgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB7QGxpbmsgT2JzZXJ2ZXJ9IGludGVyZmFjZS4gSXQgc2hvdWxkIGhhdmUgbWV0aG9kc1xuICAgKiBkZWZpbmVkIGJ5IHRoYXQgaW50ZXJmYWNlLCBidXQgbm90ZSB0aGF0IGl0IHNob3VsZCBiZSBqdXN0IGEgcmVndWxhciBKYXZhU2NyaXB0IG9iamVjdCwgd2hpY2ggeW91IGNhbiBjcmVhdGVcbiAgICogeW91cnNlbGYgaW4gYW55IHdheSB5b3Ugd2FudCAoRVM2IGNsYXNzLCBjbGFzc2ljIGZ1bmN0aW9uIGNvbnN0cnVjdG9yLCBvYmplY3QgbGl0ZXJhbCBldGMuKS4gSW4gcGFydGljdWxhciwgZG9cbiAgICogbm90IGF0dGVtcHQgdG8gdXNlIGFueSBSeEpTIGltcGxlbWVudGF0aW9uIGRldGFpbHMgdG8gY3JlYXRlIE9ic2VydmVycyAtIHlvdSBkb24ndCBuZWVkIHRoZW0uIFJlbWVtYmVyIGFsc29cbiAgICogdGhhdCB5b3VyIG9iamVjdCBkb2VzIG5vdCBoYXZlIHRvIGltcGxlbWVudCBhbGwgbWV0aG9kcy4gSWYgeW91IGZpbmQgeW91cnNlbGYgY3JlYXRpbmcgYSBtZXRob2QgdGhhdCBkb2Vzbid0XG4gICAqIGRvIGFueXRoaW5nLCB5b3UgY2FuIHNpbXBseSBvbWl0IGl0LiBOb3RlIGhvd2V2ZXIsIGlmIHRoZSBgZXJyb3JgIG1ldGhvZCBpcyBub3QgcHJvdmlkZWQgYW5kIGFuIGVycm9yIGhhcHBlbnMsXG4gICAqIGl0IHdpbGwgYmUgdGhyb3duIGFzeW5jaHJvbm91c2x5LiBFcnJvcnMgdGhyb3duIGFzeW5jaHJvbm91c2x5IGNhbm5vdCBiZSBjYXVnaHQgdXNpbmcgYHRyeWAvYGNhdGNoYC4gSW5zdGVhZCxcbiAgICogdXNlIHRoZSB7QGxpbmsgb25VbmhhbmRsZWRFcnJvcn0gY29uZmlndXJhdGlvbiBvcHRpb24gb3IgdXNlIGEgcnVudGltZSBoYW5kbGVyIChsaWtlIGB3aW5kb3cub25lcnJvcmAgb3JcbiAgICogYHByb2Nlc3Mub24oJ2Vycm9yKWApIHRvIGJlIG5vdGlmaWVkIG9mIHVuaGFuZGxlZCBlcnJvcnMuIEJlY2F1c2Ugb2YgdGhpcywgaXQncyByZWNvbW1lbmRlZCB0aGF0IHlvdSBwcm92aWRlXG4gICAqIGFuIGBlcnJvcmAgbWV0aG9kIHRvIGF2b2lkIG1pc3NpbmcgdGhyb3duIGVycm9ycy5cbiAgICpcbiAgICogVGhlIHNlY29uZCB3YXkgaXMgdG8gZ2l2ZSB1cCBvbiBPYnNlcnZlciBvYmplY3QgYWx0b2dldGhlciBhbmQgc2ltcGx5IHByb3ZpZGUgY2FsbGJhY2sgZnVuY3Rpb25zIGluIHBsYWNlIG9mIGl0cyBtZXRob2RzLlxuICAgKiBUaGlzIG1lYW5zIHlvdSBjYW4gcHJvdmlkZSB0aHJlZSBmdW5jdGlvbnMgYXMgYXJndW1lbnRzIHRvIGBzdWJzY3JpYmVgLCB3aGVyZSB0aGUgZmlyc3QgZnVuY3Rpb24gaXMgZXF1aXZhbGVudFxuICAgKiBvZiBhIGBuZXh0YCBtZXRob2QsIHRoZSBzZWNvbmQgb2YgYW4gYGVycm9yYCBtZXRob2QgYW5kIHRoZSB0aGlyZCBvZiBhIGBjb21wbGV0ZWAgbWV0aG9kLiBKdXN0IGFzIGluIGNhc2Ugb2YgYW4gT2JzZXJ2ZXIsXG4gICAqIGlmIHlvdSBkbyBub3QgbmVlZCB0byBsaXN0ZW4gZm9yIHNvbWV0aGluZywgeW91IGNhbiBvbWl0IGEgZnVuY3Rpb24gYnkgcGFzc2luZyBgdW5kZWZpbmVkYCBvciBgbnVsbGAsXG4gICAqIHNpbmNlIGBzdWJzY3JpYmVgIHJlY29nbml6ZXMgdGhlc2UgZnVuY3Rpb25zIGJ5IHdoZXJlIHRoZXkgd2VyZSBwbGFjZWQgaW4gZnVuY3Rpb24gY2FsbC4gV2hlbiBpdCBjb21lc1xuICAgKiB0byB0aGUgYGVycm9yYCBmdW5jdGlvbiwgYXMgd2l0aCBhbiBPYnNlcnZlciwgaWYgbm90IHByb3ZpZGVkLCBlcnJvcnMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIHdpbGwgYmUgdGhyb3duIGFzeW5jaHJvbm91c2x5LlxuICAgKlxuICAgKiBZb3UgY2FuLCBob3dldmVyLCBzdWJzY3JpYmUgd2l0aCBubyBwYXJhbWV0ZXJzIGF0IGFsbC4gVGhpcyBtYXkgYmUgdGhlIGNhc2Ugd2hlcmUgeW91J3JlIG5vdCBpbnRlcmVzdGVkIGluIHRlcm1pbmFsIGV2ZW50c1xuICAgKiBhbmQgeW91IGFsc28gaGFuZGxlZCBlbWlzc2lvbnMgaW50ZXJuYWxseSBieSB1c2luZyBvcGVyYXRvcnMgKGUuZy4gdXNpbmcgYHRhcGApLlxuICAgKlxuICAgKiBXaGljaGV2ZXIgc3R5bGUgb2YgY2FsbGluZyBgc3Vic2NyaWJlYCB5b3UgdXNlLCBpbiBib3RoIGNhc2VzIGl0IHJldHVybnMgYSBTdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgKiBUaGlzIG9iamVjdCBhbGxvd3MgeW91IHRvIGNhbGwgYHVuc3Vic2NyaWJlYCBvbiBpdCwgd2hpY2ggaW4gdHVybiB3aWxsIHN0b3AgdGhlIHdvcmsgdGhhdCBhbiBPYnNlcnZhYmxlIGRvZXMgYW5kIHdpbGwgY2xlYW5cbiAgICogdXAgYWxsIHJlc291cmNlcyB0aGF0IGFuIE9ic2VydmFibGUgdXNlZC4gTm90ZSB0aGF0IGNhbmNlbGxpbmcgYSBzdWJzY3JpcHRpb24gd2lsbCBub3QgY2FsbCBgY29tcGxldGVgIGNhbGxiYWNrXG4gICAqIHByb3ZpZGVkIHRvIGBzdWJzY3JpYmVgIGZ1bmN0aW9uLCB3aGljaCBpcyByZXNlcnZlZCBmb3IgYSByZWd1bGFyIGNvbXBsZXRpb24gc2lnbmFsIHRoYXQgY29tZXMgZnJvbSBhbiBPYnNlcnZhYmxlLlxuICAgKlxuICAgKiBSZW1lbWJlciB0aGF0IGNhbGxiYWNrcyBwcm92aWRlZCB0byBgc3Vic2NyaWJlYCBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LlxuICAgKiBJdCBpcyBhbiBPYnNlcnZhYmxlIGl0c2VsZiB0aGF0IGRlY2lkZXMgd2hlbiB0aGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBjYWxsZWQuIEZvciBleGFtcGxlIHtAbGluayBvZn1cbiAgICogYnkgZGVmYXVsdCBlbWl0cyBhbGwgaXRzIHZhbHVlcyBzeW5jaHJvbm91c2x5LiBBbHdheXMgY2hlY2sgZG9jdW1lbnRhdGlvbiBmb3IgaG93IGdpdmVuIE9ic2VydmFibGVcbiAgICogd2lsbCBiZWhhdmUgd2hlbiBzdWJzY3JpYmVkIGFuZCBpZiBpdHMgZGVmYXVsdCBiZWhhdmlvciBjYW4gYmUgbW9kaWZpZWQgd2l0aCBhIGBzY2hlZHVsZXJgLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGVzXG4gICAqXG4gICAqIFN1YnNjcmliZSB3aXRoIGFuIHtAbGluayBndWlkZS9vYnNlcnZlciBPYnNlcnZlcn1cbiAgICpcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcbiAgICpcbiAgICogY29uc3Qgc3VtT2JzZXJ2ZXIgPSB7XG4gICAqICAgc3VtOiAwLFxuICAgKiAgIG5leHQodmFsdWUpIHtcbiAgICogICAgIGNvbnNvbGUubG9nKCdBZGRpbmc6ICcgKyB2YWx1ZSk7XG4gICAqICAgICB0aGlzLnN1bSA9IHRoaXMuc3VtICsgdmFsdWU7XG4gICAqICAgfSxcbiAgICogICBlcnJvcigpIHtcbiAgICogICAgIC8vIFdlIGFjdHVhbGx5IGNvdWxkIGp1c3QgcmVtb3ZlIHRoaXMgbWV0aG9kLFxuICAgKiAgICAgLy8gc2luY2Ugd2UgZG8gbm90IHJlYWxseSBjYXJlIGFib3V0IGVycm9ycyByaWdodCBub3cuXG4gICAqICAgfSxcbiAgICogICBjb21wbGV0ZSgpIHtcbiAgICogICAgIGNvbnNvbGUubG9nKCdTdW0gZXF1YWxzOiAnICsgdGhpcy5zdW0pO1xuICAgKiAgIH1cbiAgICogfTtcbiAgICpcbiAgICogb2YoMSwgMiwgMykgLy8gU3luY2hyb25vdXNseSBlbWl0cyAxLCAyLCAzIGFuZCB0aGVuIGNvbXBsZXRlcy5cbiAgICogICAuc3Vic2NyaWJlKHN1bU9ic2VydmVyKTtcbiAgICpcbiAgICogLy8gTG9nczpcbiAgICogLy8gJ0FkZGluZzogMSdcbiAgICogLy8gJ0FkZGluZzogMidcbiAgICogLy8gJ0FkZGluZzogMydcbiAgICogLy8gJ1N1bSBlcXVhbHM6IDYnXG4gICAqIGBgYFxuICAgKlxuICAgKiBTdWJzY3JpYmUgd2l0aCBmdW5jdGlvbnMgKHtAbGluayBkZXByZWNhdGlvbnMvc3Vic2NyaWJlLWFyZ3VtZW50cyBkZXByZWNhdGVkfSlcbiAgICpcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJ1xuICAgKlxuICAgKiBsZXQgc3VtID0gMDtcbiAgICpcbiAgICogb2YoMSwgMiwgMykuc3Vic2NyaWJlKFxuICAgKiAgIHZhbHVlID0+IHtcbiAgICogICAgIGNvbnNvbGUubG9nKCdBZGRpbmc6ICcgKyB2YWx1ZSk7XG4gICAqICAgICBzdW0gPSBzdW0gKyB2YWx1ZTtcbiAgICogICB9LFxuICAgKiAgIHVuZGVmaW5lZCxcbiAgICogICAoKSA9PiBjb25zb2xlLmxvZygnU3VtIGVxdWFsczogJyArIHN1bSlcbiAgICogKTtcbiAgICpcbiAgICogLy8gTG9nczpcbiAgICogLy8gJ0FkZGluZzogMSdcbiAgICogLy8gJ0FkZGluZzogMidcbiAgICogLy8gJ0FkZGluZzogMydcbiAgICogLy8gJ1N1bSBlcXVhbHM6IDYnXG4gICAqIGBgYFxuICAgKlxuICAgKiBDYW5jZWwgYSBzdWJzY3JpcHRpb25cbiAgICpcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHsgaW50ZXJ2YWwgfSBmcm9tICdyeGpzJztcbiAgICpcbiAgICogY29uc3Qgc3Vic2NyaXB0aW9uID0gaW50ZXJ2YWwoMTAwMCkuc3Vic2NyaWJlKHtcbiAgICogICBuZXh0KG51bSkge1xuICAgKiAgICAgY29uc29sZS5sb2cobnVtKVxuICAgKiAgIH0sXG4gICAqICAgY29tcGxldGUoKSB7XG4gICAqICAgICAvLyBXaWxsIG5vdCBiZSBjYWxsZWQsIGV2ZW4gd2hlbiBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvbi5cbiAgICogICAgIGNvbnNvbGUubG9nKCdjb21wbGV0ZWQhJyk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICpcbiAgICogc2V0VGltZW91dCgoKSA9PiB7XG4gICAqICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAqICAgY29uc29sZS5sb2coJ3Vuc3Vic2NyaWJlZCEnKTtcbiAgICogfSwgMjUwMCk7XG4gICAqXG4gICAqIC8vIExvZ3M6XG4gICAqIC8vIDAgYWZ0ZXIgMXNcbiAgICogLy8gMSBhZnRlciAyc1xuICAgKiAvLyAndW5zdWJzY3JpYmVkIScgYWZ0ZXIgMi41c1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtPYnNlcnZlcnxGdW5jdGlvbn0gb2JzZXJ2ZXJPck5leHQgKG9wdGlvbmFsKSBFaXRoZXIgYW4gb2JzZXJ2ZXIgd2l0aCBtZXRob2RzIHRvIGJlIGNhbGxlZCxcbiAgICogb3IgdGhlIGZpcnN0IG9mIHRocmVlIHBvc3NpYmxlIGhhbmRsZXJzLCB3aGljaCBpcyB0aGUgaGFuZGxlciBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkIGZyb20gdGhlIHN1YnNjcmliZWRcbiAgICogT2JzZXJ2YWJsZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3IgKG9wdGlvbmFsKSBBIGhhbmRsZXIgZm9yIGEgdGVybWluYWwgZXZlbnQgcmVzdWx0aW5nIGZyb20gYW4gZXJyb3IuIElmIG5vIGVycm9yIGhhbmRsZXIgaXMgcHJvdmlkZWQsXG4gICAqIHRoZSBlcnJvciB3aWxsIGJlIHRocm93biBhc3luY2hyb25vdXNseSBhcyB1bmhhbmRsZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBsZXRlIChvcHRpb25hbCkgQSBoYW5kbGVyIGZvciBhIHRlcm1pbmFsIGV2ZW50IHJlc3VsdGluZyBmcm9tIHN1Y2Nlc3NmdWwgY29tcGxldGlvbi5cbiAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufSBhIHN1YnNjcmlwdGlvbiByZWZlcmVuY2UgdG8gdGhlIHJlZ2lzdGVyZWQgaGFuZGxlcnNcbiAgICogQG1ldGhvZCBzdWJzY3JpYmVcbiAgICovXG4gIHN1YnNjcmliZShcbiAgICBvYnNlcnZlck9yTmV4dD86IFBhcnRpYWw8T2JzZXJ2ZXI8VD4+IHwgKCh2YWx1ZTogVCkgPT4gdm9pZCkgfCBudWxsLFxuICAgIGVycm9yPzogKChlcnJvcjogYW55KSA9PiB2b2lkKSB8IG51bGwsXG4gICAgY29tcGxldGU/OiAoKCkgPT4gdm9pZCkgfCBudWxsXG4gICk6IFN1YnNjcmlwdGlvbiB7XG4gICAgY29uc3Qgc3Vic2NyaWJlciA9IGlzU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCkgPyBvYnNlcnZlck9yTmV4dCA6IG5ldyBTYWZlU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcblxuICAgIGVycm9yQ29udGV4dCgoKSA9PiB7XG4gICAgICBjb25zdCB7IG9wZXJhdG9yLCBzb3VyY2UgfSA9IHRoaXM7XG4gICAgICBzdWJzY3JpYmVyLmFkZChcbiAgICAgICAgb3BlcmF0b3JcbiAgICAgICAgICA/IC8vIFdlJ3JlIGRlYWxpbmcgd2l0aCBhIHN1YnNjcmlwdGlvbiBpbiB0aGVcbiAgICAgICAgICAgIC8vIG9wZXJhdG9yIGNoYWluIHRvIG9uZSBvZiBvdXIgbGlmdGVkIG9wZXJhdG9ycy5cbiAgICAgICAgICAgIG9wZXJhdG9yLmNhbGwoc3Vic2NyaWJlciwgc291cmNlKVxuICAgICAgICAgIDogc291cmNlXG4gICAgICAgICAgPyAvLyBJZiBgc291cmNlYCBoYXMgYSB2YWx1ZSwgYnV0IGBvcGVyYXRvcmAgZG9lcyBub3QsIHNvbWV0aGluZyB0aGF0XG4gICAgICAgICAgICAvLyBoYWQgaW50aW1hdGUga25vd2xlZGdlIG9mIG91ciBBUEksIGxpa2Ugb3VyIGBTdWJqZWN0YCwgbXVzdCBoYXZlXG4gICAgICAgICAgICAvLyBzZXQgaXQuIFdlJ3JlIGdvaW5nIHRvIGp1c3QgY2FsbCBgX3N1YnNjcmliZWAgZGlyZWN0bHkuXG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUoc3Vic2NyaWJlcilcbiAgICAgICAgICA6IC8vIEluIGFsbCBvdGhlciBjYXNlcywgd2UncmUgbGlrZWx5IHdyYXBwaW5nIGEgdXNlci1wcm92aWRlZCBpbml0aWFsaXplclxuICAgICAgICAgICAgLy8gZnVuY3Rpb24sIHNvIHdlIG5lZWQgdG8gY2F0Y2ggZXJyb3JzIGFuZCBoYW5kbGUgdGhlbSBhcHByb3ByaWF0ZWx5LlxuICAgICAgICAgICAgdGhpcy5fdHJ5U3Vic2NyaWJlKHN1YnNjcmliZXIpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCBfdHJ5U3Vic2NyaWJlKHNpbms6IFN1YnNjcmliZXI8VD4pOiBUZWFyZG93bkxvZ2ljIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGluIHRoaXMgY2FzZSxcbiAgICAgIC8vIGJlY2F1c2UgaXQncyBqdXN0IGdvaW5nIHRvIHRyeSB0byBgYWRkKClgIHRvIGEgc3Vic2NyaXB0aW9uXG4gICAgICAvLyBhYm92ZS5cbiAgICAgIHNpbmsuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBhcyBhIE5PTi1DQU5DRUxMQUJMRSBtZWFucyBvZiBzdWJzY3JpYmluZyB0byBhbiBvYnNlcnZhYmxlLCBmb3IgdXNlIHdpdGhcbiAgICogQVBJcyB0aGF0IGV4cGVjdCBwcm9taXNlcywgbGlrZSBgYXN5bmMvYXdhaXRgLiBZb3UgY2Fubm90IHVuc3Vic2NyaWJlIGZyb20gdGhpcy5cbiAgICpcbiAgICogKipXQVJOSU5HKio6IE9ubHkgdXNlIHRoaXMgd2l0aCBvYnNlcnZhYmxlcyB5b3UgKmtub3cqIHdpbGwgY29tcGxldGUuIElmIHRoZSBzb3VyY2VcbiAgICogb2JzZXJ2YWJsZSBkb2VzIG5vdCBjb21wbGV0ZSwgeW91IHdpbGwgZW5kIHVwIHdpdGggYSBwcm9taXNlIHRoYXQgaXMgaHVuZyB1cCwgYW5kXG4gICAqIHBvdGVudGlhbGx5IGFsbCBvZiB0aGUgc3RhdGUgb2YgYW4gYXN5bmMgZnVuY3Rpb24gaGFuZ2luZyBvdXQgaW4gbWVtb3J5LiBUbyBhdm9pZFxuICAgKiB0aGlzIHNpdHVhdGlvbiwgbG9vayBpbnRvIGFkZGluZyBzb21ldGhpbmcgbGlrZSB7QGxpbmsgdGltZW91dH0sIHtAbGluayB0YWtlfSxcbiAgICoge0BsaW5rIHRha2VXaGlsZX0sIG9yIHtAbGluayB0YWtlVW50aWx9IGFtb25nc3Qgb3RoZXJzLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHsgaW50ZXJ2YWwsIHRha2UgfSBmcm9tICdyeGpzJztcbiAgICpcbiAgICogY29uc3Qgc291cmNlJCA9IGludGVydmFsKDEwMDApLnBpcGUodGFrZSg0KSk7XG4gICAqXG4gICAqIGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsKCkge1xuICAgKiAgIGxldCB0b3RhbCA9IDA7XG4gICAqXG4gICAqICAgYXdhaXQgc291cmNlJC5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICogICAgIHRvdGFsICs9IHZhbHVlO1xuICAgKiAgICAgY29uc29sZS5sb2coJ29ic2VydmFibGUgLT4gJyArIHZhbHVlKTtcbiAgICogICB9KTtcbiAgICpcbiAgICogICByZXR1cm4gdG90YWw7XG4gICAqIH1cbiAgICpcbiAgICogZ2V0VG90YWwoKS50aGVuKFxuICAgKiAgIHRvdGFsID0+IGNvbnNvbGUubG9nKCdUb3RhbDogJyArIHRvdGFsKVxuICAgKiApO1xuICAgKlxuICAgKiAvLyBFeHBlY3RlZDpcbiAgICogLy8gJ29ic2VydmFibGUgLT4gMCdcbiAgICogLy8gJ29ic2VydmFibGUgLT4gMSdcbiAgICogLy8gJ29ic2VydmFibGUgLT4gMidcbiAgICogLy8gJ29ic2VydmFibGUgLT4gMydcbiAgICogLy8gJ1RvdGFsOiA2J1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG5leHQgYSBoYW5kbGVyIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIG9ic2VydmFibGVcbiAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCBlaXRoZXIgcmVzb2x2ZXMgb24gb2JzZXJ2YWJsZSBjb21wbGV0aW9uIG9yXG4gICAqICByZWplY3RzIHdpdGggdGhlIGhhbmRsZWQgZXJyb3JcbiAgICovXG4gIGZvckVhY2gobmV4dDogKHZhbHVlOiBUKSA9PiB2b2lkKTogUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogQHBhcmFtIG5leHQgYSBoYW5kbGVyIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIG9ic2VydmFibGVcbiAgICogQHBhcmFtIHByb21pc2VDdG9yIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgUHJvbWlzZVxuICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IGVpdGhlciByZXNvbHZlcyBvbiBvYnNlcnZhYmxlIGNvbXBsZXRpb24gb3JcbiAgICogIHJlamVjdHMgd2l0aCB0aGUgaGFuZGxlZCBlcnJvclxuICAgKiBAZGVwcmVjYXRlZCBQYXNzaW5nIGEgUHJvbWlzZSBjb25zdHJ1Y3RvciB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGVcbiAgICogaW4gdXBjb21pbmcgdmVyc2lvbnMgb2YgUnhKUy4gVGhpcyBpcyBiZWNhdXNlIGl0IGFkZHMgd2VpZ2h0IHRvIHRoZSBsaWJyYXJ5LCBmb3IgdmVyeVxuICAgKiBsaXR0bGUgYmVuZWZpdC4gSWYgeW91IG5lZWQgdGhpcyBmdW5jdGlvbmFsaXR5LCBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSBlaXRoZXJcbiAgICogcG9seWZpbGwgUHJvbWlzZSwgb3IgeW91IGNyZWF0ZSBhbiBhZGFwdGVyIHRvIGNvbnZlcnQgdGhlIHJldHVybmVkIG5hdGl2ZSBwcm9taXNlXG4gICAqIHRvIHdoYXRldmVyIHByb21pc2UgaW1wbGVtZW50YXRpb24geW91IHdhbnRlZC4gV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgZm9yRWFjaChuZXh0OiAodmFsdWU6IFQpID0+IHZvaWQsIHByb21pc2VDdG9yOiBQcm9taXNlQ29uc3RydWN0b3JMaWtlKTogUHJvbWlzZTx2b2lkPjtcblxuICBmb3JFYWNoKG5leHQ6ICh2YWx1ZTogVCkgPT4gdm9pZCwgcHJvbWlzZUN0b3I/OiBQcm9taXNlQ29uc3RydWN0b3JMaWtlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG5cbiAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBuZXcgU2FmZVN1YnNjcmliZXI8VD4oe1xuICAgICAgICBuZXh0OiAodmFsdWUpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgIGNvbXBsZXRlOiByZXNvbHZlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9KSBhcyBQcm9taXNlPHZvaWQ+O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcm90ZWN0ZWQgX3N1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pOiBUZWFyZG93bkxvZ2ljIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2U/LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBpbnRlcm9wIHBvaW50IGRlZmluZWQgYnkgdGhlIGVzNy1vYnNlcnZhYmxlIHNwZWMgaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZVxuICAgKiBAbWV0aG9kIFN5bWJvbC5vYnNlcnZhYmxlXG4gICAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoaXMgaW5zdGFuY2Ugb2YgdGhlIG9ic2VydmFibGVcbiAgICovXG4gIFtTeW1ib2xfb2JzZXJ2YWJsZV0oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgcGlwZSgpOiBPYnNlcnZhYmxlPFQ+O1xuICBwaXBlPEE+KG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPik6IE9ic2VydmFibGU8QT47XG4gIHBpcGU8QSwgQj4ob3AxOiBPcGVyYXRvckZ1bmN0aW9uPFQsIEE+LCBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4pOiBPYnNlcnZhYmxlPEI+O1xuICBwaXBlPEEsIEIsIEM+KG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPiwgb3AyOiBPcGVyYXRvckZ1bmN0aW9uPEEsIEI+LCBvcDM6IE9wZXJhdG9yRnVuY3Rpb248QiwgQz4pOiBPYnNlcnZhYmxlPEM+O1xuICBwaXBlPEEsIEIsIEMsIEQ+KFxuICAgIG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPixcbiAgICBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4sXG4gICAgb3AzOiBPcGVyYXRvckZ1bmN0aW9uPEIsIEM+LFxuICAgIG9wNDogT3BlcmF0b3JGdW5jdGlvbjxDLCBEPlxuICApOiBPYnNlcnZhYmxlPEQ+O1xuICBwaXBlPEEsIEIsIEMsIEQsIEU+KFxuICAgIG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPixcbiAgICBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4sXG4gICAgb3AzOiBPcGVyYXRvckZ1bmN0aW9uPEIsIEM+LFxuICAgIG9wNDogT3BlcmF0b3JGdW5jdGlvbjxDLCBEPixcbiAgICBvcDU6IE9wZXJhdG9yRnVuY3Rpb248RCwgRT5cbiAgKTogT2JzZXJ2YWJsZTxFPjtcbiAgcGlwZTxBLCBCLCBDLCBELCBFLCBGPihcbiAgICBvcDE6IE9wZXJhdG9yRnVuY3Rpb248VCwgQT4sXG4gICAgb3AyOiBPcGVyYXRvckZ1bmN0aW9uPEEsIEI+LFxuICAgIG9wMzogT3BlcmF0b3JGdW5jdGlvbjxCLCBDPixcbiAgICBvcDQ6IE9wZXJhdG9yRnVuY3Rpb248QywgRD4sXG4gICAgb3A1OiBPcGVyYXRvckZ1bmN0aW9uPEQsIEU+LFxuICAgIG9wNjogT3BlcmF0b3JGdW5jdGlvbjxFLCBGPlxuICApOiBPYnNlcnZhYmxlPEY+O1xuICBwaXBlPEEsIEIsIEMsIEQsIEUsIEYsIEc+KFxuICAgIG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPixcbiAgICBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4sXG4gICAgb3AzOiBPcGVyYXRvckZ1bmN0aW9uPEIsIEM+LFxuICAgIG9wNDogT3BlcmF0b3JGdW5jdGlvbjxDLCBEPixcbiAgICBvcDU6IE9wZXJhdG9yRnVuY3Rpb248RCwgRT4sXG4gICAgb3A2OiBPcGVyYXRvckZ1bmN0aW9uPEUsIEY+LFxuICAgIG9wNzogT3BlcmF0b3JGdW5jdGlvbjxGLCBHPlxuICApOiBPYnNlcnZhYmxlPEc+O1xuICBwaXBlPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEg+KFxuICAgIG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPixcbiAgICBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4sXG4gICAgb3AzOiBPcGVyYXRvckZ1bmN0aW9uPEIsIEM+LFxuICAgIG9wNDogT3BlcmF0b3JGdW5jdGlvbjxDLCBEPixcbiAgICBvcDU6IE9wZXJhdG9yRnVuY3Rpb248RCwgRT4sXG4gICAgb3A2OiBPcGVyYXRvckZ1bmN0aW9uPEUsIEY+LFxuICAgIG9wNzogT3BlcmF0b3JGdW5jdGlvbjxGLCBHPixcbiAgICBvcDg6IE9wZXJhdG9yRnVuY3Rpb248RywgSD5cbiAgKTogT2JzZXJ2YWJsZTxIPjtcbiAgcGlwZTxBLCBCLCBDLCBELCBFLCBGLCBHLCBILCBJPihcbiAgICBvcDE6IE9wZXJhdG9yRnVuY3Rpb248VCwgQT4sXG4gICAgb3AyOiBPcGVyYXRvckZ1bmN0aW9uPEEsIEI+LFxuICAgIG9wMzogT3BlcmF0b3JGdW5jdGlvbjxCLCBDPixcbiAgICBvcDQ6IE9wZXJhdG9yRnVuY3Rpb248QywgRD4sXG4gICAgb3A1OiBPcGVyYXRvckZ1bmN0aW9uPEQsIEU+LFxuICAgIG9wNjogT3BlcmF0b3JGdW5jdGlvbjxFLCBGPixcbiAgICBvcDc6IE9wZXJhdG9yRnVuY3Rpb248RiwgRz4sXG4gICAgb3A4OiBPcGVyYXRvckZ1bmN0aW9uPEcsIEg+LFxuICAgIG9wOTogT3BlcmF0b3JGdW5jdGlvbjxILCBJPlxuICApOiBPYnNlcnZhYmxlPEk+O1xuICBwaXBlPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgsIEk+KFxuICAgIG9wMTogT3BlcmF0b3JGdW5jdGlvbjxULCBBPixcbiAgICBvcDI6IE9wZXJhdG9yRnVuY3Rpb248QSwgQj4sXG4gICAgb3AzOiBPcGVyYXRvckZ1bmN0aW9uPEIsIEM+LFxuICAgIG9wNDogT3BlcmF0b3JGdW5jdGlvbjxDLCBEPixcbiAgICBvcDU6IE9wZXJhdG9yRnVuY3Rpb248RCwgRT4sXG4gICAgb3A2OiBPcGVyYXRvckZ1bmN0aW9uPEUsIEY+LFxuICAgIG9wNzogT3BlcmF0b3JGdW5jdGlvbjxGLCBHPixcbiAgICBvcDg6IE9wZXJhdG9yRnVuY3Rpb248RywgSD4sXG4gICAgb3A5OiBPcGVyYXRvckZ1bmN0aW9uPEgsIEk+LFxuICAgIC4uLm9wZXJhdGlvbnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W11cbiAgKTogT2JzZXJ2YWJsZTx1bmtub3duPjtcbiAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblxuICAvKipcbiAgICogVXNlZCB0byBzdGl0Y2ggdG9nZXRoZXIgZnVuY3Rpb25hbCBvcGVyYXRvcnMgaW50byBhIGNoYWluLlxuICAgKiBAbWV0aG9kIHBpcGVcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIE9ic2VydmFibGUgcmVzdWx0IG9mIGFsbCBvZiB0aGUgb3BlcmF0b3JzIGhhdmluZ1xuICAgKiBiZWVuIGNhbGxlZCBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlIHBhc3NlZCBpbi5cbiAgICpcbiAgICogIyMgRXhhbXBsZVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBpbXBvcnQgeyBpbnRlcnZhbCwgZmlsdGVyLCBtYXAsIHNjYW4gfSBmcm9tICdyeGpzJztcbiAgICpcbiAgICogaW50ZXJ2YWwoMTAwMClcbiAgICogICAucGlwZShcbiAgICogICAgIGZpbHRlcih4ID0+IHggJSAyID09PSAwKSxcbiAgICogICAgIG1hcCh4ID0+IHggKyB4KSxcbiAgICogICAgIHNjYW4oKGFjYywgeCkgPT4gYWNjICsgeClcbiAgICogICApXG4gICAqICAgLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICogYGBgXG4gICAqL1xuICBwaXBlKC4uLm9wZXJhdGlvbnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W10pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KG9wZXJhdGlvbnMpKHRoaXMpO1xuICB9XG5cbiAgLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4gIC8qKiBAZGVwcmVjYXRlZCBSZXBsYWNlZCB3aXRoIHtAbGluayBmaXJzdFZhbHVlRnJvbX0gYW5kIHtAbGluayBsYXN0VmFsdWVGcm9tfS4gV2lsbCBiZSByZW1vdmVkIGluIHY4LiBEZXRhaWxzOiBodHRwczovL3J4anMuZGV2L2RlcHJlY2F0aW9ucy90by1wcm9taXNlICovXG4gIHRvUHJvbWlzZSgpOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+O1xuICAvKiogQGRlcHJlY2F0ZWQgUmVwbGFjZWQgd2l0aCB7QGxpbmsgZmlyc3RWYWx1ZUZyb219IGFuZCB7QGxpbmsgbGFzdFZhbHVlRnJvbX0uIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4gRGV0YWlsczogaHR0cHM6Ly9yeGpzLmRldi9kZXByZWNhdGlvbnMvdG8tcHJvbWlzZSAqL1xuICB0b1Byb21pc2UoUHJvbWlzZUN0b3I6IHR5cGVvZiBQcm9taXNlKTogUHJvbWlzZTxUIHwgdW5kZWZpbmVkPjtcbiAgLyoqIEBkZXByZWNhdGVkIFJlcGxhY2VkIHdpdGgge0BsaW5rIGZpcnN0VmFsdWVGcm9tfSBhbmQge0BsaW5rIGxhc3RWYWx1ZUZyb219LiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguIERldGFpbHM6IGh0dHBzOi8vcnhqcy5kZXYvZGVwcmVjYXRpb25zL3RvLXByb21pc2UgKi9cbiAgdG9Qcm9taXNlKFByb21pc2VDdG9yOiBQcm9taXNlQ29uc3RydWN0b3JMaWtlKTogUHJvbWlzZTxUIHwgdW5kZWZpbmVkPjtcbiAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHRoaXMgT2JzZXJ2YWJsZSBhbmQgZ2V0IGEgUHJvbWlzZSByZXNvbHZpbmcgb25cbiAgICogYGNvbXBsZXRlYCB3aXRoIHRoZSBsYXN0IGVtaXNzaW9uIChpZiBhbnkpLlxuICAgKlxuICAgKiAqKldBUk5JTkcqKjogT25seSB1c2UgdGhpcyB3aXRoIG9ic2VydmFibGVzIHlvdSAqa25vdyogd2lsbCBjb21wbGV0ZS4gSWYgdGhlIHNvdXJjZVxuICAgKiBvYnNlcnZhYmxlIGRvZXMgbm90IGNvbXBsZXRlLCB5b3Ugd2lsbCBlbmQgdXAgd2l0aCBhIHByb21pc2UgdGhhdCBpcyBodW5nIHVwLCBhbmRcbiAgICogcG90ZW50aWFsbHkgYWxsIG9mIHRoZSBzdGF0ZSBvZiBhbiBhc3luYyBmdW5jdGlvbiBoYW5naW5nIG91dCBpbiBtZW1vcnkuIFRvIGF2b2lkXG4gICAqIHRoaXMgc2l0dWF0aW9uLCBsb29rIGludG8gYWRkaW5nIHNvbWV0aGluZyBsaWtlIHtAbGluayB0aW1lb3V0fSwge0BsaW5rIHRha2V9LFxuICAgKiB7QGxpbmsgdGFrZVdoaWxlfSwgb3Ige0BsaW5rIHRha2VVbnRpbH0gYW1vbmdzdCBvdGhlcnMuXG4gICAqXG4gICAqIEBtZXRob2QgdG9Qcm9taXNlXG4gICAqIEBwYXJhbSBbcHJvbWlzZUN0b3JdIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gdXNlZCB0byBpbnN0YW50aWF0ZVxuICAgKiB0aGUgUHJvbWlzZVxuICAgKiBAcmV0dXJuIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGxhc3QgdmFsdWUgZW1pdCwgb3JcbiAgICogcmVqZWN0cyBvbiBhbiBlcnJvci4gSWYgdGhlcmUgd2VyZSBubyBlbWlzc2lvbnMsIFByb21pc2VcbiAgICogcmVzb2x2ZXMgd2l0aCB1bmRlZmluZWQuXG4gICAqIEBkZXByZWNhdGVkIFJlcGxhY2VkIHdpdGgge0BsaW5rIGZpcnN0VmFsdWVGcm9tfSBhbmQge0BsaW5rIGxhc3RWYWx1ZUZyb219LiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguIERldGFpbHM6IGh0dHBzOi8vcnhqcy5kZXYvZGVwcmVjYXRpb25zL3RvLXByb21pc2VcbiAgICovXG4gIHRvUHJvbWlzZShwcm9taXNlQ3Rvcj86IFByb21pc2VDb25zdHJ1Y3Rvckxpa2UpOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+IHtcbiAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcblxuICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IHZhbHVlOiBUIHwgdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zdWJzY3JpYmUoXG4gICAgICAgICh4OiBUKSA9PiAodmFsdWUgPSB4KSxcbiAgICAgICAgKGVycjogYW55KSA9PiByZWplY3QoZXJyKSxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZSh2YWx1ZSlcbiAgICAgICk7XG4gICAgfSkgYXMgUHJvbWlzZTxUIHwgdW5kZWZpbmVkPjtcbiAgfVxufVxuXG4vKipcbiAqIERlY2lkZXMgYmV0d2VlbiBhIHBhc3NlZCBwcm9taXNlIGNvbnN0cnVjdG9yIGZyb20gY29uc3VtaW5nIGNvZGUsXG4gKiBBIGRlZmF1bHQgY29uZmlndXJlZCBwcm9taXNlIGNvbnN0cnVjdG9yLCBhbmQgdGhlIG5hdGl2ZSBwcm9taXNlXG4gKiBjb25zdHJ1Y3RvciBhbmQgcmV0dXJucyBpdC4gSWYgbm90aGluZyBjYW4gYmUgZm91bmQsIGl0IHdpbGwgdGhyb3dcbiAqIGFuIGVycm9yLlxuICogQHBhcmFtIHByb21pc2VDdG9yIFRoZSBvcHRpb25hbCBwcm9taXNlIGNvbnN0cnVjdG9yIHRvIHBhc3NlZCBieSBjb25zdW1pbmcgY29kZVxuICovXG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3RvcjogUHJvbWlzZUNvbnN0cnVjdG9yTGlrZSB8IHVuZGVmaW5lZCkge1xuICByZXR1cm4gcHJvbWlzZUN0b3IgPz8gY29uZmlnLlByb21pc2UgPz8gUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaXNPYnNlcnZlcjxUPih2YWx1ZTogYW55KTogdmFsdWUgaXMgT2JzZXJ2ZXI8VD4ge1xuICByZXR1cm4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS5uZXh0KSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmVycm9yKSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmNvbXBsZXRlKTtcbn1cblxuZnVuY3Rpb24gaXNTdWJzY3JpYmVyPFQ+KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTdWJzY3JpYmVyPFQ+IHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHx8IChpc09ic2VydmVyKHZhbHVlKSAmJiBpc1N1YnNjcmlwdGlvbih2YWx1ZSkpO1xufVxuIiwgImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IE9wZXJhdG9yRnVuY3Rpb24gfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9pc0Z1bmN0aW9uJztcblxuLyoqXG4gKiBVc2VkIHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYW4gT2JzZXJ2YWJsZSB3aXRoIGEgbGlmdCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0xpZnQoc291cmNlOiBhbnkpOiBzb3VyY2UgaXMgeyBsaWZ0OiBJbnN0YW5jZVR5cGU8dHlwZW9mIE9ic2VydmFibGU+WydsaWZ0J10gfSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHNvdXJjZT8ubGlmdCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBgT3BlcmF0b3JGdW5jdGlvbmAuIFVzZWQgdG8gZGVmaW5lIG9wZXJhdG9ycyB0aHJvdWdob3V0IHRoZSBsaWJyYXJ5IGluIGEgY29uY2lzZSB3YXkuXG4gKiBAcGFyYW0gaW5pdCBUaGUgbG9naWMgdG8gY29ubmVjdCB0aGUgbGlmdGVkU291cmNlIHRvIHRoZSBzdWJzY3JpYmVyIGF0IHRoZSBtb21lbnQgb2Ygc3Vic2NyaXB0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3BlcmF0ZTxULCBSPihcbiAgaW5pdDogKGxpZnRlZFNvdXJjZTogT2JzZXJ2YWJsZTxUPiwgc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxSPikgPT4gKCgpID0+IHZvaWQpIHwgdm9pZFxuKTogT3BlcmF0b3JGdW5jdGlvbjxULCBSPiB7XG4gIHJldHVybiAoc291cmNlOiBPYnNlcnZhYmxlPFQ+KSA9PiB7XG4gICAgaWYgKGhhc0xpZnQoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KGZ1bmN0aW9uICh0aGlzOiBTdWJzY3JpYmVyPFI+LCBsaWZ0ZWRTb3VyY2U6IE9ic2VydmFibGU8VD4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gaW5pdChsaWZ0ZWRTb3VyY2UsIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gbGlmdCB1bmtub3duIE9ic2VydmFibGUgdHlwZScpO1xuICB9O1xufVxuIiwgImltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGFuIGBPcGVyYXRvclN1YnNjcmliZXJgLlxuICogQHBhcmFtIGRlc3RpbmF0aW9uIFRoZSBkb3duc3RyZWFtIHN1YnNjcmliZXIuXG4gKiBAcGFyYW0gb25OZXh0IEhhbmRsZXMgbmV4dCB2YWx1ZXMsIG9ubHkgY2FsbGVkIGlmIHRoaXMgc3Vic2NyaWJlciBpcyBub3Qgc3RvcHBlZCBvciBjbG9zZWQuIEFueVxuICogZXJyb3IgdGhhdCBvY2N1cnMgaW4gdGhpcyBmdW5jdGlvbiBpcyBjYXVnaHQgYW5kIHNlbnQgdG8gdGhlIGBlcnJvcmAgbWV0aG9kIG9mIHRoaXMgc3Vic2NyaWJlci5cbiAqIEBwYXJhbSBvbkVycm9yIEhhbmRsZXMgZXJyb3JzIGZyb20gdGhlIHN1YnNjcmlwdGlvbiwgYW55IGVycm9ycyB0aGF0IG9jY3VyIGluIHRoaXMgaGFuZGxlciBhcmUgY2F1Z2h0XG4gKiBhbmQgc2VuZCB0byB0aGUgYGRlc3RpbmF0aW9uYCBlcnJvciBoYW5kbGVyLlxuICogQHBhcmFtIG9uQ29tcGxldGUgSGFuZGxlcyBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzdWJzY3JpcHRpb24uIEFueSBlcnJvcnMgdGhhdCBvY2N1ciBpblxuICogdGhpcyBoYW5kbGVyIGFyZSBzZW50IHRvIHRoZSBgZGVzdGluYXRpb25gIGVycm9yIGhhbmRsZXIuXG4gKiBAcGFyYW0gb25GaW5hbGl6ZSBBZGRpdGlvbmFsIHRlYXJkb3duIGxvZ2ljIGhlcmUuIFRoaXMgd2lsbCBvbmx5IGJlIGNhbGxlZCBvbiB0ZWFyZG93biBpZiB0aGVcbiAqIHN1YnNjcmliZXIgaXRzZWxmIGlzIG5vdCBhbHJlYWR5IGNsb3NlZC4gVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHRlYXJkb3duIGxvZ2ljIGlzIGV4ZWN1dGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyPFQ+KFxuICBkZXN0aW5hdGlvbjogU3Vic2NyaWJlcjxhbnk+LFxuICBvbk5leHQ/OiAodmFsdWU6IFQpID0+IHZvaWQsXG4gIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICBvbkVycm9yPzogKGVycjogYW55KSA9PiB2b2lkLFxuICBvbkZpbmFsaXplPzogKCkgPT4gdm9pZFxuKTogU3Vic2NyaWJlcjxUPiB7XG4gIHJldHVybiBuZXcgT3BlcmF0b3JTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvbk5leHQsIG9uQ29tcGxldGUsIG9uRXJyb3IsIG9uRmluYWxpemUpO1xufVxuXG4vKipcbiAqIEEgZ2VuZXJpYyBoZWxwZXIgZm9yIGFsbG93aW5nIG9wZXJhdG9ycyB0byBiZSBjcmVhdGVkIHdpdGggYSBTdWJzY3JpYmVyIGFuZFxuICogdXNlIGNsb3N1cmVzIHRvIGNhcHR1cmUgbmVjZXNzYXJ5IHN0YXRlIGZyb20gdGhlIG9wZXJhdG9yIGZ1bmN0aW9uIGl0c2VsZi5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZXJhdG9yU3Vic2NyaWJlcjxUPiBleHRlbmRzIFN1YnNjcmliZXI8VD4ge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhbiBgT3BlcmF0b3JTdWJzY3JpYmVyYC5cbiAgICogQHBhcmFtIGRlc3RpbmF0aW9uIFRoZSBkb3duc3RyZWFtIHN1YnNjcmliZXIuXG4gICAqIEBwYXJhbSBvbk5leHQgSGFuZGxlcyBuZXh0IHZhbHVlcywgb25seSBjYWxsZWQgaWYgdGhpcyBzdWJzY3JpYmVyIGlzIG5vdCBzdG9wcGVkIG9yIGNsb3NlZC4gQW55XG4gICAqIGVycm9yIHRoYXQgb2NjdXJzIGluIHRoaXMgZnVuY3Rpb24gaXMgY2F1Z2h0IGFuZCBzZW50IHRvIHRoZSBgZXJyb3JgIG1ldGhvZCBvZiB0aGlzIHN1YnNjcmliZXIuXG4gICAqIEBwYXJhbSBvbkVycm9yIEhhbmRsZXMgZXJyb3JzIGZyb20gdGhlIHN1YnNjcmlwdGlvbiwgYW55IGVycm9ycyB0aGF0IG9jY3VyIGluIHRoaXMgaGFuZGxlciBhcmUgY2F1Z2h0XG4gICAqIGFuZCBzZW5kIHRvIHRoZSBgZGVzdGluYXRpb25gIGVycm9yIGhhbmRsZXIuXG4gICAqIEBwYXJhbSBvbkNvbXBsZXRlIEhhbmRsZXMgY29tcGxldGlvbiBub3RpZmljYXRpb24gZnJvbSB0aGUgc3Vic2NyaXB0aW9uLiBBbnkgZXJyb3JzIHRoYXQgb2NjdXIgaW5cbiAgICogdGhpcyBoYW5kbGVyIGFyZSBzZW50IHRvIHRoZSBgZGVzdGluYXRpb25gIGVycm9yIGhhbmRsZXIuXG4gICAqIEBwYXJhbSBvbkZpbmFsaXplIEFkZGl0aW9uYWwgZmluYWxpemF0aW9uIGxvZ2ljIGhlcmUuIFRoaXMgd2lsbCBvbmx5IGJlIGNhbGxlZCBvbiBmaW5hbGl6YXRpb24gaWYgdGhlXG4gICAqIHN1YnNjcmliZXIgaXRzZWxmIGlzIG5vdCBhbHJlYWR5IGNsb3NlZC4gVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIGZpbmFsaXphdGlvbiBsb2dpYyBpcyBleGVjdXRlZC5cbiAgICogQHBhcmFtIHNob3VsZFVuc3Vic2NyaWJlIEFuIG9wdGlvbmFsIGNoZWNrIHRvIHNlZSBpZiBhbiB1bnN1YnNjcmliZSBjYWxsIHNob3VsZCB0cnVseSB1bnN1YnNjcmliZS5cbiAgICogTk9URTogVGhpcyBjdXJyZW50bHkgKipPTkxZKiogZXhpc3RzIHRvIHN1cHBvcnQgdGhlIHN0cmFuZ2UgYmVoYXZpb3Igb2Yge0BsaW5rIGdyb3VwQnl9LCB3aGVyZSB1bnN1YnNjcmlwdGlvblxuICAgKiB0byB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgZG9lcyBub3QgYWN0dWFsbHkgZGlzY29ubmVjdCBmcm9tIHRoZSBzb3VyY2UgaWYgdGhlcmUgYXJlIGFjdGl2ZSBzdWJzY3JpcHRpb25zXG4gICAqIHRvIGFueSBncm91cGVkIG9ic2VydmFibGUuIChETyBOT1QgRVhQT1NFIE9SIFVTRSBFWFRFUk5BTExZISEhKVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgZGVzdGluYXRpb246IFN1YnNjcmliZXI8YW55PixcbiAgICBvbk5leHQ/OiAodmFsdWU6IFQpID0+IHZvaWQsXG4gICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgb25FcnJvcj86IChlcnI6IGFueSkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uRmluYWxpemU/OiAoKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgc2hvdWxkVW5zdWJzY3JpYmU/OiAoKSA9PiBib29sZWFuXG4gICkge1xuICAgIC8vIEl0J3MgaW1wb3J0YW50IC0gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgLSB0aGF0IGFsbCBvZiB0aGlzIGNsYXNzJ3NcbiAgICAvLyBtZW1iZXJzIGFyZSBpbml0aWFsaXplZCBhbmQgdGhhdCB0aGV5IGFyZSBhbHdheXMgaW5pdGlhbGl6ZWQgaW4gdGhlIHNhbWVcbiAgICAvLyBvcmRlci4gVGhpcyB3aWxsIGVuc3VyZSB0aGF0IGFsbCBPcGVyYXRvclN1YnNjcmliZXIgaW5zdGFuY2VzIGhhdmUgdGhlXG4gICAgLy8gc2FtZSBoaWRkZW4gY2xhc3MgaW4gVjguIFRoaXMsIGluIHR1cm4sIHdpbGwgaGVscCBrZWVwIHRoZSBudW1iZXIgb2ZcbiAgICAvLyBoaWRkZW4gY2xhc3NlcyBpbnZvbHZlZCBpbiBwcm9wZXJ0eSBhY2Nlc3NlcyB3aXRoaW4gdGhlIGJhc2UgY2xhc3MgYXNcbiAgICAvLyBsb3cgYXMgcG9zc2libGUuIElmIHRoZSBudW1iZXIgb2YgaGlkZGVuIGNsYXNzZXMgaW52b2x2ZWQgZXhjZWVkcyBmb3VyLFxuICAgIC8vIHRoZSBwcm9wZXJ0eSBhY2Nlc3NlcyB3aWxsIGJlY29tZSBtZWdhbW9ycGhpYyBhbmQgcGVyZm9ybWFuY2UgcGVuYWx0aWVzXG4gICAgLy8gd2lsbCBiZSBpbmN1cnJlZCAtIGkuZS4gaW5saW5lIGNhY2hlcyB3b24ndCBiZSB1c2VkLlxuICAgIC8vXG4gICAgLy8gVGhlIHJlYXNvbnMgZm9yIGVuc3VyaW5nIGFsbCBpbnN0YW5jZXMgaGF2ZSB0aGUgc2FtZSBoaWRkZW4gY2xhc3MgYXJlXG4gICAgLy8gZnVydGhlciBkaXNjdXNzZWQgaW4gdGhpcyBibG9nIHBvc3QgZnJvbSBCZW5lZGlrdCBNZXVyZXI6XG4gICAgLy8gaHR0cHM6Ly9iZW5lZGlrdG1ldXJlci5kZS8yMDE4LzAzLzIzL2ltcGFjdC1vZi1wb2x5bW9ycGhpc20tb24tY29tcG9uZW50LWJhc2VkLWZyYW1ld29ya3MtbGlrZS1yZWFjdC9cbiAgICBzdXBlcihkZXN0aW5hdGlvbik7XG4gICAgdGhpcy5fbmV4dCA9IG9uTmV4dFxuICAgICAgPyBmdW5jdGlvbiAodGhpczogT3BlcmF0b3JTdWJzY3JpYmVyPFQ+LCB2YWx1ZTogVCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvbk5leHQodmFsdWUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDogc3VwZXIuX25leHQ7XG4gICAgdGhpcy5fZXJyb3IgPSBvbkVycm9yXG4gICAgICA/IGZ1bmN0aW9uICh0aGlzOiBPcGVyYXRvclN1YnNjcmliZXI8VD4sIGVycjogYW55KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIFNlbmQgYW55IGVycm9ycyB0aGF0IG9jY3VyIGRvd24gc3RyZWFtLlxuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gRW5zdXJlIGZpbmFsaXphdGlvbi5cbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDogc3VwZXIuX2Vycm9yO1xuICAgIHRoaXMuX2NvbXBsZXRlID0gb25Db21wbGV0ZVxuICAgICAgPyBmdW5jdGlvbiAodGhpczogT3BlcmF0b3JTdWJzY3JpYmVyPFQ+KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIFNlbmQgYW55IGVycm9ycyB0aGF0IG9jY3VyIGRvd24gc3RyZWFtLlxuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gRW5zdXJlIGZpbmFsaXphdGlvbi5cbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDogc3VwZXIuX2NvbXBsZXRlO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoKSB7XG4gICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgY29uc3QgeyBjbG9zZWQgfSA9IHRoaXM7XG4gICAgICBzdXBlci51bnN1YnNjcmliZSgpO1xuICAgICAgLy8gRXhlY3V0ZSBhZGRpdGlvbmFsIHRlYXJkb3duIGlmIHdlIGhhdmUgYW55IGFuZCB3ZSBkaWRuJ3QgYWxyZWFkeSBkbyBzby5cbiAgICAgICFjbG9zZWQgJiYgdGhpcy5vbkZpbmFsaXplPy4oKTtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVFcnJvckNsYXNzIH0gZnJvbSAnLi9jcmVhdGVFcnJvckNsYXNzJztcblxuZXhwb3J0IGludGVyZmFjZSBPYmplY3RVbnN1YnNjcmliZWRFcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JDdG9yIHtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIEludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbC4gRG8gbm90IGNvbnN0cnVjdCBlcnJvciBpbnN0YW5jZXMuXG4gICAqIENhbm5vdCBiZSB0YWdnZWQgYXMgaW50ZXJuYWw6IGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdGl2ZVgvcnhqcy9pc3N1ZXMvNjI2OVxuICAgKi9cbiAgbmV3ICgpOiBPYmplY3RVbnN1YnNjcmliZWRFcnJvcjtcbn1cblxuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBhY3Rpb24gaXMgaW52YWxpZCBiZWNhdXNlIHRoZSBvYmplY3QgaGFzIGJlZW5cbiAqIHVuc3Vic2NyaWJlZC5cbiAqXG4gKiBAc2VlIHtAbGluayBTdWJqZWN0fVxuICogQHNlZSB7QGxpbmsgQmVoYXZpb3JTdWJqZWN0fVxuICpcbiAqIEBjbGFzcyBPYmplY3RVbnN1YnNjcmliZWRFcnJvclxuICovXG5leHBvcnQgY29uc3QgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I6IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yQ3RvciA9IGNyZWF0ZUVycm9yQ2xhc3MoXG4gIChfc3VwZXIpID0+XG4gICAgZnVuY3Rpb24gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsKHRoaXM6IGFueSkge1xuICAgICAgX3N1cGVyKHRoaXMpO1xuICAgICAgdGhpcy5uYW1lID0gJ09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbiAgICAgIHRoaXMubWVzc2FnZSA9ICdvYmplY3QgdW5zdWJzY3JpYmVkJztcbiAgICB9XG4pO1xuIiwgImltcG9ydCB7IE9wZXJhdG9yIH0gZnJvbSAnLi9PcGVyYXRvcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBFTVBUWV9TVUJTQ1JJUFRJT04gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBPYnNlcnZlciwgU3Vic2NyaXB0aW9uTGlrZSwgVGVhcmRvd25Mb2dpYyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgfSBmcm9tICcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuaW1wb3J0IHsgYXJyUmVtb3ZlIH0gZnJvbSAnLi91dGlsL2FyclJlbW92ZSc7XG5pbXBvcnQgeyBlcnJvckNvbnRleHQgfSBmcm9tICcuL3V0aWwvZXJyb3JDb250ZXh0JztcblxuLyoqXG4gKiBBIFN1YmplY3QgaXMgYSBzcGVjaWFsIHR5cGUgb2YgT2JzZXJ2YWJsZSB0aGF0IGFsbG93cyB2YWx1ZXMgdG8gYmVcbiAqIG11bHRpY2FzdGVkIHRvIG1hbnkgT2JzZXJ2ZXJzLiBTdWJqZWN0cyBhcmUgbGlrZSBFdmVudEVtaXR0ZXJzLlxuICpcbiAqIEV2ZXJ5IFN1YmplY3QgaXMgYW4gT2JzZXJ2YWJsZSBhbmQgYW4gT2JzZXJ2ZXIuIFlvdSBjYW4gc3Vic2NyaWJlIHRvIGFcbiAqIFN1YmplY3QsIGFuZCB5b3UgY2FuIGNhbGwgbmV4dCB0byBmZWVkIHZhbHVlcyBhcyB3ZWxsIGFzIGVycm9yIGFuZCBjb21wbGV0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN1YmplY3Q8VD4gZXh0ZW5kcyBPYnNlcnZhYmxlPFQ+IGltcGxlbWVudHMgU3Vic2NyaXB0aW9uTGlrZSB7XG4gIGNsb3NlZCA9IGZhbHNlO1xuXG4gIHByaXZhdGUgY3VycmVudE9ic2VydmVyczogT2JzZXJ2ZXI8VD5bXSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC4gKi9cbiAgb2JzZXJ2ZXJzOiBPYnNlcnZlcjxUPltdID0gW107XG4gIC8qKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC4gKi9cbiAgaXNTdG9wcGVkID0gZmFsc2U7XG4gIC8qKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC4gKi9cbiAgaGFzRXJyb3IgPSBmYWxzZTtcbiAgLyoqIEBkZXByZWNhdGVkIEludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZSBkaXJlY3RseS4gV2lsbCBiZSBtYWRlIGludGVybmFsIGluIHY4LiAqL1xuICB0aHJvd25FcnJvcjogYW55ID0gbnVsbDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFwic3ViamVjdFwiIGJ5IGJhc2ljYWxseSBnbHVpbmcgYW4gb2JzZXJ2ZXIgdG8gYW4gb2JzZXJ2YWJsZS5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGRlcHJlY2F0ZWQgUmVjb21tZW5kZWQgeW91IGRvIG5vdCB1c2UuIFdpbGwgYmUgcmVtb3ZlZCBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuIFBsYW5zIGZvciByZXBsYWNlbWVudCBzdGlsbCB1bmRlciBkaXNjdXNzaW9uLlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZTogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkgPSA8VD4oZGVzdGluYXRpb246IE9ic2VydmVyPFQ+LCBzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBBbm9ueW1vdXNTdWJqZWN0PFQ+ID0+IHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3Q8VD4oZGVzdGluYXRpb24sIHNvdXJjZSk7XG4gIH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gTk9URTogVGhpcyBtdXN0IGJlIGhlcmUgdG8gb2JzY3VyZSBPYnNlcnZhYmxlJ3MgY29uc3RydWN0b3IuXG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuIFdpbGwgYmUgbWFkZSBpbnRlcm5hbCBpbiB2OC4gKi9cbiAgbGlmdDxSPihvcGVyYXRvcjogT3BlcmF0b3I8VCwgUj4pOiBPYnNlcnZhYmxlPFI+IHtcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7XG4gICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yIGFzIGFueTtcbiAgICByZXR1cm4gc3ViamVjdCBhcyBhbnk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCBfdGhyb3dJZkNsb3NlZCgpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgIH1cbiAgfVxuXG4gIG5leHQodmFsdWU6IFQpIHtcbiAgICBlcnJvckNvbnRleHQoKCkgPT4ge1xuICAgICAgdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudE9ic2VydmVycykge1xuICAgICAgICAgIHRoaXMuY3VycmVudE9ic2VydmVycyA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5jdXJyZW50T2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGVycm9yKGVycjogYW55KSB7XG4gICAgZXJyb3JDb250ZXh0KCgpID0+IHtcbiAgICAgIHRoaXMuX3Rocm93SWZDbG9zZWQoKTtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50aHJvd25FcnJvciA9IGVycjtcbiAgICAgICAgY29uc3QgeyBvYnNlcnZlcnMgfSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChvYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgb2JzZXJ2ZXJzLnNoaWZ0KCkhLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIGVycm9yQ29udGV4dCgoKSA9PiB7XG4gICAgICB0aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyBvYnNlcnZlcnMgfSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChvYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgb2JzZXJ2ZXJzLnNoaWZ0KCkhLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIHRoaXMuaXNTdG9wcGVkID0gdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgIHRoaXMub2JzZXJ2ZXJzID0gdGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbCE7XG4gIH1cblxuICBnZXQgb2JzZXJ2ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzPy5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcm90ZWN0ZWQgX3RyeVN1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPFQ+KTogVGVhcmRvd25Mb2dpYyB7XG4gICAgdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgIHJldHVybiBzdXBlci5fdHJ5U3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcm90ZWN0ZWQgX3N1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPFQ+KTogU3Vic2NyaXB0aW9uIHtcbiAgICB0aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgdGhpcy5fY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyhzdWJzY3JpYmVyKTtcbiAgICByZXR1cm4gdGhpcy5faW5uZXJTdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCBfaW5uZXJTdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxhbnk+KSB7XG4gICAgY29uc3QgeyBoYXNFcnJvciwgaXNTdG9wcGVkLCBvYnNlcnZlcnMgfSA9IHRoaXM7XG4gICAgaWYgKGhhc0Vycm9yIHx8IGlzU3RvcHBlZCkge1xuICAgICAgcmV0dXJuIEVNUFRZX1NVQlNDUklQVElPTjtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbDtcbiAgICBvYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbigoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsO1xuICAgICAgYXJyUmVtb3ZlKG9ic2VydmVycywgc3Vic2NyaWJlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCBfY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyhzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pIHtcbiAgICBjb25zdCB7IGhhc0Vycm9yLCB0aHJvd25FcnJvciwgaXNTdG9wcGVkIH0gPSB0aGlzO1xuICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgc3Vic2NyaWJlci5lcnJvcih0aHJvd25FcnJvcik7XG4gICAgfSBlbHNlIGlmIChpc1N0b3BwZWQpIHtcbiAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlIHdpdGggdGhpcyBTdWJqZWN0IGFzIHRoZSBzb3VyY2UuIFlvdSBjYW4gZG8gdGhpc1xuICAgKiB0byBjcmVhdGUgY3VzdG9tIE9ic2VydmVyLXNpZGUgbG9naWMgb2YgdGhlIFN1YmplY3QgYW5kIGNvbmNlYWwgaXQgZnJvbVxuICAgKiBjb2RlIHRoYXQgdXNlcyB0aGUgT2JzZXJ2YWJsZS5cbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gT2JzZXJ2YWJsZSB0aGF0IHRoZSBTdWJqZWN0IGNhc3RzIHRvXG4gICAqL1xuICBhc09ic2VydmFibGUoKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3Qgb2JzZXJ2YWJsZTogYW55ID0gbmV3IE9ic2VydmFibGU8VD4oKTtcbiAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG9ic2VydmFibGU7XG4gIH1cbn1cblxuLyoqXG4gKiBAY2xhc3MgQW5vbnltb3VzU3ViamVjdDxUPlxuICovXG5leHBvcnQgY2xhc3MgQW5vbnltb3VzU3ViamVjdDxUPiBleHRlbmRzIFN1YmplY3Q8VD4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICAvKiogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlIGRpcmVjdGx5LiBXaWxsIGJlIG1hZGUgaW50ZXJuYWwgaW4gdjguICovXG4gICAgcHVibGljIGRlc3RpbmF0aW9uPzogT2JzZXJ2ZXI8VD4sXG4gICAgc291cmNlPzogT2JzZXJ2YWJsZTxUPlxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICB9XG5cbiAgbmV4dCh2YWx1ZTogVCkge1xuICAgIHRoaXMuZGVzdGluYXRpb24/Lm5leHQ/Lih2YWx1ZSk7XG4gIH1cblxuICBlcnJvcihlcnI6IGFueSkge1xuICAgIHRoaXMuZGVzdGluYXRpb24/LmVycm9yPy4oZXJyKTtcbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIHRoaXMuZGVzdGluYXRpb24/LmNvbXBsZXRlPy4oKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJvdGVjdGVkIF9zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPik6IFN1YnNjcmlwdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlPy5zdWJzY3JpYmUoc3Vic2NyaWJlcikgPz8gRU1QVFlfU1VCU0NSSVBUSU9OO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgT3BlcmF0b3JGdW5jdGlvbiwgTW9ub1R5cGVPcGVyYXRvckZ1bmN0aW9uLCBUcnV0aHlUeXBlc09mIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgb3BlcmF0ZSB9IGZyb20gJy4uL3V0aWwvbGlmdCc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5cbi8qKiBAZGVwcmVjYXRlZCBVc2UgYSBjbG9zdXJlIGluc3RlYWQgb2YgYSBgdGhpc0FyZ2AuIFNpZ25hdHVyZXMgYWNjZXB0aW5nIGEgYHRoaXNBcmdgIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VCwgUyBleHRlbmRzIFQsIEE+KHByZWRpY2F0ZTogKHRoaXM6IEEsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiB2YWx1ZSBpcyBTLCB0aGlzQXJnOiBBKTogT3BlcmF0b3JGdW5jdGlvbjxULCBTPjtcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VCwgUyBleHRlbmRzIFQ+KHByZWRpY2F0ZTogKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiB2YWx1ZSBpcyBTKTogT3BlcmF0b3JGdW5jdGlvbjxULCBTPjtcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4ocHJlZGljYXRlOiBCb29sZWFuQ29uc3RydWN0b3IpOiBPcGVyYXRvckZ1bmN0aW9uPFQsIFRydXRoeVR5cGVzT2Y8VD4+O1xuLyoqIEBkZXByZWNhdGVkIFVzZSBhIGNsb3N1cmUgaW5zdGVhZCBvZiBhIGB0aGlzQXJnYC4gU2lnbmF0dXJlcyBhY2NlcHRpbmcgYSBgdGhpc0FyZ2Agd2lsbCBiZSByZW1vdmVkIGluIHY4LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxULCBBPihwcmVkaWNhdGU6ICh0aGlzOiBBLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbiwgdGhpc0FyZzogQSk6IE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbjxUPjtcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4ocHJlZGljYXRlOiAodmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IGJvb2xlYW4pOiBNb25vVHlwZU9wZXJhdG9yRnVuY3Rpb248VD47XG5cbi8qKlxuICogRmlsdGVyIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IG9ubHkgZW1pdHRpbmcgdGhvc2UgdGhhdFxuICogc2F0aXNmeSBhIHNwZWNpZmllZCBwcmVkaWNhdGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxpa2VcbiAqIFtBcnJheS5wcm90b3R5cGUuZmlsdGVyKCldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbHRlciksXG4gKiBpdCBvbmx5IGVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIGlmIGl0IHBhc3NlcyBhIGNyaXRlcmlvbiBmdW5jdGlvbi48L3NwYW4+XG4gKlxuICogIVtdKGZpbHRlci5wbmcpXG4gKlxuICogU2ltaWxhciB0byB0aGUgd2VsbC1rbm93biBgQXJyYXkucHJvdG90eXBlLmZpbHRlcmAgbWV0aG9kLCB0aGlzIG9wZXJhdG9yXG4gKiB0YWtlcyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHBhc3NlcyB0aGVtIHRocm91Z2ggYSBgcHJlZGljYXRlYFxuICogZnVuY3Rpb24gYW5kIG9ubHkgZW1pdHMgdGhvc2UgdmFsdWVzIHRoYXQgeWllbGRlZCBgdHJ1ZWAuXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIEVtaXQgb25seSBjbGljayBldmVudHMgd2hvc2UgdGFyZ2V0IHdhcyBhIERJViBlbGVtZW50XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZyb21FdmVudCwgZmlsdGVyIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gKiBkaXYuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMjAwcHg7IGhlaWdodDogMjAwcHg7IGJhY2tncm91bmQ6ICMwOWM7JztcbiAqIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAqXG4gKiBjb25zdCBjbGlja3MgPSBmcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogY29uc3QgY2xpY2tzT25EaXZzID0gY2xpY2tzLnBpcGUoZmlsdGVyKGV2ID0+ICg8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0KS50YWdOYW1lID09PSAnRElWJykpO1xuICogY2xpY2tzT25EaXZzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqIGBgYFxuICpcbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuICogQHNlZSB7QGxpbmsgZGlzdGluY3RVbnRpbENoYW5nZWR9XG4gKiBAc2VlIHtAbGluayBkaXN0aW5jdFVudGlsS2V5Q2hhbmdlZH1cbiAqIEBzZWUge0BsaW5rIGlnbm9yZUVsZW1lbnRzfVxuICogQHNlZSB7QGxpbmsgcGFydGl0aW9ufVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAcGFyYW0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuICogZXZhbHVhdGVzIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGl0IHJldHVybnMgYHRydWVgLFxuICogdGhlIHZhbHVlIGlzIGVtaXR0ZWQsIGlmIGBmYWxzZWAgdGhlIHZhbHVlIGlzIG5vdCBwYXNzZWQgdG8gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2VcbiAqIGVtaXNzaW9uIHRoYXQgaGFzIGhhcHBlbmVkIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIHN0YXJ0aW5nIGZyb20gdGhlIG51bWJlclxuICogYDBgLlxuICogQHBhcmFtIHRoaXNBcmcgQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gZGV0ZXJtaW5lIHRoZSB2YWx1ZSBvZiBgdGhpc2BcbiAqIGluIHRoZSBgcHJlZGljYXRlYCBmdW5jdGlvbi5cbiAqIEByZXR1cm4gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNhdGlzZnkgdGhlIHNwZWNpZmllZCBgcHJlZGljYXRlYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihwcmVkaWNhdGU6ICh2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbiwgdGhpc0FyZz86IGFueSk6IE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbjxUPiB7XG4gIHJldHVybiBvcGVyYXRlKChzb3VyY2UsIHN1YnNjcmliZXIpID0+IHtcbiAgICAvLyBBbiBpbmRleCBwYXNzZWQgdG8gb3VyIHByZWRpY2F0ZSBmdW5jdGlvbiBvbiBlYWNoIGNhbGwuXG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIC8vIFN1YnNjcmliZSB0byB0aGUgc291cmNlLCBhbGwgZXJyb3JzIGFuZCBjb21wbGV0aW9ucyBhcmVcbiAgICAvLyBmb3J3YXJkZWQgdG8gdGhlIGNvbnN1bWVyLlxuICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAvLyBDYWxsIHRoZSBwcmVkaWNhdGUgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYHRoaXNgIGNvbnRleHQsXG4gICAgICAvLyBpZiB0aGUgcHJlZGljYXRlIHJldHVybnMgYHRydWVgLCB0aGVuIHNlbmQgdGhlIHZhbHVlXG4gICAgICAvLyB0byB0aGUgY29uc3VtZXIuXG4gICAgICBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgKHZhbHVlKSA9PiBwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgrKykgJiYgc3Vic2NyaWJlci5uZXh0KHZhbHVlKSlcbiAgICApO1xuICB9KTtcbn1cbiIsICJpbXBvcnQge0VtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XHJcbmltcG9ydCB7UmVhZG9ubHlWZWMzfSBmcm9tICdnbC1tYXRyaXgnO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge2dsb2JhbEF1ZGlvTWFuYWdlcn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvc3BhdGlhbC1hdWRpbyc7XHJcblxyXG5leHBvcnQgZW51bSBTdGF0ZSB7XHJcbiAgICB3ZWxjb21lID0gMCxcclxuICAgIHBsYXlpbmcgPSAxLFxyXG4gICAgZ2FtZU92ZXIgPSAyLFxyXG4gICAgbm90SW5WUiA9IDMsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNvdW5kcyB7XHJcbiAgICBleHBsb3Npb24sXHJcbiAgICBnYW1lT3ZlcixcclxuICAgIHNob290LFxyXG59XHJcblxyXG5jbGFzcyBHYW1lU3RhdGUge1xyXG4gICAgc3RhdGVTdWJqZWN0OiBTdWJqZWN0PFN0YXRlPjtcclxuICAgIGlzSW5WUlN1YmplY3Q6IFN1YmplY3Q8Ym9vbGVhbj47XHJcblxyXG4gICAgcHJpdmF0ZSBfc3RhdGU6IFN0YXRlID0gU3RhdGUubm90SW5WUjtcclxuICAgIHB1YmxpYyBnZXQgc3RhdGUoKTogU3RhdGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0IHN0YXRlKG5ld1N0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlID0gbmV3U3RhdGU7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YmplY3QubmV4dChuZXdTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3VycmVudFdhdmUgPSAwO1xyXG4gICAgcHVibGljIGdldCBjdXJyZW50V2F2ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50V2F2ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgY3VycmVudFdhdmUodjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFdhdmUgPSB2O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3Njb3JlID0gMDtcclxuICAgIHB1YmxpYyBnZXQgc2NvcmUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2NvcmU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNjb3JlKHY6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3Njb3JlID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pc0luVlIgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBnZXQgaXNJblZSKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0luVlI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGlzSW5WUih2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5faXNJblZSID0gdjtcclxuICAgICAgICB0aGlzLmlzSW5WUlN1YmplY3QubmV4dCh2KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnN0YXRlU3ViamVjdCA9IG5ldyBTdWJqZWN0PFN0YXRlPigpO1xyXG4gICAgICAgIHRoaXMuaXNJblZSU3ViamVjdCA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShTdGF0ZS5ub3RJblZSKTtcclxuICAgICAgICAvLyBpZiAod2luZG93LkF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3RhdGUoc3RhdGU6IFN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNwYXduTWlzc2lsZTogRW1pdHRlcjxcclxuICAgICAgICB7ZGlyZWN0aW9uOiBSZWFkb25seVZlYzMgfCB1bmRlZmluZWQ7IHBvc2l0aW9uOiBSZWFkb25seVZlYzMgfCB1bmRlZmluZWR9W11cclxuICAgID4gPSBuZXcgRW1pdHRlcigpO1xyXG5cclxuICAgIG5ld0dhbWU6IEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xyXG4gICAgaW52YWRlckhpdDogRW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTcGFjZSBvciB0cmlnZ2VyIGlzIHByZXNzZWQsIGZpcmUgYSBidWxsZXQgb3Igc3RhcnQgdGhlIGdhbWVcclxuICAgICAqL1xyXG4gICAgZmlyZShkaXJlY3Rpb246IFJlYWRvbmx5VmVjMyB8IHVuZGVmaW5lZCwgcG9zaXRpb246IFJlYWRvbmx5VmVjMyB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFN0YXRlLm5vdEluVlI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0ZS53ZWxjb21lOlxyXG4gICAgICAgICAgICBjYXNlIFN0YXRlLmdhbWVPdmVyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShTdGF0ZS5wbGF5aW5nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdHYW1lLm5vdGlmeSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU3RhdGUucGxheWluZzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25NaXNzaWxlLm5vdGlmeSh7ZGlyZWN0aW9uLCBwb3NpdGlvbn0pO1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsQXVkaW9NYW5hZ2VyLnBsYXlPbmVTaG90KFNvdW5kcy5zaG9vdCkuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhpdCgpIHtcclxuICAgICAgICB0aGlzLnNjb3JlKys7XHJcbiAgICAgICAgdGhpcy5pbnZhZGVySGl0Lm5vdGlmeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdhbWVPdmVyKCkge1xyXG4gICAgICAgIC8vIHJlbW92ZSBtaXNzaWxlc1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoU3RhdGUuZ2FtZU92ZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2FtZVN0YXRlID0gbmV3IEdhbWVTdGF0ZSgpO1xyXG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIE9iamVjdDNEfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7Z2FtZVN0YXRlLCBTdGF0ZX0gZnJvbSAnLi4vY2xhc3Nlcy9nYW1lLXN0YXRlLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBY3RpdmVPblN0YXRlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdhY3RpdmUtb24tc3RhdGUnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0YXRlIHRoYXQgdGhpcyBjb21wb25lbnQgc2hvdWxkIGJlIGFjdGl2ZSBvbi5cclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5LmVudW0oT2JqZWN0LmtleXMoU3RhdGUpLmZpbHRlcigoaykgPT4gaXNOYU4oTnVtYmVyKGspKSkpXHJcbiAgICBzdGF0ZSA9IFN0YXRlLndlbGNvbWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB3aGV0aGVyIGNoaWxkIG9iamVjdCdzIGNvbXBvbmVudHMgc2hvdWxkIGJlIGFmZmVjdGVkXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eS5ib29sKHRydWUpXHJcbiAgICBhZmZlY3RDaGlsZHJlbiA9IHRydWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGlzIHByb3BlcnR5IGlzIHRydWUgZXZlcnl0aGluZyB3aWxsIGJlIGluYWN0aXZlIGluc3RlYWQgb2YgYWN0aXZlXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eS5ib29sKGZhbHNlKVxyXG4gICAgaW5hY3RpdmUgPSBmYWxzZTtcclxuXHJcbiAgICBjb21wb25lbnRzITogQ29tcG9uZW50W107XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5nZXRDb21wb25lbnRzKHRoaXMub2JqZWN0KTtcclxuICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoZ2FtZVN0YXRlLnN0YXRlKTtcclxuICAgICAgICBnYW1lU3RhdGUuc3RhdGVTdWJqZWN0LnN1YnNjcmliZSh0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdGF0ZUNoYW5nZShuZXdTdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBpZiAobmV3U3RhdGUgPT09IHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goKGMpID0+IChjLmFjdGl2ZSA9ICF0aGlzLmluYWN0aXZlKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goKGMpID0+IChjLmFjdGl2ZSA9IHRoaXMuaW5hY3RpdmUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29tcG9uZW50cyhvYmo6IE9iamVjdDNEKSB7XHJcbiAgICAgICAgY29uc3QgY29tcHMgPSBvYmouZ2V0Q29tcG9uZW50cygpLmZpbHRlcigoYykgPT4gYy50eXBlICE9PSBBY3RpdmVPblN0YXRlLlR5cGVOYW1lKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB0aGlzLmNvbXBvbmVudHMuY29uY2F0KGNvbXBzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWZmZWN0Q2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBvYmouY2hpbGRyZW47XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50cyhjaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBPYmplY3QzRCxcclxuICAgIE1lc2hDb21wb25lbnQsXHJcbiAgICBNZXNoLFxyXG4gICAgTWF0ZXJpYWwsXHJcbiAgICBXb25kZXJsYW5kRW5naW5lLFxyXG59IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XHJcbmltcG9ydCB7cHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcclxuXHJcbmltcG9ydCB7cXVhdCwgcXVhdDIsIHZlYzN9IGZyb20gJ2dsLW1hdHJpeCc7XHJcblxyXG5jb25zdCB0ZW1wUXVhdDIgPSBxdWF0Mi5jcmVhdGUoKTtcclxuY29uc3QgdGVtcFF1YXQgPSBxdWF0LmNyZWF0ZSgpO1xyXG5cclxuY29uc3QgVE9UQUxQQVJUSUNMRVMgPSAyNTAwO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlUG9vbCB7XHJcbiAgICBzdGF0aWMgaW5zdGFuY2U6IFBhcnRpY2xlUG9vbDtcclxuXHJcbiAgICBwcml2YXRlIG9iamVjdHM6IE9iamVjdDNEW107XHJcbiAgICBwcml2YXRlIHBvaW50ZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSB7XHJcbiAgICAgICAgdGhpcy5vYmplY3RzID0gZW5naW5lLnNjZW5lLmFkZE9iamVjdHMoVE9UQUxQQVJUSUNMRVMsIG51bGwsIFRPVEFMUEFSVElDTEVTICogMyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYmplY3RzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMub2JqZWN0c1tpXTtcclxuICAgICAgICAgICAgb2JqLnNjYWxlTG9jYWwoWzAsIDAsIDBdKTtcclxuICAgICAgICAgICAgb2JqLmFkZENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdChhbW91bnQ6IG51bWJlcik6IE9iamVjdDNEW10ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdDogT2JqZWN0M0RbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyArK2kpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5vYmplY3RzW3RoaXMucG9pbnRlcl0pO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ZXIgPSAodGhpcy5wb2ludGVyICsgMSkgJSB0aGlzLm9iamVjdHMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwbG9zaW9uUGFydGljbGVzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdleHBsb3Npb24tcGFydGljbGVzJztcclxuXHJcbiAgICBAcHJvcGVydHkubWVzaCgpXHJcbiAgICBtZXNoITogTWVzaDtcclxuXHJcbiAgICBAcHJvcGVydHkubWF0ZXJpYWwoKVxyXG4gICAgbWF0ZXJpYWwhOiBNYXRlcmlhbDtcclxuXHJcbiAgICBAcHJvcGVydHkuaW50KDEwMClcclxuICAgIG1heFBhcnRpY2xlcyE6IG51bWJlcjtcclxuXHJcbiAgICBAcHJvcGVydHkuZmxvYXQoMjUpXHJcbiAgICBpbml0aWFsU3BlZWQhOiBudW1iZXI7XHJcblxyXG4gICAgQHByb3BlcnR5LmZsb2F0KDAuMDEpXHJcbiAgICBwYXJ0aWNsZVNjYWxlITogbnVtYmVyO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5pbnQoMTYpXHJcbiAgICBzaXplITogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgdGltZSA9IDAuMDtcclxuXHJcbiAgICBwcml2YXRlIHNlbGZEZXN0cnVjdENvdW50ZG93biA9IDIuNTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtudW1iZXJbXVtdfVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHZlbG9jaXRpZXM6IHZlYzNbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBvYmplY3RzOiBPYmplY3QzRFtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSByb3RhdGlvbnM6IHZlYzNbXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgbGlmZXRpbWU6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5vYmplY3RzID0gUGFydGljbGVQb29sLmluc3RhbmNlLnJlcXVlc3QodGhpcy5tYXhQYXJ0aWNsZXMpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4UGFydGljbGVzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0aWVzLnB1c2goW1xyXG4gICAgICAgICAgICAgICAgKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiB0aGlzLmluaXRpYWxTcGVlZCxcclxuICAgICAgICAgICAgICAgIChNYXRoLnJhbmRvbSgpICogMiAtIDAuNSkgKiB0aGlzLmluaXRpYWxTcGVlZCxcclxuICAgICAgICAgICAgICAgIChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogdGhpcy5pbml0aWFsU3BlZWQsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9ucy5wdXNoKFtcclxuICAgICAgICAgICAgICAgIChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogMTAsXHJcbiAgICAgICAgICAgICAgICAoTWF0aC5yYW5kb20oKSAqIDIgLSAxKSAqIDEwLFxyXG4gICAgICAgICAgICAgICAgKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiAxMCxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlmZXRpbWUucHVzaChNYXRoLnJhbmRvbSgpICogMC41ICsgMSk7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0c1tpXS5zY2FsZUxvY2FsKFswLCAwLCAwXSk7XHJcbiAgICAgICAgICAgIC8qIE1vc3QgZWZmaWNpZW50IHdheSB0byBoaWRlIHRoZSBtZXNoICovXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIFRpbWUgdG8gc3Bhd24gcGFydGljbGVzICovXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFBhcnRpY2xlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMub2JqZWN0c1tpXTtcclxuICAgICAgICAgICAgb2JqLnJlc2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIG9iai5zY2FsZUxvY2FsKFt0aGlzLnBhcnRpY2xlU2NhbGUsIHRoaXMucGFydGljbGVTY2FsZSwgdGhpcy5wYXJ0aWNsZVNjYWxlXSk7XHJcblxyXG4gICAgICAgICAgICAvKiBBY3RpdmF0ZSBjb21wb25lbnQsIG90aGVyd2lzZSBpdCB3aWxsIG5vdCBzaG93IHVwISAqL1xyXG4gICAgICAgICAgICBvYmouZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpIS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBvYmouZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpIS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIG9iai5nZXRDb21wb25lbnQoTWVzaENvbXBvbmVudCkhLm1lc2ggPSB0aGlzLm1lc2g7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwb3MgPSB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKCk7XHJcbiAgICAgICAgICAgIG9iai5zZXRQb3NpdGlvbldvcmxkKHBvcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZWxmRGVzdHJ1Y3RDb3VudGRvd24gLT0gZHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZkRlc3RydWN0Q291bnRkb3duIDwgMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVzdHJveWluZyBleHBsb3Npb24gcGFydGljbGVzJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBUYXJnZXQgZm9yIHJldHJpZXZpbmcgcGFydGljbGVzIHdvcmxkIGxvY2F0aW9ucyAqL1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcclxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9iamVjdHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlmZXRpbWVbaV0gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogR2V0IHRyYW5zbGF0aW9uIGZpcnN0LCBhcyBvYmplY3QudHJhbnNsYXRlKCkgd2lsbCBtYXJrXHJcbiAgICAgICAgICAgICAqIHRoZSBvYmplY3QgYXMgZGlydHksIHdoaWNoIHdpbGwgY2F1c2UgaXQgdG8gcmVjYWxjdWxhdGVcclxuICAgICAgICAgICAgICogb2JqLnRyYW5zZm9ybVdvcmxkIG9uIGFjY2Vzcy4gV2Ugd2FudCB0byBhdm9pZCB0aGlzIGFuZFxyXG4gICAgICAgICAgICAgKiBoYXZlIGl0IGJlIHJlY2FsY3VsYXRlZCBpbiBiYXRjaCBhdCB0aGUgZW5kIG9mIGZyYW1lXHJcbiAgICAgICAgICAgICAqIGluc3RlYWQgKi9cclxuICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLmdldFRyYW5zZm9ybVdvcmxkKHRlbXBRdWF0Mik7XHJcbiAgICAgICAgICAgIHF1YXQyLmdldFRyYW5zbGF0aW9uKG9yaWdpbiwgdGVtcFF1YXQyKTtcclxuXHJcbiAgICAgICAgICAgIC8qIEFwcGx5IHJvdGF0aW9uICovXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdCA9IHRoaXMucm90YXRpb25zW2ldO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0uZ2V0Um90YXRpb25Xb3JsZCh0ZW1wUXVhdCk7XHJcbiAgICAgICAgICAgIHF1YXQucm90YXRlWCh0ZW1wUXVhdCwgdGVtcFF1YXQsIHJvdFswXSAqIGR0KTtcclxuICAgICAgICAgICAgcXVhdC5yb3RhdGVZKHRlbXBRdWF0LCB0ZW1wUXVhdCwgcm90WzFdICogZHQpO1xyXG4gICAgICAgICAgICBxdWF0LnJvdGF0ZVoodGVtcFF1YXQsIHRlbXBRdWF0LCByb3RbMl0gKiBkdCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0uc2V0Um90YXRpb25Xb3JsZCh0ZW1wUXVhdCk7XHJcbiAgICAgICAgICAgIHRoaXMubGlmZXRpbWVbaV0gLT0gZHQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpZmV0aW1lW2ldIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0c1tpXS5zY2FsZUxvY2FsKFswLCAwLCAwXSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9iamVjdHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0aWVzW2ldWzFdIC09IDkuODEgKiBkdDtcclxuICAgICAgICAgICAgLyogQXBwbHkgdmVsb2NpdHkgKi9cclxuICAgICAgICAgICAgdmVjMy5zY2FsZShkaXN0YW5jZSwgdGhpcy52ZWxvY2l0aWVzW2ldLCBkdCk7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0c1tpXS50cmFuc2xhdGVXb3JsZChkaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgTWF0ZXJpYWwsXHJcbiAgICBNZXNoLFxyXG4gICAgTWVzaENvbXBvbmVudCxcclxuICAgIE9iamVjdDNELFxyXG4gICAgVGV4dENvbXBvbmVudCxcclxuICAgIFdvbmRlcmxhbmRFbmdpbmUsXHJcbn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcclxuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7IFNvdW5kcywgU3RhdGUsIGdhbWVTdGF0ZSB9IGZyb20gJy4uL2NsYXNzZXMvZ2FtZS1zdGF0ZS5qcyc7XHJcbmltcG9ydCB7IFJlYWRvbmx5VmVjMywgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XHJcbmltcG9ydCB7IFByZWZhYlN0b3JhZ2UgfSBmcm9tICdAc29yc2tvb3Qvd29uZGVybGFuZC1jb21wb25lbnRzJztcclxuaW1wb3J0IHsgTWlzc2lsZSB9IGZyb20gJy4vbWlzc2lsZS5qcyc7XHJcbmltcG9ydCB7IFdhdmVzIH0gZnJvbSAnLi4vZGF0YS9XYXZlcy5qcyc7XHJcbmltcG9ydCB7IEludmFkZXIgfSBmcm9tICcuL2ludmFkZXIuanMnO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZVBvb2wgfSBmcm9tICcuL2V4cGxvc2lvbi1wYXJ0aWNsZXMuanMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFNob3dMZWFkZXJib2FyZCB9IGZyb20gJy4vc2hvdy1sZWFkZXJib2FyZC5qcyc7XHJcbmltcG9ydCB7IEhleXZyTGVhZGVyYm9hcmQgfSBmcm9tICcuLi9oZXl2ci9oZXl2ci1sZWFkZXJib2FyZC5qcyc7XHJcbmltcG9ydCB7IGdsb2JhbEF1ZGlvTWFuYWdlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL3NwYXRpYWwtYXVkaW8nO1xyXG5cclxuY29uc3QgbWlzc2lsZVBvb2xTaXplID0gMTAwMDtcclxuY29uc3QgdGVtcFZlYyA9IHZlYzMuY3JlYXRlKCk7XHJcbmV4cG9ydCBjbGFzcyBHYW1lIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdnYW1lJztcclxuXHJcbiAgICBAcHJvcGVydHkub2JqZWN0KClcclxuICAgIG5vblZSQ2FtZXJhITogT2JqZWN0M0Q7XHJcblxyXG4gICAgQHByb3BlcnR5Lm9iamVjdCh7IHJlcXVpcmVkOiB0cnVlIH0pXHJcbiAgICBsZWFkZXJib2FyZE9iamVjdCE6IE9iamVjdDNEO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoeyByZXF1aXJlZDogdHJ1ZSB9KVxyXG4gICAgc2NvcmVPYmplY3QhOiBPYmplY3QzRDtcclxuXHJcbiAgICBAcHJvcGVydHkub2JqZWN0KClcclxuICAgIHByZWZhYlN0b3JlT2JqZWN0PzogT2JqZWN0M0Q7XHJcblxyXG4gICAgQHByb3BlcnR5Lm9iamVjdCgpXHJcbiAgICBtaXNzaWxlc1BhcmVudCE6IE9iamVjdDNEO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoKVxyXG4gICAgYWxpZW5zUGFyZW50ITogT2JqZWN0M0Q7XHJcblxyXG4gICAgQHByb3BlcnR5Lm1lc2goKVxyXG4gICAgYWxpZW4xTWVzaD86IE1lc2g7XHJcblxyXG4gICAgQHByb3BlcnR5Lm1lc2goKVxyXG4gICAgYWxpZW4yTWVzaD86IE1lc2g7XHJcblxyXG4gICAgQHByb3BlcnR5Lm1lc2goKVxyXG4gICAgc2hhcmRNZXNoPzogTWVzaDtcclxuXHJcbiAgICBAcHJvcGVydHkubWF0ZXJpYWwoKVxyXG4gICAgYWxpZW5NYXRlcmlhbDE/OiBNYXRlcmlhbDtcclxuICAgIEBwcm9wZXJ0eS5tYXRlcmlhbCgpXHJcbiAgICBhbGllbk1hdGVyaWFsMj86IE1hdGVyaWFsO1xyXG4gICAgQHByb3BlcnR5Lm1hdGVyaWFsKClcclxuICAgIGFsaWVuTWF0ZXJpYWwzPzogTWF0ZXJpYWw7XHJcbiAgICBAcHJvcGVydHkubWF0ZXJpYWwoKVxyXG4gICAgYWxpZW5NYXRlcmlhbDQ/OiBNYXRlcmlhbDtcclxuICAgIEBwcm9wZXJ0eS5tYXRlcmlhbCgpXHJcbiAgICBhbGllbk1hdGVyaWFsNT86IE1hdGVyaWFsO1xyXG4gICAgQHByb3BlcnR5Lm1hdGVyaWFsKClcclxuICAgIGFsaWVuTWF0ZXJpYWw2PzogTWF0ZXJpYWw7XHJcblxyXG4gICAgQHByb3BlcnR5Lm1lc2goKVxyXG4gICAgbWlzc2lsZU1lc2g/OiBNZXNoO1xyXG4gICAgQHByb3BlcnR5Lm1hdGVyaWFsKClcclxuICAgIG1pc3NpbGVNYXRlcmlhbD86IE1hdGVyaWFsO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5tZXNoKHsgcmVxdWlyZWQ6IHRydWUgfSlcclxuICAgIHBhcnRpY2xlTWVzaCE6IE1lc2g7XHJcbiAgICBAcHJvcGVydHkubWF0ZXJpYWwoeyByZXF1aXJlZDogdHJ1ZSB9KVxyXG4gICAgcGFydGljbGVNYXRlcmlhbCE6IE1hdGVyaWFsO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoeyByZXF1aXJlZDogdHJ1ZSB9KVxyXG4gICAgc3RhcnRNaXNzaWxlUG9zaXRpb25PYmplY3QhOiBPYmplY3QzRDtcclxuXHJcbiAgICBwcml2YXRlIHByZWZhYlN0b3JlPzogUHJlZmFiU3RvcmFnZTtcclxuICAgIHByaXZhdGUgY3VycmVudHdhdmUgPSAwO1xyXG4gICAgcHJpdmF0ZSBtaXNzaWxlUG9vbCE6IE9iamVjdDNEW107XHJcbiAgICBwcml2YXRlIGxhc3RTaG90ID0gMDtcclxuXHJcbiAgICBwcml2YXRlIGludmFkZXJzTGVmdEluV2F2ZSA9IDA7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRzcGVlZCA9IDU7XHJcbiAgICBwcml2YXRlIHNob3dMZWFkZXJib2FyZENvbXBvbmVudD86IFNob3dMZWFkZXJib2FyZDtcclxuICAgIHByaXZhdGUgbGVhZGVyYm9hcmQ/OiBIZXl2ckxlYWRlcmJvYXJkO1xyXG4gICAgcHJpdmF0ZSBzY29yZVRleHQ/OiBUZXh0Q29tcG9uZW50O1xyXG5cclxuICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSkge1xyXG4gICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChNaXNzaWxlKTtcclxuICAgICAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoSW52YWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICBnbG9iYWxBdWRpb01hbmFnZXIubG9hZChcclxuICAgICAgICAgICAgICAgIFsnZXhwbG9zaW9uLndhdicsICdleHBsb3Npb24yLndhdicsICdleHBsb3Npb24zLndhdiddLFxyXG4gICAgICAgICAgICAgICAgU291bmRzLmV4cGxvc2lvblxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnbG9iYWxBdWRpb01hbmFnZXIubG9hZCgnYmlnRXhwbG9zaW9uLndhdicsIFNvdW5kcy5nYW1lT3ZlciksXHJcbiAgICAgICAgICAgIGdsb2JhbEF1ZGlvTWFuYWdlci5sb2FkKCdsYXNlclNob290LndhdicsIFNvdW5kcy5zaG9vdCksXHJcbiAgICAgICAgXSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRlZCBhbGwgc291bmRzJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICAgICAgUGFydGljbGVQb29sLmluc3RhbmNlID0gbmV3IFBhcnRpY2xlUG9vbCh0aGlzLmVuZ2luZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWZhYlN0b3JlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncHJlZmFiU3RvcmVPYmplY3QgaXMgbm90IHNldCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByZWZhYlN0b3JlID0gdGhpcy5wcmVmYWJTdG9yZU9iamVjdC5nZXRDb21wb25lbnQoUHJlZmFiU3RvcmFnZSkhO1xyXG5cclxuICAgICAgICB0aGlzLmxlYWRlcmJvYXJkID0gdGhpcy5sZWFkZXJib2FyZE9iamVjdC5nZXRDb21wb25lbnQoSGV5dnJMZWFkZXJib2FyZCkhO1xyXG4gICAgICAgIHRoaXMuc2hvd0xlYWRlcmJvYXJkQ29tcG9uZW50ID1cclxuICAgICAgICAgICAgdGhpcy5sZWFkZXJib2FyZE9iamVjdC5nZXRDb21wb25lbnQoU2hvd0xlYWRlcmJvYXJkKSE7XHJcbiAgICAgICAgdGhpcy5zY29yZVRleHQgPSB0aGlzLnNjb3JlT2JqZWN0LmdldENvbXBvbmVudChUZXh0Q29tcG9uZW50KSE7XHJcbiAgICAgICAgdGhpcy5zY29yZVRleHQudGV4dCA9ICcnO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKCgpID0+IChnYW1lU3RhdGUuaXNJblZSID0gdHJ1ZSkpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLmFkZCgoKSA9PiAoZ2FtZVN0YXRlLmlzSW5WUiA9IGZhbHNlKSk7XHJcblxyXG4gICAgICAgIGdhbWVTdGF0ZS5zcGF3bk1pc3NpbGUuYWRkKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRNaXNzaWxlUG9zaXRpb25PYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKTtcclxuICAgICAgICAgICAgdGhpcy5zcGF3bk1pc3NpbGUoZGF0YS5kaXJlY3Rpb24sIHRlbXBWZWMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5uZXdHYW1lLmFkZCh0aGlzLm5ld0dhbWUpO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5zdGF0ZVN1YmplY3RcclxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh4KSA9PiB4ID09PSBTdGF0ZS5nYW1lT3ZlcikpXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5pc0dhbWVPdmVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBnYW1lU3RhdGUuaXNJblZSU3ViamVjdC5zdWJzY3JpYmUoKGlzSW5WUikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNJblZSKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW50ZXIgdnInKTtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5zZXRTdGF0ZShTdGF0ZS53ZWxjb21lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdleGl0IHZyJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySW52YWRlcnMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJNaXNzaWxlUG9vbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZVRleHQhLnRleHQgPSAnJztcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5zZXRTdGF0ZShTdGF0ZS5ub3RJblZSKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5pbnZhZGVySGl0LmFkZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWRlcnNMZWZ0SW5XYXZlLS07XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmVUZXh0IS50ZXh0ID0gYCR7Z2FtZVN0YXRlLnNjb3JlfWA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludmFkZXJzTGVmdEluV2F2ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50d2F2ZSsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c3BlZWQrKztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnR3YXZlID49IFdhdmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudHdhdmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnZhZGVyc0xlZnRJbldhdmUgPSB0aGlzLnNwYXduSW52YWRlcldhdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5ld0dhbWUgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zaG93TGVhZGVyYm9hcmRDb21wb25lbnQhLmhpZGUoKTtcclxuICAgICAgICB0aGlzLnNjb3JlVGV4dCEudGV4dCA9ICcwJztcclxuICAgICAgICBpZiAoIXRoaXMubWlzc2lsZVBvb2wpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVNaXNzaWxlUG9vbCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJNaXNzaWxlUG9vbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50c3BlZWQgPSA1O1xyXG4gICAgICAgIHRoaXMuY3VycmVudHdhdmUgPSAwO1xyXG4gICAgICAgIHRoaXMuY2xlYXJJbnZhZGVycygpO1xyXG4gICAgICAgIHRoaXMuaW52YWRlcnNMZWZ0SW5XYXZlID0gdGhpcy5zcGF3bkludmFkZXJXYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTWlzc2lsZVBvb2woKSB7XHJcbiAgICAgICAgdGhpcy5taXNzaWxlUG9vbCA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdHMoXHJcbiAgICAgICAgICAgIG1pc3NpbGVQb29sU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy5taXNzaWxlc1BhcmVudCxcclxuICAgICAgICAgICAgbWlzc2lsZVBvb2xTaXplICogM1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBtaXNzaWxlUG9vbFNpemU7IG0rKykge1xyXG4gICAgICAgICAgICBjb25zdCBtaXNzaWxlID0gdGhpcy5taXNzaWxlUG9vbFttXTtcclxuICAgICAgICAgICAgbWlzc2lsZS5uYW1lID0gYG1pc3NpbGUtJHttfWA7XHJcbiAgICAgICAgICAgIG1pc3NpbGUuYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQsIHtcclxuICAgICAgICAgICAgICAgIG1lc2g6IHRoaXMubWlzc2lsZU1lc2gsXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5taXNzaWxlTWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIH0pITtcclxuICAgICAgICAgICAgbWlzc2lsZS5hZGRDb21wb25lbnQoTWlzc2lsZSwge1xyXG4gICAgICAgICAgICAgICAgYWxpZW5zUGFyZW50OiB0aGlzLmFsaWVuc1BhcmVudCxcclxuICAgICAgICAgICAgfSkhO1xyXG4gICAgICAgICAgICBtaXNzaWxlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhck1pc3NpbGVQb29sKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5taXNzaWxlUG9vbCB8fCB0aGlzLm1pc3NpbGVQb29sLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IG0gPSAwOyBtIDwgbWlzc2lsZVBvb2xTaXplOyBtKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbWlzc2lsZSA9IHRoaXMubWlzc2lsZVBvb2xbbV07XHJcbiAgICAgICAgICAgIG1pc3NpbGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbGVDb21wb25lbnQgPSBtaXNzaWxlLmdldENvbXBvbmVudChNaXNzaWxlKSE7XHJcbiAgICAgICAgICAgIG1pc3NpbGVDb21wb25lbnQuZmlyZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3Bhd25NaXNzaWxlKGRpcmVjdGlvbjogUmVhZG9ubHlWZWMzIHwgdW5kZWZpbmVkLCBwb3NpdGlvbjogUmVhZG9ubHlWZWMzIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgY29uc3QgbWlzc2lsZUluc3RhbmNlID0gdGhpcy5taXNzaWxlUG9vbFt0aGlzLmxhc3RTaG90XTtcclxuICAgICAgICB0aGlzLmxhc3RTaG90Kys7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdFNob3QgPiB0aGlzLm1pc3NpbGVQb29sLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RTaG90ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1pc3NpbGVJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBtaXNzaWxlSW5zdGFuY2UucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XHJcbiAgICAgICAgICAgIG1pc3NpbGVJbnN0YW5jZS5zZXRQb3NpdGlvbldvcmxkKHBvc2l0aW9uID8/IFswLCAwLCAwXSk7XHJcbiAgICAgICAgICAgIG1pc3NpbGVJbnN0YW5jZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBtaXNzaWxlID0gbWlzc2lsZUluc3RhbmNlLmdldENvbXBvbmVudChNaXNzaWxlKSE7XHJcbiAgICAgICAgICAgIG1pc3NpbGUubGlmdE9mZihkaXJlY3Rpb24gPz8gWzAsIDAsIC0xXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignbm8gbWlzc2lsZXMgbGVmdCwgc29tZWhvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckludmFkZXJzKCkge1xyXG4gICAgICAgIHRoaXMuYWxpZW5zUGFyZW50LmNoaWxkcmVuLmZvckVhY2goKGFsaWVuKSA9PiB7XHJcbiAgICAgICAgICAgIGFsaWVuLmRlc3Ryb3koKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzcGF3bkludmFkZXJXYXZlKCkge1xyXG4gICAgICAgIGxldCBzcGF3bmVkID0gMDtcclxuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5hZGRPYmplY3RzKDU1LCB0aGlzLmFsaWVuc1BhcmVudCwgMTAwMCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgLy8gd2F2ZSByb3dzXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTE7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gd2F2ZSBjb2x1bW5zXHJcbiAgICAgICAgICAgICAgICBpZiAoV2F2ZXNbdGhpcy5jdXJyZW50d2F2ZV1baV1bal0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhd25lZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25JbnZhZGVyKGosIGksIFdhdmVzW3RoaXMuY3VycmVudHdhdmVdW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3Bhd25lZDtcclxuICAgIH1cclxuXHJcbiAgICBzcGF3bkludmFkZXIoeDogbnVtYmVyLCB5OiBudW1iZXIsIHR5cGU6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHJuZFkgPSAteSAqIDI1ICsgMTUwO1xyXG4gICAgICAgIGNvbnN0IHJhZCA9ICgoeCArIDAuNSkgLyAxMSAtIDAuNSkgKiAoTWF0aC5QSSAvIDEuNSk7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KHRoaXMuYWxpZW5zUGFyZW50KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzaENvbXBvbmVudCA9IG9iai5hZGRDb21wb25lbnQoTWVzaENvbXBvbmVudCwge1xyXG4gICAgICAgICAgICBtZXNoOiB0eXBlICUgMiA/IHRoaXMuYWxpZW4yTWVzaCA6IHRoaXMuYWxpZW4xTWVzaCxcclxuICAgICAgICB9KSE7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBtZXNoQ29tcG9uZW50Lm1hdGVyaWFsID0gdGhpcy5hbGllbk1hdGVyaWFsMSE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgbWVzaENvbXBvbmVudC5tYXRlcmlhbCA9IHRoaXMuYWxpZW5NYXRlcmlhbDIhO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIG1lc2hDb21wb25lbnQubWF0ZXJpYWwgPSB0aGlzLmFsaWVuTWF0ZXJpYWwzITtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBtZXNoQ29tcG9uZW50Lm1hdGVyaWFsID0gdGhpcy5hbGllbk1hdGVyaWFsNCE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICBtZXNoQ29tcG9uZW50Lm1hdGVyaWFsID0gdGhpcy5hbGllbk1hdGVyaWFsNSE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICBtZXNoQ29tcG9uZW50Lm1hdGVyaWFsID0gdGhpcy5hbGllbk1hdGVyaWFsNiE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG1lc2hDb21wb25lbnQubWF0ZXJpYWwgPSB0aGlzLmFsaWVuTWF0ZXJpYWwxITtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB2ZWMzLmZyb21WYWx1ZXMoTWF0aC5zaW4ocmFkKSAqIDI1MCwgcm5kWSwgTWF0aC5jb3MocmFkKSAqIC0xNTApO1xyXG5cclxuICAgICAgICBvYmouc2V0UG9zaXRpb25Xb3JsZChwb3NpdGlvbik7XHJcbiAgICAgICAgb2JqLmxvb2tBdCh2ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCkpO1xyXG4gICAgICAgIG9iai5hZGRDb21wb25lbnQoSW52YWRlciwge1xyXG4gICAgICAgICAgICBzcGVlZDogdGhpcy5jdXJyZW50c3BlZWQsXHJcbiAgICAgICAgICAgIHNoYXJkTWVzaDogdGhpcy5zaGFyZE1lc2gsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpc0dhbWVPdmVyKCkge1xyXG4gICAgICAgIHRoaXMubGVhZGVyYm9hcmQhLnN1Ym1pdFNjb3JlKGdhbWVTdGF0ZS5zY29yZSkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgdGhpcy5zaG93TGVhZGVyYm9hcmRDb21wb25lbnQhLnNob3coKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIE9iamVjdDNEfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQge1JlYWRvbmx5VmVjMywgcXVhdCwgdmVjM30gZnJvbSAnZ2wtbWF0cml4JztcclxuaW1wb3J0IHtJbnZhZGVyfSBmcm9tICcuL2ludmFkZXIuanMnO1xyXG5pbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7Z2FtZVN0YXRlfSBmcm9tICcuLi9jbGFzc2VzL2dhbWUtc3RhdGUuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pc3NpbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21pc3NpbGUnO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoKVxyXG4gICAgYWxpZW5zUGFyZW50ITogT2JqZWN0M0Q7XHJcblxyXG4gICAgc3BlZWQgPSAxMDA7XHJcbiAgICBsaWZldGltZSA9IDIuMDtcclxuICAgIGZpcmVkID0gZmFsc2U7XHJcbiAgICBkaXJlY3Rpb246IHZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgdmVsb2NpdHk6IHZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xyXG5cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNjYWxlIHRoZSBkaXJlY3Rpb24gdmVjdG9yIGJ5IHRoZSBzcGVlZCBhbmQgdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgZnJhbWVcclxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMuc3BlZWQgKiBkdDtcclxuICAgICAgICB2ZWMzLnNjYWxlKHRoaXMudmVsb2NpdHksIHRoaXMuZGlyZWN0aW9uLCBkaXN0YW5jZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQoKTtcclxuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHZlYzMuY3JlYXRlKCk7XHJcbiAgICAgICAgdmVjMy5hZGQobmV3UG9zaXRpb24sIHBvcywgdGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZChuZXdQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIHRoaXMuYWxpZW5zUGFyZW50LmNoaWxkcmVuLmZvckVhY2goKGFsaWVuKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsaWVuUG9zID0gYWxpZW4uZ2V0UG9zaXRpb25Xb3JsZCgpO1xyXG4gICAgICAgICAgICBpZiAoYWxpZW5Qb3NbMF0gIT09IDAgJiYgYWxpZW5Qb3NbMV0gIT09IDAgJiYgYWxpZW5Qb3NbMl0gIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdmVjMy5kaXN0YW5jZShhbGllblBvcywgbmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgNS4wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxpZW4uZ2V0Q29tcG9uZW50KEludmFkZXIpPy5oaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5oaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5saWZldGltZSAtPSBkdDtcclxuICAgICAgICBpZiAodGhpcy5saWZldGltZSA8IDAgfHwgbmV3UG9zaXRpb25bMV0gPCAtMTUwLjApIHtcclxuICAgICAgICAgICAgdGhpcy5lbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZW5kKCkge1xyXG4gICAgICAgIHRoaXMub2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmlyZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBsaWZ0T2ZmKGRpcmVjdGlvbjogUmVhZG9ubHlWZWMzKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB2ZWMzLmNsb25lKGRpcmVjdGlvbik7XHJcbiAgICAgICAgLy8gbWFrZSB0aGUgbWlzc2lsZSBmYWNlIHRoZSBkaXJlY3Rpb24gaXQncyBnb2luZyBieSBjb252ZXJ0aW5nIHRoZSBkaXJlY3Rpb24gdmVjdG9yIHRvIGEgcXVhdGVybmlvblxyXG4gICAgICAgIGNvbnN0IHF1YXRlcm5pb24gPSBxdWF0LmNyZWF0ZSgpO1xyXG4gICAgICAgIHF1YXQucm90YXRpb25UbyhxdWF0ZXJuaW9uLCB2ZWMzLmZyb21WYWx1ZXMoMCwgMCwgLTEpLCB0aGlzLmRpcmVjdGlvbik7XHJcbiAgICAgICAgdGhpcy5vYmplY3Qucm90YXRlT2JqZWN0KHF1YXRlcm5pb24pO1xyXG4gICAgICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGlmZXRpbWUgPSAyO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQge0NvbGxpc2lvbkNvbXBvbmVudCwgQ29tcG9uZW50LCBNZXNoLCBNZXNoQ29tcG9uZW50fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7dmVjM30gZnJvbSAnZ2wtbWF0cml4JztcclxuaW1wb3J0IHtFeHBsb3Npb25QYXJ0aWNsZXN9IGZyb20gJy4vZXhwbG9zaW9uLXBhcnRpY2xlcy5qcyc7XHJcbmltcG9ydCB7U291bmRzLCBTdGF0ZSwgZ2FtZVN0YXRlfSBmcm9tICcuLi9jbGFzc2VzL2dhbWUtc3RhdGUuanMnO1xyXG5pbXBvcnQge0Vhc2luZywgY2xhbXB9IGZyb20gJ0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQge2xlcnB9IGZyb20gJy4uL2NsYXNzZXMvdXRpbHMvbGVycC5qcyc7XHJcbmltcG9ydCB7IGdsb2JhbEF1ZGlvTWFuYWdlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL3NwYXRpYWwtYXVkaW8nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEludmFkZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2ludmFkZXInO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5tZXNoKClcclxuICAgIHNoYXJkTWVzaD86IE1lc2g7XHJcblxyXG4gICAgQHByb3BlcnR5LmludCg1KVxyXG4gICAgc3BlZWQgPSA1O1xyXG5cclxuICAgIHByaXZhdGUgZnJlcXVlbmN5ID0gMjtcclxuICAgIHByaXZhdGUgYnJlYWtDaGFuZ2UgPSAxMDA7XHJcbiAgICBwcml2YXRlIGFtcCA9IDE7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydERpc3QgPSAwO1xyXG4gICAgcHJpdmF0ZSBkaXI6IHZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgcHJpdmF0ZSBkZWx0YUZyZXEgPSAwO1xyXG4gICAgcHJpdmF0ZSBvcmdYID0gMDtcclxuICAgIHByaXZhdGUgYnJva2VuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNvbGxpc2lvbj86IENvbGxpc2lvbkNvbXBvbmVudDtcclxuICAgIHByaXZhdGUgZ2FtZU92ZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaXNTaG93aW5nID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHRpbWVyID0gTWF0aC5yYW5kb20oKSAqIC0zO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGNvbnN0IHBvczogdmVjMyA9IHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQoKTtcclxuICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgocG9zKTtcclxuICAgICAgICB0aGlzLnN0YXJ0RGlzdCA9IGRpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXIgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyZWF0ZSgpLCBwb3MpO1xyXG4gICAgICAgIHRoaXMuZGVsdGFGcmVxID0gKHRoaXMuZnJlcXVlbmN5ICogTWF0aC5QSSAqIDIpIC8gZGlzdDtcclxuICAgICAgICB0aGlzLm9yZ1ggPSBwb3NbMF07XHJcbiAgICAgICAgZ2FtZVN0YXRlLnN0YXRlU3ViamVjdC5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gU3RhdGUuZ2FtZU92ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub2JqZWN0LnNjYWxlTG9jYWwoWzAsIDAsIDBdKTtcclxuICAgIH1cclxuXHJcbiAgICBoaXQoKSB7XHJcbiAgICAgICAgZ2xvYmFsQXVkaW9NYW5hZ2VyLnBsYXlPbmVTaG90KFNvdW5kcy5leHBsb3Npb24pLmNhdGNoKCgpID0+IHt9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLmVuZ2luZS5zY2VuZS5hZGRPYmplY3QoKTtcclxuICAgICAgICBvYmouc2V0UG9zaXRpb25Xb3JsZCh0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKCkpO1xyXG4gICAgICAgIG9iai5hZGRDb21wb25lbnQoRXhwbG9zaW9uUGFydGljbGVzLCB7XHJcbiAgICAgICAgICAgIG1lc2g6IHRoaXMuc2hhcmRNZXNoISxcclxuICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMub2JqZWN0LmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KSEubWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIG1heFBhcnRpY2xlczogMjUwLFxyXG4gICAgICAgICAgICBwYXJ0aWNsZVNjYWxlOiAxLFxyXG4gICAgICAgICAgICBzaXplOiAxLFxyXG4gICAgICAgICAgICBpbml0aWFsU3BlZWQ6IDEwMCxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9iamVjdC5kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc1Nob3dpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lciArPSBkdDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZXIgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhbXBUaW1lciA9IGNsYW1wKHRoaXMudGltZXIsIDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVWYWx1ZSA9IGxlcnAoMCwgMS41LCBjbGFtcFRpbWVyLCBFYXNpbmcuT3V0Q3ViaWMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2V0U2NhbGluZ0xvY2FsKFtzY2FsZVZhbHVlLCBzY2FsZVZhbHVlLCBzY2FsZVZhbHVlXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZXIgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nob3dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LnNldFNjYWxpbmdMb2NhbChbMS41LCAxLjUsIDEuNV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSBkdCAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCgpO1xyXG5cclxuICAgICAgICB0aGlzLm9yZ1ggLT0gdGhpcy5kaXJbMF0gKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgcG9zWzFdIC09IHRoaXMuZGlyWzFdICogZGVsdGFUaW1lO1xyXG4gICAgICAgIHBvc1syXSAtPSB0aGlzLmRpclsyXSAqIGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudERpc3QgPSB2ZWMzLmxlbmd0aCh2ZWMzLmZyb21WYWx1ZXModGhpcy5vcmdYLCBwb3NbMV0sIHBvc1syXSkpO1xyXG5cclxuICAgICAgICBwb3NbMF0gPVxyXG4gICAgICAgICAgICAoKE1hdGguc2luKHRoaXMuc3RhcnREaXN0ICogdGhpcy5kZWx0YUZyZXEgLSB0aGlzLmRlbHRhRnJlcSAqIGN1cnJlbnREaXN0KSAqXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50RGlzdCkgL1xyXG4gICAgICAgICAgICAgICAgMTApICpcclxuICAgICAgICAgICAgICAgIHRoaXMuYW1wICtcclxuICAgICAgICAgICAgdGhpcy5vcmdYO1xyXG5cclxuICAgICAgICB0aGlzLm9iamVjdC5sb29rQXQodmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApKTtcclxuXHJcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZChwb3MpO1xyXG4gICAgICAgIGlmIChjdXJyZW50RGlzdCA8IDEwKSB7XHJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS5nYW1lT3ZlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudERpc3QgPiAxMCAmJiAhdGhpcy5icm9rZW4pIHtcclxuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwIDw9IHRoaXMuYnJlYWtDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnJva2VuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BlZWQgKj0gMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJlcXVlbmN5ICo9IDQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFtcCAqPSA1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQge3ZlYzN9IGZyb20gJ2dsLW1hdHJpeCc7XHJcblxyXG5leHBvcnQgY29uc3QgRWFzaW5nID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaW5lYXIgZWFzaW5nIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHQgQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICogQHJldHVybnMgVGhlIHNhbWUgdmFsdWUgYXMgYHRgLCBwcm92aWRpbmcgYSBsaW5lYXIgcHJvZ3Jlc3Npb24uXHJcbiAgICAgKi9cclxuICAgIExpbmVhcjogKHQ6IG51bWJlcik6IG51bWJlciA9PiB0LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUXVhZHJhdGljIGVhc2UtaW4gZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gdCBBIHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIG9mIHRoZSBhbmltYXRpb24uXHJcbiAgICAgKiBAcmV0dXJucyBBIHZhbHVlIHJlcHJlc2VudGluZyBhbiBhY2NlbGVyYXRlZCAocXVhZHJhdGljKSBwcm9ncmVzc2lvbiBmcm9tIDAgdG8gMS5cclxuICAgICAqL1xyXG4gICAgSW5RdWFkOiAodDogbnVtYmVyKTogbnVtYmVyID0+IHQgKiB0LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUXVhZHJhdGljIGVhc2Utb3V0IGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHQgQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICogQHJldHVybnMgQSB2YWx1ZSByZXByZXNlbnRpbmcgYSBkZWNlbGVyYXRlZCAocXVhZHJhdGljKSBwcm9ncmVzc2lvbiBmcm9tIDAgdG8gMS5cclxuICAgICAqL1xyXG4gICAgT3V0UXVhZDogKHQ6IG51bWJlcik6IG51bWJlciA9PiAxIC0gKDEgLSB0KSAqICgxIC0gdCksXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBRdWFkcmF0aWMgZWFzZS1pbi1vdXQgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gdCBBIHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIG9mIHRoZSBhbmltYXRpb24uXHJcbiAgICAgKiBAcmV0dXJucyBBIHZhbHVlIHRoYXQgYWNjZWxlcmF0ZXMgaW4sIHRoZW4gZGVjZWxlcmF0ZXMgb3V0LCBwcm92aWRpbmcgYSBzbW9vdGggdHJhbnNpdGlvbiBiZXR3ZWVuIG1vdGlvbiBzdGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIEluT3V0UXVhZDogKHQ6IG51bWJlcik6IG51bWJlciA9PlxyXG4gICAgICAgIHQgPCAwLjUgPyAyICogdCAqIHQgOiAxIC0gTWF0aC5wb3coLTIgKiB0ICsgMiwgMikgLyAyLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3ViaWMgZWFzZS1pbiBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSB0IEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIGFuaW1hdGlvbi5cclxuICAgICAqIEByZXR1cm5zIEEgdmFsdWUgcmVwcmVzZW50aW5nIGFuIGFjY2VsZXJhdGVkIChjdWJpYykgcHJvZ3Jlc3Npb24gZnJvbSAwIHRvIDEuXHJcbiAgICAgKi9cclxuICAgIEluQ3ViaWM6ICh0OiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5wb3codCwgMyksXHJcbiAgICAvKipcclxuICAgICAqIEN1YmljIGVhc2Utb3V0IGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHQgQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICogQHJldHVybnMgQSB2YWx1ZSByZXByZXNlbnRpbmcgYW4gZGVjZWxlcmF0ZWQgKGN1YmljKSBwcm9ncmVzc2lvbiBmcm9tIDAgdG8gMS5cclxuICAgICAqL1xyXG4gICAgT3V0Q3ViaWM6ICh0OiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5wb3codCAtIDEsIDMpICsgMSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEN1YmljIGVhc2UtaW4tb3V0IGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHQgQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICogQHJldHVybnMgQSB2YWx1ZSB0aGF0IGFjY2VsZXJhdGVzIGluLCB0aGVuIGRlY2VsZXJhdGVzIG91dCwgcHJvdmlkaW5nIGEgc21vb3RoIHRyYW5zaXRpb24gYmV0d2VlbiBtb3Rpb24gc3RhdGVzLlxyXG4gICAgICovXHJcbiAgICBJbk91dEN1YmljOiAodDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHQgPCAwLjUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KDIgKiB0LCAzKSAvIDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLnBvdygyICogdCAtIDIsIDMpICsgMikgLyAyO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07XHJcblxyXG4vKipcclxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgdGltZSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgYW5kIHJldHVybnMgYW4gZWFzZWQgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxyXG4gKiBAcGFyYW0gdCBUaGUgdGltZSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEuXHJcbiAqIEByZXR1cm5zIFRoZSBlYXNlZCB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEuXHJcbiAqL1xyXG50eXBlIEVhc2luZ0Z1bmN0aW9uID0gKHQ6IG51bWJlcikgPT4gbnVtYmVyO1xyXG5cclxuLyoqXHJcbiAqIFBlcmZvcm1zIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdpdGggb3B0aW9uYWwgZWFzaW5nIGZ1bmN0aW9uIG9uIHR3byBudW1lcmljIHZhbHVlc1xyXG4gKiBAcGFyYW0gc3RhcnQgU3RhcnRpbmcgbnVtZXJpYyB2YWx1ZVxyXG4gKiBAcGFyYW0gZW5kIEVuZGluZyBudW1lcmljIHZhbHVlXHJcbiAqIEBwYXJhbSB0IFByb2dyZXNzIGluZGljYXRvciBiZXR3ZWVuIHN0YXJ0aW5nIGFuZCBlbmRpbmcgbnVtZXJpYyB2YWx1ZXMsIHR5cGljYWxseSByZXByZXNlbnRlZCBhcyBhIGRlY2ltYWwgd2l0aGluIHJhbmdlIFswLDFdXHJcbiAqIEBwYXJhbSBlYXNpbmcgT3B0aW9uYWwgZWFzaW5nIGZ1bmN0aW9uIHRvIGFwcGx5LiBEZWZhdWx0cyB0byBFYXNpbmcuTGluZWFyIGlmIG5vdCBwcm92aWRlZCBvciBpbnZhbGlkIHR5cGUgc3VwcGxpZWRcclxuICogQHJldHVybiBJbnRlcnBvbGF0ZWQgcmVzdWx0IGJhc2VkIG9uIHByb3ZpZGVkIGlucHV0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoXHJcbiAgICBzdGFydDogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXIsXHJcbiAgICB0OiBudW1iZXIsXHJcbiAgICBlYXNpbmc6IEVhc2luZ0Z1bmN0aW9uID0gRWFzaW5nLkxpbmVhclxyXG4pIHtcclxuICAgIGlmICh0eXBlb2YgZWFzaW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZWFzaW5nID0gZ2V0RWFzaW5nRnVuY3Rpb24oZWFzaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnQgKiAoMSAtIGVhc2luZyh0KSkgKyBlbmQgKiBlYXNpbmcodCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwVmVjMyhcclxuICAgIG91dDogdmVjMyxcclxuICAgIHN0YXJ0OiB2ZWMzLFxyXG4gICAgZW5kOiB2ZWMzLFxyXG4gICAgdDogbnVtYmVyLFxyXG4gICAgZWFzaW5nOiBFYXNpbmdGdW5jdGlvbiA9IEVhc2luZy5MaW5lYXJcclxuKSB7XHJcbiAgICBpZiAodHlwZW9mIGVhc2luZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGVhc2luZyA9IGdldEVhc2luZ0Z1bmN0aW9uKGVhc2luZyk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIG91dFtpXSA9IHN0YXJ0W2ldICogKDEgLSBlYXNpbmcodCkpICsgZW5kW2ldICogZWFzaW5nKHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBlYXNpbmcgZnVuY3Rpb24gYmFzZWQgb24gdGhlIGdpdmVuIHR5cGUuXHJcbiAqIElmIHRoZSB0eXBlIGlzIGEgZnVuY3Rpb24sIGl0IGlzIHJldHVybmVkIGFzIGlzLlxyXG4gKiBJZiB0aGUgdHlwZSBpcyBub3QgYSBmdW5jdGlvbiwgdGhlIGRlZmF1bHQgbGluZWFyIGVhc2luZyBmdW5jdGlvbiBpcyByZXR1cm5lZC5cclxuICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiBlYXNpbmcgZnVuY3Rpb24gdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyBUaGUgZWFzaW5nIGZ1bmN0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RWFzaW5nRnVuY3Rpb24odHlwZTogRWFzaW5nRnVuY3Rpb24pOiBFYXNpbmdGdW5jdGlvbiB7XHJcbiAgICAvLyBEZWZhdWx0IHRvIGxpbmVhciBpbnRlcnBvbGF0aW9uXHJcbiAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0eXBlIDogRWFzaW5nLkxpbmVhcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENsYW1wcyBpbnB1dCB2YWx1ZSB0byBwcm92aWRlZCBtaW5pbXVtICYgbWF4aW11bSByYW5nZVxyXG4gKiBAcGFyYW0gdmFsdWUgTnVtZXJpYyBpbnB1dCBmb3IgY2xhbXBpbmcgb3BlcmF0aW9uXHJcbiAqIEBwYXJhbSBtaW4gTWluaW11bSBhbGxvd2VkIHJlc3VsdCBhZnRlciBjbGFtcGluZyApXHJcbiAqIEBwYXJhbSBtYXggTWF4aW11bSBhbGxvd2VkIHJlc3VsdCBhZnRlciBjbGFtcGluZ1xyXG4gKiBAcmV0dXJuIFJlc3VsdGluZyBvdXRwdXQgd2l0aGluIHNwZWNpZmllZCBjb25zdHJhaW50IHJhbmdlIFttaW4sbWF4XVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xyXG59XHJcbiIsICIvLyBXYXZlcyBhcmUgQUxXQVlaISEhIDExIGJ5IDUgKCByaWdodCBub3cgOlAgKVxyXG5leHBvcnQgY29uc3QgV2F2ZXMgPSBbXHJcbiAgICBbXHJcbiAgICAgICAgWzEsIDEsIDAsIDEsIDEsIDAsIDEsIDEsIDAsIDEsIDFdLFxyXG4gICAgICAgIFsyLCAyLCAyLCAyLCAyLCAwLCAyLCAyLCAyLCAyLCAyXSxcclxuICAgICAgICBbMywgMywgMywgMywgMywgMCwgMywgMywgMywgMywgM10sXHJcbiAgICAgICAgWzAsIDQsIDQsIDQsIDAsIDAsIDAsIDQsIDQsIDQsIDBdLFxyXG4gICAgICAgIFswLCA0LCAwLCA0LCAwLCAwLCAwLCA0LCAwLCA0LCAwXSxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgWzAsIDIsIDAsIDAsIDAsIDMsIDAsIDAsIDAsIDIsIDBdLFxyXG4gICAgICAgIFswLCA0LCAwLCAwLCAwLCAxLCAwLCAwLCAwLCA0LCAwXSxcclxuICAgICAgICBbNCwgNiwgNCwgMCwgMSwgNywgMSwgMCwgNCwgNiwgNF0sXHJcbiAgICAgICAgWzIsIDQsIDIsIDAsIDMsIDEsIDMsIDAsIDIsIDQsIDJdLFxyXG4gICAgICAgIFs0LCAyLCA0LCAwLCAxLCAzLCAxLCAwLCA0LCAyLCA0XSxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgWzAsIDAsIDAsIDMsIDIsIDEsIDIsIDMsIDAsIDAsIDBdLFxyXG4gICAgICAgIFswLCAwLCAzLCAyLCAxLCAxLCAxLCAyLCAzLCAwLCAwXSxcclxuICAgICAgICBbMCwgMywgMiwgMSwgMSwgNCwgMSwgMSwgMiwgMywgMF0sXHJcbiAgICAgICAgWzAsIDAsIDMsIDIsIDEsIDEsIDEsIDIsIDMsIDAsIDBdLFxyXG4gICAgICAgIFswLCAwLCAwLCAzLCAyLCAxLCAyLCAzLCAwLCAwLCAwXSxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgWzEsIDIsIDMsIDQsIDUsIDgsIDUsIDQsIDMsIDIsIDFdLFxyXG4gICAgICAgIFswLCAxLCAyLCAzLCA0LCA1LCA0LCAzLCAyLCAxLCAwXSxcclxuICAgICAgICBbMCwgMCwgMSwgMiwgMywgNCwgMywgMiwgMSwgMCwgMF0sXHJcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDMsIDIsIDEsIDAsIDAsIDBdLFxyXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwXSxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgWzAsIDEsIDAsIDEsIDAsIDEsIDAsIDEsIDAsIDEsIDBdLFxyXG4gICAgICAgIFs0LCAwLCA0LCAwLCA0LCAwLCA0LCAwLCA0LCAwLCA0XSxcclxuICAgICAgICBbMCwgMywgMCwgMywgMCwgMywgMCwgMywgMCwgMywgMF0sXHJcbiAgICAgICAgWzYsIDAsIDYsIDAsIDYsIDAsIDYsIDAsIDYsIDAsIDZdLFxyXG4gICAgICAgIFswLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwXSxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgWzAsIDAsIDAsIDgsIDAsIDAsIDAsIDgsIDAsIDAsIDBdLFxyXG4gICAgICAgIFswLCAwLCA4LCA2LCA4LCAwLCA4LCA2LCA4LCAwLCAwXSxcclxuICAgICAgICBbMCwgOCwgNiwgNCwgNiwgOCwgNiwgNCwgNiwgOCwgMF0sXHJcbiAgICAgICAgWzgsIDYsIDQsIDIsIDQsIDYsIDQsIDIsIDQsIDYsIDhdLFxyXG4gICAgICAgIFs2LCA0LCAyLCAwLCAyLCA0LCAyLCAwLCAyLCA0LCA2XSxcclxuICAgIF0sXHJcbl07XHJcbiIsICJpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcclxuaW1wb3J0IHt2ZWMzfSBmcm9tICdnbC1tYXRyaXgnO1xyXG5pbXBvcnQge0Vhc2luZywgbGVycFZlYzN9IGZyb20gJy4uL2NsYXNzZXMvdXRpbHMvbGVycC5qcyc7XHJcbmltcG9ydCB7Y2xhbXB9IGZyb20gJ0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMnO1xyXG5cclxuY29uc3QgdGVtcFZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xyXG5leHBvcnQgY2xhc3MgU2hvd0xlYWRlcmJvYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdzaG93LWxlYWRlcmJvYXJkJztcclxuXHJcbiAgICBwcml2YXRlIG9yaWdpbmFsUG9zaXRpb24gPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgcHJpdmF0ZSBoaWRkZW5Qb3NpdGlvbiA9IHZlYzMuY3JlYXRlKCk7XHJcbiAgICBwcml2YXRlIHRpbWVyID0gMDtcclxuICAgIHByaXZhdGUgaXNTaG93biA9IHRydWU7XHJcblxyXG4gICAgc3RhcnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLm9yaWdpbmFsUG9zaXRpb24pO1xyXG4gICAgICAgIHZlYzMuY29weSh0aGlzLmhpZGRlblBvc2l0aW9uLCB0aGlzLm9yaWdpbmFsUG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMuaGlkZGVuUG9zaXRpb25bMV0gPSAtMy41O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy50aW1lciA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy50aW1lciA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGR0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRpbWVyICs9IGR0O1xyXG4gICAgICAgIGNsYW1wKHRoaXMudGltZXIsIDAsIDEpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24pIHtcclxuICAgICAgICAgICAgbGVycFZlYzMoXHJcbiAgICAgICAgICAgICAgICB0ZW1wVmVjMyxcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbmFsUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLFxyXG4gICAgICAgICAgICAgICAgRWFzaW5nLkluQ3ViaWNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXJwVmVjMyhcclxuICAgICAgICAgICAgICAgIHRlbXBWZWMzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5Qb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXIsXHJcbiAgICAgICAgICAgICAgICBFYXNpbmcuT3V0Q3ViaWNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjMyk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXIgPj0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIE9iamVjdDNELCBUZXh0Q29tcG9uZW50fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7R2xvYmFsU2NvcmV9IGZyb20gJy4uLy4uL2hleVZSc2RrLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZXl2ckxlYWRlcmJvYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoZXl2ci1sZWFkZXJib2FyZCc7XHJcblxyXG4gICAgQHByb3BlcnR5LnN0cmluZygnJylcclxuICAgIGxlYWRlcmJvYXJkSWQgPSAnJztcclxuXHJcbiAgICBAcHJvcGVydHkuaW50KDEwKVxyXG4gICAgYW1vdW50U2NvcmVzRGlzcGxheWVkID0gMTA7XHJcblxyXG4gICAgQHByb3BlcnR5Lm9iamVjdCh7cmVxdWlyZWQ6IHRydWV9KVxyXG4gICAgbGFzdFNjb3JlRGlzcGxheSE6IE9iamVjdDNEO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3Qoe3JlcXVpcmVkOiB0cnVlfSlcclxuICAgIHRleHRDb2x1bW4xT2JqZWN0ITogT2JqZWN0M0Q7XHJcbiAgICBAcHJvcGVydHkub2JqZWN0KHtyZXF1aXJlZDogdHJ1ZX0pXHJcbiAgICB0ZXh0Q29sdW1uMk9iamVjdCE6IE9iamVjdDNEO1xyXG4gICAgQHByb3BlcnR5Lm9iamVjdCh7cmVxdWlyZWQ6IHRydWV9KVxyXG4gICAgdGV4dENvbHVtbjNPYmplY3QhOiBPYmplY3QzRDtcclxuXHJcbiAgICBAcHJvcGVydHkuYm9vbChmYWxzZSlcclxuICAgIGRlYnVnID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZmlyc3RDb2x1bW4/OiBUZXh0Q29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBzZWNvbmRDb2x1bW4/OiBUZXh0Q29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSB0aGlyZENvbHVtbj86IFRleHRDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIGxhc3RTY29yZURpc3BsYXlUZXh0PzogVGV4dENvbXBvbmVudDtcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmZpcnN0Q29sdW1uID0gdGhpcy50ZXh0Q29sdW1uMU9iamVjdC5nZXRDb21wb25lbnQoVGV4dENvbXBvbmVudCkhO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kQ29sdW1uID0gdGhpcy50ZXh0Q29sdW1uMk9iamVjdC5nZXRDb21wb25lbnQoVGV4dENvbXBvbmVudCkhO1xyXG4gICAgICAgIHRoaXMudGhpcmRDb2x1bW4gPSB0aGlzLnRleHRDb2x1bW4zT2JqZWN0LmdldENvbXBvbmVudChUZXh0Q29tcG9uZW50KSE7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdFNjb3JlRGlzcGxheSkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RTY29yZURpc3BsYXlUZXh0ID0gdGhpcy5sYXN0U2NvcmVEaXNwbGF5LmdldENvbXBvbmVudChUZXh0Q29tcG9uZW50KSE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJ2hleVZSJyBpbiB3aW5kb3cgfHwgdGhpcy5kZWJ1Zykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldExlYWRlcmJvYXJkKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3VibWl0U2NvcmUoc2NvcmU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RTY29yZURpc3BsYXlUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFNjb3JlRGlzcGxheVRleHQudGV4dCA9ICdMYXN0IHNjb3JlOiAnICsgc2NvcmU7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFNjb3JlRGlzcGxheVRleHQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdoZXlWUicgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB3aW5kb3cuaGV5VlIubGVhZGVyYm9hcmQucG9zdFNjb3JlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWFkZXJib2FyZElkLFxyXG4gICAgICAgICAgICAgICAgc2NvcmVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGVhZGVyYm9hcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kZWJ1Zykge1xyXG4gICAgICAgICAgICB0aGlzLmZpcnN0Q29sdW1uIS50ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kQ29sdW1uIS50ZXh0ID0gJ0xvYWRpbmcuLi4nO1xyXG4gICAgICAgICAgICB0aGlzLnRoaXJkQ29sdW1uIS50ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMZWFkZXJib2FyZCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3VtbWFyeSBSZXF1ZXN0IGFuIHVwZGF0ZSBvZiB0aGUgbGVhZGVyYm9hcmQgZW50cmllcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIGFscmVhZHkgZG9uZSBhZnRlciBAcmVmIHN1Ym1pdFNjb3JlKClcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0TGVhZGVyYm9hcmQoKSB7XHJcbiAgICAgICAgaWYgKCEoJ2hleVZSJyBpbiB3aW5kb3cpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmlyc3RDb2x1bW4hLnRleHQgPSAnJztcclxuICAgICAgICB0aGlzLnNlY29uZENvbHVtbiEudGV4dCA9ICdMb2FkaW5nLi4uJztcclxuICAgICAgICB0aGlzLnRoaXJkQ29sdW1uIS50ZXh0ID0gJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpbmRvdy5oZXlWUi5sZWFkZXJib2FyZC5nZXQoXHJcbiAgICAgICAgICAgIHRoaXMubGVhZGVyYm9hcmRJZCxcclxuICAgICAgICAgICAgdGhpcy5hbW91bnRTY29yZXNEaXNwbGF5ZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMub25TY29yZXNSZXRyaWV2ZWQocmVzdWx0KTtcclxuICAgIH1cclxuXHJcbiAgICBvblNjb3Jlc1JldHJpZXZlZChzY29yZXM6IEdsb2JhbFNjb3JlW10pIHtcclxuICAgICAgICBpZiAoc2NvcmVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZXRyaWV2aW5nIHNjb3JlcyBmYWlsZWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGxlZnRUZXh0ID0gJ1xcbic7XHJcbiAgICAgICAgbGV0IGNlbnRlclRleHQgPSAnXFxuJztcclxuICAgICAgICBsZXQgcmlnaHRUZXh0ID0gJ1xcbic7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4odGhpcy5hbW91bnRTY29yZXNEaXNwbGF5ZWQsIHNjb3Jlcy5sZW5ndGgpOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcmFuayA9IGkgKyAxICsgJ1xcbic7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoc2NvcmVzW2ldLnVzZXIgfHwgJ3Vua25vd24nKSArICdcXG4nO1xyXG4gICAgICAgICAgICBjb25zdCBzY29yZSA9IHNjb3Jlc1tpXS5zY29yZSArICdcXG4nO1xyXG5cclxuICAgICAgICAgICAgbGVmdFRleHQgKz0gcmFuaztcclxuICAgICAgICAgICAgY2VudGVyVGV4dCArPSBuYW1lO1xyXG4gICAgICAgICAgICByaWdodFRleHQgKz0gc2NvcmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZpcnN0Q29sdW1uIS50ZXh0ID0gbGVmdFRleHQ7XHJcbiAgICAgICAgdGhpcy5zZWNvbmRDb2x1bW4hLnRleHQgPSBjZW50ZXJUZXh0O1xyXG4gICAgICAgIHRoaXMudGhpcmRDb2x1bW4hLnRleHQgPSByaWdodFRleHQ7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7Q29tcG9uZW50LCBPYmplY3QzRH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcclxuaW1wb3J0IHtwcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xyXG5pbXBvcnQge2dhbWVTdGF0ZX0gZnJvbSAnLi4vY2xhc3Nlcy9nYW1lLXN0YXRlLmpzJztcclxuaW1wb3J0IHt2ZWMzfSBmcm9tICdnbC1tYXRyaXgnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEtleWJvYXJkQ29udHJvbHMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2tleWJvYXJkLWNvbnRyb2xzJztcclxuXHJcbiAgICBAcHJvcGVydHkub2JqZWN0KClcclxuICAgIG5vblZSQ2FtZXJhPzogT2JqZWN0M0Q7XHJcblxyXG4gICAgQHByb3BlcnR5Lm9iamVjdCgpXHJcbiAgICBtaXNzaWxlU3Bhd25Qb2ludD86IE9iamVjdDNEO1xyXG5cclxuICAgIHByaXZhdGUgc3BhY2VQcmVzc2VkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZvcndhcmQgPSB2ZWMzLmNyZWF0ZSgpO1xyXG5cclxuICAgIG9uQWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXNzS2V5Ym9hcmQpO1xyXG4gICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMucmVsZWFzZUtleWJvYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXNzS2V5Ym9hcmQpO1xyXG4gICAgICAgIC8vIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMucmVsZWFzZUtleWJvYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVzc0tleWJvYXJkID0gKGlucHV0OiBLZXlib2FyZEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKGlucHV0LmNvZGUgPT0gJ1NwYWNlJyAmJiAhdGhpcy5zcGFjZVByZXNzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGFjZVByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub25WUkNhbWVyYSAmJiB0aGlzLm1pc3NpbGVTcGF3blBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vblZSQ2FtZXJhLmdldEZvcndhcmRXb3JsZCh0aGlzLmZvcndhcmQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLm1pc3NpbGVTcGF3blBvaW50LmdldFBvc2l0aW9uV29ybGQoKTtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5maXJlKHRoaXMuZm9yd2FyZCwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZWxlYXNlS2V5Ym9hcmQgPSAoaW5wdXQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQuY29kZSA9PSAnU3BhY2UnICYmIHRoaXMuc3BhY2VQcmVzc2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2VQcmVzc2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIE9iamVjdDNEfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQge3Byb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XHJcbmltcG9ydCB7Q3Vyc29yVGFyZ2V0LCBNb3VzZUxvb2tDb21wb25lbnR9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vdXNlQ29udHJvbHMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21vdXNlLWNvbnRyb2xzJztcclxuXHJcbiAgICBAcHJvcGVydHkub2JqZWN0KClcclxuICAgIGN1cnNvclRhcmdldE9iamVjdCE6IE9iamVjdDNEO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoKVxyXG4gICAgbW91c2VMb29rT2JqZWN0ITogT2JqZWN0M0Q7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJzb3JUYXJnZXQhOiBDdXJzb3JUYXJnZXQ7XHJcbiAgICBwcml2YXRlIG1vdXNlbG9vayE6IE1vdXNlTG9va0NvbXBvbmVudDtcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAvLyB0aGlzLmN1cnNvclRhcmdldCA9IHRoaXMuY3Vyc29yVGFyZ2V0T2JqZWN0LmdldENvbXBvbmVudChDdXJzb3JUYXJnZXQpITtcclxuICAgICAgICAvLyB0aGlzLm1vdXNlbG9vayA9IHRoaXMubW91c2VMb29rT2JqZWN0LmdldENvbXBvbmVudChNb3VzZUxvb2tDb21wb25lbnQpITtcclxuICAgICAgICAvLyBnYW1lU3RhdGUubmV3R2FtZS5hZGQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1vdXNlbG9vay5yZXF1aXJlTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcclxuICAgICAgICAvLyAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jaygpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIC8vIHRoaXMuY3Vyc29yVGFyZ2V0Lm9uRG93bi5hZGQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1vdXNlbG9vay5yZXF1aXJlTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcclxuICAgICAgICAvLyAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jaygpO1xyXG4gICAgICAgIC8vICAgICBnYW1lU3RhdGUuZmlyZSh1bmRlZmluZWQsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IENvbXBvbmVudCwgT2JqZWN0M0QgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcclxuaW1wb3J0IHsgU3RhdGUsIGdhbWVTdGF0ZSB9IGZyb20gJy4uL2NsYXNzZXMvZ2FtZS1zdGF0ZS5qcyc7XHJcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xyXG5pbXBvcnQgeyBaZXN0eUJhbm5lciB9IGZyb20gJ0B6ZXN0eW1hcmtldC93b25kZXJsYW5kLXNkayc7XHJcblxyXG5jb25zdCBoYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J107XHJcblxyXG5jb25zdCB0ZW1wVmVjMyA9IHZlYzMuY3JlYXRlKCk7XHJcblxyXG5pbnRlcmZhY2UgUXVlc3RHYW1lcGFkSGFwdGljQWN0dWF0b3IgZXh0ZW5kcyBHYW1lcGFkSGFwdGljQWN0dWF0b3Ige1xyXG4gICAgcHVsc2UodmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcik6IHZvaWQ7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgVnJDb250cm9scyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndnItY29udHJvbHMnO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5vYmplY3QoKVxyXG4gICAgbGVmdENvbnRyb2xsZXI/OiBPYmplY3QzRDtcclxuXHJcbiAgICBAcHJvcGVydHkub2JqZWN0KClcclxuICAgIHJpZ2h0Q29udHJvbGxlcj86IE9iamVjdDNEO1xyXG5cclxuICAgIEBwcm9wZXJ0eS5ib29sKHRydWUpXHJcbiAgICBoYXB0aWNzID0gdHJ1ZTtcclxuXHJcbiAgICBwcml2YXRlIGhhbmRlZG5lc3MgPSAxO1xyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50bHlTaG9vdGluZ1dpdGhSaWdodCA9IHRydWU7XHJcbiAgICBwcml2YXRlIGZvcndhcmQ6IHZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0KTtcclxuICAgIH1cclxuXHJcbiAgICBvblNlc3Npb25TdGFydCA9XHJcbiAgICAgICAgKHNlc3Npb246IFhSU2Vzc2lvbikgPT4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGUuaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyA9PT0gaGFuZGVkbmVzc1t0aGlzLmhhbmRlZG5lc3NdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFwdGljcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1bHNlKGUuaW5wdXRTb3VyY2UuZ2FtZXBhZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRDb250cm9sbGVyIS5nZXRGb3J3YXJkV29ybGQodGhpcy5mb3J3YXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Q29udHJvbGxlciEuZ2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlYzNbMV0gKz0gMC4xMztcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wVmVjM1syXSAtPSAwLjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG9vdCh0aGlzLmZvcndhcmQsIHRlbXBWZWMzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgcHVsc2UoZ2FtZXBhZDogR2FtZXBhZCB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmICghZ2FtZXBhZCB8fCAhZ2FtZXBhZC5oYXB0aWNBY3R1YXRvcnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY3R1YXRvciA9IGdhbWVwYWQuaGFwdGljQWN0dWF0b3JzWzBdIGFzIFF1ZXN0R2FtZXBhZEhhcHRpY0FjdHVhdG9yO1xyXG4gICAgICAgIGlmICghYWN0dWF0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3R1YXRvci5wdWxzZSgxLCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHNob290KHRyYW5zZm9ybTogdmVjMywgcm90YXRpb246IHZlYzMpIHtcclxuICAgICAgICBpZiAoZ2FtZVN0YXRlLnN0YXRlID09PSBTdGF0ZS53ZWxjb21lIHx8IGdhbWVTdGF0ZS5zdGF0ZSA9PT0gU3RhdGUuZ2FtZU92ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdCh0cmFuc2Zvcm0sIHJvdGF0aW9uLCAxMCk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmhpdENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5vYmplY3RzWzBdPy5uYW1lID09PSAnWmVzdHlBZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQub2JqZWN0c1swXSEuZ2V0Q29tcG9uZW50KFplc3R5QmFubmVyKSEub25DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5maXJlKHRyYW5zZm9ybSwgcm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLmZpcmUodHJhbnNmb3JtLCByb3RhdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHTyEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCAqIGFzIF9fc29yc2tvb3Rfd29uZGVybGFuZF9jb21wb25lbnRzIGZyb20gJ0Bzb3Jza29vdC93b25kZXJsYW5kLWNvbXBvbmVudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9fc29yc2tvb3Rfd29uZGVybGFuZF9jb21wb25lbnRzKTtcbmltcG9ydCAqIGFzIF9fd29uZGVybGFuZGVuZ2luZV9jb21wb25lbnRzIGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9fd29uZGVybGFuZGVuZ2luZV9jb21wb25lbnRzKTtcbmltcG9ydCAqIGFzIF9fd29uZGVybGFuZGVuZ2luZV9zcGF0aWFsX2F1ZGlvIGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL3NwYXRpYWwtYXVkaW8nO1xuX3JlZ2lzdGVyRWRpdG9yKF9fd29uZGVybGFuZGVuZ2luZV9zcGF0aWFsX2F1ZGlvKTtcbmltcG9ydCAqIGFzIF9femVzdHltYXJrZXRfd29uZGVybGFuZF9zZGsgZnJvbSAnQHplc3R5bWFya2V0L3dvbmRlcmxhbmQtc2RrJztcbl9yZWdpc3RlckVkaXRvcihfX3plc3R5bWFya2V0X3dvbmRlcmxhbmRfc2RrKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19hY3RpdmVfYWRfdHMgZnJvbSAnZTovZGV2L0JhY2tUb1NwYWNlL2pzL2NvbXBvbmVudHMvYWN0aXZlLWFkLnRzJztcbl9yZWdpc3RlckVkaXRvcihfZV9fZGV2X0JhY2tUb1NwYWNlX2pzX2NvbXBvbmVudHNfYWN0aXZlX2FkX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19hY3RpdmVfb25fc3RhdGVfdHMgZnJvbSAnZTovZGV2L0JhY2tUb1NwYWNlL2pzL2NvbXBvbmVudHMvYWN0aXZlLW9uLXN0YXRlLnRzJztcbl9yZWdpc3RlckVkaXRvcihfZV9fZGV2X0JhY2tUb1NwYWNlX2pzX2NvbXBvbmVudHNfYWN0aXZlX29uX3N0YXRlX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19leHBsb3Npb25fcGFydGljbGVzX3RzIGZyb20gJ2U6L2Rldi9CYWNrVG9TcGFjZS9qcy9jb21wb25lbnRzL2V4cGxvc2lvbi1wYXJ0aWNsZXMudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19leHBsb3Npb25fcGFydGljbGVzX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19nYW1lX3RzIGZyb20gJ2U6L2Rldi9CYWNrVG9TcGFjZS9qcy9jb21wb25lbnRzL2dhbWUudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19nYW1lX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19pbnZhZGVyX3RzIGZyb20gJ2U6L2Rldi9CYWNrVG9TcGFjZS9qcy9jb21wb25lbnRzL2ludmFkZXIudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19pbnZhZGVyX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19rZXlib2FyZF9jb250cm9sc190cyBmcm9tICdlOi9kZXYvQmFja1RvU3BhY2UvanMvY29tcG9uZW50cy9rZXlib2FyZC1jb250cm9scy50cyc7XG5fcmVnaXN0ZXJFZGl0b3IoX2VfX2Rldl9CYWNrVG9TcGFjZV9qc19jb21wb25lbnRzX2tleWJvYXJkX2NvbnRyb2xzX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19taXNzaWxlX3RzIGZyb20gJ2U6L2Rldi9CYWNrVG9TcGFjZS9qcy9jb21wb25lbnRzL21pc3NpbGUudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19taXNzaWxlX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19tb3VzZV9jb250cm9sc190cyBmcm9tICdlOi9kZXYvQmFja1RvU3BhY2UvanMvY29tcG9uZW50cy9tb3VzZS1jb250cm9scy50cyc7XG5fcmVnaXN0ZXJFZGl0b3IoX2VfX2Rldl9CYWNrVG9TcGFjZV9qc19jb21wb25lbnRzX21vdXNlX2NvbnRyb2xzX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19zaG93X2xlYWRlcmJvYXJkX3RzIGZyb20gJ2U6L2Rldi9CYWNrVG9TcGFjZS9qcy9jb21wb25lbnRzL3Nob3ctbGVhZGVyYm9hcmQudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c19zaG93X2xlYWRlcmJvYXJkX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfY29tcG9uZW50c192cl9jb250cm9sc190cyBmcm9tICdlOi9kZXYvQmFja1RvU3BhY2UvanMvY29tcG9uZW50cy92ci1jb250cm9scy50cyc7XG5fcmVnaXN0ZXJFZGl0b3IoX2VfX2Rldl9CYWNrVG9TcGFjZV9qc19jb21wb25lbnRzX3ZyX2NvbnRyb2xzX3RzKTtcbmltcG9ydCAqIGFzIF9lX19kZXZfQmFja1RvU3BhY2VfanNfaGV5dnJfaGV5dnJfbGVhZGVyYm9hcmRfdHMgZnJvbSAnZTovZGV2L0JhY2tUb1NwYWNlL2pzL2hleXZyL2hleXZyLWxlYWRlcmJvYXJkLnRzJztcbl9yZWdpc3RlckVkaXRvcihfZV9fZGV2X0JhY2tUb1NwYWNlX2pzX2hleXZyX2hleXZyX2xlYWRlcmJvYXJkX3RzKTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFVQSxPQUFDLFdBQVc7QUFFVjtBQVNBLFlBQUlBLGdCQUFlLFdBQVc7QUFDNUIsZUFBSyxLQUFLO0FBQUEsUUFDWjtBQUNBLFFBQUFBLGNBQWEsWUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFLdkIsTUFBTSxXQUFXO0FBQ2YsZ0JBQUlDLFFBQU8sUUFBUUM7QUFHbkIsWUFBQUQsTUFBSyxXQUFXO0FBR2hCLFlBQUFBLE1BQUssa0JBQWtCLENBQUM7QUFDeEIsWUFBQUEsTUFBSyxnQkFBZ0I7QUFH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QzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSxvQkFBb0IsS0FBSyxJQUFJLEtBQUs7QUFDOUIsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLCtCQUErQixLQUFLLEtBQUssS0FBSyxRQUFRO0FBQzNELFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSxvQkFBb0IsS0FBSyxJQUFJLEtBQUs7QUFDOUIsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLCtCQUErQixLQUFLLEtBQUssS0FBSyxRQUFRO0FBQzNELFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSw0QkFBNEIsS0FBSyxJQUFJLEtBQUs7QUFDdEMsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLHVDQUF1QyxLQUFLLEtBQUssS0FBSyxRQUFRO0FBQ25FLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSw0QkFBNEIsS0FBSyxJQUFJLEtBQUs7QUFDdEMsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLHVDQUF1QyxLQUFLLEtBQUssS0FBSyxRQUFRO0FBQ25FLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSwyQkFBMkIsS0FBSyxJQUFJLEtBQUs7QUFDckMsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzQixXQUFLLHNDQUFzQyxLQUFLLEtBQUssS0FBSyxRQUFRO0FBQ2xFLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSwyQkFBMkIsS0FBSyxJQUFJLEtBQUs7QUFDckMsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsSUFBSSxDQUFDO0FBQ3hCLFdBQUssc0NBQXNDLEtBQUssS0FBSyxLQUFLLFFBQVE7QUFDbEUsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsYUFBTztBQUFBLElBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVVBLHNCQUFzQixLQUFLQSxLQUFJLEtBQUs7QUFDaEMsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixXQUFLLGNBQWMsSUFBSUEsRUFBQztBQUN4QixXQUFLLGlDQUFpQyxLQUFLLEtBQUssS0FBSyxRQUFRO0FBQzdELFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLFVBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFVQSxzQkFBc0IsS0FBS0EsS0FBSSxLQUFLO0FBQ2hDLFlBQU0sSUFBSSxLQUFLO0FBQ2YsVUFBSSxHQUFHO0FBQ0gsVUFBRSx1QkFBdUIsS0FBS0EsRUFBQztBQUMvQixlQUFPO0FBQUEsTUFDWDtBQUNBLFVBQUksUUFBUUEsSUFBRztBQUNYLFlBQUksQ0FBQyxJQUFJQSxHQUFFLENBQUM7QUFDWixZQUFJLENBQUMsSUFBSUEsR0FBRSxDQUFDO0FBQ1osWUFBSSxDQUFDLElBQUlBLEdBQUUsQ0FBQztBQUNaLFlBQUksQ0FBQyxJQUFJQSxHQUFFLENBQUM7QUFDWixZQUFJLENBQUMsSUFBSUEsR0FBRSxDQUFDO0FBQ1osWUFBSSxDQUFDLElBQUlBLEdBQUUsQ0FBQztBQUNaLFlBQUksQ0FBQyxJQUFJQSxHQUFFLENBQUM7QUFDWixZQUFJLENBQUMsSUFBSUEsR0FBRSxDQUFDO0FBQUEsTUFDaEI7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBVUEsdUJBQXVCLEtBQUtBLEtBQUksS0FBSztBQUNqQyxZQUFNLE9BQU8sS0FBSyxRQUFRO0FBQzFCLFdBQUssY0FBYyxJQUFJQSxFQUFDO0FBQ3hCLFdBQUssa0NBQWtDLEtBQUssS0FBSyxLQUFLLFFBQVE7QUFDOUQsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsVUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUM7QUFDN0IsYUFBTztBQUFBLElBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBY0EsT0FBTyxHQUFHLEtBQUssV0FBVztBQUN0QixXQUFLLFFBQVEsS0FBSyxrQkFBa0IsS0FBSyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ25GLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQSxJQUVBLFVBQVU7QUFDTixVQUFJLEtBQUssTUFBTTtBQUNYO0FBQ0osV0FBSyxPQUFPLEtBQUssa0JBQWtCLEtBQUssR0FBRztBQUMzQyxXQUFLLE1BQU0sZUFBZSxJQUFJO0FBQUEsSUFDbEM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFTQSxXQUFXO0FBQ1AsV0FBSyxRQUFRLEtBQUsscUJBQXFCLEtBQUssR0FBRztBQUFBLElBQ25EO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVFBLElBQUksT0FBTyxHQUFHO0FBQ1YsWUFBTSxRQUFRLEtBQUssY0FBYztBQUNqQyxlQUFTLEtBQUssT0FBTztBQUNqQixVQUFFLFNBQVM7QUFBQSxNQUNmO0FBQUEsSUFDSjtBQUFBLElBQ0EsYUFBYSxhQUFhLFFBQVEsR0FBRztBQUNqQyxZQUFNLE9BQU8sS0FBSyxRQUFRO0FBQzFCLFlBQU0sT0FBTyxTQUFTLFdBQVcsSUFBSSxjQUFjLFlBQVk7QUFDL0QsWUFBTSxRQUFRLEtBQUs7QUFDbkIsWUFBTSxnQkFBZ0IsS0FBSyxzQ0FBc0MsTUFBTSxRQUFRLEtBQUssU0FBUyxJQUFJLENBQUM7QUFDbEcsVUFBSSxnQkFBZ0IsR0FBRztBQUVuQixjQUFNLFlBQVksS0FBSyxzQkFBc0IsSUFBSTtBQUNqRCxZQUFJLGNBQWM7QUFDZCxpQkFBTztBQUNYLGNBQU0sVUFBVSxLQUFLLDJCQUEyQixLQUFLLEtBQUssV0FBVyxLQUFLO0FBQzFFLFlBQUksVUFBVTtBQUNWLGlCQUFPO0FBQ1gsY0FBTSxZQUFZLEtBQUssT0FBTyxjQUFjLE9BQU87QUFDbkQsZUFBTyxVQUFVLGdCQUFnQixrQkFBa0IsWUFBWTtBQUFBLE1BQ25FO0FBQ0EsWUFBTSxjQUFjLEtBQUsscUJBQXFCLEtBQUssS0FBSyxlQUFlLEtBQUs7QUFDNUUsYUFBTyxNQUFNLFlBQVksV0FBVyxlQUFlLFdBQVc7QUFBQSxJQUNsRTtBQUFBLElBQ0EsY0FBYyxhQUFhO0FBQ3ZCLFlBQU0sT0FBTyxLQUFLLFFBQVE7QUFDMUIsWUFBTSxRQUFRLEtBQUs7QUFDbkIsVUFBSSxVQUFVO0FBQ2QsVUFBSSxPQUFPO0FBQ1gsVUFBSSxhQUFhO0FBQ2IsZUFBTyxTQUFTLFdBQVcsSUFBSSxjQUFjLFlBQVk7QUFDekQsY0FBTSxnQkFBZ0IsTUFBTSxZQUFZLGlCQUFpQixJQUFJO0FBQzdELGtCQUFVLGtCQUFrQixPQUFPLGdCQUFnQixNQUFNLFlBQVk7QUFBQSxNQUN6RTtBQUNBLFlBQU0sYUFBYSxDQUFDO0FBQ3BCLFlBQU0sV0FBVyxLQUFLLE1BQU8sS0FBSyxlQUFlLElBQUssQ0FBQztBQUN2RCxZQUFNLGtCQUFrQixLQUFLLDBCQUEwQixLQUFLLEtBQUssS0FBSyxVQUFVLFFBQVE7QUFDeEYsWUFBTUMsVUFBUyxJQUFJO0FBQ25CLFdBQUssK0JBQStCLEtBQUssS0FBSyxLQUFLLFdBQVdBLFNBQVEsUUFBUTtBQUM5RSxlQUFTLElBQUksR0FBRyxJQUFJLGlCQUFpQixFQUFFLEdBQUc7QUFDdEMsY0FBTSxJQUFJLEtBQUssY0FBYyxJQUFJQSxPQUFNO0FBQ3ZDLGNBQU0sY0FBYyxLQUFLLGVBQWUsQ0FBQztBQUN6QyxZQUFJLFlBQVksUUFBUSxNQUFNO0FBQzFCO0FBQ0osY0FBTSxPQUFPLEtBQUssT0FBTyxZQUFZLFFBQVEsR0FBRyxXQUFXO0FBQzNELFlBQUk7QUFDQSxxQkFBVyxLQUFLLElBQUk7QUFBQSxNQUM1QjtBQUNBLGFBQU87QUFBQSxJQUNYO0FBQUEsSUFDQSxhQUFhLGFBQWEsUUFBUTtBQUM5QixZQUFNLE9BQU8sS0FBSyxRQUFRO0FBQzFCLFlBQU0sT0FBTyxTQUFTLFdBQVcsSUFBSSxjQUFjLFlBQVk7QUFDL0QsWUFBTSxnQkFBZ0IsS0FBSyxPQUFPLFlBQVksaUJBQWlCLElBQUk7QUFDbkUsWUFBTSxXQUFXLGtCQUFrQjtBQUNuQyxZQUFNLFVBQVUsV0FBVyxnQkFBZ0IsS0FBSyxPQUFPLFlBQVk7QUFDbkUsVUFBSSxjQUFjO0FBQ2xCLFVBQUksQ0FBQyxVQUFVO0FBRVgsWUFBSSxFQUFFLFFBQVEsS0FBSyx3QkFBd0I7QUFDdkMsZ0JBQU0sSUFBSSxVQUFVLDZCQUE2QixPQUFPLEdBQUc7QUFBQSxRQUMvRDtBQUNBLHNCQUFjLEtBQUssNEJBQTRCLEtBQUssS0FBSyxLQUFLLHNCQUFzQixJQUFJLENBQUM7QUFBQSxNQUM3RixPQUNLO0FBRUQsc0JBQWMsS0FBSyx5QkFBeUIsS0FBSyxLQUFLLE9BQU87QUFBQSxNQUNqRTtBQUNBLFlBQU0sWUFBWSxLQUFLLE9BQU8sWUFBWSxRQUFRLFNBQVMsV0FBVztBQUN0RSxVQUFJLFdBQVc7QUFDWCxrQkFBVSxLQUFLLE1BQU07QUFFekIsVUFBSSxDQUFDLFVBQVU7QUFDWCxrQkFBVSxhQUFhO0FBQUEsTUFFM0I7QUFHQSxVQUFJLENBQUMsVUFBVSxFQUFFLFlBQVksVUFBVSxDQUFDLE9BQU8sU0FBUztBQUNwRCxrQkFBVSxTQUFTO0FBQUEsTUFDdkI7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFjQSxXQUFXLE1BQU0sWUFBWSxPQUFPO0FBQ2hDLGFBQU8sWUFBWSxLQUFLLG9CQUFvQixJQUFJLElBQUksS0FBSyxpQkFBaUIsSUFBSTtBQUFBLElBQ2xGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBWUEsaUJBQWlCLE1BQU07QUFDbkIsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixZQUFNLEtBQUssS0FBSztBQUVoQixZQUFNLGNBQWMsS0FBSyxnQkFBZ0I7QUFDekMsWUFBTSxXQUFXLGNBQWM7QUFDL0IsWUFBTSxTQUFTLEtBQUs7QUFDcEIsYUFBTyxRQUFRLElBQUk7QUFDbkIsYUFBTyxXQUFXLENBQUMsSUFBSTtBQUN2QixZQUFNLFlBQVksS0FBSztBQUN2QixZQUFNLFdBQVcsWUFBWSxXQUFXO0FBQ3hDLFlBQU0sZ0JBQWdCLFlBQVksV0FBVyxJQUFJO0FBQ2pELFlBQU0sVUFBVSxLQUFLLFNBQVMsT0FBTyxXQUFXLEtBQUssQ0FBQztBQUN0RCxZQUFNLFNBQVMsQ0FBQztBQUNoQixVQUFJLE9BQU87QUFDWCxhQUFRLE9BQU8sS0FBSyxzQkFBc0IsSUFBSSxTQUFTLFVBQVUsZUFBZSxXQUFXLFFBQVEsR0FBSTtBQUNuRyxpQkFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsR0FBRztBQUMzQixpQkFBTyxLQUFLLEtBQUssT0FBTyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFBQSxRQUMzQztBQUFBLE1BQ0o7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVlBLG9CQUFvQixNQUFNO0FBQ3RCLFlBQU0sT0FBTyxLQUFLLFFBQVE7QUFDMUIsWUFBTSxLQUFLLEtBQUs7QUFFaEIsWUFBTSxjQUFjLEtBQUssZ0JBQWdCO0FBQ3pDLFlBQU0sV0FBVyxjQUFjO0FBQy9CLFlBQU0sU0FBUyxLQUFLO0FBQ3BCLGFBQU8sUUFBUSxJQUFJO0FBQ25CLFlBQU0sWUFBWSxLQUFLO0FBQ3ZCLFlBQU0sV0FBVyxZQUFZLFdBQVc7QUFDeEMsWUFBTSxVQUFVLEtBQUssU0FBUyxPQUFPLFdBQVcsS0FBSyxDQUFDO0FBQ3RELFVBQUksT0FBTztBQUNYLFlBQU0sU0FBUyxDQUFDO0FBQ2hCLGFBQVEsT0FBTyxLQUFLLCtCQUErQixJQUFJLFNBQVMsVUFBVSxXQUFXLFFBQVEsR0FBSTtBQUM3RixpQkFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsR0FBRztBQUMzQixpQkFBTyxLQUFLLEtBQUssT0FBTyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFBQSxRQUMzQztBQUFBLE1BQ0o7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSUEsSUFBSSxVQUFVO0FBQ1YsYUFBTyxDQUFDLENBQUMsS0FBSyxRQUFRLEtBQUssc0JBQXNCLEtBQUssR0FBRztBQUFBLElBQzdEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBcUJBLElBQUksY0FBYztBQUNkLGFBQU8sS0FBSyxNQUFNO0FBQUEsSUFDdEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFlQSxPQUFPLGFBQWE7QUFFaEIsVUFBSSxDQUFDO0FBQ0QsZUFBTztBQUNYLGFBQU8sS0FBSyxPQUFPLFlBQVk7QUFBQSxJQUNuQztBQUFBO0FBQUEsSUFFQSxXQUFXO0FBQ1AsVUFBSSxLQUFLLGFBQWE7QUFDbEIsZUFBTztBQUFBLE1BQ1g7QUFDQSxhQUFPLGFBQWEsS0FBSyxVQUFVLEtBQUs7QUFBQSxJQUM1QztBQUFBLEVBQ0o7QUFJTyxNQUFNLE9BQU4sY0FBbUIsY0FBYztBQUFBLElBQ3BDLFlBQVksTUFBTSxPQUFPO0FBQ3JCLFlBQU0sUUFBUSxnQkFBZ0IsWUFBWSxPQUFPLEtBQUs7QUFDdEQsWUFBTSxPQUFPLEtBQUs7QUFBQSxJQUN0QjtBQUFBO0FBQUEsSUFFQSxJQUFJLGFBQWE7QUFDYixhQUFPLEtBQUssT0FBTyxLQUFLLHlCQUF5QixLQUFLLEdBQUc7QUFBQSxJQUM3RDtBQUFBO0FBQUEsSUFFQSxJQUFJLFdBQVc7QUFDWCxZQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQU8sSUFBSSxZQUFZLEtBQUssUUFBUSxRQUFRLEtBQUssbUJBQW1CLEtBQUssR0FBRyxHQUFHLEtBQUssVUFBVTtBQUFBLElBQ2xHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTUEsSUFBSSx3QkFBd0I7QUFDeEIsWUFBTSxPQUFPLEtBQUssT0FBTztBQUN6QixhQUFPLElBQUksYUFBYSxLQUFLLFFBQVEsUUFBUSxLQUFLLGlDQUFpQyxLQUFLLEdBQUcsR0FBRyxJQUFJLEtBQUssVUFBVTtBQUFBLElBQ3JIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTUEsSUFBSSxzQkFBc0I7QUFDdEIsWUFBTSxPQUFPLEtBQUssT0FBTztBQUN6QixhQUFPLElBQUksYUFBYSxLQUFLLFFBQVEsUUFBUSxLQUFLLCtCQUErQixLQUFLLEdBQUcsR0FBRyxJQUFJLEtBQUssVUFBVTtBQUFBLElBQ25IO0FBQUEsRUFDSjtBQWNPLE1BQU0sZUFBTixjQUEyQixjQUFjO0FBQUE7QUFBQSxJQUU1QyxJQUFJLFFBQVE7QUFDUixhQUFPLEtBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEdBQUc7QUFBQSxJQUN2RTtBQUFBO0FBQUEsSUFFQSxjQUFjLFFBQVE7QUFDbEIsVUFBSSxVQUFVLEtBQUssT0FBTztBQUN0QixjQUFNLElBQUksTUFBTSxTQUFTLCtCQUErQixLQUFLLGVBQWU7QUFBQSxNQUNoRjtBQUNBLFlBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBTyxLQUFLLGFBQWEsS0FBSyxrQ0FBa0MsS0FBSyxLQUFLLE1BQU0sQ0FBQztBQUFBLElBQ3JGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVFBLGVBQWUsTUFBTTtBQUNqQixZQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLFlBQU0sUUFBUSxLQUFLLG1DQUFtQyxLQUFLLEtBQUssS0FBSyxTQUFTLElBQUksQ0FBQztBQUNuRixVQUFJLFVBQVUsSUFBSTtBQUNkLGNBQU0sTUFBTSxtQkFBbUIsT0FBTztBQUFBLE1BQzFDO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKO0FBVU8sTUFBTSxTQUFOLE1BQWE7QUFBQTtBQUFBLElBRWhCO0FBQUE7QUFBQSxJQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJQSxZQUFZLE9BQU8sS0FBSztBQUNwQixXQUFLLE1BQU0sT0FBTyxHQUFHO0FBQ2pCLGNBQU0sSUFBSSxNQUFNLHlDQUF5QztBQUFBLE1BQzdEO0FBQ0EsV0FBSyxTQUFTO0FBQ2QsV0FBSyxPQUFPO0FBQUEsSUFDaEI7QUFBQSxJQUNBLGFBQWEsS0FBSztBQUNkLFlBQU0sT0FBTyxNQUFNLEtBQUssRUFBRSxRQUFRLEtBQUssU0FBUyxHQUFHLE1BQU0sSUFBSSxhQUFhLENBQUMsQ0FBQztBQUM1RSxZQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLFlBQU0sYUFBYSxLQUFLLE9BQU87QUFDL0IsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFVBQVUsRUFBRSxHQUFHO0FBQ3BDLGNBQU0sY0FBYyxhQUFhLElBQUk7QUFDckMsWUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssUUFBUSxXQUFXO0FBQ3BDLFlBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLFFBQVEsY0FBYyxDQUFDO0FBQ3hDLFlBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLFFBQVEsY0FBYyxDQUFDO0FBQUEsTUFDNUM7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBLElBQ0EsV0FBVyxLQUFLO0FBQ1osWUFBTSxPQUFPLE1BQU0sS0FBSyxFQUFFLFFBQVEsS0FBSyxTQUFTLEdBQUcsTUFBTSxJQUFJLGFBQWEsQ0FBQyxDQUFDO0FBQzVFLFlBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsWUFBTSxjQUFjLEtBQUssT0FBTyxNQUFNO0FBQ3RDLGVBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxVQUFVLEVBQUUsR0FBRztBQUNwQyxjQUFNLFlBQVksYUFBYSxJQUFJO0FBQ25DLFlBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLFFBQVEsU0FBUztBQUNsQyxZQUFJLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxRQUFRLFlBQVksQ0FBQztBQUN0QyxZQUFJLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxRQUFRLFlBQVksQ0FBQztBQUFBLE1BQzFDO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQSxJQUNBLGFBQWEsTUFBTSxJQUFJLGFBQWEsS0FBSyxRQUFRLEdBQUc7QUFDaEQsWUFBTSxPQUFPLEtBQUssT0FBTztBQUN6QixZQUFNLGNBQWMsS0FBSyxPQUFPLEtBQUssS0FBSztBQUMxQyxlQUFTLElBQUksR0FBRyxJQUFJLEtBQUssVUFBVSxFQUFFLEdBQUc7QUFDcEMsY0FBTSxjQUFjLGFBQWE7QUFDakMsWUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLFdBQVc7QUFBQSxNQUNyQztBQUNBLGFBQU87QUFBQSxJQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxXQUFXLE1BQU0sSUFBSSxNQUFNLEtBQUssUUFBUSxHQUFHO0FBQ3ZDLFlBQU0sVUFBVSxLQUFLLE9BQU8sS0FBSztBQUNqQyxZQUFNLGFBQWMsS0FBSyxRQUFRLEtBQUssSUFBSSxPQUFRO0FBQ2xELGVBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxVQUFVLEVBQUUsR0FBRztBQUNwQyxZQUFJLENBQUMsSUFBSSxLQUFLLE9BQU8sS0FBSyxRQUFRLGFBQWEsQ0FBQyxDQUFDO0FBQUEsTUFDckQ7QUFDQSxhQUFPO0FBQUEsSUFDWDtBQUFBO0FBQUEsSUFFQSxJQUFJLFNBQVM7QUFDVCxhQUFPLEtBQUssT0FBTztBQUFBLElBQ3ZCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTUEsSUFBSSxZQUFZO0FBQ1osYUFBTyxLQUFLLGFBQWE7QUFBQSxJQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1BLElBQUksVUFBVTtBQUNWLGFBQU8sS0FBSyxXQUFXO0FBQUEsSUFDM0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFNQSxJQUFJLFlBQVk7QUFDWixhQUFPLEtBQUssYUFBYTtBQUFBLElBQzdCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTUEsSUFBSSxVQUFVO0FBRVYsWUFBTSxVQUFVLENBQUMsTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUN2QyxhQUFPLEtBQUssV0FBVyxPQUFPO0FBQUEsSUFDbEM7QUFBQTtBQUFBLElBRUEsSUFBSSxXQUFXO0FBQ1gsYUFBTyxLQUFLLElBQUksS0FBSyxPQUFPLEtBQUssUUFBUSxLQUFLLE9BQU8sSUFBSSxFQUFFLEdBQUcsQ0FBQztBQUFBLElBQ25FO0FBQUEsRUFDSjs7O0FDbnFKTyxNQUFJO0FBQ1gsR0FBQyxTQUFVQyxXQUFVO0FBQ2pCLElBQUFBLFVBQVNBLFVBQVMsTUFBTSxJQUFJLENBQUMsSUFBSTtBQUNqQyxJQUFBQSxVQUFTQSxVQUFTLE1BQU0sSUFBSSxDQUFDLElBQUk7QUFDakMsSUFBQUEsVUFBU0EsVUFBUyxPQUFPLElBQUksQ0FBQyxJQUFJO0FBQUEsRUFDdEMsR0FBRyxhQUFhLFdBQVcsQ0FBQyxFQUFFOzs7QUNBOUIsTUFBTSxxQkFBcUIsb0JBQUksSUFBSTtBQUFBLElBQy9CLENBQUMsS0FBSyxNQUFNLEtBQUs7QUFBQSxJQUNqQixDQUFDLEtBQUssS0FBSyxDQUFDO0FBQUEsSUFDWixDQUFDLEtBQUssT0FBTyxDQUFHO0FBQUEsSUFDaEIsQ0FBQyxLQUFLLFFBQVEsRUFBRTtBQUFBLElBQ2hCLENBQUMsS0FBSyxNQUFNLE1BQVM7QUFBQSxJQUNyQixDQUFDLEtBQUssUUFBUSxJQUFJO0FBQUEsSUFDbEIsQ0FBQyxLQUFLLE1BQU0sSUFBSTtBQUFBLElBQ2hCLENBQUMsS0FBSyxTQUFTLElBQUk7QUFBQSxJQUNuQixDQUFDLEtBQUssVUFBVSxJQUFJO0FBQUEsSUFDcEIsQ0FBQyxLQUFLLFdBQVcsSUFBSTtBQUFBLElBQ3JCLENBQUMsS0FBSyxNQUFNLElBQUk7QUFBQSxJQUNoQixDQUFDLEtBQUssT0FBTyxDQUFDLEdBQUssR0FBSyxHQUFLLENBQUcsQ0FBQztBQUFBLEVBQ3JDLENBQUM7OztBQ3RCRCxNQUFJQyxjQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFHQSxNQUFNLHNCQUFOLE1BQTBCO0FBQUEsSUFDdEI7QUFBQSxJQUNBO0FBQUEsSUFDQSxZQUFZLFFBQVE7QUFDaEIsV0FBSyxXQUFXLENBQUM7QUFDakIsV0FBSyxTQUFTO0FBQUEsSUFDbEI7QUFBQSxJQUNBLGFBQWEsS0FBSyxTQUFTLE1BQU07QUFDN0IsVUFBSSxDQUFDLEtBQUssU0FBUyxlQUFlLEdBQUcsR0FBRztBQUNwQyxhQUFLLFNBQVMsR0FBRyxJQUFJLElBQUksUUFBUSxDQUFDLFNBQVMsV0FBVztBQUNsRCxjQUFJLFFBQVEsSUFBSSxNQUFNO0FBQ3RCLGNBQUksV0FBVyxDQUFDO0FBQ2hCLGdCQUFNLE1BQU07QUFDWixnQkFBTSxTQUFTLE1BQU07QUFDakIsZ0JBQUlDLFVBQVMsU0FBUyxjQUFjLFFBQVE7QUFDNUMsZ0JBQUlDLFdBQVVELFFBQU8sV0FBVyxJQUFJO0FBQ3BDLGdCQUFJQyxZQUFXO0FBQ1gscUJBQU8sdUJBQXVCO0FBQ2xDLFlBQUFELFFBQU8sUUFBUSxNQUFNO0FBQ3JCLFlBQUFBLFFBQU8sU0FBUyxNQUFNO0FBQ3RCLFlBQUFDLFNBQVEsVUFBVSxPQUFPLEdBQUcsQ0FBQztBQUM3QixnQkFBSSxjQUFjLE1BQU0sUUFBUTtBQUNoQyxnQkFBSSxlQUFlLE1BQU0sU0FBUztBQUNsQyxxQkFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLEtBQUs7QUFDM0IsdUJBQVMsSUFBSSxHQUFHLElBQUksU0FBUyxLQUFLO0FBQzlCLG9CQUFJLEtBQUssS0FBSyxpQkFBaUJELFNBQVEsSUFBSSxhQUFhLElBQUksY0FBYyxhQUFhLFlBQVk7QUFDbkcsb0JBQUksWUFBWSxJQUFJLFFBQVEsS0FBSyxRQUFRLEVBQUU7QUFDM0MseUJBQVMsS0FBSyxTQUFTO0FBQUEsY0FDM0I7QUFBQSxZQUNKO0FBQ0Esb0JBQVEsUUFBUTtBQUFBLFVBQ3BCO0FBQUEsUUFDSixDQUFDO0FBQUEsTUFDTDtBQUNBLGFBQU8sS0FBSyxTQUFTLEdBQUc7QUFBQSxJQUM1QjtBQUFBLElBQ0EsaUJBQWlCQSxTQUFRLEdBQUcsR0FBRyxPQUFPLFFBQVE7QUFDMUMsVUFBSUUsUUFBTyxTQUFTLGNBQWMsUUFBUTtBQUMxQyxNQUFBQSxNQUFLLFFBQVE7QUFDYixNQUFBQSxNQUFLLFNBQVM7QUFDZCxVQUFJLE9BQU9BLE1BQUssV0FBVyxJQUFJO0FBQy9CLFdBQUssVUFBVUYsU0FBUSxHQUFHLEdBQUcsT0FBTyxRQUFRLEdBQUcsR0FBRyxPQUFPLE1BQU07QUFDL0QsYUFBT0U7QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUNBLE1BQUk7QUFDRyxNQUFNLFdBQU4sY0FBdUIsVUFBVTtBQUFBLElBRXBDO0FBQUEsSUFDQSxNQUFNO0FBQUEsSUFDTixjQUFjO0FBQUEsSUFDZCxVQUFVO0FBQUEsSUFDVixPQUFPO0FBQUEsSUFDUCxRQUFRO0FBQUEsSUFDUixXQUFXLENBQUM7QUFBQSxJQUNaLFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLE9BQU87QUFDSCxVQUFJLENBQUMsY0FBYztBQUNmLHVCQUFlLElBQUksb0JBQW9CLEtBQUssTUFBTTtBQUFBLE1BQ3REO0FBQ0EsVUFBSSxtQkFBbUIsQ0FBQztBQUN4Qix1QkFBaUIsS0FBSyxhQUFhLGFBQWEsS0FBSyxLQUFLLEtBQUssU0FBUyxLQUFLLElBQUksQ0FBQztBQUNsRixVQUFJLEtBQUssYUFBYTtBQUNsQix5QkFBaUIsS0FBSyxhQUFhLGFBQWEsS0FBSyxhQUFhLEtBQUssU0FBUyxLQUFLLElBQUksQ0FBQztBQUFBLE1BQzlGO0FBQ0EsY0FBUSxJQUFJLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxRQUFRO0FBQ3hDLGFBQUssV0FBVyxDQUFDO0FBQ2pCLFlBQUksS0FBSyxhQUFhO0FBQ2xCLG1CQUFTLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxFQUFFLFFBQVEsS0FBSztBQUNwQyxpQkFBSyxTQUFTLEtBQUssS0FBSyxlQUFlLEtBQUssTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFBQSxVQUMzRTtBQUFBLFFBQ0osT0FDSztBQUNELG1CQUFTLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxFQUFFLFFBQVEsS0FBSztBQUNwQyxpQkFBSyxTQUFTLEtBQUssS0FBSyxlQUFlLEtBQUssTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUFBLFVBQ2hFO0FBQUEsUUFDSjtBQUNBLGFBQUssU0FBUztBQUNkLGFBQUssUUFBUSxLQUFLLE1BQU0sS0FBSyxPQUFPLElBQUksS0FBSyxTQUFTLE1BQU07QUFBQSxNQUNoRSxDQUFDO0FBQUEsSUFDTDtBQUFBLElBQ0EsZUFBZSxNQUFNLFNBQVMsa0JBQWtCLE1BQU07QUFDbEQsWUFBTSxNQUFNLEtBQUssTUFBTTtBQUN2QixVQUFJLENBQUM7QUFDRCxjQUFNLElBQUksTUFBTSwwQkFBMEI7QUFDOUMsVUFBSSxJQUFJLFlBQVksMEJBQ2IsSUFBSSxTQUFTLFdBQVcsY0FBYyxHQUFHO0FBQzVDLGNBQU0sVUFBVTtBQUNoQixnQkFBUSxjQUFjO0FBQ3RCLFlBQUksSUFBSSxZQUFZLHlCQUF5QjtBQUN6QyxrQkFBUSxjQUFjO0FBQ3RCLGNBQUksaUJBQWlCO0FBQ2pCLG9CQUFRLGtCQUFrQjtBQUFBLFVBQzlCO0FBQUEsUUFDSjtBQUFBLE1BQ0osT0FDSztBQUNELGdCQUFRLE1BQU0sWUFBWSxJQUFJLG9DQUFvQztBQUFBLE1BQ3RFO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQSxJQUNBLE1BQU07QUFBQSxJQUNOLElBQUk7QUFBQSxJQUNKLFFBQVE7QUFDSixXQUFLLE1BQU0sS0FBSyxPQUFPLGFBQWEsYUFBYTtBQUNqRCxXQUFLLElBQUksS0FBSyxPQUFPLElBQUksS0FBSztBQUFBLElBQ2xDO0FBQUEsSUFDQSxnQkFBZ0I7QUFBQSxJQUNoQixPQUFPLElBQUk7QUFDUCxVQUFJLENBQUMsS0FBSztBQUNOO0FBQ0osV0FBSyxLQUFLLEtBQUssS0FBSztBQUNwQixXQUFLLFFBQVEsQ0FBQyxDQUFDLEtBQUssSUFBSSxLQUFLLFNBQVM7QUFDdEMsVUFBSSxLQUFLLFlBQ0wsS0FBSyxTQUFTLFVBQ2QsS0FBSyxpQkFBaUIsS0FBSyxTQUMzQixLQUFLLEtBQUs7QUFDVixhQUFLLGdCQUFnQixLQUFLO0FBQzFCLGFBQUssSUFBSSxXQUFXLEtBQUssU0FBUyxLQUFLLEtBQUs7QUFBQSxNQUNoRDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBM0VJLGdCQURTLFVBQ0YsWUFBVztBQTRFdEIsRUFBQUgsWUFBVztBQUFBLElBQ1AsU0FBUyxTQUFTO0FBQUEsRUFDdEIsR0FBRyxTQUFTLFdBQVcsUUFBUSxNQUFNO0FBQ3JDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsT0FBTyxFQUFFO0FBQUEsRUFDdEIsR0FBRyxTQUFTLFdBQVcsT0FBTyxNQUFNO0FBQ3BDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsT0FBTyxFQUFFO0FBQUEsRUFDdEIsR0FBRyxTQUFTLFdBQVcsZUFBZSxNQUFNO0FBQzVDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsSUFBSSxDQUFDO0FBQUEsRUFDbEIsR0FBRyxTQUFTLFdBQVcsV0FBVyxNQUFNO0FBQ3hDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsSUFBSSxDQUFDO0FBQUEsRUFDbEIsR0FBRyxTQUFTLFdBQVcsUUFBUSxNQUFNO0FBQ3JDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTSxDQUFHO0FBQUEsRUFDdEIsR0FBRyxTQUFTLFdBQVcsU0FBUyxNQUFNOzs7QUNwSnRDLE1BQUlJLGNBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQUdPLE1BQU0sU0FBTixjQUFxQixVQUFVO0FBQUEsSUFFbEM7QUFBQSxFQUNKO0FBRkksZ0JBRFMsUUFDRixZQUFXO0FBR3RCLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsT0FBTztBQUFBLEVBQ3BCLEdBQUcsT0FBTyxXQUFXLFFBQVEsTUFBTTs7O0FDWjVCLE1BQU0sZ0JBQU4sY0FBNEIsVUFBVTtBQUFBLElBRXpDLFVBQVUsQ0FBQztBQUFBLElBQ1gsUUFBUTtBQUNKLFVBQUksV0FBVyxLQUFLLE9BQU87QUFDM0IsZUFBUyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsS0FBSztBQUN0QyxZQUFJLFFBQVEsU0FBUyxDQUFDO0FBQ3RCLFlBQUksY0FBYyxNQUFNLGFBQWEsTUFBTTtBQUMzQyxZQUFJLGFBQWE7QUFDYixlQUFLLFFBQVEsWUFBWSxJQUFJLElBQUk7QUFDakMsZ0JBQU0saUJBQWlCLENBQUMsTUFBTyxNQUFPLElBQUssQ0FBQztBQUFBLFFBQ2hEO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBUUEsWUFBWSxZQUFZLGNBQWM7QUFDbEMsVUFBSSxTQUFTLEtBQUssUUFBUSxVQUFVO0FBQ3BDLFVBQUksQ0FBQyxRQUFRO0FBQ1QsZ0JBQVEsTUFBTSxzQkFBc0IsYUFBYSxxQ0FBcUM7QUFDdEY7QUFBQSxNQUNKO0FBQ0EsVUFBSSxNQUFNLEtBQUssT0FBTyxNQUFNLFVBQVUsWUFBWTtBQUNsRCxVQUFJLE9BQU87QUFDWCxVQUFJLFdBQVcsT0FBTyxnQkFBZ0IsQ0FBQztBQUN2QyxVQUFJLGtCQUFrQixPQUFPLGtCQUFrQixDQUFDO0FBQ2hELFVBQUksYUFBYSxPQUFPLGFBQWEsYUFBYTtBQUNsRCxVQUFJLFlBQVk7QUFDWixZQUFJLFVBQVUsSUFBSSxhQUFhLGFBQWE7QUFDNUMsWUFBSSxDQUFDLFNBQVM7QUFDVixrQkFBUSxNQUFNLDZDQUE2QztBQUMzRDtBQUFBLFFBQ0o7QUFDQSxnQkFBUSxPQUFPLFdBQVc7QUFDMUIsZ0JBQVEsV0FBVyxXQUFXO0FBQUEsTUFDbEM7QUFDQSxVQUFJLGtCQUFrQixPQUFPLGFBQWEsa0JBQWtCO0FBQzVELFVBQUksaUJBQWlCO0FBQ2pCLFlBQUksZUFBZSxJQUFJLGFBQWEsa0JBQWtCO0FBQ3RELFlBQUksQ0FBQyxjQUFjO0FBQ2Ysa0JBQVEsTUFBTSxrREFBa0Q7QUFDaEU7QUFBQSxRQUNKO0FBQ0EscUJBQWEsV0FBVyxnQkFBZ0I7QUFDeEMscUJBQWEsVUFBVSxnQkFBZ0I7QUFDdkMscUJBQWEsUUFBUSxnQkFBZ0I7QUFBQSxNQUN6QztBQUNBLFVBQUksU0FBUztBQUNiLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQXRESSxnQkFEUyxlQUNGLFlBQVc7OztBQ0h0QixNQUFJQyxjQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFHQSxNQUFNLGFBQWEsQ0FBQyxRQUFRLE9BQU87QUFDNUIsTUFBTSxZQUFOLGNBQXdCLFVBQVU7QUFBQSxJQUVyQyxVQUFVO0FBQUEsSUFDVixhQUFhO0FBQUEsSUFDYixjQUFjO0FBQUEsSUFDZCxRQUFRO0FBQ0osV0FBSyxjQUFjO0FBQ25CLFdBQUssT0FBTyxpQkFBaUIsSUFBSSxDQUFDLFlBQVk7QUFDMUMsWUFBSSxLQUFLO0FBQ0w7QUFDSixnQkFBUSxpQkFBaUIsVUFBVSxDQUFDLE1BQU07QUFDdEMsY0FBSSxDQUFDLEtBQUs7QUFDTjtBQUNKLGNBQUksRUFBRSxZQUFZLGVBQWUsV0FBVyxLQUFLLFVBQVUsR0FBRztBQUMxRCxnQkFBSSxLQUFLLFNBQVM7QUFDZCxtQkFBSyxNQUFNLEVBQUUsWUFBWSxPQUFPO0FBQUEsWUFDcEM7QUFFQSxpQkFBSyxNQUFNLEtBQUssT0FBTyxpQkFBaUIsR0FBRyxLQUFLLE9BQU8saUJBQWlCLENBQUM7QUFBQSxVQUM3RTtBQUFBLFFBQ0osQ0FBQztBQUNELGFBQUssY0FBYztBQUFBLE1BQ3ZCLENBQUM7QUFBQSxJQUNMO0FBQUEsSUFDQSxNQUFNLFNBQVM7QUFDWCxVQUFJO0FBQ0osVUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLGlCQUFpQjtBQUN0QztBQUFBLE1BQ0o7QUFDQSxpQkFBVyxRQUFRLGdCQUFnQixDQUFDO0FBQ3BDLFVBQUksQ0FBQztBQUNEO0FBQ0osZUFBUyxNQUFNLEdBQUcsR0FBRztBQUFBLElBQ3pCO0FBQUEsSUFDQSxNQUFNLFdBQVcsVUFBVTtBQUFBLElBQUU7QUFBQSxFQUNqQztBQWxDSSxnQkFEUyxXQUNGLFlBQVc7QUFtQ3RCLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsS0FBSyxJQUFJO0FBQUEsRUFDdEIsR0FBRyxVQUFVLFdBQVcsV0FBVyxNQUFNO0FBQ3pDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsS0FBSyxDQUFDLFFBQVEsT0FBTyxDQUFDO0FBQUEsRUFDbkMsR0FBRyxVQUFVLFdBQVcsY0FBYyxNQUFNOzs7QUM3Q3JDLE1BQUksVUFBVTtBQUNkLE1BQUksYUFBYSxPQUFPLGlCQUFpQixjQUFjLGVBQWU7QUFDdEUsTUFBSSxTQUFTLEtBQUs7QUFVekIsTUFBSSxTQUFTLEtBQUssS0FBSztBQXVCdkIsTUFBSSxDQUFDLEtBQUs7QUFBTyxTQUFLLFFBQVEsV0FBWTtBQUN4QyxVQUFJLElBQUksR0FDSixJQUFJLFVBQVU7QUFFbEIsYUFBTyxLQUFLO0FBQ1YsYUFBSyxVQUFVLENBQUMsSUFBSSxVQUFVLENBQUM7QUFBQSxNQUNqQztBQUVBLGFBQU8sS0FBSyxLQUFLLENBQUM7QUFBQSxJQUNwQjs7O0FDckNPLFdBQVMsU0FBUztBQUN2QixRQUFJLE1BQU0sSUFBYSxXQUFXLENBQUM7QUFFbkMsUUFBYSxjQUFjLGNBQWM7QUFDdkMsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQUEsSUFDWDtBQUVBLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFdBQU87QUFBQSxFQUNUOzs7QUM1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0JBQUFDO0FBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWU8sV0FBU0MsVUFBUztBQUN2QixRQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFFcEMsUUFBYSxjQUFjLGNBQWM7QUFDdkMsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQUEsSUFDWjtBQUVBLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLE1BQU0sR0FBRztBQUN2QixRQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFDcEMsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLEtBQUssS0FBSyxHQUFHO0FBQzNCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFdBQU87QUFBQSxFQUNUO0FBdUJPLFdBQVMsV0FBVyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQ3pHLFFBQUksTUFBTSxJQUFhLFdBQVcsRUFBRTtBQUNwQyxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBd0JPLFdBQVMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDdkcsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQVFPLFdBQVMsU0FBUyxLQUFLO0FBQzVCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLFVBQVUsS0FBSyxHQUFHO0FBRWhDLFFBQUksUUFBUSxHQUFHO0FBQ2IsVUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixVQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixVQUFJLE1BQU0sRUFBRSxFQUFFO0FBQ2QsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2IsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDYixVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQUEsSUFDWixPQUFPO0FBQ0wsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2IsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2IsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQUEsSUFDaEI7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsT0FBTyxLQUFLLEdBQUc7QUFDN0IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUUsUUFBSSxDQUFDLEtBQUs7QUFDUixhQUFPO0FBQUEsSUFDVDtBQUVBLFVBQU0sSUFBTTtBQUNaLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFFBQUksRUFBRSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxRQUFRLEtBQUssR0FBRztBQUM5QixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLEVBQUUsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsUUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsUUFBSSxFQUFFLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLFFBQUksRUFBRSxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxXQUFPO0FBQUEsRUFDVDtBQVFPLFdBQVMsWUFBWSxHQUFHO0FBQzdCLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUU1QixXQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUFBLEVBQzNFO0FBVU8sV0FBUyxTQUFTLEtBQUssR0FBRyxHQUFHO0FBQ2xDLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFFZCxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxFQUFFO0FBQ1QsU0FBSyxFQUFFLEVBQUU7QUFDVCxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFNBQUssRUFBRSxFQUFFO0FBQ1QsU0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsVUFBVSxLQUFLLEdBQUcsR0FBRztBQUNuQyxRQUFJLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQztBQUNYLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixRQUFJLEtBQUssS0FBSyxLQUFLO0FBRW5CLFFBQUksTUFBTSxLQUFLO0FBQ2IsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFO0FBQy9DLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUMvQyxVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLElBQUksSUFBSSxFQUFFLEVBQUU7QUFDaEQsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO0FBQUEsSUFDbEQsT0FBTztBQUNMLFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLEVBQUU7QUFDVixZQUFNLEVBQUUsRUFBRTtBQUNWLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUM1QyxVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFDNUMsVUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO0FBQzVDLFVBQUksRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQzlDO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLE1BQU0sS0FBSyxHQUFHLEdBQUc7QUFDL0IsUUFB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Q2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQUEsSUFDaEI7QUFHQSxRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixXQUFPO0FBQUEsRUFDVDtBQWFPLFdBQVMsZ0JBQWdCLEtBQUssR0FBRztBQUN0QyxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBYU8sV0FBUyxZQUFZLEtBQUssR0FBRztBQUNsQyxRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJ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Q0FBQyxLQUFLLEtBQUssS0FBSyxPQUFPO0FBQzNCLFFBQUksQ0FBQyxLQUFLLEtBQUssTUFBTTtBQUNyQixRQUFJLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDckIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDckIsUUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLLE9BQU87QUFDM0IsUUFBSSxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ3JCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ3JCLFFBQUksQ0FBQyxLQUFLLEtBQUssTUFBTTtBQUNyQixRQUFJLEVBQUUsS0FBSyxLQUFLLEtBQUssT0FBTztBQUM1QixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFzQk8sV0FBUyxtQ0FBbUMsS0FBS0EsSUFBRyxHQUFHLEdBQUcsR0FBRztBQUVsRSxRQUFJLElBQUlBLEdBQUUsQ0FBQyxHQUNQLElBQUlBLEdBQUUsQ0FBQyxHQUNQLElBQUlBLEdBQUUsQ0FBQyxHQUNQLElBQUlBLEdBQUUsQ0FBQztBQUNYLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDO0FB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QUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLElBQUksR0FBRztBQUNyQixXQUFPLFVBQVUsRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLEVBQUUsSUFBSSxPQUFPLEVBQUUsRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLElBQUksT0FBTyxFQUFFLEVBQUUsSUFBSSxPQUFPLEVBQUUsRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLElBQUk7QUFBQSxFQUNsUDtBQVFPLFdBQVMsS0FBSyxHQUFHO0FBQ3RCLFdBQU8sS0FBSyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQUEsRUFDeEg7QUFVTyxXQUFTLElBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxTQUFTLEtBQUssR0FBRyxHQUFHO0FBQ2xDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsZUFBZSxLQUFLLEdBQUcsR0FBRztBQUN4QyxRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVMscUJBQXFCLEtBQUssR0FBRyxHQUFHRyxRQUFPO0FBQ3JELFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsWUFBWSxHQUFHLEdBQUc7QUFDaEMsV0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUU7QUFBQSxFQUNoUztBQVNPLFdBQVMsT0FBTyxHQUFHLEdBQUc7QUFDM0IsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxXQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxHQUFH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LElBQUksTUFBTTtBQUNuQixRQUFJLENBQUMsSUFBSSxJQUFJLE1BQU07QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxTQUFRLEtBQUssR0FBRyxHQUFHLEtBQUs7QUFDdEMsUUFBSSxJQUFJLENBQUMsR0FDTCxJQUFJLENBQUM7QUFFVCxNQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDakIsTUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pCLE1BQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUVqQixNQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDVixNQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxLQUFLLElBQUksR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ2pELE1BQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksS0FBSyxJQUFJLEdBQUc7QUFFakQsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxTQUFRLEtBQUssR0FBRyxHQUFHLEtBQUs7QUFDdEMsUUFBSSxJQUFJLENBQUMsR0FDTCxJQUFJLENBQUM7QUFFVCxNQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDakIsTUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pCLE1BQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUVqQixNQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxLQUFLLElBQUksR0FBRyxJQUFJLEVB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UUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixR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LEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLElBQUksS0FDYixNQUFNLEVBQUUsQ0FBQyxJQUFJLEtBQ2IsTUFBTSxFQUFFLENBQUMsSUFBSSxLQUNiLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM3QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM3QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM3QyxRQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzlDLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBU0MsU0FBUSxLQUFLLEdBQUcsS0FBSztBQUNuQyxRQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FDVCxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQ1QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUNULEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixNQUFNLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssSUFDekMsTUFBTSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLElBQ3pDLE1BQU0sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxJQUN6QyxNQUFNLEtBQUss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SUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUc7QUFDckIsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTUSxLQUFJLEtBQUssR0FBRyxHQUFHO0FBQzdCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxVQUFTLEtBQUssR0FBRyxHQUFHO0FBQ2xDLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25ELFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNuRCxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FB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LElBQ3BDO0FBQUEsSUFDQTtBQUFBLE1BQ0ksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNoQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLE1BQ2hDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQUEsTUFDaEMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNoQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLElBQ3BDO0FBQUEsSUFDQTtBQUFBLE1BQ0ksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNoQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLE1BQ2hDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQUEsTUFDaEMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNoQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLElBQ3BDO0FBQUEsSUFDQTtBQUFBLE1BQ0ksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNoQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdB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QUFDL0IsY0FBSSxPQUFPLFFBQVEsQ0FBQyxHQUFHLFNBQVMsV0FBVztBQUN2QyxtQkFBTyxRQUFRLENBQUMsRUFBRyxhQUFhLENBQVcsRUFBRyxRQUFRO0FBQ3REO0FBQUEsVUFDSjtBQUFBLFFBQ0osT0FBTztBQUNILG9CQUFVLEtBQUssV0FBVyxRQUFRO0FBQUEsUUFDdEM7QUFBQSxNQUNKLE9BQU87QUFDSCxrQkFBVSxLQUFLLFdBQVcsUUFBUTtBQUNsQyxnQkFBUSxJQUFJLEtBQUs7QUFBQSxNQUNyQjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBckVJLGdCQURTLFlBQ0YsWUFBVztBQUdsQjtBQUFBLElBREMsU0FBUyxPQUFPO0FBQUEsS0FIUixXQUlUO0FBR0E7QUFBQSxJQURDLFNBQVMsT0FBTztBQUFBLEtBTlIsV0FPVDtBQUdBO0FBQUEsSUFEQyxTQUFTLEtBQUssSUFBSTtBQUFBLEtBVFYsV0FVVDs7O0FDeEJKLGtCQUFnQixZQUFnQztBQUVoRCxrQkFBZ0JDLGFBQTZCO0FBRTdDLGtCQUFnQkEsYUFBZ0M7QUFFaEQsa0JBQWdCLDRCQUE0QjtBQUU1QyxrQkFBZ0IsaUJBQThDO0FBRTlELGtCQUFnQix1QkFBb0Q7QUFFcEUsa0JBQWdCLDJCQUF3RDtBQUV4RSxrQkFBZ0IsWUFBeUM7QUFFekQsa0JBQWdCLGVBQTRDO0FBRTVELGtCQUFnQix5QkFBc0Q7QUFFdEUsa0JBQWdCLGVBQTRDO0FBRTVELGtCQUFnQixzQkFBbUQ7QUFFbkUsa0JBQWdCLHdCQUFxRDtBQUVyRSxrQkFBZ0IsbUJBQWdEO0FBRWhFLGtCQUFnQix5QkFBaUQ7IiwKICAibmFtZXMiOiBbIkhvd2xlckdsb2JhbCIsICJzZWxmIiwgIkhvd2xlciIsICJlIiwgImkiLCAiSG93bCIsICJzdHIiLCAiU291bmQiLCAidGltZW91dCIsICJsZW4iLCAiZWFyY3V0IiwgImVxdWFscyIsICJsZW4iLCAicSIsICJjbGFtcCIsICJsZXJwIiwgIlR5cGUiLCAiVHJhbnNhY3Rpb25UeXBlIiwgIm1pbiIsICJtYXgiLCAic3RyIiwgImNyZWF0ZURlc3Ryb3llZFByb3h5IiwgIk1hdGVyaWFsUGFyYW1UeXBlIiwgInB0ciIsICJtYXgiLCAiTG9nVGFnIiwgIkNvbGxpZGVyIiwgIkFsaWdubWVudCIsICJWZXJ0aWNhbEFsaWdubWVudCIsICJUZXh0RWZmZWN0IiwgIklucHV0VHlwZSIsICJMaWdodFR5cGUiLCAiQW5pbWF0aW9uU3RhdGUiLCAiRm9yY2VNb2RlIiwgIkNvbGxpc2lvbkV2ZW50VHlwZSIsICJTaGFwZSIsICJNZXNoQXR0cmlidXRlIiwgIm9mZnNldCIsICJsZW5ndGgiLCAiYW5nbGUiLCAiTG9ja0F4aXMiLCAiZiIsICJNZXNoSW5kZXhUeXBlIiwgIk1lc2hTa2lubmluZ1R5cGUiLCAiY2FudmFzIiwgImluZGV4IiwgInEiLCAib2Zmc2V0IiwgIkxvZ0xldmVsIiwgIl9fZGVjb3JhdGUiLCAiY2FudmFzIiwgImNvbnRleHQiLCAiY29weSIsICJfX2RlY29yYXRlIiwgIl9fZGVjb3JhdGUiLCAiY3JlYXRlIiwgImNyZWF0ZSIsICJsZW4iLCAicSIsICJmIiwgInNjYWxlIiwgImFkZCIsICJjbG9uZSIsICJjb3B5IiwgImNyZWF0ZSIsICJkb3QiLCAiZXF1YWxzIiwgImV4YWN0RXF1YWxzIiwgImZyb21WYWx1ZXMiLCAiaWRlbnRpdHkiLCAiaW52ZXJ0IiwgImxlbiIsICJsZW5ndGgiLCAibGVycCIsICJtdWwiLCAibXVsdGlwbHkiLCAibm9ybWFsaXplIiwgInJhbmRvbSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3FyTGVuIiwgInNxdWFyZWRMZW5ndGgiLCAic3RyIiwgImFkZCIsICJjbG9uZSIsICJjb3B5IiwgImNyZWF0ZSIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVZhbHVlcyIsICJtdWwiLCAibXVsdGlwbHkiLCAicm90YXRlWCIsICJyb3RhdGVZIiwgInJvdGF0ZVoiLCAic2NhbGUiLCAic2V0IiwgInN0ciIsICJzdWIiLCAic3VidHJhY3QiLCAiY3JlYXRlIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgInN1YnRyYWN0IiwgIm11bHRpcGx5IiwgInNjYWxlIiwgImxlbiIsICJxIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInN0ciIsICJleGFjdEVxdWFscyIsICJlcXVhbHMiLCAic3ViIiwgIm11bCIsICJvZmZzZXQiLCAibCIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJjb3B5IiwgInNldCIsICJhZGQiLCAic2NhbGUiLCAibGVuZ3RoIiwgInNxdWFyZWRMZW5ndGgiLCAibm9ybWFsaXplIiwgImxlbiIsICJkb3QiLCAibGVycCIsICJleGFjdEVxdWFscyIsICJlcXVhbHMiLCAiZm9yRWFjaCIsICJjcmVhdGUiLCAib2Zmc2V0IiwgImwiLCAiY3JlYXRlIiwgImlkZW50aXR5IiwgInEiLCAiZG90IiwgIm11bHRpcGx5IiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInJhbmRvbSIsICJpbnZlcnQiLCAic3RyIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgIm11bCIsICJsZXJwIiwgImxlbmd0aCIsICJsZW4iLCAic3F1YXJlZExlbmd0aCIsICJzcXJMZW4iLCAibm9ybWFsaXplIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJhZGQiLCAiY2xvbmUiLCAiY29uanVnYXRlIiwgImNvcHkiLCAiY3JlYXRlIiwgImRvdCIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVJvdGF0aW9uIiwgImZyb21Sb3RhdGlvblRyYW5zbGF0aW9uIiwgImZyb21UcmFuc2xhdGlvbiIsICJmcm9tVmFsdWVzIiwgImdldFRyYW5zbGF0aW9uIiwgImlkZW50aXR5IiwgImludmVydCIsICJsZW4iLCAibGVuZ3RoIiwgImxlcnAiLCAibXVsIiwgIm11bHRpcGx5IiwgIm5vcm1hbGl6ZSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3FyTGVuIiwgInNxdWFyZWRMZW5ndGgiLCAic3RyIiwgInRyYW5zbGF0ZSIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJmcm9tUm90YXRpb25UcmFuc2xhdGlvbiIsICJxIiwgImZyb21UcmFuc2xhdGlvbiIsICJmcm9tUm90YXRpb24iLCAiY29weSIsICJpZGVudGl0eSIsICJzZXQiLCAiZ2V0VHJhbnNsYXRpb24iLCAidHJhbnNsYXRlIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgImFkZCIsICJtdWx0aXBseSIsICJtdWwiLCAic2NhbGUiLCAiZG90IiwgImxlcnAiLCAibXQiLCAiaW52ZXJ0IiwgInNxdWFyZWRMZW5ndGgiLCAiY29uanVnYXRlIiwgImxlbmd0aCIsICJsZW4iLCAic3FyTGVuIiwgIm5vcm1hbGl6ZSIsICJzdHIiLCAiZXhhY3RFcXVhbHMiLCAiZXF1YWxzIiwgIl9fZGVjb3JhdGUiLCAiX19kZWNvcmF0ZSIsICJkaXN0YW5jZSIsICJfX2RlY29yYXRlIiwgIm1heCIsICJtaW4iLCAiY2xvbmUiLCAiaWQiLCAicmFuZG9tIiwgImMiLCAic2NhbGUiLCAibGVycCIsICJjbGFtcCIsICJtaW4iLCAibWF4IiwgImRpc3RfZXhwb3J0cyIsICJjb25maWciLCAiX19kZWNvcmF0ZSIsICJ0ZW1wUXVhdCIsICJmIiwgIl9fZGVjb3JhdGUiLCAiX19kZWNvcmF0ZSIsICJ0ZW1wVmVjIiwgImNhbnZhcyIsICJkaXN0IiwgImYiLCAiX19kZWNvcmF0ZSIsICJfX2RlY29yYXRlIiwgImltcG9ydF9ob3dsZXIiLCAiX19kZWNvcmF0ZSIsICJjYW52YXMiLCAiX19kZWNvcmF0ZSIsICJhIiwgImRpcmVjdGlvbiIsICJfX2RlY29yYXRlIiwgImNsYW1wIiwgInRlbXBRdWF0IiwgInRhcmdldFBvcyIsICJfX2RlY29yYXRlIiwgInRlbXBWZWMzIiwgImwiLCAiZWFyY3V0IiwgImxvb2tBdCIsICJvZmZzZXQiLCAiZGlzdCIsICJkb3QiLCAiX2RpcmVjdGlvbiIsICJfX2RlY29yYXRlIiwgIm1pbiIsICJtYXgiLCAiX19kZWNvcmF0ZSIsICJwcmV2ZW50RGVmYXVsdCIsICJ0ZW1wVmVjIiwgInRlbXBWZWMzIiwgImNhbnZhcyIsICJkaXN0X2V4cG9ydHMiLCAiVHlwZSIsICJQcm9wZXJ0eSIsICJwcm9wZXJ0eURlY29yYXRvciIsICJlbnVtZXJhYmxlIiwgIm5hdGl2ZVByb3BlcnR5IiwgIlR5cGUiLCAicHJvcGVydHkiLCAiUHJvcGVydHkiLCAiaXNOdW1iZXIiLCAiRW1pdHRlciIsICJSZXRhaW5FbWl0dGVyIiwgIl9fZGVjb3JhdGUiLCAiQ29sbGlkZXIiLCAiQWxpZ25tZW50IiwgIkp1c3RpZmljYXRpb24iLCAiVGV4dEVmZmVjdCIsICJJbnB1dFR5cGUiLCAiTGlnaHRUeXBlIiwgIkFuaW1hdGlvblN0YXRlIiwgIkZvcmNlTW9kZSIsICJDb2xsaXNpb25FdmVudFR5cGUiLCAiU2hhcGUiLCAiTWVzaEF0dHJpYnV0ZSIsICJNYXRlcmlhbFBhcmFtVHlwZSIsICJjcmVhdGVEZXN0cm95ZWRQcm94eSIsICJEZXN0cm95ZWRPYmplY3RJbnN0YW5jZSIsICJEZXN0cm95ZWRDb21wb25lbnRJbnN0YW5jZSIsICJpc01lc2hTaGFwZSIsICJpc0Jhc2VDb21wb25lbnRDbGFzcyIsICJTUVJUXzMiLCAiQ29tcG9uZW50IiwgImluaGVyaXRQcm9wZXJ0aWVzIiwgIkJyb2tlbkNvbXBvbmVudCIsICJpc0Jhc2VDb21wb25lbnRDbGFzcyIsICJDb2xsaWRlciIsICJsZW5ndGgiLCAiQ29sbGlzaW9uQ29tcG9uZW50IiwgIl9fZGVjb3JhdGUiLCAibmF0aXZlUHJvcGVydHkiLCAiVGV4dENvbXBvbmVudCIsICJNYXRlcmlhbCIsICJWaWV3Q29tcG9uZW50IiwgImVudW1lcmFibGUiLCAiSW5wdXRDb21wb25lbnQiLCAiSW5wdXRUeXBlIiwgIkxpZ2h0Q29tcG9uZW50IiwgImFuZ2xlIiwgIkFuaW1hdGlvbkNvbXBvbmVudCIsICJBbmltYXRpb24iLCAiTWVzaENvbXBvbmVudCIsICJNZXNoIiwgIlNraW4iLCAiTG9ja0F4aXMiLCAiUGh5c1hDb21wb25lbnQiLCAib2Zmc2V0IiwgImlzTWVzaFNoYXBlIiwgImYiLCAiRm9yY2VNb2RlIiwgIk1lc2hJbmRleFR5cGUiLCAiTWVzaFNraW5uaW5nVHlwZSIsICJNZXNoIiwgImlzTnVtYmVyIiwgIk1lc2hBdHRyaWJ1dGVBY2Nlc3NvciIsICJNZXNoQXR0cmlidXRlIiwgIk1hdGVyaWFsIiwgIk1hdGVyaWFsUGFyYW1UeXBlIiwgIkFuaW1hdGlvbiIsICJTa2luIiwgImFuaW1JZCIsICJTa2luIiwgIlhSIiwgIl9jb21wb25lbnREZWZhdWx0cyIsICJUeXBlIiwgIldBU00iLCAidGhyZWFkcyIsICJCcm9rZW5Db21wb25lbnQiLCAiQ29tcG9uZW50IiwgImluaGVyaXRQcm9wZXJ0aWVzIiwgInN0ciIsICJYUiIsICJSZXRhaW5FbWl0dGVyIiwgIk1lc2giLCAiTWF0ZXJpYWwiLCAiQW5pbWF0aW9uIiwgIlNraW4iLCAidGVtcFZlYyIsICJ0ZW1wVmVjMiIsICJDb21wb25lbnQiLCAidGVtcFZlYyIsICJ0ZW1wVmVjMiIsICJjb25maWciLCAiQXVkaW9DaGFubmVsIiwgIlBsYXlTdGF0ZSIsICJFbWl0dGVyIiwgImNvbmZpZyIsICJfX2RlY29yYXRlIiwgIlBhbm5pbmdUeXBlIiwgImF1ZGlvQnVmZmVyIiwgInJlZmVyZW5jZUNvdW50IiwgIkNvbXBvbmVudCIsICJFbWl0dGVyIiwgInByb3BlcnR5IiwgInJlcXVpcmVfYmluZCIsICJfX2NvbW1vbkpTTWluIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImZuIiwgInRoaXNBcmciLCAiYXJncyIsICJpIiwgInJlcXVpcmVfdXRpbHMiLCAiYmluZCIsICJ0b1N0cmluZyIsICJraW5kT2YiLCAiY2FjaGUiLCAidGhpbmciLCAic3RyIiwgImtpbmRPZlRlc3QiLCAidHlwZSIsICJpc0FycmF5IiwgInZhbCIsICJpc1VuZGVmaW5lZCIsICJpc0J1ZmZlciIsICJpc0FycmF5QnVmZmVyIiwgImlzQXJyYXlCdWZmZXJWaWV3IiwgInJlc3VsdCIsICJpc1N0cmluZyIsICJpc051bWJlciIsICJpc09iamVjdCIsICJpc1BsYWluT2JqZWN0IiwgInByb3RvdHlwZSIsICJpc0RhdGUiLCAiaXNGaWxlIiwgImlzQmxvYiIsICJpc0ZpbGVMaXN0IiwgImlzRnVuY3Rpb24iLCAiaXNTdHJlYW0iLCAiaXNGb3JtRGF0YSIsICJwYXR0ZXJuIiwgImlzVVJMU2VhcmNoUGFyYW1zIiwgInRyaW0iLCAiaXNTdGFuZGFyZEJyb3dzZXJFbnYiLCAiZm9yRWFjaCIsICJvYmoiLCAibCIsICJrZXkiLCAibWVyZ2UiLCAiYXNzaWduVmFsdWUiLCAiZXh0ZW5kIiwgImEiLCAiYiIsICJzdHJpcEJPTSIsICJjb250ZW50IiwgImluaGVyaXRzIiwgImNvbnN0cnVjdG9yIiwgInN1cGVyQ29uc3RydWN0b3IiLCAicHJvcHMiLCAiZGVzY3JpcHRvcnMiLCAidG9GbGF0T2JqZWN0IiwgInNvdXJjZU9iaiIsICJkZXN0T2JqIiwgImZpbHRlciIsICJwcm9wIiwgIm1lcmdlZCIsICJlbmRzV2l0aCIsICJzZWFyY2hTdHJpbmciLCAicG9zaXRpb24iLCAibGFzdEluZGV4IiwgInRvQXJyYXkiLCAiYXJyIiwgImlzVHlwZWRBcnJheSIsICJUeXBlZEFycmF5IiwgInJlcXVpcmVfYnVpbGRVUkwiLCAidXRpbHMiLCAiZW5jb2RlIiwgInVybCIsICJwYXJhbXMiLCAicGFyYW1zU2VyaWFsaXplciIsICJzZXJpYWxpemVkUGFyYW1zIiwgInBhcnRzIiwgInYiLCAiaGFzaG1hcmtJbmRleCIsICJyZXF1aXJlX0ludGVyY2VwdG9yTWFuYWdlciIsICJJbnRlcmNlcHRvck1hbmFnZXIiLCAiZnVsZmlsbGVkIiwgInJlamVjdGVkIiwgIm9wdGlvbnMiLCAiaWQiLCAiaCIsICJyZXF1aXJlX25vcm1hbGl6ZUhlYWRlck5hbWUiLCAiaGVhZGVycyIsICJub3JtYWxpemVkTmFtZSIsICJ2YWx1ZSIsICJuYW1lIiwgInJlcXVpcmVfQXhpb3NFcnJvciIsICJBeGlvc0Vycm9yIiwgIm1lc3NhZ2UiLCAiY29kZSIsICJjb25maWciLCAicmVxdWVzdCIsICJyZXNwb25zZSIsICJlcnJvciIsICJjdXN0b21Qcm9wcyIsICJheGlvc0Vycm9yIiwgInJlcXVpcmVfdHJhbnNpdGlvbmFsIiwgInJlcXVpcmVfdG9Gb3JtRGF0YSIsICJ0b0Zvcm1EYXRhIiwgImZvcm1EYXRhIiwgInN0YWNrIiwgImNvbnZlcnRWYWx1ZSIsICJidWlsZCIsICJkYXRhIiwgInBhcmVudEtleSIsICJmdWxsS2V5IiwgImVsIiwgInJlcXVpcmVfc2V0dGxlIiwgInJlc29sdmUiLCAicmVqZWN0IiwgInZhbGlkYXRlU3RhdHVzIiwgInJlcXVpcmVfY29va2llcyIsICJleHBpcmVzIiwgInBhdGgiLCAiZG9tYWluIiwgInNlY3VyZSIsICJjb29raWUiLCAibWF0Y2giLCAicmVxdWlyZV9pc0Fic29sdXRlVVJMIiwgInJlcXVpcmVfY29tYmluZVVSTHMiLCAiYmFzZVVSTCIsICJyZWxhdGl2ZVVSTCIsICJyZXF1aXJlX2J1aWxkRnVsbFBhdGgiLCAiaXNBYnNvbHV0ZVVSTCIsICJjb21iaW5lVVJMcyIsICJyZXF1ZXN0ZWRVUkwiLCAicmVxdWlyZV9wYXJzZUhlYWRlcnMiLCAiaWdub3JlRHVwbGljYXRlT2YiLCAicGFyc2VkIiwgImxpbmUiLCAicmVxdWlyZV9pc1VSTFNhbWVPcmlnaW4iLCAibXNpZSIsICJ1cmxQYXJzaW5nTm9kZSIsICJvcmlnaW5VUkwiLCAicmVzb2x2ZVVSTCIsICJocmVmIiwgInJlcXVlc3RVUkwiLCAicmVxdWlyZV9DYW5jZWxlZEVycm9yIiwgIkNhbmNlbGVkRXJyb3IiLCAicmVxdWlyZV9wYXJzZVByb3RvY29sIiwgInJlcXVpcmVfeGhyIiwgInNldHRsZSIsICJjb29raWVzIiwgImJ1aWxkVVJMIiwgImJ1aWxkRnVsbFBhdGgiLCAicGFyc2VIZWFkZXJzIiwgImlzVVJMU2FtZU9yaWdpbiIsICJ0cmFuc2l0aW9uYWxEZWZhdWx0cyIsICJwYXJzZVByb3RvY29sIiwgInJlcXVlc3REYXRhIiwgInJlcXVlc3RIZWFkZXJzIiwgInJlc3BvbnNlVHlwZSIsICJvbkNhbmNlbGVkIiwgImRvbmUiLCAidXNlcm5hbWUiLCAicGFzc3dvcmQiLCAiZnVsbFBhdGgiLCAib25sb2FkZW5kIiwgInJlc3BvbnNlSGVhZGVycyIsICJyZXNwb25zZURhdGEiLCAiZXJyIiwgInRpbWVvdXRFcnJvck1lc3NhZ2UiLCAidHJhbnNpdGlvbmFsIiwgInhzcmZWYWx1ZSIsICJjYW5jZWwiLCAicHJvdG9jb2wiLCAicmVxdWlyZV9udWxsIiwgInJlcXVpcmVfZGVmYXVsdHMiLCAibm9ybWFsaXplSGVhZGVyTmFtZSIsICJERUZBVUxUX0NPTlRFTlRfVFlQRSIsICJzZXRDb250ZW50VHlwZUlmVW5zZXQiLCAiZ2V0RGVmYXVsdEFkYXB0ZXIiLCAiYWRhcHRlciIsICJzdHJpbmdpZnlTYWZlbHkiLCAicmF3VmFsdWUiLCAicGFyc2VyIiwgImVuY29kZXIiLCAiZSIsICJkZWZhdWx0cyIsICJpc09iamVjdFBheWxvYWQiLCAiY29udGVudFR5cGUiLCAiX0Zvcm1EYXRhIiwgInNpbGVudEpTT05QYXJzaW5nIiwgImZvcmNlZEpTT05QYXJzaW5nIiwgInN0cmljdEpTT05QYXJzaW5nIiwgInN0YXR1cyIsICJtZXRob2QiLCAicmVxdWlyZV90cmFuc2Zvcm1EYXRhIiwgImZucyIsICJjb250ZXh0IiwgInJlcXVpcmVfaXNDYW5jZWwiLCAicmVxdWlyZV9kaXNwYXRjaFJlcXVlc3QiLCAidHJhbnNmb3JtRGF0YSIsICJpc0NhbmNlbCIsICJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwgInJlYXNvbiIsICJyZXF1aXJlX21lcmdlQ29uZmlnIiwgImNvbmZpZzEiLCAiY29uZmlnMiIsICJnZXRNZXJnZWRWYWx1ZSIsICJ0YXJnZXQiLCAic291cmNlIiwgIm1lcmdlRGVlcFByb3BlcnRpZXMiLCAidmFsdWVGcm9tQ29uZmlnMiIsICJkZWZhdWx0VG9Db25maWcyIiwgIm1lcmdlRGlyZWN0S2V5cyIsICJtZXJnZU1hcCIsICJjb25maWdWYWx1ZSIsICJyZXF1aXJlX2RhdGEiLCAicmVxdWlyZV92YWxpZGF0b3IiLCAiVkVSU0lPTiIsICJ2YWxpZGF0b3JzIiwgImRlcHJlY2F0ZWRXYXJuaW5ncyIsICJ2YWxpZGF0b3IiLCAidmVyc2lvbiIsICJmb3JtYXRNZXNzYWdlIiwgIm9wdCIsICJkZXNjIiwgIm9wdHMiLCAiYXNzZXJ0T3B0aW9ucyIsICJzY2hlbWEiLCAiYWxsb3dVbmtub3duIiwgImtleXMiLCAicmVxdWlyZV9BeGlvcyIsICJkaXNwYXRjaFJlcXVlc3QiLCAibWVyZ2VDb25maWciLCAiQXhpb3MiLCAiaW5zdGFuY2VDb25maWciLCAiY29uZmlnT3JVcmwiLCAicmVxdWVzdEludGVyY2VwdG9yQ2hhaW4iLCAic3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzIiwgImludGVyY2VwdG9yIiwgInJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiIsICJwcm9taXNlIiwgImNoYWluIiwgIm5ld0NvbmZpZyIsICJvbkZ1bGZpbGxlZCIsICJvblJlamVjdGVkIiwgImdlbmVyYXRlSFRUUE1ldGhvZCIsICJpc0Zvcm0iLCAicmVxdWlyZV9DYW5jZWxUb2tlbiIsICJDYW5jZWxUb2tlbiIsICJleGVjdXRvciIsICJyZXNvbHZlUHJvbWlzZSIsICJ0b2tlbiIsICJvbmZ1bGZpbGxlZCIsICJfcmVzb2x2ZSIsICJsaXN0ZW5lciIsICJpbmRleCIsICJjIiwgInJlcXVpcmVfc3ByZWFkIiwgImNhbGxiYWNrIiwgInJlcXVpcmVfaXNBeGlvc0Vycm9yIiwgInBheWxvYWQiLCAicmVxdWlyZV9heGlvcyIsICJjcmVhdGVJbnN0YW5jZSIsICJkZWZhdWx0Q29uZmlnIiwgImluc3RhbmNlIiwgImF4aW9zIiwgInByb21pc2VzIiwgImltcG9ydF9heGlvcyIsICJhc3NldHNVUkwiLCAiZm9ybWF0cyIsICJjaGVja09jdWx1c0Jyb3dzZXIiLCAiZmVhdHVyZURldGVjdCIsICJ1YUNoZWNrIiwgImNvbmZpZGVuY2UiLCAiY2hlY2tXb2x2aWNCcm93c2VyIiwgImNoZWNrUGljb0Jyb3dzZXIiLCAiY2hlY2tEZXNrdG9wQnJvd3NlciIsICJjaGVja1VzZXJQbGF0Zm9ybSIsICJjdXJyZW50TWF0Y2giLCAib3BlblVSTCIsICJtb2RhbCIsICJ5ZXMiLCAibm8iLCAiQkVBQ09OX0dSQVBIUUxfVVJJIiwgIkRCX0VORFBPSU5UIiwgImZldGNoQ2FtcGFpZ25BZCIsICJhZFVuaXRJZCIsICJmb3JtYXQiLCAic3R5bGUiLCAicmVzIiwgInNlbmRPbkxvYWRNZXRyaWMiLCAic3BhY2VJZCIsICJjYW1wYWlnbklkIiwgInBsYXRmb3JtIiwgInNlbmRPbkNsaWNrTWV0cmljIiwgImZvcm1hdHNMaW5rIiwgIm5ldHdvcmtpbmdMaW5rIiwgIlplc3R5QmFubmVyIiwgIkNvbXBvbmVudCIsICJlbmdpbmUiLCAiQ3Vyc29yVGFyZ2V0IiwgIk1lc2hDb21wb25lbnQiLCAiQ29sbGlzaW9uQ29tcG9uZW50IiwgIkNvbGxpZGVyIiwgImZvcm1hdHNTY3JpcHQiLCAiYmFubmVyIiwgIm0iLCAicGlwZWxpbmUiLCAiYWRVbml0IiwgImFjdGl2ZUNhbXBhaWduIiwgImltYWdlIiwgInRleHR1cmUiLCAiX19wdWJsaWNGaWVsZCIsICJQcm9wZXJ0eSIsICJkIiwgImIiLCAibCIsICJTdWJzY3JpcHRpb24iLCAidGltZW91dCIsICJTdWJzY3JpYmVyIiwgIkNvbnN1bWVyT2JzZXJ2ZXIiLCAiU2FmZVN1YnNjcmliZXIiLCAiaWRlbnRpdHkiLCAiaWRlbnRpdHkiLCAiT2JzZXJ2YWJsZSIsICJvYnNlcnZhYmxlIiwgIk9wZXJhdG9yU3Vic2NyaWJlciIsICJlcnIiLCAiU3ViamVjdCIsICJvYnNlcnZhYmxlIiwgIkFub255bW91c1N1YmplY3QiLCAiU3RhdGUiLCAiZGlyZWN0aW9uIiwgInRlbXBRdWF0MiIsICJ0ZW1wUXVhdCIsICJkaXN0YW5jZSIsICJFYXNpbmciLCAibGVycCIsICJnZXRFYXNpbmdGdW5jdGlvbiIsICJkaXN0IiwgImNsYW1wIiwgImxlcnAiLCAiZGlzdGFuY2UiLCAiZGlyZWN0aW9uIiwgInRlbXBWZWMzIiwgImNsYW1wIiwgIkVhc2luZyIsICJ0ZW1wVmVjIiwgImRpcmVjdGlvbiIsICJoYW5kZWRuZXNzIiwgInRlbXBWZWMzIiwgImRpc3RfZXhwb3J0cyJdCn0K
